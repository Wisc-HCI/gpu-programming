function IX(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const o=Object.getOwnPropertyDescriptor(i,s);o&&Object.defineProperty(n,s,o.get?o:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function n0(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})}),t}var dG={exports:{}},YA={},pG={exports:{}},Gi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gw=Symbol.for("react.element"),RX=Symbol.for("react.portal"),kX=Symbol.for("react.fragment"),OX=Symbol.for("react.strict_mode"),LX=Symbol.for("react.profiler"),DX=Symbol.for("react.provider"),NX=Symbol.for("react.context"),BX=Symbol.for("react.forward_ref"),PX=Symbol.for("react.suspense"),FX=Symbol.for("react.memo"),UX=Symbol.for("react.lazy"),CF=Symbol.iterator;function zX(n){return n===null||typeof n!="object"?null:(n=CF&&n[CF]||n["@@iterator"],typeof n=="function"?n:null)}var fG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mG=Object.assign,gG={};function QT(n,e,t){this.props=n,this.context=e,this.refs=gG,this.updater=t||fG}QT.prototype.isReactComponent={};QT.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};QT.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _G(){}_G.prototype=QT.prototype;function lN(n,e,t){this.props=n,this.context=e,this.refs=gG,this.updater=t||fG}var uN=lN.prototype=new _G;uN.constructor=lN;mG(uN,QT.prototype);uN.isPureReactComponent=!0;var MF=Array.isArray,vG=Object.prototype.hasOwnProperty,cN={current:null},yG={key:!0,ref:!0,__self:!0,__source:!0};function bG(n,e,t){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)vG.call(e,i)&&!yG.hasOwnProperty(i)&&(s[i]=e[i]);var u=arguments.length-2;if(u===1)s.children=t;else if(1<u){for(var h=Array(u),d=0;d<u;d++)h[d]=arguments[d+2];s.children=h}if(n&&n.defaultProps)for(i in u=n.defaultProps,u)s[i]===void 0&&(s[i]=u[i]);return{$$typeof:gw,type:n,key:o,ref:l,props:s,_owner:cN.current}}function HX(n,e){return{$$typeof:gw,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function hN(n){return typeof n=="object"&&n!==null&&n.$$typeof===gw}function GX(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var AF=/\/+/g;function KR(n,e){return typeof n=="object"&&n!==null&&n.key!=null?GX(""+n.key):e.toString(36)}function mM(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var l=!1;if(n===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(n.$$typeof){case gw:case RX:l=!0}}if(l)return l=n,s=s(l),n=i===""?"."+KR(l,0):i,MF(s)?(t="",n!=null&&(t=n.replace(AF,"$&/")+"/"),mM(s,e,t,"",function(d){return d})):s!=null&&(hN(s)&&(s=HX(s,t+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(AF,"$&/")+"/")+n)),e.push(s)),1;if(l=0,i=i===""?".":i+":",MF(n))for(var u=0;u<n.length;u++){o=n[u];var h=i+KR(o,u);l+=mM(o,e,t,h,s)}else if(h=zX(n),typeof h=="function")for(n=h.call(n),u=0;!(o=n.next()).done;)o=o.value,h=i+KR(o,u++),l+=mM(o,e,t,h,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function vx(n,e,t){if(n==null)return n;var i=[],s=0;return mM(n,i,"","",function(o){return e.call(t,o,s++)}),i}function WX(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var up={current:null},gM={transition:null},VX={ReactCurrentDispatcher:up,ReactCurrentBatchConfig:gM,ReactCurrentOwner:cN};Gi.Children={map:vx,forEach:function(n,e,t){vx(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return vx(n,function(){e++}),e},toArray:function(n){return vx(n,function(e){return e})||[]},only:function(n){if(!hN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Gi.Component=QT;Gi.Fragment=kX;Gi.Profiler=LX;Gi.PureComponent=lN;Gi.StrictMode=OX;Gi.Suspense=PX;Gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VX;Gi.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=mG({},n.props),s=n.key,o=n.ref,l=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=cN.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var u=n.type.defaultProps;for(h in e)vG.call(e,h)&&!yG.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=t;else if(1<h){u=Array(h);for(var d=0;d<h;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:gw,type:n.type,key:s,ref:o,props:i,_owner:l}};Gi.createContext=function(n){return n={$$typeof:NX,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:DX,_context:n},n.Consumer=n};Gi.createElement=bG;Gi.createFactory=function(n){var e=bG.bind(null,n);return e.type=n,e};Gi.createRef=function(){return{current:null}};Gi.forwardRef=function(n){return{$$typeof:BX,render:n}};Gi.isValidElement=hN;Gi.lazy=function(n){return{$$typeof:UX,_payload:{_status:-1,_result:n},_init:WX}};Gi.memo=function(n,e){return{$$typeof:FX,type:n,compare:e===void 0?null:e}};Gi.startTransition=function(n){var e=gM.transition;gM.transition={};try{n()}finally{gM.transition=e}};Gi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Gi.useCallback=function(n,e){return up.current.useCallback(n,e)};Gi.useContext=function(n){return up.current.useContext(n)};Gi.useDebugValue=function(){};Gi.useDeferredValue=function(n){return up.current.useDeferredValue(n)};Gi.useEffect=function(n,e){return up.current.useEffect(n,e)};Gi.useId=function(){return up.current.useId()};Gi.useImperativeHandle=function(n,e,t){return up.current.useImperativeHandle(n,e,t)};Gi.useInsertionEffect=function(n,e){return up.current.useInsertionEffect(n,e)};Gi.useLayoutEffect=function(n,e){return up.current.useLayoutEffect(n,e)};Gi.useMemo=function(n,e){return up.current.useMemo(n,e)};Gi.useReducer=function(n,e,t){return up.current.useReducer(n,e,t)};Gi.useRef=function(n){return up.current.useRef(n)};Gi.useState=function(n){return up.current.useState(n)};Gi.useSyncExternalStore=function(n,e,t){return up.current.useSyncExternalStore(n,e,t)};Gi.useTransition=function(){return up.current.useTransition()};Gi.version="18.2.0";pG.exports=Gi;var he=pG.exports;const Tr=fb(he),FO=IX({__proto__:null,default:Tr},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jX=he,XX=Symbol.for("react.element"),YX=Symbol.for("react.fragment"),KX=Object.prototype.hasOwnProperty,JX=jX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QX={key:!0,ref:!0,__self:!0,__source:!0};function TG(n,e,t){var i,s={},o=null,l=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)KX.call(e,i)&&!QX.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:XX,type:n,key:o,ref:l,props:s,_owner:JX.current}}YA.Fragment=YX;YA.jsx=TG;YA.jsxs=TG;dG.exports=YA;var gt=dG.exports,UO={},EG={exports:{}},If={},$G={exports:{}},SG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var le=ne-1>>>1,_e=j[le];if(0<s(_e,Z))j[le]=Z,j[ne]=_e,ne=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var le=0,_e=j.length,Oe=_e>>>1;le<Oe;){var xe=2*(le+1)-1,Xe=j[xe],Re=xe+1,Je=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(Je,Xe)?(j[le]=Je,j[Re]=ne,le=Re):(j[le]=Xe,j[xe]=ne,le=xe);else if(Re<_e&&0>s(Je,ne))j[le]=Je,j[Re]=ne,le=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function D(j){if(x=!1,N(j),!w)if(t(h)!==null)w=!0,ge(U);else{var Z=t(d);Z!==null&&Ae(D,Z.startTime-j)}}function U(j,Z){w=!1,x&&(x=!1,O(z),z=-1),E=!0;var ne=v;try{for(N(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),N(Z)}else i(h);_=t(h)}if(_!==null)var Oe=!0;else{var xe=t(d);xe!==null&&Ae(D,xe.startTime-Z),Oe=!1}return Oe}finally{_=null,v=ne,E=!1}}var F=!1,H=null,z=-1,J=5,te=-1;function re(){return!(n.unstable_now()-te<J)}function ie(){if(H!==null){var j=n.unstable_now();te=j;var Z=!0;try{Z=H(!0,j)}finally{Z?de():(F=!1,H=null)}}else F=!1}var de;if(typeof k=="function")de=function(){k(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=ie,de=function(){ue.postMessage(null)}}else de=function(){A(ie,0)};function ge(j){H=j,F||(F=!0,de())}function Ae(j,Z){z=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){w||E||(w=!0,ge(U))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var le=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>le?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(x?(O(z),z=-1):x=!0,Ae(D,ne-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(U))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}})(SG);$G.exports=SG;var qX=$G.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wG=he,Cf=qX;function un(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xG=new Set,yS={};function mb(n,e){TT(n,e),TT(n+"Capture",e)}function TT(n,e){for(yS[n]=e,n=0;n<e.length;n++)xG.add(e[n])}var J0=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zO=Object.prototype.hasOwnProperty,ZX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,IF={},RF={};function eY(n){return zO.call(RF,n)?!0:zO.call(IF,n)?!1:ZX.test(n)?RF[n]=!0:(IF[n]=!0,!1)}function tY(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function nY(n,e,t,i){if(e===null||typeof e>"u"||tY(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cp(n,e,t,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Vh={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Vh[n]=new cp(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Vh[e]=new cp(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Vh[n]=new cp(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Vh[n]=new cp(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Vh[n]=new cp(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Vh[n]=new cp(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Vh[n]=new cp(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Vh[n]=new cp(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Vh[n]=new cp(n,5,!1,n.toLowerCase(),null,!1,!1)});var dN=/[\-:]([a-z])/g;function pN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(dN,pN);Vh[e]=new cp(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(dN,pN);Vh[e]=new cp(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(dN,pN);Vh[e]=new cp(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Vh[n]=new cp(n,1,!1,n.toLowerCase(),null,!1,!1)});Vh.xlinkHref=new cp("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Vh[n]=new cp(n,1,!1,n.toLowerCase(),null,!0,!0)});function fN(n,e,t,i){var s=Vh.hasOwnProperty(e)?Vh[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nY(e,t,s,i)&&(t=null),i||s===null?eY(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var t_=wG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yx=Symbol.for("react.element"),V1=Symbol.for("react.portal"),j1=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),HO=Symbol.for("react.profiler"),CG=Symbol.for("react.provider"),MG=Symbol.for("react.context"),gN=Symbol.for("react.forward_ref"),GO=Symbol.for("react.suspense"),WO=Symbol.for("react.suspense_list"),_N=Symbol.for("react.memo"),Y_=Symbol.for("react.lazy"),AG=Symbol.for("react.offscreen"),kF=Symbol.iterator;function ZE(n){return n===null||typeof n!="object"?null:(n=kF&&n[kF]||n["@@iterator"],typeof n=="function"?n:null)}var Nl=Object.assign,JR;function z$(n){if(JR===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);JR=e&&e[1]||""}return`
`+JR+n}var QR=!1;function qR(n,e){if(!n||QR)return"";QR=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){i=d}n.call(e.prototype)}else{try{throw Error()}catch(d){i=d}n()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,u=o.length-1;1<=l&&0<=u&&s[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(s[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||s[l]!==o[u]){var h=`
`+s[l].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=l&&0<=u);break}}}finally{QR=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?z$(n):""}function rY(n){switch(n.tag){case 5:return z$(n.type);case 16:return z$("Lazy");case 13:return z$("Suspense");case 19:return z$("SuspenseList");case 0:case 2:case 15:return n=qR(n.type,!1),n;case 11:return n=qR(n.type.render,!1),n;case 1:return n=qR(n.type,!0),n;default:return""}}function VO(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j1:return"Fragment";case V1:return"Portal";case HO:return"Profiler";case mN:return"StrictMode";case GO:return"Suspense";case WO:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case MG:return(n.displayName||"Context")+".Consumer";case CG:return(n._context.displayName||"Context")+".Provider";case gN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case _N:return e=n.displayName||null,e!==null?e:VO(n.type)||"Memo";case Y_:e=n._payload,n=n._init;try{return VO(n(e))}catch{}}return null}function iY(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VO(e);case 8:return e===mN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mv(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function IG(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sY(n){var e=IG(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function bx(n){n._valueTracker||(n._valueTracker=sY(n))}function RG(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=IG(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function QM(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function jO(n,e){var t=e.checked;return Nl({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function OF(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=mv(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kG(n,e){e=e.checked,e!=null&&fN(n,"checked",e,!1)}function XO(n,e){kG(n,e);var t=mv(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?YO(n,e.type,t):e.hasOwnProperty("defaultValue")&&YO(n,e.type,mv(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function LF(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function YO(n,e,t){(e!=="number"||QM(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var H$=Array.isArray;function uT(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+mv(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function KO(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(un(91));return Nl({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function DF(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(un(92));if(H$(t)){if(1<t.length)throw Error(un(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:mv(t)}}function OG(n,e){var t=mv(e.value),i=mv(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function NF(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function LG(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function JO(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?LG(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Tx,DG=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Tx=Tx||document.createElement("div"),Tx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tx.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function bS(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Z$={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oY=["Webkit","ms","Moz","O"];Object.keys(Z$).forEach(function(n){oY.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Z$[e]=Z$[n]})});function NG(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Z$.hasOwnProperty(n)&&Z$[n]?(""+e).trim():e+"px"}function BG(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=NG(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var aY=Nl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QO(n,e){if(e){if(aY[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(un(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(un(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(un(61))}if(e.style!=null&&typeof e.style!="object")throw Error(un(62))}}function qO(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZO=null;function vN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var eL=null,cT=null,hT=null;function BF(n){if(n=yw(n)){if(typeof eL!="function")throw Error(un(280));var e=n.stateNode;e&&(e=ZA(e),eL(n.stateNode,n.type,e))}}function PG(n){cT?hT?hT.push(n):hT=[n]:cT=n}function FG(){if(cT){var n=cT,e=hT;if(hT=cT=null,BF(n),e)for(n=0;n<e.length;n++)BF(e[n])}}function UG(n,e){return n(e)}function zG(){}var ZR=!1;function HG(n,e,t){if(ZR)return n(e,t);ZR=!0;try{return UG(n,e,t)}finally{ZR=!1,(cT!==null||hT!==null)&&(zG(),FG())}}function TS(n,e){var t=n.stateNode;if(t===null)return null;var i=ZA(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(un(231,e,typeof t));return t}var tL=!1;if(J0)try{var e$={};Object.defineProperty(e$,"passive",{get:function(){tL=!0}}),window.addEventListener("test",e$,e$),window.removeEventListener("test",e$,e$)}catch{tL=!1}function lY(n,e,t,i,s,o,l,u,h){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(m){this.onError(m)}}var eS=!1,qM=null,ZM=!1,nL=null,uY={onError:function(n){eS=!0,qM=n}};function cY(n,e,t,i,s,o,l,u,h){eS=!1,qM=null,lY.apply(uY,arguments)}function hY(n,e,t,i,s,o,l,u,h){if(cY.apply(this,arguments),eS){if(eS){var d=qM;eS=!1,qM=null}else throw Error(un(198));ZM||(ZM=!0,nL=d)}}function gb(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function GG(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function PF(n){if(gb(n)!==n)throw Error(un(188))}function dY(n){var e=n.alternate;if(!e){if(e=gb(n),e===null)throw Error(un(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return PF(s),n;if(o===i)return PF(s),e;o=o.sibling}throw Error(un(188))}if(t.return!==i.return)t=s,i=o;else{for(var l=!1,u=s.child;u;){if(u===t){l=!0,t=s,i=o;break}if(u===i){l=!0,i=s,t=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===t){l=!0,t=o,i=s;break}if(u===i){l=!0,i=o,t=s;break}u=u.sibling}if(!l)throw Error(un(189))}}if(t.alternate!==i)throw Error(un(190))}if(t.tag!==3)throw Error(un(188));return t.stateNode.current===t?n:e}function WG(n){return n=dY(n),n!==null?VG(n):null}function VG(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=VG(n);if(e!==null)return e;n=n.sibling}return null}var jG=Cf.unstable_scheduleCallback,FF=Cf.unstable_cancelCallback,pY=Cf.unstable_shouldYield,fY=Cf.unstable_requestPaint,Fu=Cf.unstable_now,mY=Cf.unstable_getCurrentPriorityLevel,yN=Cf.unstable_ImmediatePriority,XG=Cf.unstable_UserBlockingPriority,eA=Cf.unstable_NormalPriority,gY=Cf.unstable_LowPriority,YG=Cf.unstable_IdlePriority,KA=null,Xg=null;function _Y(n){if(Xg&&typeof Xg.onCommitFiberRoot=="function")try{Xg.onCommitFiberRoot(KA,n,void 0,(n.current.flags&128)===128)}catch{}}var lg=Math.clz32?Math.clz32:bY,vY=Math.log,yY=Math.LN2;function bY(n){return n>>>=0,n===0?32:31-(vY(n)/yY|0)|0}var Ex=64,$x=4194304;function G$(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function tA(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,l=t&268435455;if(l!==0){var u=l&~s;u!==0?i=G$(u):(o&=l,o!==0&&(i=G$(o)))}else l=t&~s,l!==0?i=G$(l):o!==0&&(i=G$(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-lg(e),s=1<<t,i|=n[t],e&=~s;return i}function TY(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EY(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-lg(o),u=1<<l,h=s[l];h===-1?(!(u&t)||u&i)&&(s[l]=TY(u,e)):h<=e&&(n.expiredLanes|=u),o&=~u}}function rL(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function KG(){var n=Ex;return Ex<<=1,!(Ex&4194240)&&(Ex=64),n}function ek(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function _w(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-lg(e),n[e]=t}function $Y(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-lg(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function bN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-lg(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var mo=0;function JG(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var QG,TN,qG,ZG,e6,iL=!1,Sx=[],iv=null,sv=null,ov=null,ES=new Map,$S=new Map,q_=[],SY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UF(n,e){switch(n){case"focusin":case"focusout":iv=null;break;case"dragenter":case"dragleave":sv=null;break;case"mouseover":case"mouseout":ov=null;break;case"pointerover":case"pointerout":ES.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$S.delete(e.pointerId)}}function t$(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=yw(e),e!==null&&TN(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function wY(n,e,t,i,s){switch(e){case"focusin":return iv=t$(iv,n,e,t,i,s),!0;case"dragenter":return sv=t$(sv,n,e,t,i,s),!0;case"mouseover":return ov=t$(ov,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return ES.set(o,t$(ES.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,$S.set(o,t$($S.get(o)||null,n,e,t,i,s)),!0}return!1}function t6(n){var e=Ay(n.target);if(e!==null){var t=gb(e);if(t!==null){if(e=t.tag,e===13){if(e=GG(t),e!==null){n.blockedOn=e,e6(n.priority,function(){qG(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _M(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=sL(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);ZO=i,t.target.dispatchEvent(i),ZO=null}else return e=yw(t),e!==null&&TN(e),n.blockedOn=t,!1;e.shift()}return!0}function zF(n,e,t){_M(n)&&t.delete(e)}function xY(){iL=!1,iv!==null&&_M(iv)&&(iv=null),sv!==null&&_M(sv)&&(sv=null),ov!==null&&_M(ov)&&(ov=null),ES.forEach(zF),$S.forEach(zF)}function n$(n,e){n.blockedOn===e&&(n.blockedOn=null,iL||(iL=!0,Cf.unstable_scheduleCallback(Cf.unstable_NormalPriority,xY)))}function SS(n){function e(s){return n$(s,n)}if(0<Sx.length){n$(Sx[0],n);for(var t=1;t<Sx.length;t++){var i=Sx[t];i.blockedOn===n&&(i.blockedOn=null)}}for(iv!==null&&n$(iv,n),sv!==null&&n$(sv,n),ov!==null&&n$(ov,n),ES.forEach(e),$S.forEach(e),t=0;t<q_.length;t++)i=q_[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<q_.length&&(t=q_[0],t.blockedOn===null);)t6(t),t.blockedOn===null&&q_.shift()}var dT=t_.ReactCurrentBatchConfig,nA=!0;function CY(n,e,t,i){var s=mo,o=dT.transition;dT.transition=null;try{mo=1,EN(n,e,t,i)}finally{mo=s,dT.transition=o}}function MY(n,e,t,i){var s=mo,o=dT.transition;dT.transition=null;try{mo=4,EN(n,e,t,i)}finally{mo=s,dT.transition=o}}function EN(n,e,t,i){if(nA){var s=sL(n,e,t,i);if(s===null)ck(n,e,i,rA,t),UF(n,i);else if(wY(s,n,e,t,i))i.stopPropagation();else if(UF(n,i),e&4&&-1<SY.indexOf(n)){for(;s!==null;){var o=yw(s);if(o!==null&&QG(o),o=sL(n,e,t,i),o===null&&ck(n,e,i,rA,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else ck(n,e,i,null,t)}}var rA=null;function sL(n,e,t,i){if(rA=null,n=vN(i),n=Ay(n),n!==null)if(e=gb(n),e===null)n=null;else if(t=e.tag,t===13){if(n=GG(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return rA=n,null}function n6(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mY()){case yN:return 1;case XG:return 4;case eA:case gY:return 16;case YG:return 536870912;default:return 16}default:return 16}}var ev=null,$N=null,vM=null;function r6(){if(vM)return vM;var n,e=$N,t=e.length,i,s="value"in ev?ev.value:ev.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var l=t-n;for(i=1;i<=l&&e[t-i]===s[o-i];i++);return vM=s.slice(n,1<i?1-i:void 0)}function yM(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function wx(){return!0}function HF(){return!1}function Rf(n){function e(t,i,s,o,l){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&&(t=n[u],this[u]=t?t(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?wx:HF,this.isPropagationStopped=HF,this}return Nl(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=wx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=wx)},persist:function(){},isPersistent:wx}),e}var qT={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SN=Rf(qT),vw=Nl({},qT,{view:0,detail:0}),AY=Rf(vw),tk,nk,r$,JA=Nl({},vw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==r$&&(r$&&n.type==="mousemove"?(tk=n.screenX-r$.screenX,nk=n.screenY-r$.screenY):nk=tk=0,r$=n),tk)},movementY:function(n){return"movementY"in n?n.movementY:nk}}),GF=Rf(JA),IY=Nl({},JA,{dataTransfer:0}),RY=Rf(IY),kY=Nl({},vw,{relatedTarget:0}),rk=Rf(kY),OY=Nl({},qT,{animationName:0,elapsedTime:0,pseudoElement:0}),LY=Rf(OY),DY=Nl({},qT,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),NY=Rf(DY),BY=Nl({},qT,{data:0}),WF=Rf(BY),PY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zY(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=UY[n])?!!e[n]:!1}function wN(){return zY}var HY=Nl({},vw,{key:function(n){if(n.key){var e=PY[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yM(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FY[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wN,charCode:function(n){return n.type==="keypress"?yM(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yM(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),GY=Rf(HY),WY=Nl({},JA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VF=Rf(WY),VY=Nl({},vw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wN}),jY=Rf(VY),XY=Nl({},qT,{propertyName:0,elapsedTime:0,pseudoElement:0}),YY=Rf(XY),KY=Nl({},JA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JY=Rf(KY),QY=[9,13,27,32],xN=J0&&"CompositionEvent"in window,tS=null;J0&&"documentMode"in document&&(tS=document.documentMode);var qY=J0&&"TextEvent"in window&&!tS,i6=J0&&(!xN||tS&&8<tS&&11>=tS),jF=" ",XF=!1;function s6(n,e){switch(n){case"keyup":return QY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o6(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var X1=!1;function ZY(n,e){switch(n){case"compositionend":return o6(e);case"keypress":return e.which!==32?null:(XF=!0,jF);case"textInput":return n=e.data,n===jF&&XF?null:n;default:return null}}function eK(n,e){if(X1)return n==="compositionend"||!xN&&s6(n,e)?(n=r6(),vM=$N=ev=null,X1=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i6&&e.locale!=="ko"?null:e.data;default:return null}}var tK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YF(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tK[n.type]:e==="textarea"}function a6(n,e,t,i){PG(i),e=iA(e,"onChange"),0<e.length&&(t=new SN("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var nS=null,wS=null;function nK(n){v6(n,0)}function QA(n){var e=J1(n);if(RG(e))return n}function rK(n,e){if(n==="change")return e}var l6=!1;if(J0){var ik;if(J0){var sk="oninput"in document;if(!sk){var KF=document.createElement("div");KF.setAttribute("oninput","return;"),sk=typeof KF.oninput=="function"}ik=sk}else ik=!1;l6=ik&&(!document.documentMode||9<document.documentMode)}function JF(){nS&&(nS.detachEvent("onpropertychange",u6),wS=nS=null)}function u6(n){if(n.propertyName==="value"&&QA(wS)){var e=[];a6(e,wS,n,vN(n)),HG(nK,e)}}function iK(n,e,t){n==="focusin"?(JF(),nS=e,wS=t,nS.attachEvent("onpropertychange",u6)):n==="focusout"&&JF()}function sK(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return QA(wS)}function oK(n,e){if(n==="click")return QA(e)}function aK(n,e){if(n==="input"||n==="change")return QA(e)}function lK(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var dg=typeof Object.is=="function"?Object.is:lK;function xS(n,e){if(dg(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!zO.call(e,s)||!dg(n[s],e[s]))return!1}return!0}function QF(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qF(n,e){var t=QF(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=QF(t)}}function c6(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?c6(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function h6(){for(var n=window,e=QM();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=QM(n.document)}return e}function CN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function uK(n){var e=h6(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&c6(t.ownerDocument.documentElement,t)){if(i!==null&&CN(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=qF(t,o);var l=qF(t,i);s&&l&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==l.node||n.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cK=J0&&"documentMode"in document&&11>=document.documentMode,Y1=null,oL=null,rS=null,aL=!1;function ZF(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;aL||Y1==null||Y1!==QM(i)||(i=Y1,"selectionStart"in i&&CN(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rS&&xS(rS,i)||(rS=i,i=iA(oL,"onSelect"),0<i.length&&(e=new SN("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Y1)))}function xx(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var K1={animationend:xx("Animation","AnimationEnd"),animationiteration:xx("Animation","AnimationIteration"),animationstart:xx("Animation","AnimationStart"),transitionend:xx("Transition","TransitionEnd")},ok={},d6={};J0&&(d6=document.createElement("div").style,"AnimationEvent"in window||(delete K1.animationend.animation,delete K1.animationiteration.animation,delete K1.animationstart.animation),"TransitionEvent"in window||delete K1.transitionend.transition);function qA(n){if(ok[n])return ok[n];if(!K1[n])return n;var e=K1[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in d6)return ok[n]=e[t];return n}var p6=qA("animationend"),f6=qA("animationiteration"),m6=qA("animationstart"),g6=qA("transitionend"),_6=new Map,e3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $v(n,e){_6.set(n,e),mb(e,[n])}for(var ak=0;ak<e3.length;ak++){var lk=e3[ak],hK=lk.toLowerCase(),dK=lk[0].toUpperCase()+lk.slice(1);$v(hK,"on"+dK)}$v(p6,"onAnimationEnd");$v(f6,"onAnimationIteration");$v(m6,"onAnimationStart");$v("dblclick","onDoubleClick");$v("focusin","onFocus");$v("focusout","onBlur");$v(g6,"onTransitionEnd");TT("onMouseEnter",["mouseout","mouseover"]);TT("onMouseLeave",["mouseout","mouseover"]);TT("onPointerEnter",["pointerout","pointerover"]);TT("onPointerLeave",["pointerout","pointerover"]);mb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mb("onBeforeInput",["compositionend","keypress","textInput","paste"]);mb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var W$="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pK=new Set("cancel close invalid load scroll toggle".split(" ").concat(W$));function t3(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,hY(i,e,void 0,n),n.currentTarget=null}function v6(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var u=i[l],h=u.instance,d=u.currentTarget;if(u=u.listener,h!==o&&s.isPropagationStopped())break e;t3(s,u,d),o=h}else for(l=0;l<i.length;l++){if(u=i[l],h=u.instance,d=u.currentTarget,u=u.listener,h!==o&&s.isPropagationStopped())break e;t3(s,u,d),o=h}}}if(ZM)throw n=nL,ZM=!1,nL=null,n}function Da(n,e){var t=e[dL];t===void 0&&(t=e[dL]=new Set);var i=n+"__bubble";t.has(i)||(y6(e,n,2,!1),t.add(i))}function uk(n,e,t){var i=0;e&&(i|=4),y6(t,n,i,e)}var Cx="_reactListening"+Math.random().toString(36).slice(2);function CS(n){if(!n[Cx]){n[Cx]=!0,xG.forEach(function(t){t!=="selectionchange"&&(pK.has(t)||uk(t,!1,n),uk(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Cx]||(e[Cx]=!0,uk("selectionchange",!1,e))}}function y6(n,e,t,i){switch(n6(e)){case 1:var s=CY;break;case 4:s=MY;break;default:s=EN}t=s.bind(null,e,t,n),s=void 0,!tL||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function ck(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var u=i.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===s||h.nodeType===8&&h.parentNode===s))return;l=l.return}for(;u!==null;){if(l=Ay(u),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}u=u.parentNode}}i=i.return}HG(function(){var d=o,m=vN(t),_=[];e:{var v=_6.get(n);if(v!==void 0){var E=SN,w=n;switch(n){case"keypress":if(yM(t)===0)break e;case"keydown":case"keyup":E=GY;break;case"focusin":w="focus",E=rk;break;case"focusout":w="blur",E=rk;break;case"beforeblur":case"afterblur":E=rk;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=GF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=RY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=jY;break;case p6:case f6:case m6:E=LY;break;case g6:E=YY;break;case"scroll":E=AY;break;case"wheel":E=JY;break;case"copy":case"cut":case"paste":E=NY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=VF}var x=(e&4)!==0,A=!x&&n==="scroll",O=x?v!==null?v+"Capture":null:v;x=[];for(var k=d,N;k!==null;){N=k;var D=N.stateNode;if(N.tag===5&&D!==null&&(N=D,O!==null&&(D=TS(k,O),D!=null&&x.push(MS(k,D,N)))),A)break;k=k.return}0<x.length&&(v=new E(v,w,null,t,m),_.push({event:v,listeners:x}))}}if(!(e&7)){e:{if(v=n==="mouseover"||n==="pointerover",E=n==="mouseout"||n==="pointerout",v&&t!==ZO&&(w=t.relatedTarget||t.fromElement)&&(Ay(w)||w[Q0]))break e;if((E||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,E?(w=t.relatedTarget||t.toElement,E=d,w=w?Ay(w):null,w!==null&&(A=gb(w),w!==A||w.tag!==5&&w.tag!==6)&&(w=null)):(E=null,w=d),E!==w)){if(x=GF,D="onMouseLeave",O="onMouseEnter",k="mouse",(n==="pointerout"||n==="pointerover")&&(x=VF,D="onPointerLeave",O="onPointerEnter",k="pointer"),A=E==null?v:J1(E),N=w==null?v:J1(w),v=new x(D,k+"leave",E,t,m),v.target=A,v.relatedTarget=N,D=null,Ay(m)===d&&(x=new x(O,k+"enter",w,t,m),x.target=N,x.relatedTarget=A,D=x),A=D,E&&w)t:{for(x=E,O=w,k=0,N=x;N;N=qb(N))k++;for(N=0,D=O;D;D=qb(D))N++;for(;0<k-N;)x=qb(x),k--;for(;0<N-k;)O=qb(O),N--;for(;k--;){if(x===O||O!==null&&x===O.alternate)break t;x=qb(x),O=qb(O)}x=null}else x=null;E!==null&&n3(_,v,E,x,!1),w!==null&&A!==null&&n3(_,A,w,x,!0)}}e:{if(v=d?J1(d):window,E=v.nodeName&&v.nodeName.toLowerCase(),E==="select"||E==="input"&&v.type==="file")var U=rK;else if(YF(v))if(l6)U=aK;else{U=sK;var F=iK}else(E=v.nodeName)&&E.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(U=oK);if(U&&(U=U(n,d))){a6(_,U,t,m);break e}F&&F(n,v,d),n==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&YO(v,"number",v.value)}switch(F=d?J1(d):window,n){case"focusin":(YF(F)||F.contentEditable==="true")&&(Y1=F,oL=d,rS=null);break;case"focusout":rS=oL=Y1=null;break;case"mousedown":aL=!0;break;case"contextmenu":case"mouseup":case"dragend":aL=!1,ZF(_,t,m);break;case"selectionchange":if(cK)break;case"keydown":case"keyup":ZF(_,t,m)}var H;if(xN)e:{switch(n){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else X1?s6(n,t)&&(z="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(z="onCompositionStart");z&&(i6&&t.locale!=="ko"&&(X1||z!=="onCompositionStart"?z==="onCompositionEnd"&&X1&&(H=r6()):(ev=m,$N="value"in ev?ev.value:ev.textContent,X1=!0)),F=iA(d,z),0<F.length&&(z=new WF(z,n,null,t,m),_.push({event:z,listeners:F}),H?z.data=H:(H=o6(t),H!==null&&(z.data=H)))),(H=qY?ZY(n,t):eK(n,t))&&(d=iA(d,"onBeforeInput"),0<d.length&&(m=new WF("onBeforeInput","beforeinput",null,t,m),_.push({event:m,listeners:d}),m.data=H))}v6(_,e)})}function MS(n,e,t){return{instance:n,listener:e,currentTarget:t}}function iA(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=TS(n,t),o!=null&&i.unshift(MS(n,o,s)),o=TS(n,e),o!=null&&i.push(MS(n,o,s))),n=n.return}return i}function qb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function n3(n,e,t,i,s){for(var o=e._reactName,l=[];t!==null&&t!==i;){var u=t,h=u.alternate,d=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&d!==null&&(u=d,s?(h=TS(t,o),h!=null&&l.unshift(MS(t,h,u))):s||(h=TS(t,o),h!=null&&l.push(MS(t,h,u)))),t=t.return}l.length!==0&&n.push({event:e,listeners:l})}var fK=/\r\n?/g,mK=/\u0000|\uFFFD/g;function r3(n){return(typeof n=="string"?n:""+n).replace(fK,`
`).replace(mK,"")}function Mx(n,e,t){if(e=r3(e),r3(n)!==e&&t)throw Error(un(425))}function sA(){}var lL=null,uL=null;function cL(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hL=typeof setTimeout=="function"?setTimeout:void 0,gK=typeof clearTimeout=="function"?clearTimeout:void 0,i3=typeof Promise=="function"?Promise:void 0,_K=typeof queueMicrotask=="function"?queueMicrotask:typeof i3<"u"?function(n){return i3.resolve(null).then(n).catch(vK)}:hL;function vK(n){setTimeout(function(){throw n})}function hk(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),SS(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);SS(e)}function av(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function s3(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var ZT=Math.random().toString(36).slice(2),Gg="__reactFiber$"+ZT,AS="__reactProps$"+ZT,Q0="__reactContainer$"+ZT,dL="__reactEvents$"+ZT,yK="__reactListeners$"+ZT,bK="__reactHandles$"+ZT;function Ay(n){var e=n[Gg];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Q0]||t[Gg]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=s3(n);n!==null;){if(t=n[Gg])return t;n=s3(n)}return e}n=t,t=n.parentNode}return null}function yw(n){return n=n[Gg]||n[Q0],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function J1(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(un(33))}function ZA(n){return n[AS]||null}var pL=[],Q1=-1;function Sv(n){return{current:n}}function Ba(n){0>Q1||(n.current=pL[Q1],pL[Q1]=null,Q1--)}function pa(n,e){Q1++,pL[Q1]=n.current,n.current=e}var gv={},Ad=Sv(gv),Pp=Sv(!1),tb=gv;function ET(n,e){var t=n.type.contextTypes;if(!t)return gv;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Fp(n){return n=n.childContextTypes,n!=null}function oA(){Ba(Pp),Ba(Ad)}function o3(n,e,t){if(Ad.current!==gv)throw Error(un(168));pa(Ad,e),pa(Pp,t)}function b6(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(un(108,iY(n)||"Unknown",s));return Nl({},t,i)}function aA(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||gv,tb=Ad.current,pa(Ad,n),pa(Pp,Pp.current),!0}function a3(n,e,t){var i=n.stateNode;if(!i)throw Error(un(169));t?(n=b6(n,e,tb),i.__reactInternalMemoizedMergedChildContext=n,Ba(Pp),Ba(Ad),pa(Ad,n)):Ba(Pp),pa(Pp,t)}var P0=null,eI=!1,dk=!1;function T6(n){P0===null?P0=[n]:P0.push(n)}function TK(n){eI=!0,T6(n)}function wv(){if(!dk&&P0!==null){dk=!0;var n=0,e=mo;try{var t=P0;for(mo=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}P0=null,eI=!1}catch(s){throw P0!==null&&(P0=P0.slice(n+1)),jG(yN,wv),s}finally{mo=e,dk=!1}}return null}var q1=[],Z1=0,lA=null,uA=0,dm=[],pm=0,nb=null,G0=1,W0="";function vy(n,e){q1[Z1++]=uA,q1[Z1++]=lA,lA=n,uA=e}function E6(n,e,t){dm[pm++]=G0,dm[pm++]=W0,dm[pm++]=nb,nb=n;var i=G0;n=W0;var s=32-lg(i)-1;i&=~(1<<s),t+=1;var o=32-lg(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,G0=1<<32-lg(e)+s|t<<s|i,W0=o+n}else G0=1<<o|t<<s|i,W0=n}function MN(n){n.return!==null&&(vy(n,1),E6(n,1,0))}function AN(n){for(;n===lA;)lA=q1[--Z1],q1[Z1]=null,uA=q1[--Z1],q1[Z1]=null;for(;n===nb;)nb=dm[--pm],dm[pm]=null,W0=dm[--pm],dm[pm]=null,G0=dm[--pm],dm[pm]=null}var Ef=null,bf=null,al=!1,rg=null;function $6(n,e){var t=gm(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function l3(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ef=n,bf=av(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ef=n,bf=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=nb!==null?{id:G0,overflow:W0}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=gm(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ef=n,bf=null,!0):!1;default:return!1}}function fL(n){return(n.mode&1)!==0&&(n.flags&128)===0}function mL(n){if(al){var e=bf;if(e){var t=e;if(!l3(n,e)){if(fL(n))throw Error(un(418));e=av(t.nextSibling);var i=Ef;e&&l3(n,e)?$6(i,t):(n.flags=n.flags&-4097|2,al=!1,Ef=n)}}else{if(fL(n))throw Error(un(418));n.flags=n.flags&-4097|2,al=!1,Ef=n}}}function u3(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ef=n}function Ax(n){if(n!==Ef)return!1;if(!al)return u3(n),al=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!cL(n.type,n.memoizedProps)),e&&(e=bf)){if(fL(n))throw S6(),Error(un(418));for(;e;)$6(n,e),e=av(e.nextSibling)}if(u3(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(un(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){bf=av(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}bf=null}}else bf=Ef?av(n.stateNode.nextSibling):null;return!0}function S6(){for(var n=bf;n;)n=av(n.nextSibling)}function $T(){bf=Ef=null,al=!1}function IN(n){rg===null?rg=[n]:rg.push(n)}var EK=t_.ReactCurrentBatchConfig;function tg(n,e){if(n&&n.defaultProps){e=Nl({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var cA=Sv(null),hA=null,eT=null,RN=null;function kN(){RN=eT=hA=null}function ON(n){var e=cA.current;Ba(cA),n._currentValue=e}function gL(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function pT(n,e){hA=n,RN=eT=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Np=!0),n.firstContext=null)}function vm(n){var e=n._currentValue;if(RN!==n)if(n={context:n,memoizedValue:e,next:null},eT===null){if(hA===null)throw Error(un(308));eT=n,hA.dependencies={lanes:0,firstContext:n}}else eT=eT.next=n;return e}var Iy=null;function LN(n){Iy===null?Iy=[n]:Iy.push(n)}function w6(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,LN(e)):(t.next=s.next,s.next=t),e.interleaved=t,q0(n,i)}function q0(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var K_=!1;function DN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x6(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function X0(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function lv(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,hs&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,q0(n,t)}return s=i.interleaved,s===null?(e.next=e,LN(i)):(e.next=s.next,s.next=e),i.interleaved=e,q0(n,t)}function bM(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bN(n,t)}}function c3(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var l={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=l:o=o.next=l,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function dA(n,e,t,i){var s=n.updateQueue;K_=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var h=u,d=h.next;h.next=null,l===null?o=d:l.next=d,l=h;var m=n.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==l&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=h))}if(o!==null){var _=s.baseState;l=0,m=d=h=null,u=o;do{var v=u.lane,E=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=n,x=u;switch(v=e,E=t,x.tag){case 1:if(w=x.payload,typeof w=="function"){_=w.call(E,_,v);break e}_=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,v=typeof w=="function"?w.call(E,_,v):w,v==null)break e;_=Nl({},_,v);break e;case 2:K_=!0}}u.callback!==null&&u.lane!==0&&(n.flags|=64,v=s.effects,v===null?s.effects=[u]:v.push(u))}else E={eventTime:E,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=E,h=_):m=m.next=E,l|=v;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;v=u,u=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);if(m===null&&(h=_),s.baseState=h,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);ib|=l,n.lanes=l,n.memoizedState=_}}function h3(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(un(191,s));s.call(i)}}}var C6=new wG.Component().refs;function _L(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Nl({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var tI={isMounted:function(n){return(n=n._reactInternals)?gb(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=rp(),s=cv(n),o=X0(i,s);o.payload=e,t!=null&&(o.callback=t),e=lv(n,o,s),e!==null&&(ug(e,n,s,i),bM(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=rp(),s=cv(n),o=X0(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=lv(n,o,s),e!==null&&(ug(e,n,s,i),bM(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=rp(),i=cv(n),s=X0(t,i);s.tag=2,e!=null&&(s.callback=e),e=lv(n,s,i),e!==null&&(ug(e,n,i,t),bM(e,n,i))}};function d3(n,e,t,i,s,o,l){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!xS(t,i)||!xS(s,o):!0}function M6(n,e,t){var i=!1,s=gv,o=e.contextType;return typeof o=="object"&&o!==null?o=vm(o):(s=Fp(e)?tb:Ad.current,i=e.contextTypes,o=(i=i!=null)?ET(n,s):gv),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=tI,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function p3(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&tI.enqueueReplaceState(e,e.state,null)}function vL(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs=C6,DN(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=vm(o):(o=Fp(e)?tb:Ad.current,s.context=ET(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(_L(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&tI.enqueueReplaceState(s,s.state,null),dA(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function i$(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(un(309));var i=t.stateNode}if(!i)throw Error(un(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var u=s.refs;u===C6&&(u=s.refs={}),l===null?delete u[o]:u[o]=l},e._stringRef=o,e)}if(typeof n!="string")throw Error(un(284));if(!t._owner)throw Error(un(290,n))}return n}function Ix(n,e){throw n=Object.prototype.toString.call(e),Error(un(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function f3(n){var e=n._init;return e(n._payload)}function A6(n){function e(O,k){if(n){var N=O.deletions;N===null?(O.deletions=[k],O.flags|=16):N.push(k)}}function t(O,k){if(!n)return null;for(;k!==null;)e(O,k),k=k.sibling;return null}function i(O,k){for(O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function s(O,k){return O=hv(O,k),O.index=0,O.sibling=null,O}function o(O,k,N){return O.index=N,n?(N=O.alternate,N!==null?(N=N.index,N<k?(O.flags|=2,k):N):(O.flags|=2,k)):(O.flags|=1048576,k)}function l(O){return n&&O.alternate===null&&(O.flags|=2),O}function u(O,k,N,D){return k===null||k.tag!==6?(k=yk(N,O.mode,D),k.return=O,k):(k=s(k,N),k.return=O,k)}function h(O,k,N,D){var U=N.type;return U===j1?m(O,k,N.props.children,D,N.key):k!==null&&(k.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Y_&&f3(U)===k.type)?(D=s(k,N.props),D.ref=i$(O,k,N),D.return=O,D):(D=xM(N.type,N.key,N.props,null,O.mode,D),D.ref=i$(O,k,N),D.return=O,D)}function d(O,k,N,D){return k===null||k.tag!==4||k.stateNode.containerInfo!==N.containerInfo||k.stateNode.implementation!==N.implementation?(k=bk(N,O.mode,D),k.return=O,k):(k=s(k,N.children||[]),k.return=O,k)}function m(O,k,N,D,U){return k===null||k.tag!==7?(k=Wy(N,O.mode,D,U),k.return=O,k):(k=s(k,N),k.return=O,k)}function _(O,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return k=yk(""+k,O.mode,N),k.return=O,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case yx:return N=xM(k.type,k.key,k.props,null,O.mode,N),N.ref=i$(O,null,k),N.return=O,N;case V1:return k=bk(k,O.mode,N),k.return=O,k;case Y_:var D=k._init;return _(O,D(k._payload),N)}if(H$(k)||ZE(k))return k=Wy(k,O.mode,N,null),k.return=O,k;Ix(O,k)}return null}function v(O,k,N,D){var U=k!==null?k.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return U!==null?null:u(O,k,""+N,D);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case yx:return N.key===U?h(O,k,N,D):null;case V1:return N.key===U?d(O,k,N,D):null;case Y_:return U=N._init,v(O,k,U(N._payload),D)}if(H$(N)||ZE(N))return U!==null?null:m(O,k,N,D,null);Ix(O,N)}return null}function E(O,k,N,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return O=O.get(N)||null,u(k,O,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case yx:return O=O.get(D.key===null?N:D.key)||null,h(k,O,D,U);case V1:return O=O.get(D.key===null?N:D.key)||null,d(k,O,D,U);case Y_:var F=D._init;return E(O,k,N,F(D._payload),U)}if(H$(D)||ZE(D))return O=O.get(N)||null,m(k,O,D,U,null);Ix(k,D)}return null}function w(O,k,N,D){for(var U=null,F=null,H=k,z=k=0,J=null;H!==null&&z<N.length;z++){H.index>z?(J=H,H=null):J=H.sibling;var te=v(O,H,N[z],D);if(te===null){H===null&&(H=J);break}n&&H&&te.alternate===null&&e(O,H),k=o(te,k,z),F===null?U=te:F.sibling=te,F=te,H=J}if(z===N.length)return t(O,H),al&&vy(O,z),U;if(H===null){for(;z<N.length;z++)H=_(O,N[z],D),H!==null&&(k=o(H,k,z),F===null?U=H:F.sibling=H,F=H);return al&&vy(O,z),U}for(H=i(O,H);z<N.length;z++)J=E(H,O,z,N[z],D),J!==null&&(n&&J.alternate!==null&&H.delete(J.key===null?z:J.key),k=o(J,k,z),F===null?U=J:F.sibling=J,F=J);return n&&H.forEach(function(re){return e(O,re)}),al&&vy(O,z),U}function x(O,k,N,D){var U=ZE(N);if(typeof U!="function")throw Error(un(150));if(N=U.call(N),N==null)throw Error(un(151));for(var F=U=null,H=k,z=k=0,J=null,te=N.next();H!==null&&!te.done;z++,te=N.next()){H.index>z?(J=H,H=null):J=H.sibling;var re=v(O,H,te.value,D);if(re===null){H===null&&(H=J);break}n&&H&&re.alternate===null&&e(O,H),k=o(re,k,z),F===null?U=re:F.sibling=re,F=re,H=J}if(te.done)return t(O,H),al&&vy(O,z),U;if(H===null){for(;!te.done;z++,te=N.next())te=_(O,te.value,D),te!==null&&(k=o(te,k,z),F===null?U=te:F.sibling=te,F=te);return al&&vy(O,z),U}for(H=i(O,H);!te.done;z++,te=N.next())te=E(H,O,z,te.value,D),te!==null&&(n&&te.alternate!==null&&H.delete(te.key===null?z:te.key),k=o(te,k,z),F===null?U=te:F.sibling=te,F=te);return n&&H.forEach(function(ie){return e(O,ie)}),al&&vy(O,z),U}function A(O,k,N,D){if(typeof N=="object"&&N!==null&&N.type===j1&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case yx:e:{for(var U=N.key,F=k;F!==null;){if(F.key===U){if(U=N.type,U===j1){if(F.tag===7){t(O,F.sibling),k=s(F,N.props.children),k.return=O,O=k;break e}}else if(F.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Y_&&f3(U)===F.type){t(O,F.sibling),k=s(F,N.props),k.ref=i$(O,F,N),k.return=O,O=k;break e}t(O,F);break}else e(O,F);F=F.sibling}N.type===j1?(k=Wy(N.props.children,O.mode,D,N.key),k.return=O,O=k):(D=xM(N.type,N.key,N.props,null,O.mode,D),D.ref=i$(O,k,N),D.return=O,O=D)}return l(O);case V1:e:{for(F=N.key;k!==null;){if(k.key===F)if(k.tag===4&&k.stateNode.containerInfo===N.containerInfo&&k.stateNode.implementation===N.implementation){t(O,k.sibling),k=s(k,N.children||[]),k.return=O,O=k;break e}else{t(O,k);break}else e(O,k);k=k.sibling}k=bk(N,O.mode,D),k.return=O,O=k}return l(O);case Y_:return F=N._init,A(O,k,F(N._payload),D)}if(H$(N))return w(O,k,N,D);if(ZE(N))return x(O,k,N,D);Ix(O,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,k!==null&&k.tag===6?(t(O,k.sibling),k=s(k,N),k.return=O,O=k):(t(O,k),k=yk(N,O.mode,D),k.return=O,O=k),l(O)):t(O,k)}return A}var ST=A6(!0),I6=A6(!1),bw={},Yg=Sv(bw),IS=Sv(bw),RS=Sv(bw);function Ry(n){if(n===bw)throw Error(un(174));return n}function NN(n,e){switch(pa(RS,e),pa(IS,n),pa(Yg,bw),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:JO(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=JO(e,n)}Ba(Yg),pa(Yg,e)}function wT(){Ba(Yg),Ba(IS),Ba(RS)}function R6(n){Ry(RS.current);var e=Ry(Yg.current),t=JO(e,n.type);e!==t&&(pa(IS,n),pa(Yg,t))}function BN(n){IS.current===n&&(Ba(Yg),Ba(IS))}var Rl=Sv(0);function pA(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pk=[];function PN(){for(var n=0;n<pk.length;n++)pk[n]._workInProgressVersionPrimary=null;pk.length=0}var TM=t_.ReactCurrentDispatcher,fk=t_.ReactCurrentBatchConfig,rb=0,Ll=null,Fc=null,hh=null,fA=!1,iS=!1,kS=0,$K=0;function _d(){throw Error(un(321))}function FN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!dg(n[t],e[t]))return!1;return!0}function UN(n,e,t,i,s,o){if(rb=o,Ll=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,TM.current=n===null||n.memoizedState===null?CK:MK,n=t(i,s),iS){o=0;do{if(iS=!1,kS=0,25<=o)throw Error(un(301));o+=1,hh=Fc=null,e.updateQueue=null,TM.current=AK,n=t(i,s)}while(iS)}if(TM.current=mA,e=Fc!==null&&Fc.next!==null,rb=0,hh=Fc=Ll=null,fA=!1,e)throw Error(un(300));return n}function zN(){var n=kS!==0;return kS=0,n}function Fg(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hh===null?Ll.memoizedState=hh=n:hh=hh.next=n,hh}function ym(){if(Fc===null){var n=Ll.alternate;n=n!==null?n.memoizedState:null}else n=Fc.next;var e=hh===null?Ll.memoizedState:hh.next;if(e!==null)hh=e,Fc=n;else{if(n===null)throw Error(un(310));Fc=n,n={memoizedState:Fc.memoizedState,baseState:Fc.baseState,baseQueue:Fc.baseQueue,queue:Fc.queue,next:null},hh===null?Ll.memoizedState=hh=n:hh=hh.next=n}return hh}function OS(n,e){return typeof e=="function"?e(n):e}function mk(n){var e=ym(),t=e.queue;if(t===null)throw Error(un(311));t.lastRenderedReducer=n;var i=Fc,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var u=l=null,h=null,d=o;do{var m=d.lane;if((rb&m)===m)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:n(i,d.action);else{var _={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(u=h=_,l=i):h=h.next=_,Ll.lanes|=m,ib|=m}d=d.next}while(d!==null&&d!==o);h===null?l=i:h.next=u,dg(i,e.memoizedState)||(Np=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,Ll.lanes|=o,ib|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gk(n){var e=ym(),t=e.queue;if(t===null)throw Error(un(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var l=s=s.next;do o=n(o,l.action),l=l.next;while(l!==s);dg(o,e.memoizedState)||(Np=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function k6(){}function O6(n,e){var t=Ll,i=ym(),s=e(),o=!dg(i.memoizedState,s);if(o&&(i.memoizedState=s,Np=!0),i=i.queue,HN(N6.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||hh!==null&&hh.memoizedState.tag&1){if(t.flags|=2048,LS(9,D6.bind(null,t,i,s,e),void 0,null),dh===null)throw Error(un(349));rb&30||L6(t,e,s)}return s}function L6(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ll.updateQueue,e===null?(e={lastEffect:null,stores:null},Ll.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function D6(n,e,t,i){e.value=t,e.getSnapshot=i,B6(e)&&P6(n)}function N6(n,e,t){return t(function(){B6(e)&&P6(n)})}function B6(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!dg(n,t)}catch{return!0}}function P6(n){var e=q0(n,1);e!==null&&ug(e,n,1,-1)}function m3(n){var e=Fg();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:OS,lastRenderedState:n},e.queue=n,n=n.dispatch=xK.bind(null,Ll,n),[e.memoizedState,n]}function LS(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ll.updateQueue,e===null?(e={lastEffect:null,stores:null},Ll.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function F6(){return ym().memoizedState}function EM(n,e,t,i){var s=Fg();Ll.flags|=n,s.memoizedState=LS(1|e,t,void 0,i===void 0?null:i)}function nI(n,e,t,i){var s=ym();i=i===void 0?null:i;var o=void 0;if(Fc!==null){var l=Fc.memoizedState;if(o=l.destroy,i!==null&&FN(i,l.deps)){s.memoizedState=LS(e,t,o,i);return}}Ll.flags|=n,s.memoizedState=LS(1|e,t,o,i)}function g3(n,e){return EM(8390656,8,n,e)}function HN(n,e){return nI(2048,8,n,e)}function U6(n,e){return nI(4,2,n,e)}function z6(n,e){return nI(4,4,n,e)}function H6(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function G6(n,e,t){return t=t!=null?t.concat([n]):null,nI(4,4,H6.bind(null,e,n),t)}function GN(){}function W6(n,e){var t=ym();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&FN(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function V6(n,e){var t=ym();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&FN(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function j6(n,e,t){return rb&21?(dg(t,e)||(t=KG(),Ll.lanes|=t,ib|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Np=!0),n.memoizedState=t)}function SK(n,e){var t=mo;mo=t!==0&&4>t?t:4,n(!0);var i=fk.transition;fk.transition={};try{n(!1),e()}finally{mo=t,fk.transition=i}}function X6(){return ym().memoizedState}function wK(n,e,t){var i=cv(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Y6(n))K6(e,t);else if(t=w6(n,e,t,i),t!==null){var s=rp();ug(t,n,i,s),J6(t,e,i)}}function xK(n,e,t){var i=cv(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Y6(n))K6(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,u=o(l,t);if(s.hasEagerState=!0,s.eagerState=u,dg(u,l)){var h=e.interleaved;h===null?(s.next=s,LN(e)):(s.next=h.next,h.next=s),e.interleaved=s;return}}catch{}finally{}t=w6(n,e,s,i),t!==null&&(s=rp(),ug(t,n,i,s),J6(t,e,i))}}function Y6(n){var e=n.alternate;return n===Ll||e!==null&&e===Ll}function K6(n,e){iS=fA=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function J6(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bN(n,t)}}var mA={readContext:vm,useCallback:_d,useContext:_d,useEffect:_d,useImperativeHandle:_d,useInsertionEffect:_d,useLayoutEffect:_d,useMemo:_d,useReducer:_d,useRef:_d,useState:_d,useDebugValue:_d,useDeferredValue:_d,useTransition:_d,useMutableSource:_d,useSyncExternalStore:_d,useId:_d,unstable_isNewReconciler:!1},CK={readContext:vm,useCallback:function(n,e){return Fg().memoizedState=[n,e===void 0?null:e],n},useContext:vm,useEffect:g3,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,EM(4194308,4,H6.bind(null,e,n),t)},useLayoutEffect:function(n,e){return EM(4194308,4,n,e)},useInsertionEffect:function(n,e){return EM(4,2,n,e)},useMemo:function(n,e){var t=Fg();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Fg();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=wK.bind(null,Ll,n),[i.memoizedState,n]},useRef:function(n){var e=Fg();return n={current:n},e.memoizedState=n},useState:m3,useDebugValue:GN,useDeferredValue:function(n){return Fg().memoizedState=n},useTransition:function(){var n=m3(!1),e=n[0];return n=SK.bind(null,n[1]),Fg().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ll,s=Fg();if(al){if(t===void 0)throw Error(un(407));t=t()}else{if(t=e(),dh===null)throw Error(un(349));rb&30||L6(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,g3(N6.bind(null,i,o,n),[n]),i.flags|=2048,LS(9,D6.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=Fg(),e=dh.identifierPrefix;if(al){var t=W0,i=G0;t=(i&~(1<<32-lg(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=kS++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=$K++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},MK={readContext:vm,useCallback:W6,useContext:vm,useEffect:HN,useImperativeHandle:G6,useInsertionEffect:U6,useLayoutEffect:z6,useMemo:V6,useReducer:mk,useRef:F6,useState:function(){return mk(OS)},useDebugValue:GN,useDeferredValue:function(n){var e=ym();return j6(e,Fc.memoizedState,n)},useTransition:function(){var n=mk(OS)[0],e=ym().memoizedState;return[n,e]},useMutableSource:k6,useSyncExternalStore:O6,useId:X6,unstable_isNewReconciler:!1},AK={readContext:vm,useCallback:W6,useContext:vm,useEffect:HN,useImperativeHandle:G6,useInsertionEffect:U6,useLayoutEffect:z6,useMemo:V6,useReducer:gk,useRef:F6,useState:function(){return gk(OS)},useDebugValue:GN,useDeferredValue:function(n){var e=ym();return Fc===null?e.memoizedState=n:j6(e,Fc.memoizedState,n)},useTransition:function(){var n=gk(OS)[0],e=ym().memoizedState;return[n,e]},useMutableSource:k6,useSyncExternalStore:O6,useId:X6,unstable_isNewReconciler:!1};function xT(n,e){try{var t="",i=e;do t+=rY(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function _k(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yL(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IK=typeof WeakMap=="function"?WeakMap:Map;function Q6(n,e,t){t=X0(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){_A||(_A=!0,AL=i),yL(n,e)},t}function q6(n,e,t){t=X0(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){yL(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){yL(n,e),typeof i!="function"&&(uv===null?uv=new Set([this]):uv.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),t}function _3(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new IK;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=WK.bind(null,n,e,t),e.then(n,n))}function v3(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function y3(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=X0(-1,1),e.tag=2,lv(t,e,1))),t.lanes|=1),n)}var RK=t_.ReactCurrentOwner,Np=!1;function Jd(n,e,t,i){e.child=n===null?I6(e,null,t,i):ST(e,n.child,t,i)}function b3(n,e,t,i,s){t=t.render;var o=e.ref;return pT(e,s),i=UN(n,e,t,i,o,s),t=zN(),n!==null&&!Np?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Z0(n,e,s)):(al&&t&&MN(e),e.flags|=1,Jd(n,e,i,s),e.child)}function T3(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!QN(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Z6(n,e,o,i,s)):(n=xM(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var l=o.memoizedProps;if(t=t.compare,t=t!==null?t:xS,t(l,i)&&n.ref===e.ref)return Z0(n,e,s)}return e.flags|=1,n=hv(o,i),n.ref=e.ref,n.return=e,e.child=n}function Z6(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(xS(o,i)&&n.ref===e.ref)if(Np=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(Np=!0);else return e.lanes=n.lanes,Z0(n,e,s)}return bL(n,e,t,i,s)}function eW(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pa(nT,gf),gf|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,pa(nT,gf),gf|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,pa(nT,gf),gf|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,pa(nT,gf),gf|=i;return Jd(n,e,s,t),e.child}function tW(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function bL(n,e,t,i,s){var o=Fp(t)?tb:Ad.current;return o=ET(e,o),pT(e,s),t=UN(n,e,t,i,o,s),i=zN(),n!==null&&!Np?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Z0(n,e,s)):(al&&i&&MN(e),e.flags|=1,Jd(n,e,t,s),e.child)}function E3(n,e,t,i,s){if(Fp(t)){var o=!0;aA(e)}else o=!1;if(pT(e,s),e.stateNode===null)$M(n,e),M6(e,t,i),vL(e,t,i,s),i=!0;else if(n===null){var l=e.stateNode,u=e.memoizedProps;l.props=u;var h=l.context,d=t.contextType;typeof d=="object"&&d!==null?d=vm(d):(d=Fp(t)?tb:Ad.current,d=ET(e,d));var m=t.getDerivedStateFromProps,_=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";_||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==i||h!==d)&&p3(e,l,i,d),K_=!1;var v=e.memoizedState;l.state=v,dA(e,i,l,s),h=e.memoizedState,u!==i||v!==h||Pp.current||K_?(typeof m=="function"&&(_L(e,t,m,i),h=e.memoizedState),(u=K_||d3(e,t,u,i,v,h,d))?(_||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=d,i=u):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,x6(n,e),u=e.memoizedProps,d=e.type===e.elementType?u:tg(e.type,u),l.props=d,_=e.pendingProps,v=l.context,h=t.contextType,typeof h=="object"&&h!==null?h=vm(h):(h=Fp(t)?tb:Ad.current,h=ET(e,h));var E=t.getDerivedStateFromProps;(m=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==_||v!==h)&&p3(e,l,i,h),K_=!1,v=e.memoizedState,l.state=v,dA(e,i,l,s);var w=e.memoizedState;u!==_||v!==w||Pp.current||K_?(typeof E=="function"&&(_L(e,t,E,i),w=e.memoizedState),(d=K_||d3(e,t,d,i,v,w,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,w,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,w,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),l.props=i,l.state=w,l.context=h,i=d):(typeof l.componentDidUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===n.memoizedProps&&v===n.memoizedState||(e.flags|=1024),i=!1)}return TL(n,e,t,i,o,s)}function TL(n,e,t,i,s,o){tW(n,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&a3(e,t,!1),Z0(n,e,o);i=e.stateNode,RK.current=e;var u=l&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&l?(e.child=ST(e,n.child,null,o),e.child=ST(e,null,u,o)):Jd(n,e,u,o),e.memoizedState=i.state,s&&a3(e,t,!0),e.child}function nW(n){var e=n.stateNode;e.pendingContext?o3(n,e.pendingContext,e.pendingContext!==e.context):e.context&&o3(n,e.context,!1),NN(n,e.containerInfo)}function $3(n,e,t,i,s){return $T(),IN(s),e.flags|=256,Jd(n,e,t,i),e.child}var EL={dehydrated:null,treeContext:null,retryLane:0};function $L(n){return{baseLanes:n,cachePool:null,transitions:null}}function rW(n,e,t){var i=e.pendingProps,s=Rl.current,o=!1,l=(e.flags&128)!==0,u;if((u=l)||(u=n!==null&&n.memoizedState===null?!1:(s&2)!==0),u?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),pa(Rl,s&1),n===null)return mL(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,n=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=sI(l,i,0,null),n=Wy(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=$L(t),e.memoizedState=EL,n):WN(e,l));if(s=n.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return kK(n,e,l,i,u,s,t);if(o){o=i.fallback,l=e.mode,s=n.child,u=s.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=hv(s,h),i.subtreeFlags=s.subtreeFlags&14680064),u!==null?o=hv(u,o):(o=Wy(o,l,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=n.child.memoizedState,l=l===null?$L(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=n.childLanes&~t,e.memoizedState=EL,i}return o=n.child,n=o.sibling,i=hv(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function WN(n,e){return e=sI({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Rx(n,e,t,i){return i!==null&&IN(i),ST(e,n.child,null,t),n=WN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function kK(n,e,t,i,s,o,l){if(t)return e.flags&256?(e.flags&=-257,i=_k(Error(un(422))),Rx(n,e,l,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=sI({mode:"visible",children:i.children},s,0,null),o=Wy(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ST(e,n.child,null,l),e.child.memoizedState=$L(l),e.memoizedState=EL,o);if(!(e.mode&1))return Rx(n,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(un(419)),i=_k(o,i,void 0),Rx(n,e,l,i)}if(u=(l&n.childLanes)!==0,Np||u){if(i=dh,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,q0(n,s),ug(i,n,s,-1))}return JN(),i=_k(Error(un(421))),Rx(n,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=VK.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,bf=av(s.nextSibling),Ef=e,al=!0,rg=null,n!==null&&(dm[pm++]=G0,dm[pm++]=W0,dm[pm++]=nb,G0=n.id,W0=n.overflow,nb=e),e=WN(e,i.children),e.flags|=4096,e)}function S3(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),gL(n.return,e,t)}function vk(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function iW(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Jd(n,e,i.children,t),i=Rl.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&S3(n,t,e);else if(n.tag===19)S3(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(pa(Rl,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&pA(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),vk(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&pA(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}vk(e,!0,t,null,o);break;case"together":vk(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $M(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Z0(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ib|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(un(153));if(e.child!==null){for(n=e.child,t=hv(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=hv(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function OK(n,e,t){switch(e.tag){case 3:nW(e),$T();break;case 5:R6(e);break;case 1:Fp(e.type)&&aA(e);break;case 4:NN(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;pa(cA,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(pa(Rl,Rl.current&1),e.flags|=128,null):t&e.child.childLanes?rW(n,e,t):(pa(Rl,Rl.current&1),n=Z0(n,e,t),n!==null?n.sibling:null);pa(Rl,Rl.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return iW(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pa(Rl,Rl.current),i)break;return null;case 22:case 23:return e.lanes=0,eW(n,e,t)}return Z0(n,e,t)}var sW,SL,oW,aW;sW=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};SL=function(){};oW=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Ry(Yg.current);var o=null;switch(t){case"input":s=jO(n,s),i=jO(n,i),o=[];break;case"select":s=Nl({},s,{value:void 0}),i=Nl({},i,{value:void 0}),o=[];break;case"textarea":s=KO(n,s),i=KO(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=sA)}QO(t,i);var l;t=null;for(d in s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(l in u)u.hasOwnProperty(l)&&(t||(t={}),t[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yS.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in i){var h=i[d];if(u=s!=null?s[d]:void 0,i.hasOwnProperty(d)&&h!==u&&(h!=null||u!=null))if(d==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(t||(t={}),t[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(t||(t={}),t[l]=h[l])}else t||(o||(o=[]),o.push(d,t)),t=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yS.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&Da("scroll",n),o||u===h||(o=[])):(o=o||[]).push(d,h))}t&&(o=o||[]).push("style",t);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};aW=function(n,e,t,i){t!==i&&(e.flags|=4)};function s$(n,e){if(!al)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function vd(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function LK(n,e,t){var i=e.pendingProps;switch(AN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vd(e),null;case 1:return Fp(e.type)&&oA(),vd(e),null;case 3:return i=e.stateNode,wT(),Ba(Pp),Ba(Ad),PN(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Ax(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rg!==null&&(kL(rg),rg=null))),SL(n,e),vd(e),null;case 5:BN(e);var s=Ry(RS.current);if(t=e.type,n!==null&&e.stateNode!=null)oW(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(un(166));return vd(e),null}if(n=Ry(Yg.current),Ax(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[Gg]=e,i[AS]=o,n=(e.mode&1)!==0,t){case"dialog":Da("cancel",i),Da("close",i);break;case"iframe":case"object":case"embed":Da("load",i);break;case"video":case"audio":for(s=0;s<W$.length;s++)Da(W$[s],i);break;case"source":Da("error",i);break;case"img":case"image":case"link":Da("error",i),Da("load",i);break;case"details":Da("toggle",i);break;case"input":OF(i,o),Da("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Da("invalid",i);break;case"textarea":DF(i,o),Da("invalid",i)}QO(t,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&Mx(i.textContent,u,n),s=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Mx(i.textContent,u,n),s=["children",""+u]):yS.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Da("scroll",i)}switch(t){case"input":bx(i),LF(i,o,!0);break;case"textarea":bx(i),NF(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=sA)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=LG(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=l.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=l.createElement(t,{is:i.is}):(n=l.createElement(t),t==="select"&&(l=n,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):n=l.createElementNS(n,t),n[Gg]=e,n[AS]=i,sW(n,e,!1,!1),e.stateNode=n;e:{switch(l=qO(t,i),t){case"dialog":Da("cancel",n),Da("close",n),s=i;break;case"iframe":case"object":case"embed":Da("load",n),s=i;break;case"video":case"audio":for(s=0;s<W$.length;s++)Da(W$[s],n);s=i;break;case"source":Da("error",n),s=i;break;case"img":case"image":case"link":Da("error",n),Da("load",n),s=i;break;case"details":Da("toggle",n),s=i;break;case"input":OF(n,i),s=jO(n,i),Da("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Nl({},i,{value:void 0}),Da("invalid",n);break;case"textarea":DF(n,i),s=KO(n,i),Da("invalid",n);break;default:s=i}QO(t,s),u=s;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?BG(n,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&DG(n,h)):o==="children"?typeof h=="string"?(t!=="textarea"||h!=="")&&bS(n,h):typeof h=="number"&&bS(n,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yS.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Da("scroll",n):h!=null&&fN(n,o,h,l))}switch(t){case"input":bx(n),LF(n,i,!1);break;case"textarea":bx(n),NF(n);break;case"option":i.value!=null&&n.setAttribute("value",""+mv(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?uT(n,!!i.multiple,o,!1):i.defaultValue!=null&&uT(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=sA)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vd(e),null;case 6:if(n&&e.stateNode!=null)aW(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(un(166));if(t=Ry(RS.current),Ry(Yg.current),Ax(e)){if(i=e.stateNode,t=e.memoizedProps,i[Gg]=e,(o=i.nodeValue!==t)&&(n=Ef,n!==null))switch(n.tag){case 3:Mx(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Mx(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Gg]=e,e.stateNode=i}return vd(e),null;case 13:if(Ba(Rl),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(al&&bf!==null&&e.mode&1&&!(e.flags&128))S6(),$T(),e.flags|=98560,o=!1;else if(o=Ax(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(un(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(un(317));o[Gg]=e}else $T(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vd(e),o=!1}else rg!==null&&(kL(rg),rg=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Rl.current&1?Uc===0&&(Uc=3):JN())),e.updateQueue!==null&&(e.flags|=4),vd(e),null);case 4:return wT(),SL(n,e),n===null&&CS(e.stateNode.containerInfo),vd(e),null;case 10:return ON(e.type._context),vd(e),null;case 17:return Fp(e.type)&&oA(),vd(e),null;case 19:if(Ba(Rl),o=e.memoizedState,o===null)return vd(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)s$(o,!1);else{if(Uc!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(l=pA(n),l!==null){for(e.flags|=128,s$(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,n=l.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return pa(Rl,Rl.current&1|2),e.child}n=n.sibling}o.tail!==null&&Fu()>CT&&(e.flags|=128,i=!0,s$(o,!1),e.lanes=4194304)}else{if(!i)if(n=pA(l),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),s$(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!al)return vd(e),null}else 2*Fu()-o.renderingStartTime>CT&&t!==1073741824&&(e.flags|=128,i=!0,s$(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(t=o.last,t!==null?t.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Fu(),e.sibling=null,t=Rl.current,pa(Rl,i?t&1|2:t&1),e):(vd(e),null);case 22:case 23:return KN(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?gf&1073741824&&(vd(e),e.subtreeFlags&6&&(e.flags|=8192)):vd(e),null;case 24:return null;case 25:return null}throw Error(un(156,e.tag))}function DK(n,e){switch(AN(e),e.tag){case 1:return Fp(e.type)&&oA(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return wT(),Ba(Pp),Ba(Ad),PN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return BN(e),null;case 13:if(Ba(Rl),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(un(340));$T()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ba(Rl),null;case 4:return wT(),null;case 10:return ON(e.type._context),null;case 22:case 23:return KN(),null;case 24:return null;default:return null}}var kx=!1,xd=!1,NK=typeof WeakSet=="function"?WeakSet:Set,Fn=null;function tT(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){au(n,e,i)}else t.current=null}function wL(n,e,t){try{t()}catch(i){au(n,e,i)}}var w3=!1;function BK(n,e){if(lL=nA,n=h6(),CN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var l=0,u=-1,h=-1,d=0,m=0,_=n,v=null;t:for(;;){for(var E;_!==t||s!==0&&_.nodeType!==3||(u=l+s),_!==o||i!==0&&_.nodeType!==3||(h=l+i),_.nodeType===3&&(l+=_.nodeValue.length),(E=_.firstChild)!==null;)v=_,_=E;for(;;){if(_===n)break t;if(v===t&&++d===s&&(u=l),v===o&&++m===i&&(h=l),(E=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=E}t=u===-1||h===-1?null:{start:u,end:h}}else t=null}t=t||{start:0,end:0}}else t=null;for(uL={focusedElem:n,selectionRange:t},nA=!1,Fn=e;Fn!==null;)if(e=Fn,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Fn=n;else for(;Fn!==null;){e=Fn;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,A=w.memoizedState,O=e.stateNode,k=O.getSnapshotBeforeUpdate(e.elementType===e.type?x:tg(e.type,x),A);O.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(un(163))}}catch(D){au(e,e.return,D)}if(n=e.sibling,n!==null){n.return=e.return,Fn=n;break}Fn=e.return}return w=w3,w3=!1,w}function sS(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&wL(e,t,o)}s=s.next}while(s!==i)}}function rI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function xL(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lW(n){var e=n.alternate;e!==null&&(n.alternate=null,lW(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Gg],delete e[AS],delete e[dL],delete e[yK],delete e[bK])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uW(n){return n.tag===5||n.tag===3||n.tag===4}function x3(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uW(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function CL(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=sA));else if(i!==4&&(n=n.child,n!==null))for(CL(n,e,t),n=n.sibling;n!==null;)CL(n,e,t),n=n.sibling}function ML(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ML(n,e,t),n=n.sibling;n!==null;)ML(n,e,t),n=n.sibling}var Uh=null,ng=!1;function C_(n,e,t){for(t=t.child;t!==null;)cW(n,e,t),t=t.sibling}function cW(n,e,t){if(Xg&&typeof Xg.onCommitFiberUnmount=="function")try{Xg.onCommitFiberUnmount(KA,t)}catch{}switch(t.tag){case 5:xd||tT(t,e);case 6:var i=Uh,s=ng;Uh=null,C_(n,e,t),Uh=i,ng=s,Uh!==null&&(ng?(n=Uh,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Uh.removeChild(t.stateNode));break;case 18:Uh!==null&&(ng?(n=Uh,t=t.stateNode,n.nodeType===8?hk(n.parentNode,t):n.nodeType===1&&hk(n,t),SS(n)):hk(Uh,t.stateNode));break;case 4:i=Uh,s=ng,Uh=t.stateNode.containerInfo,ng=!0,C_(n,e,t),Uh=i,ng=s;break;case 0:case 11:case 14:case 15:if(!xd&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&wL(t,e,l),s=s.next}while(s!==i)}C_(n,e,t);break;case 1:if(!xd&&(tT(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(u){au(t,e,u)}C_(n,e,t);break;case 21:C_(n,e,t);break;case 22:t.mode&1?(xd=(i=xd)||t.memoizedState!==null,C_(n,e,t),xd=i):C_(n,e,t);break;default:C_(n,e,t)}}function C3(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new NK),e.forEach(function(i){var s=jK.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function jm(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,l=e,u=l;e:for(;u!==null;){switch(u.tag){case 5:Uh=u.stateNode,ng=!1;break e;case 3:Uh=u.stateNode.containerInfo,ng=!0;break e;case 4:Uh=u.stateNode.containerInfo,ng=!0;break e}u=u.return}if(Uh===null)throw Error(un(160));cW(o,l,s),Uh=null,ng=!1;var h=s.alternate;h!==null&&(h.return=null),s.return=null}catch(d){au(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hW(e,n),e=e.sibling}function hW(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(jm(e,n),Dg(n),i&4){try{sS(3,n,n.return),rI(3,n)}catch(x){au(n,n.return,x)}try{sS(5,n,n.return)}catch(x){au(n,n.return,x)}}break;case 1:jm(e,n),Dg(n),i&512&&t!==null&&tT(t,t.return);break;case 5:if(jm(e,n),Dg(n),i&512&&t!==null&&tT(t,t.return),n.flags&32){var s=n.stateNode;try{bS(s,"")}catch(x){au(n,n.return,x)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,l=t!==null?t.memoizedProps:o,u=n.type,h=n.updateQueue;if(n.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&kG(s,o),qO(u,l);var d=qO(u,o);for(l=0;l<h.length;l+=2){var m=h[l],_=h[l+1];m==="style"?BG(s,_):m==="dangerouslySetInnerHTML"?DG(s,_):m==="children"?bS(s,_):fN(s,m,_,d)}switch(u){case"input":XO(s,o);break;case"textarea":OG(s,o);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?uT(s,!!o.multiple,E,!1):v!==!!o.multiple&&(o.defaultValue!=null?uT(s,!!o.multiple,o.defaultValue,!0):uT(s,!!o.multiple,o.multiple?[]:"",!1))}s[AS]=o}catch(x){au(n,n.return,x)}}break;case 6:if(jm(e,n),Dg(n),i&4){if(n.stateNode===null)throw Error(un(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(x){au(n,n.return,x)}}break;case 3:if(jm(e,n),Dg(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{SS(e.containerInfo)}catch(x){au(n,n.return,x)}break;case 4:jm(e,n),Dg(n);break;case 13:jm(e,n),Dg(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(XN=Fu())),i&4&&C3(n);break;case 22:if(m=t!==null&&t.memoizedState!==null,n.mode&1?(xd=(d=xd)||m,jm(e,n),xd=d):jm(e,n),Dg(n),i&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!m&&n.mode&1)for(Fn=n,m=n.child;m!==null;){for(_=Fn=m;Fn!==null;){switch(v=Fn,E=v.child,v.tag){case 0:case 11:case 14:case 15:sS(4,v,v.return);break;case 1:tT(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,t=v.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){au(i,t,x)}}break;case 5:tT(v,v.return);break;case 22:if(v.memoizedState!==null){A3(_);continue}}E!==null?(E.return=v,Fn=E):A3(_)}m=m.sibling}e:for(m=null,_=n;;){if(_.tag===5){if(m===null){m=_;try{s=_.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,h=_.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=NG("display",l))}catch(x){au(n,n.return,x)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=d?"":_.memoizedProps}catch(x){au(n,n.return,x)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===n)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:jm(e,n),Dg(n),i&4&&C3(n);break;case 21:break;default:jm(e,n),Dg(n)}}function Dg(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(uW(t)){var i=t;break e}t=t.return}throw Error(un(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(bS(s,""),i.flags&=-33);var o=x3(n);ML(n,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,u=x3(n);CL(n,u,l);break;default:throw Error(un(161))}}catch(h){au(n,n.return,h)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function PK(n,e,t){Fn=n,dW(n)}function dW(n,e,t){for(var i=(n.mode&1)!==0;Fn!==null;){var s=Fn,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||kx;if(!l){var u=s.alternate,h=u!==null&&u.memoizedState!==null||xd;u=kx;var d=xd;if(kx=l,(xd=h)&&!d)for(Fn=s;Fn!==null;)l=Fn,h=l.child,l.tag===22&&l.memoizedState!==null?I3(s):h!==null?(h.return=l,Fn=h):I3(s);for(;o!==null;)Fn=o,dW(o),o=o.sibling;Fn=s,kx=u,xd=d}M3(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Fn=o):M3(n)}}function M3(n){for(;Fn!==null;){var e=Fn;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xd||rI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!xd)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:tg(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&h3(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}h3(e,l,t)}break;case 5:var u=e.stateNode;if(t===null&&e.flags&4){t=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();break;case"img":h.src&&(t.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&SS(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(un(163))}xd||e.flags&512&&xL(e)}catch(v){au(e,e.return,v)}}if(e===n){Fn=null;break}if(t=e.sibling,t!==null){t.return=e.return,Fn=t;break}Fn=e.return}}function A3(n){for(;Fn!==null;){var e=Fn;if(e===n){Fn=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Fn=t;break}Fn=e.return}}function I3(n){for(;Fn!==null;){var e=Fn;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{rI(4,e)}catch(h){au(e,t,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(h){au(e,s,h)}}var o=e.return;try{xL(e)}catch(h){au(e,o,h)}break;case 5:var l=e.return;try{xL(e)}catch(h){au(e,l,h)}}}catch(h){au(e,e.return,h)}if(e===n){Fn=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Fn=u;break}Fn=e.return}}var FK=Math.ceil,gA=t_.ReactCurrentDispatcher,VN=t_.ReactCurrentOwner,_m=t_.ReactCurrentBatchConfig,hs=0,dh=null,pc=null,Wh=0,gf=0,nT=Sv(0),Uc=0,DS=null,ib=0,iI=0,jN=0,oS=null,Dp=null,XN=0,CT=1/0,B0=null,_A=!1,AL=null,uv=null,Ox=!1,tv=null,vA=0,aS=0,IL=null,SM=-1,wM=0;function rp(){return hs&6?Fu():SM!==-1?SM:SM=Fu()}function cv(n){return n.mode&1?hs&2&&Wh!==0?Wh&-Wh:EK.transition!==null?(wM===0&&(wM=KG()),wM):(n=mo,n!==0||(n=window.event,n=n===void 0?16:n6(n.type)),n):1}function ug(n,e,t,i){if(50<aS)throw aS=0,IL=null,Error(un(185));_w(n,t,i),(!(hs&2)||n!==dh)&&(n===dh&&(!(hs&2)&&(iI|=t),Uc===4&&Z_(n,Wh)),Up(n,i),t===1&&hs===0&&!(e.mode&1)&&(CT=Fu()+500,eI&&wv()))}function Up(n,e){var t=n.callbackNode;EY(n,e);var i=tA(n,n===dh?Wh:0);if(i===0)t!==null&&FF(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&FF(t),e===1)n.tag===0?TK(R3.bind(null,n)):T6(R3.bind(null,n)),_K(function(){!(hs&6)&&wv()}),t=null;else{switch(JG(i)){case 1:t=yN;break;case 4:t=XG;break;case 16:t=eA;break;case 536870912:t=YG;break;default:t=eA}t=bW(t,pW.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function pW(n,e){if(SM=-1,wM=0,hs&6)throw Error(un(327));var t=n.callbackNode;if(fT()&&n.callbackNode!==t)return null;var i=tA(n,n===dh?Wh:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=yA(n,i);else{e=i;var s=hs;hs|=2;var o=mW();(dh!==n||Wh!==e)&&(B0=null,CT=Fu()+500,Gy(n,e));do try{HK();break}catch(u){fW(n,u)}while(!0);kN(),gA.current=o,hs=s,pc!==null?e=0:(dh=null,Wh=0,e=Uc)}if(e!==0){if(e===2&&(s=rL(n),s!==0&&(i=s,e=RL(n,s))),e===1)throw t=DS,Gy(n,0),Z_(n,i),Up(n,Fu()),t;if(e===6)Z_(n,i);else{if(s=n.current.alternate,!(i&30)&&!UK(s)&&(e=yA(n,i),e===2&&(o=rL(n),o!==0&&(i=o,e=RL(n,o))),e===1))throw t=DS,Gy(n,0),Z_(n,i),Up(n,Fu()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(un(345));case 2:yy(n,Dp,B0);break;case 3:if(Z_(n,i),(i&130023424)===i&&(e=XN+500-Fu(),10<e)){if(tA(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){rp(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=hL(yy.bind(null,n,Dp,B0),e);break}yy(n,Dp,B0);break;case 4:if(Z_(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var l=31-lg(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=Fu()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FK(i/1960))-i,10<i){n.timeoutHandle=hL(yy.bind(null,n,Dp,B0),i);break}yy(n,Dp,B0);break;case 5:yy(n,Dp,B0);break;default:throw Error(un(329))}}}return Up(n,Fu()),n.callbackNode===t?pW.bind(null,n):null}function RL(n,e){var t=oS;return n.current.memoizedState.isDehydrated&&(Gy(n,e).flags|=256),n=yA(n,e),n!==2&&(e=Dp,Dp=t,e!==null&&kL(e)),n}function kL(n){Dp===null?Dp=n:Dp.push.apply(Dp,n)}function UK(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!dg(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Z_(n,e){for(e&=~jN,e&=~iI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-lg(e),i=1<<t;n[t]=-1,e&=~i}}function R3(n){if(hs&6)throw Error(un(327));fT();var e=tA(n,0);if(!(e&1))return Up(n,Fu()),null;var t=yA(n,e);if(n.tag!==0&&t===2){var i=rL(n);i!==0&&(e=i,t=RL(n,i))}if(t===1)throw t=DS,Gy(n,0),Z_(n,e),Up(n,Fu()),t;if(t===6)throw Error(un(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,yy(n,Dp,B0),Up(n,Fu()),null}function YN(n,e){var t=hs;hs|=1;try{return n(e)}finally{hs=t,hs===0&&(CT=Fu()+500,eI&&wv())}}function sb(n){tv!==null&&tv.tag===0&&!(hs&6)&&fT();var e=hs;hs|=1;var t=_m.transition,i=mo;try{if(_m.transition=null,mo=1,n)return n()}finally{mo=i,_m.transition=t,hs=e,!(hs&6)&&wv()}}function KN(){gf=nT.current,Ba(nT)}function Gy(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,gK(t)),pc!==null)for(t=pc.return;t!==null;){var i=t;switch(AN(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&oA();break;case 3:wT(),Ba(Pp),Ba(Ad),PN();break;case 5:BN(i);break;case 4:wT();break;case 13:Ba(Rl);break;case 19:Ba(Rl);break;case 10:ON(i.type._context);break;case 22:case 23:KN()}t=t.return}if(dh=n,pc=n=hv(n.current,null),Wh=gf=e,Uc=0,DS=null,jN=iI=ib=0,Dp=oS=null,Iy!==null){for(e=0;e<Iy.length;e++)if(t=Iy[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}t.pending=i}Iy=null}return n}function fW(n,e){do{var t=pc;try{if(kN(),TM.current=mA,fA){for(var i=Ll.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}fA=!1}if(rb=0,hh=Fc=Ll=null,iS=!1,kS=0,VN.current=null,t===null||t.return===null){Uc=1,DS=e,pc=null;break}e:{var o=n,l=t.return,u=t,h=e;if(e=Wh,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=v3(l);if(E!==null){E.flags&=-257,y3(E,l,u,o,e),E.mode&1&&_3(o,d,e),e=E,h=d;var w=e.updateQueue;if(w===null){var x=new Set;x.add(h),e.updateQueue=x}else w.add(h);break e}else{if(!(e&1)){_3(o,d,e),JN();break e}h=Error(un(426))}}else if(al&&u.mode&1){var A=v3(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),y3(A,l,u,o,e),IN(xT(h,u));break e}}o=h=xT(h,u),Uc!==4&&(Uc=2),oS===null?oS=[o]:oS.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var O=Q6(o,h,e);c3(o,O);break e;case 1:u=h;var k=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof k.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(uv===null||!uv.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=q6(o,u,e);c3(o,D);break e}}o=o.return}while(o!==null)}_W(t)}catch(U){e=U,pc===t&&t!==null&&(pc=t=t.return);continue}break}while(!0)}function mW(){var n=gA.current;return gA.current=mA,n===null?mA:n}function JN(){(Uc===0||Uc===3||Uc===2)&&(Uc=4),dh===null||!(ib&268435455)&&!(iI&268435455)||Z_(dh,Wh)}function yA(n,e){var t=hs;hs|=2;var i=mW();(dh!==n||Wh!==e)&&(B0=null,Gy(n,e));do try{zK();break}catch(s){fW(n,s)}while(!0);if(kN(),hs=t,gA.current=i,pc!==null)throw Error(un(261));return dh=null,Wh=0,Uc}function zK(){for(;pc!==null;)gW(pc)}function HK(){for(;pc!==null&&!pY();)gW(pc)}function gW(n){var e=yW(n.alternate,n,gf);n.memoizedProps=n.pendingProps,e===null?_W(n):pc=e,VN.current=null}function _W(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=DK(t,e),t!==null){t.flags&=32767,pc=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Uc=6,pc=null;return}}else if(t=LK(t,e,gf),t!==null){pc=t;return}if(e=e.sibling,e!==null){pc=e;return}pc=e=n}while(e!==null);Uc===0&&(Uc=5)}function yy(n,e,t){var i=mo,s=_m.transition;try{_m.transition=null,mo=1,GK(n,e,t,i)}finally{_m.transition=s,mo=i}return null}function GK(n,e,t,i){do fT();while(tv!==null);if(hs&6)throw Error(un(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(un(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if($Y(n,o),n===dh&&(pc=dh=null,Wh=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ox||(Ox=!0,bW(eA,function(){return fT(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=_m.transition,_m.transition=null;var l=mo;mo=1;var u=hs;hs|=4,VN.current=null,BK(n,t),hW(t,n),uK(uL),nA=!!lL,uL=lL=null,n.current=t,PK(t),fY(),hs=u,mo=l,_m.transition=o}else n.current=t;if(Ox&&(Ox=!1,tv=n,vA=s),o=n.pendingLanes,o===0&&(uv=null),_Y(t.stateNode),Up(n,Fu()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(_A)throw _A=!1,n=AL,AL=null,n;return vA&1&&n.tag!==0&&fT(),o=n.pendingLanes,o&1?n===IL?aS++:(aS=0,IL=n):aS=0,wv(),null}function fT(){if(tv!==null){var n=JG(vA),e=_m.transition,t=mo;try{if(_m.transition=null,mo=16>n?16:n,tv===null)var i=!1;else{if(n=tv,tv=null,vA=0,hs&6)throw Error(un(331));var s=hs;for(hs|=4,Fn=n.current;Fn!==null;){var o=Fn,l=o.child;if(Fn.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var d=u[h];for(Fn=d;Fn!==null;){var m=Fn;switch(m.tag){case 0:case 11:case 15:sS(8,m,o)}var _=m.child;if(_!==null)_.return=m,Fn=_;else for(;Fn!==null;){m=Fn;var v=m.sibling,E=m.return;if(lW(m),m===d){Fn=null;break}if(v!==null){v.return=E,Fn=v;break}Fn=E}}}var w=o.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}Fn=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Fn=l;else e:for(;Fn!==null;){if(o=Fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:sS(9,o,o.return)}var O=o.sibling;if(O!==null){O.return=o.return,Fn=O;break e}Fn=o.return}}var k=n.current;for(Fn=k;Fn!==null;){l=Fn;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,Fn=N;else e:for(l=k;Fn!==null;){if(u=Fn,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rI(9,u)}}catch(U){au(u,u.return,U)}if(u===l){Fn=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,Fn=D;break e}Fn=u.return}}if(hs=s,wv(),Xg&&typeof Xg.onPostCommitFiberRoot=="function")try{Xg.onPostCommitFiberRoot(KA,n)}catch{}i=!0}return i}finally{mo=t,_m.transition=e}}return!1}function k3(n,e,t){e=xT(t,e),e=Q6(n,e,1),n=lv(n,e,1),e=rp(),n!==null&&(_w(n,1,e),Up(n,e))}function au(n,e,t){if(n.tag===3)k3(n,n,t);else for(;e!==null;){if(e.tag===3){k3(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(uv===null||!uv.has(i))){n=xT(t,n),n=q6(e,n,1),e=lv(e,n,1),n=rp(),e!==null&&(_w(e,1,n),Up(e,n));break}}e=e.return}}function WK(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=rp(),n.pingedLanes|=n.suspendedLanes&t,dh===n&&(Wh&t)===t&&(Uc===4||Uc===3&&(Wh&130023424)===Wh&&500>Fu()-XN?Gy(n,0):jN|=t),Up(n,e)}function vW(n,e){e===0&&(n.mode&1?(e=$x,$x<<=1,!($x&130023424)&&($x=4194304)):e=1);var t=rp();n=q0(n,e),n!==null&&(_w(n,e,t),Up(n,t))}function VK(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vW(n,t)}function jK(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(un(314))}i!==null&&i.delete(e),vW(n,t)}var yW;yW=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Pp.current)Np=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Np=!1,OK(n,e,t);Np=!!(n.flags&131072)}else Np=!1,al&&e.flags&1048576&&E6(e,uA,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$M(n,e),n=e.pendingProps;var s=ET(e,Ad.current);pT(e,t),s=UN(null,e,i,n,s,t);var o=zN();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fp(i)?(o=!0,aA(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,DN(e),s.updater=tI,e.stateNode=s,s._reactInternals=e,vL(e,i,n,t),e=TL(null,e,i,!0,o,t)):(e.tag=0,al&&o&&MN(e),Jd(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch($M(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=YK(i),n=tg(i,n),s){case 0:e=bL(null,e,i,n,t);break e;case 1:e=E3(null,e,i,n,t);break e;case 11:e=b3(null,e,i,n,t);break e;case 14:e=T3(null,e,i,tg(i.type,n),t);break e}throw Error(un(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:tg(i,s),bL(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:tg(i,s),E3(n,e,i,s,t);case 3:e:{if(nW(e),n===null)throw Error(un(387));i=e.pendingProps,o=e.memoizedState,s=o.element,x6(n,e),dA(e,i,null,t);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=xT(Error(un(423)),e),e=$3(n,e,i,t,s);break e}else if(i!==s){s=xT(Error(un(424)),e),e=$3(n,e,i,t,s);break e}else for(bf=av(e.stateNode.containerInfo.firstChild),Ef=e,al=!0,rg=null,t=I6(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if($T(),i===s){e=Z0(n,e,t);break e}Jd(n,e,i,t)}e=e.child}return e;case 5:return R6(e),n===null&&mL(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,l=s.children,cL(i,s)?l=null:o!==null&&cL(i,o)&&(e.flags|=32),tW(n,e),Jd(n,e,l,t),e.child;case 6:return n===null&&mL(e),null;case 13:return rW(n,e,t);case 4:return NN(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=ST(e,null,i,t):Jd(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:tg(i,s),b3(n,e,i,s,t);case 7:return Jd(n,e,e.pendingProps,t),e.child;case 8:return Jd(n,e,e.pendingProps.children,t),e.child;case 12:return Jd(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,pa(cA,i._currentValue),i._currentValue=l,o!==null)if(dg(o.value,l)){if(o.children===s.children&&!Pp.current){e=Z0(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=X0(-1,t&-t),h.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?h.next=h:(h.next=m.next,m.next=h),d.pending=h}}o.lanes|=t,h=o.alternate,h!==null&&(h.lanes|=t),gL(o.return,t,e),u.lanes|=t;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(un(341));l.lanes|=t,u=l.alternate,u!==null&&(u.lanes|=t),gL(l,t,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Jd(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,pT(e,t),s=vm(s),i=i(s),e.flags|=1,Jd(n,e,i,t),e.child;case 14:return i=e.type,s=tg(i,e.pendingProps),s=tg(i.type,s),T3(n,e,i,s,t);case 15:return Z6(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:tg(i,s),$M(n,e),e.tag=1,Fp(i)?(n=!0,aA(e)):n=!1,pT(e,t),M6(e,i,s),vL(e,i,s,t),TL(null,e,i,!0,n,t);case 19:return iW(n,e,t);case 22:return eW(n,e,t)}throw Error(un(156,e.tag))};function bW(n,e){return jG(n,e)}function XK(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gm(n,e,t,i){return new XK(n,e,t,i)}function QN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function YK(n){if(typeof n=="function")return QN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===gN)return 11;if(n===_N)return 14}return 2}function hv(n,e){var t=n.alternate;return t===null?(t=gm(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function xM(n,e,t,i,s,o){var l=2;if(i=n,typeof n=="function")QN(n)&&(l=1);else if(typeof n=="string")l=5;else e:switch(n){case j1:return Wy(t.children,s,o,e);case mN:l=8,s|=8;break;case HO:return n=gm(12,t,e,s|2),n.elementType=HO,n.lanes=o,n;case GO:return n=gm(13,t,e,s),n.elementType=GO,n.lanes=o,n;case WO:return n=gm(19,t,e,s),n.elementType=WO,n.lanes=o,n;case AG:return sI(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case CG:l=10;break e;case MG:l=9;break e;case gN:l=11;break e;case _N:l=14;break e;case Y_:l=16,i=null;break e}throw Error(un(130,n==null?n:typeof n,""))}return e=gm(l,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function Wy(n,e,t,i){return n=gm(7,n,i,e),n.lanes=t,n}function sI(n,e,t,i){return n=gm(22,n,i,e),n.elementType=AG,n.lanes=t,n.stateNode={isHidden:!1},n}function yk(n,e,t){return n=gm(6,n,null,e),n.lanes=t,n}function bk(n,e,t){return e=gm(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KK(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ek(0),this.expirationTimes=ek(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ek(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qN(n,e,t,i,s,o,l,u,h){return n=new KK(n,e,t,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=gm(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},DN(o),n}function JK(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V1,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function TW(n){if(!n)return gv;n=n._reactInternals;e:{if(gb(n)!==n||n.tag!==1)throw Error(un(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fp(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(un(171))}if(n.tag===1){var t=n.type;if(Fp(t))return b6(n,t,e)}return e}function EW(n,e,t,i,s,o,l,u,h){return n=qN(t,i,!0,n,s,o,l,u,h),n.context=TW(null),t=n.current,i=rp(),s=cv(t),o=X0(i,s),o.callback=e??null,lv(t,o,s),n.current.lanes=s,_w(n,s,i),Up(n,i),n}function oI(n,e,t,i){var s=e.current,o=rp(),l=cv(s);return t=TW(t),e.context===null?e.context=t:e.pendingContext=t,e=X0(o,l),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=lv(s,e,l),n!==null&&(ug(n,s,l,o),bM(n,s,l)),l}function bA(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function O3(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ZN(n,e){O3(n,e),(n=n.alternate)&&O3(n,e)}function QK(){return null}var $W=typeof reportError=="function"?reportError:function(n){console.error(n)};function eB(n){this._internalRoot=n}aI.prototype.render=eB.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(un(409));oI(n,e,null,null)};aI.prototype.unmount=eB.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;sb(function(){oI(null,n,null,null)}),e[Q0]=null}};function aI(n){this._internalRoot=n}aI.prototype.unstable_scheduleHydration=function(n){if(n){var e=ZG();n={blockedOn:null,target:n,priority:e};for(var t=0;t<q_.length&&e!==0&&e<q_[t].priority;t++);q_.splice(t,0,n),t===0&&t6(n)}};function tB(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function lI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function L3(){}function qK(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var d=bA(l);o.call(d)}}var l=EW(e,i,n,0,null,!1,!1,"",L3);return n._reactRootContainer=l,n[Q0]=l.current,CS(n.nodeType===8?n.parentNode:n),sb(),l}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var u=i;i=function(){var d=bA(h);u.call(d)}}var h=qN(n,0,!1,null,null,!1,!1,"",L3);return n._reactRootContainer=h,n[Q0]=h.current,CS(n.nodeType===8?n.parentNode:n),sb(function(){oI(e,h,t,i)}),h}function uI(n,e,t,i,s){var o=t._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var u=s;s=function(){var h=bA(l);u.call(h)}}oI(e,l,n,s)}else l=qK(t,e,n,s,i);return bA(l)}QG=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=G$(e.pendingLanes);t!==0&&(bN(e,t|1),Up(e,Fu()),!(hs&6)&&(CT=Fu()+500,wv()))}break;case 13:sb(function(){var i=q0(n,1);if(i!==null){var s=rp();ug(i,n,1,s)}}),ZN(n,1)}};TN=function(n){if(n.tag===13){var e=q0(n,134217728);if(e!==null){var t=rp();ug(e,n,134217728,t)}ZN(n,134217728)}};qG=function(n){if(n.tag===13){var e=cv(n),t=q0(n,e);if(t!==null){var i=rp();ug(t,n,e,i)}ZN(n,e)}};ZG=function(){return mo};e6=function(n,e){var t=mo;try{return mo=n,e()}finally{mo=t}};eL=function(n,e,t){switch(e){case"input":if(XO(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=ZA(i);if(!s)throw Error(un(90));RG(i),XO(i,s)}}}break;case"textarea":OG(n,t);break;case"select":e=t.value,e!=null&&uT(n,!!t.multiple,e,!1)}};UG=YN;zG=sb;var ZK={usingClientEntryPoint:!1,Events:[yw,J1,ZA,PG,FG,YN]},o$={findFiberByHostInstance:Ay,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},eJ={bundleType:o$.bundleType,version:o$.version,rendererPackageName:o$.rendererPackageName,rendererConfig:o$.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:t_.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WG(n),n===null?null:n.stateNode},findFiberByHostInstance:o$.findFiberByHostInstance||QK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lx.isDisabled&&Lx.supportsFiber)try{KA=Lx.inject(eJ),Xg=Lx}catch{}}If.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZK;If.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tB(e))throw Error(un(200));return JK(n,e,null,t)};If.createRoot=function(n,e){if(!tB(n))throw Error(un(299));var t=!1,i="",s=$W;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qN(n,1,!1,null,null,t,!1,i,s),n[Q0]=e.current,CS(n.nodeType===8?n.parentNode:n),new eB(e)};If.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(un(188)):(n=Object.keys(n).join(","),Error(un(268,n)));return n=WG(e),n=n===null?null:n.stateNode,n};If.flushSync=function(n){return sb(n)};If.hydrate=function(n,e,t){if(!lI(e))throw Error(un(200));return uI(null,n,e,!0,t)};If.hydrateRoot=function(n,e,t){if(!tB(n))throw Error(un(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",l=$W;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),e=EW(e,null,n,1,t??null,s,!1,o,l),n[Q0]=e.current,CS(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new aI(e)};If.render=function(n,e,t){if(!lI(e))throw Error(un(200));return uI(null,n,e,!1,t)};If.unmountComponentAtNode=function(n){if(!lI(n))throw Error(un(40));return n._reactRootContainer?(sb(function(){uI(null,null,n,!1,function(){n._reactRootContainer=null,n[Q0]=null})}),!0):!1};If.unstable_batchedUpdates=YN;If.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!lI(t))throw Error(un(200));if(n==null||n._reactInternals===void 0)throw Error(un(38));return uI(n,e,t,!1,i)};If.version="18.2.0-next-9e3b772b8-20220608";function SW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SW)}catch(n){console.error(n)}}SW(),EG.exports=If;var nB=EG.exports;const Dx=fb(nB);var D3=nB;UO.createRoot=D3.createRoot,UO.hydrateRoot=D3.hydrateRoot;var wW={exports:{}},Tk={exports:{}},Ek={exports:{}},$k={exports:{}},Sk={exports:{}},N3;function rB(){return N3||(N3=1,function(n,e){(function(t,i){n.exports=i()})(zu,function(){var t={},i,s,o,l,u,h,d,m,_,v,E,w,x,A,O,k,N,D,U,F,H,z,J,te,re,ie,de,oe,ue,ge,Ae,j,Z,ne,le,_e,Oe,xe,Xe,Re,Je,et,at,Qe,De,Se,Pe,rt,We,wt,xt,ht,St,It,mt,ve,ee,ke,ot,dt,$t,ct,Ge,Me,X,Q,ae,$e,Ve,Pt,Fe,Wt,lt,Ut,Ft,Tn,Er,cr,Gr,sr,Xn,q,me,Ne,nt,Rt,Qt,gn,Ie,st,Tt,pt,Bt,xn,Bn,nr,vr,ei,$r,Ar,Wi,jo,Ro,ll,Yt,hr,fa,Xo,ps,fs,ci,dr,pn,ar,wr,er,hi,Qi,jr,Bi,Pa,ul,gc,Vu,Rs,ko,uu,Pl,mh,Yo,tr,Pi,Gc,gh,_c,cl,cu,hl,dl,Jn,Qn,pl,Fa,ma,Fl,Ei,Fi,fl,Rd,ks,hu,Oo,Ul,Xr,pr,Vi,Os,du,zl,Wc,Ko,Jo,pu,Yr,ms,Ai,ti,ga,Ui,fu,ro,mu,Ua,di,ni,Un,Kr,$i,Xh,gu,gs,ml,Yh,pi,_u,hp,dp,_h,pp,Wp,Pf,fp,ju,io,vu,vh,_a,Wr,lr,Vs,Qo,Lo,yu,gl,Kh,Si,fi,ur,wi,qo,Hl,mp,gp,Jh,bu,Xu,vc,yh,yc,Gl,Zo,Yu,bh,bc,Tc,_s,Jr,_l,ea,vl,Wl,Vc,kd,mi,Ye,kt,bt,mn,Dn,qn,rr,An,Ir,Ls,vs,vo,va,ji,os,Ec,Br,Do,Ds,js,ta,Th,jc,Eh,Tu,Qh,qh,yl,Zh,$c,Xc,Od,za,ya,Eu,$h,ri,ed,Yc,Ku,Sh,Ld,bl,Dd,wh,so,na,Ff,Vp,Tl,El,Sc,xh,td,Ju,Ha,Qu,nd,wc,xc,qu,Nd,ra,xr,Vl,qi,ia,ye,Xs,Ga,Ur,zn,jp,ba,Qr,gi,xi,Ii,Cc,No,Bo,oo,Mc,yo,Bd,Pd,Ch,Ta,Cn,as,ys,ii,$l,Sl,cn,zr,Zi,Xp,Kc,Ns,Po,dn,rn,Wa,Zu,Uf,$u,sa,ls,Ea,zi,$a,Su,Fd,ec,Ys,Ud,Jc,rd,Sa,wl,Yp,jl,wu,id,Ac,us,xu,tc,bo,Va,bs,ao,Qc,Ks,ja,nc,_p,qc,oa,_i,wn,On,yr,Or,Hr,Js,Ri,Hi,Xl,Cu,rc,Mu,Bs,lo,sd,wa,Au,Iu,Qs,To,Xa,Eo,ic,Ru,Mh,Zc,Sr,Xi,Ts,aa,Ps,Gn,Ic,on;i=function(r,a,p,b){if(!(r instanceof Dt)&&typeof r!="string"||`${r}`.trim()==="")throw Error('Invalid type "'+r+'". The type must be a non-empty string or a Blockly.registry.Type.');if(r=`${r}`.toLowerCase(),typeof a!="string"||a.trim()==="")throw Error('Invalid name "'+a+'". The name must be a non-empty string.');const R=a.toLowerCase();if(!p)throw Error("Can not register a null value");let W=si[r],pe=xl[r];if(W||(W=si[r]=Object.create(null),pe=xl[r]=Object.create(null)),s(r,p),!b&&W[R])throw Error('Name "'+R+'" with type "'+r+'" already registered.');W[R]=p,pe[R]=a},s=function(r,a){switch(r){case String(Dt.FIELD):if(typeof a.fromJson!="function")throw Error('Type "'+r+'" must have a fromJson function')}},o=function(r,a){r=`${r}`.toLowerCase(),a=a.toLowerCase();const p=si[r];p&&p[a]?(delete si[r][a],delete xl[r][a]):console.warn("Unable to unregister ["+a+"]["+r+"] from the registry.")},l=function(r,a,p){r=`${r}`.toLowerCase(),a=a.toLowerCase();const b=si[r];if(!b||!b[a]){if(a="Unable to find ["+a+"]["+r+"] in the registry.",p)throw Error(a+" You must require or register a "+r+" plugin.");return console.warn(a),null}return b[a]},u=function(r,a){return r=`${r}`.toLowerCase(),a=a.toLowerCase(),(r=si[r])?!!r[a]:!1},h=function(r,a,p){return l(r,a,p)},d=function(r,a,p){return l(r,a,p)},m=function(r,a,p){r=`${r}`.toLowerCase();var b=si[r];if(!b){if(b=`Unable to find [${r}] in the registry.`,p)throw Error(`${b} You must require or register a ${r} plugin.`);return console.warn(b),null}if(!a)return b;r=xl[r],p=Object.create(null);for(const R of Object.keys(b))p[r[R]]=b[R];return p},_=function(r,a,p){return a=a.plugins[String(r)]||Ya,typeof a=="function"?a:h(r,a,p)},v=function(r){return Rc[r]||null},E=function(){const r=[];for(const a in Rc)r.push(Rc[a]);return r},w=function(r){Rc[r.id]=r},x=function(r){delete Rc[r.id]},A=function(){return od},O=function(r){od=r},k=function(){return eh},N=function(r){eh=r},D=function(){return ts},U=function(r){ts=r},F=function(r){for(;r.options.parentWorkspace;)r=r.options.parentWorkspace;const a=r.getParentSvg(),p=r.getCachedParentSvgSize();var b=a.parentElement;if(b instanceof HTMLElement){var R=b.offsetWidth;b=b.offsetHeight,p.width!==R&&(a.setAttribute("width",R+"px"),r.setCachedParentSvgSize(R,null)),p.height!==b&&(a.setAttribute("height",b+"px"),r.setCachedParentSvgSize(null,b)),r.resize()}},H=function(r,a){const p=Object.create(null),b=r.getDescendants(!0);a&&(r=r.getNextBlock())&&(r=b.indexOf(r),b.splice(r,b.length-r));for(let R=0,W;W=b[R];R++)p[W.type]?p[W.type]++:p[W.type]=1;return p},z=function(r){return function(){this.jsonInit(r)}},J=function(r){Ah.defineBlocksWithJsonArrayInternal(r)},te=function(r){t.defineBlocks$$module$build$src$core$common(t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(r))},t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(r){const a={};for(let p=0;p<r.length;p++){const b=r[p];if(!b){console.warn(`Block definition #${p} in JSON array is ${b}. Skipping`);continue}const R=b.type;R?a[R]={init:z(b)}:console.warn(`Block definition #${p} in JSON array is missing a type attribute. Skipping.`)}return a},t.defineBlocks$$module$build$src$core$common=function(r){for(const a of Object.keys(r)){const p=r[a];a in Lr&&console.warn(`Block definiton "${a}" overwrites previous definition.`),Lr[a]=p}},re=function(){return"blockly-"+(nh++).toString(36)},ie=function(){return th.genUid()},de=function(r){Zs=r},oe=function(){return Zs},ue=function(r){Kp.fireInternal(r)},ge=function(r){if(ne()){if(!kc.length)try{requestAnimationFrame(()=>{setTimeout(Ae,0)})}catch{setTimeout(Ae,0)}kc.push(r)}},Ae=function(){var r=j(kc,!0);kc.length=0;for(let p=0,b;b=r[p];p++)if(b.workspaceId){var a=v(b.workspaceId);a&&a.fireChangeListener(b)}r=new Set(r.map(p=>p.workspaceId));for(const p of r){if(!p||(r=v(p),!r))continue;r=r.getUndoStack();let b;for(a=r.length;0<a;a--){const R=r[a-1];if(R.group==="")break;if(b===void 0)b=R.group;else if(R.group!==b)break}b&&a!=r.length-1&&(a=r.splice(a,r.length-a),a=j(a,!0),r.push(...a))}},j=function(r,a){r=r.slice(),a||r.reverse();const p=[],b=Object.create(null);for(let pe=0,Le;Le=r[pe];pe++)if(!Le.isNull()){var R=[Le.isUiEvent?sh:Le.type,Le.blockId,Le.workspaceId].join(" "),W=b[R];const Nt=W?W.event:null;W?Le.type===t.MOVE$$module$build$src$core$events$utils&&W.index===pe-1?(R=Le,Nt.newParentId=R.newParentId,Nt.newInputName=R.newInputName,Nt.newCoordinate=R.newCoordinate,R.reason&&(Nt.reason?(R=new Set(R.reason.concat(Nt.reason)),Nt.reason=Array.from(R)):Nt.reason=R.reason),W.index=pe):Le.type===t.CHANGE$$module$build$src$core$events$utils&&Le.element===Nt.element&&Le.name===Nt.name?Nt.newValue=Le.newValue:Le.type===ns?(W=Le,Nt.viewTop=W.viewTop,Nt.viewLeft=W.viewLeft,Nt.scale=W.scale,Nt.oldScale=W.oldScale):(Le.type!==Lu||Nt.type!==eo)&&(b[R]={event:Le,index:pe},p.push(Le)):(b[R]={event:Le,index:pe},p.push(Le))}r=p.filter(function(pe){return!pe.isNull()}),a||r.reverse();for(let pe=1,Le;Le=r[pe];pe++)Le.type===t.CHANGE$$module$build$src$core$events$utils&&Le.element==="mutation"&&r.unshift(r.splice(pe,1)[0]);return r},Z=function(){for(let r=0,a;a=kc[r];r++)a.recordUndo=!1},t.disable$$module$build$src$core$events$utils=function(){ku++},t.enable$$module$build$src$core$events$utils=function(){ku--},ne=function(){return ku===0},t.getGroup$$module$build$src$core$events$utils=function(){return $o},t.setGroup$$module$build$src$core$events$utils=function(r){Kp.setGroupInternal(r)},le=function(r){$o=typeof r=="boolean"?r?ie():"":r},_e=function(r){const a=[];r=r.getDescendants(!1);for(let p=0,b;b=r[p];p++)a[p]=b.id;return a},Oe=function(r,a){const p=xe(r.type);if(!p)throw Error("Unknown event type.");return p.fromJson(r,a)},xe=function(r){const a=h(Dt.EVENT,r);if(!a)throw Error(`Event type ${r} not found in registry.`);return a},Xe=function(r){if((r.type===t.MOVE$$module$build$src$core$events$utils||r.type===t.CREATE$$module$build$src$core$events$utils)&&r.workspaceId){var a=v(r.workspaceId);if(!r.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(r=a.getBlockById(r.blockId)){const p=Zs;try{Zs=!1;const b=r.getParent();if(b&&b.isEnabled()){const R=r.getDescendants(!1);for(let W=0,pe;pe=R[W];W++)pe.setEnabled(!0)}else if((r.outputConnection||r.previousConnection)&&!a.isDragging())do r.setEnabled(!1),r=r.getNextBlock();while(r)}finally{Zs=p}}}},Re=function(r,a){Je(),je=setTimeout(function(){a&&a.handleRightClick(r)},L)},Je=function(){je&&(clearTimeout(je),je=0)},et=function(){se=null},at=function(r){return!r.type.startsWith("pointer")||r instanceof PointerEvent&&De(r)},Qe=function(r){return`${r.pointerId}`},De=function(r){const a=Qe(r);return se?se===a:r.type==="pointerdown"?(se=a,!0):!1},Se=function(r,a,p,b,R){function W(Le){(R||at(Le))&&(p?b.call(p,Le):b(Le))}const pe=[];if(a in we)for(let Le=0;Le<we[a].length;Le++){const Nt=we[a][Le];r.addEventListener(Nt,W,!1),pe.push([r,Nt,W])}else r.addEventListener(a,W,!1),pe.push([r,a,W]);return pe},Pe=function(r,a,p,b){function R(pe){p?b.call(p,pe):b(pe)}const W=[];if(a in we)for(let pe=0;pe<we[a].length;pe++){const Le=we[a][pe];r.addEventListener(Le,R,!1),W.push([r,Le,R])}else r.addEventListener(a,R,!1),W.push([r,a,R]);return W},rt=function(r){const a=r[r.length-1][2];for(;r.length;){const[p,b,R]=r.pop();p.removeEventListener(b,R,!1)}return a},We=function(r){if(r.target instanceof HTMLElement){if(r.target.isContentEditable||r.target.getAttribute("data-is-text-input")==="true")return!0;if(r.target instanceof HTMLInputElement)return r=r.target,r.type==="text"||r.type==="number"||r.type==="email"||r.type==="password"||r.type==="search"||r.type==="tel"||r.type==="url";if(r.target instanceof HTMLTextAreaElement)return!0}return!1},wt=function(r){return r.ctrlKey&&fr?!0:r.button===2},xt=function(r,a,p){const b=a.createSVGPoint();return b.x=r.clientX,b.y=r.clientY,p||(p=a.getScreenCTM().inverse()),b.matrixTransform(p)},ht=function(r){switch(r.deltaMode){default:return{x:r.deltaX,y:r.deltaY};case 1:return{x:r.deltaX*Jp,y:r.deltaY*Jp};case 2:return{x:r.deltaX*Yn,y:r.deltaY*Yn}}},St=function(r,a){return a=r.indexOf(a),a===-1?!1:(r.splice(a,1),!0)},It=function(r){if(zf)throw Error("CSS already injected");cd+=`
`+r},mt=function(r,a){zf||(zf=!0,r&&(r=a.replace(/[\\/]$/,""),a=cd.replace(/<<<PATH>>>/g,r),cd="",r=document.createElement("style"),r.id="blockly-common-style",a=document.createTextNode(a),r.appendChild(a),document.head.insertBefore(r,document.head.firstChild)))},ve=function(r,a,p,b){r=r+" was deprecated in "+a+" and will be deleted in "+p+".",b&&(r+=`
Use `+b+" instead."),o_.has(r)||(o_.add(r),console.warn(r))},ee=function(r,a,p){r=document.createElementNS(yg,`${r}`);for(const b in a)r.setAttribute(b,`${a[b]}`);return p&&p.appendChild(r),r},ke=function(r,a){return a=a.split(" "),a.every(p=>r.classList.contains(p))?!1:(r.classList.add(...a),!0)},ot=function(r,a){r.classList.remove(...a.split(" "))},dt=function(r,a){return a=a.split(" "),a.every(p=>!r.classList.contains(p))?!1:(r.classList.remove(...a),!0)},$t=function(r,a){return r.classList.contains(a)},ct=function(r){return r&&r.parentNode?r.parentNode.removeChild(r):null},Ge=function(r,a){const p=a.nextSibling;if(a=a.parentNode,!a)throw Error("Reference node has no parent.");p?a.insertBefore(r,p):a.appendChild(r)},Me=function(r,a){return ve("Blockly.utils.dom.containsNode","version 10","version 11",'Use native "contains" DOM method'),r.contains(a)},X=function(r,a){r.style.transform=a,r.style["-webkit-transform"]=a},Q=function(){oh++,zd||(zd=Object.create(null))},ae=function(){oh--,oh||(zd=null)},$e=function(r){const a=r.textContent+`
`+r.className.baseVal;let p;if(zd&&(p=zd[a]))return p;try{p=r.getComputedTextLength()}catch{return 8*r.textContent.length}return zd&&(zd[a]=p),p},Ve=function(r,a,p,b){return Pt(r,a+"pt",p,b)},Pt=function(r,a,p,b){const R=r.textContent;r=R+`
`+r.className.baseVal;var W;return zd&&(W=zd[r])||(ki||(W=document.createElement("canvas"),W.className="blocklyComputeCanvas",document.body.appendChild(W),ki=W.getContext("2d")),ki.font=p+" "+a+" "+b,W=R?ki.measureText(R).width:0,zd&&(zd[r]=W)),W},Fe=function(r,a,p,b){const R=document.createElement("span");R.style.font=p+" "+a+" "+b,R.textContent=r,r=document.createElement("div"),r.style.width="1px",r.style.height="0",a=document.createElement("div"),a.style.display="flex",a.style.position="fixed",a.style.top="0",a.style.left="0",a.appendChild(R),a.appendChild(r),document.body.appendChild(a),p={height:0,baseline:0};try{a.style.alignItems="baseline",p.baseline=r.offsetTop-R.offsetTop,a.style.alignItems="flex-end",p.height=r.offsetTop-R.offsetTop}finally{document.body.removeChild(a)}return p},Wt=function(r){return kv.getSizeInternal(r)},lt=function(r){if(Ft(r,"display")!=="none")return Ut(r);const a=r.style,p=a.display,b=a.visibility,R=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";const W=r.offsetWidth;return r=r.offsetHeight,a.display=p,a.position=R,a.visibility=b,new Ss(W,r)},Ut=function(r){return new Ss(r.offsetWidth,r.offsetHeight)},Ft=function(r,a){return r=window.getComputedStyle(r),r[a]||r.getPropertyValue(a)},Tn=function(r){const a=new tn(0,0);r=r.getBoundingClientRect();var p=document.documentElement;return p=new tn(window.pageXOffset||p.scrollLeft,window.pageYOffset||p.scrollTop),a.x=r.left+p.x,a.y=r.top+p.y,a},Er=function(){const r=document.body,a=document.documentElement;return new tn(r.scrollLeft||a.scrollLeft,r.scrollTop||a.scrollTop)},cr=function(r){const a=parseFloat(Ft(r,"borderLeftWidth")),p=parseFloat(Ft(r,"borderRightWidth")),b=parseFloat(Ft(r,"borderTopWidth"));return r=parseFloat(Ft(r,"borderBottomWidth")),new vi(b,r,a,p)},Gr=function(r,a,p){r=sr(r,a,p),a.scrollLeft=r.x,a.scrollTop=r.y},sr=function(r,a,p){var b=Tn(r),R=Tn(a),W=cr(a);const pe=b.x-R.x-W.left;return b=b.y-R.y-W.top,R=Ut(r),r=a.clientWidth-R.width,R=a.clientHeight-R.height,W=a.scrollLeft,a=a.scrollTop,p?(W+=pe-r/2,a+=b-R/2):(W+=Math.min(pe,Math.max(pe-r,0)),a+=Math.min(b,Math.max(b-R,0))),new tn(W,a)},Xn=function(r){const a=new tn(0,0);var p=r.x&&r.getAttribute("x");const b=r.y&&r.getAttribute("y");return p&&(a.x=parseInt(p)),b&&(a.y=parseInt(b)),(p=(p=r.getAttribute("transform"))&&p.match(wm))&&(a.x+=Number(p[1]),p[3]&&(a.y+=Number(p[3]))),(r=r.getAttribute("style"))&&-1<r.indexOf("translate")&&(r=r.match(bg))&&(a.x+=Number(r[1]),r[3]&&(a.y+=Number(r[3]))),a},q=function(r){let a=0,p=0;for(;r;){const b=Xn(r);if(a+=b.x,p+=b.y,(" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;r=r.parentNode}return new tn(a,p)},me=function(){const r=Er();return new vi(r.y,document.documentElement.clientHeight+r.y,r.x,document.documentElement.clientWidth+r.x)},Ne=function(){const r=document.documentElement,a=window;return new tn(a.pageXOffset||r.scrollLeft,a.pageYOffset||r.scrollTop)},nt=function(r,a){var p=a.x;a=a.y;const b=r.getInjectionDiv().getBoundingClientRect();return p=new tn(p-b.left,a-b.top),a=r.getOriginOffsetInPixels(),tn.difference(p,a).scale(1/r.scale)},Rt=function(r,a){var p=a.scale(r.scale);a=p.x,p=p.y;const b=r.getInjectionDiv().getBoundingClientRect();return r=r.getOriginOffsetInPixels(),new tn(a+b.left+r.x,p+b.top+r.y)},Qt=function(r){({document:xm=xm,DOMParser:Ia=Ia,XMLSerializer:Nu=Nu}=r),l0=new Ia,Tg=new Nu},t.createElement$$module$build$src$core$utils$xml=function(r){return xm.createElementNS(vp,r)},t.createTextNode$$module$build$src$core$utils$xml=function(r){return xm.createTextNode(r)},t.textToDom$$module$build$src$core$utils$xml=function(r){let a=l0.parseFromString(r,"text/xml");if(a&&a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.documentElement;if((a=l0.parseFromString(r,"text/html"))&&a.body.firstChild&&a.body.firstChild.nodeName.toLowerCase()==="xml")return a.body.firstChild;throw Error(`DOMParser was unable to parse: ${r}`)},gn=function(r){return Ie(Tg.serializeToString(r))},Ie=function(r){return r.replace(Eg,a=>`&#${a.charCodeAt(0)};`)},st=function(r){return r?((r instanceof Element||typeof r=="string")&&(r=$r(r),r=nr(r)),Tt(r),r):null},Tt=function(r){const a=r.kind;if(r=r.contents,a&&a!==l_&&a!==ah)throw Error("Invalid toolbox kind "+a+". Please supply either "+l_+" or "+ah);if(!r)throw Error("Toolbox must have a contents attribute.")},pt=function(r){return r?r.contents?r.contents:Array.isArray(r)&&0<r.length&&!r[0].nodeType?r:vr(r):[]},Bt=function(r){return Lv.hasCategoriesInternal(r)},xn=function(r){if(!r)return!1;const a=r.kind;return a?a===ah:!!r.contents.filter(function(p){return p.kind.toUpperCase()==="CATEGORY"}).length},Bn=function(r){return r&&r.contents?!!r.contents.filter(function(a){return a.kind.toUpperCase()==="CATEGORY"}).length:!1},nr=function(r){const a={contents:vr(r)};return r instanceof Node&&ei(r,a),a},vr=function(r){const a=[];let p=r.childNodes;p||(p=r);for(let b=0,R;R=p[b];b++){if(!R.tagName)continue;r={};const W=R.tagName.toUpperCase();r.kind=W,W==="BLOCK"?r.blockxml=R:R.childNodes&&0<R.childNodes.length&&(r.contents=vr(R)),ei(R,r),a.push(r)}return a},ei=function(r,a){for(let p=0;p<r.attributes.length;p++){const b=r.attributes[p];-1<b.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[b.nodeName.replace("css-","")]=b.value):a[b.nodeName]=b.value}},$r=function(r){let a=null;if(r)if(typeof r=="string"){if(a=t.textToDom$$module$build$src$core$utils$xml(r),a.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else r instanceof Element&&(a=r);return a},Ar=function(r,a,p,b,R,W){const pe=W.scrollbar&&W.scrollbar.canScrollVertically();return r.horizontal===Cm.LEFT?(p=R.absoluteMetrics.left+p,pe&&W.RTL&&(p+=Fo.scrollbarThickness)):(p=R.absoluteMetrics.left+R.viewMetrics.width-a.width-p,pe&&!W.RTL&&(p-=Fo.scrollbarThickness)),r.vertical===oc.TOP?r=R.absoluteMetrics.top+b:(r=R.absoluteMetrics.top+R.viewMetrics.height-a.height-b,W.scrollbar&&W.scrollbar.canScrollHorizontally()&&(r-=Fo.scrollbarThickness)),new vi(r,r+a.height,p,p+a.width)},Wi=function(r,a){return{horizontal:a.toolboxMetrics.position===Kn.LEFT||r.horizontalLayout&&!r.RTL?Cm.RIGHT:Cm.LEFT,vertical:a.toolboxMetrics.position===Kn.BOTTOM?oc.TOP:oc.BOTTOM}},jo=function(r,a,p,b){const R=r.left,W=r.right-r.left,pe=r.bottom-r.top;for(let Le=0;Le<b.length;Le++){const Nt=b[Le];r.intersects(Nt)&&(r=p===yp.UP?Nt.top-pe-a:Nt.bottom+a,r=new vi(r,r+pe,R,R+W),Le=-1)}return r},Ro=function(r,a){Ci(r,a)},ll=function(r){Ci=r},Yt=function(r,a){tu.confirmInternal(r,a)},hr=function(r,a){Ml(r,a)},fa=function(r){Ml=r},Xo=function(r,a,p){Ra(r,a,p)},ps=function(r){Ra=r},fs=function(r){return r.getVariableModel!==void 0},ci=function(r){return r.getProcedureDef!==void 0},dr=function(r){return r.getProcedureCall!==void 0&&r.renameProcedure!==void 0},t.allUsedVarModels$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let p=0;p<r.length;p++){const b=r[p].getVarModels();if(b)for(let R=0;R<b.length;R++){const W=b[R];W.getId()&&a.add(W)}}return Array.from(a.values())},t.allDeveloperVariables$$module$build$src$core$variables=function(r){r=r.getAllBlocks(!1);const a=new Set;for(let b=0,R;R=r[b];b++){var p=R.getDeveloperVariables;if(p){p=p();for(let W=0;W<p.length;W++)a.add(p[W])}}return Array.from(a.values())},pn=function(r){let a=[];const p=document.createElement("button");return p.setAttribute("text","%{BKY_NEW_VARIABLE}"),p.setAttribute("callbackKey","CREATE_VARIABLE"),r.registerButtonCallback("CREATE_VARIABLE",function(b){Qi(b.getTargetWorkspace())}),a.push(p),r=ar(r),a=a.concat(r)},ar=function(r){r=r.getVariablesOfType("");const a=[];if(0<r.length){var p=r[r.length-1];if(Lr.variables_set){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set"),b.setAttribute("gap",Lr.math_change?"8":"24"),b.appendChild(Rs(p)),a.push(b)}if(Lr.math_change&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","math_change"),b.setAttribute("gap",Lr.variables_get?"20":"8"),b.appendChild(Rs(p)),p=t.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),b.appendChild(p),a.push(b)),Lr.variables_get){r.sort(Zp.compareByName);for(let R=0,W;W=r[R];R++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get"),p.setAttribute("gap","8"),p.appendChild(Rs(W)),a.push(p)}}return a},wr=function(r){return Lc.generateUniqueNameInternal(r)},er=function(r){return hi(Am.charAt(0),r.getAllVariableNames())},hi=function(r,a){if(!a.length)return r;const p=Am;let b="",R=p.indexOf(r);for(;;){let W=!1;for(let pe=0;pe<a.length;pe++)if(a[pe].toLowerCase()===r){W=!0;break}if(!W)break;R++,R===p.length&&(R=0,b=`${Number(b)+1}`),r=p.charAt(R)+b}return r},Qi=function(r,a,p){function b(W){jr(t.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,W,function(pe){if(pe){var Le=Pa(pe,r);if(Le){if(Le.type===R)var Nt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",Le.name);else Nt=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Nt=Nt.replace("%1",Le.name).replace("%2",Le.type);Ro(Nt,function(){b(pe)})}else r.createVariable(pe,R),a&&a(pe)}else a&&a(null)})}const R=p||"";b("")},t.renameVariable$$module$build$src$core$variables=function(r,a,p){function b(R){const W=t.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);jr(W,R,function(pe){if(pe){var Le=Bi(pe,a.type,r),Nt=ul(a.name,pe,r);if(Le||Nt){var $n="";Le?$n=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",Le.name).replace("%2",Le.type):Nt&&($n=t.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",pe).replace("%2",Nt)),Ro($n,function(){b(pe)})}else r.renameVariableById(a.getId(),pe),p&&p(pe)}else p&&p(null)})}b("")},jr=function(r,a,p){Xo(r,a,function(b){b&&(b=b.replace(/[\s\xa0]+/g," ").trim(),b===t.Msg$$module$build$src$core$msg.RENAME_VARIABLE||b===t.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(b=null),p(b)})},Bi=function(r,a,p){p=p.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let b=0,R;R=p[b];b++)if(R.name.toLowerCase()===r&&R.type!==a)return R;return null},Pa=function(r,a){a=a.getVariableMap().getAllVariables(),r=r.toLowerCase();for(let p=0,b;b=a[p];p++)if(b.name.toLowerCase()===r)return b;return null},ul=function(r,a,p){return p.getProcedureMap().getProcedures().length?gc(r,a,p):Vu(r,a,p)},gc=function(r,a,p){r=r.toLowerCase(),a=a.toLowerCase(),p=p.getProcedureMap().getProcedures();for(const R of p){var b=R.getParameters().filter(fs).map(W=>W.getVariableModel().name);if(b&&(p=b.some(W=>W.toLowerCase()===r),b=b.some(W=>W.toLowerCase()===a),p&&b))return R.getName()}return null},Vu=function(r,a,p){r=r.toLowerCase(),a=a.toLowerCase(),p=p.getAllBlocks(!1);for(const R of p){if(!ci(R))continue;p=R.getProcedureDef();var b=p[1];const W=b.some(pe=>pe.toLowerCase()===r);if(b=b.some(pe=>pe.toLowerCase()===a),W&&b)return p[0]}return null},Rs=function(r){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name","VAR"),a.setAttribute("id",r.getId()),a.setAttribute("variabletype",r.type),r=t.createTextNode$$module$build$src$core$utils$xml(r.name),a.appendChild(r),a},t.getOrCreateVariablePackage$$module$build$src$core$variables=function(r,a,p,b){let R=t.getVariable$$module$build$src$core$variables(r,a,p,b);return R||(R=ko(r,a,p,b)),R},t.getVariable$$module$build$src$core$variables=function(r,a,p,b){const R=r.getPotentialVariableMap();let W=null;if(a&&(W=r.getVariableById(a),!W&&R&&(W=R.getVariableById(a)),W))return W;if(p){if(b===void 0)throw Error("Tried to look up a variable by name without a type");W=r.getVariable(p,b),!W&&R&&(W=R.getVariable(p,b))}return W},ko=function(r,a,p,b){const R=r.getPotentialVariableMap();return p||(p=wr(r.isFlyout?r.targetWorkspace:r)),R?R.createVariable(p,b,a):r.createVariable(p,b,a)},uu=function(r,a){r=r.getAllVariables();const p=[];if(a.length!==r.length)for(let b=0;b<r.length;b++){const R=r[b];a.indexOf(R)===-1&&p.push(R)}return p},Pl=function(r,a){i(Dt.PASTER,r,a)},mh=function(r){o(Dt.PASTER,r)},Yo=function(r){return gh(r),Gc()?(_c(),Promise.resolve()):(Ep||(Ep=new Promise(a=>{wg=a,ac=window.requestAnimationFrame(()=>{_c(),a()})})),Ep)},tr=function(){return Ep||Promise.resolve()},Pi=function(r){r||window.cancelAnimationFrame(ac),_c(r),!r&&wg&&wg()},Gc=function(){return Kt},gh=function(r){c0.add(r);const a=r.getParent();a?gh(a):Wf.add(r)},_c=function(r){const a=r?new Set([r]):new Set([...Wf].map(R=>R.workspace)),p=[...Wf].filter(cu).filter(R=>a.has(R.workspace));for(var b of p)hl(b);for(const R of a)R.resizeContents();for(const R of p)b=R.getRelativeToSurfaceXY(),R.updateComponentLocations(b);for(const R of p)cl(R);r||(Ep=null)},cl=function(r){Wf.delete(r),c0.delete(r);for(const a of r.getChildren(!1))cl(a)},cu=function(r){return!r.isDisposed()&&!r.getParent()},hl=function(r){if(c0.has(r)){for(const a of r.getChildren(!1))hl(a);r.renderEfficiently()}},dl=function(r,a){const p=t.createElement$$module$build$src$core$utils$xml("xml");var b=Jn(t.allUsedVarModels$$module$build$src$core$variables(r));b.hasChildNodes()&&p.appendChild(b),b=r.getTopComments(!0);for(let R=0;R<b.length;R++)p.appendChild(b[R].toXmlWithXY(a));for(r=r.getTopBlocks(!0),b=0;b<r.length;b++)p.appendChild(Qn(r[b],a));return p},Jn=function(r){const a=t.createElement$$module$build$src$core$utils$xml("variables");for(let p=0;p<r.length;p++){const b=r[p],R=t.createElement$$module$build$src$core$utils$xml("variable");R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b.name)),b.type&&R.setAttribute("type",b.type),R.id=b.getId(),a.appendChild(R)}return a},Qn=function(r,a){if(r.isInsertionMarker()&&(r=r.getChildren(!1)[0],!r))return new DocumentFragment;let p=0;if(r.workspace.RTL&&(p=r.workspace.getWidth()),a=ma(r,a),pu(a)){const b=r.getRelativeToSurfaceXY();a.setAttribute("x",String(Math.round(r.workspace.RTL?p-b.x:b.x))),a.setAttribute("y",String(Math.round(b.y)))}return a},pl=function(r){if(r.isSerializable()){const a=t.createElement$$module$build$src$core$utils$xml("field");return a.setAttribute("name",r.name||""),r.toXml(a)}return null},Fa=function(r,a){for(let p=0;p<r.inputList.length;p++){const b=r.inputList[p];for(let R=0;R<b.fieldRow.length;R++){const W=pl(b.fieldRow[R]);W&&a.appendChild(W)}}},ma=function(r,a){if(r.isInsertionMarker())return(a=r.getChildren(!1)[0])?ma(a):new DocumentFragment;const p=t.createElement$$module$build$src$core$utils$xml(r.isShadow()?"shadow":"block");if(p.setAttribute("type",r.type),a||(p.id=r.id),r.mutationToDom){var b=r.mutationToDom();b&&(b.hasChildNodes()||b.hasAttributes())&&p.appendChild(b)}if(Fa(r,p),b=r.getCommentText()){var R=r.getIcon(co.COMMENT),W=R.getBubbleSize();R=R.bubbleIsVisible();var pe=t.createElement$$module$build$src$core$utils$xml("comment");pe.appendChild(t.createTextNode$$module$build$src$core$utils$xml(b)),pe.setAttribute("pinned",`${R}`),pe.setAttribute("h",String(W.height)),pe.setAttribute("w",String(W.width)),p.appendChild(pe)}for(r.data&&(b=t.createElement$$module$build$src$core$utils$xml("data"),b.appendChild(t.createTextNode$$module$build$src$core$utils$xml(r.data)),p.appendChild(b)),b=0;b<r.inputList.length;b++){W=r.inputList[b];var Le=void 0;if(R=!0,W.type!==t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&W.type!==t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){pe=W.connection.targetBlock(),W.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Le=t.createElement$$module$build$src$core$utils$xml("value"):W.type===t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Le=t.createElement$$module$build$src$core$utils$xml("statement"));const $n=W.connection.getShadowDom();!$n||pe&&pe.isShadow()||Le.appendChild(Fl($n,a)),pe&&(pe=ma(pe,a),pe.nodeType===Qp.ELEMENT_NODE&&(Le.appendChild(pe),R=!1)),Le.setAttribute("name",W.name),R||p.appendChild(Le)}}r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&p.setAttribute("inline",String(r.inputsInline)),r.isCollapsed()&&p.setAttribute("collapsed","true"),r.isEnabled()||p.setAttribute("disabled","true"),r.isDeletable()||r.isShadow()||p.setAttribute("deletable","false"),r.isMovable()||r.isShadow()||p.setAttribute("movable","false"),r.isEditable()||p.setAttribute("editable","false"),Le=r.getNextBlock();let Nt;return Le&&(b=ma(Le,a),b.nodeType===Qp.ELEMENT_NODE&&(Nt=t.createElement$$module$build$src$core$utils$xml("next"),Nt.appendChild(b),p.appendChild(Nt))),r=r.nextConnection&&r.nextConnection.getShadowDom(),!r||Le&&Le.isShadow()||Nt.appendChild(Fl(r,a)),p},Fl=function(r,a){let p=r=r.cloneNode(!0),b;for(;p;)if(a&&p.nodeName==="shadow"&&p.removeAttribute("id"),p.firstChild)p=p.firstChild;else{for(;p&&!p.nextSibling;){b=p,p=p.parentNode;let R;b.nodeType===Qp.TEXT_NODE&&b.data.trim()===""&&((R=p)==null?void 0:R.firstChild)!==b&&ct(b)}p&&(b=p,p=p.nextSibling,b.nodeType===Qp.TEXT_NODE&&b.data.trim()===""&&ct(b))}return r},Ei=function(r){return gn(r).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Fi=function(r){r=Ei(r).split("<");let a="";for(let p=1;p<r.length;p++){const b=r[p];b[0]==="/"&&(a=a.substring(2)),r[p]=a+"<"+b,b[0]!=="/"&&b.slice(-2)!=="/>"&&(a+="  ")}return r=r.join(`
`),r=r.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),r.replace(/^\n/,"")},fl=function(r,a){return a.setResizesEnabled(!1),a.clear(),r=t.domToWorkspace$$module$build$src$core$xml(r,a),a.setResizesEnabled(!0),r},t.domToWorkspace$$module$build$src$core$xml=function(r,a){let p=0;a.RTL&&(p=a.getWidth());const b=[];Q();const R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);let W=!0;try{for(let pe=0,Le;Le=r.childNodes[pe];pe++){const Nt=Le.nodeName.toLowerCase(),$n=Le;if(Nt==="block"||Nt==="shadow"&&!oe()){const zo=ks($n,a);b.push(zo.id);let Mo;const Ip=parseInt((Mo=$n.getAttribute("x"))!=null?Mo:"10",10);let Jb;const Qb=parseInt((Jb=$n.getAttribute("y"))!=null?Jb:"10",10);isNaN(Ip)||isNaN(Qb)||zo.moveBy(a.RTL?p-Ip:Ip,Qb,["create"]),W=!1}else{if(Nt==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Nt==="comment")a.rendered?el.fromXmlRendered($n,a,p):Dc.fromXml($n,a);else if(Nt==="variables"){if(W)hu($n,a);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");W=!1}}}}finally{t.setGroup$$module$build$src$core$events$utils(R),a.setResizesEnabled&&a.setResizesEnabled(!0),a.rendered&&Pi(),ae()}return ue(new(xe(Jl))(a)),b},Rd=function(r,a){if(!a.getBlocksBoundingBox)return t.domToWorkspace$$module$build$src$core$xml(r,a);var p=a.getBlocksBoundingBox();if(r=t.domToWorkspace$$module$build$src$core$xml(r,a),p&&p.top!==p.bottom){var b=p.bottom;p=a.RTL?p.right:p.left;var R=1/0;let W=-1/0,pe=1/0;for(let Le=0;Le<r.length;Le++){const Nt=a.getBlockById(r[Le]).getRelativeToSurfaceXY();Nt.y<pe&&(pe=Nt.y),Nt.x<R&&(R=Nt.x),Nt.x>W&&(W=Nt.x)}for(b=b-pe+10,p=a.RTL?p-W:p-R,R=0;R<r.length;R++)a.getBlockById(r[R]).moveBy(p,b,["create"])}return r},t.domToBlock$$module$build$src$core$xml=function(r,a){return r=ks(r,a),a.rendered&&Pi(),r},ks=function(r,a){t.disable$$module$build$src$core$events$utils();var p=a.getAllVariables();let b;try{if(b=Wc(r,a),a.rendered){const R=b,W=b.getDescendants(!1);R.setConnectionTracking(!1);for(let pe=W.length-1;0<=pe;pe--)W[pe].initSvg();for(let pe=W.length-1;0<=pe;pe--)W[pe].queueRender();setTimeout(function(){R.disposed||R.setConnectionTracking(!0)},1),a.resizeContents()}else{const R=b.getDescendants(!1);for(let W=R.length-1;0<=W;W--)R[W].initModel()}}finally{t.enable$$module$build$src$core$events$utils()}if(ne()){for(r=uu(a,p),a=0;a<r.length;a++)p=r[a],ue(new(xe(Ka))(p));ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(b))}return b},hu=function(r,a){for(let b=0;b<r.children.length;b++){var p=r.children[b];const R=p.getAttribute("type"),W=p.getAttribute("id");if(p=p.textContent,!p)break;a.createVariable(p,R,W)}},Oo=function(r){const a={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let p=0;p<r.children.length;p++){const b=r.children[p];if(b.nodeType!==Qp.TEXT_NODE)switch(b.nodeName.toLowerCase()){case"mutation":a.mutation.push(b);break;case"comment":a.comment.push(b);break;case"data":a.data.push(b);break;case"title":case"field":a.field.push(b);break;case"value":case"statement":a.input.push(b);break;case"next":a.next.push(b);break;default:console.warn("Ignoring unknown tag: "+b.nodeName)}}return a},Ul=function(r,a){let p=!1;for(let b=0;b<r.length;b++){const R=r[b];a.domToMutation&&(a.domToMutation(R),a.initSvg&&(p=!0))}return p},Xr=function(r,a){for(let b=0;b<r.length;b++){var p=r[b];const R=p.textContent,W=p.getAttribute("pinned")==="true";let pe;const Le=parseInt((pe=p.getAttribute("w"))!=null?pe:"50",10);let Nt;p=parseInt((Nt=p.getAttribute("h"))!=null?Nt:"50",10),a.setCommentText(R);const $n=a.getIcon(co.COMMENT);isNaN(Le)||isNaN(p)||$n.setBubbleSize(new Ss(Le,p)),$n.setBubbleVisible(W),setTimeout(()=>$n.setBubbleVisible(W),1)}},pr=function(r,a){for(let p=0;p<r.length;p++)a.data=r[p].textContent},Vi=function(r,a){for(let p=0;p<r.length;p++){const b=r[p],R=b.getAttribute("name");R?Ko(a,R,b):console.warn(`Ignoring unnamed field in block ${a.type}`)}},Os=function(r){let a=null,p=null;for(let b=0;b<r.childNodes.length;b++){const R=r.childNodes[b];pu(R)&&(R.nodeName.toLowerCase()==="block"?a=R:R.nodeName.toLowerCase()==="shadow"&&(p=R))}return{childBlockElement:a,childShadowElement:p}},du=function(r,a,p,b){for(let W=0;W<r.length;W++){var R=r[W];const pe=R.getAttribute("name"),Le=pe?p.getInput(pe):null;if(!Le){console.warn("Ignoring non-existent input "+pe+" in block "+b);break}if(R=Os(R),R.childBlockElement){if(!Le.connection)throw TypeError("Input connection does not exist.");Wc(R.childBlockElement,a,Le.connection,!1)}if(R.childShadowElement){let Nt;(Nt=Le.connection)==null||Nt.setShadowDom(R.childShadowElement)}}},zl=function(r,a,p){for(let b=0;b<r.length;b++){const R=Os(r[b]);if(R.childBlockElement){if(!p.nextConnection)throw TypeError("Next statement does not exist.");if(p.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Wc(R.childBlockElement,a,p.nextConnection,!0)}R.childShadowElement&&p.nextConnection&&p.nextConnection.setShadowDom(R.childShadowElement)}},Wc=function(r,a,p,b){var R;const W=r.getAttribute("type");if(!W)throw TypeError("Block type unspecified: "+r.outerHTML);var pe=(R=r.getAttribute("id"))!=null?R:void 0;R=a.newBlock(W,pe),pe=Oo(r);const Le=Ul(pe.mutation,R);if(Xr(pe.comment,R),pr(pe.data,R),p)if(b)if(R.previousConnection)p.connect(R.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(R.outputConnection)p.connect(R.outputConnection);else if(R.previousConnection)p.connect(R.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Vi(pe.field,R),du(pe.input,a,R,W),zl(pe.next,a,R),Le&&R.initSvg(),(a=r.getAttribute("inline"))&&R.setInputsInline(a==="true"),(a=r.getAttribute("disabled"))&&R.setEnabled(a!=="true"&&a!=="disabled"),(a=r.getAttribute("deletable"))&&R.setDeletable(a==="true"),(a=r.getAttribute("movable"))&&R.setMovable(a==="true"),(a=r.getAttribute("editable"))&&R.setEditable(a==="true"),(a=r.getAttribute("collapsed"))&&R.setCollapsed(a==="true"),r.nodeName.toLowerCase()==="shadow"){for(r=R.getChildren(!1),a=0;a<r.length;a++)if(!r[a].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");R.setShadow(!0)}return R},Ko=function(r,a,p){const b=r.getField(a);b?b.fromXml(p):console.warn("Ignoring non-existent field "+a+" in block "+r.type)},Jo=function(r){for(let a=0;a<r.childNodes.length;a++){const p=r.childNodes[a];if(p.nodeName.toLowerCase()==="next"){r.removeChild(p);break}}},pu=function(r){return r.nodeType===Qp.ELEMENT_NODE},Yr=function(r){return r.saveState!==void 0&&r.loadState!==void 0},ms=function(r,a){i(Dt.SERIALIZER,r,a)},Ai=function(r){o(Dt.SERIALIZER,r)},ti=function(r,{addCoordinates:a=!1,addInputBlocks:p=!0,addNextBlocks:b=!0,doFullSerialization:R=!0,saveIds:W=!0}={}){if(r.isInsertionMarker())return null;const pe={type:r.type,id:W?r.id:void 0};return a&&Ui(r,pe),ga(r,pe),fu(r,pe,R),ro(r,pe,R),mu(r,pe,R),p&&Ua(r,pe,R,W),b&&di(r,pe,R,W),pe},ga=function(r,a){r.isCollapsed()&&(a.collapsed=!0),r.isEnabled()||(a.enabled=!1),r.isOwnDeletable()||(a.deletable=!1),r.isOwnMovable()||(a.movable=!1),r.isOwnEditable()||(a.editable=!1),r.inputsInline!==void 0&&r.inputsInline!==r.inputsInlineDefault&&(a.inline=r.inputsInline),r.data&&(a.data=r.data)},Ui=function(r,a){const p=r.workspace;r=r.getRelativeToSurfaceXY(),a.x=Math.round(p.RTL?p.getWidth()-r.x:r.x),a.y=Math.round(r.y)},fu=function(r,a,p){r.saveExtraState?(r=r.saveExtraState(p),r!==null&&(a.extraState=r)):r.mutationToDom&&(r=r.mutationToDom(),r!==null&&(a.extraState=Ei(r).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},ro=function(r,a,p){const b=Object.create(null);for(const R of r.getIcons())Yr(R)&&(r=R.saveState(p))&&(b[R.getType().toString()]=r);Object.keys(b).length&&(a.icons=b)},mu=function(r,a,p){const b=Object.create(null);for(let R=0;R<r.inputList.length;R++){const W=r.inputList[R];for(let pe=0;pe<W.fieldRow.length;pe++){const Le=W.fieldRow[pe];Le.isSerializable()&&(b[Le.name]=Le.saveState(p))}}Object.keys(b).length&&(a.fields=b)},Ua=function(r,a,p,b){const R=Object.create(null);for(let W=0;W<r.inputList.length;W++){const pe=r.inputList[W];if(!pe.connection)continue;const Le=ni(pe.connection,p,b);Le&&(R[pe.name]=Le)}Object.keys(R).length&&(a.inputs=R)},di=function(r,a,p,b){r.nextConnection&&(r=ni(r.nextConnection,p,b))&&(a.next=r)},ni=function(r,a,p){const b=r.getShadowState(!0);if(r=r.targetBlock(),!b&&!r)return null;const R=Object.create(null);return b&&(R.shadow=b),r&&!r.isShadow()&&(R.block=ti(r,{doFullSerialization:a,saveIds:p})),R},Un=function(r,a,{recordUndo:p=!1}={}){return r=Kr(r,a,{recordUndo:p}),a.rendered&&Pi(),r},Kr=function(r,a,{parentConnection:p,isShadow:b=!1,recordUndo:R=!1}={}){const W=oe();de(R),(R=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),t.disable$$module$build$src$core$events$utils();let pe;try{pe=$i(r,a,{parentConnection:p,isShadow:b})}finally{t.enable$$module$build$src$core$events$utils()}if(ne()&&ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(pe)),t.setGroup$$module$build$src$core$events$utils(R),de(W),a.rendered){const Le=pe;setTimeout(()=>{Le.disposed||Le.setConnectionTracking(!0)},1)}return pe},$i=function(r,a,{parentConnection:p,isShadow:b=!1}={}){if(!r.type)throw new Dv(r);const R=a.newBlock(r.type,r.id);return R.setShadow(b),Xh(R,r),gu(R,r),gs(R,r),ml(p,R,r),Yh(R,r),pi(R,r),_u(R,r),hp(R,r),_h(R,a.rendered),R},Xh=function(r,a){let p=a.x===void 0?0:a.x;a=a.y===void 0?0:a.y;const b=r.workspace;p=b.RTL?b.getWidth()-p:p,r.moveBy(p,a)},gu=function(r,a){a.collapsed&&r.setCollapsed(!0),a.deletable===!1&&r.setDeletable(!1),a.movable===!1&&r.setMovable(!1),a.editable===!1&&r.setEditable(!1),a.enabled===!1&&r.setEnabled(!1),a.inline!==void 0&&r.setInputsInline(a.inline),a.data!==void 0&&(r.data=a.data)},gs=function(r,a){a.extraState&&(r.loadExtraState?r.loadExtraState(a.extraState):r.domToMutation&&r.domToMutation(t.textToDom$$module$build$src$core$utils$xml(a.extraState)))},ml=function(r,a,p){if(r){if(r.getSourceBlock().isShadow()&&!a.isShadow())throw new wb(p);if(r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var b=a.outputConnection;if(!b)throw new Rm("output",a,p)}else if(b=a.previousConnection,!b)throw new Rm("previous",a,p);if(!r.connect(b)){const R=a.workspace.connectionChecker;throw new c_(R.getErrorMessage(R.canConnectWithReason(b,r,!1),b,r),r.type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",a,p)}}},Yh=function(r,a){if(a.icons){var p=Object.keys(a.icons);for(const R of p){p=a.icons[R];var b=r.getIcon(R);if(!b){if(b=h(Dt.ICON,R,!1),!b)throw new ef(R,r,a);b=new b(r),r.addIcon(b)}Yr(b)&&b.loadState(p)}}},pi=function(r,a){if(a.fields){var p=Object.keys(a.fields);for(let b=0;b<p.length;b++){const R=p[b],W=a.fields[R],pe=r.getField(R);pe?pe.loadState(W):console.warn(`Ignoring non-existant field ${R} in block ${r.type}`)}}},_u=function(r,a){if(a.inputs){var p=Object.keys(a.inputs);for(let b=0;b<p.length;b++){const R=p[b],W=r.getInput(R);if(!W||!W.connection)throw new Rm(R,r,a);dp(W.connection,a.inputs[R])}}},hp=function(r,a){if(a.next){if(!r.nextConnection)throw new Rm("next",r,a);dp(r.nextConnection,a.next)}},dp=function(r,a){a.shadow&&r.setShadowState(a.shadow),a.block&&$i(a.block,r.getSourceBlock().workspace,{parentConnection:r})},_h=function(r,a){if(a){r.setConnectionTracking(!1),r.initSvg(),r.queueRender();for(const p of r.getIcons())p.onLocationChange(r.getRelativeToSurfaceXY())}else r.initModel()},pp=function(r){const a=r.workspace,p=t.config$$module$build$src$core$config.snapRadius,b=r.getRelativeToSurfaceXY(),R=new tn(0,0),W=a.getAllBlocks(!1).filter(pe=>pe.id!=r.id).map(pe=>pe.getRelativeToSurfaceXY());for(;Wp(tn.sum(b,R),W)||Pf(r,R,p);)a.RTL?R.translate(-p,2*p):R.translate(p,2*p);r.moveTo(tn.sum(b,R))},Wp=function(r,a){return a.some(p=>1>=Math.abs(p.x-r.x)&&1>=Math.abs(p.y-r.y))},Pf=function(r,a,p){return r.getConnections_(!1).some(b=>!!b.closest(p,a).connection)},fp=function(r){return ve("Blockly.clipboard.copy","v11","v12","myCopyable.toCopyData()"),g_.copyInternal(r)},ju=function(r){const a=r.toCopyData();xo=a;let p;return Pv=(p=r.workspace)!=null?p:null,a},io=function(r,a,p){return r&&a?vu(r,a,p):xo&&Pv?vu(xo,Pv):null},vu=function(r,a,p){let b;a=(b=a.getRootWorkspace())!=null?b:a;let R,W;return(W=(R=d(Dt.PASTER,r.paster,!1))==null?void 0:R.paste(r,a,p))!=null?W:null},vh=function(r){return ve("Blockly.clipboard.duplicate","v11","v12","Blockly.clipboard.paste(myCopyable.toCopyData(), myWorkspace)"),g_.duplicateInternal(r)},_a=function(r){const a=r.toCopyData();return a?io(a,r.workspace):null},Wr=function(r,a){r.setAttribute(xb,a)},lr=function(r,a,p){Array.isArray(p)&&(p=p.join(" ")),r.setAttribute(mE+a,`${p}`)},Vs=function(){return dd},Qo=function(r){if(dd=r,r===null){let a;(a=document.querySelector("."+nf))==null||a.remove()}},Lo=function(){document.querySelector("."+nf)||(dd=document.createElement("div"),dd.className=nf,(D()||document.body).appendChild(dd))},yu=function(r,a,p){gl(),kh=r,Nm=p,(r=dd)&&(r.style.direction=a?"rtl":"ltr",r.style.display="block",a=A(),rf=a.getRenderer().getClassName(),Xf=a.getTheme().getClassName(),rf&&ke(r,rf),Xf&&ke(r,Xf))},gl=function(){if(Kh()){kh=null;var r=dd;r&&(r.style.display="none",r.style.left="",r.style.top="",Nm&&Nm(),Nm=null,r.textContent="",rf&&(dt(r,rf),rf=""),Xf&&(dt(r,Xf),Xf=""),A().markFocused())}},Kh=function(){return!!kh},Si=function(r){kh===r&&gl()},fi=function(r,a,p){dd.style.left=r+"px",dd.style.top=a+"px",dd.style.height=p+"px"},ur=function(r,a,p,b){const R=qo(r,a,p);r=wi(r,a,p,b),0>R?fi(r,0,p.height+R):fi(r,R,p.height)},wi=function(r,a,p,b){return b?Math.min(Math.max(a.right-p.width,r.left),r.right-p.width):Math.max(Math.min(a.left,r.right-p.width),r.left)},qo=function(r,a,p){return a.bottom+p.height>=r.bottom?a.top-p.height:a.bottom},Hl=function(r){return!(r==null||!r.repositionForWindowResize)},mp=function(){Hl(kh)&&kh.repositionForWindowResize()||gl()},gp=function(){return Cg},Jh=function(r){Cg=r},bu=function(r,a,p){if(yu(Cb,p,Zo),a.length){var b=Xu(a,p);d0=b,vc(b,r,p),setTimeout(function(){b.focus()},1),Cg=null}else Gl()},Xu=function(r,a){const p=new h0;p.setRole(Nc.MENU);for(let b=0;b<r.length;b++){const R=r[b],W=new xg(R.text);W.setRightToLeft(a),W.setRole(Nc.MENUITEM),p.addChild(W),W.setEnabled(R.enabled),R.enabled&&W.onAction(function(){Gl(),requestAnimationFrame(()=>{setTimeout(()=>{R.callback(R.scope)},0)})},{})}return p},vc=function(r,a,p){const b=me();a=new vi(a.clientY+b.top,a.clientY+b.top,a.clientX+b.left,a.clientX+b.left),yh(r);const R=r.getSize();p&&(a.left+=R.width,a.right+=R.width,b.left+=R.width,b.right+=R.width),ur(b,a,R,p),r.focus()},yh=function(r){var a=Vs();if(!a)throw Error("Attempting to create a context menu when widget div is null");a=r.render(a),ke(a,"blocklyContextMenu"),Se(a,"contextmenu",null,yc),r.focus()},yc=function(r){r.preventDefault(),r.stopPropagation()},Gl=function(){Si(Cb),Cg=null},Zo=function(){d0&&(d0.dispose(),d0=null)},t.callbackFactory$$module$build$src$core$contextmenu=function(r,a){return()=>{t.disable$$module$build$src$core$events$utils();let p;try{p=a instanceof Element?ks(a,r.workspace):Kr(a,r.workspace);const b=r.getRelativeToSurfaceXY();b.x=r.RTL?b.x-t.config$$module$build$src$core$config.snapRadius:b.x+t.config$$module$build$src$core$config.snapRadius,b.y+=2*t.config$$module$build$src$core$config.snapRadius,p.moveBy(b.x,b.y)}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&!p.isShadow()&&ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}},Yu=function(r){return{text:t.Msg$$module$build$src$core$msg.REMOVE_COMMENT,enabled:!0,callback:function(){t.setGroup$$module$build$src$core$events$utils(!0),r.dispose(),t.setGroup$$module$build$src$core$events$utils(!1)}}},bh=function(r){return{text:t.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){const a=r.toCopyData();a&&io(a,r.workspace)}}},bc=function(r,a){const p={enabled:!0};return p.text=t.Msg$$module$build$src$core$msg.ADD_COMMENT,p.callback=function(){const b=new el(r,t.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT,el.DEFAULT_SIZE,el.DEFAULT_SIZE);var R=r.getInjectionDiv().getBoundingClientRect();R=new tn(a.clientX-R.left,a.clientY-R.top);const W=r.getOriginOffsetInPixels();R=tn.difference(R,W),R.scale(1/r.scale),b.moveBy(R.x,R.y),r.rendered&&(b.initSvg(),b.render(),b.select())},p},Tc=function(r){return r*Math.PI/180},_s=function(r){return 180*r/Math.PI},Jr=function(r,a,p){if(p<r){const b=p;p=r,r=b}return Math.max(r,Math.min(a,p))},_l=function(){document.querySelector(".blocklyDropDownDiv")||(oi=document.createElement("div"),oi.className="blocklyDropDownDiv",(D()||document.body).appendChild(oi),af=document.createElement("div"),af.className="blocklyDropDownContent",oi.appendChild(af),Um=document.createElement("div"),Um.className="blocklyDropDownArrow",oi.appendChild(Um),oi.style.opacity="0",oi.style.transition="transform "+Pm+"s, opacity "+Pm+"s",oi.addEventListener("focusin",function(){ke(oi,"blocklyFocused")}),oi.addEventListener("focusout",function(){dt(oi,"blocklyFocused")}))},ea=function(r){zm=r},vl=function(){return Yf},Wl=function(){return af},Vc=function(){af.textContent="",af.style.width=""},kd=function(r,a){oi.style.backgroundColor=r,oi.style.borderColor=a},mi=function(r,a,p,b){return mn(kt(a),r,p,b)},Ye=function(r,a,p){return m0=!0,mn(bt(r),r,a,p)},kt=function(r){var a=r.getSvgRoot();const p=r.workspace.scale,b=r.height*p;return r=r.width*p,a=Tn(a),new vi(a.y,a.y+b,a.x,a.x+r)},bt=function(r){return r=r.getScaledBBox(),new vi(r.top,r.bottom,r.left,r.right)},mn=function(r,a,p,b){const R=r.left+(r.right-r.left)/2,W=r.bottom;r=r.top,b&&(r+=b),b=a.getSourceBlock();let pe=b.workspace;for(;pe.options.parentWorkspace;)pe=pe.options.parentWorkspace;return ea(pe.getParentSvg().parentNode),Dn(a,b.RTL,R,W,R,r,p)},Dn=function(r,a,p,b,R,W,pe){return Yf=r,sf=pe||null,oi.style.direction=a?"rtl":"ltr",r=A(),of=r.getRenderer().getClassName(),Fm=r.getTheme().getClassName(),of&&ke(oi,of),Fm&&ke(oi,Fm),ji(p,b,R,W)},qn=function(r,a,p,b){return r=Ir(r,p.left,p.right,b.width),{initialX:r.divX,initialY:a,finalX:r.divX,finalY:a+f0,arrowX:r.arrowX,arrowY:-(Mg/2+p0),arrowAtTop:!0,arrowVisible:!0}},rr=function(r,a,p,b){return r=Ir(r,p.left,p.right,b.width),{initialX:r.divX,initialY:a-b.height,finalX:r.divX,finalY:a-b.height-f0,arrowX:r.arrowX,arrowY:b.height-2*p0-Mg/2,arrowAtTop:!1,arrowVisible:!0}},An=function(r,a,p){return r=Ir(r,a.left,a.right,p.width),{initialX:r.divX,initialY:0,finalX:r.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Ir=function(r,a,p,b){return a=Jr(a,r-b/2,p-b),r=r-Mg/2-a,p=Mb,r=Jr(p,r,b-p-Mg),{arrowX:r,divX:a}},Ls=function(){return!!Yf},vs=function(r,a){return Yf===r?(a?va():vo(),!0):!1},vo=function(){oi.style.transform="translate(0, 0)",oi.style.opacity="0",Ag=setTimeout(function(){va()},1e3*Pm),sf&&(sf(),sf=null)},va=function(){Ls()&&(Ag&&clearTimeout(Ag),oi.style.transform="",oi.style.left="",oi.style.top="",oi.style.opacity="0",oi.style.display="none",oi.style.backgroundColor="",oi.style.borderColor="",sf&&(sf(),sf=null),Vc(),Yf=null,of&&(dt(oi,of),of=""),Fm&&(dt(oi,Fm),Fm=""),A().markFocused())},ji=function(r,a,p,b){r=g.getPositionMetrics(r,a,p,b),r.arrowVisible?(Um.style.display="",Um.style.transform="translate("+r.arrowX+"px,"+r.arrowY+"px) rotate(45deg)",Um.setAttribute("class",r.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Um.style.display="none",a=Math.floor(r.initialX),p=Math.floor(r.initialY),b=Math.floor(r.finalX);const R=Math.floor(r.finalY);return oi.style.left=a+"px",oi.style.top=p+"px",oi.style.display="block",oi.style.opacity="1",oi.style.transform="translate("+(b-a)+"px,"+(R-p)+"px)",!!r.arrowAtTop},os=function(){if(Yf){var r=Yf.getSourceBlock();r=m0?bt(Yf):kt(r);const a=r.left+(r.right-r.left)/2;ji(a,r.bottom,a,r.top)}else vo()},Ec=function(r){if(!(100<r.getDescendants(!1).length)){var a=r.workspace,p=r.getSvgRoot();a.getAudioManager().play("delete");var b=a.getSvgXY(p);p=p.cloneNode(!0),p.setAttribute("transform","translate("+b.x+","+b.y+")"),a.getParentSvg().appendChild(p),Br(p,{x:b.x,y:b.y,width:r.width,height:r.height},a.RTL,new Date,a.scale)}},Br=function(r,a,p,b,R){const W=(new Date().getTime()-b.getTime())/150;1<W?ct(r):(r.setAttribute("transform","translate("+(a.x+(p?-1:1)*a.width*R/2*W)+","+(a.y+a.height*R*W)+") scale("+(1-W)*R+")"),setTimeout(Br,10,r,a,p,b,R))},Do=function(r){var a=r.workspace;const p=a.scale;if(a.getAudioManager().play("click"),!(1>p)){var b=a.getSvgXY(r.getSvgRoot());r.outputConnection?(b.x+=(r.RTL?3:-3)*p,b.y+=13*p):r.previousConnection&&(b.x+=(r.RTL?-23:23)*p,b.y+=3*p);var R=ee(Be.CIRCLE,{cx:b.x,cy:b.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg());r=ee(Be.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*p},R),a=ee(Be.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},R),r.beginElement(),a.beginElement(),setTimeout(()=>void ct(R),150)}},Ds=function(r){if(ta(),r.workspace.getAudioManager().play("disconnect"),!(1>r.workspace.scale)){var a=r.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,r.RTL||(a*=-1),B=r,js(r,a,new Date)}},js=function(r,a,p){const b=(new Date().getTime()-p.getTime())/200;let R="";1>=b&&(R=`skewX(${Math.round(Math.sin(b*Math.PI*3)*(1-b)*a)})`,I=setTimeout(js,10,r,a,p)),r.getSvgRoot().setAttribute("transform",`${r.getTranslation()} ${R}`)},ta=function(){B&&(I&&(clearTimeout(I),I=null),B.getSvgRoot().setAttribute("transform",B.getTranslation()),B=null)},Th=function(r,a){return ve("Blockly.utils.string.startsWith()","April 2022","April 2023","Use built-in string.startsWith"),r.startsWith(a)},jc=function(r){return r.length?r.reduce(function(a,p){return a.length<p.length?a:p}).length:0},Eh=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let p=0;a=a||jc(r);let b;for(b=0;b<a;b++){for(var R=r[0][b],W=1;W<r.length;W++)if(R!==r[W][b])return p;R===" "&&(p=b+1)}for(R=1;R<r.length;R++)if((W=r[R][b])&&W!==" ")return p;return a},Tu=function(r,a){if(!r.length)return 0;if(r.length===1)return r[0].length;let p=0;a=a||jc(r);let b;for(b=0;b<a;b++){for(var R=r[0].substr(-b-1,1),W=1;W<r.length;W++)if(R!==r[W].substr(-b-1,1))return p;R===" "&&(p=b+1)}for(R=1;R<r.length;R++)if((W=r[R].charAt(r[R].length-b-1))&&W!==" ")return p;return a},t.wrap$$module$build$src$core$utils$string=function(r,a){r=r.split(`
`);for(let p=0;p<r.length;p++)r[p]=Qh(r[p],a);return r.join(`
`)},Qh=function(r,a){if(r.length<=a)return r;const p=r.trim().split(/\s+/);for(var b=0;b<p.length;b++)p[b].length>a&&(a=p[b].length);var R=-1/0;let W,pe=1;do{b=R,W=r,r=[],R=p.length/pe;let Le=1;for(let Nt=0;Nt<p.length-1;Nt++)Le<(Nt+1.5)/R?(Le++,r[Nt]=!0):r[Nt]=!1;r=yl(p,r,a),R=qh(p,r,a),r=Zh(p,r),pe++}while(R>b);return W},qh=function(r,a,p){const b=[0],R=[];for(var W=0;W<r.length;W++)b[b.length-1]+=r[W].length,a[W]===!0?(b.push(0),R.push(r[W].charAt(r[W].length-1))):a[W]===!1&&b[b.length-1]++;for(r=Math.max(...b),a=0,W=0;W<b.length;W++)a-=2*Math.pow(Math.abs(p-b[W]),1.5),a-=Math.pow(r-b[W],1.5),".?!".indexOf(R[W])!==-1?a+=p/3:",;)]}".indexOf(R[W])!==-1&&(a+=p/4);return 1<b.length&&b[b.length-1]<=b[b.length-2]&&(a+=.5),a},yl=function(r,a,p){let b=qh(r,a,p),R;for(let W=0;W<a.length-1;W++){if(a[W]===a[W+1])continue;const pe=[].concat(a);pe[W]=!pe[W],pe[W+1]=!pe[W+1];const Le=qh(r,pe,p);Le>b&&(b=Le,R=pe)}return R?yl(r,R,p):a},Zh=function(r,a){const p=[];for(let b=0;b<r.length;b++)p.push(r[b]),a[b]!==void 0&&p.push(a[b]?`
`:" ");return p.join("")},t.isNumber$$module$build$src$core$utils$string=function(r){return/^\s*-?\d+(\.\d+)?\s*$/.test(r)},$c=function(r){In=r},Xc=function(){return In},Od=function(){return Ln},za=function(){return nu},ya=function(r){if(r=Eu(r)){for(r=r.tooltip;typeof r=="function";)r=r();if(typeof r!="string")throw Error("Tooltip function must return a string.");return r}return""},Eu=function(r){for(;r&&r.tooltip;){if(typeof r.tooltip=="string"||typeof r.tooltip=="function")return r;r=r.tooltip}return null},$h=function(){document.querySelector(".blocklyTooltipDiv")||(nu=document.createElement("div"),nu.className="blocklyTooltipDiv",(D()||document.body).appendChild(nu))},ri=function(r){r.mouseOverWrapper_=Pe(r,"pointerover",null,Yc),r.mouseOutWrapper_=Pe(r,"pointerout",null,Ku),r.addEventListener("pointermove",Sh,!1)},ed=function(r){r&&(rt(r.mouseOverWrapper_),rt(r.mouseOutWrapper_),r.removeEventListener("pointermove",Sh))},Yc=function(r){to||(r=Eu(r.currentTarget),Nn!==r&&(bl(),Vn=null,Nn=r),clearTimeout(it))},Ku=function(r){to||(it=setTimeout(function(){Vn=Nn=null,bl()},1),clearTimeout(yt),yt=0)},Sh=function(r){if(Nn&&Nn.tooltip&&!to)if(Ln){const a=sn-r.pageX;r=Hn-r.pageY,Math.sqrt(a*a+r*r)>Oi&&bl()}else Vn!==Nn&&(clearTimeout(yt),sn=r.pageX,Hn=r.pageY,yt=setTimeout(Vp,lf))},Ld=function(){Vn=Nn=null,bl()},bl=function(){Ln&&(Ln=!1,nu&&(nu.style.display="none")),yt&&(clearTimeout(yt),yt=0)},Dd=function(){bl(),to=!0},wh=function(){to=!1},so=function(){nu&&Nn&&(typeof In=="function"?In(nu,Nn):na())},na=function(){var r=ya(Nn);r=t.wrap$$module$build$src$core$utils$string(r,vt),r=r.split(`
`);for(let a=0;a<r.length;a++){const p=document.createElement("div");p.appendChild(document.createTextNode(r[a])),nu.appendChild(p)}},Ff=function(r){const a=document.documentElement.clientWidth,p=document.documentElement.clientHeight;let b=sn;b=r?b-(mr+nu.offsetWidth):b+mr;let R=Hn+tl;return R+nu.offsetHeight>p+window.scrollY&&(R-=nu.offsetHeight+2*tl),r?b=Math.max(__-window.scrollX,b):b+nu.offsetWidth>a+window.scrollX-2*__&&(b=a-nu.offsetWidth-2*__),{x:b,y:R}},Vp=function(){if(!to&&(Vn=Nn,nu)){nu.textContent="",so();var r=Nn.RTL;nu.style.direction=r?"rtl":"ltr",nu.style.display="block",Ln=!0;var{x:a,y:p}=Ff(r);nu.style.left=a+"px",nu.style.top=p+"px"}},Tl=function(r,a){for(const p in a)r[p]=a[p]!==null&&typeof a[p]=="object"?Tl(r[p]||Object.create(null),a[p]):a[p];return r},El=function(r){return r.bubbleIsVisible!==void 0&&r.setBubbleVisible!==void 0},Sc=function(){return _E},xh=function(r){_E=r},td=function(){return Kf},Ju=function(r){Kf=r},Ha=function(r){r=`${r}`.toLowerCase().trim();var a=Vw[r];if(a||(a=r.substring(0,2)==="0x"?"#"+r.substring(2):r,a=a[0]==="#"?a:"#"+a,/^#[0-9a-f]{6}$/.test(a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var p=r.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return p&&(r=Number(p[1]),a=Number(p[2]),p=Number(p[3]),0<=r&&256>r&&0<=a&&256>a&&0<=p&&256>p)?Qu(r,a,p):null},Qu=function(r,a,p){return a=r<<16|a<<8|p,16>r?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},nd=function(r){return r=Ha(r),r?(r=parseInt(r.substr(1),16),[r>>16,r>>8&255,r&255]):[0,0,0]},wc=function(r,a,p){let b=0,R=0,W=0;if(a===0)W=R=b=p;else{const pe=Math.floor(r/60),Le=r/60-pe;r=p*(1-a);const Nt=p*(1-a*Le);switch(a=p*(1-a*(1-Le)),pe){case 1:b=Nt,R=p,W=r;break;case 2:b=r,R=p,W=a;break;case 3:b=r,R=Nt,W=p;break;case 4:b=a,R=r,W=p;break;case 5:b=p,R=r,W=Nt;break;case 6:case 0:b=p,R=a,W=r}}return Qu(Math.floor(b),Math.floor(R),Math.floor(W))},xc=function(r,a,p){return r=Ha(r),!r||(a=Ha(a),!a)?null:(r=nd(r),a=nd(a),Qu(Math.round(a[0]+p*(r[0]-a[0])),Math.round(a[1]+p*(r[1]-a[1])),Math.round(a[2]+p*(r[2]-a[2]))))},qu=function(r){return wc(r,_E,255*Kf)},Nd=function(r,a,p){const b=[];var R=r.split("");R.push("");var W=0;r=[];let pe=null;for(let $n=0;$n<R.length;$n++){var Le=R[$n];if(W===0)if(Le==="%")(W=r.join(""))&&b.push(W),r.length=0,W=1;else if(p&&Le===`
`){const zo=r.join("");zo&&b.push(zo),r.length=0,b.push(Le)}else r.push(Le);else if(W===1)Le==="%"?(r.push(Le),W=0):a&&"0"<=Le&&"9">=Le?(W=2,pe=Le,(Le=r.join(""))&&b.push(Le),r.length=0):Le==="{"?W=3:(r.push("%",Le),W=0);else if(W===2)if("0"<=Le&&"9">=Le)pe+=Le;else{var Nt=void 0;b.push(parseInt((Nt=pe)!=null?Nt:"",10)),$n--,W=0}else W===3&&(Le===""?(r.splice(0,0,"%{"),$n--,W=0):Le!=="}"?r.push(Le):(W=r.join(""),/[A-Z]\w*/i.test(W)?(Le=W.toUpperCase(),(Le=Le.startsWith("BKY_")?Le.substring(4):null)&&Le in t.Msg$$module$build$src$core$msg?(W=t.Msg$$module$build$src$core$msg[Le],typeof W=="string"?Array.prototype.push.apply(b,Nd(W,a,p)):a?b.push(`${W}`):b.push(W)):b.push("%{"+W+"}")):b.push("%{"+W+"}"),W=r.length=0))}for((a=r.join(""))&&b.push(a),Nt=[],r.length=0,R=0;R<b.length;R++)typeof b[R]!="string"||p&&b[R]===`
`?((a=r.join(""))&&Nt.push(a),r.length=0,Nt.push(b[R])):r.push(b[R]);return(a=r.join(""))&&Nt.push(a),r.length=0,Nt},ra=function(r){return Nd(r,!0,!0)},xr=function(r){return typeof r!="string"?r:(r=Nd(r,!1,!1),r.length?String(r[0]):"")},Vl=function(r){let a=!0;const p=t.Msg$$module$build$src$core$msg,b=r.match(/%{BKY_[A-Z]\w*}/gi);if(b)for(let R=0;R<b.length;R++){const W=b[R].toUpperCase();p[W.slice(6,-1)]===void 0&&(console.warn("No message string for "+b[R]+" in "+r),a=!1)}return a},qi=function(r){const a=typeof r=="string"?xr(r):r;var p=Number(a);if(!isNaN(p)&&0<=p&&360>=p)return{hue:p,hex:wc(p,Sc(),255*td())};if(p=Ha(a))return{hue:null,hex:p};throw p='Invalid colour: "'+a+'"',r!==a&&(p+=' (from "'+r+'")'),Error(p)},ia=function(r){return r.getProcedureModel!==void 0&&r.doProcedureUpdate!==void 0&&r.isProcedureDef!==void 0},ye=function(r){return r.startPublishing!==void 0&&r.stopPublishing!==void 0},Xs=function(r,a){i(Dt.FIELD,r,a)},Ga=function(r){o(Dt.FIELD,r)},t.fromJson$$module$build$src$core$field_registry=function(r){return Jf.fromJsonInternal(r)},Ur=function(r){const a=d(Dt.FIELD,r.type);if(a){if(typeof a.fromJson!="function")throw new TypeError("returned Field was not a IRegistrableField");return a.fromJson(r)}return console.warn("Blockly could not create a field of type "+r.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null},zn=function(r){let a=!1;const p=r.map(([pe,Le])=>typeof pe=="string"?[xr(pe),Le]:(a=!0,[pe.alt!==null?Object.assign({},pe,{alt:xr(pe.alt)}):Object.assign({},pe),Le]));if(a||2>r.length)return{options:p};var b=p.map(([pe])=>pe),R=jc(b);r=Eh(b,R);const W=Tu(b,R);return!r&&!W||R<=r+W?{options:p}:(R=r?b[0].substring(0,r-1):void 0,b=W?b[0].substr(1-W):void 0,{options:jp(p,r,W),prefix:R,suffix:b})},jp=function(r,a,p){return r.map(([b,R])=>[b.substring(a,b.length-p),R])},ba=function(r){if(!Array.isArray(r))throw TypeError("FieldDropdown options must be an array.");if(!r.length)throw TypeError("FieldDropdown options must not be an empty array.");let a=!1;for(let p=0;p<r.length;p++){const b=r[p];Array.isArray(b)?typeof b[1]!="string"?(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option id must be a string. Found "+b[1]+" in: ",b)):b[0]&&typeof b[0]!="string"&&typeof b[0].src!="string"&&(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must have a string label or image description. Found"+b[0]+" in: ",b)):(a=!0,console.error("Invalid option["+p+"]: Each FieldDropdown option must be an array. Found: ",b))}if(a)throw TypeError("Found invalid FieldDropdown options.")},t.register$$module$build$src$core$extensions=function(r,a){if(typeof r!="string"||r.trim()==="")throw Error('Error: Invalid extension name "'+r+'"');if(v_[r])throw Error('Error: Extension "'+r+'" is already registered.');if(typeof a!="function")throw Error('Error: Extension "'+r+'" must be a function');v_[r]=a},t.registerMixin$$module$build$src$core$extensions=function(r,a){if(!a||typeof a!="object")throw Error('Error: Mixin "'+r+'" must be a object');t.register$$module$build$src$core$extensions(r,function(){this.mixin(a)})},t.registerMutator$$module$build$src$core$extensions=function(r,a,p,b){const R='Error when registering mutator "'+r+'": ';Mc(R,a);const W=Bo(a,R);if(p&&typeof p!="function")throw Error(R+'Extension "'+r+'" is not a function');t.register$$module$build$src$core$extensions(r,function(){W&&this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(b||[],this)),this.mixin(a),p&&p.apply(this)})},Qr=function(r){gi(r)?delete v_[r]:console.warn('No extension mapping for name "'+r+'" found to unregister')},gi=function(r){return!!v_[r]},xi=function(r,a,p){const b=v_[r];if(typeof b!="function")throw Error('Error: Extension "'+r+'" not found.');let R;if(p?Ii(r,a):R=yo(a),b.apply(a),p)Mc('Error after applying mutator "'+r+'": ',a);else if(!Bd(R,a))throw Error('Error when applying extension "'+r+'": mutation properties changed when applying a non-mutator extension.')},Ii=function(r,a){if(yo(a).length)throw Error('Error: tried to apply mutation "'+r+'" to a block that already has mutator functions.  Block id: '+a.id)},Cc=function(r,a){return oo(r.mutationToDom,r.domToMutation,a+" mutationToDom/domToMutation")},No=function(r,a){return oo(r.saveExtraState,r.loadExtraState,a+" saveExtraState/loadExtraState")},Bo=function(r,a){return oo(r.compose,r.decompose,a+" compose/decompose")},oo=function(r,a,p){if(r&&a){if(typeof r!="function"||typeof a!="function")throw Error(p+" must be a function");return!0}if(!r&&!a)return!1;throw Error(p+"Must have both or neither functions")},Mc=function(r,a){const p=Cc(a,r),b=No(a,r);if(!p&&!b)throw Error(r+"Mutations must contain either XML hooks, or JSON hooks, or both");Bo(a,r)},yo=function(r){const a=[];return r.domToMutation!==void 0&&a.push(r.domToMutation),r.mutationToDom!==void 0&&a.push(r.mutationToDom),r.saveExtraState!==void 0&&a.push(r.saveExtraState),r.loadExtraState!==void 0&&a.push(r.loadExtraState),r.compose!==void 0&&a.push(r.compose),r.decompose!==void 0&&a.push(r.decompose),a},Bd=function(r,a){if(a=yo(a),a.length!==r.length)return!1;for(let p=0;p<a.length;p++)if(r[p]!==a[p])return!1;return!0},Pd=function(r){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")r();else{const a=setInterval(function(){document.readyState==="complete"&&(clearInterval(a),r())},10)}},t.buildTooltipForDropdown$$module$build$src$core$extensions=function(r,a){const p=[];return function(){p.indexOf(this.type)===-1&&(Ch(this,r,a),p.push(this.type)),this.setTooltip((function(){const b=String(this.getFieldValue(r));return xr(a[b])}).bind(this))}},Ch=function(r,a,p){var b=r.getField(a);if(b instanceof jd&&!b.isOptionListDynamic()){b=b.getOptions();for(const[,R]of b)p[R]===void 0&&console.warn(`No tooltip mapping for value ${R} of field ${a} of block type ${r.type}.`)}},t.buildTooltipWithFieldText$$module$build$src$core$extensions=function(r,a){return function(){this.setTooltip((function(){const p=this.getField(a);return xr(r).replace("%1",p?p.getText():"")}).bind(this))}},Ta=function(){const r=this.tooltip;this.setTooltip((function(){const a=this.getParent();return a&&a.getInputsInline()&&a.tooltip||r}).bind(this))},Cn=function(r,a){return" "+r+","+a+" "},as=function(r,a){return" "+r+a.join("")},ys=function(r,a){return" M "+r+","+a+" "},ii=function(r,a){return" m "+r+","+a+" "},$l=function(r,a){return" l "+r+","+a+" "},Sl=function(r){return" l"+r.join("")},cn=function(r,a){return" "+r+" "+a+" "},zr=function(r,a,p,b){return r+" "+p+" "+p+" "+a+b},Zi=function(r,a){i(Dt.ICON,r.toString(),a)},Xp=function(r){o(Dt.ICON,r)},Kc=function(r){const a=r.getProcedureMap().getProcedures().filter(b=>!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!1]);r.getBlocksByType("procedures_defnoreturn",!1).forEach(b=>{!ia(b)&&ci(b)&&a.push(b.getProcedureDef())});const p=r.getProcedureMap().getProcedures().filter(b=>!!b.getReturnTypes()).map(b=>[b.getName(),b.getParameters().map(R=>R.getName()),!0]);return r.getBlocksByType("procedures_defreturn",!1).forEach(b=>{!ia(b)&&ci(b)&&p.push(b.getProcedureDef())}),a.sort(Ns),p.sort(Ns),[a,p]},Ns=function(r,a){return r[0].localeCompare(a[0],void 0,{sensitivity:"base"})},t.findLegalName$$module$build$src$core$procedures=function(r,a){if(a.isInFlyout)return r;for(r=r||t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!Po(r,a.workspace,a);){const p=r.match(/^(.*?)(\d+)$/);r=p?p[1]+(parseInt(p[2])+1):r+"2"}return r},Po=function(r,a,p){return!dn(r,a,p)},dn=function(r,a,p){for(const b of a.getAllBlocks(!1))if(b!==p&&ci(b)&&t.Names$$module$build$src$core$names.equals(b.getProcedureDef()[0],r))return!0;p=p&&ia(p)?p==null?void 0:p.getProcedureModel():void 0;for(const b of a.getProcedureMap().getProcedures())if(b!==p&&t.Names$$module$build$src$core$names.equals(b.getName(),r))return!0;return!1},t.rename$$module$build$src$core$procedures=function(r){var a=this.getSourceBlock();if(!a)throw new no;r=r.trim();const p=t.findLegalName$$module$build$src$core$procedures(r,a);ia(a)&&!a.isInsertionMarker()&&a.getProcedureModel().setName(p);const b=this.getValue();if(b!==r&&b!==p)for(r=a.workspace.getAllBlocks(!1),a=0;a<r.length;a++){const R=r[a];R.renameProcedure&&R.renameProcedure(b,p)}return p},rn=function(r){function a(W,pe){for(let Nt=0;Nt<W.length;Nt++){var Le=W[Nt][0];const $n=W[Nt][1],zo=t.createElement$$module$build$src$core$utils$xml("block");zo.setAttribute("type",pe),zo.setAttribute("gap","16");const Mo=t.createElement$$module$build$src$core$utils$xml("mutation");for(Mo.setAttribute("name",Le),zo.appendChild(Mo),Le=0;Le<$n.length;Le++){const Ip=t.createElement$$module$build$src$core$utils$xml("arg");Ip.setAttribute("name",$n[Le]),Mo.appendChild(Ip)}p.push(zo)}}const p=[];if(Lr.procedures_defnoreturn){var b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_defnoreturn"),b.setAttribute("gap","16");var R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),b.appendChild(R),p.push(b)}return Lr.procedures_defreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_defreturn"),b.setAttribute("gap","16"),R=t.createElement$$module$build$src$core$utils$xml("field"),R.setAttribute("name","NAME"),R.appendChild(t.createTextNode$$module$build$src$core$utils$xml(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),b.appendChild(R),p.push(b)),Lr.procedures_ifreturn&&(b=t.createElement$$module$build$src$core$utils$xml("block"),b.setAttribute("type","procedures_ifreturn"),b.setAttribute("gap","16"),p.push(b)),p.length&&p[p.length-1].setAttribute("gap","24"),r=Kc(r),a(r[0],"procedures_callnoreturn"),a(r[1],"procedures_callreturn"),p},Wa=function(r){var a=[],p=r.getBlocksByType("procedures_mutatorarg",!1);for(let W=0,pe;pe=p[W];W++)a.push(pe.getFieldValue("NAME"));p=t.createElement$$module$build$src$core$utils$xml("xml");const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","procedures_mutatorarg");const R=t.createElement$$module$build$src$core$utils$xml("field");R.setAttribute("name","NAME"),a=hi(t.DEFAULT_ARG$$module$build$src$core$procedures,a),a=t.createTextNode$$module$build$src$core$utils$xml(a),R.appendChild(a),b.appendChild(R),p.appendChild(b),r.updateToolbox(p)},Zu=function(r){if(r.type===eo&&r.bubbleType==="mutator"&&r.isOpen&&r.blockId){r=v(r.workspaceId).getBlockById(r.blockId);var a=r.type;(a==="procedures_defnoreturn"||a==="procedures_defreturn")&&(r=r.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Wa(r),r.addChangeListener(Uf))}},Uf=function(r){(r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.DELETE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils||r.type===rh)&&(r=v(r.workspaceId),Wa(r))},$u=function(r,a){return a.getAllBlocks(!1).filter(p=>sa(p,r)||dr(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureCall(),r))},sa=function(r,a){return ia(r)&&!r.isProcedureDef()&&r.getProcedureModel()&&t.Names$$module$build$src$core$names.equals(r.getProcedureModel().getName(),a)},t.mutateCallers$$module$build$src$core$procedures=function(r){const a=oe();var p=r.getProcedureDef()[0];const b=r.mutationToDom(!0);r=$u(p,r.workspace);for(let W=0,pe;pe=r[W];W++){p=(p=pe.mutationToDom())&&gn(p),pe.domToMutation&&pe.domToMutation(b);var R=pe.mutationToDom();R=R&&gn(R),p!==R&&(de(!1),ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(pe,"mutation",null,p,R)),de(a))}},t.getDefinition$$module$build$src$core$procedures=function(r,a){for(const p of a.getAllBlocks(!1))if(ia(p)&&p.isProcedureDef()&&t.Names$$module$build$src$core$names.equals(p.getProcedureModel().getName(),r)||ci(p)&&t.Names$$module$build$src$core$names.equals(p.getProcedureDef()[0],r))return p;return null},ls=function(r){return r.isDynamic},Ea=function(r){return r.pathDown!==void 0&&r.pathUp!==void 0},zi=function(r){return r.pathLeft!==void 0&&r.pathRight!==void 0},$a=function(r){let a=r.outputConnection;return(!a||r.previousConnection&&r.previousConnection.isConnected())&&(a=r.previousConnection),a},Su=function(r,a){if(!r||!a)throw Error("Cannot connect null connections.");r.targetConnection=a,a.targetConnection=r},Fd=function(r,a){let p=null;a=a.outputConnection;const b=a==null?void 0:a.getConnectionChecker();for(let R=0,W;W=r.inputList[R];R++){const pe=W.connection;let Le;if(pe&&((Le=b)!=null&&Le.canConnect(a,pe,!1))){if(p)return null;p=pe}}return p},ec=function(r,a){let p;for(;p=Fd(r,a);)if(r=p.targetBlock(),!r||r.isShadow())return p;return null},Ys=function(r,a){i(Dt.RENDERER,r,a)},Ud=function(r){o(Dt.RENDERER,r)},Jc=function(r,a,p){return r=new(h(Dt.RENDERER,r))(r),r.init(a,p),r},rd=function(r){Qi(r.getTargetWorkspace(),void 0,"String")},Sa=function(r){Qi(r.getTargetWorkspace(),void 0,"Number")},wl=function(r){Qi(r.getTargetWorkspace(),void 0,"Colour")},Yp=function(r){let a=[],p=document.createElement("button");return p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(p),p=document.createElement("button"),p.setAttribute("text",t.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),p.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(p),r.registerButtonCallback("CREATE_VARIABLE_STRING",rd),r.registerButtonCallback("CREATE_VARIABLE_NUMBER",Sa),r.registerButtonCallback("CREATE_VARIABLE_COLOUR",wl),r=jl(r),a=a.concat(r)},jl=function(r){r=r.getAllVariables();const a=[];if(0<r.length){if(Lr.variables_set_dynamic){var p=r[r.length-1];const b=t.createElement$$module$build$src$core$utils$xml("block");b.setAttribute("type","variables_set_dynamic"),b.setAttribute("gap","24"),b.appendChild(Rs(p)),a.push(b)}if(Lr.variables_get_dynamic){r.sort(Zp.compareByName);for(let b=0,R;R=r[b];b++)p=t.createElement$$module$build$src$core$utils$xml("block"),p.setAttribute("type","variables_get_dynamic"),p.setAttribute("gap","8"),p.appendChild(Rs(R)),a.push(p)}}return a},wu=function(r){return r.toCopyData!==void 0},id=function(){Di.registry.register({name:em.ESCAPE,preconditionFn(r){return!r.options.readOnly},callback(r){return r.hideChaff(),!0},keyCodes:[Dr.ESC]})},Ac=function(){Di.registry.register({name:em.DELETE,preconditionFn(r){const a=k();return!r.options.readOnly&&a!=null&&a.isDeletable()},callback(r,a){return a.preventDefault(),Hm.inProgress()?!1:(k().checkAndDelete(),!0)},keyCodes:[Dr.DELETE,Dr.BACKSPACE]})},us=function(){const r=Di.registry.createSerializedKey(Dr.C,[Dr.CTRL]),a=Di.registry.createSerializedKey(Dr.C,[Dr.ALT]),p=Di.registry.createSerializedKey(Dr.C,[Dr.META]);Di.registry.register({name:em.COPY,preconditionFn(b){const R=k();return!b.options.readOnly&&!Hm.inProgress()&&R!=null&&R.isDeletable()&&R.isMovable()&&wu(R)},callback(b,R){return R.preventDefault(),b.hideChaff(),R=k(),!R||!wu(R)?!1:(Qv=R.toCopyData(),Gb=b,!!Qv)},keyCodes:[r,a,p]})},xu=function(){const r=Di.registry.createSerializedKey(Dr.X,[Dr.CTRL]),a=Di.registry.createSerializedKey(Dr.X,[Dr.ALT]),p=Di.registry.createSerializedKey(Dr.X,[Dr.META]);Di.registry.register({name:em.CUT,preconditionFn(b){const R=k();return!b.options.readOnly&&!Hm.inProgress()&&R!=null&&R instanceof Zf&&R.isDeletable()&&R.isMovable()&&!R.workspace.isFlyout},callback(b){const R=k();return!R||!wu(R)?!1:(Qv=R.toCopyData(),Gb=b,R.checkAndDelete(),!0)},keyCodes:[r,a,p]})},tc=function(){const r=Di.registry.createSerializedKey(Dr.V,[Dr.CTRL]),a=Di.registry.createSerializedKey(Dr.V,[Dr.ALT]),p=Di.registry.createSerializedKey(Dr.V,[Dr.META]);Di.registry.register({name:em.PASTE,preconditionFn(b){return!b.options.readOnly&&!Hm.inProgress()},callback(){return Qv&&Gb?!!io(Qv,Gb):!1},keyCodes:[r,a,p]})},bo=function(){const r=Di.registry.createSerializedKey(Dr.Z,[Dr.CTRL]),a=Di.registry.createSerializedKey(Dr.Z,[Dr.ALT]),p=Di.registry.createSerializedKey(Dr.Z,[Dr.META]);Di.registry.register({name:em.UNDO,preconditionFn(b){return!b.options.readOnly&&!Hm.inProgress()},callback(b){return b.hideChaff(),b.undo(!1),!0},keyCodes:[r,a,p]})},Va=function(){const r=Di.registry.createSerializedKey(Dr.Z,[Dr.SHIFT,Dr.CTRL]),a=Di.registry.createSerializedKey(Dr.Z,[Dr.SHIFT,Dr.ALT]),p=Di.registry.createSerializedKey(Dr.Z,[Dr.SHIFT,Dr.META]),b=Di.registry.createSerializedKey(Dr.Y,[Dr.CTRL]);Di.registry.register({name:em.REDO,preconditionFn(R){return!Hm.inProgress()&&!R.options.readOnly},callback(R){return R.hideChaff(),R.undo(!0),!0},keyCodes:[r,a,p,b]})},bs=function(){id(),Ac(),us(),xu(),tc(),bo(),Va()},ao=function(r){const a={id:r.getId(),name:r.getName(),returnTypes:r.getReturnTypes()};return r.getParameters().length&&(a.parameters=r.getParameters().map(p=>Qc(p))),a},Qc=function(r){const a={id:r.getId(),name:r.getName()};return r.getTypes().length&&(a.types=r.getTypes()),a},Ks=function(r,a,p,b){if(r=new r(b,p.name,p.id).setReturnTypes(p.returnTypes),!p.parameters)return r;for(const[R,W]of p.parameters.entries())r.insertParameter(ja(a,W,b),R);return r},ja=function(r,a,p){return r=new r(p,a.name,a.id),a.types&&r.setTypes(a.types),r},nc=function(r){const a=Object.create(null),p=m(Dt.SERIALIZER,!0);for(const b in p){let R;const W=(R=p[b])==null?void 0:R.save(r);W&&(a[b]=W)}return a},_p=function(r,a,{recordUndo:p=!1}={}){var b=m(Dt.SERIALIZER,!0);if(b){b=Object.entries(b).sort((W,pe)=>pe[1].priority-W[1].priority);var R=oe();de(p),(p=t.getGroup$$module$build$src$core$events$utils())||t.setGroup$$module$build$src$core$events$utils(!0),Q(),a instanceof hf&&a.setResizesEnabled(!1);for(const[,W]of b.reverse()){let pe;(pe=W)==null||pe.clear(a)}for(let[W,pe]of b.reverse())if(r[W]){let Le;(Le=pe)==null||Le.load(r[W],a)}a instanceof hf&&a.setResizesEnabled(!0),ae(),ue(new(xe(Jl))(a)),t.setGroup$$module$build$src$core$events$utils(p),de(R)}},qc=function(r,a,p){const b=p.getBoundingRectangle(),R=b.right-b.left,W=Jr(a.top,b.top,a.top+a.height-(b.bottom-b.top))-b.top;let pe=a.left;return a=a.left+a.width-R,r.RTL?pe=Math.min(a,pe):a=Math.max(pe,a),(r=Jr(pe,b.left,a)-b.left)||W?(p.moveBy(r,W,["inbounds"]),!0):!1},oa=function(r){return a=>{var p=r.getMetricsManager();if(p.hasFixedEdges()&&!r.isDragging()){var b;if(ld.indexOf((b=a.type)!=null?b:"")!==-1){b=p.getScrollMetrics(!0);const R=_i(r,a);R&&(p=t.getGroup$$module$build$src$core$events$utils()||!1,t.setGroup$$module$build$src$core$events$utils(a.group),qc(r,b,R)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),t.setGroup$$module$build$src$core$events$utils(p))}else a.type===ns&&a.scale&&a.oldScale&&a.scale>a.oldScale&&wn(r)}}},_i=function(r,a){let p=null;switch(a.type){case t.CREATE$$module$build$src$core$events$utils:case t.MOVE$$module$build$src$core$events$utils:(p=r.getBlockById(a.blockId))&&(p=p.getRootBlock());break;case So:case Qa:p=r.getCommentById(a.commentId)}return p},wn=function(r){var a=r.getMetricsManager();if(a.hasFixedEdges()&&!r.isDragging()){a=a.getScrollMetrics(!0);var p=r.getTopBoundedElements();for(let b=0,R;R=p[b];b++)qc(r,a,R)}},On=function(r,a){const p=[];for(const b of r.getIcons())(!El(b)||b.bubbleIsVisible())&&(p.push({location:a,icon:b}),b.onLocationChange(a));for(const b of r.getChildren(!1))p.push(...On(b,tn.sum(a,b.relativeCoords)));return p},yr=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.UNDO},preconditionFn(r){return 0<r.workspace.getUndoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!1)},scopeType:qr.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Or=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.REDO},preconditionFn(r){return 0<r.workspace.getRedoStack().length?"enabled":"disabled"},callback(r){r.workspace.undo(!0)},scopeType:qr.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Hr=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(r){return r.workspace.isMovable()?1<r.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback(r){r.workspace.cleanUp()},scopeType:qr.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Js=function(r,a){function p(W){R--,W.setCollapsed(r),R===0&&t.setGroup$$module$build$src$core$events$utils(!1)}let b=0,R=0;t.setGroup$$module$build$src$core$events$utils(!0);for(let W=0;W<a.length;W++){let pe=a[W];for(;pe;)R++,setTimeout(p.bind(null,pe),b),pe=pe.getNextBlock(),b+=10}},Ri=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let p=r[a];for(;p;){if(!p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Js(!0,r.workspace.getTopBlocks(!0))},scopeType:qr.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Hi=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(r){if(r.workspace.options.collapse){r=r.workspace.getTopBlocks(!1);for(let a=0;a<r.length;a++){let p=r[a];for(;p;){if(p.isCollapsed())return"enabled";p=p.getNextBlock()}}return"disabled"}return"hidden"},callback(r){Js(!1,r.workspace.getTopBlocks(!0))},scopeType:qr.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Xl=function(r,a){if(r.isDeletable())Array.prototype.push.apply(a,r.getDescendants(!1));else{r=r.getChildren(!1);for(let p=0;p<r.length;p++)Xl(r[p],a)}},Cu=function(r){const a=[];r=r.getTopBlocks(!0);for(let p=0;p<r.length;p++)Xl(r[p],a);return a},rc=function(r,a){a?t.setGroup$$module$build$src$core$events$utils(a):(t.setGroup$$module$build$src$core$events$utils(!0),a=t.getGroup$$module$build$src$core$events$utils());const p=r.shift();p&&(p.isDeadOrDying()?rc(r,a):(p.dispose(!1,!0),setTimeout(rc,10,r,a))),t.setGroup$$module$build$src$core$events$utils(!1)},Mu=function(){qr.registry.register({displayText(r){return r.workspace?(r=Cu(r.workspace).length,r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)):""},preconditionFn(r){return r.workspace&&0<Cu(r.workspace).length?"enabled":"disabled"},callback(r){if(r.workspace){r.workspace.cancelCurrentGesture();var a=Cu(r.workspace);2>a.length?rc(a):Yt(t.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(a.length)),function(p){p&&rc(a)})}},scopeType:qr.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Bs=function(){yr(),Or(),Hr(),Ri(),Hi(),Mu()},lo=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isDeletable()&&r.isMovable()?r.isDuplicatable()?"enabled":"disabled":"hidden"},callback(r){if(r.block){var a=r.block.toCopyData();a&&io(a,r.block.workspace)}},scopeType:qr.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},sd=function(){qr.registry.register({displayText(r){return r.block.hasIcon(Lh.TYPE)?t.Msg$$module$build$src$core$msg.REMOVE_COMMENT:t.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.comments&&!r.isCollapsed()&&r.isEditable()?"enabled":"hidden"},callback(r){r=r.block,r.hasIcon(Lh.TYPE)?r.setCommentText(null):r.setCommentText("")},scopeType:qr.ScopeType.BLOCK,id:"blockComment",weight:2})},wa=function(){qr.registry.register({displayText(r){return r.block.getInputsInline()?t.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:t.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(r){if(r=r.block,!r.isInFlyout&&r.isMovable()&&!r.isCollapsed()){for(let a=1;a<r.inputList.length;a++)if(!(r.inputList[a-1]instanceof Yb||r.inputList[a]instanceof Yb))return"enabled"}return"hidden"},callback(r){r.block.setInputsInline(!r.block.getInputsInline())},scopeType:qr.ScopeType.BLOCK,id:"blockInline",weight:3})},Au=function(){qr.registry.register({displayText(r){return r.block.isCollapsed()?t.Msg$$module$build$src$core$msg.EXPAND_BLOCK:t.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.isMovable()&&r.workspace.options.collapse?"enabled":"hidden"},callback(r){r.block.setCollapsed(!r.block.isCollapsed())},scopeType:qr.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Iu=function(){qr.registry.register({displayText(r){return r.block.isEnabled()?t.Msg$$module$build$src$core$msg.DISABLE_BLOCK:t.Msg$$module$build$src$core$msg.ENABLE_BLOCK},preconditionFn(r){return r=r.block,!r.isInFlyout&&r.workspace.options.disable&&r.isEditable()?r.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback(r){r=r.block;const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),r.setEnabled(!r.isEnabled()),t.setGroup$$module$build$src$core$events$utils(a)},scopeType:qr.ScopeType.BLOCK,id:"blockDisable",weight:5})},Qs=function(){qr.registry.register({displayText(r){var a=r.block;return r=a.getDescendants(!1).length,(a=a.getNextBlock())&&(r-=a.getDescendants(!1).length),r===1?t.Msg$$module$build$src$core$msg.DELETE_BLOCK:t.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${r}`)},preconditionFn(r){return!r.block.isInFlyout&&r.block.isDeletable()?"enabled":"hidden"},callback(r){r.block&&r.block.checkAndDelete()},scopeType:qr.ScopeType.BLOCK,id:"blockDelete",weight:6})},To=function(){qr.registry.register({displayText(){return t.Msg$$module$build$src$core$msg.HELP},preconditionFn(r){return r=r.block,(typeof r.helpUrl=="function"?r.helpUrl():r.helpUrl)?"enabled":"hidden"},callback(r){r.block.showHelp()},scopeType:qr.ScopeType.BLOCK,id:"blockHelp",weight:7})},Xa=function(){lo(),sd(),wa(),Au(),Iu(),Qs(),To()},Eo=function(){Bs(),Xa()},ic=function(r,a){var p=null;p=typeof r=="string"?document.getElementById(r)||document.querySelector(r):r;let b;if(!document.contains(p)&&document!==((b=p)==null?void 0:b.ownerDocument))throw Error("Error: container is not in current document");r=new Uo(a||{}),a=document.createElement("div"),a.className="injectionDiv",a.tabIndex=0,lr(a,zs.LABEL,t.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),p.appendChild(a),p=Ru(a,r);const R=Mh(a,p,r);return Zc(R),O(R),F(R),a.addEventListener("focusin",function(){O(R)}),R},Ru=function(r,a){r.setAttribute("dir","LTR"),mt(a.hasCss,a.pathToMedia),r=ee(Be.SVG,{xmlns:yg,"xmlns:html":Oc,"xmlns:xlink":$s,version:"1.1",class:"blocklySvg",tabindex:"0"},r);const p=ee(Be.DEFS,{},r),b=String(Math.random()).substring(2);return a.gridPattern=gE.createDom(b,a.gridOptions,p),r},Mh=function(r,a,p){p.parentWorkspace=null,p=new hf(p);const b=p.options;p.scale=b.zoomOptions.startScale,a.appendChild(p.createDom("blocklyMainBackground",r));var R=p.getRenderer().getClassName();return R&&ke(r,R),(R=p.getTheme().getClassName())&&ke(r,R),!b.hasCategories&&b.languageTree&&(r=p.addFlyout(Be.SVG),Ge(r,a)),b.hasTrashcan&&p.addTrashcan(),b.zoomOptions&&b.zoomOptions.controls&&p.addZoomControls(),p.getThemeManager().subscribe(a,"workspaceBackgroundColour","background-color"),p.translate(0,0),p.addChangeListener(oa(p)),F(p),Lo(),_l(),$h(),p},Zc=function(r){const a=r.options;var p=r.getParentSvg();if(Se(p.parentNode,"contextmenu",null,function(b){We(b)||b.preventDefault()}),p=Se(window,"resize",null,function(){bl(),r.hideComponents(!0),os(),mp(),F(r),wn(r)}),r.setResizeHandlerWrapper(p),Xi(),a.languageTree){p=r.getToolbox();const b=r.getFlyout(!0);p?p.init():b&&(b.init(r),b.show(a.languageTree),typeof b.scrollToStart=="function"&&b.scrollToStart())}a.hasTrashcan&&r.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&r.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(r.scrollbar=new FE(r,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.horizontal,a.moveOptions.scrollbars===!0||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),r.scrollbar.resize()):r.setMetrics({x:.5,y:.5}),a.hasSounds&&Ts(a.pathToMedia,r)},Sr=function(r){const a=A();a&&!(We(r)||a.rendered&&!a.isVisible())&&Di.registry.onKeyDown(a,r)},Xi=function(){lh||(Se(document,"scroll",null,function(){const r=E();for(let a=0,p;p=r[a];a++)p instanceof hf&&p.updateInverseScreenCTM()}),Se(document,"keydown",null,Sr),Pe(document,"touchend",null,Je),Pe(document,"touchcancel",null,Je),kn&&Se(window,"orientationchange",document,function(){F(A())})),lh=!0},Ts=function(r,a){function p(){for(;R.length;){const W=R.pop();W&&rt(W)}b.preload()}const b=a.getAudioManager();b.load([r+"click.mp3",r+"click.wav",r+"click.ogg"],"click"),b.load([r+"disconnect.wav",r+"disconnect.mp3",r+"disconnect.ogg"],"disconnect"),b.load([r+"delete.mp3",r+"delete.ogg",r+"delete.wav"],"delete");const R=[];R.push(Se(document,"pointermove",null,p,!0)),R.push(Se(document,"touchstart",null,p,!0))},aa=function(r){return r.getType!==void 0&&r.initView!==void 0&&r.dispose!==void 0&&r.getWeight!==void 0&&r.getSize!==void 0&&r.applyColour!==void 0&&r.hideForInsertionMarker!==void 0&&r.updateEditable!==void 0&&r.updateCollapsed!==void 0&&r.isShownWhenCollapsed!==void 0&&r.setOffsetInBlock!==void 0&&r.onLocationChange!==void 0&&r.onClick!==void 0},Ps=function(r){return r.paste!==void 0},Gn=function(r){return r.isSelectable()},Ic=function(r){A().hideChaff(r)},on=on||{},on.scope={},on.ASSUME_ES5=!1,on.ASSUME_NO_NATIVE_MAP=!1,on.ASSUME_NO_NATIVE_SET=!1,on.SIMPLE_FROUND_POLYFILL=!1,on.ISOLATE_POLYFILLS=!1,on.FORCE_POLYFILL_PROMISE=!1,on.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,on.defineProperty=on.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(r,a,p){return r==Array.prototype||r==Object.prototype||(r[a]=p.value),r},on.getGlobal=function(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var a=0;a<r.length;++a){var p=r[a];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")},on.global=on.getGlobal(this),on.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",on.TRUST_ES6_POLYFILLS=!on.ISOLATE_POLYFILLS||on.IS_SYMBOL_NATIVE,on.polyfills={},on.propertyToPolyfillSymbol={},on.POLYFILL_PREFIX="$jscp$",on.polyfill=function(r,a,p,b){a&&(on.ISOLATE_POLYFILLS?on.polyfillIsolated(r,a,p,b):on.polyfillUnisolated(r,a,p,b))},on.polyfillUnisolated=function(r,a,p,b){for(p=on.global,r=r.split("."),b=0;b<r.length-1;b++){var R=r[b];if(!(R in p))return;p=p[R]}r=r[r.length-1],b=p[r],a=a(b),a!=b&&a!=null&&on.defineProperty(p,r,{configurable:!0,writable:!0,value:a})},on.polyfillIsolated=function(r,a,p,b){var R=r.split(".");r=R.length===1,b=R[0],b=!r&&b in on.polyfills?on.polyfills:on.global;for(var W=0;W<R.length-1;W++){var pe=R[W];if(!(pe in b))return;b=b[pe]}R=R[R.length-1],p=on.IS_SYMBOL_NATIVE&&p==="es6"?b[R]:null,a=a(p),a!=null&&(r?on.defineProperty(on.polyfills,R,{configurable:!0,writable:!0,value:a}):a!==p&&(on.propertyToPolyfillSymbol[R]===void 0&&(p=1e9*Math.random()>>>0,on.propertyToPolyfillSymbol[R]=on.IS_SYMBOL_NATIVE?on.global.Symbol(R):on.POLYFILL_PREFIX+p+"$"+R),on.defineProperty(b,on.propertyToPolyfillSymbol[R],{configurable:!0,writable:!0,value:a})))},on.polyfill("globalThis",function(r){return r||on.global},"es_2020","es3"),on.arrayIteratorImpl=function(r){var a=0;return function(){return a<r.length?{done:!1,value:r[a++]}:{done:!0}}},on.arrayIterator=function(r){return{next:on.arrayIteratorImpl(r)}},on.initSymbol=function(){},on.iteratorPrototype=function(r){return r={next:r},r[Symbol.iterator]=function(){return this},r},on.iteratorFromArray=function(r,a){r instanceof String&&(r+="");var p=0,b=!1,R={next:function(){if(!b&&p<r.length){var W=p++;return{value:a(W,r[W]),done:!1}}return b=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R},on.polyfill("Array.prototype.values",function(r){return r||function(){return on.iteratorFromArray(this,function(a,p){return p})}},"es8","es3"),on.polyfill("Array.prototype.flat",function(r){return r||function(a){a=a===void 0?1:a;var p=[];return Array.prototype.forEach.call(this,function(b){Array.isArray(b)&&0<a?(b=Array.prototype.flat.call(b,a-1),p.push.apply(p,b)):p.push(b)}),p}},"es9","es5"),on.owns=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},on.polyfill("Object.entries",function(r){return r||function(a){var p=[],b;for(b in a)on.owns(a,b)&&p.push([b,a[b]]);return p}},"es8","es3"),on.polyfill("Object.values",function(r){return r||function(a){var p=[],b;for(b in a)on.owns(a,b)&&p.push(a[b]);return p}},"es8","es3");var si=Object.create(null),es={typeMap:si},xl=Object.create(null),Ya="default",Dt=class{constructor(r){this.name=r}toString(){return this.name}};Dt.CONNECTION_CHECKER=new Dt("connectionChecker"),Dt.CONNECTION_PREVIEWER=new Dt("connectionPreviewer"),Dt.CURSOR=new Dt("cursor"),Dt.EVENT=new Dt("event"),Dt.FIELD=new Dt("field"),Dt.INPUT=new Dt("input"),Dt.RENDERER=new Dt("renderer"),Dt.TOOLBOX=new Dt("toolbox"),Dt.THEME=new Dt("theme"),Dt.TOOLBOX_ITEM=new Dt("toolboxItem"),Dt.FLYOUTS_VERTICAL_TOOLBOX=new Dt("flyoutsVerticalToolbox"),Dt.FLYOUTS_HORIZONTAL_TOOLBOX=new Dt("flyoutsHorizontalToolbox"),Dt.METRICS_MANAGER=new Dt("metricsManager"),Dt.BLOCK_DRAGGER=new Dt("blockDragger"),Dt.SERIALIZER=new Dt("serializer"),Dt.ICON=new Dt("icon"),Dt.PASTER=new Dt("paster");var xa={DEFAULT:Ya,TEST_ONLY:es};xa.Type=Dt,xa.getAllItems=m,xa.getClass=h,xa.getClassFromOptions=_,xa.getObject=d,xa.hasItem=u,xa.register=i,xa.unregister=o;var Lr=Object.create(null),Rc=Object.create(null),od,eh=null,ts,Es=[],Ah={defineBlocksWithJsonArrayInternal:te},qs={TEST_ONLY:Ah};qs.createBlockDefinitionsFromJsonArray=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,qs.defineBlocks=t.defineBlocks$$module$build$src$core$common,qs.defineBlocksWithJsonArray=J,qs.draggingConnections=Es,qs.getAllWorkspaces=E,qs.getBlockTypeCounts=H,qs.getMainWorkspace=A,qs.getParentContainer=D,qs.getSelected=k,qs.getWorkspaceById=v,qs.registerWorkspace=w,qs.setMainWorkspace=O,qs.setParentContainer=U,qs.setSelected=N,qs.svgResize=F,qs.unregisterWorkpace=x;var Yl="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",th={genUid:()=>{const r=Yl.length,a=[];for(let p=0;20>p;p++)a[p]=Yl.charAt(Math.random()*r);return a.join("")}},nh=0,sc={TEST_ONLY:th};sc.genUid=ie,sc.getNextUniqueId=re;var $o,Zs,ku,rh,Ka,Ou,ih,sh,uo,Fs,Lu,Cl,eo,Ja,Ca,Kl,ns,So,Ih,ad,Qa,Jl,ld,kc,Kp,$;$o="",Zs=!0,ku=0,t.CREATE$$module$build$src$core$events$utils="create",t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils="delete",t.DELETE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils="change",t.CHANGE$$module$build$src$core$events$utils,rh="block_field_intermediate_change",t.MOVE$$module$build$src$core$events$utils="move",t.MOVE$$module$build$src$core$events$utils,Ka="var_create",Ou="var_delete",ih="var_rename",sh="ui",uo="drag",Fs="selected",Lu="click",Cl="marker_move",eo="bubble_open",Ja="trashcan_open",Ca="toolbox_item_select",Kl="theme_change",ns="viewport_change",So="comment_create",Ih="comment_delete",ad="comment_change",Qa="comment_move",Jl="finished_loading",ld=[t.CREATE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,So,Qa],kc=[],Kp={FIRE_QUEUE:kc,fireNow:Ae,fireInternal:ge,setGroupInternal:le},$={BLOCK_CHANGE:t.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:t.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:t.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:uo,BLOCK_FIELD_INTERMEDIATE_CHANGE:rh,BLOCK_MOVE:t.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:eo,BUMP_EVENTS:ld,CHANGE:t.CHANGE$$module$build$src$core$events$utils,CLICK:Lu,COMMENT_CHANGE:ad,COMMENT_CREATE:So,COMMENT_DELETE:Ih,COMMENT_MOVE:Qa,CREATE:t.CREATE$$module$build$src$core$events$utils,DELETE:t.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:Jl,MARKER_MOVE:Cl,MOVE:t.MOVE$$module$build$src$core$events$utils,SELECTED:Fs,TEST_ONLY:Kp,THEME_CHANGE:Kl,TOOLBOX_ITEM_SELECT:Ca,TRASHCAN_OPEN:Ja,UI:sh,VAR_CREATE:Ka,VAR_DELETE:Ou,VAR_RENAME:ih,VIEWPORT_CHANGE:ns},$.clearPendingUndo=Z,$.disable=t.disable$$module$build$src$core$events$utils,$.disableOrphans=Xe,$.enable=t.enable$$module$build$src$core$events$utils,$.filter=j,$.fire=ue,$.fromJson=Oe,$.get=xe,$.getDescendantIds=_e,$.getGroup=t.getGroup$$module$build$src$core$events$utils,$.getRecordUndo=oe,$.isEnabled=ne,$.setGroup=t.setGroup$$module$build$src$core$events$utils,$.setRecordUndo=de;var c=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=oe()}toJson(){return{type:this.type,group:this.group}}static fromJson(r,a,p){return p.isBlank=!1,p.group=r.group||"",p.workspaceId=a.id,p}isNull(){return!1}run(r){}getEventWorkspace_(){let r;if(this.workspaceId&&(r=v(this.workspaceId)),!r)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return r}},f=class extends c{constructor(r){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof r>"u",this.workspaceId=r||""}},S=class extends f{constructor(r,a,p){a=r?r.workspace.id:a,a===null&&(a=void 0),super(a),this.type=Lu,this.blockId=r?r.id:void 0,this.targetType=p}toJson(){const r=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return r.targetType=this.targetType,r.blockId=this.blockId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new S),a.targetType=r.targetType,a.blockId=r.blockId,a}},M;(function(r){r.BLOCK="block",r.WORKSPACE="workspace",r.ZOOM_CONTROLS="zoom_controls"})(M||(M={})),i(Dt.EVENT,Lu,S);var L=750,G="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),se=null,we={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},je=0,_t={TOUCH_ENABLED:G,TOUCH_MAP:we};_t.checkTouchIdentifier=De,_t.clearTouchIdentifier=et,_t.getTouchIdentifierFromEvent=Qe,_t.longStart=Re,_t.longStop=Je,_t.shouldHandleEvent=at;var zt,Zt,hn,an,nn,br,ft,Ee,Ce,Ke;(function(r){function a(b){return p.indexOf(b.toUpperCase())!==-1}zt=r;const p=zt.toUpperCase();Zt=a("JavaFX"),hn=a("WebKit"),an=a("Gecko")&&!hn,nn=a("Android"),r=globalThis.navigator&&globalThis.navigator.maxTouchPoints,br=a("iPad")||a("Macintosh")&&0<r,ft=a("iPhone")&&!br,Ee=a("Macintosh"),Ce=br||nn&&!a("Mobile")||a("Silk"),Ke=!Ce&&(ft||nn)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Ot=zt,Kt=Zt,ln=an,fn=nn,kn=br,Wn=ft,fr=Ee,Ql=Ke,Sm={ANDROID:fn,GECKO:ln,IPAD:kn,IPHONE:Wn,JavaFx:Kt,MAC:fr,MOBILE:Ql,raw:Ot},Jp=40,Yn=125,ud={};ud.bind=Pe,ud.conditionalBind=Se,ud.getScrollDeltaPixels=ht,ud.isRightButton=wt,ud.isTargetInput=We,ud.mouseToSvg=xt,ud.unbind=rt;var a0={};a0.removeElem=St;var Du=class{constructor(r){this.name_=r}toString(){return this.name_}};Du.POSITIONABLE=new Du("positionable"),Du.DRAG_TARGET=new Du("drag_target"),Du.DELETE_AREA=new Du("delete_area"),Du.AUTOHIDEABLE=new Du("autohideable");var Ma=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(r,a){const p=r.component.id;if(!a&&this.componentData.has(p)){var b;throw Error('Plugin "'+p+'" with capabilities "'+((b=this.componentData.get(p))==null?void 0:b.capabilities)+'" already added.')}for(this.componentData.set(p,r),a=[],b=0;b<r.capabilities.length;b++){const R=String(r.capabilities[b]).toLowerCase();if(a.push(R),this.capabilityToComponentIds.has(R)){let W;(W=this.capabilityToComponentIds.get(R))==null||W.push(p)}else this.capabilityToComponentIds.set(R,[p])}this.componentData.get(p).capabilities=a}removeComponent(r){const a=this.componentData.get(r);if(a){for(let p=0;p<a.capabilities.length;p++){const b=String(a.capabilities[p]).toLowerCase();St(this.capabilityToComponentIds.get(b),r)}this.componentData.delete(r)}}addCapability(r,a){if(!this.getComponent(r))throw Error('Cannot add capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');if(this.hasCapability(r,a))console.warn('Plugin "'+r+'already has capability "'+a+'"');else{a=`${a}`.toLowerCase();var p;(p=this.componentData.get(r))==null||p.capabilities.push(a);var b;(b=this.capabilityToComponentIds.get(a))==null||b.push(r)}}removeCapability(r,a){if(!this.getComponent(r))throw Error('Cannot remove capability, "'+a+'". Plugin "'+r+'" has not been added to the ComponentManager');this.hasCapability(r,a)?(a=`${a}`.toLowerCase(),St(this.componentData.get(r).capabilities,a),St(this.capabilityToComponentIds.get(a),r)):console.warn('Plugin "'+r+`doesn't have capability "`+a+'" to remove')}hasCapability(r,a){return a=`${a}`.toLowerCase(),this.componentData.has(r)&&this.componentData.get(r).capabilities.indexOf(a)!==-1}getComponent(r){let a;return(a=this.componentData.get(r))==null?void 0:a.component}getComponents(r,a){if(r=`${r}`.toLowerCase(),r=this.capabilityToComponentIds.get(r),!r)return[];const p=[];if(a){const b=[];r.forEach(R=>{b.push(this.componentData.get(R))}),b.sort(function(R,W){return R.weight-W.weight}),b.forEach(function(R){p.push(R.component)})}else r.forEach(b=>{p.push(this.componentData.get(b).component)});return p}};Ma.Capability=Du;var zf=!1,cd=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyBlockDragSurface {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}
`,ql={};ql.inject=mt,ql.register=It;var tn=class{constructor(r,a){this.x=r,this.y=a}clone(){return new tn(this.x,this.y)}scale(r){return this.x*=r,this.y*=r,this}translate(r,a){return this.x+=r,this.y+=a,this}static equals(r,a){return r===a?!0:r&&a?r.x===a.x&&r.y===a.y:!1}static distance(r,a){const p=r.x-a.x;return r=r.y-a.y,Math.sqrt(p*p+r*r)}static magnitude(r){return Math.sqrt(r.x*r.x+r.y*r.y)}static difference(r,a){return new tn(r.x-a.x,r.y-a.y)}static sum(r,a){return new tn(r.x+a.x,r.y+a.y)}},o_=new Set,a_={};a_.warn=ve;var yg="http://www.w3.org/2000/svg",Oc="http://www.w3.org/1999/xhtml",$s="http://www.w3.org/1999/xlink",Qp;(function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE"})(Qp||(Qp={}));var zd=null,oh=0,ki=null,Aa={HTML_NS:Oc};Aa.NodeType=Qp,Aa.SVG_NS=yg,Aa.XLINK_NS=$s,Aa.addClass=ke,Aa.containsNode=Me,Aa.createSvgElement=ee,Aa.getFastTextWidth=Ve,Aa.getFastTextWidthWithSizeString=Pt,Aa.getTextWidth=$e,Aa.hasClass=$t,Aa.insertAfter=Ge,Aa.measureFontMetrics=Fe,Aa.removeClass=dt,Aa.removeClasses=ot,Aa.removeNode=ct,Aa.setCssTransform=X,Aa.startTextWidthCache=Q,Aa.stopTextWidthCache=ae;var Be=class{constructor(r){this.tagName=r}toString(){return this.tagName}};Be.ANIMATE=new Be("animate"),Be.CIRCLE=new Be("circle"),Be.CLIPPATH=new Be("clipPath"),Be.DEFS=new Be("defs"),Be.FECOMPOSITE=new Be("feComposite"),Be.FECOMPONENTTRANSFER=new Be("feComponentTransfer"),Be.FEFLOOD=new Be("feFlood"),Be.FEFUNCA=new Be("feFuncA"),Be.FEGAUSSIANBLUR=new Be("feGaussianBlur"),Be.FEPOINTLIGHT=new Be("fePointLight"),Be.FESPECULARLIGHTING=new Be("feSpecularLighting"),Be.FILTER=new Be("filter"),Be.FOREIGNOBJECT=new Be("foreignObject"),Be.G=new Be("g"),Be.IMAGE=new Be("image"),Be.LINE=new Be("line"),Be.PATH=new Be("path"),Be.PATTERN=new Be("pattern"),Be.POLYGON=new Be("polygon"),Be.RECT=new Be("rect"),Be.SVG=new Be("svg"),Be.TEXT=new Be("text"),Be.TSPAN=new Be("tspan");var vi=class{constructor(r,a,p,b){this.top=r,this.bottom=a,this.left=p,this.right=b}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(r,a){return r>=this.left&&r<=this.right&&a>=this.top&&a<=this.bottom}intersects(r){return!(this.left>r.right||this.right<r.left||this.top>r.bottom||this.bottom<r.top)}},Ss=class{constructor(r,a){this.width=r,this.height=a}static equals(r,a){return r===a?!0:r&&a?r.width===a.width&&r.height===a.height:!1}},kv={getSizeInternal:lt},hd={TEST_ONLY:kv};hd.getBorderBox=cr,hd.getComputedStyle=Ft,hd.getContainerOffsetToScrollInto=sr,hd.getPageOffset=Tn,hd.getSize=Wt,hd.getViewportPageOffset=Er,hd.scrollIntoContainerView=Gr;var wm=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,bg=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Ov={XY_REGEX:wm,XY_STYLE_REGEX:bg},Hf={TEST_ONLY:Ov};Hf.getDocumentScroll=Ne,Hf.getInjectionDivXY=q,Hf.getRelativeXY=Xn,Hf.getViewportBBox=me,Hf.screenToWsCoordinates=nt,Hf.wsToScreenCoordinates=Rt;var Fo=class{constructor(r,a,p,b,R){this.workspace=r,this.horizontal=a,this.oldHostMetrics=null,this.ratio=1,this.origin=new tn(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new tn(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=p||!1,this.margin=R!==void 0?R:Fo.DEFAULT_SCROLLBAR_MARGIN,r="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),b&&(r+=" "+b),this.outerSvg=ee(Be.SVG,{class:r}),b=ee(Be.G,{},this.outerSvg),this.svgBackground=ee(Be.RECT,{class:"blocklyScrollbarBackground"},b),r=Math.floor((Fo.scrollbarThickness-5)/2),this.svgHandle=ee(Be.RECT,{class:"blocklyScrollbarHandle",rx:r,ry:r},b),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),Ge(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),a?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Se(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=Se(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const r=Fo.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(r)),this.outerSvg.setAttribute("height",String(r)),this.svgHandle.setAttribute("height",String(r-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(r)),this.outerSvg.setAttribute("width",String(r)),this.svgHandle.setAttribute("width",String(r-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),rt(this.onMouseDownBarWrapper_),rt(this.onMouseDownHandleWrapper_),ct(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength)}setHandleLength(r){this.handleLength=r,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(r){return r=0>=r||isNaN(r)?0:Math.min(r,this.scrollbarLength-this.handleLength)}setHandlePosition(r){this.handlePosition=r,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(r){this.scrollbarLength=r,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(r,a){this.position.x=r,this.position.y=a,X(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(r){!r&&(r=this.workspace.getMetrics(),!r)||this.oldHostMetrics&&Fo.metricsAreEquivalent(r,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(r):this.resizeVertical(r),this.oldHostMetrics=r,this.updateMetrics())}requiresViewResize(r){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==r.viewWidth||this.oldHostMetrics.viewHeight!==r.viewHeight||this.oldHostMetrics.absoluteLeft!==r.absoluteLeft||this.oldHostMetrics.absoluteTop!==r.absoluteTop:!0}resizeHorizontal(r){this.requiresViewResize(r)?this.resizeViewHorizontal(r):this.resizeContentHorizontal(r)}resizeViewHorizontal(r){var a=r.viewWidth-2*this.margin;this.pair&&(a-=Fo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),a=r.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(a+=Fo.scrollbarThickness),this.setPosition(a,r.absoluteTop+r.viewHeight-Fo.scrollbarThickness-this.margin),this.resizeContentHorizontal(r)}resizeContentHorizontal(r){if(r.viewWidth>=r.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewWidth/r.scrollWidth;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollWidth-r.viewWidth;var p=this.scrollbarLength-this.handleLength;r=(r.viewLeft-r.scrollLeft)/a*p,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=p/a}}resizeVertical(r){this.requiresViewResize(r)?this.resizeViewVertical(r):this.resizeContentVertical(r)}resizeViewVertical(r){let a=r.viewHeight-2*this.margin;this.pair&&(a-=Fo.scrollbarThickness),this.setScrollbarLength(Math.max(0,a)),this.setPosition(this.workspace.RTL?r.absoluteLeft+this.margin:r.absoluteLeft+r.viewWidth-Fo.scrollbarThickness-this.margin,r.absoluteTop+this.margin),this.resizeContentVertical(r)}resizeContentVertical(r){if(r.viewHeight>=r.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var a=this.scrollbarLength*r.viewHeight/r.scrollHeight;a=this.constrainHandleLength(a),this.setHandleLength(a),a=r.scrollHeight-r.viewHeight;var p=this.scrollbarLength-this.handleLength;r=(r.viewTop-r.scrollTop)/a*p,r=this.constrainHandlePosition(r),this.setHandlePosition(r),this.ratio=p/a}}isVisible(){return this.isHandleVisible}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay_()}setVisible(r){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(r)}setVisibleInternal(r){const a=r!==this.isVisible();this.isHandleVisible=r,a&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(r){if(this.workspace.markFocused(),et(),this.cleanUp(),wt(r))r.stopPropagation();else{var a=xt(r,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());a=this.horizontal?a.x:a.y;var p=q(this.svgHandle);p=this.horizontal?p.x:p.y;var b=this.handlePosition,R=.95*this.handleLength;a<=p?b-=R:a>=p+this.handleLength&&(b+=R),this.setHandlePosition(this.constrainHandlePosition(b)),this.updateMetrics(),r.stopPropagation(),r.preventDefault()}}onMouseDownHandle(r){this.workspace.markFocused(),this.cleanUp(),wt(r)?r.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?r.clientX:r.clientY,this.onMouseUpWrapper_=Se(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=Se(document,"pointermove",this,this.onMouseMoveHandle),r.stopPropagation(),r.preventDefault())}onMouseMoveHandle(r){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?r.clientX:r.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){et(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(rt(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(rt(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let r=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(r)&&(r=0),r}updateMetrics(){const r=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:r}):this.workspace.setMetrics({y:r})}set(r,a){this.setHandlePosition(this.constrainHandlePosition(r*this.ratio)),(a||a===void 0)&&this.updateMetrics()}setOrigin(r,a){this.origin=new tn(r,a)}static metricsAreEquivalent(r,a){return r.viewWidth===a.viewWidth&&r.viewHeight===a.viewHeight&&r.viewLeft===a.viewLeft&&r.viewTop===a.viewTop&&r.absoluteTop===a.absoluteTop&&r.absoluteLeft===a.absoluteLeft&&r.scrollWidth===a.scrollWidth&&r.scrollHeight===a.scrollHeight&&r.scrollLeft===a.scrollLeft&&r.scrollTop===a.scrollTop}};Fo.scrollbarThickness=G?25:15,Fo.DEFAULT_SCROLLBAR_MARGIN=.5;var l0={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Tg={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:xm,DOMParser:Ia,XMLSerializer:Nu}=globalThis;Ia&&(l0=new Ia),Nu&&(Tg=new Nu);var vp="https://developers.google.com/blockly/xml",Eg=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,qp={NAME_SPACE:vp};qp.createElement=t.createElement$$module$build$src$core$utils$xml,qp.createTextNode=t.createTextNode$$module$build$src$core$utils$xml,qp.domToText=gn,qp.injectDependencies=Qt,qp.textToDom=t.textToDom$$module$build$src$core$utils$xml;var ah="categoryToolbox",l_="flyoutToolbox",Kn;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(Kn||(Kn={}));var Lv={hasCategoriesInternal:xn},Zl={};Zl.Position=Kn,Zl.TEST_ONLY=Lv,Zl.convertFlyoutDefToJsonArray=pt,Zl.convertToolboxDefToJson=st,Zl.hasCategories=Bt,Zl.isCategoryCollapsible=Bn,Zl.parseToolboxTree=$r;var oc;(function(r){r[r.TOP=0]="TOP",r[r.BOTTOM=1]="BOTTOM"})(oc||(oc={}));var Cm;(function(r){r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"})(Cm||(Cm={}));var yp;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN"})(yp||(yp={}));var Mm={};Mm.bumpDirection=yp,Mm.bumpPositionRect=jo,Mm.getCornerOppositeToolbox=Wi,Mm.getStartPositionRect=Ar,Mm.horizontalPosition=Cm,Mm.verticalPosition=oc;var eu={width:96,height:124,url:"sprites.png"},u_=class{constructor(r){this.workspace=r,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=ee(Be.G,{});const r=String(Math.random()).substring(2);return this.createZoomOutSvg(r),this.createZoomInSvg(r),this.workspace.isMovable()&&this.createZoomResetSvg(r),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ma.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ct(this.svgGroup);for(const r of this.boundEvents)rt(r);this.boundEvents.length=0}getBoundingRectangle(){let r=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(r+=this.LARGE_SPACING+this.HEIGHT),new vi(this.top,this.top+r,this.left,this.left+this.WIDTH)}position(r,a){if(this.initialized){var p=Wi(this.workspace,r),b=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(b+=this.LARGE_SPACING+this.HEIGHT),r=Ar(p,new Ss(this.WIDTH,b),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,r,this.workspace),p=p.vertical,a=jo(r,this.MARGIN_VERTICAL,p===oc.TOP?yp.DOWN:yp.UP,a),p===oc.TOP){var R=this.SMALL_SPACING+this.HEIGHT,W;(W=this.zoomInGroup)==null||W.setAttribute("transform","translate(0, "+R+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(R+this.LARGE_SPACING+this.HEIGHT)+")")}else{W=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let Le;(Le=this.zoomInGroup)==null||Le.setAttribute("transform","translate(0, "+W+")"),W=W+this.SMALL_SPACING+this.HEIGHT,(R=this.zoomOutGroup)==null||R.setAttribute("transform","translate(0, "+W+")")}this.top=a.top,this.left=a.left;var pe;(pe=this.svgGroup)==null||pe.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(r){this.zoomOutGroup=ee(Be.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const a=ee(Be.CLIPPATH,{id:"blocklyZoomoutClipPath"+r},this.zoomOutGroup);ee(Be.RECT,{width:32,height:32},a),ee(Be.IMAGE,{width:eu.width,height:eu.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+r+")"},this.zoomOutGroup).setAttributeNS($s,"xlink:href",this.workspace.options.pathToMedia+eu.url),this.boundEvents.push(Se(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(r){this.zoomInGroup=ee(Be.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const a=ee(Be.CLIPPATH,{id:"blocklyZoominClipPath"+r},this.zoomInGroup);ee(Be.RECT,{width:32,height:32},a),ee(Be.IMAGE,{width:eu.width,height:eu.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+r+")"},this.zoomInGroup).setAttributeNS($s,"xlink:href",this.workspace.options.pathToMedia+eu.url),this.boundEvents.push(Se(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(r,a){this.workspace.markFocused(),this.workspace.zoomCenter(r),this.fireZoomEvent(),et(),a.stopPropagation(),a.preventDefault()}createZoomResetSvg(r){this.zoomResetGroup=ee(Be.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const a=ee(Be.CLIPPATH,{id:"blocklyZoomresetClipPath"+r},this.zoomResetGroup);ee(Be.RECT,{width:32,height:32},a),ee(Be.IMAGE,{width:eu.width,height:eu.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+r+")"},this.zoomResetGroup).setAttributeNS($s,"xlink:href",this.workspace.options.pathToMedia+eu.url),this.boundEvents.push(Se(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(r){this.workspace.markFocused();const a=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(a),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),et(),r.stopPropagation(),r.preventDefault()}fireZoomEvent(){const r=new(xe(Lu))(null,this.workspace.id,"zoom_controls");ue(r)}};It(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var co=class{constructor(r){this.name=r}toString(){return this.name}equals(r){return this.name===r.toString()}};co.MUTATOR=new co("mutator"),co.WARNING=new co("warning"),co.COMMENT=new co("comment"),function(r){r[r.VALUE=1]="VALUE",r[r.STATEMENT=3]="STATEMENT",r[r.DUMMY=5]="DUMMY",r[r.CUSTOM=6]="CUSTOM",r[r.END_ROW=7]="END_ROW"}(t.inputTypes$$module$build$src$core$inputs$input_types||(t.inputTypes$$module$build$src$core$inputs$input_types={})),t.inputTypes$$module$build$src$core$inputs$input_types;var Ci=function(r,a){window.alert(r),a&&a()},Ml=function(r,a){a(window.confirm(r))},Ra=function(r,a,p){p(window.prompt(r,a))},tu={confirmInternal:hr},Al={TEST_ONLY:tu};Al.alert=Ro,Al.confirm=Yt,Al.prompt=Xo,Al.setAlert=ll,Al.setConfirm=fa,Al.setPrompt=ps;var Gf,qa;t.Msg$$module$build$src$core$msg=Object.create(null),Gf=function(r){Object.keys(r).forEach(function(a){t.Msg$$module$build$src$core$msg[a]=r[a]})},qa={Msg:t.Msg$$module$build$src$core$msg,setLocale:Gf};var bp=class extends c{constructor(r){super(),this.isBlank=typeof r>"u",r&&(this.varId=r.getId(),this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return r.varId=this.varId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new bp),a.varId=r.varId,a}},Tp=class extends bp{constructor(r){super(r),this.type=Ka,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Tp),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)}};i(Dt.EVENT,Ka,Tp);var Zp=class{constructor(r,a,p,b){this.workspace=r,this.name=a,this.type=p||"",this.id_=b||ie()}getId(){return this.id_}static compareByName(r,a){return r.name.localeCompare(a.name,void 0,{sensitivity:"base"})}},u0="VARIABLE",Am="ijkmnopqrstuvwxyzabcdefgh",Lc={generateUniqueNameInternal:er},Za={CATEGORY_NAME:u0,TEST_ONLY:Lc,VAR_LETTER_OPTIONS:Am};Za.allDeveloperVariables=t.allDeveloperVariables$$module$build$src$core$variables,Za.allUsedVarModels=t.allUsedVarModels$$module$build$src$core$variables,Za.createVariableButtonHandler=Qi,Za.flyoutCategory=pn,Za.flyoutCategoryBlocks=ar,Za.generateUniqueName=wr,Za.generateUniqueNameFromOptions=hi,Za.generateVariableFieldDom=Rs,Za.getAddedVariables=uu,Za.getOrCreateVariablePackage=t.getOrCreateVariablePackage$$module$build$src$core$variables,Za.getVariable=t.getVariable$$module$build$src$core$variables,Za.nameUsedWithAnyType=Pa,Za.nameUsedWithConflictingParam=ul,Za.promptName=jr,Za.renameVariable=t.renameVariable$$module$build$src$core$variables;var Dc=class{constructor(r,a,p,b,R){this.workspace=r,this.editable=this.movable=this.deletable=!0,this.disposed_=!1,this.isComment=!0,this.id=R&&!r.getCommentById(R)?R:ie(),r.addTopComment(this),this.xy_=new tn(0,0),this.height_=p,this.width_=b,this.RTL=r.RTL,this.content_=a,Dc.fireCreateEvent(this)}dispose(){this.disposed_||(ne()&&ue(new(xe(Ih))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)}getHeight(){return this.height_}setHeight(r){this.height_=r}getWidth(){return this.width_}setWidth(r){this.width_=r}getRelativeToSurfaceXY(){return new tn(this.xy_.x,this.xy_.y)}moveBy(r,a){const p=new(xe(Qa))(this);this.xy_.translate(r,a),p.recordNew(),ue(p)}isDeletable(){return this.deletable&&!(this.workspace&&this.workspace.options.readOnly)}setDeletable(r){this.deletable=r}isMovable(){return this.movable&&!(this.workspace&&this.workspace.options.readOnly)}setMovable(r){this.movable=r}isEditable(){return this.editable&&!(this.workspace&&this.workspace.options.readOnly)}setEditable(r){this.editable=r}getContent(){return this.content_}setContent(r){this.content_!==r&&(ue(new(xe(ad))(this,this.content_,r)),this.content_=r)}toXmlWithXY(r){return r=this.toXml(r),r.setAttribute("x",String(Math.round(this.xy_.x))),r.setAttribute("y",String(Math.round(this.xy_.y))),r.setAttribute("h",String(this.height_)),r.setAttribute("w",String(this.width_)),r}toXml(r){const a=t.createElement$$module$build$src$core$utils$xml("comment");return r||(a.id=this.id),a.textContent=this.getContent(),a}static fireCreateEvent(r){if(ne()){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);try{ue(new(xe(So))(r))}finally{t.setGroup$$module$build$src$core$events$utils(a)}}}static fromXml(r,a){var p=Dc.parseAttributes(r);return a=new Dc(a,p.content,p.h,p.w,p.id),p=r.getAttribute("x"),r=r.getAttribute("y"),p=p?parseInt(p,10):NaN,r=r?parseInt(r,10):NaN,isNaN(p)||isNaN(r)||a.moveBy(p,r),Dc.fireCreateEvent(a),a}static parseAttributes(r){const a=r.getAttribute("h"),p=r.getAttribute("w"),b=r.getAttribute("x"),R=r.getAttribute("y"),W=r.getAttribute("id");if(!W)throw Error("No ID present in XML comment definition.");let pe;return{id:W,h:a?parseInt(a):100,w:p?parseInt(p):100,x:b?parseInt(b):NaN,y:R?parseInt(R):NaN,content:(pe=r.textContent)!=null?pe:""}}},Hd=class extends f{constructor(r,a,p){super(p),this.type=Fs,this.oldElementId=r??void 0,this.newElementId=a??void 0}toJson(){const r=super.toJson();return r.oldElementId=this.oldElementId,r.newElementId=this.newElementId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Hd),a.oldElementId=r.oldElementId,a.newElementId=r.newElementId,a}};i(Dt.EVENT,Fs,Hd);var $g={};$g.register=Pl,$g.unregister=mh;var Sg=class{paste(r,a,p){const b=r.commentState;if(p)b.setAttribute("x",`${p.x}`),b.setAttribute("y",`${p.y}`);else{var R;p=parseInt((R=b.getAttribute("x"))!=null?R:"0")+50;let W;R=parseInt((W=b.getAttribute("y"))!=null?W:"0")+50,b.setAttribute("x",`${p}`),b.setAttribute("y",`${R}`)}return el.fromXmlRendered(r.commentState,a)}};Sg.TYPE="workspace-comment",Pl(Sg.TYPE,new Sg);var Us=8,Im=3,Il=2,el=class extends Dc{constructor(r,a,p,b,R){super(r,a,p,b,R),this.onMouseMoveWrapper=this.onMouseUpWrapper=null,this.eventsInit=!1,this.deleteIconBorder=this.deleteGroup=this.resizeGroup=this.foreignObject=this.svgHandleTarget=this.svgRectTarget=this.textarea=null,this.rendered=this.autoLayout=this.focused=!1,this.svgGroup=ee(Be.G,{class:"blocklyComment"}),this.workspace=r,this.svgRect_=ee(Be.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Im,ry:Im}),this.svgGroup.appendChild(this.svgRect_),this.render()}dispose(){this.disposed_||(k()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),ne()&&ue(new(xe(Ih))(this)),ct(this.svgGroup),t.disable$$module$build$src$core$events$utils(),super.dispose(),t.enable$$module$build$src$core$events$utils())}initSvg(r){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit||(Se(this.svgRectTarget,"pointerdown",this,this.pathMouseDown),Se(this.svgHandleTarget,"pointerdown",this,this.pathMouseDown)),this.eventsInit=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!r&&this.textarea&&this.textarea.select()}pathMouseDown(r){const a=this.workspace.getGesture(r);a&&a.handleBubbleStart(r,this)}showContextMenu(r){throw Error("The implementation of showContextMenu should be monkey-patched in by blockly.ts")}select(){if(k()!==this){var r=null;if(k()){r=k().id,t.disable$$module$build$src$core$events$utils();try{k().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(xe(Fs))(r,this.id,this.workspace.id),ue(r),N(this),this.addSelect()}}unselect(){if(k()===this){var r=new(xe(Fs))(this.id,null,this.workspace.id);ue(r),N(null),this.removeSelect(),this.blurFocus()}}addSelect(){ke(this.svgGroup,"blocklySelected"),this.setFocus()}removeSelect(){ke(this.svgGroup,"blocklySelected"),this.blurFocus()}addFocus(){ke(this.svgGroup,"blocklyFocused")}removeFocus(){dt(this.svgGroup,"blocklyFocused")}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,b=this.getSvgRoot();if(b)do{const R=Xn(b);a+=R.x,p+=R.y,b=b.parentNode}while(b&&!r.hasLayer(b)&&b!==null);return this.xy_=new tn(a,p)}moveBy(r,a){const p=new(xe(Qa))(this),b=this.getRelativeToSurfaceXY();this.translate(b.x+r,b.y+a),this.xy_=new tn(b.x+r,b.y+a),p.recordNew(),ue(p),this.workspace.resizeContents()}translate(r,a){this.xy_=new tn(r,a),this.getSvgRoot().setAttribute("transform","translate("+r+","+a+")")}moveDuringDrag(r){r=`translate(${r.x}, ${r.y})`,this.getSvgRoot().setAttribute("transform",r)}moveTo(r,a){this.translate(r,a)}clearTransformAttributes(){this.getSvgRoot().removeAttribute("transform")}getBoundingRectangle(){var r=this.getRelativeToSurfaceXY();const a=this.getHeightWidth(),p=r.y,b=r.y+a.height;let R;return this.RTL?(R=r.x-a.width,r=r.x):(R=r.x,r=r.x+a.width),new vi(p,b,R,r)}updateMovable(){this.isMovable()?ke(this.svgGroup,"blocklyDraggable"):dt(this.svgGroup,"blocklyDraggable")}setMovable(r){super.setMovable(r),this.updateMovable()}setEditable(r){super.setEditable(r),this.textarea&&(this.textarea.readOnly=!r)}setDragging(r){r?ke(this.getSvgRoot(),"blocklyDragging"):dt(this.getSvgRoot(),"blocklyDragging")}getSvgRoot(){return this.svgGroup}getContent(){return this.textarea?this.textarea.value:this.content_}setContent(r){super.setContent(r),this.textarea&&(this.textarea.value=r)}setDeleteStyle(r){r?ke(this.svgGroup,"blocklyDraggingDelete"):dt(this.svgGroup,"blocklyDraggingDelete")}setAutoLayout(r){}toXmlWithXY(r){let a=0;this.workspace.RTL&&(a=this.workspace.getWidth()),r=this.toXml(r);const p=this.getRelativeToSurfaceXY();return r.setAttribute("x",String(Math.round(this.workspace.RTL?a-p.x:p.x))),r.setAttribute("y",String(Math.round(p.y))),r.setAttribute("h",String(this.getHeight())),r.setAttribute("w",String(this.getWidth())),r}toCopyData(){return{paster:Sg.TYPE,commentState:this.toXmlWithXY()}}getHeightWidth(){return{width:this.getWidth(),height:this.getHeight()}}render(){if(!this.rendered){var r=this.getHeightWidth(),a=this.createEditor();this.svgGroup.appendChild(a),this.svgHandleTarget=ee(Be.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup.appendChild(this.svgHandleTarget),this.svgRectTarget=ee(Be.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:Im,ry:Im}),this.svgGroup.appendChild(this.svgRectTarget),this.addResizeDom(),this.isDeletable()&&this.addDeleteDom(),this.setSize(r.width,r.height),this.textarea.value=this.content_,this.rendered=!0,this.resizeGroup&&Se(this.resizeGroup,"pointerdown",this,this.resizeMouseDown),this.isDeletable()&&(Se(this.deleteGroup,"pointerdown",this,this.deleteMouseDown),Se(this.deleteGroup,"pointerout",this,this.deleteMouseOut),Se(this.deleteGroup,"pointerup",this,this.deleteMouseUp))}}createEditor(){this.foreignObject=ee(Be.FOREIGNOBJECT,{x:0,y:el.TOP_OFFSET,class:"blocklyCommentForeignObject"});const r=document.createElementNS(Oc,"body");r.setAttribute("xmlns",Oc),r.className="blocklyMinimalBody";const a=document.createElementNS(Oc,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.RTL?"RTL":"LTR"),a.readOnly=!this.isEditable(),r.appendChild(a),this.textarea=a,this.foreignObject.appendChild(r),Se(a,"wheel",this,function(p){p.stopPropagation()}),Se(a,"change",this,function(p){this.setContent(a.value)}),this.foreignObject}addResizeDom(){this.resizeGroup=ee(Be.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup),ee(Be.POLYGON,{points:`0,${Us} ${Us},${Us} ${Us},0`},this.resizeGroup),ee(Be.LINE,{class:"blocklyResizeLine",x1:Us/3,y1:Us-1,x2:Us-1,y2:Us/3},this.resizeGroup),ee(Be.LINE,{class:"blocklyResizeLine",x1:2*Us/3,y1:Us-1,x2:Us-1,y2:2*Us/3},this.resizeGroup)}addDeleteDom(){this.deleteGroup=ee(Be.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup),this.deleteIconBorder=ee(Be.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup),ee(Be.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup),ee(Be.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup)}resizeMouseDown(r){this.unbindDragEvents(),wt(r)||(this.workspace.startDrag(r,new tn(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper=Se(document,"pointerup",this,this.resizeMouseUp),this.onMouseMoveWrapper=Se(document,"pointermove",this,this.resizeMouseMove),this.workspace.hideChaff()),r.stopPropagation()}deleteMouseDown(r){this.deleteIconBorder&&ke(this.deleteIconBorder,"blocklyDeleteIconHighlighted"),r.stopPropagation()}deleteMouseOut(r){this.deleteIconBorder&&dt(this.deleteIconBorder,"blocklyDeleteIconHighlighted")}deleteMouseUp(r){this.dispose(),r.stopPropagation()}unbindDragEvents(){this.onMouseUpWrapper&&(rt(this.onMouseUpWrapper),this.onMouseUpWrapper=null),this.onMouseMoveWrapper&&(rt(this.onMouseMoveWrapper),this.onMouseMoveWrapper=null)}resizeMouseUp(r){et(),this.unbindDragEvents()}resizeMouseMove(r){this.autoLayout=!1,r=this.workspace.moveDrag(r),this.setSize(this.RTL?-r.x:r.x,r.y)}resizeComment(){const r=this.getHeightWidth(),a=el.TOP_OFFSET,p=2*Il;let b;(b=this.foreignObject)==null||b.setAttribute("width",String(r.width));let R;if((R=this.foreignObject)==null||R.setAttribute("height",String(r.height-a)),this.RTL){let W;(W=this.foreignObject)==null||W.setAttribute("x",String(-r.width))}this.textarea&&(this.textarea.style.width=r.width-p+"px",this.textarea.style.height=r.height-p-a+"px")}setSize(r,a){r=Math.max(r,45),a=Math.max(a,20+el.TOP_OFFSET),this.width_=r,this.height_=a,this.svgRect_.setAttribute("width",`${r}`),this.svgRect_.setAttribute("height",`${a}`);let p;(p=this.svgRectTarget)==null||p.setAttribute("width",`${r}`);let b;(b=this.svgRectTarget)==null||b.setAttribute("height",`${a}`);let R;(R=this.svgHandleTarget)==null||R.setAttribute("width",`${r}`);let W;if((W=this.svgHandleTarget)==null||W.setAttribute("height",String(el.TOP_OFFSET)),this.RTL){this.svgRect_.setAttribute("transform","scale(-1 1)");let pe;(pe=this.svgRectTarget)==null||pe.setAttribute("transform","scale(-1 1)")}if(this.resizeGroup)if(this.RTL){this.resizeGroup.setAttribute("transform","translate("+(-r+Us)+","+(a-Us)+") scale(-1 1)");let pe;(pe=this.deleteGroup)==null||pe.setAttribute("transform","translate("+(-r+Us)+","+-Us+") scale(-1 1)")}else{this.resizeGroup.setAttribute("transform","translate("+(r-Us)+","+(a-Us)+")");let pe;(pe=this.deleteGroup)==null||pe.setAttribute("transform","translate("+(r-Us)+","+-Us+")")}this.resizeComment()}setFocus(){this.focused=!0,setTimeout(()=>{this.disposed_||(this.textarea.focus(),this.addFocus(),this.svgRectTarget&&ke(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&ke(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}blurFocus(){this.focused=!1,setTimeout(()=>{this.disposed_||(this.textarea.blur(),this.removeFocus(),this.svgRectTarget&&dt(this.svgRectTarget,"blocklyCommentTargetFocused"),this.svgHandleTarget&&dt(this.svgHandleTarget,"blocklyCommentHandleTargetFocused"))},0)}static fromXmlRendered(r,a,p){t.disable$$module$build$src$core$events$utils();let b;try{const R=Dc.parseAttributes(r);if(b=new el(a,R.content,R.h,R.w,R.id),a.rendered&&(b.initSvg(!0),b.render()),!isNaN(R.x)&&!isNaN(R.y))if(a.RTL){const W=p||a.getWidth();b.moveBy(W-R.x,R.y)}else b.moveBy(R.x,R.y)}finally{t.enable$$module$build$src$core$events$utils()}return Dc.fireCreateEvent(b),b}};el.DEFAULT_SIZE=100,el.TOP_OFFSET=10,It(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var Wf=new Set,c0=new WeakSet,Ep=null,wg=null,ac=0,Gd={};Gd.finishQueuedRenders=tr,Gd.queueRender=Yo,Gd.triggerQueuedRenders=Pi;var wo={};wo.appendDomToWorkspace=Rd,wo.blockToDom=ma,wo.blockToDomWithXY=Qn,wo.clearWorkspaceAndLoadFromXml=fl,wo.deleteNext=Jo,wo.domToBlock=t.domToBlock$$module$build$src$core$xml,wo.domToBlockInternal=ks,wo.domToPrettyText=Fi,wo.domToText=Ei,wo.domToVariables=hu,wo.domToWorkspace=t.domToWorkspace$$module$build$src$core$xml,wo.variablesToDom=Jn,wo.workspaceToDom=dl;var ka=class extends Error{},Dv=class extends ka{constructor(r){super("Expected to find a 'type' property, defining the block type"),this.state=r}},Rm=class extends ka{constructor(r,a,p){super(`The block ${a.toDevString()} is missing a(n) ${r}
connection`),this.block=a,this.state=p}},c_=class extends ka{constructor(r,a,p,b){super(`The block ${p.toDevString()} could not connect its
${a} to its parent, because: ${r}`),this.childBlock=p,this.childState=b}},wb=class extends ka{constructor(r){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=r}},ef=class extends ka{constructor(r,a,p){super(`Cannot add an icon of type '${r}' to the block ${a.toDevString()}, because there is no icon registered with type '${r}'. Make sure that all of your icons have been registered.`),this.block=a,this.state=p}},Vf={};Vf.BadConnectionCheck=c_,Vf.DeserializationError=ka,Vf.MissingBlockType=Dv,Vf.MissingConnection=Rm,Vf.RealChildOfShadow=wb,Vf.UnregisteredIcon=ef;var h_=100,jf=75,d_=50,km={BLOCKS:d_,PROCEDURES:jf,VARIABLES:h_},p_={};p_.register=ms,p_.unregister=Ai;var Nv=class{constructor(){this.priority=d_}save(r){const a=[];for(const p of r.getTopBlocks(!1))(r=ti(p,{addCoordinates:!0,doFullSerialization:!1}))&&a.push(r);return a.length?{languageVersion:0,blocks:a}:null}load(r,a){r=r.blocks;for(const p of r)Un(p,a,{recordUndo:oe()})}clear(r){for(const a of r.getTopBlocks(!1))a.dispose(!1)}};ms("blocks",new Nv);var Om={};Om.BlockSerializer=Nv,Om.append=Un,Om.appendInternal=Kr,Om.save=ti;var $p=class extends c{constructor(r){super(),this.isBlank=!r,r&&(this.blockId=r.id,this.workspaceId=r.workspace.id)}toJson(){const r=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.blockId=this.blockId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new $p),a.blockId=r.blockId,a}},Bv=class extends $p{constructor(r){super(r),this.type=t.CREATE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),this.xml=Qn(r),this.ids=_e(r),this.json=ti(r,{addCoordinates:!0}))}toJson(){const r=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.xml=Ei(this.xml),r.ids=this.ids,r.json=this.json,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Bv),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a.ids=r.ids,a.json=r.json,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!fE(a,this.ids))if(r)Un(this.json,a);else for(r=0;r<this.ids.length;r++){const p=this.ids[r],b=a.getBlockById(p);b?b.dispose(!1):p===this.blockId&&console.warn("Can't uncreate non-existent block: "+p)}}},fE=function(r,a){return a.map(p=>r.getBlockById(p)).filter(p=>p&&p.isShadow()).length===a.length};i(Dt.EVENT,t.CREATE$$module$build$src$core$events$utils,Bv);var f_=class extends f{constructor(r,a){super(a),this.type=Kl,this.themeName=r}toJson(){const r=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return r.themeName=this.themeName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new f_),a.themeName=r.themeName,a}};i(Dt.EVENT,Kl,f_);var m_=class extends f{constructor(r,a,p,b,R){super(b),this.type=ns,this.viewTop=r,this.viewLeft=a,this.scale=p,this.oldScale=R}toJson(){const r=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return r.viewTop=this.viewTop,r.viewLeft=this.viewLeft,r.scale=this.scale,r.oldScale=this.oldScale,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new m_),a.viewTop=r.viewTop,a.viewLeft=r.viewLeft,a.scale=r.scale,a.oldScale=r.oldScale,a}};i(Dt.EVENT,ns,m_);var tf;tf=28,t.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:tf,connectingSnapRadius:tf,currentConnectionPreference:8,bumpDelay:250},t.config$$module$build$src$core$config;var En;(function(r){r[r.INPUT_VALUE=1]="INPUT_VALUE",r[r.OUTPUT_VALUE=2]="OUTPUT_VALUE",r[r.NEXT_STATEMENT=3]="NEXT_STATEMENT",r[r.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(En||(En={}));var Rh=class{constructor(r){this.connectionChecker=r,this.connections=[]}addConnection(r,a){a=this.calculateIndexForYPos(a),this.connections.splice(a,0,r)}findIndexOfConnection(r,a){if(!this.connections.length)return-1;const p=this.calculateIndexForYPos(a);if(p>=this.connections.length)return-1;a=r.y;let b=p;for(;0<=b&&this.connections[b].y===a;){if(this.connections[b]===r)return b;b--}for(b=p;b<this.connections.length&&this.connections[b].y===a;){if(this.connections[b]===r)return b;b++}return-1}calculateIndexForYPos(r){if(!this.connections.length)return 0;let a=0,p=this.connections.length;for(;a<p;){const b=Math.floor((a+p)/2);if(this.connections[b].y<r)a=b+1;else if(this.connections[b].y>r)p=b;else{a=b;break}}return a}removeConnection(r,a){if(r=this.findIndexOfConnection(r,a),r===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(r,1)}getNeighbours(r,a){function p($n){const zo=R-b[$n].x,Mo=W-b[$n].y;return Math.sqrt(zo*zo+Mo*Mo)<=a&&Nt.push(b[$n]),Mo<a}const b=this.connections,R=r.x,W=r.y;r=0;let pe=b.length-2,Le=pe;for(;r<Le;)b[Le].y<W?r=Le:pe=Le,Le=Math.floor((r+pe)/2);const Nt=[];if(pe=r=Le,b.length){for(;0<=r&&p(r);)r--;do pe++;while(pe<b.length&&p(pe))}return Nt}isInYRange(r,a,p){return Math.abs(this.connections[r].y-a)<=p}searchForClosest(r,a,p){if(!this.connections.length)return{connection:null,radius:a};const b=r.y,R=r.x;r.x=R+p.x,r.y=b+p.y;var W=this.calculateIndexForYPos(r.y);p=null;let pe=a,Le,Nt=W-1;for(;0<=Nt&&this.isInYRange(Nt,r.y,a);)Le=this.connections[Nt],this.connectionChecker.canConnect(r,Le,!0,pe)&&(p=Le,pe=Le.distanceFrom(r)),Nt--;for(;W<this.connections.length&&this.isInYRange(W,r.y,a);)Le=this.connections[W],this.connectionChecker.canConnect(r,Le,!0,pe)&&(p=Le,pe=Le.distanceFrom(r)),W++;return r.x=R,r.y=b,{connection:p,radius:pe}}static init(r){const a=[];return a[En.INPUT_VALUE]=new Rh(r),a[En.OUTPUT_VALUE]=new Rh(r),a[En.NEXT_STATEMENT]=new Rh(r),a[En.PREVIOUS_STATEMENT]=new Rh(r),a}},Lm=class{paste(r,a,p){if(!a.isCapacityAvailable(r.typeCounts))return null;p&&(r.blockState.x=p.x,r.blockState.y=p.y),t.disable$$module$build$src$core$events$utils();let b;try{b=Un(r.blockState,a),pp(b)}finally{t.enable$$module$build$src$core$events$utils()}return b&&(ne()&&!b.isShadow()&&ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(b)),b.select(),b)}};Lm.TYPE="block",Pl(Lm.TYPE,new Lm);var xo=null,Pv=null,g_={duplicateInternal:_a,copyInternal:ju},Dm={};Dm.BlockPaster=Lm,Dm.TEST_ONLY=g_,Dm.copy=fp,Dm.duplicate=vh,Dm.paste=io,Dm.registry=$g;var mE="aria-",xb="role",Nc;(function(r){r.GRID="grid",r.GRIDCELL="gridcell",r.GROUP="group",r.LISTBOX="listbox",r.MENU="menu",r.MENUITEM="menuitem",r.MENUITEMCHECKBOX="menuitemcheckbox",r.OPTION="option",r.PRESENTATION="presentation",r.ROW="row",r.TREE="tree",r.TREEITEM="treeitem"})(Nc||(Nc={}));var zs;(function(r){r.ACTIVEDESCENDANT="activedescendant",r.COLCOUNT="colcount",r.DISABLED="disabled",r.EXPANDED="expanded",r.INVALID="invalid",r.LABEL="label",r.LABELLEDBY="labelledby",r.LEVEL="level",r.ORIENTATION="orientation",r.POSINSET="posinset",r.ROWCOUNT="rowcount",r.SELECTED="selected",r.SETSIZE="setsize",r.VALUEMAX="valuemax",r.VALUEMIN="valuemin"})(zs||(zs={}));var Bu={};Bu.Role=Nc,Bu.State=zs,Bu.setRole=Wr,Bu.setState=lr;var h0=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(r){this.menuItems.push(r)}render(r){const a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName&&Wr(a,this.roleName),this.element=a;for(let p=0,b;b=this.menuItems[p];p++)a.appendChild(b.createDom());return this.mouseOverHandler=Se(a,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=Se(a,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=Se(a,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=Se(a,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=Se(a,"keydown",this,this.handleKeyEvent),r.appendChild(a),a}getElement(){return this.element}focus(){const r=this.getElement();r&&(r.focus({preventScroll:!0}),ke(r,"blocklyFocused"))}blur(){const r=this.getElement();r&&(r.blur(),dt(r,"blocklyFocused"))}setRole(r){this.roleName=r}dispose(){this.mouseOverHandler&&(rt(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(rt(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(rt(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(rt(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(rt(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let r=0,a;a=this.menuItems[r];r++)a.dispose();this.element=null}getMenuItem(r){const a=this.getElement();for(;r&&r!==a;){if(r.classList.contains("blocklyMenuItem")){for(let p=0,b;b=this.menuItems[p];p++)if(b.getElement()===r)return b}r=r.parentElement}return null}setHighlighted(r){var a=this.highlightedItem;a&&(a.setHighlighted(!1),this.highlightedItem=null),r&&(r.setHighlighted(!0),this.highlightedItem=r,a=this.getElement(),Gr(r.getElement(),a),lr(a,zs.ACTIVEDESCENDANT,r.getId()))}highlightNext(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(r,1)}highlightPrevious(){const r=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>r?this.menuItems.length:r,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(r,a){r+=a;let p;for(;p=this.menuItems[r];){if(p.isEnabled()){this.setHighlighted(p);break}r+=a}}handleMouseOver(r){(r=this.getMenuItem(r.target))&&(r.isEnabled()?this.highlightedItem!==r&&this.setHighlighted(r):this.setHighlighted(null))}handleClick(r){const a=this.openingCoords;if(this.openingCoords=null,a&&typeof r.clientX=="number"){const p=new tn(r.clientX,r.clientY);if(1>tn.distance(a,p))return}(r=this.getMenuItem(r.target))&&r.performAction()}handleMouseEnter(r){this.focus()}handleMouseLeave(r){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(r){if(this.menuItems.length&&!(r.shiftKey||r.ctrlKey||r.metaKey||r.altKey)){var a=this.highlightedItem;switch(r.key){case"Enter":case" ":a&&a.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}r.preventDefault(),r.stopPropagation()}}getSize(){const r=this.getElement(),a=Wt(r);return a.height=r.scrollHeight,a}},xg=class{constructor(r,a){this.content=r,this.opt_value=a,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const r=document.createElement("div");r.id=re(),this.element=r,r.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var p=document.createElement("div");p.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(p)}return p=this.content,typeof this.content=="string"&&(p=document.createTextNode(this.content)),a.appendChild(p),r.appendChild(a),this.roleName&&Wr(r,this.roleName),lr(r,zs.SELECTED,this.checkable&&this.checked||!1),lr(r,zs.DISABLED,!this.enabled),r}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let r;return(r=this.opt_value)!=null?r:null}setRightToLeft(r){this.rightToLeft=r}setRole(r){this.roleName=r}setCheckable(r){this.checkable=r}setChecked(r){this.checked=r}setHighlighted(r){this.highlight=r;const a=this.getElement();a&&this.isEnabled()&&(r?(ke(a,"blocklyMenuItemHighlight"),ke(a,"goog-menuitem-highlight")):(dt(a,"blocklyMenuItemHighlight"),dt(a,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(r){this.enabled=r}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(r,a){this.actionHandler=r.bind(a)}},kh=null,Nm=null,nf="blocklyWidgetDiv",rf="",Xf="",dd,Sp={};Sp.createDom=Lo,Sp.getDiv=Vs,Sp.hide=gl,Sp.hideIfOwner=Si,Sp.isVisible=Kh,Sp.positionWithAnchor=ur,Sp.repositionForWindowResize=mp,Sp.show=yu,Sp.testOnly_setDiv=Qo;var Cg=null,Cb={},d0=null,Wd={};Wd.callbackFactory=t.callbackFactory$$module$build$src$core$contextmenu,Wd.commentDeleteOption=Yu,Wd.commentDuplicateOption=bh,Wd.dispose=Zo,Wd.getCurrentBlock=gp,Wd.hide=Gl,Wd.setCurrentBlock=Jh,Wd.show=bu,Wd.workspaceCommentOption=bc;var qr=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(r){if(this.registry_.has(r.id))throw Error('Menu item with ID "'+r.id+'" is already registered.');this.registry_.set(r.id,r)}unregister(r){if(!this.registry_.has(r))throw Error('Menu item with ID "'+r+'" not found.');this.registry_.delete(r)}getItem(r){let a;return(a=this.registry_.get(r))!=null?a:null}getContextMenuOptions(r,a){const p=[];for(const R of this.registry_.values())if(r===R.scopeType){var b=R.preconditionFn(a);b!=="hidden"&&(b={text:typeof R.displayText=="function"?R.displayText(a):R.displayText,enabled:b==="enabled",callback:R.callback,scope:a,weight:R.weight},p.push(b))}return p.sort(function(R,W){return R.weight-W.weight}),p}};(function(r){var a=r.ScopeType||(r.ScopeType={});a.BLOCK="block",a.WORKSPACE="workspace",r.registry=new r})(qr||(qr={})),qr.ScopeType;var Bm={};Bm.clamp=Jr,Bm.toDegrees=_s,Bm.toRadians=Tc;var Mg=16,p0=1,Mb=12,f0=16,Pm=.25,Ag=null,sf=null,of="",Fm="",oi,af,Um,zm=null,Yf=null,m0=null,g={getBoundsInfo:function(){const r=Tn(zm),a=Wt(zm);return{left:r.x,right:r.x+a.width,top:r.y,bottom:r.y+a.height,width:a.width,height:a.height}},getPositionMetrics:function(r,a,p,b){const R=g.getBoundsInfo(),W=Wt(oi);return a+W.height<R.bottom?qn(r,a,R,W):b-W.height>R.top?rr(p,b,R,W):a+W.height<document.documentElement.clientHeight?qn(r,a,R,W):b-W.height>document.documentElement.clientTop?rr(p,b,R,W):An(r,R,W)}},y={ANIMATION_TIME:Pm,ARROW_HORIZONTAL_PADDING:Mb,ARROW_SIZE:Mg,BORDER_SIZE:p0,PADDING_Y:f0,TEST_ONLY:g};y.clearContent=Vc,y.createDom=_l,y.getContentDiv=Wl,y.getOwner=vl,y.getPositionX=Ir,y.hide=vo,y.hideIfOwner=vs,y.hideWithoutAnimation=va,y.isVisible=Ls,y.repositionForWindowResize=os,y.setBoundsElement=ea,y.setColour=kd,y.show=Dn,y.showPositionedByBlock=mi,y.showPositionedByField=Ye;var I=null,B=null,V={};V.connectionUiEffect=Do,V.disconnectUiEffect=Ds,V.disconnectUiStop=ta,V.disposeUiEffect=Ec;var K=50,fe=100,Ue=class{constructor(r,a){this.bubble=r,this.workspace=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.bubble.getRelativeToSurfaceXY()}startBubbleDrag(){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.setResizesEnabled(!1),this.bubble.setAutoLayout&&this.bubble.setAutoLayout(!1);let r;(r=this.workspace.getLayerManager())==null||r.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}dragBubble(r,a){a=this.pixelsToWorkspaceUnits_(a),a=tn.sum(this.startXY_,a),this.bubble.moveDuringDrag(a),a=this.dragTarget_,this.dragTarget_=this.workspace.getDragTarget(r),r=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),r!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.bubble),this.dragTarget_&&this.dragTarget_.onDragEnter(this.bubble)),this.dragTarget_&&this.dragTarget_.onDragOver(this.bubble)}shouldDelete_(r){return r&&this.workspace.getComponentManager().hasCapability(r.id,Ma.Capability.DELETE_AREA)?r.wouldDelete(this.bubble,!1):!1}updateCursorDuringBubbleDrag_(){this.bubble.setDeleteStyle(this.wouldDeleteBubble_)}endBubbleDrag(r,a){if(this.dragBubble(r,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.bubble)?r=this.startXY_:(r=this.pixelsToWorkspaceUnits_(a),r=tn.sum(this.startXY_,r)),this.bubble.moveTo(r.x,r.y),this.dragTarget_&&this.dragTarget_.onDrop(this.bubble),this.wouldDeleteBubble_)this.fireMoveEvent_(),this.bubble.dispose();else{if(this.bubble.setDragging){this.bubble.setDragging(!1);let p;(p=this.workspace.getLayerManager())==null||p.moveOffDragLayer(this.bubble,fe)}this.fireMoveEvent_()}this.workspace.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent_(){if(this.bubble instanceof el){const r=new(xe(Qa))(this.bubble);r.setOldCoordinate(this.startXY_),r.recordNew(),ue(r)}}pixelsToWorkspaceUnits_(r){return r=new tn(r.x/this.workspace.scale,r.y/this.workspace.scale),this.workspace.isMutator&&r.scale(1/this.workspace.options.parentWorkspace.scale),r}},Ze=30,Ct=!0,jt=[];jt[En.INPUT_VALUE]=En.OUTPUT_VALUE,jt[En.OUTPUT_VALUE]=En.INPUT_VALUE,jt[En.NEXT_STATEMENT]=En.PREVIOUS_STATEMENT,jt[En.PREVIOUS_STATEMENT]=En.NEXT_STATEMENT;var en="RENAME_VARIABLE_ID",Jt="DELETE_VARIABLE_ID",vn={};vn.commonWordPrefix=Eh,vn.commonWordSuffix=Tu,vn.isNumber=t.isNumber$$module$build$src$core$utils$string,vn.shortestStringLength=jc,vn.startsWith=Th,vn.wrap=t.wrap$$module$build$src$core$utils$string;var In=void 0,Ln=!1,to=!1,vt=50,it=0,yt=0,sn=0,Hn=0,Nn=null,Vn=null,mr=0,tl=10,Oi=10,lf=750,__=5,nu=null,Vd={HOVER_MS:lf,LIMIT:vt,MARGINS:__,OFFSET_X:mr,OFFSET_Y:tl,RADIUS_OK:Oi};Vd.bindMouseEvents=ri,Vd.block=Dd,Vd.createDom=$h,Vd.dispose=Ld,Vd.getCustomTooltip=Xc,Vd.getDiv=za,Vd.getTooltipOfObject=ya,Vd.hide=bl,Vd.isVisible=Od,Vd.setCustomTooltip=$c,Vd.unbindMouseEvents=ed,Vd.unblock=wh;var Gw=class{constructor(r){this.workspace=r,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new tn(r.scrollX,r.scrollY)}dispose(){this.workspace=null}startDrag(){k()&&k().unselect()}endDrag(r){this.drag(r)}drag(r){if(r=tn.sum(this.startScrollXY_,r),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(r.x,r.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(r.x,this.workspace.scrollY);else if(this.verticalScrollEnabled_)this.workspace.scroll(this.workspace.scrollX,r.y);else throw new TypeError("Invalid state.")}},kR=5,OR=6,Hm=class{constructor(r,a){this.creatorWorkspace=a,this.mouseDownXY=new tn(0,0),this.startWorkspace_=this.targetBlock=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.flyout=this.workspaceDragger=this.blockDragger=this.bubbleDragger=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=r,this.currentDragDeltaXY=new tn(0,0),this.healStack=!Ct}dispose(){et(),wh(),this.creatorWorkspace.clearGesture();for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.blockDragger&&this.blockDragger.dispose(),this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(r){const a=new tn(r.clientX,r.clientY);this.updateDragDelta(a)&&(this.updateIsDragging(),Je()),this.mostRecentEvent=r}updateDragDelta(r){return this.currentDragDeltaXY=tn.difference(r,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=tn.magnitude(this.currentDragDeltaXY)>(this.flyout?t.config$$module$build$src$core$config.flyoutDragRadius:t.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let r;if(!this.targetBlock||(r=this.flyout)==null||!r.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),this.targetBlock.select(),!0):!1}updateIsDraggingBubble(){return this.startBubble?(this.startDraggingBubble(),!0):!1}updateIsDraggingBlock(){if(!this.targetBlock)return!1;if(this.flyout){if(this.updateIsDraggingFromFlyout())return this.startDraggingBlock(),!0}else if(this.targetBlock.isMovable())return this.startDraggingBlock(),!0;return!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger=new Gw(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(){if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.updateIsDraggingBubble()||this.updateIsDraggingBlock()||this.updateIsDraggingWorkspace()}startDraggingBlock(){this.blockDragger=new(_(Dt.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(this.targetBlock,this.startWorkspace_),this.blockDragger.startDrag(this.currentDragDeltaXY,this.healStack),this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY)}startDraggingBubble(){if(!this.startBubble)throw Error("Cannot update dragging the bubble because the start bubble is undefined");if(!this.startWorkspace_)throw Error("Cannot update dragging the bubble because the start workspace is undefined");this.bubbleDragger=new Ue(this.startBubble,this.startWorkspace_),this.bubbleDragger.startBubbleDrag(),this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY)}doStart(r){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,We(r)?this.cancel():(this.gestureHasStarted=!0,ta(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=vl(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=r,Dd(),this.targetBlock&&this.targetBlock.select(),wt(r)?this.handleRightClick(r):(r.type.toLowerCase()==="pointerdown"&&r.pointerType!=="mouse"&&Re(r,this),this.mouseDownXY=new tn(r.clientX,r.clientY),this.healStack=r.altKey||r.ctrlKey||r.metaKey,this.bindMouseEvents(r),this.isEnding_||this.handleTouchStart(r)))}bindMouseEvents(r){this.boundEvents.push(Se(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(Se(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(Se(document,"pointerup",null,this.handleUp.bind(this),!0)),r.preventDefault(),r.stopPropagation()}handleStart(r){this.isDragging()||(this.handleTouchStart(r),this.isMultiTouch()&&Je())}handleMove(r){this.isDragging()&&at(r)||!this.isMultiTouch()?(this.updateFromEvent(r),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.blockDragger?this.blockDragger.drag(this.mostRecentEvent,this.currentDragDeltaXY):this.bubbleDragger&&this.bubbleDragger.dragBubble(this.mostRecentEvent,this.currentDragDeltaXY),r.preventDefault(),r.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(r),Je())}handleUp(r){if(this.isDragging()||this.handleTouchEnd(r),!this.isMultiTouch()||this.isDragging()){if(!at(r))return;if(this.updateFromEvent(r),Je(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.bubbleDragger?this.bubbleDragger.endBubbleDrag(r,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(r,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()?this.doBubbleClick():this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(r)}r.preventDefault(),r.stopPropagation(),this.dispose()}handleTouchStart(r){var a=Qe(r);this.cachedPoints.set(a,this.getTouchPoint(r));var p=Array.from(this.cachedPoints.keys());p.length===2&&(a=this.cachedPoints.get(p[0]),p=this.cachedPoints.get(p[1]),this.startDistance=tn.distance(a,p),this.isMultiTouch_=!0,r.preventDefault())}handleTouchMove(r){const a=Qe(r);this.cachedPoints.set(a,this.getTouchPoint(r)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(r):this.handleMove(r)}handlePinch(r){var a=Array.from(this.cachedPoints.keys()),p=this.cachedPoints.get(a[0]);if(a=this.cachedPoints.get(a[1]),p=tn.distance(p,a)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(a=p-this.previousScale,a=0<a?a*kR:a*OR,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const b=this.startWorkspace_,R=xt(r,b.getParentSvg(),b.getInverseScreenCTM());b.zoom(R.x,R.y,a)}this.previousScale=p,r.preventDefault()}handleTouchEnd(r){r=Qe(r),this.cachedPoints.has(r)&&this.cachedPoints.delete(r),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(r){return this.startWorkspace_?new tn(r.pageX,r.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(Je(),this.bubbleDragger?this.bubbleDragger.endBubbleDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.blockDragger?this.blockDragger.endDrag(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(r){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(r)):this.startBubble?this.startBubble.showContextMenu(r):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(r)),r.preventDefault(),r.stopPropagation(),this.dispose()}handleWsStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(a),this.mostRecentEvent=r,this.doStart(r)}fireWorkspaceClick(r){ue(new(xe(Lu))(null,r.id,"workspace"))}handleFlyoutStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(a),this.handleWsStart(r,a.getWorkspace())}handleBlockStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent=r}handleBubbleStart(r,a){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent=r}doBubbleClick(){this.startBubble instanceof el&&(this.startBubble.setFocus(),this.startBubble.select())}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");this.targetBlock.isEnabled()&&(t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.flyout.createBlock(this.targetBlock).scheduleSnapAndBump())}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");const r=new(xe(Lu))(this.startBlock,this.startWorkspace_.id,"block");ue(r)}this.bringBlockToFront(),t.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(r){r=this.creatorWorkspace,k()&&k().unselect(),this.fireWorkspaceClick(this.startWorkspace_||r)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=r)}setStartIcon(r){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=r)}setStartBubble(r){this.startBubble||(this.startBubble=r)}setStartBlock(r){this.startBlock||this.startBubble||(this.startBlock=r,r.isInFlyout&&r!==r.getRootBlock()?this.setTargetBlock(r.getRootBlock()):this.setTargetBlock(r))}setTargetBlock(r){r.isShadow()?this.setTargetBlock(r.getParent()):this.targetBlock=r}setStartWorkspace(r){this.startWorkspace_||(this.startWorkspace_=r)}setStartFlyout(r){this.flyout||(this.flyout=r)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const r=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&r}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}isDragging(){return!!this.workspaceDragger||!!this.blockDragger||!!this.bubbleDragger}hasStarted(){return this.gestureHasStarted}getInsertionMarkers(){return this.blockDragger?this.blockDragger.getInsertionMarkers():[]}getCurrentDragger(){let r,a;return(a=(r=this.blockDragger)!=null?r:this.workspaceDragger)!=null?a:this.bubbleDragger}static inProgress(){const r=E();for(let a=0,p;p=r[a];a++)if(p.currentGesture_)return!0;return!1}},gE=class{constructor(r,a){this.pattern=r,this.scale=1;let p;this.spacing=(p=a.spacing)!=null?p:0;let b;this.length=(b=a.length)!=null?b:1,this.line2=(this.line1=r.firstChild)&&this.line1.nextSibling;let R;this.snapToGrid=(R=a.snap)!=null?R:!1}setSpacing(r){this.spacing=r,this.update(this.scale)}setLength(r){this.length=r,this.update(this.scale)}setSnapToGrid(r){this.snapToGrid=r}shouldSnap(){return this.snapToGrid}getSpacing(){return this.spacing}getPatternId(){return this.pattern.id}update(r){this.scale=r;var a=this.spacing*r;this.pattern.setAttribute("width",`${a}`),this.pattern.setAttribute("height",`${a}`),a=Math.floor(this.spacing/2)+.5;let p=a-this.length/2,b=a+this.length/2;a*=r,p*=r,b*=r,this.setLineAttributes(this.line1,r,p,b,a,a),this.setLineAttributes(this.line2,r,a,a,p,b)}setLineAttributes(r,a,p,b,R,W){r&&(r.setAttribute("stroke-width",`${a}`),r.setAttribute("x1",`${p}`),r.setAttribute("y1",`${R}`),r.setAttribute("x2",`${b}`),r.setAttribute("y2",`${W}`))}moveTo(r,a){this.pattern.setAttribute("x",`${r}`),this.pattern.setAttribute("y",`${a}`)}static createDom(r,a,p){r=ee(Be.PATTERN,{id:"blocklyGridPattern"+r,patternUnits:"userSpaceOnUse"},p);let b,R;if(0<((b=a.length)!=null?b:1)&&0<((R=a.spacing)!=null?R:0)){ee(Be.LINE,{stroke:a.colour},r);let W;(W=a.length)!=null&&W&&ee(Be.LINE,{stroke:a.colour},r)}else ee(Be.LINE,{},r);return r}},Oh=class{constructor(r){this.workspace=r,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(r,a){this.markers.has(r)&&this.unregisterMarker(r),a.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers.set(r,a)}unregisterMarker(r){const a=this.markers.get(r);if(a)a.dispose(),this.markers.delete(r);else throw Error("Marker with ID "+r+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor_}getMarker(r){return this.markers.get(r)||null}setCursor(r){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=r)&&(r=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(r),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(r){r?(this.workspace.getBlockCanvas().appendChild(r),this.cursorSvg_=r):this.cursorSvg_=null}setMarkerSvg(r){r?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(r,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(r)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const r=Object.keys(this.markers);for(let a=0,p;p=r[a];a++)this.unregisterMarker(p);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};Oh.LOCAL_MARKER="local_marker_1";var Ww={};Ww.deepMerge=Tl;var g0=class{constructor(r,a,p,b){this.name=r,this.startHats=!1,this.blockStyles=a||Object.create(null),this.categoryStyles=p||Object.create(null),this.componentStyles=b||Object.create(null),this.fontStyle=Object.create(null),i(Dt.THEME,r,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(r,a){this.blockStyles[r]=a}setCategoryStyle(r,a){this.categoryStyles[r]=a}getComponentStyle(r){if(r=this.componentStyles[r],!r)return null;if(typeof r=="string"){const a=this.getComponentStyle(r);if(a)return a}return`${r}`}setComponentStyle(r,a){this.componentStyles[r]=a}setFontStyle(r){this.fontStyle=r}setStartHats(r){this.startHats=r}static defineTheme(r,a){r=r.toLowerCase();const p=new g0(r);let b=a.base;if(b){if(typeof b=="string"){let R;b=(R=d(Dt.THEME,b))!=null?R:void 0}b instanceof g0&&(Tl(p,b),p.name=r)}return Tl(p.blockStyles,a.blockStyles),Tl(p.categoryStyles,a.categoryStyles),Tl(p.componentStyles,a.componentStyles),Tl(p.fontStyle,a.fontStyle),a.startHats!==null&&(p.startHats=a.startHats),p}},_0={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Fr={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Ab=new g0("classic",_0,Fr),Uo=class{constructor(r){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let a=null,p=!1;var b=!1,R=!1,W=!1,pe=!1,Le=!1;const Nt=!!r.readOnly;if(!Nt){var $n;a=st(($n=r.toolbox)!=null?$n:null),p=Bt(a),b=r.trashcan,b=b===void 0?p:b,R=r.collapse,R=R===void 0?p:R,W=r.comments,W=W===void 0?p:W,pe=r.disable,pe=pe===void 0?p:pe,Le=r.sounds,Le=Le===void 0?!0:Le}$n=r.maxTrashcanContents,b?$n===void 0&&($n=32):$n=0;const zo=!!r.rtl;let Mo=r.horizontalLayout;Mo===void 0&&(Mo=!1);var Ip=r.toolboxPosition!=="end";Ip=Mo?Ip?Kn.TOP:Kn.BOTTOM:Ip===zo?Kn.RIGHT:Kn.LEFT;let Jb=r.css;Jb===void 0&&(Jb=!0);let Qb="https://blockly-demo.appspot.com/static/media/";r.media?Qb=r.media.endsWith("/")?r.media:r.media+"/":"path"in r&&(ve("path","Nov 2014","Jul 2023","media"),Qb=r.path+"media/");const $F=r.oneBasedIndex,MX=r.renderer||"geras",AX=r.plugins||{};let YR=r.modalInputs;YR===void 0&&(YR=!0),this.RTL=zo,this.oneBasedIndex=$F===void 0?!0:$F,this.collapse=R,this.comments=W,this.disable=pe,this.readOnly=Nt,this.maxBlocks=r.maxBlocks||1/0;let SF;this.maxInstances=(SF=r.maxInstances)!=null?SF:null,this.modalInputs=YR,this.pathToMedia=Qb,this.hasCategories=p,this.moveOptions=Uo.parseMoveOptions_(r,p),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=b,this.maxTrashcanContents=$n,this.hasSounds=Le,this.hasCss=Jb,this.horizontalLayout=Mo,this.languageTree=a,this.gridOptions=Uo.parseGridOptions_(r),this.zoomOptions=Uo.parseZoomOptions_(r),this.toolboxPosition=Ip,this.theme=Uo.parseThemeOptions_(r),this.renderer=MX;let wF;this.rendererOverrides=(wF=r.rendererOverrides)!=null?wF:null;let xF;this.parentWorkspace=(xF=r.parentWorkspace)!=null?xF:null,this.plugins=AX}static parseMoveOptions_(r,a){const p=r.move||{},b={};return p.scrollbars===void 0&&r.scrollbars===void 0?b.scrollbars=a:typeof p.scrollbars=="object"?(b.scrollbars={horizontal:!!p.scrollbars.horizontal,vertical:!!p.scrollbars.vertical},b.scrollbars.horizontal&&b.scrollbars.vertical?b.scrollbars=!0:b.scrollbars.horizontal||b.scrollbars.vertical||(b.scrollbars=!1)):b.scrollbars=!!p.scrollbars||!!r.scrollbars,b.wheel=b.scrollbars&&p.wheel!==void 0?!!p.wheel:typeof b.scrollbars=="object",b.drag=b.scrollbars?p.drag===void 0?!0:!!p.drag:!1,b}static parseZoomOptions_(r){r=r.zoom||{};const a={};return a.controls=r.controls===void 0?!1:!!r.controls,a.wheel=r.wheel===void 0?!1:!!r.wheel,a.startScale=r.startScale===void 0?1:Number(r.startScale),a.maxScale=r.maxScale===void 0?3:Number(r.maxScale),a.minScale=r.minScale===void 0?.3:Number(r.minScale),a.scaleSpeed=r.scaleSpeed===void 0?1.2:Number(r.scaleSpeed),a.pinch=r.pinch===void 0?a.wheel||a.controls:!!r.pinch,a}static parseGridOptions_(r){r=r.grid||{};const a={};return a.spacing=Number(r.spacing)||0,a.colour=r.colour||"#888",a.length=r.length===void 0?1:Number(r.length),a.snap=0<a.spacing&&!!r.snap,a}static parseThemeOptions_(r){return r=r.theme||Ab,typeof r=="string"?d(Dt.THEME,r):r instanceof g0?r:g0.defineTheme(r.name||"builtin"+re(),r)}},ho=class extends $p{constructor(r,a,p,b,R){super(r),this.type=t.CHANGE$$module$build$src$core$events$utils,r&&(this.element=a,this.name=p||void 0,this.oldValue=b,this.newValue=R)}toJson(){const r=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return r.element=this.element,r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new ho),a.element=r.element,a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getIcon(co.MUTATOR);switch(p&&El(p)&&p.bubbleIsVisible()&&p.setBubbleVisible(!1),r=r?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(r||null);break;case"collapsed":a.setCollapsed(!!r);break;case"disabled":a.setEnabled(!r);break;case"inline":a.setInputsInline(!!r);break;case"mutation":p=ho.getExtraBlockState_(a),a.loadExtraState?a.loadExtraState(JSON.parse(r||"{}")):a.domToMutation&&a.domToMutation(t.textToDom$$module$build$src$core$utils$xml(r||"<mutation/>")),ue(new ho(a,"mutation",null,p,r));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(r){return r.saveExtraState?(r=r.saveExtraState(!0))?JSON.stringify(r):"":r.mutationToDom&&(r=r.mutationToDom())?Ei(r):""}};i(Dt.EVENT,t.CHANGE$$module$build$src$core$events$utils,ho);var _E=.45,Kf=.65,Vw={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},wp={};wp.blend=xc,wp.getHsvSaturation=Sc,wp.getHsvValue=td,wp.hexToRgb=nd,wp.hsvToHex=wc,wp.hueToHex=qu,wp.names=Vw,wp.parse=Ha,wp.rgbToHex=Qu,wp.setHsvSaturation=xh,wp.setHsvValue=Ju;var Fv={};Fv.checkMessageReferences=Vl,Fv.parseBlockColour=qi,Fv.replaceMessageReferences=xr,Fv.tokenizeInterpolation=ra;var ai=class{constructor(r,a,p){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Ss(0,0),r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){r.tooltip&&this.setTooltip(xr(r.tooltip))}setSourceBlock(r){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=r}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=ee(Be.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=ee(Be.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=ee(Be.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const r=this.getClickTarget_();if(!r)throw Error("A click target has not been set.");ri(r),this.mouseDownWrapper_=Se(r,"pointerdown",this,this.onMouseDown_)}fromXml(r){this.setValue(r.textContent)}toXml(r){return r.textContent=this.getValue(),r}saveState(r){return r=this.saveLegacyState(ai),r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(ai,r)||this.setValue(r)}saveLegacyState(r){return r.prototype.saveState===this.saveState&&r.prototype.toXml!==this.toXml?(r=t.createElement$$module$build$src$core$utils$xml("field"),r.setAttribute("name",this.name||""),gn(this.toXml(r)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(r,a){return r.prototype.loadState===this.loadState&&r.prototype.fromXml!==this.fromXml?(this.fromXml(t.textToDom$$module$build$src$core$utils$xml(a)),!0):!1}dispose(){vs(this),Si(this);let r;(r=this.getSourceBlock())!=null&&r.isDeadOrDying()||ct(this.fieldGroup_),this.disposed=!0}updateEditable(){const r=this.fieldGroup_,a=this.getSourceBlock();this.EDITABLE&&r&&a&&(this.enabled_&&a.isEditable()?(ke(r,"blocklyEditableText"),dt(r,"blocklyNonEditableText"),r.style.cursor=this.CURSOR):(ke(r,"blocklyNonEditableText"),dt(r,"blocklyEditableText"),r.style.cursor=""))}setEnabled(r){this.enabled_=r,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==ai.prototype.showEditor_}isClickableInFlyout(r){return!r}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let r=!1;return this.name&&(this.SERIALIZABLE?r=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),r=!0)),r}isVisible(){return this.visible_}setVisible(r){if(this.visible_!==r){this.visible_=r;var a=this.fieldGroup_;a&&(a.style.display=r?"block":"none")}}setValidator(r){this.validator_=r}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(r){this.isClickable()&&this.showEditor_(r)}showEditor_(r){}repositionForWindowResize(){return!1}updateSize_(r){const a=this.getConstants();r=r!==void 0?r:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let p=2*r,b=a.FIELD_TEXT_HEIGHT,R=0;this.textElement_&&(R=Ve(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY),p+=R),this.isFullBlockField()||(b=Math.max(b,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=b,this.size_.width=p,this.positionTextElement_(r,R),this.positionBorderRect_()}positionTextElement_(r,a){if(this.textElement_){var p=this.getConstants(),b=this.size_.height/2,R;this.textElement_.setAttribute("x",String((R=this.getSourceBlock())!=null&&R.RTL?this.size_.width-a-r:r)),this.textElement_.setAttribute("y",String(p.FIELD_TEXT_BASELINE_CENTER?b:b-p.FIELD_TEXT_HEIGHT/2+p.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(this.render_(),this.size_.width!==0&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Ss(0,0)}getScaledBBox(){let r;var a=this.getSourceBlock();if(!a)throw new no;if(this.isFullBlockField()){var p=this.sourceBlock_.getHeightWidth();const b=a.workspace.scale;r=this.getAbsoluteXY_(),a=(p.width+1)*b,p=(p.height+1)*b,ln?(r.x+=1.5*b,r.y+=1.5*b):(r.x-=.5*b,r.y-=.5*b)}else p=this.borderRect_.getBoundingClientRect(),r=Tn(this.borderRect_),a=p.width,p=p.height;return new vi(r.y,r.y+p,r.x,r.x+a)}onLocationChange(r){}getDisplayText_(){let r=this.getText();return r?(r.length>this.maxDisplayLength&&(r=r.substring(0,this.maxDisplayLength-2)+""),r=r.replace(/\s/g,ai.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(r+=""),r):ai.NBSP}getText(){const r=this.getText_();return String(r!==null?r:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.queueRender(),this.sourceBlock_.bumpNeighbours())}setValue(r,a=!0){if(r!==null){var p=this.doClassValidation_(r);if(r=this.processValidation_(r,p),!(r instanceof Error)){var b;p=(b=this.getValidator())==null?void 0:b.call(this,r),b=this.processValidation_(r,p),b instanceof Error||(r=this.sourceBlock_,r&&r.disposed||(p=this.getValue(),p===b?this.doValueUpdate_(b):(this.doValueUpdate_(b),a&&r&&ne()&&ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(r,"field",this.name||null,p,b)),this.isDirty_&&this.forceRerender())))}}}processValidation_(r,a){return a===null?(this.doValueInvalid_(r),this.isDirty_&&this.forceRerender(),Error()):a===void 0?r:a}getValue(){return this.value_}doClassValidation_(r){return r??null}doValueUpdate_(r){this.value_=r,this.isDirty_=!0}doValueInvalid_(r){}onMouseDown_(r){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(r=this.sourceBlock_.workspace.getGesture(r))&&r.setStartField(this)}setTooltip(r){r||r===""||(r=this.sourceBlock_);const a=this.getClickTarget_();a?a.tooltip=r:this.tooltip_=r}getTooltip(){const r=this.getClickTarget_();return ya(r||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Tn(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let r=null;const a=this.getSourceBlock();if(!a)throw new no;const p=a.inputList;for(let b=0;b<a.inputList.length;b++){const R=p[b],W=R.fieldRow;for(let pe=0;pe<W.length;pe++)if(W[pe]===this){r=R;break}}return r}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(r){return!1}setCursorSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.cursorSvg_=r}else this.cursorSvg_=null}setMarkerSvg(r){if(r){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(r),this.markerSvg_=r}else this.markerSvg_=null}updateMarkers_(){var r=this.getSourceBlock();if(!r)throw new no;r=r.workspace,r.keyboardAccessibilityMode&&this.cursorSvg_&&r.getCursor().draw(),r.keyboardAccessibilityMode&&this.markerSvg_&&r.getMarker(Oh.LOCAL_MARKER).draw()}};ai.NBSP="",ai.SKIP_SETUP=Symbol("SKIP_SETUP");var no=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}};t.Names$$module$build$src$core$names=class{constructor(r,a){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=a||"",this.reservedWords=new Set(r?r.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(r){this.variableMap=r}getNameForUserVariable(r){return this.variableMap?(r=this.variableMap.getVariableById(r))?r.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(r){r=t.allUsedVarModels$$module$build$src$core$variables(r);for(let a=0;a<r.length;a++)this.getName(r[a].getId(),t.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(r){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(r,a){let p=r;a===t.NameType$$module$build$src$core$names.VARIABLE&&(r=this.getNameForUserVariable(r))&&(p=r),r=p.toLowerCase();const b=a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(a)||this.db.set(a,new Map);const R=this.db.get(a);return R.has(r)?b+R.get(r):(a=this.getDistinctName(p,a),R.set(r,a.substr(b.length)),a)}getUserNames(r){let a;return(r=(a=this.db.get(r))==null?void 0:a.keys())?Array.from(r):[]}getDistinctName(r,a){r=this.safeName(r);let p=null,b,R;for(;this.dbReverse.has(r+((b=p)!=null?b:""))||this.reservedWords.has(r+((R=p)!=null?R:""));)p=p?p+1:2;let W;return r+=(W=p)!=null?W:"",this.dbReverse.add(r),(a===t.NameType$$module$build$src$core$names.VARIABLE||a===t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+r}safeName(r){return r?(r=encodeURI(r.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(r[0])!==-1&&(r="my_"+r)):r=t.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",r}static equals(r,a){return r.toLowerCase()===a.toLowerCase()}},function(r){r=r.NameType||(r.NameType={}),r.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",r.VARIABLE="VARIABLE",r.PROCEDURE="PROCEDURE"}(t.Names$$module$build$src$core$names||(t.Names$$module$build$src$core$names={})),t.NameType$$module$build$src$core$names=t.Names$$module$build$src$core$names.NameType,t.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,t.NameType$$module$build$src$core$names,t.Names$$module$build$src$core$names;var Ib=class extends Map{constructor(){super()}set(r,a){return this.get(r)===a?this:(super.set(r,a),ye(a)&&a.startPublishing(),this)}delete(r){const a=this.get(r);return r=super.delete(r),r&&(ye(a)&&a.stopPublishing(),r)}clear(){if(this.size)for(const r of this.keys())this.delete(r)}add(r){return this.set(r.getId(),r)}getProcedures(){return[...this.values()]}},Rb=class{constructor(r){this.sourceBlock=r,this.offsetInBlock=new tn(0,0),this.workspaceLocation=new tn(0,0),this.svgRoot=null,this.tooltip=r}getType(){throw Error("Icons must implement getType")}initView(r){if(!this.svgRoot){var a=this.sourceBlock;this.svgRoot=ee(Be.G,{class:"blocklyIconGroup"}),a.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),Se(this.svgRoot,"pointerdown",this,r),this.svgRoot.tooltip=this,ri(this.svgRoot)}}dispose(){ed(this.svgRoot),ct(this.svgRoot)}getWeight(){return-1}getSize(){return new Ss(0,0)}setTooltip(r){this.tooltip=r??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",El(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(r){this.offsetInBlock=r,this.updateSvgRootOffset()}updateSvgRootOffset(){let r;(r=this.svgRoot)==null||r.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(r){this.workspaceLocation=tn.sum(r,this.offsetInBlock)}onClick(){}isClickableInFlyout(r){return!0}setVisible(r){ve("setVisible","v10","v11","setBubbleVisible"),El(this)&&this.setBubbleVisible(r)}},Jf={fromJsonInternal:Ur},Uv={TEST_ONLY:Jf};Uv.fromJson=t.fromJson$$module$build$src$core$field_registry,Uv.register=Xs,Uv.unregister=Ga;var jd=class extends ai{constructor(r,a,p){super(ai.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,r!==ai.SKIP_SETUP&&(Array.isArray(r)?(ba(r),r=zn(r),this.menuGenerator_=r.options,this.prefixField=r.prefix||null,this.suffixField=r.suffix||null):this.menuGenerator_=r,this.selectedOption=this.getOptions(!1)[0],p&&this.configure_(p),this.setValue(this.selectedOption[1]),a&&this.setValidator(a))}fromXml(r){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r.textContent)}loadState(r){this.loadLegacyState(jd,r)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(r))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=ee(Be.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&ke(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let r;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((r=this.getSourceBlock())!=null&&r.isShadow())}createTextArrow_(){this.arrow=ee(Be.TSPAN,{},this.textElement_);let r;this.arrow.appendChild(document.createTextNode((r=this.getSourceBlock())!=null&&r.RTL?jd.ARROW_CHAR+" ":" "+jd.ARROW_CHAR));let a;(a=this.getSourceBlock())!=null&&a.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=ee(Be.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS($s,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(r){var a=this.getSourceBlock();if(!a)throw new no;this.dropdownCreate(),this.menu_.openingCoords=r&&typeof r.clientX=="number"?new tn(r.clientX,r.clientY):null,Vc(),r=this.menu_.render(Wl()),ke(r,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(a=a.getColour(),kd(a,this.sourceBlock_.style.colourTertiary)),Ye(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),Gr(this.selectedMenuItem.getElement(),Wl(),!0)),this.applyColour()}dropdownCreate(){const r=this.getSourceBlock();if(!r)throw new no;const a=new h0;a.setRole(Nc.LISTBOX),this.menu_=a;const p=this.getOptions(!1);this.selectedMenuItem=null;for(let R=0;R<p.length;R++){const[W,pe]=p[R];if(typeof W=="object"){var b=new Image(W.width,W.height);b.src=W.src,b.alt=W.alt||""}else b=W;b=new xg(b,pe),b.setRole(Nc.OPTION),b.setRightToLeft(r.RTL),b.setCheckable(!0),a.addChild(b),b.setChecked(pe===this.value_),pe===this.value_&&(this.selectedMenuItem=b),b.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(r){vs(this,!0),this.onItemSelected_(this.menu_,r)}onItemSelected_(r,a){this.setValue(a.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(r){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:r&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),ba(this.generatedOptions),this.generatedOptions)}doClassValidation_(r){return this.getOptions(!0).some(a=>a[1]===r)?r:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+r),null)}doValueUpdate_(r){super.doValueUpdate_(r),r=this.getOptions(!0);for(let a=0,p;p=r[a];a++)p[1]===this.value_&&(this.selectedOption=p)}applyColour(){const r=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",r.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",r.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=r.colourSecondary:this.arrow.style.fill=r.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const r=this.selectedOption&&this.selectedOption[0];r&&typeof r=="object"?this.renderSelectedImage(r):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(r){const a=this.getSourceBlock();if(!a)throw new no;this.imageElement.style.display="",this.imageElement.setAttributeNS($s,"xlink:href",r.src),this.imageElement.setAttribute("height",String(r.height)),this.imageElement.setAttribute("width",String(r.width));const p=Number(r.height);r=Number(r.width);var b=!!this.borderRect_;const R=Math.max(b?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,p+nl);b=b?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let W;W=this.svgArrow?this.positionSVGArrow(r+b,R/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Ve(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=r+W+2*b,this.size_.height=R;let pe=0;a.RTL?this.imageElement.setAttribute("x",`${b+W}`):(pe=r+W,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${b}`)),this.imageElement.setAttribute("y",String(R/2-p/2)),this.positionTextElement_(pe+b,r+W)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var r=this.getTextElement();ke(r,"blocklyDropdownText"),r.setAttribute("text-anchor","start");var a=!!this.borderRect_;r=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const p=Ve(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let b=0;this.svgArrow&&(b=this.positionSVGArrow(p+a,r/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=p+b+2*a,this.size_.height=r,this.positionTextElement_(a,p)}positionSVGArrow(r,a){if(!this.svgArrow)return 0;const p=this.getSourceBlock();if(!p)throw new no;const b=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,R=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,W=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(p.RTL?b:r+R)+","+a+")"),W+R}getText_(){if(!this.selectedOption)return null;const r=this.selectedOption[0];return typeof r=="object"?r.alt:r}static fromJson(r){if(!r.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(r.options,void 0,r)}};jd.CHECKMARK_OVERHANG=25,jd.MAX_MENU_HEIGHT_VH=.45,jd.ARROW_CHAR="";var Oa=5,nl=2*Oa;Xs("field_dropdown",jd);var pd,Yi=class{constructor(r,a,p){this.workspace=r,this.anchor=a,this.ownerRect=p,this.size=new Ss(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.svgRoot=ee(Be.G,{},r.getBubbleCanvas()),r=ee(Be.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=ee(Be.PATH,{},r),this.background=ee(Be.RECT,{class:"blocklyDraggable",x:0,y:0,rx:pd.BORDER_WIDTH,ry:pd.BORDER_WIDTH},r),this.contentContainer=ee(Be.G,{},this.svgRoot),Se(this.background,"pointerdown",this,this.onMouseDown)}dispose(){ct(this.svgRoot),this.disposed=!0}setAnchorLocation(r,a=!1){this.anchor=r,a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(r,a){this.relativeLeft=r,this.relativeTop=a,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(r,a=!1){r.width=Math.max(r.width,pd.MIN_SIZE),r.height=Math.max(r.height,pd.MIN_SIZE),this.size=r,this.background.setAttribute("width",`${r.width}`),this.background.setAttribute("height",`${r.height}`),a?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(r){this.colour=r,this.tail.setAttribute("fill",r),this.background.setAttribute("fill",r)}onMouseDown(r){let a;(a=this.workspace.getGesture(r))==null||a.handleBubbleStart(r,this)}positionRelativeToAnchor(){let r=this.anchor.x;r=this.workspace.RTL?r-(this.relativeLeft+this.size.width):r+this.relativeLeft,this.moveTo(r,this.relativeTop+this.anchor.y)}moveTo(r,a){this.svgRoot.setAttribute("transform",`translate(${r}, ${a})`)}positionByRect(r=new vi(0,0,0,0)){var a=this.workspace.getMetricsManager().getViewMetrics(!0),p=this.getOptimalRelativeLeft(a),b=this.getOptimalRelativeTop(a);const R={x:p,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},W={x:-this.size.width-30,y:b};b={x:r.getWidth(),y:b};var pe={x:p,y:r.getHeight()};p=r.getWidth()<r.getHeight()?b:pe,r=r.getWidth()<r.getHeight()?pe:b,b=this.getOverlap(R,a),pe=this.getOverlap(W,a);const Le=this.getOverlap(p,a);a=this.getOverlap(r,a),a=Math.max(b,pe,Le,a),b===a?(this.relativeLeft=R.x,this.relativeTop=R.y):pe===a?(this.relativeLeft=W.x,this.relativeTop=W.y):Le===a?(this.relativeLeft=p.x,this.relativeTop=p.y):(this.relativeLeft=r.x,this.relativeTop=r.y),this.positionRelativeToAnchor()}getOverlap(r,a){var p=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x+this.anchor.x;return r=r.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(p+this.size.width,a.left+a.width)-Math.max(p,a.left))*(Math.min(r+this.size.height,a.top+a.height)-Math.max(r,a.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(r){let a=-this.size.width/4;if(this.size.width>r.width)return a;if(r=this.getWorkspaceViewRect(r),this.workspace.RTL){var p=this.anchor.x-a;p-this.size.width<r.left?a=-(r.left-this.anchor.x+this.size.width):p>r.right&&(a=-(r.right-this.anchor.x))}else{p=a+this.anchor.x;const b=p+this.size.width;p<r.left?a=r.left-this.anchor.x:b>r.right&&(a=r.right-this.anchor.x-this.size.width)}return a}getOptimalRelativeTop(r){let a=-this.size.height/4;if(this.size.height>r.height)return a;const p=this.anchor.y+a,b=p+this.size.height;return r=this.getWorkspaceViewRect(r),p<r.top?a=r.top-this.anchor.y:b>r.bottom&&(a=r.bottom-this.anchor.y-this.size.height),a}getWorkspaceViewRect(r){const a=r.top;let p=r.top+r.height,b=r.left;return r=r.left+r.width,p-=this.getScrollbarThickness(),this.workspace.RTL?b-=this.getScrollbarThickness():r-=this.getScrollbarThickness(),new vi(a,p,b,r)}getScrollbarThickness(){return Fo.scrollbarThickness/this.workspace.scale}renderTail(){const r=[];var a=this.size.width/2,p=this.size.height/2,b=-this.relativeLeft,R=-this.relativeTop;if(a===b&&p===R)r.push("M "+a+","+p);else{R-=p,b-=a,this.workspace.RTL&&(b*=-1);var W=Math.sqrt(R*R+b*b),pe=Math.acos(b/W);0>R&&(pe=2*Math.PI-pe);var Le=pe+Math.PI/2;Le>2*Math.PI&&(Le-=2*Math.PI);var Nt=Math.sin(Le);const zo=Math.cos(Le);let Mo=(this.size.width+this.size.height)/pd.TAIL_THICKNESS;Mo=Math.min(Mo,this.size.width,this.size.height)/4,Le=1-pd.ANCHOR_RADIUS/W,b=a+Le*b,R=p+Le*R,Le=a+Mo*zo;const Ip=p+Mo*Nt;a-=Mo*zo,p-=Mo*Nt,Nt=Tc(this.workspace.RTL?-pd.TAIL_ANGLE:pd.TAIL_ANGLE),Nt=pe+Nt,Nt>2*Math.PI&&(Nt-=2*Math.PI),pe=Math.sin(Nt)*W/pd.TAIL_BEND,W=Math.cos(Nt)*W/pd.TAIL_BEND,r.push("M"+Le+","+Ip),r.push("C"+(Le+W)+","+(Ip+pe)+" "+b+","+R+" "+b+","+R),r.push("C"+b+","+R+" "+(a+W)+","+(p+pe)+" "+a+","+p)}r.push("z");let $n;($n=this.tail)==null||$n.setAttribute("d",r.join(" "))}bringToFront(){let r;const a=(r=this.svgRoot)==null?void 0:r.parentNode;return this.svgRoot&&(a==null?void 0:a.lastChild)!==this.svgRoot?(a==null||a.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new tn(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(r){this.moveTo(r.x,r.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-r.x-this.size.width:r.x-this.anchor.x,this.relativeTop=r.y-this.anchor.y,this.renderTail()}setDragging(r){}setDeleteStyle(r){}isDeletable(){return!1}showContextMenu(r){}};pd=Yi,Yi.BORDER_WIDTH=6,Yi.DOUBLE_BORDER=2*pd.BORDER_WIDTH,Yi.MIN_SIZE=pd.DOUBLE_BORDER,Yi.TAIL_THICKNESS=1,Yi.TAIL_ANGLE=20,Yi.TAIL_BEND=4,Yi.ANCHOR_RADIUS=8;var Gm=class extends Yi{constructor(r,a,p,b){super(a,p,b),this.workspace=a,this.anchor=p,this.ownerRect=b,this.autoLayout=!0,a=new Uo(r),this.validateWorkspaceOptions(a),this.svgDialog=ee(Be.SVG,{x:Yi.BORDER_WIDTH,y:Yi.BORDER_WIDTH},this.contentContainer),r.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Uo(r)),this.miniWorkspace.internalIsMutator=!0,r=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(r),a.languageTree&&(r.insertBefore(this.miniWorkspace.addFlyout(Be.G),this.miniWorkspace.getCanvas()),r=this.miniWorkspace.getFlyout(),r==null||r.init(this.miniWorkspace),r==null||r.show(a.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let R,W;(R=this.miniWorkspace.getFlyout())==null||(W=R.getWorkspace())==null||W.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(r){this.miniWorkspace.addChangeListener(r)}validateWorkspaceOptions(r){if(r.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(r.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(r.zoomOptions.controls||r.zoomOptions.wheel||r.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(r.moveOptions.scrollbars||r.moveOptions.wheel||r.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(r.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const r of this.miniWorkspace.getTopBlocks(!1)){const a=r.getRelativeToSurfaceXY();if(20>a.y&&r.moveBy(0,20-a.y),r.RTL){let p=-20;const b=this.miniWorkspace.getFlyout();b&&(p-=b.getWidth()),a.x>p&&r.moveBy(p-a.x,0)}else 20>a.x&&r.moveBy(20-a.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var r=this.getSize(),a=this.calculateWorkspaceSize();Math.abs(r.width-a.width)<Gm.MINIMUM_VIEW_CHANGE&&Math.abs(r.height-a.height)<Gm.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${a.width}px`),this.svgDialog.setAttribute("height",`${a.height}px`),this.miniWorkspace.setCachedParentSvgSize(a.width,a.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${a.width}, 0)`),this.setSize(new Ss(a.width+Yi.DOUBLE_BORDER,a.height+Yi.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var r=this.miniWorkspace.getCanvas().getBBox();let a=r.width+Gm.MARGIN;r=r.height+Gm.MARGIN;const p=this.miniWorkspace.getFlyout();if(p){const b=p.getWorkspace().getMetricsManager().getScrollMetrics();r=Math.max(r,b.height+20),a+=p.getWidth()}return new Ss(a,r)}updateBlockStyles(){for(var r of this.miniWorkspace.getAllBlocks(!1))r.setStyle(r.getStyleName());let a;if(r=(a=this.miniWorkspace.getFlyout())==null?void 0:a.getWorkspace())for(const p of r.getAllBlocks(!1))p.setStyle(p.getStyleName())}moveDuringDrag(r){super.moveDuringDrag(r),this.autoLayout=!1}moveTo(r,a){super.moveTo(r,a),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(r){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Gm.MINIMUM_VIEW_CHANGE=10,Gm.MARGIN=3*Yi.DOUBLE_BORDER;var kb,Ob;kb=17,Ob=16,t.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Rb{constructor(r,a){super(a),this.flyoutBlockTypes=r,this.sourceBlock=a,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(r){this.svgRoot||(super.initView(r),ee(Be.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),ee(Be.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),ee(Be.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),ke(this.svgRoot,"blockly-icon-mutator"))}dispose(){super.dispose();let r;(r=this.miniWorkspaceBubble)==null||r.dispose()}getWeight(){return t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Ss(kb,kb)}applyColour(){super.applyColour();let r;(r=this.miniWorkspaceBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary);let a;(a=this.miniWorkspaceBubble)==null||a.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(r){super.onLocationChange(r);let a;(a=this.miniWorkspaceBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r){this.miniWorkspaceBubble=new Gm(this.getMiniWorkspaceConfig(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour(),this.createRootBlock(),this.addSaveConnectionsListener();let a;(a=this.miniWorkspaceBubble)==null||a.addWorkspaceChangeListener(this.createMiniWorkspaceChangeListener())}else{let a;(a=this.miniWorkspaceBubble)==null||a.dispose(),this.miniWorkspaceBubble=null,this.saveConnectionsListener&&this.sourceBlock.workspace.removeChangeListener(this.saveConnectionsListener),this.saveConnectionsListener=null}ue(new(xe(eo))(this.sourceBlock,r,"mutator"))}}getMiniWorkspaceConfig(){let r;const a={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(r=this.sourceBlock.workspace.options.rendererOverrides)!=null?r:void 0};return this.flyoutBlockTypes.length&&(a.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(p=>({kind:"block",type:p}))}),a}getAnchorLocation(){const r=kb/2;return tn.sum(this.workspaceLocation,new tn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new vi(r.y,r.y+r.height,r.x,r.x+r.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var r of this.rootBlock.getDescendants(!1))r.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let a,p,b,R;r=(R=(a=this.miniWorkspaceBubble)==null||(p=a.getWorkspace())==null||(b=p.getFlyout())==null?void 0:b.getWidth())!=null?R:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(r+Ob):Ob,Ob)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return r=>{t.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(r)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(r){return r.isUiEvent||r.type===t.CREATE$$module$build$src$core$events$utils||r.type===t.CHANGE$$module$build$src$core$events$utils&&r.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);var a=ho.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var p=ho.getExtraBlockState_(this.sourceBlock);a!==p&&ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,a,p)),t.setGroup$$module$build$src$core$events$utils(r)}}getWorkspace(){let r;return(r=this.miniWorkspaceBubble)==null?void 0:r.getWorkspace()}static reconnect(r,a,p){return ve("MutatorIcon.reconnect","v10","v11","connection.reconnect"),r?r.reconnect(a,p):!1}static findParentWs(r){return ve("MutatorIcon.findParentWs","v10","v11","workspace.getRootWorkspace"),r.getRootWorkspace()}},t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=co.MUTATOR,t.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,t.MutatorIcon$$module$build$src$core$icons$mutator_icon;var v_=Object.create(null),LR={allExtensions:v_};t.register$$module$build$src$core$extensions("parent_tooltip_when_inline",Ta);var xp={TEST_ONLY:LR};xp.apply=xi,xp.buildTooltipForDropdown=t.buildTooltipForDropdown$$module$build$src$core$extensions,xp.buildTooltipWithFieldText=t.buildTooltipWithFieldText$$module$build$src$core$extensions,xp.isRegistered=gi,xp.register=t.register$$module$build$src$core$extensions,xp.registerMixin=t.registerMixin$$module$build$src$core$extensions,xp.registerMutator=t.registerMutator$$module$build$src$core$extensions,xp.runAfterPageLoad=Pd,xp.unregister=Qr;var Dr;(function(r){r[r.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",r[r.MAC_ENTER=3]="MAC_ENTER",r[r.BACKSPACE=8]="BACKSPACE",r[r.TAB=9]="TAB",r[r.NUM_CENTER=12]="NUM_CENTER",r[r.ENTER=13]="ENTER",r[r.SHIFT=16]="SHIFT",r[r.CTRL=17]="CTRL",r[r.ALT=18]="ALT",r[r.PAUSE=19]="PAUSE",r[r.CAPS_LOCK=20]="CAPS_LOCK",r[r.ESC=27]="ESC",r[r.SPACE=32]="SPACE",r[r.PAGE_UP=33]="PAGE_UP",r[r.PAGE_DOWN=34]="PAGE_DOWN",r[r.END=35]="END",r[r.HOME=36]="HOME",r[r.LEFT=37]="LEFT",r[r.UP=38]="UP",r[r.RIGHT=39]="RIGHT",r[r.DOWN=40]="DOWN",r[r.PLUS_SIGN=43]="PLUS_SIGN",r[r.PRINT_SCREEN=44]="PRINT_SCREEN",r[r.INSERT=45]="INSERT",r[r.DELETE=46]="DELETE",r[r.ZERO=48]="ZERO",r[r.ONE=49]="ONE",r[r.TWO=50]="TWO",r[r.THREE=51]="THREE",r[r.FOUR=52]="FOUR",r[r.FIVE=53]="FIVE",r[r.SIX=54]="SIX",r[r.SEVEN=55]="SEVEN",r[r.EIGHT=56]="EIGHT",r[r.NINE=57]="NINE",r[r.FF_SEMICOLON=59]="FF_SEMICOLON",r[r.FF_EQUALS=61]="FF_EQUALS",r[r.FF_DASH=173]="FF_DASH",r[r.FF_HASH=163]="FF_HASH",r[r.QUESTION_MARK=63]="QUESTION_MARK",r[r.AT_SIGN=64]="AT_SIGN",r[r.A=65]="A",r[r.B=66]="B",r[r.C=67]="C",r[r.D=68]="D",r[r.E=69]="E",r[r.F=70]="F",r[r.G=71]="G",r[r.H=72]="H",r[r.I=73]="I",r[r.J=74]="J",r[r.K=75]="K",r[r.L=76]="L",r[r.M=77]="M",r[r.N=78]="N",r[r.O=79]="O",r[r.P=80]="P",r[r.Q=81]="Q",r[r.R=82]="R",r[r.S=83]="S",r[r.T=84]="T",r[r.U=85]="U",r[r.V=86]="V",r[r.W=87]="W",r[r.X=88]="X",r[r.Y=89]="Y",r[r.Z=90]="Z",r[r.META=91]="META",r[r.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",r[r.CONTEXT_MENU=93]="CONTEXT_MENU",r[r.NUM_ZERO=96]="NUM_ZERO",r[r.NUM_ONE=97]="NUM_ONE",r[r.NUM_TWO=98]="NUM_TWO",r[r.NUM_THREE=99]="NUM_THREE",r[r.NUM_FOUR=100]="NUM_FOUR",r[r.NUM_FIVE=101]="NUM_FIVE",r[r.NUM_SIX=102]="NUM_SIX",r[r.NUM_SEVEN=103]="NUM_SEVEN",r[r.NUM_EIGHT=104]="NUM_EIGHT",r[r.NUM_NINE=105]="NUM_NINE",r[r.NUM_MULTIPLY=106]="NUM_MULTIPLY",r[r.NUM_PLUS=107]="NUM_PLUS",r[r.NUM_MINUS=109]="NUM_MINUS",r[r.NUM_PERIOD=110]="NUM_PERIOD",r[r.NUM_DIVISION=111]="NUM_DIVISION",r[r.F1=112]="F1",r[r.F2=113]="F2",r[r.F3=114]="F3",r[r.F4=115]="F4",r[r.F5=116]="F5",r[r.F6=117]="F6",r[r.F7=118]="F7",r[r.F8=119]="F8",r[r.F9=120]="F9",r[r.F10=121]="F10",r[r.F11=122]="F11",r[r.F12=123]="F12",r[r.NUMLOCK=144]="NUMLOCK",r[r.SCROLL_LOCK=145]="SCROLL_LOCK",r[r.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",r[r.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",r[r.SEMICOLON=186]="SEMICOLON",r[r.DASH=189]="DASH",r[r.EQUALS=187]="EQUALS",r[r.COMMA=188]="COMMA",r[r.PERIOD=190]="PERIOD",r[r.SLASH=191]="SLASH",r[r.APOSTROPHE=192]="APOSTROPHE",r[r.TILDE=192]="TILDE",r[r.SINGLE_QUOTE=222]="SINGLE_QUOTE",r[r.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",r[r.BACKSLASH=220]="BACKSLASH",r[r.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",r[r.WIN_KEY=224]="WIN_KEY",r[r.MAC_FF_META=224]="MAC_FF_META",r[r.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",r[r.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",r[r.WIN_IME=229]="WIN_IME",r[r.VK_NONAME=252]="VK_NONAME",r[r.PHANTOM=255]="PHANTOM"})(Dr||(Dr={}));var uf={};uf.arc=zr,uf.curve=as,uf.line=Sl,uf.lineOnAxis=cn,uf.lineTo=$l,uf.moveBy=ii,uf.moveTo=ys,uf.point=Cn;var la={};la.Coordinate=tn,la.KeyCodes=Dr,la.Rect=vi,la.Size=Ss,la.Svg=Be,la.aria=Bu,la.array=a0,la.browserEvents=ud,la.colour=wp,la.deprecation=a_,la.dom=Aa,la.extensions=xp,la.idGenerator=sc,la.math=Bm,la.object=Ww,la.parsing=Fv,la.string=vn,la.style=hd,la.svgMath=Hf,la.svgPaths=uf,la.toolbox=Zl,la.userAgent=Sm,la.xml=qp;var Lb={};Lb.register=Zi,Lb.unregister=Xp;var y_=class extends Yi{constructor(r,a,p,b){super(a,p,b),this.text=r,this.workspace=a,this.anchor=p,this.ownerRect=b,this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(r){this.text=r,ct(this.paragraph),this.paragraph=this.stringToSvg(r,this.contentContainer),this.updateBubbleSize()}stringToSvg(r,a){return a=this.createParagraph(a),r=this.createSpans(a,r),this.workspace.RTL&&this.rightAlignSpans(a.getBBox().width,r),a}createParagraph(r){return ee(Be.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Yi.BORDER_WIDTH},r)}createSpans(r,a){return a.split(`
`).map(p=>{const b=ee(Be.TSPAN,{dy:"1em",x:Yi.BORDER_WIDTH},r);return p=document.createTextNode(p),b.appendChild(p),b})}rightAlignSpans(r,a){for(const p of a)p.setAttribute("text-anchor","end"),p.setAttribute("x",`${r+Yi.BORDER_WIDTH}`)}updateBubbleSize(){const r=this.paragraph.getBBox();this.setSize(new Ss(r.width+2*Yi.BORDER_WIDTH,r.height+2*Yi.BORDER_WIDTH),!0)}},fd=class extends Yi{constructor(r,a,p){super(r,a,p),this.workspace=r,this.anchor=a,this.ownerRect=p,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Ss(160+Yi.DOUBLE_BORDER,80+Yi.DOUBLE_BORDER),this.MIN_SIZE=new Ss(45+Yi.DOUBLE_BORDER,20+Yi.DOUBLE_BORDER),{inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer),this.resizeGroup=this.createResizeHandle(this.svgRoot),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(r){this.text=r,this.textArea.value=r,this.onTextChange()}addTextChangeListener(r){this.textChangeListeners.push(r)}addSizeChangeListener(r){this.sizeChangeListeners.push(r)}createEditor(r){r=ee(Be.FOREIGNOBJECT,{x:Yi.BORDER_WIDTH,y:Yi.BORDER_WIDTH},r);const a=document.createElementNS(Oc,"body");a.setAttribute("xmlns",Oc),a.className="blocklyMinimalBody";const p=document.createElementNS(Oc,"textarea");return p.className="blocklyCommentTextarea",p.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),a.appendChild(p),r.appendChild(a),this.bindTextAreaEvents(p),setTimeout(()=>{p.focus()},0),{inputRoot:r,textArea:p}}bindTextAreaEvents(r){Se(r,"wheel",this,a=>{a.stopPropagation()}),Se(r,"focus",this,this.onStartEdit,!0),Se(r,"change",this,this.onTextChange)}createResizeHandle(r){r=ee(Be.G,{class:this.workspace.RTL?"blocklyResizeSW":"blocklyResizeSE"},r);const a=2*Yi.BORDER_WIDTH;return ee(Be.POLYGON,{points:`0,${a} ${a},${a} ${a},0`},r),ee(Be.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},r),ee(Be.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},r),Se(r,"pointerdown",this,this.onResizePointerDown),r}setSize(r,a=!1){r.width=Math.max(r.width,this.MIN_SIZE.width),r.height=Math.max(r.height,this.MIN_SIZE.height);const p=r.width-Yi.DOUBLE_BORDER,b=r.height-Yi.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${p}`),this.inputRoot.setAttribute("height",`${b}`),this.textArea.style.width=`${p-4}px`,this.textArea.style.height=`${b-4}px`,this.workspace.RTL?this.resizeGroup.setAttribute("transform",`translate(${Yi.DOUBLE_BORDER}, ${b}) scale(-1 1)`):this.resizeGroup.setAttribute("transform",`translate(${p}, ${b})`),super.setSize(r,a),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(r){this.bringToFront(),wt(r)||(this.workspace.startDrag(r,new tn(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=Se(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=Se(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),r.stopPropagation()}onResizePointerUp(r){et(),this.resizePointerUpListener&&(rt(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(rt(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(r){r=this.workspace.moveDrag(r),this.setSize(new Ss(this.workspace.RTL?-r.x:r.x,r.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const r of this.textChangeListeners)r()}onSizeChange(){for(const r of this.sizeChangeListeners)r()}};It(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Ig=17,jw=160,Xw=80,Lh=class extends Rb{constructor(r){super(r),this.sourceBlock=r,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new Ss(jw,Xw),this.bubbleVisiblity=!1}getType(){return Lh.TYPE}initView(r){this.svgRoot||(super.initView(r),ee(Be.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),ee(Be.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),ee(Be.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-comment"))}dispose(){super.dispose();let r;(r=this.textInputBubble)==null||r.dispose();let a;(a=this.textBubble)==null||a.dispose()}getWeight(){return Lh.WEIGHT}getSize(){return new Ss(Ig,Ig)}applyColour(){super.applyColour();const r=this.sourceBlock.style.colourPrimary;let a;(a=this.textInputBubble)==null||a.setColour(r);let p;(p=this.textBubble)==null||p.setColour(r)}updateEditable(){super.updateEditable(),this.bubbleIsVisible()&&(this.setBubbleVisible(!1),this.setBubbleVisible(!0))}onLocationChange(r){super.onLocationChange(r),r=this.getAnchorLocation();let a;(a=this.textInputBubble)==null||a.setAnchorLocation(r);let p;(p=this.textBubble)==null||p.setAnchorLocation(r)}setText(r){const a=this.text;ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,a,r)),this.text=r;let p;(p=this.textInputBubble)==null||p.setText(this.text);let b;(b=this.textBubble)==null||b.setText(this.text)}getText(){return this.text}setBubbleSize(r){this.bubbleSize=r;let a;(a=this.textInputBubble)==null||a.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(r){let a;this.text=(a=r.text)!=null?a:"";let p,b;this.bubbleSize=new Ss((p=r.width)!=null?p:jw,(b=r.height)!=null?b:Xw);let R;this.bubbleVisiblity=(R=r.pinned)!=null?R:!1,setTimeout(()=>this.setBubbleVisible(this.bubbleVisiblity),1)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var r=this.textInputBubble.getText();this.text!==r&&(ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,r)),this.text=r)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(r){(!r||!this.textBubble&&!this.textInputBubble)&&(r||this.textBubble||this.textInputBubble)&&(this.bubbleVisiblity=r,this.sourceBlock.rendered&&!this.sourceBlock.isInFlyout&&(r?(this.sourceBlock.isEditable()?this.showEditableBubble():this.showNonEditableBubble(),this.applyColour()):this.hideBubble(),ue(new(xe(eo))(this.sourceBlock,r,"comment"))))}showEditableBubble(){this.textInputBubble=new fd(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.textBubble=new y_(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let r;(r=this.textInputBubble)==null||r.dispose(),this.textInputBubble=null;let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}getAnchorLocation(){const r=Ig/2;return tn.sum(this.workspaceLocation,new tn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new vi(r.y,r.y+r.height,r.x,r.x+r.width)}};Lh.TYPE=co.COMMENT,Lh.WEIGHT=3,Zi(Lh.TYPE,Lh);var vE=17,cf=class extends Rb{constructor(r){super(r),this.sourceBlock=r,this.textMap=new Map,this.textBubble=null}getType(){return cf.TYPE}initView(r){this.svgRoot||(super.initView(r),ee(Be.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),ee(Be.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),ee(Be.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),ke(this.svgRoot,"blockly-icon-warning"))}dispose(){super.dispose();let r;(r=this.textBubble)==null||r.dispose()}getWeight(){return cf.WEIGHT}getSize(){return new Ss(vE,vE)}applyColour(){super.applyColour();let r;(r=this.textBubble)==null||r.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(r){super.onLocationChange(r);let a;(a=this.textBubble)==null||a.setAnchorLocation(this.getAnchorLocation())}addMessage(r,a){if(this.textMap.get(a)===r)return this;r?this.textMap.set(a,r):this.textMap.delete(a);let p;return(p=this.textBubble)==null||p.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(r){if(this.bubbleIsVisible()!==r){if(r)this.textBubble=new y_(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.applyColour();else{let a;(a=this.textBubble)==null||a.dispose(),this.textBubble=null}ue(new(xe(eo))(this.sourceBlock,r,"warning"))}}getAnchorLocation(){const r=vE/2;return tn.sum(this.workspaceLocation,new tn(r,r))}getBubbleOwnerRect(){const r=this.sourceBlock.getSvgRoot().getBBox();return new vi(r.y,r.y+r.height,r.x,r.x+r.width)}};cf.TYPE=co.WARNING,cf.WEIGHT=2;var yE=class extends Error{constructor(r){super(`Tried to append an icon of type ${r.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=r}},Qf={};Qf.DuplicateIconType=yE;var Cr={};Cr.CommentIcon=Lh,Cr.Icon=Rb,Cr.IconType=co,Cr.MutatorIcon=t.MutatorIcon$$module$build$src$core$icons$mutator_icon,Cr.WarningIcon=cf,Cr.exceptions=Qf,Cr.registry=Lb;var zv,Co;zv="PROCEDURE",t.DEFAULT_ARG$$module$build$src$core$procedures="x",Co={CATEGORY_NAME:zv,DEFAULT_ARG:t.DEFAULT_ARG$$module$build$src$core$procedures},Co.ObservableProcedureMap=Ib,Co.allProcedures=Kc,Co.findLegalName=t.findLegalName$$module$build$src$core$procedures,Co.flyoutCategory=rn,Co.getCallers=$u,Co.getDefinition=t.getDefinition$$module$build$src$core$procedures,Co.isNameUsed=dn,Co.isProcedureBlock=ia,Co.mutateCallers=t.mutateCallers$$module$build$src$core$procedures,Co.mutatorOpenListener=Zu,Co.rename=t.rename$$module$build$src$core$procedures;var Yw=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(r){return Object.prototype.hasOwnProperty.call(this,r)||(this[r]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[r]}isField(r){return r.type&this.FIELD}isHat(r){return r.type&this.HAT}isIcon(r){return r.type&this.ICON}isSpacer(r){return r.type&this.SPACER}isInRowSpacer(r){return r.type&this.IN_ROW_SPACER}isInput(r){return r.type&this.INPUT}isExternalInput(r){return r.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(r){return r.type&this.INLINE_INPUT}isStatementInput(r){return r.type&this.STATEMENT_INPUT}isPreviousConnection(r){return r.type&this.PREVIOUS_CONNECTION}isNextConnection(r){return r.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(r){return r.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(r){return r.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(r){return r.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(r){return r.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(r){return r.type&this.RIGHT_SQUARE_CORNER}isCorner(r){return r.type&this.CORNER}isJaggedEdge(r){return r.type&this.JAGGED_EDGE}isRow(r){return r.type&this.ROW}isBetweenRowSpacer(r){return r.type&this.BETWEEN_ROW_SPACER}isTopRow(r){return r.type&this.TOP_ROW}isBottomRow(r){return r.type&this.BOTTOM_ROW}isTopOrBottomRow(r){return r.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(r){return r.type&this.INPUT_ROW}},tt=new Yw,Zr=class{constructor(r){this.centerline=this.xPos=this.height=this.width=0,this.constants_=r,this.type=tt.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},Hv=class{constructor(r){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=r,this.type=tt.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(tt.isInput(a))return a}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let r=0;r<this.elements.length;r++){const a=this.elements[r];if(tt.isSpacer(a))return a}return null}getLastSpacer(){for(let r=this.elements.length-1;0<=r;r--){const a=this.elements[r];if(tt.isSpacer(a))return a}return null}},Db=class extends Hv{constructor(r){super(r),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=tt.BOTTOM_ROW}hasLeftSquareCorner(r){return!!r.outputConnection||!!r.getNextBlock()}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,p=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,tt.isSpacer(R)||(tt.isNextConnection(R)?p=Math.max(p,R.height):r=Math.max(r,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+p,this.descenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Cp=class extends Zr{constructor(r,a){super(r),this.connectionModel=a,this.type|=tt.CONNECTION,this.shape=this.constants_.shapeFor(a),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=a.isHighlighted()}},Rg=class extends Cp{constructor(r,a){super(r,a.connection),this.input=a,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=tt.INPUT,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(r=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=r.width,this.connectedBlockHeight=r.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},Nb=class extends Rg{constructor(r,a){super(r,a),this.height=0,this.type|=tt.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},b_=class extends Zr{constructor(r,a,p){super(r),this.field=a,this.parentInput=p,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=tt.FIELD,r=this.field.getSize(),this.height=r.height,this.width=r.width}},bE=class extends Zr{constructor(r){super(r),this.type|=tt.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},Kw=class extends Zr{constructor(r,a){super(r),this.icon=a,this.flipRtl=!1,this.isVisible=El(a)&&a.bubbleIsVisible(),this.type|=tt.ICON,r=a.getSize(),this.height=r.height,this.width=r.width}},Xd=class extends Zr{constructor(r,a){super(r),this.type=this.type|tt.SPACER|tt.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},TE=class extends Rg{constructor(r,a){super(r,a),this.type|=tt.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Gv=class extends Rg{constructor(r,a){super(r,a),this.type|=tt.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},EE=class extends Hv{constructor(r){super(r),this.connectedBlockWidths=0,this.type|=tt.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let r=0;for(let a=0;a<this.elements.length;a++){const p=this.elements[a];this.width+=p.width,tt.isInput(p)&&p instanceof Rg&&(tt.isStatementInput(p)&&p instanceof Gv?r+=p.connectedBlockWidth:tt.isExternalInput(p)&&p instanceof Nb&&p.connectedBlockWidth!==0&&(r+=p.connectedBlockWidth-p.connectionWidth)),tt.isSpacer(p)||(this.height=Math.max(this.height,p.height))}this.connectedBlockWidths=r,this.widthWithConnectedBlocks=this.width+r}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},Jw=class extends Zr{constructor(r){super(r),this.type|=tt.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},Qw=class extends Cp{constructor(r,a){super(r,a),this.type|=tt.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},qw=class extends Cp{constructor(r,a){super(r,a),this.connectionOffsetX=0,this.type|=tt.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},Zw=class extends Cp{constructor(r,a){super(r,a),this.type|=tt.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},v0=class extends Zr{constructor(r,a){super(r),this.type=(a&&a!=="left"?tt.RIGHT_ROUND_CORNER:tt.LEFT_ROUND_CORNER)|tt.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},$E=class extends Hv{constructor(r,a,p){super(r),this.height=a,this.width=p,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|tt.SPACER|tt.BETWEEN_ROW_SPACER,this.elements=[new Xd(this.constants_,p)]}measure(){}},y0=class extends Zr{constructor(r,a){super(r),this.type=(a&&a!=="left"?tt.RIGHT_SQUARE_CORNER:tt.LEFT_SQUARE_CORNER)|tt.CORNER,this.width=this.height=this.constants_.NO_PADDING}},SE=class extends Hv{constructor(r){super(r),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=tt.TOP_ROW}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection,p=r.getPreviousBlock();return!!r.outputConnection||a||(p?p.getNextBlock()===r:!1)}hasRightSquareCorner(r){return!0}measure(){let r=0,a=0,p=0;for(let b=0;b<this.elements.length;b++){const R=this.elements[b];a+=R.width,tt.isSpacer(R)||(tt.isHat(R)&&R instanceof bE?p=Math.max(p,R.ascenderHeight):r=Math.max(r,R.height))}this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,r)+p,this.capline=this.ascenderHeight=p,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Wv=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=ii(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(r){this.blockStyles=Object.create(null);const a=r.blockStyles;for(const p in a)this.blockStyles[p]=this.validatedBlockStyle_(a[p]);this.setDynamicProperties_(r)}setDynamicProperties_(r){this.setFontConstants_(r),this.setComponentConstants_(r),this.ADD_START_HATS=r.startHats!==void 0?r.startHats:this.ADD_START_HATS}setFontConstants_(r){r.fontStyle&&r.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=r.fontStyle.family),r.fontStyle&&r.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=r.fontStyle.weight),r.fontStyle&&r.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=r.fontStyle.size),r=Fe("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=r.height,this.FIELD_TEXT_BASELINE=r.baseline}setComponentConstants_(r){this.CURSOR_COLOUR=r.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=r.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=r.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(r.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(r){const a="auto_"+r;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(r)),{style:this.blockStyles[a],name:a}}getBlockStyle(r){return this.blockStyles[r||""]||(r&&r.indexOf("auto_")===0?this.getBlockStyleForColour(r.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(r){return this.validatedBlockStyle_({colourPrimary:r})}validatedBlockStyle_(r){const a={};return r&&Object.assign(a,r),r=qi(a.colourPrimary||"#000"),a.colourPrimary=r.hex,a.colourSecondary=a.colourSecondary?qi(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?qi(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a}generateSecondaryColour_(r){return xc("#fff",r,.6)||r}generateTertiaryColour_(r){return xc("#fff",r,.3)||r}dispose(){this.embossFilter&&ct(this.embossFilter),this.disabledPattern&&ct(this.disabledPattern),this.debugFilter&&ct(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const r=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH,p=Sl([Cn(a,r/4),Cn(2*-a,r/2),Cn(a,r/4)]);return{height:r,width:a,path:p}}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=as("c",[Cn(30,-r),Cn(70,-r),Cn(a,0)]);return{height:r,width:a,path:p}}makePuzzleTab(){function r(W){W=W?-1:1;const pe=-W;var Le=p/2;const Nt=Le+2.5,$n=Le+.5,zo=Cn(-a,W*Le);return Le=Cn(a,W*Le),as("c",[Cn(0,W*Nt),Cn(-a,pe*$n),zo])+as("s",[Cn(a,2.5*pe),Le])}const a=this.TAB_WIDTH,p=this.TAB_HEIGHT,b=r(!0),R=r(!1);return{type:this.SHAPES.PUZZLE,width:a,height:p,pathDown:R,pathUp:b}}makeNotch(){function r(pe){return Sl([Cn(pe*b,p),Cn(3*pe,0),Cn(pe*b,-p)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,b=(a-3)/2,R=r(1),W=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:R,pathRight:W}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=zr("a","0 0,0",r,Cn(-r,r)),p=zr("a","0 0,0",r,Cn(r,r));return{width:r,height:r,pathTop:a,pathBottom:p}}makeOutsideCorners(){const r=this.CORNER_RADIUS,a=ii(0,r)+zr("a","0 0,1",r,Cn(r,-r)),p=zr("a","0 0,1",r,Cn(r,r)),b=zr("a","0 0,1",r,Cn(-r,-r)),R=zr("a","0 0,1",r,Cn(-r,r));return{topLeft:a,topRight:p,bottomRight:R,bottomLeft:b,rightHeight:r}}shapeFor(r){switch(r.type){case En.INPUT_VALUE:case En.OUTPUT_VALUE:return this.PUZZLE_TAB;case En.PREVIOUS_STATEMENT:case En.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(r,a,p){this.injectCSS_(a,p),this.defs=ee(Be.DEFS,{},r),r=ee(Be.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),ee(Be.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},r),a=ee(Be.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},r),ee(Be.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},a),ee(Be.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},r),ee(Be.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},r),this.embossFilterId=r.id,this.embossFilter=r,r=ee(Be.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),ee(Be.RECT,{width:10,height:10,fill:"#aaa"},r),ee(Be.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},r),this.disabledPatternId=r.id,this.disabledPattern=r,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const r=ee(Be.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),a=ee(Be.FECOMPONENTTRANSFER,{result:"outBlur"},r);ee(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),ee(Be.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},r),ee(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),this.debugFilterId=r.id,this.debugFilter=r}}injectCSS_(r,a){a=this.getCSS_(a),r="blockly-renderer-style-"+r,this.cssNode=document.getElementById(r);const p=a.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=p:(a=document.createElement("style"),a.id=r,r=document.createTextNode(p),a.appendChild(r),document.head.insertBefore(a,document.head.firstChild),this.cssNode=a)}getCSS_(r){return[`${r} .blocklyText, `,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect,`,`${r} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text {`,"fill: #000;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${r} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${r} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${r} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${r} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${r} .blocklyReplaceable .blocklyPathLight,`,`${r} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Vv=class{constructor(r,a){this.inlinePath_=this.outlinePath_="",this.block_=r,this.info_=a,this.topLeft_=r.getRelativeToSurfaceXY(),this.constants_=a.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}hideHiddenIcons_(){ve("hideHiddenIcons_","v10","v11")}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let r=1;r<this.info_.rows.length-1;r++){const a=this.info_.rows[r];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const r=this.info_.topRow,a=r.elements;this.positionPreviousConnection_(),this.outlinePath_+=ii(r.xPos,this.info_.startY);for(let p=0,b;b=a[p];p++)tt.isLeftRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:tt.isRightRoundedCorner(b)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:tt.isPreviousConnection(b)&&b instanceof Cp?this.outlinePath_+=b.shape.pathLeft:tt.isHat(b)?this.outlinePath_+=this.constants_.START_HAT.path:tt.isSpacer(b)&&(this.outlinePath_+=cn("h",b.width));this.outlinePath_+=cn("v",r.height)}drawJaggedEdge_(r){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+cn("v",r.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(r){const a=r.getLastInput();this.positionExternalValueConnection_(r);const p=ls(a.shape)?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=cn("H",a.xPos+a.width)+p+cn("v",r.height-a.connectionHeight)}drawStatementInput_(r){var a=r.getLastInput();if(a){var p=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+cn("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var b=r.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=cn("H",p)+a+cn("v",b)+this.constants_.INSIDE_CORNERS.pathBottom+cn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}}drawRightSideRow_(r){this.outlinePath_+=cn("V",r.yPos+r.height)}drawBottom_(){const r=this.info_.bottomRow,a=r.elements;this.positionNextConnection_();let p=0,b="";for(let R=a.length-1,W;W=a[R];R--)tt.isNextConnection(W)&&W instanceof Cp?b+=W.shape.pathRight:tt.isLeftSquareCorner(W)?b+=cn("H",r.xPos):tt.isLeftRoundedCorner(W)?b+=this.constants_.OUTSIDE_CORNERS.bottomLeft:tt.isRightRoundedCorner(W)?(b+=this.constants_.OUTSIDE_CORNERS.bottomRight,p=this.constants_.OUTSIDE_CORNERS.rightHeight):tt.isSpacer(W)&&(b+=cn("h",-1*W.width));this.outlinePath_+=cn("V",r.baseline-p),this.outlinePath_+=b}drawLeft_(){var r=this.info_.outputConnection;if(this.positionOutputConnection_(),r){const a=r.connectionOffsetY+r.height;r=ls(r.shape)?r.shape.pathUp(r.height):r.shape.pathUp,this.outlinePath_+=cn("V",a)+r}this.outlinePath_+="z"}drawInternals_(){for(let r=0,a;a=this.info_.rows[r];r++)for(let p=0,b;b=a.elements[p];p++)tt.isInlineInput(b)?this.drawInlineInput_(b):(tt.isIcon(b)||tt.isField(b))&&this.layoutField_(b)}layoutField_(r){const a=r.centerline-r.height/2;let p=r.xPos;var b="";this.info_.RTL&&(p=-(p+r.width),r.flipRtl&&(p+=r.width,b="scale(-1 1)")),tt.isIcon(r)?(b=r.icon,b.setOffsetInBlock(new tn(p,a)),this.info_.isInsertionMarker&&b.hideForInsertionMarker()):(r=r.field.getSvgRoot(),r.setAttribute("transform","translate("+p+","+a+")"+b),this.info_.isInsertionMarker&&r.setAttribute("display","none"))}drawInlineInput_(r){const a=r.width,p=r.height,b=r.connectionOffsetY,R=r.connectionHeight+b;this.inlinePath_+=ys(r.xPos+r.connectionWidth,r.centerline-p/2)+cn("v",b)+r.shape.pathDown+cn("v",p-R)+cn("h",a-r.connectionWidth)+cn("v",-p)+"z",this.positionInlineInputConnection_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let p=r.xPos+r.connectionWidth+r.connectionOffsetX;this.info_.RTL&&(p*=-1),r.connectionModel.setOffsetInBlock(p,a+r.connectionOffsetY)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let p=r.xPos+r.statementEdge+a.notchOffset;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let p=r.xPos+r.width;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionPreviousConnection_(){const r=this.info_.topRow;if(r.connection){const a=r.xPos+r.notchOffset;r.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,p=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-p:p,r.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const r=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-r:r,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const r of this.info_.rows)for(const a of r.elements)if(a instanceof Cp)if(a.highlighted)this.drawConnectionHighlightPath(a);else{let p,b;(b=(p=this.block_.pathObject).removeConnectionHighlight)==null||b.call(p,a.connectionModel)}}drawConnectionHighlightPath(r){const a=r.connectionModel;r=a.type===En.INPUT_VALUE||a.type===En.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(r):this.getStatementConnectionHighlightPath(r);const p=a.getSourceBlock();let b,R;(R=(b=p.pathObject).addConnectionHighlight)==null||R.call(b,a,r,a.getOffsetInBlock(),p.RTL)}getExpressionConnectionHighlightPath(r){let a="";return ls(r.shape)?a=r.shape.pathDown(r.height):Ea(r.shape)&&(a=r.shape.pathDown),r=this.constants_.TAB_OFFSET_FROM_TOP,ii(0,-r)+cn("v",r)+a+cn("v",r)}getStatementConnectionHighlightPath(r){if(!zi(r.shape))throw Error("Statement connections should have notch shapes");const a=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return ii(-a,0)+cn("h",a)+r.shape.pathLeft+cn("h",a)}};(function(r){r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(t.Align$$module$build$src$core$inputs$align||(t.Align$$module$build$src$core$inputs$align={})),t.Align$$module$build$src$core$inputs$align;var ua=class extends ai{constructor(r,a,p){super(ai.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,r!==ai.SKIP_SETUP&&(p?this.configure_(p):this.class=a||null,this.setValue(r))}configure_(r){super.configure_(r),r.class&&(this.class=r.class)}initView(){this.createTextElement_(),this.class&&ke(this.getTextElement(),this.class)}doClassValidation_(r){return r==null?null:`${r}`}setClass(r){this.textElement_&&(this.class&&dt(this.textElement_,this.class),r&&ke(this.textElement_,r)),this.class=r}static fromJson(r){return new this(xr(r.text),void 0,r)}};Xs("field_label",ua),ua.prototype.DEFAULT_VALUE="";var La=class{constructor(r,a){this.name=r,this.sourceBlock=a,this.fieldRow=[],this.align=t.Align$$module$build$src$core$inputs$input.LEFT,this.visible=!0,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(r,a){return this.insertFieldAt(this.fieldRow.length,r,a),this}insertFieldAt(r,a,p){if(0>r||r>this.fieldRow.length)throw Error("index "+r+" out of bounds.");return(a||a===""&&p)&&(typeof a=="string"&&(a=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock),this.sourceBlock.rendered&&(a.init(),a.applyColour()),a.name=p,a.setVisible(this.isVisible()),a.prefixField&&(r=this.insertFieldAt(r,a.prefixField)),this.fieldRow.splice(r,0,a),r++,a.suffixField&&(r=this.insertFieldAt(r,a.suffixField)),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours())),r}removeField(r,a){for(let p=0,b;b=this.fieldRow[p];p++)if(b.name===r)return b.dispose(),this.fieldRow.splice(p,1),this.sourceBlock.rendered&&(this.sourceBlock.queueRender(),this.sourceBlock.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+r+'" not found.')}isVisible(){return this.visible}setVisible(r){let a=[];if(this.visible===r)return a;this.visible=r;for(let b=0,R;R=this.fieldRow[b];b++)R.setVisible(r);if(this.connection){var p=this.connection;r?a=p.startTrackingAll():p.stopTrackingAll(),(p=p.targetBlock())&&(p.getSvgRoot().style.display=r?"block":"none")}return a}markDirty(){for(let r=0,a;a=this.fieldRow[r];r++)a.markDirty()}setCheck(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(r),this}setAlign(r){return this.align=r,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(r){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(r),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){if(this.sourceBlock.workspace.rendered)for(let r=0;r<this.fieldRow.length;r++)this.fieldRow[r].init()}dispose(){for(let r=0,a;a=this.fieldRow[r];r++)a.dispose();this.connection&&this.connection.dispose()}makeConnection(r){return this.sourceBlock.makeConnection_(r)}},ex;(function(r){r=r.Align||(r.Align={}),r[r.LEFT=-1]="LEFT",r[r.CENTRE=0]="CENTRE",r[r.RIGHT=1]="RIGHT"})(La||(La={})),t.Align$$module$build$src$core$inputs$input=La.Align,ex={Align:t.Align$$module$build$src$core$inputs$input},ex.Input=La;var qf=class extends La{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Wm=class extends La{constructor(r,a){super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},md=class extends La{constructor(r,a){if(!r)throw Error("Statement inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(En.NEXT_STATEMENT)}},tx;t.ValueInput$$module$build$src$core$inputs$value_input=class extends La{constructor(r,a){if(!r)throw Error("Value inputs must have a non-empty name");super(r,a),this.name=r,this.type=t.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(En.INPUT_VALUE)}},tx={},tx.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input;var T_=class{constructor(r,a){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=r,this.block_=a,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new qw(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.topRow=new SE(this.constants_),this.bottomRow=new Db(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let r=new EE(this.constants_);this.inputRows.push(r);var a=this.block_.getIcons();for(let p=0,b;b=a[p];p++){const R=new Kw(this.constants_,b);this.isCollapsed&&!b.isShownWhenCollapsed()||r.elements.push(R)}a=void 0;for(let p=0,b;b=this.block_.inputList[p];p++)if(b.isVisible()){this.shouldStartNewRow_(b,a)&&(this.rows.push(r),r=new EE(this.constants_),this.inputRows.push(r));for(let R=0,W;W=b.fieldRow[R];R++)r.elements.push(new b_(this.constants_,W,b));this.addInput_(b,r),a=b}this.isCollapsed&&(r.hasJaggedEdge=!0,r.elements.push(new Jw(this.constants_))),(r.elements.length||r.hasDummyInput)&&this.rows.push(r),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var r=!!this.block_.previousConnection;const a=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!r;let p=this.topRow.hasLeftSquareCorner(this.block_)?y0:v0;this.topRow.elements.push(new p(this.constants_)),a?(r=new bE(this.constants_),this.topRow.elements.push(r),this.topRow.capline=r.ascenderHeight):r&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Zw(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof md&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,p=this.topRow.hasRightSquareCorner(this.block_)?y0:v0,this.topRow.elements.push(new p(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof md?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new y0(this.constants_)):this.bottomRow.elements.push(new v0(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Qw(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new y0(this.constants_,"right")):this.bottomRow.elements.push(new v0(this.constants_,"right"))}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new TE(this.constants_,r)),a.hasInlineInput=!0):r instanceof md?(a.elements.push(new Gv(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Nb(this.constants_,r)),a.hasExternalInput=!0):(r instanceof qf||r instanceof Wm)&&(a.minHeight=Math.max(a.minHeight,r.getSourceBlock()&&r.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),a.align===null&&(a.align=r.align)}shouldStartNewRow_(r,a){return a?a instanceof Wm||r instanceof md||a instanceof md?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof qf||a instanceof t.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let r=0,a;a=this.rows[r];r++){const p=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Xd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let b=0;b<p.length-1;b++){a.elements.push(p[b]);const R=this.getInRowSpacing_(p[b],p[b+1]);a.elements.push(new Xd(this.constants_,R))}a.elements.push(p[p.length-1]),a.endsWithElemSpacer()&&a.elements.push(new Xd(this.constants_,this.getInRowSpacing_(p[p.length-1],null)))}}}getInRowSpacing_(r,a){if(!r&&a&&tt.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(r&&tt.isInput(r)&&!a){if(tt.isExternalInput(r))return this.constants_.NO_PADDING;if(tt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(tt.isStatementInput(r))return this.constants_.NO_PADDING}return r&&tt.isLeftSquareCorner(r)&&a&&(tt.isPreviousConnection(a)||tt.isNextConnection(a))?a.notchOffset:r&&tt.isLeftRoundedCorner(r)&&a&&(tt.isPreviousConnection(a)||tt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let r=0,a=0,p=0;for(let R=0,W;W=this.rows[R];R++){if(W.measure(),a=Math.max(a,W.width),W.hasStatement){var b=W.getLastInput();let pe,Le;b=W.width-((Le=(pe=b)==null?void 0:pe.width)!=null?Le:0),r=Math.max(r,b)}p=Math.max(p,W.widthWithConnectedBlocks)}this.statementEdge=r,this.width=a;for(let R=0,W;W=this.rows[R];R++)W.hasStatement&&(W.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,p),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let a=0,p;p=this.rows[a];a++)if(p.hasStatement)this.alignStatementRow_(p);else{var r=p.width;r=this.getDesiredRowWidth_(p)-r,0<r&&this.addAlignmentPadding_(p,r),tt.isTopOrBottomRow(p)&&(p.widthWithConnectedBlocks=p.width)}}getDesiredRowWidth_(r){return this.width-this.startX}addAlignmentPadding_(r,a){const p=r.getFirstSpacer(),b=r.getLastSpacer();if((r.hasExternalInput||r.hasStatement)&&(r.widthWithConnectedBlocks+=a),r.align===t.Align$$module$build$src$core$inputs$align.LEFT&&b)b.width+=a;else if(r.align===t.Align$$module$build$src$core$inputs$align.CENTRE&&p&&b)p.width+=a/2,b.width+=a/2;else if(r.align===t.Align$$module$build$src$core$inputs$align.RIGHT&&p)p.width+=a;else if(b)b.width+=a;else return;r.width+=a}alignStatementRow_(r){const a=r.getLastInput();if(a){var p=r.width-a.width,b=this.statementEdge;p=b-p,0<p&&this.addAlignmentPadding_(r,p),p=r.width,b=this.getDesiredRowWidth_(r),a.width+=b-p,a.height=Math.max(a.height,r.height),r.width+=b-p,r.widthWithConnectedBlocks=Math.max(r.width,this.statementEdge+r.connectedBlockWidths)}}addRowSpacing_(){const r=this.rows;this.rows=[];for(let a=0;a<r.length;a++)this.rows.push(r[a]),a!==r.length-1&&this.rows.push(this.makeSpacerRow_(r[a],r[a+1]))}makeSpacerRow_(r,a){var p=this.getSpacerRowHeight_(r,a);const b=this.getSpacerRowWidth_(r,a);return p=new $E(this.constants_,p,b),r.hasStatement&&(p.followsStatement=!0),a.hasStatement&&(p.precedesStatement=!0),p}getSpacerRowWidth_(r,a){return this.width-this.startX}getSpacerRowHeight_(r,a){return this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){return tt.isSpacer(a)?r.yPos+a.height/2:tt.isBottomRow(r)?(r=r.yPos+r.height-r.descenderHeight,tt.isNextConnection(a)?r+a.height/2:r-a.height/2):tt.isTopRow(r)?tt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2:r.yPos+r.height/2}recordElemPositions_(r){let a=r.xPos;for(let p=0,b;b=r.elements[p];p++)tt.isSpacer(b)&&(b.height=r.height),b.xPos=a,b.centerline=this.getElemCenterline_(r,b),a+=b.width}finalize_(){let r=0,a=0;for(let p=0,b;b=this.rows[p];p++)b.yPos=a,b.xPos=this.startX,a+=b.height,r=Math.max(r,b.widthWithConnectedBlocks),this.recordElemPositions_(b);if(this.outputConnection&&this.block_.nextConnection){const p=this.block_.nextConnection.targetBlock();p&&(r=Math.max(r,p.getHeightWidth().width))}this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight}getMeasureableForConnection(r){let a;if(((a=this.outputConnection)==null?void 0:a.connectionModel)===r)return this.outputConnection;for(const p of this.rows)for(const b of p.elements)if(b instanceof Cp&&b.connectionModel===r)return b;return null}},Vt=class{constructor(r,a,p){if(this.wsCoordinate=null,!a)throw Error("Cannot create a node without a location.");this.type=r,this.isConnectionLocation=Vt.isConnectionType(r),this.location=a,this.processParams(p||null)}processParams(r){r&&r.wsCoordinate&&(this.wsCoordinate=r.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var r=this.location.getParentInput();const a=r.getSourceBlock();for(r=a.inputList.indexOf(r),r+=1;r<a.inputList.length;r++){const p=a.inputList[r],b=p.fieldRow;for(let R=0;R<b.length;R++){const W=b[R];if(W.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(W)}if(p.connection)return Vt.createInputNode(p)}return null}findNextForField(){var r=this.location,a=r.getParentInput();const p=r.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var b=p.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)+1;b<p.inputList.length;b++){a=p.inputList[b];const R=a.fieldRow;for(;r<R.length;){if(R[r].isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(R[r]);r++}if(r=0,a.connection)return Vt.createInputNode(a)}return null}findPrevForInput(){const r=this.location.getParentInput(),a=r.getSourceBlock();for(var p=a.inputList.indexOf(r);0<=p;p--){var b=a.inputList[p];if(b.connection&&b!==r)return Vt.createInputNode(b);b=b.fieldRow;for(let R=b.length-1;0<=R;R--){const W=b[R];if(W.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(W)}}return null}findPrevForField(){var r=this.location;const a=r.getParentInput(),p=r.getSourceBlock();if(!p)throw Error("The current AST location is not associated with a block");var b=p.inputList.indexOf(a);for(r=a.fieldRow.indexOf(r)-1;0<=b;b--){var R=p.inputList[b];if(R.connection&&R!==a)return Vt.createInputNode(R);for(R=R.fieldRow;-1<r;){if(R[r].isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(R[r]);r--}0<=b-1&&(r=p.inputList[b-1].fieldRow.length-1)}return null}navigateBetweenStacks(r){var a=this.getLocation();if(a.getSourceBlock){var p=a.getSourceBlock();p&&(a=p)}if(!a||a.isDeadOrDying())return null;p=a.getRootBlock(),a=p.workspace.getTopBlocks(!0);for(let b=0;b<a.length;b++)if(p.id===a[b].id)return r=b+(r?1:-1),r===-1||r===a.length?null:Vt.createStackNode(a[r]);throw Error("Couldn't find "+(r?"next":"previous")+" stack?!")}findTopASTNodeForBlock(r){const a=$a(r);return a?Vt.createConnectionNode(a):Vt.createBlockNode(r)}getOutAstNodeForBlock(r){if(!r)return null;r=r.getTopStackBlock();const a=$a(r);return a&&a.targetConnection&&a.targetConnection.getParentInput()?Vt.createInputNode(a.targetConnection.getParentInput()):Vt.createStackNode(r)}findFirstFieldOrInput(r){r=r.inputList;for(let a=0;a<r.length;a++){const p=r[a],b=p.fieldRow;for(let R=0;R<b.length;R++){const W=b[R];if(W.isClickable()||Vt.NAVIGATE_ALL_FIELDS)return Vt.createFieldNode(W)}if(p.connection)return Vt.createInputNode(p)}return null}getSourceBlock(){return this.getType()===Vt.types.BLOCK?this.getLocation():this.getType()===Vt.types.STACK?this.getLocation():this.getType()===Vt.types.WORKSPACE?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Vt.types.STACK:return this.navigateBetweenStacks(!0);case Vt.types.OUTPUT:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.FIELD:return this.findNextForField();case Vt.types.INPUT:return this.findNextForInput();case Vt.types.BLOCK:const r=this.location.nextConnection;if(!r)break;return Vt.createConnectionNode(r);case Vt.types.PREVIOUS:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.NEXT:return Vt.createConnectionNode(this.location.targetConnection)}return null}in(){switch(this.type){case Vt.types.WORKSPACE:const r=this.location.getTopBlocks(!0);if(0<r.length)return Vt.createStackNode(r[0]);break;case Vt.types.STACK:return this.findTopASTNodeForBlock(this.location);case Vt.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Vt.types.INPUT:return Vt.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Vt.types.STACK:return this.navigateBetweenStacks(!1);case Vt.types.FIELD:return this.findPrevForField();case Vt.types.INPUT:return this.findPrevForInput();case Vt.types.BLOCK:var r=$a(this.location);if(!r)break;return Vt.createConnectionNode(r);case Vt.types.PREVIOUS:if((r=this.location.targetConnection)&&!r.getParentInput())return Vt.createConnectionNode(r);break;case Vt.types.NEXT:return Vt.createBlockNode(this.location.getSourceBlock())}return null}out(){switch(this.type){case Vt.types.STACK:var r=this.location,a=r.getRelativeToSurfaceXY();return a=new tn(a.x,a.y+Vt.DEFAULT_OFFSET_Y),Vt.createWorkspaceNode(r.workspace,a);case Vt.types.OUTPUT:return r=this.location,(a=r.targetConnection)?Vt.createConnectionNode(a):Vt.createStackNode(r.getSourceBlock());case Vt.types.FIELD:if(r=this.location.getSourceBlock(),!r)throw Error("The current AST location is not associated with a block");return Vt.createBlockNode(r);case Vt.types.INPUT:return Vt.createBlockNode(this.location.getSourceBlock());case Vt.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Vt.types.PREVIOUS:return this.getOutAstNodeForBlock(this.location.getSourceBlock());case Vt.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(r){switch(r){case Vt.types.PREVIOUS:case Vt.types.NEXT:case Vt.types.INPUT:case Vt.types.OUTPUT:return!0}return!1}static createFieldNode(r){return r?new Vt(Vt.types.FIELD,r):null}static createConnectionNode(r){if(!r)return null;const a=r.type;return a===En.INPUT_VALUE||a===En.NEXT_STATEMENT&&r.getParentInput()?Vt.createInputNode(r.getParentInput()):a===En.NEXT_STATEMENT?new Vt(Vt.types.NEXT,r):a===En.OUTPUT_VALUE?new Vt(Vt.types.OUTPUT,r):a===En.PREVIOUS_STATEMENT?new Vt(Vt.types.PREVIOUS,r):null}static createInputNode(r){return r&&r.connection?new Vt(Vt.types.INPUT,r.connection):null}static createBlockNode(r){return r?new Vt(Vt.types.BLOCK,r):null}static createStackNode(r){return r?new Vt(Vt.types.STACK,r):null}static createWorkspaceNode(r,a){return a&&r?new Vt(Vt.types.WORKSPACE,r,{wsCoordinate:a}):null}static createTopNode(r){const a=$a(r);return a?Vt.createConnectionNode(a):Vt.createBlockNode(r)}};Vt.NAVIGATE_ALL_FIELDS=!1,Vt.DEFAULT_OFFSET_Y=-20,function(r){r=r.types||(r.types={}),r.FIELD="field",r.BLOCK="block",r.INPUT="input",r.OUTPUT="output",r.NEXT="next",r.PREVIOUS="previous",r.STACK="stack",r.WORKSPACE="workspace"}(Vt||(Vt={}));var Bb=class extends f{constructor(r,a,p,b){let R=r?r.workspace.id:void 0;b&&b.getType()===Vt.types.WORKSPACE&&(R=b.getLocation().id),super(R),this.type=Cl,this.blockId=r==null?void 0:r.id,this.oldNode=p||void 0,this.newNode=b,this.isCursor=a}toJson(){const r=super.toJson();if(this.isCursor===void 0)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return r.isCursor=this.isCursor,r.blockId=this.blockId,r.oldNode=this.oldNode,r.newNode=this.newNode,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Bb),a.isCursor=r.isCursor,a.blockId=r.blockId,a.oldNode=r.oldNode,a.newNode=r.newNode,a}};i(Dt.EVENT,Cl,Bb);var DR="blocklyCursor",NR="blocklyMarker",BR=.75,Pb=class{constructor(r,a,p){this.workspace=r,this.marker=p,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=a,r=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=p.colour||r}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return this.marker.type==="cursor"}createDom(){const r=this.isCursor()?DR:NR;return this.svgGroup_=ee(Be.G,{class:r}),this.createDomInternal_(),this.svgGroup_}setParent_(r){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),r.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),r.setMarkerSvg(this.getSvgRoot())),this.parent=r}draw(r,a){if(a){this.constants_=this.workspace.getRenderer().getConstants();var p=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||p,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent(r,a),r=this.currentMarkerSvg.childNodes[0],r!==void 0&&r.beginElement&&r.beginElement()}else this.hide()}showAtLocation_(r){const a=r.getLocation().type;r.getType()===Vt.types.BLOCK?this.showWithBlock_(r):r.getType()===Vt.types.OUTPUT?this.showWithOutput_(r):a===En.INPUT_VALUE?this.showWithInput_(r):a===En.NEXT_STATEMENT?this.showWithNext_(r):r.getType()===Vt.types.PREVIOUS?this.showWithPrevious_(r):r.getType()===Vt.types.FIELD?this.showWithField_(r):r.getType()===Vt.types.WORKSPACE?this.showWithCoordinates_(r):r.getType()===Vt.types.STACK&&this.showWithStack_(r)}showWithBlockPrevOutput(r){r=r.getSourceBlock();const a=r.width;var p=r.height,b=p*BR;const R=this.constants_.CURSOR_BLOCK_PADDING;r.previousConnection?(p=this.constants_.shapeFor(r.previousConnection),this.positionPrevious_(a,R,b,p)):r.outputConnection?(b=this.constants_.shapeFor(r.outputConnection),this.positionOutput_(a,p,b)):this.positionBlock_(a,R,b),this.setParent_(r),this.showCurrent_()}showWithBlock_(r){this.showWithBlockPrevOutput(r)}showWithPrevious_(r){this.showWithBlockPrevOutput(r)}showWithOutput_(r){this.showWithBlockPrevOutput(r)}showWithCoordinates_(r){var a=r.getWsCoordinate();r=a.x,a=a.y,this.workspace.RTL&&(r-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(r,a,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(r){r=r.getLocation();const a=r.getSize().width,p=r.getSize().height;this.positionRect_(0,0,a,p),this.setParent_(r),this.showCurrent_()}showWithInput_(r){r=r.getLocation();const a=r.getSourceBlock();this.positionInput_(r),this.setParent_(a),this.showCurrent_()}showWithNext_(r){var a=r.getLocation();r=a.getSourceBlock();let p=0;a=a.getOffsetInBlock().y;const b=r.getHeightWidth().width;this.workspace.RTL&&(p=-b),this.positionLine_(p,a,b),this.setParent_(r),this.showCurrent_()}showWithStack_(r){r=r.getLocation();var a=r.getHeightWidth();const p=a.width+this.constants_.CURSOR_STACK_PADDING;a=a.height+this.constants_.CURSOR_STACK_PADDING;const b=-this.constants_.CURSOR_STACK_PADDING/2,R=-this.constants_.CURSOR_STACK_PADDING/2;let W=b;this.workspace.RTL&&(W=-(p+b)),this.positionRect_(W,R,p,a),this.setParent_(r),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(r,a,p){if(r=ii(-a,p)+cn("V",-a)+cn("H",r+2*a)+cn("V",p),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(r){const a=r.getOffsetInBlock().x,p=r.getOffsetInBlock().y;r=ys(0,0)+this.constants_.shapeFor(r).pathDown,this.markerInput_.setAttribute("d",r),this.markerInput_.setAttribute("transform","translate("+a+","+p+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(r,a,p){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${r}`),this.markerSvgLine_.setAttribute("y",`${a}`),this.markerSvgLine_.setAttribute("width",`${p}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(r,a,p){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");r=ii(r,0)+cn("h",-(r-p.width))+cn("v",this.constants_.TAB_OFFSET_FROM_TOP)+p.pathDown+cn("V",a)+cn("H",r),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(r,a,p,b){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");r=ii(-a,p)+cn("V",-a)+cn("H",this.constants_.NOTCH_OFFSET_LEFT)+b.pathLeft+cn("H",r+2*a)+cn("V",p),this.markerBlock_.setAttribute("d",r),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(r,a,p,b){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${r}`),this.markerSvgRect_.setAttribute("y",`${a}`),this.markerSvgRect_.setAttribute("width",`${p}`),this.markerSvgRect_.setAttribute("height",`${b}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(r){r.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(r,a){const p=a.getSourceBlock();r=new(xe(Cl))(p,this.isCursor(),r,a),ue(r)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=ee(Be.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=ee(Be.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=ee(Be.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=ee(Be.PATH,{transform:""},this.markerSvg_),this.markerBlock_=ee(Be.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();ee(Be.ANIMATE,r,this.markerSvgLine_),ee(Be.ANIMATE,r,this.markerInput_),ee(Be.ANIMATE,Object.assign({},r,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(r){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(r=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",r),this.markerInput_.firstElementChild.setAttribute("values",r),this.markerBlock_.firstElementChild.setAttribute("values",r))}dispose(){this.svgGroup_&&ct(this.svgGroup_)}},jv=class{constructor(r,a,p){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=p,this.style=a,this.svgRoot=r,this.svgPath=ee(Be.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(r){r?(this.svgRoot.appendChild(r),this.cursorSvg=r):this.cursorSvg=null}setMarkerSvg(r){r?(this.cursorSvg?this.svgRoot.insertBefore(r,this.cursorSvg):this.svgRoot.appendChild(r),this.markerSvg=r):this.markerSvg=null}applyColour(r){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(r.isShadow()),this.updateDisabled_(!r.isEnabled()||r.getInheritedDisabled())}setStyle(r){this.style=r}setClass_(r,a){r&&(a?ke(this.svgRoot,r):dt(this.svgRoot,r))}updateHighlighted(r){r?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(r){r&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(r){this.setClass_("blocklyDisabled",r),r&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(r){this.setClass_("blocklySelected",r)}updateDraggingDelete(r){this.setClass_("blocklyDraggingDelete",r)}updateInsertionMarker(r){this.setClass_("blocklyInsertionMarker",r)}updateMovable(r){this.setClass_("blocklyDraggable",r)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r)}updateShapeForInputHighlight(r,a){}addConnectionHighlight(r,a,p,b){if(this.connectionHighlights.has(r)){if(this.currentHighlightMatchesNew(r,a,p))return;this.removeConnectionHighlight(r)}a=ee(Be.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:`translate(${p.x}, ${p.y})`+(b?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(r,a)}currentHighlightMatchesNew(r,a,p){let b;const R=(b=this.connectionHighlights.get(r))==null?void 0:b.getAttribute("d");return r=this.highlightOffsets.get(r),R===a&&tn.equals(r,p)}removeConnectionHighlight(r){const a=this.connectionHighlights.get(r);a&&(ct(a),this.connectionHighlights.delete(r))}},Li=class{constructor(r,a){this.type=a,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=r}connect_(r){const a=En.INPUT_VALUE,p=this.getSourceBlock();var b=r.getSourceBlock();r.isConnected()&&r.disconnectInternal(!1);let R;if(this.isConnected()){const pe=this.stashShadowState(),Le=this.targetBlock();Le.isShadow()?Le.dispose(!1):(this.disconnectInternal(),R=Le),this.applyShadowState(pe)}let W;ne()&&(W=new(xe(t.MOVE$$module$build$src$core$events$utils))(b),W.setReason(["connect"])),Su(this,r),b.setParent(p),W&&(W.recordNew(),ue(W)),R&&(r=this.type===a?R.outputConnection:R.previousConnection)&&((b=Li.getConnectionForOrphanedConnection(b,r))?r.connect(b):r.onFailedConnect(this))}dispose(){if(this.isConnected()){this.setShadowStateInternal();const r=this.targetBlock();r&&!r.isDeadOrDying()&&r.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===En.INPUT_VALUE||this.type===En.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(r){}connect(r){if(this.targetConnection===r)return!0;if(this.getConnectionChecker().canConnect(this,r,!1)){const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(r):r.connect_(this),t.setGroup$$module$build$src$core$events$utils(a)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(r=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(!a||!p)throw Error("Source connection not connected.");const b=t.getGroup$$module$build$src$core$events$utils();b||t.setGroup$$module$build$src$core$events$utils(!0);let R;ne()&&(R=new(xe(t.MOVE$$module$build$src$core$events$utils))(p.getSourceBlock()),R.setReason(["disconnect"]));const W=this.targetConnection;W&&(W.targetConnection=null),this.targetConnection=null,r&&p.getSourceBlock().setParent(null),R&&(R.recordNew(),ue(R)),p.getSourceBlock().isShadow()||a.respawnShadow_(),t.setGroup$$module$build$src$core$events$utils(b)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(r,a){if(this.getSourceBlock().isDeadOrDying())return!1;var p;return a=(p=r.getInput(a))==null?void 0:p.connection,p=this.targetBlock(),p&&p!==r||!a||a.targetConnection===this?!1:(a.isConnected()&&a.disconnect(),a.connect(this),!0)}targetBlock(){if(this.isConnected()){let r,a;return(a=(r=this.targetConnection)==null?void 0:r.getSourceBlock())!=null?a:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(r){return r?(Array.isArray(r)||(r=[r]),this.check=r,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(r){this.setShadowStateInternal({shadowDom:r})}getShadowDom(r){return r&&this.targetBlock().isShadow()?ma(this.targetBlock()):this.shadowDom}setShadowState(r){this.setShadowStateInternal({shadowState:r})}getShadowState(r){return r&&this.targetBlock()&&this.targetBlock().isShadow()?ti(this.targetBlock()):this.shadowState}neighbours(r){return[]}getParentInput(){let r=null;const a=this.sourceBlock_.inputList;for(let p=0;p<a.length;p++)if(a[p].connection===this){r=a[p];break}return r}toString(){const r=this.sourceBlock_;if(!r)return"Orphan Connection";if(r.outputConnection===this)var a="Output Connection of ";else if(r.previousConnection===this)a="Previous Connection of ";else if(r.nextConnection===this)a="Next Connection of ";else{a=null;for(let p=0,b;b=r.inputList[p];p++)if(b.connection===this){a=b;break}if(a)a='Input "'+a.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return a+r.toDevString()}stashShadowState(){const r=this.getShadowDom(!0),a=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:r,shadowState:a}}applyShadowState({shadowDom:r,shadowState:a}){this.shadowDom=r,this.shadowState=a}setShadowStateInternal({shadowDom:r=null,shadowState:a=null}={}){this.shadowDom=r,this.shadowState=a,(r=this.targetBlock())?r.isShadow()?(r.dispose(!1),this.getSourceBlock().isDeadOrDying()||(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))):(r=this.createShadowBlock(!1),this.serializeShadow(r),r&&r.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock()))}createShadowBlock(r){var a=this.getSourceBlock();const p=this.getShadowState(),b=this.getShadowDom();if(a.isDeadOrDying()||!p&&!b)return null;if(p)return a=Kr(p,a.workspace,{parentConnection:r?this:void 0,isShadow:!0,recordUndo:!1});if(b){if(a=ks(b,a.workspace),r)if(this.type===En.INPUT_VALUE){if(!a.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(a.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===En.NEXT_STATEMENT){if(!a.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(a.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return a}return null}serializeShadow(r){r&&(this.shadowDom=ma(r),this.shadowState=ti(r))}static getConnectionForOrphanedConnection(r,a){if(a.type===En.OUTPUT_VALUE)return ec(r,a.getSourceBlock());r=r.lastConnectionInStack(!0);const p=a.getConnectionChecker();return r&&p.canConnect(a,r,!1)?r:null}};Li.CAN_CONNECT=0,Li.REASON_SELF_CONNECTION=1,Li.REASON_WRONG_TYPE=2,Li.REASON_TARGET_NULL=3,Li.REASON_CHECKS_FAILED=4,Li.REASON_DIFFERENT_WORKSPACES=5,Li.REASON_SHADOW_PARENT=6,Li.REASON_DRAG_CHECKS_FAILED=7,Li.REASON_PREVIOUS_AND_OUTPUT=8;var b0="_TEMP_COLLAPSED_INPUT",Fb="_TEMP_COLLAPSED_FIELD",PR={COLLAPSED_FIELD_NAME:Fb,COLLAPSED_INPUT_NAME:b0},T0="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Mp=class{constructor(r){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,N(r),this.topBlock=r,this.workspace=r.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){t.disable$$module$build$src$core$events$utils(),this.hidePreview(),t.enable$$module$build$src$core$events$utils();var{local:r,closest:a}=this.activeCandidate;if(r.connect(a),this.topBlock.rendered){const p=r.isSuperior()?a:r,b=this.topBlock.getRootBlock();tr().then(()=>{Do(p.getSourceBlock()),setTimeout(()=>{b.bringToFront()},0)})}}}update(r,a){const p=this.getCandidate(r);((this.wouldDeleteBlock=this.shouldDelete(!!p,a))||this.shouldUpdatePreviews(p,r))&&(t.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(p),this.maybeShowPreview(p),t.enable$$module$build$src$core$events$utils())}createMarkerBlock(r){var a=r.type;t.disable$$module$build$src$core$events$utils();let p;try{if(p=this.workspace.newBlock(a),p.setInsertionMarker(!0),r.saveExtraState){var b=r.saveExtraState(!0);b&&p.loadExtraState&&p.loadExtraState(b)}else if(r.mutationToDom){const R=r.mutationToDom();R&&p.domToMutation&&p.domToMutation(R)}for(a=0;a<r.inputList.length;a++){const R=r.inputList[a];if(R.name===b0)continue;const W=p.inputList[a];if(!W)throw Error(T0.replace("%1","an input"));for(b=0;b<R.fieldRow.length;b++){const pe=R.fieldRow[b],Le=W.fieldRow[b];if(!Le)throw Error(T0.replace("%1","a field"));Le.setValue(pe.getValue())}}for(const R of p.getDescendants(!1))R.setInsertionMarker(!0);p.setCollapsed(r.isCollapsed()),p.setInputsInline(r.getInputsInline()),p.initSvg(),p.getSvgRoot().setAttribute("visibility","hidden")}finally{t.enable$$module$build$src$core$events$utils()}return p}initAvailableConnections(){const r=this.topBlock.getConnections_(!1),a=this.topBlock.lastConnectionInStack(!0);return a&&a!==this.topBlock.nextConnection&&(r.push(a),this.lastOnStack=a),r}shouldUpdatePreviews(r,a){if(!r)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:p,closest:b}=this.activeCandidate;if(b===r.closest&&p===r.local)return!1;const R=p.x+a.x-b.x;return a=p.y+a.y-b.y,r.radius<Math.sqrt(R*R+a*a)-t.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(r){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let a=this.getStartRadius(),p=null;for(let b=0;b<this.availableConnections.length;b++){const R=this.availableConnections[b],W=R.closest(a,r);W.connection&&(p={closest:W.connection,local:R,radius:W.radius},a=W.radius)}return p}getStartRadius(){return this.activeCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius}shouldDelete(r,a){return a&&this.workspace.getComponentManager().hasCapability(a.id,Ma.Capability.DELETE_AREA)?a.wouldDelete(this.topBlock,r):!1}maybeShowPreview(r){if(!this.wouldDeleteBlock&&r){var a=r.closest,p;a===((p=this.activeCandidate)==null?void 0:p.closest)||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=r,this.showPreview(this.activeCandidate))}}showPreview(r){const a=this.workspace.getRenderer();switch(a.getConnectionPreviewMethod(r.closest,r.local,this.topBlock)){case Mp.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(r);break;case Mp.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(r);break;case Mp.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(r)}a.shouldHighlightConnection(r.closest)&&r.closest.highlight()}maybeHidePreview(r){if(!r)this.hidePreview();else if(this.activeCandidate){const a=this.activeCandidate.local!==r.local;(this.activeCandidate.closest!==r.closest||a||this.wouldDeleteBlock)&&this.hidePreview()}this.activeCandidate=this.markerConnection=null}hidePreview(){let r;const a=(r=this.activeCandidate)==null?void 0:r.closest;a&&a.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(a)&&a.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(r){const{local:a,closest:p}=r;let b=(r=this.lastOnStack&&a===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");let R;try{R=b.getMatchingConnection(a.getSourceBlock(),a)}catch{if(r&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),b=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),b=this.firstMarker=this.createMarkerBlock(this.topBlock)),!b)throw Error("Cannot show the insertion marker because there is no insertion marker block");R=b.getMatchingConnection(a.getSourceBlock(),a)}if(!R)throw Error("Cannot show the insertion marker because there is no associated connection");if(R===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");b.queueRender(),Pi(),R.connect(p);const W={x:p.x-R.x,y:p.y-R.y},pe=R.getOffsetInBlock().clone(),Le=R;tr().then(()=>{let Nt;(Nt=b)==null||Nt.positionNearConnection(Le,W,pe);let $n;($n=b)==null||$n.getSvgRoot().setAttribute("visibility","visible")}),this.markerConnection=R}hideInsertionMarker(){if(this.markerConnection){var r=this.markerConnection,a=r.getSourceBlock(),p=a.outputConnection,b;if((b=a.previousConnection)!=null&&b.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let R;(R=r.targetBlock())==null||R.unplug(!1)}if(r.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(r=a.getSvgRoot())&&r.setAttribute("visibility","hidden")}}showInsertionInputOutline(r){r=r.closest,this.highlightedBlock=r.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(r,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(r){if(this.fadedBlock=r.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const r=[];return this.firstMarker&&r.push(this.firstMarker),this.lastMarker&&r.push(this.lastMarker),r}disposeInsertionMarker(r){if(r){t.disable$$module$build$src$core$events$utils();try{r.dispose()}finally{t.enable$$module$build$src$core$events$utils()}}}};(function(r){r=r.PREVIEW_TYPE||(r.PREVIEW_TYPE={}),r[r.INSERTION_MARKER=0]="INSERTION_MARKER",r[r.INPUT_OUTLINE=1]="INPUT_OUTLINE",r[r.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"})(Mp||(Mp={})),Mp.PREVIEW_TYPE;var Xv=class{constructor(r){this.overrides=null,this.name=r}getClassName(){return this.name+"-renderer"}init(r,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,Object.assign(this.constants_,a)),this.constants_.setTheme(r),this.constants_.init()}createDom(r,a){this.constants_.createDom(r,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())}refreshDom(r,a){const p=this.getConstants();p.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=p.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(r,a)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Wv}makeRenderInfo_(r){return new T_(this,r)}makeDrawer_(r,a){return new Vv(r,a)}makeMarkerDrawer(r,a){return new Pb(r,this.getConstants(),a)}makePathObject(r,a){return new jv(r,a,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(r){return!0}orphanCanConnectAtEnd(r,a,p){return!!Li.getConnectionForOrphanedConnection(r,p===En.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}getConnectionPreviewMethod(r,a,p){return ve("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===En.OUTPUT_VALUE||a.type===En.PREVIOUS_STATEMENT?!r.isConnected()||this.orphanCanConnectAtEnd(p,r.targetBlock(),a.type)?Mp.PREVIEW_TYPE.INSERTION_MARKER:Mp.PREVIEW_TYPE.REPLACEMENT_FADE:Mp.PREVIEW_TYPE.INSERTION_MARKER}render(r){const a=this.makeRenderInfo_(r);a.measure(),this.makeDrawer_(r,a).draw()}},rs={};rs.BottomRow=Db,rs.Connection=Cp,rs.ConstantProvider=Wv,rs.Drawer=Vv,rs.ExternalValueInput=Nb,rs.Field=b_,rs.Hat=bE,rs.Icon=Kw,rs.InRowSpacer=Xd,rs.InlineInput=TE,rs.InputConnection=Rg,rs.InputRow=EE,rs.JaggedEdge=Jw,rs.MarkerSvg=Pb,rs.Measurable=Zr,rs.NextConnection=Qw,rs.OutputConnection=qw,rs.PathObject=jv,rs.PreviousConnection=Zw,rs.RenderInfo=T_,rs.Renderer=Xv,rs.RoundCorner=v0,rs.Row=Hv,rs.SpacerRow=$E,rs.SquareCorner=y0,rs.StatementInput=Gv,rs.TopRow=SE,rs.Types=tt,rs.init=Jc,rs.register=Ys,rs.unregister=Ud;var nx=class{constructor(r,a){this.workspace=r,this.theme=a,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(r){var a=this.theme;this.theme=r,(r=this.workspace.getInjectionDiv())&&(a&&(a=a.getClassName())&&dt(r,a),(a=this.theme.getClassName())&&ke(r,a));for(let p=0,b;b=this.subscribedWorkspaces_[p];p++)b.refreshTheme();for(const[p,b]of this.componentDB)for(const R of b){r=R.element,a=R.propertyName;const W=this.theme&&this.theme.getComponentStyle(p);r.style.setProperty(a,W||"")}for(const p of this.subscribedWorkspaces_)p.hideChaff()}subscribeWorkspace(r){this.subscribedWorkspaces_.push(r)}unsubscribeWorkspace(r){if(!St(this.subscribedWorkspaces_,r))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(r,a,p){this.componentDB.has(a)||this.componentDB.set(a,[]),this.componentDB.get(a).push({element:r,propertyName:p}),a=this.theme&&this.theme.getComponentStyle(a),r.style.setProperty(p,a||"")}unsubscribe(r){if(r)for(const[a,p]of this.componentDB){for(let b=p.length-1;0<=b;b--)p[b].element===r&&p.splice(b,1);p.length||this.componentDB.delete(a)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},wE="VARIABLE_DYNAMIC",kg={CATEGORY_NAME:wE};kg.flyoutCategory=Yp,kg.flyoutCategoryBlocks=jl,kg.onCreateVariableButtonClick_Colour=wl,kg.onCreateVariableButtonClick_Number=Sa,kg.onCreateVariableButtonClick_String=rd;var xE=class{canConnect(r,a,p,b){return this.canConnectWithReason(r,a,p,b)===Li.CAN_CONNECT}canConnectWithReason(r,a,p,b){const R=this.doSafetyChecks(r,a);return R!==Li.CAN_CONNECT?R:this.doTypeChecks(r,a)?p&&!this.doDragChecks(r,a,b||0)?Li.REASON_DRAG_CHECKS_FAILED:Li.CAN_CONNECT:Li.REASON_CHECKS_FAILED}getErrorMessage(r,a,p){switch(r){case Li.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Li.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Li.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Li.REASON_TARGET_NULL:return"Target connection is null.";case Li.REASON_CHECKS_FAILED:return"Connection checks failed. "+(a+" expected "+a.getCheck()+", found "+p.getCheck());case Li.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Li.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Li.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(r,a){if(!r||!a)return Li.REASON_TARGET_NULL;let p,b,R;return r.isSuperior()?(p=r.getSourceBlock(),b=a.getSourceBlock(),R=a):(b=r.getSourceBlock(),p=a.getSourceBlock(),R=r,r=a),p===b?Li.REASON_SELF_CONNECTION:R.type!==jt[r.type]?Li.REASON_WRONG_TYPE:p.workspace!==b.workspace?Li.REASON_DIFFERENT_WORKSPACES:p.isShadow()&&!b.isShadow()?Li.REASON_SHADOW_PARENT:R.type===En.OUTPUT_VALUE&&b.previousConnection&&b.previousConnection.isConnected()||R.type===En.PREVIOUS_STATEMENT&&b.outputConnection&&b.outputConnection.isConnected()?Li.REASON_PREVIOUS_AND_OUTPUT:Li.CAN_CONNECT}doTypeChecks(r,a){if(r=r.getCheck(),a=a.getCheck(),!r||!a)return!0;for(let p=0;p<r.length;p++)if(a.indexOf(r[p])!==-1)return!0;return!1}doDragChecks(r,a,p){if(r.distanceFrom(a)>p||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case En.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(r,a);case En.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||r.isConnected())return!1;break;case En.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case En.NEXT_STATEMENT:if(a.isConnected()&&!r.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection||a.targetBlock()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;default:return!1}return Es.indexOf(a)===-1}canConnectToPrevious_(r,a){return r.targetConnection||Es.indexOf(a)!==-1?!1:a.targetConnection?(r=a.targetBlock(),r.isInsertionMarker()?!r.getPreviousBlock():!1):!0}};i(Dt.CONNECTION_CHECKER,Ya,xE);var CE=class extends bp{constructor(r){super(r),this.type=Ou,r&&(this.varType=r.type,this.varName=r.name)}toJson(){const r=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return r.varType=this.varType,r.varName=this.varName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new CE),a.varType=r.varType,a.varName=r.varName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");r?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)}};i(Dt.EVENT,Ou,CE);var ME=class extends bp{constructor(r,a){super(r),this.type=ih,r&&(this.oldName=r.name,this.newName=typeof a>"u"?"":a)}toJson(){const r=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return r.oldName=this.oldName,r.newName=this.newName,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new ME),a.oldName=r.oldName,a.newName=r.newName,a}run(r){const a=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");r?a.renameVariableById(this.varId,this.newName):a.renameVariableById(this.varId,this.oldName)}};i(Dt.EVENT,ih,ME);var AE=class{constructor(r){this.workspace=r,this.variableMap=new Map}clear(){for(const r of this.variableMap.values())for(;0<r.length;)this.deleteVariable(r[0]);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(r,a){if(r.name!==a){var p=this.getVariable(a,r.type),b=this.workspace.getAllBlocks(!1),R=t.getGroup$$module$build$src$core$events$utils();R||t.setGroup$$module$build$src$core$events$utils(!0);try{p&&p.getId()!==r.getId()?this.renameVariableWithConflict_(r,a,p,b):this.renameVariableAndUses_(r,a,b)}finally{t.setGroup$$module$build$src$core$events$utils(R)}}}renameVariableById(r,a){const p=this.getVariableById(r);if(!p)throw Error("Tried to rename a variable that didn't exist. ID: "+r);this.renameVariable(p,a)}renameVariableAndUses_(r,a,p){for(ue(new(xe(ih))(r,a)),r.name=a,a=0;a<p.length;a++)p[a].updateVarName(r)}renameVariableWithConflict_(r,a,p,b){const R=r.type;for(a!==p.name&&this.renameVariableAndUses_(p,a,b),a=0;a<b.length;a++)b[a].renameVarById(r.getId(),p.getId());ue(new(xe(Ou))(r)),St(this.variableMap.get(R),r)}createVariable(r,a,p){var b=this.getVariable(r,a);if(b){if(p&&b.getId()!==p)throw Error('Variable "'+r+'" is already in use and its id is "'+b.getId()+'" which conflicts with the passed in id, "'+p+'".');return b}if(p&&this.getVariableById(p))throw Error('Variable id, "'+p+'", is already in use.');return b=p||ie(),a=a||"",b=new Zp(this.workspace,r,a,b),r=this.variableMap.get(a)||[],r.push(b),this.variableMap.delete(a),this.variableMap.set(a,r),ue(new(xe(Ka))(b)),b}deleteVariable(r){const a=r.getId(),p=this.variableMap.get(r.type);if(p){for(let b=0;b<p.length;b++)if(p[b].getId()===a){p.splice(b,1),ue(new(xe(Ou))(r)),p.length===0&&this.variableMap.delete(r.type);break}}}deleteVariableById(r){const a=this.getVariableById(r);if(a){var p=a.name;const b=this.getVariableUsesById(r);for(let R=0,W;W=b[R];R++)if(W.type==="procedures_defnoreturn"||W.type==="procedures_defreturn"){r=String(W.getFieldValue("NAME")),p=t.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",p).replace("%2",r),Ro(p);return}1<b.length?(p=t.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(b.length)).replace("%2",p),Yt(p,R=>{R&&a&&this.deleteVariableInternal(a,b)})):this.deleteVariableInternal(a,b)}else console.warn("Can't delete non-existent variable: "+r)}deleteVariableInternal(r,a){const p=t.getGroup$$module$build$src$core$events$utils();p||t.setGroup$$module$build$src$core$events$utils(!0);try{for(let b=0;b<a.length;b++)a[b].dispose(!0);this.deleteVariable(r)}finally{t.setGroup$$module$build$src$core$events$utils(p)}}getVariable(r,a){if(a=this.variableMap.get(a||"")){for(let p=0,b;b=a[p];p++)if(t.Names$$module$build$src$core$names.equals(b.name,r))return b}return null}getVariableById(r){for(const a of this.variableMap.values())for(const p of a)if(p.getId()===r)return p;return null}getVariablesOfType(r){return(r=this.variableMap.get(r||""))?r.slice():[]}getVariableTypes(r){const a=new Set(this.variableMap.keys());if(r&&r.getPotentialVariableMap())for(const p of r.getPotentialVariableMap().variableMap.keys())a.add(p);return a.has("")||a.add(""),Array.from(a.values())}getAllVariables(){let r=[];for(const a of this.variableMap.values())r=r.concat(a);return r}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map(r=>r.name)}getVariableUsesById(r){const a=[],p=this.workspace.getAllBlocks(!1);for(let b=0;b<p.length;b++){const R=p[b].getVarModels();if(R)for(let W=0;W<R.length;W++)R[W].getId()===r&&a.push(p[b])}return a}},Yv=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(r){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Ib,this.potentialVariableMap=null,this.id=ie(),w(this),this.options=r||new Uo({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(_(Dt.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new AE(this)}dispose(){this.listeners.length=0,this.clear(),x(this)}sortObjects_(r,a){const p=Math.sin(Tc(Yv.SCAN_ANGLE))*(this.RTL?-1:1);return r=r.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),r.y+p*r.x-(a.y+p*a.x)}addTopBlock(r){this.topBlocks.push(r)}removeTopBlock(r){if(!St(this.topBlocks,r))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(r=!1){const a=[].concat(this.topBlocks);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}addTypedBlock(r){this.typedBlocksDB.has(r.type)||this.typedBlocksDB.set(r.type,[]),this.typedBlocksDB.get(r.type).push(r)}removeTypedBlock(r){St(this.typedBlocksDB.get(r.type),r),this.typedBlocksDB.get(r.type).length||this.typedBlocksDB.delete(r.type)}getBlocksByType(r,a=!1){return this.typedBlocksDB.has(r)?(r=this.typedBlocksDB.get(r).slice(0),a&&r&&1<r.length&&r.sort(this.sortObjects_.bind(this)),r.filter(function(p){return!p.isInsertionMarker()})):[]}addTopComment(r){this.topComments.push(r),this.commentDB.has(r.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+r.id+'"'),this.commentDB.set(r.id,r)}removeTopComment(r){if(!St(this.topComments,r))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(r.id)}getTopComments(r=!1){const a=[].concat(this.topComments);return r&&1<a.length&&a.sort(this.sortObjects_.bind(this)),a}getAllBlocks(r=!1){if(r){var a=this.getTopBlocks(!0);r=[];for(let p=0;p<a.length;p++)r.push(...a[p].getDescendants(!0))}else for(r=this.getTopBlocks(!1),a=0;a<r.length;a++)r.push(...r[a].getChildren(!1));return r.filter(function(p){return!p.isInsertionMarker()})}clear(){this.isClearing=!0;try{const r=t.getGroup$$module$build$src$core$events$utils();for(r||t.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();t.setGroup$$module$build$src$core$events$utils(r),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(r,a){this.variableMap.renameVariableById(r,a)}createVariable(r,a,p){return this.variableMap.createVariable(r,a,p)}getVariableUsesById(r){return this.variableMap.getVariableUsesById(r)}deleteVariableById(r){this.variableMap.deleteVariableById(r)}getVariable(r,a){return this.variableMap.getVariable(r,a)}getVariableById(r){return this.variableMap.getVariableById(r)}getVariablesOfType(r){return this.variableMap.getVariablesOfType(r)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(r){return this.options.maxInstances?(this.options.maxInstances[r]!==void 0?this.options.maxInstances[r]:1/0)-this.getBlocksByType(r,!1).length:1/0}isCapacityAvailable(r){if(!this.hasBlockLimits())return!0;let a=0;for(const p in r){if(r[p]>this.remainingCapacityOfType(p))return!1;a+=r[p]}return!(a>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(r){var a=r?this.redoStack_:this.undoStack_,p=r?this.undoStack_:this.redoStack_;const b=a.pop();if(b){for(var R=[b];a.length&&b.group&&b.group===a[a.length-1].group;){const W=a.pop();W&&R.push(W)}for(a=0;a<R.length;a++)p.push(R[a]);R=j(R,r),de(!1);try{for(p=0;p<R.length;p++)R[p].run(r)}finally{de(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,Z()}addChangeListener(r){return this.listeners.push(r),r}removeChangeListener(r){St(this.listeners,r)}fireChangeListener(r){if(r.recordUndo)for(this.undoStack_.push(r),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let a=0;a<this.listeners.length;a++)(0,this.listeners[a])(r)}getBlockById(r){return this.blockDB.get(r)||null}setBlockById(r,a){this.blockDB.set(r,a)}removeBlockById(r){this.blockDB.delete(r)}getCommentById(r){let a;return(a=this.commentDB.get(r))!=null?a:null}allInputsFilled(r){const a=this.getTopBlocks(!1);for(let p=0;p<a.length;p++)if(!a[p].allInputsFilled(r))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new AE(this)}getVariableMap(){return this.variableMap}setVariableMap(r){this.variableMap=r}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let r=null;const a=this.options.parentWorkspace;return this.isFlyout?a&&a.options&&(r=a.options.parentWorkspace):a&&(r=a),r}static getById(r){return v(r)}static getAll(){return E()}};Yv.SCAN_ANGLE=3;var FR=100,rx=class{constructor(r){this.parentWorkspace=r,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(r,a){if(r.length){try{var p=new globalThis.Audio}catch{return}for(let R=0;R<r.length;R++){const W=r[R],pe=W.match(/\.(\w+)$/);if(pe&&p.canPlayType("audio/"+pe[1])){var b=new globalThis.Audio(W);break}}b&&this.sounds.set(a,b)}}preload(){for(const r of this.sounds.values()){r.volume=.01;const a=r.play();if(a!==void 0?a.then(r.pause).catch(function(){}):r.pause(),kn||Wn)break}}play(r,a){if(!this.muted){var p=this.sounds.get(r);p?(r=new Date,this.lastSound_!==null&&r.getTime()-this.lastSound_.getTime()<FR||(this.lastSound_=r,p=kn||fn?p:p.cloneNode(),p.volume=a===void 0?1:a,p.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(r,a)}}setMuted(r){this.muted=r}getMuted(){return this.muted}},UR=class{constructor(r){this.workspace=r,this.layers=new Map,(r=r.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(r)),r=this.createLayer(K),ke(r,"blocklyBlockCanvas"),r=this.createLayer(fe),ke(r,"blocklyBubbleCanvas")}createDragLayer(r){const a=ee(Be.SVG,{class:"blocklyBlockDragSurface",xmlns:yg,"xmlns:html":Oc,"xmlns:xlink":$s,version:"1.1"});return r.append(a),ee(Be.G,{},a)}translateLayers(r,a){r=`translate(${r.x}, ${r.y}) scale(${a})`;let p;(p=this.dragLayer)==null||p.setAttribute("transform",r);for(const[,b]of this.layers)b.setAttribute("transform",r)}moveToDragLayer(r){let a;(a=this.dragLayer)==null||a.appendChild(r.getSvgRoot())}moveOffDragLayer(r,a){this.append(r,a)}append(r,a){this.layers.has(a)||this.createLayer(a);let p;(p=this.layers.get(a))==null||p.appendChild(r.getSvgRoot())}createLayer(r){const a=this.workspace.getSvgGroup(),p=ee(Be.G,{});let b=!1;const R=[...this.layers].sort((W,pe)=>W[0]-pe[0]);for(const[W,pe]of R)if(r<W){a.insertBefore(p,pe),b=!0;break}return b||a.appendChild(p),this.layers.set(r,p),p}hasLayer(r){return r===this.dragLayer||new Set(this.layers.values()).has(r)}getBlockLayer(){return this.layers.get(K)}getBubbleLayer(){return this.layers.get(fe)}},zR=20,hf=class extends Yv{constructor(r){super(r),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(_(Dt.METRICS_MANAGER,r,!0))(this),this.getMetrics=r.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=r.setMetrics||hf.setTopLevelWorkspaceMetrics_,this.componentManager=new Ma,this.connectionDBList=Rh.init(this.connectionChecker),this.audioManager=new rx(r.parentWorkspace),this.grid=this.options.gridPattern?new gE(this.options.gridPattern,r.gridOptions):null,this.markerManager=new Oh(this),Za&&pn&&this.registerToolboxCategoryCallback(u0,pn),kg&&Yp&&this.registerToolboxCategoryCallback(wE,Yp),Co&&rn&&(this.registerToolboxCategoryCallback(zv,rn),this.addChangeListener(Zu)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new nx(this,this.options.theme||Ab),this.themeManager_.subscribeWorkspace(this);let a;this.renderer=Jc(this.options.renderer||"geras",this.getTheme(),(a=this.options.rendererOverrides)!=null?a:void 0),this.cachedParentSvgSize=new Ss(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(r){this.metricsManager=r,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(r){this.markerManager.setCursorSvg(r)}setMarkerSvg(r){this.markerManager.setMarkerSvg(r)}getMarker(r){return this.markerManager?this.markerManager.getMarker(r):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(r){r||(r=Ab),this.themeManager_.setTheme(r)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const r=new(xe(Kl))(this.getTheme().name,this.id);ue(r)}updateBlockStyles_(r){for(let a=0,p;p=r[a];a++){const b=p.getStyleName();b&&p.setStyle(b)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const r=this.getParentSvg().getScreenCTM();r&&(this.inverseScreenCTM=r.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(r){let a=0,p=0,b=1;(this.getCanvas().contains(r)||this.getBubbleCanvas().contains(r))&&(b=this.scale);do{const R=Xn(r);(r===this.getCanvas()||r===this.getBubbleCanvas())&&(b=1),a+=R.x*b,p+=R.y*b,r=r.parentNode}while(r&&r!==this.getParentSvg()&&r!==this.getInjectionDiv());return new tn(a,p)}getCachedParentSvgSize(){const r=this.cachedParentSvgSize;return new Ss(r.width,r.height)}getOriginOffsetInPixels(){return q(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let r=this.svgGroup_;for(;r;){if((" "+(r.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv=r;break}r=r.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(r){this.resizeHandlerWrapper=r}createDom(r,a){return this.injectionDiv||(this.injectionDiv=a??null),this.svgGroup_=ee(Be.G,{class:"blocklyWorkspace"}),r&&(this.svgBackground_=ee(Be.RECT,{height:"100%",width:"100%",class:r},this.svgGroup_),r==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new UR(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(Se(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),Se(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(_(Dt.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(r=_(Dt.CURSOR,this.options))&&this.markerManager.setCursor(new r),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ct(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const r=this.getParentSvg();r&&r.parentNode&&ct(r.parentNode)}this.resizeHandlerWrapper&&(rt(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=hf.newTrashcan(this);const r=this.trashcan.createDom();this.svgGroup_.insertBefore(r,this.getCanvas())}static newTrashcan(r){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new u_(this);const r=this.zoomControls_.createDom();this.svgGroup_.appendChild(r)}addFlyout(r){const a=new Uo({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(_(Dt.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(_(Dt.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(r)}getFlyout(r){return this.flyout||r?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const r=this.componentManager.getComponents(Ma.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),p=[];for(let b=0,R;R=r[b];b++){R.position(a,p);const W=R.getBoundingRectangle();W&&p.push(W)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const r=Ne();tn.equals(this.lastRecordedPageScroll,r)||(this.lastRecordedPageScroll=r,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(r,a){const p=this.getParentSvg();r!=null&&(this.cachedParentSvgSize.width=r,p.setAttribute("data-cached-width",`${r}`)),a!=null&&(this.cachedParentSvgSize.height=a,p.setAttribute("data-cached-height",`${a}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let r=this.svgGroup_;for(;r;){if(r.tagName==="svg"){this.cachedParentSvg=r;break}r=r.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(ne()){var r=this.scale,a=-this.scrollY,p=-this.scrollX;if(!(r===this.oldScale&&1>Math.abs(a-this.oldTop)&&1>Math.abs(p-this.oldLeft))){var b=new(xe(ns))(a,p,r,this.id,this.oldScale);this.oldScale=r,this.oldTop=a,this.oldLeft=p,ue(b)}}}translate(r,a){let p;(p=this.layerManager)==null||p.translateLayers(new tn(r,a),this.scale);let b;(b=this.grid)==null||b.moveTo(r,a),this.maybeFireViewportChangeEvent()}getWidth(){const r=this.getMetrics();return r?r.viewWidth/this.scale:0}setVisible(r){this.isVisible_=r,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(r),this.getFlyout()&&this.getFlyout().setContainerVisible(r),this.getParentSvg().style.display=r?"block":"none",this.toolbox_&&this.toolbox_.setVisible(r),r||this.hideChaff(!0))}render(){for(var r=this.getAllBlocks(!1),a=r.length-1;0<=a;a--)r[a].queueRender();if(this.currentGesture_)for(r=this.currentGesture_.getInsertionMarkers(),a=0;a<r.length;a++)r[a].queueRender();tr().then(()=>void this.markerManager.updateMarkers())}highlightBlock(r,a){if(a===void 0){for(let p=0,b;b=this.highlightedBlocks[p];p++)b.setHighlighted(!1);this.highlightedBlocks.length=0}(r=r?this.getBlockById(r):null)&&((a=a===void 0||a)?this.highlightedBlocks.indexOf(r)===-1&&this.highlightedBlocks.push(r):St(this.highlightedBlocks,r),r.setHighlighted(a))}paste(r){if(ve("Blockly.WorkspaceSvg.prototype.paste","v10","v11","Blockly.clipboard.paste"),!this.rendered||!r.type&&!r.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();const a=t.getGroup$$module$build$src$core$events$utils();a||t.setGroup$$module$build$src$core$events$utils(!0);let p;try{p=r.type?this.pasteBlock_(null,r):r.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(r):this.pasteBlock_(r,null)}finally{t.setGroup$$module$build$src$core$events$utils(a)}return p}pasteBlock_(r,a){t.disable$$module$build$src$core$events$utils();let p;try{let b=0,R=0;if(r){p=ks(r,this);let W;b=parseInt((W=r.getAttribute("x"))!=null?W:"0"),this.RTL&&(b=-b);let pe;R=parseInt((pe=r.getAttribute("y"))!=null?pe:"0")}else a&&(p=Un(a,this),b=a.x||10,this.RTL&&(b=this.getWidth()-b),R=a.y||10);if(!isNaN(b)&&!isNaN(R)){let W;do{W=!1;const pe=this.getAllBlocks(!1);for(let Le=0,Nt;Nt=pe[Le];Le++){const $n=Nt.getRelativeToSurfaceXY();if(1>=Math.abs(b-$n.x)&&1>=Math.abs(R-$n.y)){W=!0;break}}if(!W){const Le=p.getConnections_(!1);for(let Nt=0,$n;$n=Le[Nt];Nt++)if($n.closest(t.config$$module$build$src$core$config.snapRadius,new tn(b,R)).connection){W=!0;break}}W&&(b=this.RTL?b-t.config$$module$build$src$core$config.snapRadius:b+t.config$$module$build$src$core$config.snapRadius,R+=2*t.config$$module$build$src$core$config.snapRadius)}while(W);p.moveTo(new tn(b,R))}}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&!p.isShadow()&&ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(p)),p.select(),p}pasteWorkspaceComment_(r){t.disable$$module$build$src$core$events$utils();let a;try{a=el.fromXmlRendered(r,this);let p,b=parseInt((p=r.getAttribute("x"))!=null?p:"0"),R,W=parseInt((R=r.getAttribute("y"))!=null?R:"0");isNaN(b)||isNaN(W)||(this.RTL&&(b=-b),a.moveBy(b+50,W+50))}finally{t.enable$$module$build$src$core$events$utils()}return ne()&&Dc.fireCreateEvent(a),a.select(),a}refreshToolboxSelection(){const r=this.isFlyout?this.targetWorkspace:this;r&&!r.currentGesture_&&r.toolbox_&&r.toolbox_.getFlyout()&&r.toolbox_.refreshSelection()}renameVariableById(r,a){super.renameVariableById(r,a),this.refreshToolboxSelection()}deleteVariableById(r){super.deleteVariableById(r),this.refreshToolboxSelection()}createVariable(r,a,p){return r=super.createVariable(r,a,p),this.refreshToolboxSelection(),r}recordDragTargets(){const r=this.componentManager.getComponents(Ma.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let a=0,p;p=r[a];a++){const b=p.getClientRect();b&&this.dragTargetAreas.push({component:p,clientRect:b})}}newBlock(r,a){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}getDragTarget(r){for(let a=0,p;p=this.dragTargetAreas[a];a++)if(p.clientRect.contains(r.clientX,r.clientY))return p.component;return null}onMouseDown_(r){const a=this.getGesture(r);a&&a.handleWsStart(r,this)}startDrag(r,a){r=xt(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,this.dragDeltaXY=tn.difference(a,r)}moveDrag(r){return r=xt(r,this.getParentSvg(),this.getInverseScreenCTM()),r.x/=this.scale,r.y/=this.scale,tn.sum(this.dragDeltaXY,r)}isDragging(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const r=!!this.scrollbar;return this.isMovable()&&(!r||r&&this.scrollbar.canScrollVertically())}onMouseWheel_(r){if(Hm.inProgress())r.preventDefault(),r.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,p=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||p){var b=ht(r);if(fr)var R=r.metaKey;a&&(r.ctrlKey||R||!p)?(b=-b.y/50,a=xt(r,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,b)):(a=this.scrollX-b.x,p=this.scrollY-b.y,r.shiftKey&&!b.x&&(a=this.scrollX-b.y,p=this.scrollY),this.scroll(a,p)),r.preventDefault()}}}getBlocksBoundingBox(){const r=this.getTopBoundedElements();if(!r.length)return new vi(0,0,0,0);const a=r[0].getBoundingRectangle();for(let b=1;b<r.length;b++){var p=r[b];p.isInsertionMarker&&p.isInsertionMarker()||(p=p.getBoundingRectangle(),p.top<a.top&&(a.top=p.top),p.bottom>a.bottom&&(a.bottom=p.bottom),p.left<a.left&&(a.left=p.left),p.right>a.right&&(a.right=p.right))}return a}cleanUp(){this.setResizesEnabled(!1),t.setGroup$$module$build$src$core$events$utils(!0);const r=this.getTopBlocks(!0);let a=0;for(let p=0,b;b=r[p];p++){if(!b.isMovable())continue;const R=b.getRelativeToSurfaceXY();b.moveBy(-R.x,a-R.y,["cleanup"]),b.snapToGrid(),a=b.getRelativeToSurfaceXY().y+b.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}t.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(r){if(!this.options.readOnly&&!this.isFlyout){var a=qr.registry.getContextMenuOptions(qr.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,r),bu(r,a,this.RTL)}}updateToolbox(r){if(r=st(r)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Bt(r)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=r,this.toolbox_.render(r)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=r,this.flyout.show(r)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(O(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(r,a,p){p=Math.pow(this.options.zoomOptions.scaleSpeed,p);const b=this.scale*p;if(this.scale!==b){b>this.options.zoomOptions.maxScale?p=this.options.zoomOptions.maxScale/this.scale:b<this.options.zoomOptions.minScale&&(p=this.options.zoomOptions.minScale/this.scale);var R=this.getCanvas().getCTM(),W=this.getParentSvg().createSVGPoint();W.x=r,W.y=a,W=W.matrixTransform(R.inverse()),r=W.x,a=W.y,R=R.translate(r*(1-p),a*(1-p)).scale(p),this.scrollX=R.e,this.scrollY=R.f,this.setScale(b)}}zoomCenter(r){var a=this.getMetrics();let p;this.flyout?(p=a.svgWidth?a.svgWidth/2:0,a=a.svgHeight?a.svgHeight/2:0):(p=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop),this.zoom(p,a,r)}zoomToFit(){if(this.isMovable()){var r=this.getMetrics(),a=r.viewWidth;r=r.viewHeight;var p=this.getBlocksBoundingBox(),b=2*zR,R=p.right-p.left+b;if(p=p.bottom-p.top+b,R){this.flyout&&(this.horizontalLayout?(r+=this.flyout.getHeight(),p+=this.flyout.getHeight()/this.scale):(a+=this.flyout.getWidth(),R+=this.flyout.getWidth()/this.scale)),a/=R,r/=p,t.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(a,r)),this.scrollCenter()}finally{t.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){ke(this.getCanvas(),"blocklyCanvasTransitioning"),ke(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){dt(this.getCanvas(),"blocklyCanvasTransitioning"),dt(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var r=this.getMetrics(),a=(r.scrollWidth-r.viewWidth)/2,p=(r.scrollHeight-r.viewHeight)/2;a=-a-r.scrollLeft,p=-p-r.scrollTop,this.scroll(a,p)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(r,a){if(this.isMovable()){var p=r?this.getBlockById(r):null;if(p){r=p.getRelativeToSurfaceXY(),p=a?{height:p.height,width:p.width}:p.getHeightWidth();var b=this.scale;a=(r.x+(this.RTL?-1:1)*p.width/2)*b,r=(r.y+p.height/2)*b,p=this.getMetrics(),this.scroll(-(a-p.viewWidth/2),-(r-p.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(r){this.options.zoomOptions.maxScale&&r>this.options.zoomOptions.maxScale?r=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&r<this.options.zoomOptions.minScale&&(r=this.options.zoomOptions.minScale),this.scale=r,this.hideChaff(!1),(r=this.getFlyout(!1))&&r.isVisible()&&(r.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),r=this.getMetrics(),this.scrollX-=r.absoluteLeft,this.scrollY-=r.absoluteTop,r.viewLeft+=r.absoluteLeft,r.viewTop+=r.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(r):this.scrollbar.resizeContent(r))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(r,a){this.hideChaff(!0);const p=this.getMetrics();r=Math.min(r,-p.scrollLeft),a=Math.min(a,-p.scrollTop);const b=p.scrollTop+Math.max(0,p.scrollHeight-p.viewHeight);r=Math.max(r,-(p.scrollLeft+Math.max(0,p.scrollWidth-p.viewWidth))),a=Math.max(a,-b),this.scrollX=r,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(r+p.scrollLeft),-(a+p.scrollTop),!1),r+=p.absoluteLeft,a+=p.absoluteTop,this.translate(r,a)}getBlockById(r){return super.getBlockById(r)}getAllBlocks(r=!1){return super.getAllBlocks(r)}getTopBlocks(r=!1){return super.getTopBlocks(r)}addTopBlock(r){this.addTopBoundedElement(r),super.addTopBlock(r)}removeTopBlock(r){this.removeTopBoundedElement(r),super.removeTopBlock(r)}addTopComment(r){this.addTopBoundedElement(r),super.addTopComment(r)}removeTopComment(r){this.removeTopBoundedElement(r),super.removeTopComment(r)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(r){this.topBoundedElements.push(r)}removeTopBoundedElement(r){St(this.topBoundedElements,r)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(r){const a=!this.resizesEnabled&&r;this.resizesEnabled=r,a&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(r,a){if(typeof a!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(r,a)}getButtonCallback(r){let a;return(a=this.flyoutButtonCallbacks.get(r))!=null?a:null}removeButtonCallback(r){this.flyoutButtonCallbacks.delete(r)}registerToolboxCategoryCallback(r,a){if(typeof a!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(r,a)}getToolboxCategoryCallback(r){return this.toolboxCategoryCallbacks.get(r)||null}removeToolboxCategoryCallback(r){this.toolboxCategoryCallbacks.delete(r)}getGesture(r){const a=r.type==="pointerdown",p=this.currentGesture_;return p?a&&p.hasStarted()?(console.warn("Tried to start the same gesture twice."),p.cancel(),null):p:a?this.currentGesture_=new Hm(r,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(r=!1){bl(),gl(),va(),this.hideComponents(r)}hideComponents(r=!1){this.getComponentManager().getComponents(Ma.Capability.AUTOHIDEABLE,!0).forEach(a=>a.autoHide(r))}static setTopLevelWorkspaceMetrics_(r){const a=this.getMetrics();typeof r.x=="number"&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*r.x)),typeof r.y=="number"&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*r.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)}},IE=class extends f{constructor(r,a){super(a),this.type=Ja,this.isOpen=r}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new IE),a.isOpen=r.isOpen,a}};i(Dt.EVENT,Ja,IE);var RE=class extends $p{constructor(r){if(super(r),this.type=t.DELETE$$module$build$src$core$events$utils,r){if(r.getParent())throw Error("Connected blocks cannot be deleted.");r.isShadow()&&(this.recordUndo=!1),this.oldXml=Qn(r),this.ids=_e(r),this.wasShadow=r.isShadow(),this.oldJson=ti(r,{addCoordinates:!0})}}toJson(){const r=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return r.oldXml=Ei(this.oldXml),r.ids=this.ids,r.wasShadow=this.wasShadow,r.oldJson=this.oldJson,this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new RE),a.oldXml=t.textToDom$$module$build$src$core$utils$xml(r.oldXml),a.ids=r.ids,a.wasShadow=r.wasShadow||a.oldXml.tagName.toLowerCase()==="shadow",a.oldJson=r.oldJson,r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}run(r){const a=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(r)for(r=0;r<this.ids.length;r++){const p=this.ids[r],b=a.getBlockById(p);b?b.dispose(!1):p===this.blockId&&console.warn("Can't delete non-existent block: "+p)}else Un(this.oldJson,a)}};i(Dt.EVENT,t.DELETE$$module$build$src$core$events$utils,RE);var E_=class{constructor(r,a,p){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.isInsertionMarker_=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,this.workspace=r,this.id=p&&!r.getBlockById(p)?p:ie(),r.setBlockById(this.id,this),this.xy_=new tn(0,0),this.isInFlyout=r.isFlyout,this.isInMutator=r.isMutator,this.RTL=r.RTL,a){if(this.type=a,p=Lr[a],!p||typeof p!="object")throw TypeError("Invalid block definition for type: "+a);Object.assign(this,p)}r.addTopBlock(this),r.addTypedBlock(this),new.target===E_&&this.doInit_()}doInit_(){const r=t.getGroup$$module$build$src$core$events$utils();r||t.setGroup$$module$build$src$core$events$utils(!0);const a=oe();try{typeof this.init=="function"&&(de(!1),this.init(),de(a)),ne()&&ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(this))}finally{t.setGroup$$module$build$src$core$events$utils(r),de(a)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(r){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(r),ne()&&ue(new(xe(t.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal())}disposeInternal(){this.isDeadOrDying()||(this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.disposing=!0,typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(r=>r.disposeInternal()),this.inputList.forEach(r=>r.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(r=>r.dispose()),this.disposed=!0)}isDeadOrDying(){return this.disposing||this.disposed}initModel(){for(const r of this.inputList)for(const a of r.fieldRow)a.initModel&&a.initModel()}unplug(r){this.outputConnection&&this.unplugFromRow_(r),this.previousConnection&&this.unplugFromStack_(r)}unplugFromRow_(r){let a=null,p;(p=this.outputConnection)!=null&&p.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&r&&(r=this.getOnlyValueConnection_())&&r.isConnected()&&!r.targetBlock().isShadow()&&(r=r.targetConnection,r==null||r.disconnect(),this.workspace.connectionChecker.canConnect(r,a,!1)?a.connect(r):r==null||r.onFailedConnect(a))}getOnlyValueConnection_(){let r=null;for(let a=0;a<this.inputList.length;a++){const p=this.inputList[a].connection;if(p&&p.type===En.INPUT_VALUE&&p.targetConnection){if(r)return null;r=p}}return r}unplugFromStack_(r){let a=null;var p;if((p=this.previousConnection)!=null&&p.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect()),p=this.getNextBlock(),r&&p&&!p.isShadow()){let b,R;r=(R=(b=this.nextConnection)==null?void 0:b.targetConnection)!=null?R:null,r==null||r.disconnect(),a&&this.workspace.connectionChecker.canConnect(a,r,!1)&&a.connect(r)}}getConnections_(r){r=[],this.outputConnection&&r.push(this.outputConnection),this.previousConnection&&r.push(this.previousConnection),this.nextConnection&&r.push(this.nextConnection);for(let a=0,p;p=this.inputList[a];a++)p.connection&&r.push(p.connection);return r}lastConnectionInStack(r){let a=this.nextConnection;for(;a;){const p=a.targetBlock();if(!p||r&&p.isShadow())return a;a=p.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(r){for(let a=0,p;p=this.inputList[a];a++)if(p.connection&&p.connection.targetBlock()===r)return p;return null}getSurroundParent(){let r=this,a;do if(a=r,r=r.getParent(),!r)return null;while(r.getNextBlock()===a);return r}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let r,a=this;do r=a,a=r.parentBlock_;while(a);return r}getTopStackBlock(){let r=this,a;do a=r.getPreviousBlock();while(a&&a.getNextBlock()===r&&(r=a));return r}getChildren(r){if(!r)return this.childBlocks_;r=[];for(let p=0,b;b=this.inputList[p];p++)if(b.connection){var a=b.connection.targetBlock();a&&r.push(a)}return(a=this.getNextBlock())&&r.push(a),r}setParent(r){if(r!==this.parentBlock_){var a=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),p=!!a;if(p&&r&&a!==r)throw Error("Block connected to superior one that is not new parent.");if(!p&&r)throw Error("Block not connected to new parent.");if(p&&!r)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?St(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=r)?r.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(r){const a=[this],p=this.getChildren(r);for(let b,R=0;b=p[R];R++)a.push(...b.getDescendants(r));return a}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(r){this.deletable_=r}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(r){this.movable_=r}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(H(this,!0)):!0}isShadow(){return this.isShadow_}setShadow(r){this.isShadow_=r}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(r){this.isInsertionMarker_=r}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(r){this.editable_=r;for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const r of this.inputList)if(r.connection||1<r.fieldRow.length)return!1;return!0}getMatchingConnection(r,a){const p=this.getConnections_(!0);if(r=r.getConnections_(!0),p.length!==r.length)throw Error("Connection lists did not match in length.");for(let b=0;b<r.length;b++)if(r[b]===a)return p[b];return null}setHelpUrl(r){this.helpUrl=r}setTooltip(r){this.tooltip=r}getTooltip(){return ya(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(r){r=qi(r),this.hue_=r.hue,this.colour_=r.hex}setStyle(r){this.styleName_=r}setOnChange(r){if(r&&typeof r!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=r,this.onchangeWrapper_=r.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(r){if(typeof r!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(r===void 0?"nothing":r+" of type "+typeof r)+" instead");for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)if(R.name===r)return R;return null}getVars(){const r=[];for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.referencesVariables()&&r.push(R.getValue());return r}getVarModels(){const r=[];for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)if(R.referencesVariables()){const W=this.workspace.getVariableById(R.getValue());W&&r.push(W)}return r}updateVarName(r){for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.referencesVariables()&&r.getId()===R.getValue()&&R.refreshVariableName()}renameVarById(r,a){for(let p=0,b;b=this.inputList[p];p++)for(let R=0,W;W=b.fieldRow[R];R++)W.referencesVariables()&&r===W.getValue()&&W.setValue(a)}getFieldValue(r){return(r=this.getField(r))?r.getValue():null}setFieldValue(r,a){const p=this.getField(a);if(!p)throw Error('Field "'+a+'" not found.');p.setValue(r)}setPreviousStatement(r,a){if(r)a===void 0&&(a=null),this.previousConnection||(this.previousConnection=this.makeConnection_(En.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(a);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(r,a){if(r)a===void 0&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(En.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(r,a){if(r)a===void 0&&(a=null),this.outputConnection||(this.outputConnection=this.makeConnection_(En.OUTPUT_VALUE)),this.outputConnection.setCheck(a);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(r){this.inputsInline!==r&&(ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,r)),this.inputsInline=r)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof qf&&this.inputList[r]instanceof qf)return!1;for(r=1;r<this.inputList.length;r++)if(this.inputList[r-1]instanceof t.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[r]instanceof qf)return!0;for(r=0;r<this.inputList.length;r++)if(this.inputList[r]instanceof Wm)return!0;return!1}setOutputShape(r){this.outputShape_=r}getOutputShape(){return this.outputShape_}isEnabled(){return!this.disabled}setEnabled(r){if(this.isEnabled()!==r){const a=this.disabled;this.disabled=!r,ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,a,!r))}}getInheritedDisabled(){let r=this.getSurroundParent();for(;r;){if(r.disabled)return!0;r=r.getSurroundParent()}return!1}isCollapsed(){return this.collapsed_}setCollapsed(r){this.collapsed_!==r&&(ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,r)),this.collapsed_=r)}toString(r,a){a=this.toTokens(a);for(let b=2;b<a.length;b++)a[b-2]==="("&&a[b]===")"&&(a[b-2]=a[b-1],a.splice(b-1,2));let p="";return a=a.reduce((b,R)=>(b=b+(p==="("||R===")"?"":" ")+R,p=R[R.length-1],b),""),a=a.trim()||"???",r&&a.length>r&&(a=a.substring(0,r-3)+"..."),a}toTokens(r="?"){const a=[];for(const b of this.inputList)if(b.name!=b0){for(const R of b.fieldRow)a.push(R.getText());if(b.connection){const R=b.connection.targetBlock();if(R){var p=b.connection;let W=p.getCheck();!W&&p.targetConnection&&(W=p.targetConnection.getCheck()),(p=!!W&&(W.indexOf("Boolean")!==-1||W.indexOf("Number")!==-1))&&a.push("("),a.push(...R.toTokens(r)),p&&a.push(")")}else a.push(r)}}return a}appendValueInput(r){return this.appendInput(new t.ValueInput$$module$build$src$core$inputs$value_input(r,this))}appendStatementInput(r){return this.statementInputCount++,this.appendInput(new md(r,this))}appendDummyInput(r=""){return this.appendInput(new qf(r,this))}appendEndRowInput(r=""){return this.appendInput(new Wm(r,this))}appendInput(r){return this.inputList.push(r),r}appendInputFromRegistry(r,a){return(r=h(Dt.INPUT,r,!1))?this.appendInput(new r(a,this)):null}jsonInit(r){var a=r.type?'Block "'+r.type+'": ':"";if(r.output&&r.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");for(var p=0;r["args"+p];){if(r["message"+p]===void 0)throw Error(a+`args${p} must have a corresponding message (message${p}).`);p++}if(r.style&&r.style.hat&&(this.hat=r.style.hat,r.style=null),r.style&&r.colour)throw Error(a+"Must not have both a colour and a style.");for(r.style?this.jsonInitStyle_(r,a):this.jsonInitColour_(r,a),p=0;r["message"+p]!==void 0;)this.interpolate_(r["message"+p],r["args"+p]||[],r["implicitAlign"+p]||r["lastDummyAlign"+p],a),p++;if(r.inputsInline!==void 0&&(t.disable$$module$build$src$core$events$utils(),this.setInputsInline(r.inputsInline),t.enable$$module$build$src$core$events$utils()),r.output!==void 0&&this.setOutput(!0,r.output),r.outputShape!==void 0&&this.setOutputShape(r.outputShape),r.previousStatement!==void 0&&this.setPreviousStatement(!0,r.previousStatement),r.nextStatement!==void 0&&this.setNextStatement(!0,r.nextStatement),r.tooltip!==void 0&&(p=xr(r.tooltip),this.setTooltip(p)),r.enableContextMenu!==void 0&&(this.contextMenu=!!r.enableContextMenu),r.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!r.suppressPrefixSuffix),r.helpUrl!==void 0&&(p=xr(r.helpUrl),this.setHelpUrl(p)),typeof r.extensions=="string"&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+r.type+"' block."),r.extensions=[r.extensions]),r.mutator!==void 0&&xi(r.mutator,this,!0),r=r.extensions,Array.isArray(r))for(a=0;a<r.length;a++)xi(r[a],this,!1)}jsonInitColour_(r,a){if("colour"in r)if(r.colour===void 0)console.warn(a+"Undefined colour value.");else{r=r.colour;try{this.setColour(r)}catch{console.warn(a+"Illegal colour value: ",r)}}}jsonInitStyle_(r,a){r=r.style;try{this.setStyle(r)}catch{console.warn(a+"Style does not exist: ",r)}}mixin(r,a){if(a!==void 0&&typeof a!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!a){a=[];for(const p in r)this[p]!==void 0&&a.push(p);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}Object.assign(this,r)}interpolate_(r,a,p,b){r=ra(r),this.validateTokens_(r,a.length),a=this.interpolateArguments_(r,a,p),p=[];for(let R=0,W;W=a[R];R++)if(this.isInputKeyword_(W.type)){if(r=this.inputFromJson_(W,b)){for(let pe=0,Le;Le=p[pe];pe++)r.appendField(Le[0],Le[1]);p.length=0}}else(r=this.fieldFromJson_(W))&&p.push([r,W.name])}validateTokens_(r,a){const p=[];let b=0;for(let R=0;R<r.length;R++){const W=r[R];if(typeof W=="number"){if(1>W||W>a)throw Error('Block "'+this.type+'": Message index %'+W+" out of range.");if(p[W])throw Error('Block "'+this.type+'": Message index %'+W+" duplicated.");p[W]=!0,b++}}if(b!==a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")}interpolateArguments_(r,a,p){const b=[];for(let W=0;W<r.length;W++){var R=r[W];if(typeof R=="number"&&(R=a[R-1]),typeof R=="string"){if(R===`
`)R={type:"input_end_row"},p&&(R.align=p);else if(R=this.stringToFieldJson_(R),!R)continue}b.push(R)}return(r=b.length)&&!this.isInputKeyword_(b[r-1].type)&&(r={type:"input_dummy"},p&&(r.align=p),b.push(r)),b}fieldFromJson_(r){const a=t.fromJson$$module$build$src$core$field_registry(r);return!a&&r.alt?typeof r.alt=="string"?(r=this.stringToFieldJson_(r.alt))?this.fieldFromJson_(r):null:this.fieldFromJson_(r.alt):a}inputFromJson_(r,a){var p={LEFT:t.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:t.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:t.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:t.Align$$module$build$src$core$inputs$align.CENTRE};let b;switch(r.type){case"input_value":b=this.appendValueInput(r.name);break;case"input_statement":b=this.appendStatementInput(r.name);break;case"input_dummy":b=this.appendDummyInput(r.name);break;case"input_end_row":b=this.appendEndRowInput(r.name);break;default:b=this.appendInputFromRegistry(r.type,r.name)}return b?(r.check&&b.setCheck(r.check),r.align&&(p=p[r.align.toUpperCase()],p===void 0?console.warn(a+"Illegal align value: ",r.align):b.setAlign(p)),b):null}isInputKeyword_(r){return r==="input_value"||r==="input_statement"||r==="input_dummy"||r==="input_end_row"||u(Dt.INPUT,r)}stringToFieldJson_(r){return(r=r.trim())?{type:"field_label",text:r}:null}moveInputBefore(r,a){if(r!==a){var p=-1,b=a?-1:this.inputList.length;for(let R=0,W;W=this.inputList[R];R++)if(W.name===r){if(p=R,b!==-1)break}else if(a&&W.name===a&&(b=R,p!==-1))break;if(p===-1)throw Error('Named input "'+r+'" not found.');if(b===-1)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(p,b)}}moveNumberedInputBefore(r,a){if(r===a)throw Error("Can't move input to itself.");if(r>=this.inputList.length)throw RangeError("Input index "+r+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");const p=this.inputList[r];this.inputList.splice(r,1),r<a&&a--,this.inputList.splice(a,0,p)}removeInput(r,a){for(let p=0,b;b=this.inputList[p];p++)if(b.name===r)return b instanceof md&&this.statementInputCount--,b.dispose(),this.inputList.splice(p,1),!0;if(a)return!1;throw Error("Input not found: "+r)}getInput(r){for(let a=0,p;p=this.inputList[a];a++)if(p.name===r)return p;return null}getInputTargetBlock(r){return(r=this.getInput(r))&&r.connection&&r.connection.targetBlock()}getCommentText(){let r,a;return(a=(r=this.getIcon(Lh.TYPE))==null?void 0:r.getText())!=null?a:null}setCommentText(r){var a;let p;const b=(p=(a=this.getIcon(Lh.TYPE))==null?void 0:a.getText())!=null?p:null;b!==r&&(r!==null?((a=this.getIcon(Lh.TYPE))||(a=this.addIcon(new Lh(this))),t.disable$$module$build$src$core$events$utils(),a.setText(r),t.enable$$module$build$src$core$events$utils()):this.removeIcon(Lh.TYPE),ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,b,r)))}setWarningText(r,a){}setMutator(r){}addIcon(r){if(this.hasIcon(r.getType()))throw new yE(r);return this.icons.push(r),this.icons.sort((a,p)=>a.getWeight()-p.getWeight()),r}removeIcon(r){if(!this.hasIcon(r))return!1;let a;return(a=this.getIcon(r))==null||a.dispose(),this.icons=this.icons.filter(p=>!p.getType().equals(r)),!0}hasIcon(r){return this.icons.some(a=>a.getType().equals(r))}getIcon(r){return r instanceof co?this.icons.find(a=>a.getType().equals(r)):this.icons.find(a=>a.getType().toString()===r)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(r,a,p){if(this.parentBlock_)throw Error("Block has parent");const b=new(xe(t.MOVE$$module$build$src$core$events$utils))(this);p&&b.setReason(p),this.xy_.translate(r,a),b.recordNew(),ue(b)}makeConnection_(r){return new Li(this,r)}allInputsFilled(r){if(r===void 0&&(r=!0),!r&&this.isShadow())return!1;for(let p=0,b;b=this.inputList[p];p++)if(b.connection){var a=b.connection.targetBlock();if(!a||!a.allInputsFilled(r))return!1}return(a=this.getNextBlock())?a.allInputsFilled(r):!0}toDevString(){let r=this.type?'"'+this.type+'" block':"Block";return this.id&&(r+=' (id="'+this.id+'")'),r}};E_.COLLAPSED_INPUT_NAME=b0,E_.COLLAPSED_FIELD_NAME=Fb;var ix=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(r){this.drawer=r}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(r){const a=this.curNode;this.curNode=r,this.drawer&&this.drawer.draw(a,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},kE=class extends ix{constructor(){super(),this.type="cursor"}next(){var r=this.getCurNode();if(!r)return null;for(r=r.next();r&&r.next()&&(r.getType()===Vt.types.NEXT||r.getType()===Vt.types.BLOCK);)r=r.next();return r&&this.setCurNode(r),r}in(){var r=this.getCurNode();if(!r)return null;(r.getType()===Vt.types.PREVIOUS||r.getType()===Vt.types.OUTPUT)&&(r=r.next());let a,p;return(r=(p=(a=r)==null?void 0:a.in())!=null?p:null)&&this.setCurNode(r),r}prev(){var r=this.getCurNode();if(!r)return null;for(r=r.prev();r&&r.prev()&&(r.getType()===Vt.types.NEXT||r.getType()===Vt.types.BLOCK);)r=r.prev();return r&&this.setCurNode(r),r}out(){var r=this.getCurNode();return r?((r=r.out())&&r.getType()===Vt.types.BLOCK&&(r=r.prev()||r),r&&this.setCurNode(r),r):null}};i(Dt.CURSOR,Ya,kE);var Kv=class extends kE{constructor(){super()}next(){var r=this.getCurNode();return r?((r=this.getNextNode_(r,this.validNode_))&&this.setCurNode(r),r):null}in(){return this.next()}prev(){var r=this.getCurNode();return r?((r=this.getPreviousNode_(r,this.validNode_))&&this.setCurNode(r),r):null}out(){return this.prev()}getNextNode_(r,a){if(!r)return null;const p=r.in()||r.next();return a(p)?p:p?this.getNextNode_(p,a):(r=this.findSiblingOrParent(r.out()),a(r)?r:r?this.getNextNode_(r,a):null)}getPreviousNode_(r,a){if(!r)return null;let p=r.prev();return p=p?this.getRightMostChild(p):r.out(),a(p)?p:p?this.getPreviousNode_(p,a):null}validNode_(r){let a=!1;return r=r&&r.getType(),(r===Vt.types.OUTPUT||r===Vt.types.INPUT||r===Vt.types.FIELD||r===Vt.types.NEXT||r===Vt.types.PREVIOUS||r===Vt.types.WORKSPACE)&&(a=!0),a}findSiblingOrParent(r){if(!r)return null;const a=r.next();return a||this.findSiblingOrParent(r.out())}getRightMostChild(r){if(!r.in())return r;for(r=r.in();r&&r.next();)r=r.next();return this.getRightMostChild(r)}};Kv.registrationName="basicCursor",i(Dt.CURSOR,Kv.registrationName,Kv);var sx=class extends Kv{validNode_(r){let a=!1;const p=r&&r.getType();return r&&(r=r.getLocation(),p===Vt.types.FIELD&&r&&r.isTabNavigable()&&r.isClickable()&&(a=!0)),a}},OE=10,Dh=class extends Li{constructor(r,a){super(r,a),this.highlighted=!1,this.targetConnection=null,this.db=r.workspace.connectionDBList[a],this.dbOpposite=r.workspace.connectionDBList[jt[a]],this.offsetInBlock=new tn(0,0),this.trackedState=Dh.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Dh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let r,a;(a=(r=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||a.call(r,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(r){const a=this.x-r.x;return r=this.y-r.y,Math.sqrt(a*a+r*r)}bumpAwayFrom(r){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var p=!1;if(!a.isMovable()){if(a=r.getSourceBlock().getRootBlock(),!a.isMovable())return;r=this,p=!0}var b=k()==a;b||a.addSelect();var R=r.x+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*OE)-this.x,W=r.y+t.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*OE)-this.y;p&&(W=-W),a.RTL&&(R=r.x-t.config$$module$build$src$core$config.snapRadius-Math.floor(Math.random()*OE)-this.x),a.moveBy(R,W,["bump"]),b||a.removeSelect()}}}moveTo(r,a){let p=!1;return this.trackedState===Dh.TrackedState.WILL_TRACK?(this.db.addConnection(this,a),this.trackedState=Dh.TrackedState.TRACKED,p=!0):this.trackedState===Dh.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,a),p=!0),this.x=r,this.y=a,p}moveBy(r,a){return this.moveTo(this.x+r,this.y+a)}moveToOffset(r){return this.moveTo(r.x+this.offsetInBlock.x,r.y+this.offsetInBlock.y)}setOffsetInBlock(r,a){this.offsetInBlock.x=r,this.offsetInBlock.y=a}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var r=this.targetConnection;const a=this.targetBlock();r&&a&&(r=tn.difference(this.offsetInBlock,r.offsetInBlock),a.translate(r.x,r.y))}closest(r,a){return this.dbOpposite.searchForClosest(this,r,a)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(r){r&&this.trackedState===Dh.TrackedState.TRACKED||!r&&this.trackedState===Dh.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(r?(this.db.addConnection(this,this.y),this.trackedState=Dh.TrackedState.TRACKED):(this.trackedState===Dh.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Dh.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const r=this.targetBlock().getDescendants(!1);for(let a=0;a<r.length;a++){const p=r[a],b=p.getConnections_(!0);for(let R=0;R<b.length;R++)b[R].setTracking(!1);for(const R of p.getIcons())El(R)&&R.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let r=[];if(this.type!==En.INPUT_VALUE&&this.type!==En.NEXT_STATEMENT)return r;const a=this.targetBlock();if(a){let p;a.isCollapsed()?(p=[],a.outputConnection&&p.push(a.outputConnection),a.nextConnection&&p.push(a.nextConnection),a.previousConnection&&p.push(a.previousConnection)):p=a.getConnections_(!0);for(let b=0;b<p.length;b++)r.push(...p[b].startTrackingAll());r.length||(r=[a])}return r}onFailedConnect(r){const a=this.getSourceBlock();if(oe()){const p=t.getGroup$$module$build$src$core$events$utils();setTimeout((function(){a.isDisposed()||a.getParent()||(t.setGroup$$module$build$src$core$events$utils(p),this.bumpAwayFrom(r),t.setGroup$$module$build$src$core$events$utils(!1))}).bind(this),t.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(r=!0){const{parentConnection:a,childConnection:p}=this.getParentAndChildConnections();if(a&&p){var b=a.getSourceBlock(),R=p.getSourceBlock();super.disconnectInternal(r),b.rendered&&b.queueRender(),R.rendered&&(R.updateDisabled(),R.queueRender(),R.getSvgRoot().style.display="block")}}respawnShadow_(){super.respawnShadow_();const r=this.targetBlock();r&&(r.initSvg(),r.queueRender())}neighbours(r){return this.dbOpposite.getNeighbours(this,r)}connect_(r){super.connect_(r);var a=this.getSourceBlock();r=r.getSourceBlock();const p=a.rendered,b=r.rendered;p&&a.updateDisabled(),b&&r.updateDisabled(),p&&b&&(this.type===En.NEXT_STATEMENT||this.type===En.PREVIOUS_STATEMENT?r.queueRender():a.queueRender()),(a=a.getInputWithBlock(r))&&(a=a.isVisible(),r.getSvgRoot().style.display=a?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())}setCheck(r){return super.setCheck(r),this.sourceBlock_.rendered&&this.sourceBlock_.queueRender(),this}};(function(r){r=r.TrackedState||(r.TrackedState={}),r[r.WILL_TRACK=-1]="WILL_TRACK",r[r.UNTRACKED=0]="UNTRACKED",r[r.TRACKED=1]="TRACKED"})(Dh||(Dh={})),Dh.TrackedState;var Zf=class extends E_{constructor(r,a,p){super(r,a,p),this.width=this.height=0,this.warningTextDb=new Map,this.warning=this.mutator=null,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=this.rendered=!1,this.translation="",this.bumpNeighboursPid=0,this.dragging=!1,this.relativeCoords=new tn(0,0),this.workspace=r,this.svgGroup_=ee(Be.G,{}),this.style=r.getRenderer().getConstants().getBlockStyle(null),this.pathObject=r.getRenderer().makePathObject(this.svgGroup_,this.style),r=this.pathObject.svgPath,r.tooltip=this,ri(r),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(let a=0,p;p=this.inputList[a];a++)p.init();for(var r of this.getIcons())r.initView(this.createIconPointerDownListener(r)),r.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),r=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!r||Se(r,"pointerdown",this,this.onMouseDown_),this.eventsInit_=!0,r.parentNode||this.workspace.getCanvas().appendChild(r)}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(k()!==this){var r=null;if(k()){r=k().id,t.disable$$module$build$src$core$events$utils();try{k().unselect()}finally{t.enable$$module$build$src$core$events$utils()}}r=new(xe(Fs))(r,this.id,this.workspace.id),ue(r),N(this),this.addSelect()}}unselect(){if(k()===this){var r=new(xe(Fs))(this.id,null,this.workspace.id);r.workspaceId=this.workspace.id,ue(r),N(null),this.removeSelect()}}setParent(r){const a=this.parentBlock_;if(r!==a){Q(),super.setParent(r),ae();var p=this.getSvgRoot();if(!this.workspace.isClearing&&p){var b=this.getRelativeToSurfaceXY();r?r.getSvgRoot().appendChild(p):a&&((r=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(p,r):this.workspace.getCanvas().appendChild(p),this.translate(b.x,b.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const r=this.workspace.getLayerManager();if(!r)throw Error("Cannot calculate position because the workspace has not been appended");let a=0,p=0,b=this.getSvgRoot();if(b)do{const R=Xn(b);a+=R.x,p+=R.y,b=b.parentNode}while(b&&!r.hasLayer(b));return new tn(a,p)}moveBy(r,a,p){if(this.parentBlock_)throw Error("Block has parent");const b=ne();let R=null;b&&(R=new(xe(t.MOVE$$module$build$src$core$events$utils))(this),p&&R.setReason(p)),r=new tn(r,a),a=this.getRelativeToSurfaceXY(),r=tn.sum(a,r),this.translate(r.x,r.y),this.updateComponentLocations(r),b&&R&&(R.recordNew(),ue(R)),this.workspace.resizeContents()}translate(r,a){this.translation=`translate(${r}, ${a})`,this.relativeCoords=new tn(r,a),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(r,a){const p=this.getRelativeToSurfaceXY();this.moveBy(r.x-p.x,r.y-p.y,a)}moveDuringDrag(r){this.translate(r.x,r.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(r)}snapToGrid(){if(!(this.isDeadOrDying()||this.workspace.isDragging()||this.getParent()||this.isInFlyout)){var r=this.workspace.getGrid();if(r&&r.shouldSnap()){var a=r.getSpacing(),p=a/2,b=this.getRelativeToSurfaceXY();r=Math.round(Math.round((b.x-p)/a)*a+p-b.x),a=Math.round(Math.round((b.y-p)/a)*a+p-b.y),(r||a)&&this.moveBy(r,a,["snap"])}}}getBoundingRectangle(){const r=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();let p,b;return this.RTL?(p=r.x-a.width,b=r.x):(p=r.x,b=r.x+a.width),new vi(r.y,r.y+a.height,p,b)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let r=0,a;a=this.inputList[r];r++)a.markDirty()}setCollapsed(r){this.collapsed_!==r&&(super.setCollapsed(r),this.updateCollapsed_())}updateCollapsed_(){var r=this.isCollapsed();const a=b0,p=Fb;for(let R=0,W;W=this.inputList[R];R++)W.name!==a&&W.setVisible(!r);for(var b of this.getIcons())b.updateCollapsed();r?(r=this.toString(Ze),(b=this.getField(p))?b.setValue(r):(this.getInput(a)||this.appendDummyInput(a)).appendField(new ua(r),p)):(this.updateDisabled(),this.removeInput(a))}tab(r,a){const p=new sx;p.setCurNode(Vt.createFieldNode(r)),r=p.getCurNode(),a?p.next():p.prev(),(a=p.getCurNode())&&a!==r&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))}onMouseDown_(r){const a=this.workspace.getGesture(r);a&&a.handleBlockStart(r,this)}showHelp(){const r=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;r&&window.open(r)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const r=qr.registry.getContextMenuOptions(qr.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(r),r}showContextMenu(r){const a=this.generateContextMenu();a&&a.length&&(bu(r,a,this.RTL),Jh(this))}updateComponentLocations(r){if(this.rendered){this.dragging||this.updateConnectionLocations(r),this.updateIconLocations(r),this.updateFieldLocations(r);for(const a of this.getChildren(!1))a.updateComponentLocations(tn.sum(r,a.relativeCoords))}}updateConnectionLocations(r){for(const a of this.getConnections_(!1))a.moveToOffset(r)}updateIconLocations(r){for(const a of this.getIcons())a.onLocationChange(r)}updateFieldLocations(r){for(const a of this.inputList)for(const p of a.fieldRow)p.onLocationChange(r)}setDragging(r){(this.dragging=r)?(this.translation="",Es.push(...this.getConnections_(!0)),ke(this.svgGroup_,"blocklyDragging")):(Es.length=0,dt(this.svgGroup_,"blocklyDragging"));for(let a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(r)}setMovable(r){super.setMovable(r),this.pathObject.updateMovable(r)}setEditable(r){super.setEditable(r),r=this.getIcons();for(let a=0;a<r.length;a++)r[a].updateEditable()}setShadow(r){super.setShadow(r),this.applyColour()}setInsertionMarker(r){this.isInsertionMarker_!==r&&(this.isInsertionMarker_=r)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(r,a){this.isDeadOrDying()||(Ld(),Gl(),a&&this.rendered&&(this.unplug(r),Ec(this)),super.dispose(!!r),ct(this.svgGroup_))}disposeInternal(){this.isDeadOrDying()||(super.disposeInternal(),this.rendered=!1,k()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach(r=>clearTimeout(r)),this.warningTextDb.clear(),this.getIcons().forEach(r=>r.dispose()))}checkAndDelete(){this.workspace.isFlyout||(t.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),t.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:Lm.TYPE,blockState:ti(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:H(this,!0)}}applyColour(){this.pathObject.applyColour(this);const r=this.getIcons();for(let a=0;a<r.length;a++)r[a].applyColour();for(let a=0,p;p=this.inputList[a];a++)for(let b=0,R;R=p.fieldRow[b];b++)R.applyColour()}updateDisabled(){const r=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===r){let a;(a=this.getNextBlock())==null||a.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=r;for(const a of this.getChildren(!1))a.updateDisabled()}}getCommentIcon(){ve("getCommentIcon","v10","v11","getIcon");let r;return(r=this.getIcon(Lh.TYPE))!=null?r:null}setWarningText(r,a=""){if(a)this.warningTextDb.has(a)&&(clearTimeout(this.warningTextDb.get(a)),this.warningTextDb.delete(a));else{for(var p of this.warningTextDb.values())clearTimeout(p);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(a,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(a),this.setWarningText(r,a))},100));else if(this.isInFlyout&&(r=null),p=this.getIcon(cf.TYPE),r){let b=this.getSurroundParent(),R=null;for(;b;)b.isCollapsed()&&(R=b),b=b.getSurroundParent();R&&R.setWarningText(t.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,Zf.COLLAPSED_WARNING_ID),p?p.addMessage(r,a):this.addIcon(new cf(this).addMessage(r,a))}else p&&(a?(p.addMessage("",a),p.getText()||this.removeIcon(cf.TYPE)):this.removeIcon(cf.TYPE))}setMutator(r){this.removeIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),r&&this.addIcon(r)}addIcon(r){return super.addIcon(r),r instanceof cf&&(this.warning=r),r instanceof t.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=r),this.rendered&&(r.initView(this.createIconPointerDownListener(r)),r.applyColour(),r.updateEditable(),this.queueRender(),Pi(),this.bumpNeighbours()),r}createIconPointerDownListener(r){return a=>{this.isDeadOrDying()||(a=this.workspace.getGesture(a))&&a.setStartIcon(r)}}removeIcon(r){const a=super.removeIcon(r);return r.equals(cf.TYPE)&&(this.warning=null),r.equals(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.rendered&&(this.queueRender(),Pi(),this.bumpNeighbours()),a}setEnabled(r){this.isEnabled()!==r&&(super.setEnabled(r),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())}setHighlighted(r){this.rendered&&this.pathObject.updateHighlighted(r)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(r){this.pathObject.updateDraggingDelete(r)}getColour(){return this.style.colourPrimary}setColour(r){super.setColour(r),r=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(r.style),this.style=r.style,this.styleName_=r.name,this.applyColour()}setStyle(r){const a=this.workspace.getRenderer().getConstants().getBlockStyle(r);if(this.styleName_=r,a)this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour();else throw Error("Invalid style name: "+r)}bringToFront(r=!1){let a=this;if(!a.isDeadOrDying())do{const p=a.getSvgRoot(),b=p.parentNode,R=b.childNodes;if(R[R.length-1]!==p&&b.appendChild(p),r)break;a=a.getParent()}while(a)}setPreviousStatement(r,a){super.setPreviousStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setNextStatement(r,a){super.setNextStatement(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setOutput(r,a){super.setOutput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}setInputsInline(r){super.setInputsInline(r),this.rendered&&(this.queueRender(),this.bumpNeighbours())}removeInput(r,a){return r=super.removeInput(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}moveNumberedInputBefore(r,a){super.moveNumberedInputBefore(r,a),this.rendered&&(this.queueRender(),this.bumpNeighbours())}appendInput(r){return super.appendInput(r),this.rendered&&(this.queueRender(),this.bumpNeighbours()),r}setConnectionTracking(r){if(this.previousConnection&&this.previousConnection.setTracking(r),this.outputConnection&&this.outputConnection.setTracking(r),this.nextConnection){this.nextConnection.setTracking(r);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(r)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var p=this.inputList[a].connection;p&&(p.setTracking(r),(p=p.targetBlock())&&p.setConnectionTracking(r))}}getConnections_(r){const a=[];if((r||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),r||!this.collapsed_))for(let p=0,b;b=this.inputList[p];p++)b.connection&&a.push(b.connection);return a}lastConnectionInStack(r){return super.lastConnectionInStack(r)}getMatchingConnection(r,a){return super.getMatchingConnection(r,a)}makeConnection_(r){return new Dh(this,r)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){if(!this.bumpNeighboursPid){var r=t.getGroup$$module$build$src$core$events$utils();this.bumpNeighboursPid=setTimeout(()=>{const a=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(r),this.getRootBlock().bumpNeighboursInternal(),t.setGroup$$module$build$src$core$events$utils(a),this.bumpNeighboursPid=0},t.config$$module$build$src$core$config.bumpDelay)}}bumpNeighboursInternal(){const r=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||r.isInFlyout))for(const a of this.getConnections_(!1)){if(a.isSuperior()){let p;(p=a.targetBlock())==null||p.bumpNeighboursInternal()}for(const p of a.neighbours(t.config$$module$build$src$core$config.snapRadius))p.getSourceBlock().getRootBlock()!==r&&(a.isConnected()&&p.isConnected()||(a.isSuperior()?p.bumpAwayFrom(a):a.bumpAwayFrom(p)))}}scheduleSnapAndBump(){const r=t.getGroup$$module$build$src$core$events$utils();setTimeout(()=>{t.setGroup$$module$build$src$core$events$utils(r),this.snapToGrid(),t.setGroup$$module$build$src$core$events$utils(!1)},t.config$$module$build$src$core$config.bumpDelay/2),this.bumpNeighbours()}positionNearConnection(r,a,p){if(r.type===En.NEXT_STATEMENT||r.type===En.INPUT_VALUE){let b=a.x;a=a.y,b+=p.x-r.getOffsetInBlock().x,a+=p.y-r.getOffsetInBlock().y,this.moveBy(b,a)}}getChildren(r){return super.getChildren(r)}queueRender(){return Yo(this)}render(){this.queueRender(),Pi()}renderEfficiently(){this.rendered=!0,Q(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),ae(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const r of this.inputList){const a=r.connection;a&&a.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Oh.LOCAL_MARKER).draw();for(const r of this.inputList)for(const a of r.fieldRow)a.updateMarkers_()}setCursorSvg(r){this.pathObject.setCursorSvg(r)}setMarkerSvg(r){this.pathObject.setMarkerSvg(r)}getHeightWidth(){let r=this.height,a=this.width;var p=this.getNextBlock();if(p){p=p.getHeightWidth();const b=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;r+=p.height-b,a=Math.max(a,p.width)}return{height:r,width:a}}fadeForReplacement(r){this.pathObject.updateReplacementFade(r)}highlightShapeForInput(r,a){this.pathObject.updateShapeForInputHighlight(r,a)}};Zf.INLINE=-1,Zf.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var ox=class{constructor(){}onDragEnter(r){}onDragOver(r){}onDragExit(r){}onDrop(r){}getClientRect(){return null}shouldPreventMove(r){return!1}},Ub=class extends ox{constructor(){super(),this.wouldDelete_=!1}wouldDelete(r,a){return r instanceof Zf?(r=!r.getParent()&&r.isDeletable(),this.updateWouldDelete_(r&&!a)):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}updateWouldDelete_(r){this.wouldDelete_=r}},ax=class extends Ub{constructor(r){super(),this.workspace=r,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(r=new Uo({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(r.toolboxPosition=this.workspace.toolboxPosition===Kn.TOP?Kn.BOTTOM:Kn.TOP,this.flyout=new(_(Dt.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(r)):(r.toolboxPosition=this.workspace.toolboxPosition===Kn.RIGHT?Kn.LEFT:Kn.RIGHT,this.flyout=new(_(Dt.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(r)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=ee(Be.G,{class:"blocklyTrash"});let r;const a=String(Math.random()).substring(2);r=ee(Be.CLIPPATH,{id:"blocklyTrashBodyClipPath"+a},this.svgGroup),ee(Be.RECT,{width:$_,height:zb,y:S_},r);const p=ee(Be.IMAGE,{width:eu.width,x:-LE,height:eu.height,y:-DE,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.svgGroup);return p.setAttributeNS($s,"xlink:href",this.workspace.options.pathToMedia+eu.url),r=ee(Be.CLIPPATH,{id:"blocklyTrashLidClipPath"+a},this.svgGroup),ee(Be.RECT,{width:$_,height:S_},r),this.svgLid=ee(Be.IMAGE,{width:eu.width,x:-LE,height:eu.height,y:-DE,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.svgGroup),this.svgLid.setAttributeNS($s,"xlink:href",this.workspace.options.pathToMedia+eu.url),Pe(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),Pe(this.svgGroup,"pointerup",this,this.click),Pe(p,"pointerover",this,this.mouseOver),Pe(p,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(Ge(this.flyout.createDom(Be.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ma.Capability.AUTOHIDEABLE,Ma.Capability.DELETE_AREA,Ma.Capability.DRAG_TARGET,Ma.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ct(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var r=this.contents.map(function(p){return JSON.parse(p)}),a=this.workspace.getParentSvg().style;a.cursor="wait",setTimeout(()=>{let p;(p=this.flyout)==null||p.show(r),a.cursor="";let b;(b=this.workspace.scrollbar)==null||b.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var r;(r=this.flyout)==null||r.hide();var a;(a=this.workspace.scrollbar)==null||a.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(r){!r&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(r,a){if(this.initialized){var p=Wi(this.workspace,r);r=Ar(p,new Ss($_,zb+S_),lx,Hb,r,this.workspace),a=jo(r,Hb,p.vertical===oc.TOP?yp.DOWN:yp.UP,a),this.top=a.top,this.left=a.left;var b;(b=this.svgGroup)==null||b.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new vi(this.top,this.top+zb+S_,this.left,this.left+$_)}getClientRect(){if(!this.svgGroup)return null;var r=this.svgGroup.getBoundingClientRect();const a=r.top+DE-Jv;return r=r.left+LE-Jv,new vi(a,a+S_+zb+2*Jv,r,r+$_+2*Jv)}onDragOver(r){this.setLidOpen(this.wouldDelete_)}onDragExit(r){this.setLidOpen(!1)}onDrop(r){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(r){this.isLidOpen!==r&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=r,this.animateLid())}animateLid(){const r=GR;var a=1/(r+1);this.lidOpen+=this.isLidOpen?a:-a,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Nh),a=ux+this.lidOpen*(WR-ux),this.svgGroup&&(this.svgGroup.style.opacity=`${a}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),NE/r))}setLidAngle(r){const a=this.workspace.toolboxPosition===Kn.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let p;(p=this.svgLid)==null||p.setAttribute("transform","rotate("+(a?-r:r)+","+(a?4:$_-4)+","+(S_-2)+")")}setMinOpenness(r){this.minOpenness=r,this.isLidOpen||this.setLidAngle(r*Nh)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(r){r=new(xe(Ja))(r,this.workspace.id),ue(r)}blockMouseDownWhenOpenable(r){!this.contentsIsOpen()&&this.hasContents()&&r.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(r){if(!(0>=this.workspace.options.maxTrashcanContents||r.type!==t.DELETE$$module$build$src$core$events$utils||r.type!==t.DELETE$$module$build$src$core$events$utils||r.wasShadow)){if(!r.oldJson)throw Error("Encountered a delete event without proper oldJson");if(r=JSON.stringify(this.cleanBlockJson(r.oldJson)),this.contents.indexOf(r)===-1){for(this.contents.unshift(r);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(HR)}}}cleanBlockJson(r){function a(p){if(p){if(delete p.id,delete p.x,delete p.y,delete p.enabled,p.icons&&p.icons.comment){var b=p.icons.comment;delete b.height,delete b.width,delete b.pinned}b=p.inputs;for(var R in b){var W=b[R];const pe=W.block;W=W.shadow,pe&&a(pe),W&&a(W)}p.next&&(R=p.next,p=R.block,R=R.shadow,p&&a(p),R&&a(R))}}return r=JSON.parse(JSON.stringify(r)),a(r),Object.assign({},{kind:"BLOCK"},r)}},$_=47,zb=44,S_=16,Hb=20,lx=20,Jv=10,LE=0,DE=32,HR=.1,NE=80,GR=4,ux=.4,WR=.8,Nh=45,Di=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(r,a){if(this.shortcuts.get(r.name)&&!a)throw Error(`Shortcut named "${r.name}" already exists.`);if(this.shortcuts.set(r.name,r),(a=r.keyCodes)&&0<a.length)for(let p=0;p<a.length;p++)this.addKeyMapping(a[p],r.name,!!r.allowCollision)}unregister(r){return this.shortcuts.get(r)?(this.removeAllKeyMappings(r),this.shortcuts.delete(r),!0):(console.warn(`Keyboard shortcut named "${r}" not found.`),!1)}addKeyMapping(r,a,p){r=`${r}`;const b=this.keyMap.get(r);if(b&&!p)throw Error(`Shortcut named "${a}" collides with shortcuts "${b}"`);b&&p?b.unshift(a):this.keyMap.set(r,[a])}removeKeyMapping(r,a,p){const b=this.keyMap.get(r);if(!b)return p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1;const R=b.indexOf(a);return-1<R?(b.splice(R,1),b.length===0&&this.keyMap.delete(r),!0):(p||console.warn(`No keyboard shortcut named "${a}" registered with key code "${r}"`),!1)}removeAllKeyMappings(r){for(const a of this.keyMap.keys())this.removeKeyMapping(a,r,!0)}setKeyMap(r){this.keyMap.clear();for(const a in r)this.keyMap.set(a,r[a])}getKeyMap(){const r=Object.create(null);for(const[a,p]of this.keyMap)r[a]=p;return r}getRegistry(){const r=Object.create(null);for(const[a,p]of this.shortcuts)r[a]=p;return Tl(Object.create(null),r)}onKeyDown(r,a){var p=this.serializeKeyEvent_(a);if(p=this.getShortcutNamesByKeyCode(p),!p)return!1;for(let b=0,R;R=p[b];b++){const W=this.shortcuts.get(R);let pe,Le;if((pe=W)==null||!pe.preconditionFn||(Le=W)!=null&&Le.preconditionFn(r)){let Nt,$n;if((Nt=W)!=null&&Nt.callback&&(($n=W)!=null&&$n.callback(r,a,W)))return!0}}return!1}getShortcutNamesByKeyCode(r){return this.keyMap.get(r)||[]}getKeyCodesByShortcutName(r){const a=[];for(const[p,b]of this.keyMap)-1<b.indexOf(r)&&a.push(p);return a}serializeKeyEvent_(r){let a="";for(const p in Di.modifierKeys)r.getModifierState(p)&&(a!==""&&(a+="+"),a+=p);return a!==""&&r.keyCode?a=a+"+"+r.keyCode:r.keyCode&&(a=String(r.keyCode)),a}checkModifiers_(r){for(let a=0,p;p=r[a];a++)if(!(p in Di.modifierKeys))throw Error(p+" is not a valid modifier key.")}createSerializedKey(r,a){let p="";if(a){this.checkModifiers_(a);for(const b in Di.modifierKeys)-1<a.indexOf(Di.modifierKeys[b])&&(p!==""&&(p+="+"),p+=b)}return p!==""&&r?p=p+"+"+r:r&&(p=`${r}`),p}};Di.registry=new Di,function(r){r=r.modifierKeys||(r.modifierKeys={}),r[r.Shift=16]="Shift",r[r.Control=17]="Control",r[r.Alt=18]="Alt",r[r.Meta=91]="Meta"}(Di||(Di={}));var em;(function(r){r.ESCAPE="escape",r.DELETE="delete",r.COPY="copy",r.CUT="cut",r.PASTE="paste",r.UNDO="undo",r.REDO="redo"})(em||(em={}));var Qv=null,Gb=null;bs();var tm={};tm.names=em,tm.registerCopy=us,tm.registerCut=xu,tm.registerDefaultShortcuts=bs,tm.registerDelete=Ac,tm.registerEscape=id,tm.registerPaste=tc,tm.registerRedo=Va,tm.registerUndo=bo;var BE=class{constructor(r,a){this.procedureModelClass=r,this.parameterModelClass=a,this.priority=jf}save(r){return r=r.getProcedureMap().getProcedures().map(a=>ao(a)),r.length?r:null}load(r,a){const p=a.getProcedureMap();for(const b of r)p.add(Ks(this.procedureModelClass,this.parameterModelClass,b,a))}clear(r){r.getProcedureMap().clear()}},w_={};w_.ProcedureSerializer=BE,w_.loadParameter=ja,w_.loadProcedure=Ks,w_.saveParameter=Qc,w_.saveProcedure=ao;var Wb=class{constructor(){this.priority=h_}save(r){const a=[];for(const p of r.getAllVariables())r={name:p.name,id:p.getId()},p.type&&(r.type=p.type),a.push(r);return a.length?a:null}load(r,a){for(const p of r)a.createVariable(p.name,p.type,p.id)}clear(r){r.getVariableMap().clear()}};ms("variables",new Wb);var cx={};cx.VariableSerializer=Wb;var PE={};PE.load=_p,PE.save=nc;var VR={blocks:Om,exceptions:Vf,priorities:km,procedures:w_,registry:p_,variables:cx,workspaces:PE},FE=class{constructor(r,a,p,b,R){this.workspace=r,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,a=a===void 0?!0:a,p=p===void 0?!0:p;const W=a&&p;a&&(this.hScroll=new Fo(r,!0,W,b,R)),p&&(this.vScroll=new Fo(r,!1,W,b,R)),W&&(this.corner_=ee(Be.RECT,{height:Fo.scrollbarThickness,width:Fo.scrollbarThickness,class:"blocklyScrollbarBackground"}),Ge(this.corner_,r.getBubbleCanvas()))}dispose(){ct(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const r=this.workspace.getMetrics();if(r){var a=!1,p=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===r.viewWidth&&this.oldHostMetrics_.viewHeight===r.viewHeight&&this.oldHostMetrics_.absoluteTop===r.absoluteTop&&this.oldHostMetrics_.absoluteLeft===r.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===r.scrollWidth&&this.oldHostMetrics_.viewLeft===r.viewLeft&&this.oldHostMetrics_.scrollLeft===r.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===r.scrollHeight&&this.oldHostMetrics_.viewTop===r.viewTop&&this.oldHostMetrics_.scrollTop===r.scrollTop||(p=!0)):p=a=!0,a||p){try{t.disable$$module$build$src$core$events$utils(),this.hScroll&&a&&this.hScroll.resize(r),this.vScroll&&p&&this.vScroll.resize(r)}finally{t.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==r.viewWidth||this.oldHostMetrics_.absoluteLeft!==r.absoluteLeft){let b;(b=this.corner_)==null||b.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==r.viewHeight||this.oldHostMetrics_.absoluteTop!==r.absoluteTop){let b;(b=this.corner_)==null||b.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=r}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(r,a){this.hScroll&&this.hScroll.setOrigin(r,a),this.vScroll&&this.vScroll.setOrigin(r,a)}set(r,a,p){this.hScroll&&this.hScroll.set(r,!1),this.vScroll&&this.vScroll.set(a,!1),(p||p===void 0)&&(r={},this.hScroll&&(r.x=this.hScroll.getRatio_()),this.vScroll&&(r.y=this.vScroll.getRatio_()),this.workspace.setMetrics(r))}setX(r){this.hScroll&&this.hScroll.set(r,!0)}setY(r){this.vScroll&&this.vScroll.set(r,!0)}setContainerVisible(r){this.hScroll&&this.hScroll.setContainerVisible(r),this.vScroll&&this.vScroll.setContainerVisible(r)}isVisible(){let r=!1;return this.hScroll&&(r=this.hScroll.isVisible()),this.vScroll&&(r=r||this.vScroll.isVisible()),r}setVisible(r){this.hScroll&&this.hScroll.setVisibleInternal(r),this.vScroll&&this.vScroll.setVisibleInternal(r)}resizeContent(r){this.hScroll&&this.hScroll.resizeContentHorizontal(r),this.vScroll&&this.vScroll.resizeContentVertical(r)}resizeView(r){this.hScroll&&this.hScroll.resizeViewHorizontal(r),this.vScroll&&this.vScroll.resizeViewVertical(r)}},Vb=class{constructor(r){this.workspace_=r}getDimensionsPx_(r){let a=0,p=0;return r&&(a=r.getWidth(),p=r.getHeight()),new Ss(a,p)}getFlyoutMetrics(r){return r=this.getDimensionsPx_(this.workspace_.getFlyout(r)),{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const r=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:r.width,height:r.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let r=0,a=0;const p=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var W;const pe=!((W=this.workspace_.getFlyout())!=null&&W.autoClose);W=R?p.position:b.position;const Le=W===Kn.TOP;return W===Kn.LEFT&&(R&&(r+=p.width),pe&&(r+=b.width)),Le&&(R&&(a+=p.height),pe&&(a+=b.height)),{top:a,left:r}}getViewMetrics(r){r=r?this.workspace_.scale:1;const a=this.getSvgMetrics(),p=this.getToolboxMetrics(),b=this.getFlyoutMetrics(),R=!!this.workspace_.getToolbox();var W;const pe=!((W=this.workspace_.getFlyout())!=null&&W.autoClose);W=R?p.position:b.position;const Le=W===Kn.LEFT||W===Kn.RIGHT;return(W===Kn.TOP||W===Kn.BOTTOM)&&(R&&(a.height-=p.height),pe&&(a.height-=b.height)),Le&&(R&&(a.width-=p.width),pe&&(a.width-=b.width)),{height:a.height/r,width:a.width/r,top:-this.workspace_.scrollY/r,left:-this.workspace_.scrollX/r}}getContentMetrics(r){r=r?1:this.workspace_.scale;const a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*r,width:(a.right-a.left)*r,top:a.top*r,left:a.left*r}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(r){if(!this.hasFixedEdges())return{};const a=this.workspace_.isMovableHorizontally(),p=this.workspace_.isMovableVertically();r=r||this.getViewMetrics(!1);const b={};return p||(b.top=r.top,b.bottom=r.top+r.height),a||(b.left=r.left,b.right=r.left+r.width),b}getPaddedContent_(r,a){const p=a.top+a.height,b=a.left+a.width,R=r.width;r=r.height;const W=R/2,pe=r/2;return{top:Math.min(a.top-pe,p-r),bottom:Math.max(p+pe,a.top+r),left:Math.min(a.left-W,b-R),right:Math.max(b+W,a.left+R)}}getScrollMetrics(r,a,p){r=r?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var b=p||this.getContentMetrics();p=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,b),b=p.top!==void 0?p.top:a.top;const R=p.left!==void 0?p.left:a.left;return{top:b/r,left:R/r,width:((p.right!==void 0?p.right:a.right)-R)/r,height:((p.bottom!==void 0?p.bottom:a.bottom)-b)/r}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const r=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),p=this.getSvgMetrics(),b=this.getAbsoluteMetrics(),R=this.getViewMetrics(),W=this.getContentMetrics(),pe=this.getScrollMetrics(!1,R,W);return{contentHeight:W.height,contentWidth:W.width,contentTop:W.top,contentLeft:W.left,scrollHeight:pe.height,scrollWidth:pe.width,scrollTop:pe.top,scrollLeft:pe.left,viewHeight:R.height,viewWidth:R.width,viewTop:R.top,viewLeft:R.left,absoluteTop:b.top,absoluteLeft:b.left,svgHeight:p.height,svgWidth:p.width,toolboxWidth:r.width,toolboxHeight:r.height,toolboxPosition:r.position,flyoutWidth:a.width,flyoutHeight:a.height}}};i(Dt.METRICS_MANAGER,Ya,Vb);var hx=class extends c{constructor(r){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Jl,this.isBlank=!!r,r&&(this.workspaceId=r.id)}};i(Dt.EVENT,Jl,hx);var UE=class extends f{constructor(r,a,p){super(r?r.workspace.id:void 0),this.type=uo,r&&(this.blockId=r.id,this.isStart=a,this.blocks=p)}toJson(){const r=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return r.isStart=this.isStart,r.blockId=this.blockId,r.blocks=this.blocks,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new UE),a.isStart=r.isStart,a.blockId=r.blockId,a.blocks=r.blocks,a}};i(Dt.EVENT,uo,UE);var jb={};jb.bumpIntoBounds=qc,jb.bumpIntoBoundsHandler=oa,jb.bumpTopObjectsIntoBounds=wn;var Xb=class{constructor(r,a){this.connectionCandidate=this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.dragIconData_=[],this.draggingBlock_=r,this.workspace_=a,this.connectionPreviewer=new(_(Dt.CONNECTION_PREVIEWER,this.workspace_.options))(r),this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=On(r,this.startXY_)}dispose(){this.dragIconData_.length=0,this.connectionPreviewer.dispose()}startDrag(r,a){t.getGroup$$module$build$src$core$events$utils()||t.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent_(),this.draggingBlock_.bringToFront(!0),Q(),this.workspace_.setResizesEnabled(!1),ta(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,r),this.draggingBlock_.setDragging(!0);let p;(p=this.workspace_.getLayerManager())==null||p.moveToDragLayer(this.draggingBlock_)}shouldDisconnect_(r){return!!(this.draggingBlock_.getParent()||r&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())}disconnectBlock_(r,a){this.draggingBlock_.unplug(r),r=this.pixelsToWorkspaceUnits_(a),r=tn.sum(this.startXY_,r),this.draggingBlock_.translate(r.x,r.y),Ds(this.draggingBlock_)}fireDragStartEvent_(){const r=new(xe(uo))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));ue(r)}drag(r,a){const p=this.draggingBlock_;this.moveBlock(p,a),this.updateDragTargets(r,p),this.wouldDeleteBlock_=this.wouldDeleteBlock(r,p,a),this.updateCursorDuringBlockDrag_(),this.updateConnectionPreview(p,a)}moveBlock(r,a){a=this.pixelsToWorkspaceUnits_(a),a=tn.sum(this.startXY_,a),r.moveDuringDrag(a)}updateDragTargets(r,a){if(r=this.workspace_.getDragTarget(r),this.dragTarget_!==r){let p;(p=this.dragTarget_)==null||p.onDragExit(a),r==null||r.onDragEnter(a)}r==null||r.onDragOver(a),this.dragTarget_=r}wouldDeleteBlock(r,a,p){return(r=this.workspace_.getDragTarget(r))&&this.workspace_.getComponentManager().hasCapability(r.id,Ma.Capability.DELETE_AREA)?r.wouldDelete(a,!!this.getConnectionCandidate(a,p)):!1}updateConnectionPreview(r,a){a=this.pixelsToWorkspaceUnits_(a);const p=this.connectionCandidate,b=this.getConnectionCandidate(r,a);if(b){this.connectionCandidate=a=p&&this.currCandidateIsBetter(p,a,b)?p:b;var{local:R,neighbour:W}=a;R.type!==En.OUTPUT_VALUE&&R.type!==En.PREVIOUS_STATEMENT||!W.isConnected()||W.targetBlock().isInsertionMarker()||this.orphanCanConnectAtEnd(r,W.targetBlock(),R.type)?this.connectionPreviewer.previewConnection(R,W):this.connectionPreviewer.previewReplacement(R,W,W.targetBlock())}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(r,a,p){return!!Li.getConnectionForOrphanedConnection(r,p===En.OUTPUT_VALUE?a.outputConnection:a.previousConnection)}currCandidateIsBetter(r,a,p){const{local:b,neighbour:R}=r;r=new tn(b.x,b.y);const W=new tn(R.x,R.y);return a=tn.distance(tn.sum(r,a),W),p.distance>a-t.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(r,a){r=this.getLocalConnections(r);let p=this.connectionCandidate?t.config$$module$build$src$core$config.connectingSnapRadius:t.config$$module$build$src$core$config.snapRadius,b=null;for(const R of r){const{connection:W,radius:pe}=R.closest(p,a);W&&(b={local:R,neighbour:W,distance:pe},p=pe)}return b}getLocalConnections(r){const a=r.getConnections_(!1),p=r.lastConnectionInStack(!0);return p&&p!==r.nextConnection&&a.push(p),a}endDrag(r,a){if(this.drag(r,a),this.fireDragEndEvent_(),ae(),ta(),this.connectionPreviewer.hidePreview(),r=null,this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_)||(r=this.getNewLocationAfterDrag_(a).delta),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),!this.maybeDeleteBlock_()){let p;(p=this.workspace_.getLayerManager())==null||p.moveOffDragLayer(this.draggingBlock_,K),this.draggingBlock_.setDragging(!1),r?this.updateBlockAfterMove_():qc(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)}this.connectionPreviewer.dispose(),this.workspace_.setResizesEnabled(!0),t.setGroup$$module$build$src$core$events$utils(!1)}getNewLocationAfterDrag_(r){r=this.pixelsToWorkspaceUnits_(r);const a=tn.sum(this.startXY_,r);return{delta:r,newLocation:a}}maybeDeleteBlock_(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Es.length=0,!0):!1}updateBlockAfterMove_(){this.fireMoveEvent_(),this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.draggingBlock_.queueRender(),this.draggingBlock_.scheduleSnapAndBump()}applyConnections(r){const{local:a,neighbour:p}=r;if(a.connect(p),this.draggingBlock_.rendered){const b=a.isSuperior()?p:a,R=this.draggingBlock_.getRootBlock();tr().then(()=>{Do(b.getSourceBlock()),setTimeout(()=>{R.bringToFront()},0)})}}fireDragEndEvent_(){const r=new(xe(uo))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));ue(r)}updateToolboxStyle_(r){const a=this.workspace_.getToolbox();if(a){const p=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";r&&typeof a.removeStyle=="function"?a.removeStyle(p):r||typeof a.addStyle!="function"||a.addStyle(p)}}fireMoveEvent_(){if(!this.draggingBlock_.isDeadOrDying()){var r=new(xe(t.MOVE$$module$build$src$core$events$utils))(this.draggingBlock_);r.setReason(["drag"]),r.oldCoordinate=this.startXY_,r.recordNew(),ue(r)}}updateCursorDuringBlockDrag_(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)}pixelsToWorkspaceUnits_(r){return r=new tn(r.x/this.workspace_.scale,r.y/this.workspace_.scale),this.workspace_.isMutator&&r.scale(1/this.workspace_.options.parentWorkspace.scale),r}dragIcons_(){ve("Blockly.BlockDragger.prototype.dragIcons_","v10","v11")}getInsertionMarkers(){return this.workspace_.getAllBlocks().filter(r=>r.isInsertionMarker())}};i(Dt.BLOCK_DRAGGER,Ya,Xb);var E0={};E0.Bubble=Yi,E0.MiniWorkspaceBubble=Gm,E0.TextBubble=y_,E0.TextInputBubble=fd;var zE=class extends $p{constructor(r,a,p,b){super(r),this.type=rh,this.recordUndo=!1,r&&(this.name=a,this.oldValue=p,this.newValue=b)}toJson(){const r=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return r.name=this.name,r.oldValue=this.oldValue,r.newValue=this.newValue,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new zE),a.name=r.name,a.oldValue=r.oldValue,a.newValue=r.newValue,a}isNull(){return this.oldValue===this.newValue}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(a=a.getBlockById(this.blockId),!a)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");r=r?this.newValue:this.oldValue,(a=a.getField(this.name))?a.setValue(r):console.warn("Can't set non-existent field: "+this.name)}};i(Dt.EVENT,rh,zE);var HE=class extends $p{constructor(r){super(r),this.type=t.MOVE$$module$build$src$core$events$utils,r&&(r.isShadow()&&(this.recordUndo=!1),r=this.currentLocation_(),this.oldParentId=r.parentId,this.oldInputName=r.inputName,this.oldCoordinate=r.coordinate)}toJson(){const r=super.toJson();return r.oldParentId=this.oldParentId,r.oldInputName=this.oldInputName,this.oldCoordinate&&(r.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),r.newParentId=this.newParentId,r.newInputName=this.newInputName,this.newCoordinate&&(r.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(r.reason=this.reason),this.recordUndo||(r.recordUndo=this.recordUndo),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new HE),a.oldParentId=r.oldParentId,a.oldInputName=r.oldInputName,r.oldCoordinate&&(p=r.oldCoordinate.split(","),a.oldCoordinate=new tn(Number(p[0]),Number(p[1]))),a.newParentId=r.newParentId,a.newInputName=r.newInputName,r.newCoordinate&&(p=r.newCoordinate.split(","),a.newCoordinate=new tn(Number(p[0]),Number(p[1]))),r.reason!==void 0&&(a.reason=r.reason),r.recordUndo!==void 0&&(a.recordUndo=r.recordUndo),a}recordNew(){const r=this.currentLocation_();this.newParentId=r.parentId,this.newInputName=r.inputName,this.newCoordinate=r.coordinate}setReason(r){this.reason=r}currentLocation_(){var r=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var a=r.getBlockById(this.blockId);if(!a)throw Error("The block associated with the block move event could not be found");r={};const p=a.getParent();return p?(r.parentId=p.id,(a=p.getInputWithBlock(a))&&(r.inputName=a.name)):r.coordinate=a.getRelativeToSurfaceXY(),r}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&tn.equals(this.oldCoordinate,this.newCoordinate)}run(r){var a=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var p=a.getBlockById(this.blockId);if(p){var b=r?this.newParentId:this.oldParentId,R=r?this.newInputName:this.oldInputName;if(r=r?this.newCoordinate:this.oldCoordinate,b){var W=a.getBlockById(b);if(!W){console.warn("Can't connect to non-existent block: "+b);return}}if(p.getParent()&&p.unplug(),r)R=p.getRelativeToSurfaceXY(),p.moveBy(r.x-R.x,r.y-R.y,this.reason);else{a=p.outputConnection,(!a||p.previousConnection&&p.previousConnection.isConnected())&&(a=p.previousConnection);let pe,Le;p=(Le=a)==null?void 0:Le.type,R?(p=W.getInput(R))&&(pe=p.connection):p===En.PREVIOUS_STATEMENT&&(pe=W.nextConnection),pe&&a?a.connect(pe):console.warn("Can't connect to non-existent input: "+R)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Dt.EVENT,t.MOVE$$module$build$src$core$events$utils,HE);var GE=class extends f{constructor(r,a,p){super(r?r.workspace.id:void 0),this.type=eo,r&&(this.blockId=r.id,this.isOpen=a,this.bubbleType=p)}toJson(){const r=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return r.isOpen=this.isOpen,r.bubbleType=this.bubbleType,r.blockId=this.blockId||"",r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new GE),a.isOpen=r.isOpen,a.bubbleType=r.bubbleType,a.blockId=r.blockId,a}},WE;(function(r){r.MUTATOR="mutator",r.COMMENT="comment",r.WARNING="warning"})(WE||(WE={})),i(Dt.EVENT,eo,GE);var Og=class extends c{constructor(r){super(),this.isBlank=!r,r&&(this.commentId=r.id,this.workspaceId=r.workspace.id,this.group=t.getGroup$$module$build$src$core$events$utils(),this.recordUndo=oe())}toJson(){const r=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return r.commentId=this.commentId,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new Og),a.commentId=r.commentId,a}static CommentCreateDeleteHelper(r,a){var p=r.getEventWorkspace_();if(a){if(a=t.createElement$$module$build$src$core$utils$xml("xml"),!r.xml)throw Error("Ecountered a comment event without proper xml");a.appendChild(r.xml),t.domToWorkspace$$module$build$src$core$xml(a,p)}else{if(!r.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(p=p.getCommentById(r.commentId))?p.dispose():console.warn("Can't uncreate non-existent comment: "+r.commentId)}}},VE=class extends Og{constructor(r,a,p){super(r),this.type=ad,r&&(this.oldContents_=typeof a>"u"?"":a,this.newContents_=typeof p>"u"?"":p)}toJson(){const r=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return r.oldContents=this.oldContents_,r.newContents=this.newContents_,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new VE),a.oldContents_=r.oldContents,a.newContents_=r.newContents,a}isNull(){return this.oldContents_===this.newContents_}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){var p=r?this.newContents_:this.oldContents_;if(!p)throw Error(r?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");a.setContent(p)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Dt.EVENT,ad,VE);var jE=class extends Og{constructor(r){super(r),this.type=So,r&&(this.xml=r.toXmlWithXY())}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ei(this.xml),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new jE),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}run(r){Og.CommentCreateDeleteHelper(this,r)}};i(Dt.EVENT,So,jE);var XE=class extends Og{constructor(r){super(r),this.type=Ih,r&&(this.xml=r.toXmlWithXY())}run(r){Og.CommentCreateDeleteHelper(this,!r)}toJson(){const r=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");return r.xml=Ei(this.xml),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new XE),a.xml=t.textToDom$$module$build$src$core$utils$xml(r.xml),a}};i(Dt.EVENT,Ih,XE);var YE=class extends Og{constructor(r){super(r),this.type=Qa,r&&(this.comment_=r,this.oldCoordinate_=r.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setOldCoordinate(r){this.oldCoordinate_=r}toJson(){const r=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return r.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,r.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new YE),p=r.oldCoordinate.split(","),a.oldCoordinate_=new tn(Number(p[0]),Number(p[1])),p=r.newCoordinate.split(","),a.newCoordinate_=new tn(Number(p[0]),Number(p[1])),a}isNull(){return tn.equals(this.oldCoordinate_,this.newCoordinate_)}run(r){var a=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(a=a.getCommentById(this.commentId)){if(r=r?this.newCoordinate_:this.oldCoordinate_,!r)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");var p=a.getRelativeToSurfaceXY();a.moveBy(r.x-p.x,r.y-p.y)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Dt.EVENT,Qa,YE);var KE=class extends f{constructor(r,a,p){super(p),this.type=Ca,this.oldItem=r??void 0,this.newItem=a??void 0}toJson(){const r=super.toJson();return r.oldItem=this.oldItem,r.newItem=this.newItem,r}static fromJson(r,a,p){return a=super.fromJson(r,a,p??new KE),a.oldItem=r.oldItem,a.newItem=r.newItem,a}};i(Dt.EVENT,Ca,KE),t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.CHANGE$$module$build$src$core$events$utils,t.CREATE$$module$build$src$core$events$utils,t.DELETE$$module$build$src$core$events$utils,t.MOVE$$module$build$src$core$events$utils,t.disable$$module$build$src$core$events$utils,t.enable$$module$build$src$core$events$utils,t.getGroup$$module$build$src$core$events$utils,t.setGroup$$module$build$src$core$events$utils;var Mn={};Mn.Abstract=c,Mn.BLOCK_CHANGE=t.CHANGE$$module$build$src$core$events$utils,Mn.BLOCK_CREATE=t.CREATE$$module$build$src$core$events$utils,Mn.BLOCK_DELETE=t.DELETE$$module$build$src$core$events$utils,Mn.BLOCK_DRAG=uo,Mn.BLOCK_FIELD_INTERMEDIATE_CHANGE=rh,Mn.BLOCK_MOVE=t.MOVE$$module$build$src$core$events$utils,Mn.BUBBLE_OPEN=eo,Mn.BUMP_EVENTS=ld,Mn.BlockBase=$p,Mn.BlockChange=ho,Mn.BlockCreate=Bv,Mn.BlockDelete=RE,Mn.BlockDrag=UE,Mn.BlockFieldIntermediateChange=zE,Mn.BlockMove=HE,Mn.BubbleOpen=GE,Mn.BubbleType=WE,Mn.CHANGE=t.CHANGE$$module$build$src$core$events$utils,Mn.CLICK=Lu,Mn.COMMENT_CHANGE=ad,Mn.COMMENT_CREATE=So,Mn.COMMENT_DELETE=Ih,Mn.COMMENT_MOVE=Qa,Mn.CREATE=t.CREATE$$module$build$src$core$events$utils,Mn.Click=S,Mn.ClickTarget=M,Mn.CommentBase=Og,Mn.CommentChange=VE,Mn.CommentCreate=jE,Mn.CommentDelete=XE,Mn.CommentMove=YE,Mn.DELETE=t.DELETE$$module$build$src$core$events$utils,Mn.FINISHED_LOADING=Jl,Mn.FinishedLoading=hx,Mn.MARKER_MOVE=Cl,Mn.MOVE=t.MOVE$$module$build$src$core$events$utils,Mn.MarkerMove=Bb,Mn.SELECTED=Fs,Mn.Selected=Hd,Mn.THEME_CHANGE=Kl,Mn.TOOLBOX_ITEM_SELECT=Ca,Mn.TRASHCAN_OPEN=Ja,Mn.ThemeChange=f_,Mn.ToolboxItemSelect=KE,Mn.TrashcanOpen=IE,Mn.UI=sh,Mn.UiBase=f,Mn.VAR_CREATE=Ka,Mn.VAR_DELETE=Ou,Mn.VAR_RENAME=ih,Mn.VIEWPORT_CHANGE=ns,Mn.VarBase=bp,Mn.VarCreate=Tp,Mn.VarDelete=CE,Mn.VarRename=ME,Mn.ViewportChange=m_,Mn.clearPendingUndo=Z,Mn.disable=t.disable$$module$build$src$core$events$utils,Mn.disableOrphans=Xe,Mn.enable=t.enable$$module$build$src$core$events$utils,Mn.filter=j,Mn.fire=ue,Mn.fromJson=Oe,Mn.get=xe,Mn.getDescendantIds=_e,Mn.getGroup=t.getGroup$$module$build$src$core$events$utils,Mn.getRecordUndo=oe,Mn.isEnabled=ne,Mn.setGroup=t.setGroup$$module$build$src$core$events$utils,Mn.setRecordUndo=de;var dx=class extends Wv{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(r){super.setFontConstants_(r),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(r){super.setDynamicProperties_(r),this.SELECTED_GLOW_COLOUR=r.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const a=Number(r.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=r.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(r=Number(r.getComponentStyle("replacementGlowSize")))&&!isNaN(r)?r:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ct(this.selectedGlowFilter),this.replacementGlowFilter&&ct(this.replacementGlowFilter)}makeStartHat(){const r=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH,p=as("c",[Cn(25,-r),Cn(71,-r),Cn(a,0)]);return{height:r,width:a,path:p}}makeHexagonal(){function r(p,b,R){var W=p/2;return W=W>a?a:W,R=R?-1:1,p=(b?-1:1)*p/2,$l(-R*W,p)+$l(R*W,p)}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(p){return p/=2,p>a?a:p},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return r(p,!1,!1)},pathUp(p){return r(p,!0,!1)},pathRightDown(p){return r(p,!1,!0)},pathRightUp(p){return r(p,!1,!0)}}}makeRounded(){function r(b,R,W){const pe=b>p?b-p:0;b=(b>p?p:b)/2;const Le=W===R?"0":"1";return zr("a","0 0,"+Le,b,Cn((W?1:-1)*b,(R?-1:1)*b))+cn("v",(R?-1:1)*pe)+zr("a","0 0,"+Le,b,Cn((W?-1:1)*b,(R?-1:1)*b))}const a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width(b){return b/=2,b>a?a:b},height(b){return b},connectionOffsetY(b){return b/2},connectionOffsetX(b){return-b},pathDown(b){return r(b,!1,!1)},pathUp(b){return r(b,!0,!1)},pathRightDown(b){return r(b,!1,!0)},pathRightUp(b){return r(b,!1,!0)}}}makeSquared(){function r(p,b,R){p-=2*a;const W=R===b?"0":"1";return zr("a","0 0,"+W,a,Cn((R?1:-1)*a,(b?-1:1)*a))+cn("v",(b?-1:1)*p)+zr("a","0 0,"+W,a,Cn((R?-1:1)*a,(b?-1:1)*a))}const a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(p){return a},height(p){return p},connectionOffsetY(p){return p/2},connectionOffsetX(p){return-p},pathDown(p){return r(p,!1,!1)},pathUp(p){return r(p,!0,!1)},pathRightDown(p){return r(p,!1,!0)},pathRightUp(p){return r(p,!1,!0)}}}shapeFor(r){let a=r.getCheck();switch(!a&&r.targetConnection&&(a=r.targetConnection.getCheck()),r.type){case En.INPUT_VALUE:case En.OUTPUT_VALUE:if(r=r.getSourceBlock().getOutputShape(),r!==null)switch(r){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&a.indexOf("Boolean")!==-1?this.HEXAGONAL:a&&a.indexOf("Number")!==-1?this.ROUNDED:(a&&a.indexOf("String"),this.ROUNDED);case En.PREVIOUS_STATEMENT:case En.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function r($n){return as("c",[Cn($n*R/2,0),Cn($n*R*3/4,pe/2),Cn($n*R,pe)])+Sl([Cn($n*R,W)])+as("c",[Cn($n*R/4,pe/2),Cn($n*R/2,pe),Cn($n*R,pe)])+cn("h",$n*b)+as("c",[Cn($n*R/2,0),Cn($n*R*3/4,-(pe/2)),Cn($n*R,-pe)])+Sl([Cn($n*R,-W)])+as("c",[Cn($n*R/4,-(pe/2)),Cn($n*R/2,-pe),Cn($n*R,-pe)])}const a=this.NOTCH_WIDTH,p=this.NOTCH_HEIGHT,b=a/3,R=b/3,W=p/2,pe=W/2,Le=r(1),Nt=r(-1);return{type:this.SHAPES.NOTCH,width:a,height:p,pathLeft:Le,pathRight:Nt}}makeInsideCorners(){const r=this.CORNER_RADIUS,a=zr("a","0 0,0",r,Cn(-r,r)),p=zr("a","0 0,1",r,Cn(-r,r)),b=zr("a","0 0,0",r,Cn(r,r)),R=zr("a","0 0,1",r,Cn(r,r));return{width:r,height:r,pathTop:a,pathBottom:b,rightWidth:r,rightHeight:r,pathTopRight:p,pathBottomRight:R}}generateSecondaryColour_(r){return xc("#000",r,.15)||r}generateTertiaryColour_(r){return xc("#000",r,.25)||r}createDom(r,a,p){super.createDom(r,a,p),r=ee(Be.DEFS,{},r),a=ee(Be.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),ee(Be.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),p=ee(Be.FECOMPONENTTRANSFER,{result:"outBlur"},a),ee(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},p),ee(Be.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),ee(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter=a,r=ee(Be.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},r),ee(Be.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},r),a=ee(Be.FECOMPONENTTRANSFER,{result:"outBlur"},r),ee(Be.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),ee(Be.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},r),ee(Be.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},r),ee(Be.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},r),this.replacementGlowFilterId=r.id,this.replacementGlowFilter=r}getCSS_(r){return[`${r} .blocklyText,`,`${r} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r} .blocklyText {`,"fill: #fff;","}",`${r} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${r} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${r} .blocklyNonEditableText>text,`,`${r} .blocklyEditableText>text,`,`${r} .blocklyNonEditableText>g>text,`,`${r} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${r} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${r} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${r} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${r} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${r} .blocklyDropdownText {`,"fill: #fff !important;","}",`${r}.blocklyWidgetDiv .goog-menuitem,`,`${r}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${r}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${r} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${r} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${r} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},px=class extends Vv{constructor(r,a){super(r,a)}draw(){const r=this.block_.pathObject;r.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),r.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(r.outputShapeType=this.info_.outputConnection.shape.type),r.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(r){if(!(0>=r.height)){if(tt.isSpacer(r)){const b=r.precedesStatement;var a=r.followsStatement;if(b||a){const R=this.constants_.INSIDE_CORNERS;var p=R.rightHeight;p=r.height-(b?p:0),a=a?R.pathBottomRight:"",r=0<p?cn("V",r.yPos+p):"",this.outlinePath_+=a+r+(b?R.pathTopRight:"");return}}this.outlinePath_+=cn("V",r.yPos+r.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const r=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=ii(r.xPos,this.info_.startY),this.outlinePath_+=cn("h",r.width)}drawFlatBottom_(){const r=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=cn("V",r.baseline),this.outlinePath_+=cn("h",-r.width)}drawInlineInput_(r){this.positionInlineInputConnection_(r);const a=r.input.name;r.connectedBlock||this.info_.isInsertionMarker||(r=ys(r.xPos+r.connectionWidth,r.centerline-r.height/2)+this.getInlineInputPath(r),this.block_.pathObject.setOutlinePath(a,r))}getInlineInputPath(r){const a=r.width-2*r.connectionWidth,p=r.height;return cn("h",a)+r.shape.pathRightDown(p)+cn("h",-a)+r.shape.pathUp(p)+"z"}drawStatementInput_(r){var a=r.getLastInput();const p=a.xPos+a.notchOffset+a.shape.width,b=this.constants_.INSIDE_CORNERS,R=a.shape.pathRight+cn("h",-(a.notchOffset-b.width))+b.pathTop,W=r.height-2*b.height;a=b.pathBottom+cn("h",a.notchOffset-b.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=cn("H",p)+R+cn("v",W)+a+cn("H",r.xPos+r.width),this.positionStatementInputConnection_(r)}drawConnectionHighlightPath(r){const a=r.connectionModel;if(a.type===En.NEXT_STATEMENT||a.type===En.PREVIOUS_STATEMENT||a.type===En.OUTPUT_VALUE&&!r.isDynamicShape)super.drawConnectionHighlightPath(r);else{r=a.type===En.INPUT_VALUE?ys(r.connectionWidth,-r.height/2)+this.getInlineInputPath(r):ys(r.width,-r.height/2)+r.shape.pathDown(r.height);var p=a.getSourceBlock(),b,R;(R=(b=p.pathObject).addConnectionHighlight)==null||R.call(b,a,r,a.getOffsetInBlock(),p.RTL)}}},$0=class extends ai{constructor(r,a,p,b,R,W,pe){if(super(ai.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",p=Number(xr(p)),a=Number(xr(a)),isNaN(p)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=p||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Ss(a,p+$0.Y_PADDING),this.imageHeight=p,typeof R=="function"&&(this.clickHandler=R),r!==ai.SKIP_SETUP&&(pe?this.configure_(pe):(this.flipRtl=!!W,this.altText=xr(b)||""),this.setValue(xr(r)))}configure_(r){super.configure_(r),r.flipRtl&&(this.flipRtl=r.flipRtl),r.alt&&(this.altText=xr(r.alt))}initView(){this.imageElement=ee(Be.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS($s,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(r){return typeof r!="string"?null:r}doValueUpdate_(r){this.value_=r,this.imageElement&&this.imageElement.setAttributeNS($s,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(r){r!==this.altText&&(this.altText=r||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(r){this.clickHandler=r}getText_(){return this.altText}static fromJson(r){if(!r.src||!r.width||!r.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(r.src,r.width,r.height,void 0,void 0,void 0,r)}};$0.Y_PADDING=1,Xs("field_image",$0),$0.prototype.DEFAULT_VALUE="";var qv=class extends ai{constructor(r,a,p){super(ai.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.spellcheck!==void 0&&(this.spellcheck_=r.spellcheck)}initView(){if(!this.getSourceBlock())throw new no;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new no;let a;return this.fullBlockClickTarget_=!((a=this.getConstants())==null||!a.FULL_BLOCK_FIELDS)&&r.isSimpleReporter()}doValueInvalid_(r){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,r=this.value_,this.value_=this.htmlInput_.getAttribute("data-untyped-default-value"),this.sourceBlock_&&ne()&&ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,r,this.value_)))}doValueUpdate_(r){this.isTextValid_=this.isDirty_=!0,this.value_=r}applyColour(){const r=this.getSourceBlock();if(!r)throw new no;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",r.style.colourTertiary)):(this.borderRect_.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let r;return(r=this.getConstants())!=null&&r.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var r=this.htmlInput_;this.isTextValid_?(dt(r,"blocklyInvalidInput"),lr(r,zs.INVALID,!1)):(ke(r,"blocklyInvalidInput"),lr(r,zs.INVALID,!0))}if(r=this.getSourceBlock(),!r)throw new no;this.getConstants().FULL_BLOCK_FIELDS&&r.applyColour()}setSpellcheck(r){r!==this.spellcheck_&&(this.spellcheck_=r,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(r,a=!1){this.workspace_=this.sourceBlock_.workspace,!a&&this.workspace_.options.modalInputs&&(Ql||fn||kn)?this.showPromptEditor_():this.showInlineEditor_(a)}showPromptEditor_(){Xo(t.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),r=>{r!==null&&this.setValue(this.getValueFromEditorText_(r)),this.onFinishEditing_(this.value_)})}showInlineEditor_(r){const a=this.getSourceBlock();if(!a)throw new no;yu(this,a.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,r||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var r=this.getSourceBlock();if(!r)throw new no;t.setGroup$$module$build$src$core$events$utils(!0);const a=Vs();var p=this.getClickTarget_();if(!p)throw Error("A click target has not been set.");ke(p,"editing"),p=document.createElement("input"),p.className="blocklyHtmlInput",p.setAttribute("spellcheck",this.spellcheck_);const b=this.workspace_.getScale();var R=this.getConstants().FIELD_TEXT_FONTSIZE*b+"pt";return a.style.fontSize=R,p.style.fontSize=R,R=qv.BORDERRADIUS*b+"px",this.isFullBlockField()&&(R=this.getScaledBBox(),R=(R.bottom-R.top)/2+"px",r=r.getParent()?r.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,p.style.border=1*b+"px solid "+r,a.style.borderRadius=R,a.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(a.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*b+"px")),p.style.borderRadius=R,a.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(p),p}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&ne()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(ue(new(xe(t.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),t.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var r=Vs().style;if(r.width="auto",r.height="auto",r.fontSize="",r.transition="",r.boxShadow="",this.htmlInput_=null,r=this.getClickTarget_(),!r)throw Error("A click target has not been set.");dt(r,"editing")}onFinishEditing_(r){}bindInputEvents_(r){this.onKeyDownWrapper_=Se(r,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Se(r,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(rt(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(rt(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(r){r.key==="Enter"?(gl(),va()):r.key==="Escape"?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),gl(),va()):r.key==="Tab"&&(gl(),va(),this.sourceBlock_.tab(this,!r.shiftKey),r.preventDefault())}onHtmlInputChange_(r){r=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&ne()&&this.value_!==r&&ue(new(xe(rh))(this.sourceBlock_,this.name||null,r,this.value_))}setEditorValue_(r,a=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(r)),this.setValue(r,a)}resizeEditor_(){var r=this.getSourceBlock();if(!r)throw new no;const a=Vs(),p=this.getScaledBBox();a.style.width=p.right-p.left+"px",a.style.height=p.bottom-p.top+"px",r=new tn(r.RTL?p.right-a.offsetWidth:p.left,p.top),a.style.left=r.x+"px",a.style.top=r.y+"px"}repositionForWindowResize(){const r=this.getSourceBlock();return r instanceof Zf?(qc(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),r)||this.resizeEditor_(),!0):!1}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(r){return`${r}`}getValueFromEditorText_(r){return r}};qv.BORDERRADIUS=4;var x_=class extends qv{constructor(r,a,p){super(r,a,p)}doClassValidation_(r){return r===void 0?null:`${r}`}static fromJson(r){return new this(xr(r.text),void 0,r)}};Xs("field_input",x_),x_.prototype.DEFAULT_VALUE="";var fx=class extends Db{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){return!!r.outputConnection}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},Yb=class extends Gv{constructor(r,a){if(super(r,a),this.connectedBottomNextConnection=!1,this.connectedBlock){for(r=this.connectedBlock;a=r.getNextBlock();)r=a;r.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},mx=class extends Zr{constructor(r){super(r),this.width=this.height=0,this.type|=tt.getType("RIGHT_CONNECTION")}},gx=class extends SE{constructor(r){super(r)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(r){const a=(r.hat?r.hat==="cap":this.constants_.ADD_START_HATS)&&!r.outputConnection&&!r.previousConnection;return!!r.outputConnection||a}hasRightSquareCorner(r){return!!r.outputConnection&&!r.statementInputCount&&!r.nextConnection}},_x=class extends T_{constructor(r,a){super(r,a),this.isInline=!0,this.renderer_=r,this.constants_=this.renderer_.getConstants(),this.topRow=new gx(this.constants_),this.bottomRow=new fx(this.constants_),this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new mx(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(r,a){return a?a instanceof Wm||r instanceof md||a instanceof md?!0:r instanceof t.ValueInput$$module$build$src$core$inputs$value_input||r instanceof qf||r instanceof Wm?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(r){return r.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(r)}getInRowSpacing_(r,a){return r&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!r&&a&&tt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:r&&tt.isLeftRoundedCorner(r)&&a&&(tt.isPreviousConnection(a)||tt.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:r&&tt.isLeftSquareCorner(r)&&a&&tt.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(r,a){if(tt.isTopRow(r)&&tt.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const p=tt.isInputRow(r)&&r.hasStatement,b=tt.isInputRow(a)&&a.hasStatement;return b||p?(r=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),b&&p?Math.max(r,this.constants_.DUMMY_INPUT_MIN_HEIGHT):r):tt.isTopRow(r)?r.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):tt.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(r,a){const p=this.width-this.startX;return tt.isInputRow(r)&&r.hasStatement||tt.isInputRow(a)&&a.hasStatement?Math.max(p,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):p}getElemCenterline_(r,a){if(r.hasStatement&&!tt.isSpacer(a)&&!tt.isStatementInput(a))return r.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(tt.isInlineInput(a)&&a instanceof Rg){const p=a.connectedBlock;if(p&&p.outputConnection&&p.nextConnection)return r.yPos+p.height/2}return super.getElemCenterline_(r,a)}addInput_(r,a){if((r instanceof qf||r instanceof Wm)&&a.hasDummyInput&&a.align===t.Align$$module$build$src$core$inputs$align.LEFT&&r.align===t.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(a,r);else if(r instanceof md){a.elements.push(new Yb(this.constants_,r)),a.hasStatement=!0,a.align===null&&(a.align=r.align);return}super.addInput_(r,a)}addAlignmentPadding_(r,a){if(this.rightAlignedDummyInputs.get(r)){let p;for(let b=0;b<r.elements.length;b++){const R=r.elements[b];if(tt.isSpacer(R)&&(p=R),tt.isField(R)&&R instanceof b_&&R.parentInput===this.rightAlignedDummyInputs.get(r))break}if(p){p.width+=a,r.width+=a;return}}super.addAlignmentPadding_(r,a)}adjustXPosition_(){const r=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let a=r;for(let R=2;R<this.rows.length-1;R+=2){var p=this.rows[R-1];const W=this.rows[R];var b=this.rows[R+1];if(p=R===2?!!this.topRow.hasPreviousConnection:!!p.followsStatement,b=R+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,tt.isInputRow(W)&&W.hasStatement){W.measure();let pe,Le;a=W.width-((Le=(pe=W.getLastInput())==null?void 0:pe.width)!=null?Le:0)+r}else if(p&&(R===2||b)&&tt.isInputRow(W)&&!W.hasStatement){b=W.xPos,p=null;for(let pe=0;pe<W.elements.length;pe++){const Le=W.elements[pe];tt.isSpacer(Le)&&(p=Le),p&&(tt.isField(Le)||tt.isInput(Le))&&b<a&&!(tt.isField(Le)&&Le instanceof b_&&(Le.field instanceof ua||Le.field instanceof $0))&&(p.width+=a-b),b+=Le.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var r=this.outputConnection.shape;if("isDynamic"in r&&r.isDynamic){for(var a=0,p=0;p<this.rows.length;p++){const b=this.rows[p];b.yPos=a,a+=b.height}this.height=a,p=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,a=r.height(p),p=r.width(p),this.outputConnection.height=a,this.outputConnection.width=p,this.outputConnection.startX=p,this.outputConnection.connectionOffsetY=r.connectionOffsetY(a),this.outputConnection.connectionOffsetX=r.connectionOffsetX(p),r=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(r=p,this.rightSide.height=a,this.rightSide.width=r,this.rightSide.centerline=a/2,this.rightSide.xPos=this.width+r),this.startX=p,this.width+=p+r,this.widthWithChildren+=p+r}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var r=0,a=0;a<this.rows.length;a++){var p=this.rows[a];if(!tt.isInputRow(p))continue;r=p.elements[p.elements.length-2];let b=this.getNegativeSpacing_(p.elements[1]),R=this.getNegativeSpacing_(r);r=b+R;const W=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-r<W&&(r=this.width-W,b=r/2,R=r/2),p.elements.unshift(new Xd(this.constants_,-b)),p.elements.push(new Xd(this.constants_,-R))}if(r)for(this.width-=r,this.widthWithChildren-=r,this.rightSide.xPos-=r,a=0;a<this.rows.length;a++)p=this.rows[a],tt.isTopOrBottomRow(p)&&(p.elements[1].width-=r),p.width-=r,p.widthWithConnectedBlocks-=r}}getNegativeSpacing_(r){if(!r||!this.outputConnection)return 0;const a=this.outputConnection.width;var p=this.outputConnection.shape.type;const b=this.constants_;if(1<this.inputRows.length)switch(p){case b.SHAPES.ROUND:return p=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,p=this.height/2>p?p:this.height/2,a-p*(1-Math.sin(Math.acos((p-this.constants_.SMALL_PADDING)/p)));default:return 0}if(tt.isInlineInput(r)&&r instanceof Rg){const R=r.connectedBlock;return r=R?R.pathObject.outputShapeType:r.shape.type,r==null||R&&R.outputConnection&&(R.statementInputCount||R.nextConnection)||p===b.SHAPES.HEXAGONAL&&p!==r?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][r]}return tt.isField(r)&&r instanceof b_?p===b.SHAPES.ROUND&&r.field instanceof x_?a-2.75*b.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[p][0]:tt.isIcon(r)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let b=2;b<this.rows.length-1;b+=2){const R=this.rows[b-1],W=this.rows[b],pe=this.rows[b+1];var r=b===2,a=b+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!pe.precedesStatement;if(r?this.topRow.hasPreviousConnection:R.followsStatement){var p=W.elements[1];if(p=W.elements.length===3&&p instanceof b_&&(p.field instanceof ua||p.field instanceof $0),!r&&p)R.height-=this.constants_.SMALL_PADDING,pe.height-=this.constants_.SMALL_PADDING,W.height-=this.constants_.MEDIUM_PADDING;else if(!r&&!a)R.height+=this.constants_.SMALL_PADDING;else if(a){for(r=!1,a=0;a<W.elements.length;a++)if(p=W.elements[a],p instanceof Rg&&tt.isInlineInput(p)&&p.connectedBlock&&!p.connectedBlock.isShadow()&&40<=p.connectedBlock.getHeightWidth().height){r=!0;break}r&&(R.height-=this.constants_.SMALL_PADDING,pe.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},T=class extends Pb{constructor(r,a,p){super(r,a,p),this.markerCircle=null}showWithInputOutput(r){const a=r.getSourceBlock();r=r.getLocation().getOffsetInBlock(),this.positionCircle(r.x,r.y),this.setParent_(a),this.showCurrent_()}showWithOutput_(r){this.showWithInputOutput(r)}showWithInput_(r){this.showWithInputOutput(r)}showWithBlock_(r){r=r.getLocation();const a=r.getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(r),this.showCurrent_()}positionCircle(r,a){let p;(p=this.markerCircle)==null||p.setAttribute("cx",`${r}`);let b;(b=this.markerCircle)==null||b.setAttribute("cy",`${a}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=ee(Be.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const r=this.getBlinkProperties_();ee(Be.ANIMATE,r,this.markerCircle)}return this.markerSvg_}applyColour_(r){super.applyColour_(r);let a;(a=this.markerCircle)==null||a.setAttribute("fill",this.colour_);let p;if((p=this.markerCircle)==null||p.setAttribute("stroke",this.colour_),this.isCursor()){r=this.colour_+";transparent;transparent;";let b;(b=this.markerCircle)==null||b.firstElementChild.setAttribute("values",r)}}},C=class extends jv{constructor(r,a,p){super(r,a,p),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=p}setPath(r){super.setPath(r),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",r)}applyColour(r){super.applyColour(r);const a=r.getParent();r.isShadow()&&a&&this.svgPath.setAttribute("stroke",a.style.colourTertiary);for(const p of this.outlines.values())p.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const r of this.outlines.values())r.setAttribute("transform","scale(-1 1)")}updateSelected(r){this.setClass_("blocklySelected",r),r?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(r){this.setClass_("blocklyReplaceable",r),r?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(r,a){r=r.getParentInput().name,(r=this.getOutlinePath(r))&&(a?r.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):r.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const r of this.outlines.keys())this.remainingOutlines.add(r)}endDrawing(){if(this.remainingOutlines.size)for(const r of this.remainingOutlines)this.removeOutlinePath(r);this.remainingOutlines.clear()}setOutlinePath(r,a){r=this.getOutlinePath(r),r.setAttribute("d",a),r.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(r){return this.outlines.has(r)||this.outlines.set(r,ee(Be.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(r),this.outlines.get(r)}removeOutlinePath(r){let a,p;(a=this.outlines.get(r))==null||(p=a.parentNode)==null||p.removeChild(this.outlines.get(r)),this.outlines.delete(r)}},P=class extends Xv{constructor(r){super(r)}makeConstants_(){return new dx}makeRenderInfo_(r){return new _x(this,r)}makeDrawer_(r,a){return new px(r,a)}makeMarkerDrawer(r,a){return new T(r,this.getConstants(),a)}makePathObject(r,a){return new C(r,a,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(r,a,p){return ve("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),a.type===En.OUTPUT_VALUE?r.isConnected()?Mp.PREVIEW_TYPE.REPLACEMENT_FADE:Mp.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(r,a,p)}};Ys("zelos",P);var Y={};Y.BottomRow=fx,Y.ConstantProvider=dx,Y.Drawer=px,Y.MarkerSvg=T,Y.PathObject=C,Y.RenderInfo=_x,Y.Renderer=P,Y.RightConnectionShape=mx,Y.StatementInput=Yb,Y.TopRow=gx,Eo();var ce={};ce.registerCleanup=Hr,ce.registerCollapse=Ri,ce.registerCollapseExpandBlock=Au,ce.registerComment=sd,ce.registerDefaultOptions=Eo,ce.registerDelete=Qs,ce.registerDeleteAll=Mu,ce.registerDisable=Iu,ce.registerDuplicate=lo,ce.registerExpand=Hi,ce.registerHelp=To,ce.registerInline=wa,ce.registerRedo=Or,ce.registerUndo=yr;var be=class extends qv{constructor(r,a,p){super(ai.SKIP_SETUP),this.clockwise=be.CLOCKWISE,this.offset=be.OFFSET,this.wrap=be.WRAP,this.round=be.ROUND,this.boundEvents=[],this.symbol_=this.gauge=this.line=null,r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){switch(super.configure_(r),r.mode){case ze.COMPASS:this.clockwise=!0,this.offset=90;break;case ze.PROTRACTOR:this.clockwise=!1,this.offset=0}r.clockwise&&(this.clockwise=r.clockwise),r.offset&&(this.offset=r.offset),r.wrap&&(this.wrap=r.wrap),r.round&&(this.round=r.round)}initView(){super.initView(),this.symbol_=ee(Be.TSPAN,{}),this.symbol_.appendChild(document.createTextNode("")),this.getTextElement().appendChild(this.symbol_)}render_(){super.render_(),this.updateGraph()}showEditor_(r){super.showEditor_(r,Ql||fn||kn),r=this.dropdownCreate(),Wl().appendChild(r),this.sourceBlock_ instanceof Zf&&kd(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Ye(this,this.dropdownDispose.bind(this)),this.updateGraph()}dropdownCreate(){const r=ee(Be.SVG,{xmlns:yg,"xmlns:html":Oc,"xmlns:xlink":$s,version:"1.1",height:2*be.HALF+"px",width:2*be.HALF+"px"});r.style.touchAction="none";const a=ee(Be.CIRCLE,{cx:be.HALF,cy:be.HALF,r:be.RADIUS,class:"blocklyAngleCircle"},r);this.gauge=ee(Be.PATH,{class:"blocklyAngleGauge"},r),this.line=ee(Be.LINE,{x1:be.HALF,y1:be.HALF,class:"blocklyAngleLine"},r);for(let p=0;360>p;p+=15)ee(Be.LINE,{x1:be.HALF+be.RADIUS,y1:be.HALF,x2:be.HALF+be.RADIUS-(p%45===0?10:5),y2:be.HALF,class:"blocklyAngleMarks",transform:"rotate("+p+","+be.HALF+","+be.HALF+")"},r);return this.boundEvents.push(Se(r,"click",this,this.hide)),this.boundEvents.push(Se(a,"pointerdown",this,this.onMouseMove_,!0)),this.boundEvents.push(Se(a,"pointermove",this,this.onMouseMove_,!0)),r}dropdownDispose(){for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.line=this.gauge=null}hide(){vs(this),gl()}onMouseMove_(r){var a=this.gauge.ownerSVGElement.getBoundingClientRect();const p=r.clientX-a.left-be.HALF;r=r.clientY-a.top-be.HALF,a=Math.atan(-r/p),isNaN(a)||(a=_s(a),0>p?a+=180:0<r&&(a+=360),a=this.clockwise?this.offset+360-a:360-(this.offset-a),this.displayMouseOrKeyboardValue(a))}displayMouseOrKeyboardValue(r){if(this.round&&(r=Math.round(r/this.round)*this.round),r=this.wrapValue(r),r!==this.value_){const a=this.value_;this.setEditorValue_(r,!1),this.sourceBlock_&&ne()&&this.value_!==a&&ue(new(xe(rh))(this.sourceBlock_,this.name||null,a,this.value_))}}updateGraph(){if(this.gauge&&this.line){var r=Number(this.getText())+this.offset,a=Tc(r%360);r=["M ",be.HALF,",",be.HALF];var p=be.HALF,b=be.HALF;if(!isNaN(a)){const R=Number(this.clockwise),W=Tc(this.offset),pe=Math.cos(W)*be.RADIUS,Le=Math.sin(W)*-be.RADIUS;R&&(a=2*W-a),p+=Math.cos(a)*be.RADIUS,b-=Math.sin(a)*be.RADIUS,a=Math.abs(Math.floor((a-W)/Math.PI)%2),R&&(a=1-a),r.push(" l ",pe,",",Le," A ",be.RADIUS,",",be.RADIUS," 0 ",a," ",R," ",p,",",b," z")}this.gauge.setAttribute("d",r.join("")),this.line.setAttribute("x2",`${p}`),this.line.setAttribute("y2",`${b}`)}}onHtmlInputKeyDown_(r){super.onHtmlInputKeyDown_(r);var a=this.getSourceBlock();if(!a)throw new no;let p=0;switch(r.key){case"ArrowLeft":p=a.RTL?1:-1;break;case"ArrowRight":p=a.RTL?-1:1;break;case"ArrowDown":p=-1;break;case"ArrowUp":p=1}p&&(a=this.getValue(),this.displayMouseOrKeyboardValue(a+p*this.round),r.preventDefault(),r.stopPropagation())}doClassValidation_(r){return r=Number(r),isNaN(r)||!isFinite(r)?null:this.wrapValue(r)}wrapValue(r){return r%=360,0>r&&(r+=360),r>this.wrap&&(r-=360),r}static fromJson(r){return new this(r.angle,void 0,r)}};be.HALF=50,be.RADIUS=be.HALF-1,be.CLOCKWISE=!1,be.OFFSET=0,be.WRAP=360,be.ROUND=15,Xs("field_angle",be),be.prototype.DEFAULT_VALUE=0,It(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: 0.8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: 0.8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`);var ze;(function(r){r.COMPASS="compass",r.PROTRACTOR="protractor"})(ze||(ze={}));var qe=class extends ai{constructor(r,a,p){super(ai.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=qe.CHECK_CHAR,r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.checkCharacter&&(this.checkChar=r.checkCharacter)}saveState(){const r=this.saveLegacyState(qe);return r!==null?r:this.getValueBoolean()}initView(){super.initView();const r=this.getTextElement();ke(r,"blocklyCheckbox"),r.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(r){this.checkChar=r||qe.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(r){return r===!0||r==="TRUE"?"TRUE":r===!1||r==="FALSE"?"FALSE":null}doValueUpdate_(r){this.value_=this.convertValueToBool_(r),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(r){return typeof r=="string"?r==="TRUE":!!r}static fromJson(r){return new this(r.checked,void 0,r)}};qe.CHECK_CHAR="",Xs("field_checkbox",qe),qe.prototype.DEFAULT_VALUE=!1;var ut=class extends ai{constructor(r,a,p){super(ai.SKIP_SETUP),this.highlightedIndex=this.picker=null,this.boundEvents=[],this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles=this.colours=null,this.columns=0,r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.colourOptions&&(this.colours=r.colourOptions),r.colourTitles&&(this.titles=r.colourTitles),r.columns&&(this.columns=r.columns)}initView(){this.size_=new Ss(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.createBorderRect_(),this.getBorderRect().style.fillOpacity="1",this.getBorderRect().setAttribute("stroke","#fff"),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const r=this.getSourceBlock();if(!r)throw new no;const a=this.getConstants();return r.isSimpleReporter()&&!(a==null||!a.FIELD_COLOUR_FULL_BLOCK)}applyColour(){const r=this.getSourceBlock();if(!r)throw new no;if(this.fieldGroup_){var a=this.borderRect_;if(!a)throw Error("The border rect has not been initialized");this.isFullBlockField()?(a.style.display="none",r.pathObject.svgPath.setAttribute("fill",this.getValue()),r.pathObject.svgPath.setAttribute("stroke","#fff")):(a.style.display="block",a.style.fill=this.getValue())}}getSize(){let r;return(r=this.getConstants())!=null&&r.FIELD_COLOUR_FULL_BLOCK&&(this.render_(),this.isDirty_=!1),super.getSize()}render_(){super.render_();const r=this.getSourceBlock();if(!r)throw new no;r.applyColour()}updateSize_(r){var a=this.getConstants();this.isFullBlockField()?(r=2*(r??0),a=a.FIELD_TEXT_HEIGHT):(r=a.FIELD_COLOUR_DEFAULT_WIDTH,a=a.FIELD_COLOUR_DEFAULT_HEIGHT),this.size_.height=a,this.size_.width=r,this.positionBorderRect_()}doClassValidation_(r){return typeof r!="string"?null:Ha(r)}getText(){let r=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(r)&&(r="#"+r[1]+r[3]+r[5]),r}setColours(r,a){return this.colours=r,a&&(this.titles=a),this}setColumns(r){return this.columns=r,this}showEditor_(){this.dropdownCreate(),Wl().appendChild(this.picker),Ye(this,this.dropdownDispose.bind(this)),this.picker.focus({preventScroll:!0})}onClick(r){r=(r=r.target)&&r.getAttribute("data-colour"),r!==null&&(this.setValue(r),vs(this))}onKeyDown(r){let a=!0;var p;switch(r.key){case"ArrowUp":this.moveHighlightBy(0,-1);break;case"ArrowDown":this.moveHighlightBy(0,1);break;case"ArrowLeft":this.moveHighlightBy(-1,0);break;case"ArrowRight":this.moveHighlightBy(1,0);break;case"Enter":(p=this.getHighlighted())&&(p=p.getAttribute("data-colour"),p!==null&&this.setValue(p)),va();break;default:a=!1}a&&r.stopPropagation()}moveHighlightBy(r,a){if(this.highlightedIndex){var p=this.colours||ut.COLOURS,b=this.columns||ut.COLUMNS,R=this.highlightedIndex%b,W=Math.floor(this.highlightedIndex/b);R+=r,W+=a,0>r?0>R&&0<W?(R=b-1,W--):0>R&&(R=0):0<r?R>b-1&&W<Math.floor(p.length/b)-1?(R=0,W++):R>b-1&&R--:0>a?0>W&&(W=0):0<a&&W>Math.floor(p.length/b)-1&&(W=Math.floor(p.length/b)-1),this.setHighlightedCell(this.picker.childNodes[W].childNodes[R],W*b+R)}}onMouseMove(r){const a=(r=r.target)&&Number(r.getAttribute("data-index"));a!==null&&a!==this.highlightedIndex&&this.setHighlightedCell(r,a)}onMouseEnter(){let r;(r=this.picker)==null||r.focus({preventScroll:!0})}onMouseLeave(){var r;(r=this.picker)==null||r.blur(),(r=this.getHighlighted())&&dt(r,"blocklyColourHighlighted")}getHighlighted(){if(!this.highlightedIndex)return null;const r=this.columns||ut.COLUMNS,a=this.picker.childNodes[Math.floor(this.highlightedIndex/r)];return a?a.childNodes[this.highlightedIndex%r]:null}setHighlightedCell(r,a){const p=this.getHighlighted();p&&dt(p,"blocklyColourHighlighted"),ke(r,"blocklyColourHighlighted"),this.highlightedIndex=a,(r=r.getAttribute("id"))&&this.picker&&lr(this.picker,zs.ACTIVEDESCENDANT,r)}dropdownCreate(){const r=this.columns||ut.COLUMNS,a=this.colours||ut.COLOURS,p=this.titles||ut.TITLES,b=this.getValue(),R=document.createElement("table");R.className="blocklyColourTable",R.tabIndex=0,R.dir="ltr",Wr(R,Nc.GRID),lr(R,zs.EXPANDED,!0),lr(R,zs.ROWCOUNT,Math.floor(a.length/r)),lr(R,zs.COLCOUNT,r);let W;for(let pe=0;pe<a.length;pe++){pe%r===0&&(W=document.createElement("tr"),Wr(W,Nc.ROW),R.appendChild(W));const Le=document.createElement("td");W.appendChild(Le),Le.setAttribute("data-colour",a[pe]),Le.title=p[pe]||a[pe],Le.id=re(),Le.setAttribute("data-index",`${pe}`),Wr(Le,Nc.GRIDCELL),lr(Le,zs.LABEL,a[pe]),lr(Le,zs.SELECTED,a[pe]===b),Le.style.backgroundColor=a[pe],a[pe]===b&&(Le.className="blocklyColourSelected",this.highlightedIndex=pe)}this.boundEvents.push(Se(R,"pointerdown",this,this.onClick,!0)),this.boundEvents.push(Se(R,"pointermove",this,this.onMouseMove,!0)),this.boundEvents.push(Se(R,"pointerenter",this,this.onMouseEnter,!0)),this.boundEvents.push(Se(R,"pointerleave",this,this.onMouseLeave,!0)),this.boundEvents.push(Se(R,"keydown",this,this.onKeyDown,!1)),this.picker=R}dropdownDispose(){for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.highlightedIndex=this.picker=null}static fromJson(r){return new this(r.colour,void 0,r)}};ut.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),ut.TITLES=[],ut.COLUMNS=7,ut.prototype.DEFAULT_VALUE=ut.COLOURS[0],Xs("field_colour",ut),It(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: 0.5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`);var Ht=class extends ua{constructor(r,a,p){super(String(r??""),a,p),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(r){return new this(xr(r.text),void 0,r)}};Xs("field_label_serializable",Ht);var Gt=class extends x_{constructor(r,a,p){super(ai.SKIP_SETUP),this.textGroup=null,this.maxLines_=1/0,this.isOverflowedY_=!1,r!==ai.SKIP_SETUP&&(p&&this.configure_(p),this.setValue(r),a&&this.setValidator(a))}configure_(r){super.configure_(r),r.maxLines&&this.setMaxLines(r.maxLines)}toXml(r){return r.textContent=this.getValue().replace(/\n/g,"&#10;"),r}fromXml(r){this.setValue(r.textContent.replace(/&#10;/g,`
`))}saveState(){const r=this.saveLegacyState(Gt);return r!==null?r:this.getValue()}loadState(r){this.loadLegacyState(ai,r)||this.setValue(r)}initView(){this.createBorderRect_(),this.textGroup=ee(Be.G,{class:"blocklyEditableText"},this.fieldGroup_)}getDisplayText_(){const r=this.getSourceBlock();if(!r)throw new no;let a=this.getText();if(!a)return ai.NBSP;const p=a.split(`
`);a="";const b=this.isOverflowedY_?this.maxLines_:p.length;for(let R=0;R<b;R++){let W=p[R];W.length>this.maxDisplayLength?W=W.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&R===b-1&&(W=W.substring(0,W.length-3)+"..."),W=W.replace(/\s/g,ai.NBSP),a+=W,R!==b-1&&(a+=`
`)}return r.RTL&&(a+=""),a}doValueUpdate_(r){super.doValueUpdate_(r),this.value_!==null&&(this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_)}render_(){var r=this.getSourceBlock();if(!r)throw new no;for(var a,p=this.textGroup;a=p.firstChild;)p.removeChild(a);a=this.getDisplayText_().split(`
`);let b=0;for(let R=0;R<a.length;R++){const W=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;ee(Be.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:b+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},p).appendChild(document.createTextNode(a[R])),b+=W}this.isBeingEdited_&&(p=this.htmlInput_,this.isOverflowedY_?ke(p,"blocklyHtmlTextAreaInputOverflowedY"):dt(p,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(r.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),r=this.htmlInput_,this.isTextValid_?(dt(r,"blocklyInvalidInput"),lr(r,zs.INVALID,!1)):(ke(r,"blocklyInvalidInput"),lr(r,zs.INVALID,!0)))}updateSize_(){var r=this.textGroup.childNodes;const a=this.getConstants().FIELD_TEXT_FONTSIZE,p=this.getConstants().FIELD_TEXT_FONTWEIGHT,b=this.getConstants().FIELD_TEXT_FONTFAMILY;let R=0,W=0;for(var pe=0;pe<r.length;pe++){var Le=Ve(r[pe],a,p,b);Le>R&&(R=Le),W+=this.getConstants().FIELD_TEXT_HEIGHT+(0<pe?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){for(r=String(this.value_).split(`
`),pe=ee(Be.TEXT,{class:"blocklyText blocklyMultilineText"}),Le=0;Le<r.length;Le++){r[Le].length>this.maxDisplayLength&&(r[Le]=r[Le].substring(0,this.maxDisplayLength)),pe.textContent=r[Le];const Nt=Ve(pe,a,p,b);Nt>R&&(R=Nt)}R+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(W+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,R+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",`${R}`),this.borderRect_.setAttribute("height",`${W}`)),this.size_.width=R,this.size_.height=W,this.positionBorderRect_()}showEditor_(r,a){super.showEditor_(r,a),this.forceRerender()}widgetCreate_(){const r=Vs(),a=this.workspace_.getScale(),p=document.createElement("textarea");p.className="blocklyHtmlInput blocklyHtmlTextAreaInput",p.setAttribute("spellcheck",String(this.spellcheck_));var b=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";r.style.fontSize=b,p.style.fontSize=b,p.style.borderRadius=x_.BORDERRADIUS*a+"px",b=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;const R=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return p.style.padding=R+"px "+b+"px "+R+"px "+b+"px",b=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,p.style.lineHeight=b*a+"px",r.appendChild(p),p.value=p.defaultValue=this.getEditorText_(this.value_),p.setAttribute("data-untyped-default-value",String(this.value_)),p.setAttribute("data-old-value",""),ln?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(p),p}setMaxLines(r){typeof r=="number"&&0<r&&r!==this.maxLines_&&(this.maxLines_=r,this.forceRerender())}getMaxLines(){return this.maxLines_}onHtmlInputKeyDown_(r){r.key!=="Enter"&&super.onHtmlInputKeyDown_(r)}static fromJson(r){return new this(xr(r.text),void 0,r)}};Xs("field_multilinetext",Gt),It(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`);var qt=class extends qv{constructor(r,a,p,b,R,W){super(ai.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,r!==ai.SKIP_SETUP&&(W?this.configure_(W):this.setConstraints(a,p,b),this.setValue(r),R&&this.setValidator(R))}configure_(r){super.configure_(r),this.setMinInternal(r.min),this.setMaxInternal(r.max),this.setPrecisionInternal(r.precision)}setConstraints(r,a,p){this.setMinInternal(r),this.setMaxInternal(a),this.setPrecisionInternal(p),this.setValue(this.getValue())}setMin(r){this.setMinInternal(r),this.setValue(this.getValue())}setMinInternal(r){r==null?this.min_=-1/0:(r=Number(r),isNaN(r)||(this.min_=r))}getMin(){return this.min_}setMax(r){this.setMaxInternal(r),this.setValue(this.getValue())}setMaxInternal(r){r==null?this.max_=1/0:(r=Number(r),isNaN(r)||(this.max_=r))}getMax(){return this.max_}setPrecision(r){this.setPrecisionInternal(r),this.setValue(this.getValue())}setPrecisionInternal(r){this.precision_=Number(r)||0;let a=String(this.precision_);a.indexOf("e")!==-1&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const p=a.indexOf(".");this.decimalPlaces=p===-1?r?0:null:a.length-p-1}getPrecision(){return this.precision_}doClassValidation_(r){return r===null||(r=`${r}`.replace(/O/gi,"0"),r=r.replace(/,/g,""),r=r.replace(/infinity/i,"Infinity"),r=Number(r||0),isNaN(r))?null:(r=Math.min(Math.max(r,this.min_),this.max_),this.precision_&&isFinite(r)&&(r=Math.round(r/this.precision_)*this.precision_),this.decimalPlaces!==null&&(r=Number(r.toFixed(this.decimalPlaces))),r)}widgetCreate_(){const r=super.widgetCreate_();return-1/0<this.min_&&(r.min=`${this.min_}`,lr(r,zs.VALUEMIN,this.min_)),1/0>this.max_&&(r.max=`${this.max_}`,lr(r,zs.VALUEMAX,this.max_)),r}static fromJson(r){return new this(r.value,void 0,void 0,void 0,void 0,r)}};Xs("field_number",qt),qt.prototype.DEFAULT_VALUE=0;var yn=class extends jd{constructor(r,a,p,b,R){super(ai.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=yn.dropdownCreate,this.defaultVariableName=typeof r=="string"?r:"",this.size_=new Ss(0,0),r!==ai.SKIP_SETUP&&(R?this.configure_(R):this.setTypes(p,b),a&&this.setValidator(a))}configure_(r){super.configure_(r),this.setTypes(r.variableTypes,r.defaultType)}initModel(){var r=this.getSourceBlock();if(!r)throw new no;this.variable||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(r.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(r.getId()))}shouldAddBorderRect_(){const r=this.getSourceBlock();if(!r)throw new no;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||r.type!=="variables_get")}fromXml(r){var a=this.getSourceBlock();if(!a)throw new no;const p=r.getAttribute("id"),b=r.textContent,R=r.getAttribute("variabletype")||r.getAttribute("variableType")||"";if(a=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,p,b,R),R!==null&&R!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+Ei(r)+".");this.setValue(a.getId())}toXml(r){return this.initModel(),r.id=this.variable.getId(),r.textContent=this.variable.name,this.variable.type&&r.setAttribute("variabletype",this.variable.type),r}saveState(r){var a=this.saveLegacyState(yn);return a!==null||(this.initModel(),a={id:this.variable.getId()},r&&(a.name=this.variable.name,a.type=this.variable.type)),a}loadState(r){const a=this.getSourceBlock();if(!a)throw new no;this.loadLegacyState(yn,r)||(r=t.getOrCreateVariablePackage$$module$build$src$core$variables(a.workspace,r.id||null,r.name,r.type||""),this.setValue(r.getId()))}setSourceBlock(r){if(r.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(r)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(r){if(r===null)return null;var a=this.getSourceBlock();if(!a)throw new no;return a=t.getVariable$$module$build$src$core$variables(a.workspace,r),a?(a=a.type,this.typeIsAllowed(a)?r:(console.warn("Variable type doesn't match this field!  Type was "+a),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+r),null)}doValueUpdate_(r){const a=this.getSourceBlock();if(!a)throw new no;this.variable=t.getVariable$$module$build$src$core$variables(a.workspace,r),super.doValueUpdate_(r)}typeIsAllowed(r){const a=this.getVariableTypes();if(!a)return!0;for(let p=0;p<a.length;p++)if(r===a[p])return!0;return!1}getVariableTypes(){var r=this.variableTypes;if(r===null&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(r=r||[""],r.length===0)throw r=this.getText(),Error("'variableTypes' of field variable "+r+" was an empty list");return r}setTypes(r=null,a=""){if(Array.isArray(r)){let p=!1;for(let b=0;b<r.length;b++)r[b]===a&&(p=!0);if(!p)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}else if(r!==null)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=a,this.variableTypes=r}refreshVariableName(){this.forceRerender()}onItemSelected_(r,a){if(r=a.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(r===en){t.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(r===Jt){this.sourceBlock_.workspace.deleteVariableById(this.variable.getId());return}}this.setValue(r)}referencesVariables(){return!0}static fromJson(r){return new this(xr(r.variable),void 0,void 0,void 0,r)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const r=this.getText();let a=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var p=this.getVariableTypes(),b=0;b<p.length;b++){const R=this.sourceBlock_.workspace.getVariablesOfType(p[b]);a=a.concat(R)}for(a.sort(Zp.compareByName),p=[],b=0;b<a.length;b++)p[b]=[a[b].name,a[b].getId()];return p.push([t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,en]),t.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&p.push([t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),Jt]),p}};Xs("field_variable",yn);var Rn=class{constructor(r,a,p,b){this.workspace=r,this.targetWorkspace=a,this.isLabel_=b,this.onMouseUpWrapper=null,this.height=this.width=0,this.svgText=this.svgGroup=null,this.text=p.text,this.position=new tn(0,0),this.callbackKey=p.callbackKey||p.callbackkey,this.cssClass=p["web-class"]||null,this.info=p}createDom(){var r=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass&&(r+=" "+this.cssClass),this.svgGroup=ee(Be.G,{class:r},this.workspace.getCanvas());let a;this.isLabel_||(a=ee(Be.RECT,{class:"blocklyFlyoutButtonShadow",rx:Rn.BORDER_RADIUS,ry:Rn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),r=ee(Be.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:Rn.BORDER_RADIUS,ry:Rn.BORDER_RADIUS},this.svgGroup);const p=ee(Be.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var b=xr(this.text);this.workspace.RTL&&(b+=""),p.textContent=b,this.isLabel_&&(this.svgText=p,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const R=Ft(p,"fontSize"),W=Ft(p,"fontWeight"),pe=Ft(p,"fontFamily");if(this.width=Pt(p,R,W,pe),b=Fe(b,R,W,pe),this.height=b.height,!this.isLabel_){this.width+=2*Rn.TEXT_MARGIN_X,this.height+=2*Rn.TEXT_MARGIN_Y;let Le;(Le=a)==null||Le.setAttribute("width",String(this.width));let Nt;(Nt=a)==null||Nt.setAttribute("height",String(this.height))}return r.setAttribute("width",String(this.width)),r.setAttribute("height",String(this.height)),p.setAttribute("x",String(this.width/2)),p.setAttribute("y",String(this.height/2-b.height/2+b.baseline)),this.updateTransform(),this.onMouseUpWrapper=Se(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(r,a){this.position.x=r,this.position.y=a,this.updateTransform()}isLabel(){return this.isLabel_}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}dispose(){this.onMouseUpWrapper&&rt(this.onMouseUpWrapper),this.svgGroup&&ct(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}onMouseUp(r){(r=this.targetWorkspace.getGesture(r))&&r.cancel(),this.isLabel_&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isLabel_||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isLabel_||(r=this.targetWorkspace.getButtonCallback(this.callbackKey))&&r(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};Rn.TEXT_MARGIN_X=5,Rn.TEXT_MARGIN_Y=2,Rn.BORDER_RADIUS=4,It(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var gr=class extends Vb{constructor(r,a){super(r),this.flyout_=a}getBoundingBox_(){let r;try{r=this.workspace_.getCanvas().getBBox()}catch{r={height:0,y:0,width:0,x:0}}return r}getContentMetrics(r){const a=this.getBoundingBox_();return r=r?1:this.workspace_.scale,{height:a.height*r,width:a.width*r,top:a.y*r,left:a.x*r}}getScrollMetrics(r,a,p){return a=p||this.getContentMetrics(),p=this.flyout_.MARGIN*this.workspace_.scale,r=r?this.workspace_.scale:1,{height:(a.height+2*p)/r,width:(a.width+a.left+p)/r,top:0,left:0}}},Nr;(function(r){r.BLOCK="block",r.BUTTON="button"})(Nr||(Nr={}));var or=class extends Ub{constructor(r){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,r.setMetrics=this.setMetrics_.bind(this),this.workspace_=new hf(r),this.workspace_.setMetricsManager(new gr(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=ie(),this.RTL=!!r.RTL,this.toolboxPosition_=r.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(r){return this.svgGroup_=ee(r,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=ee(Be.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(r){this.targetWorkspace=r,this.workspace_.targetWorkspace=r,this.workspace_.scrollbar=new FE(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(Se(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(Se(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),r.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ma.Capability.AUTOHIDEABLE,Ma.Capability.DELETE_AREA,Ma.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const r of this.boundEvents)rt(r);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ct(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(r){this.autoClose=r,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(r){!r&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}isVisible(){return this.isVisible_}setVisible(r){const a=r!==this.isVisible();this.isVisible_=r,a&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(r){const a=r!==this.containerVisible;this.containerVisible=r,a&&this.updateDisplay()}updateDisplay(){let r;r=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=r?"block":"none");let a;(a=this.workspace_.scrollbar)==null||a.setContainerVisible(r)}positionAt_(r,a,p,b){let R;(R=this.svgGroup_)==null||R.setAttribute("width",`${r}`);let W;(W=this.svgGroup_)==null||W.setAttribute("height",`${a}`),this.workspace_.setCachedParentSvgSize(r,a),this.svgGroup_&&X(this.svgGroup_,"translate("+p+"px,"+b+"px)"),(r=this.workspace_.scrollbar)&&(r.setOrigin(p,b),r.resize(),r.hScroll&&r.hScroll.setPosition(r.hScroll.position.x,r.hScroll.position.y),r.vScroll&&r.vScroll.setPosition(r.vScroll.position.x,r.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const r of this.listeners)rt(r);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(r){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof r=="string"&&(r=this.getDynamicCategoryContents(r)),this.setVisible(!0),r=pt(r),r=this.createFlyoutInfo(r),Pi(this.workspace_),this.layout_(r.contents,r.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(r){const a=[],p=[];this.permanentlyDisabled.length=0;const b=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const R of r){if("custom"in R){r=this.getDynamicCategoryContents(R.custom),r=pt(r);const{contents:W,gaps:pe}=this.createFlyoutInfo(r);a.push(...W),p.push(...pe)}switch(R.kind.toUpperCase()){case"BLOCK":r=R;const W=this.createFlyoutBlock(r);a.push({type:Nr.BLOCK,block:W}),this.addBlockGap(r,p,b);break;case"SEP":this.addSeparatorGap(R,p,b);break;case"LABEL":r=this.createButton(R,!0),a.push({type:Nr.BUTTON,button:r}),p.push(b);break;case"BUTTON":r=this.createButton(R,!1),a.push({type:Nr.BUTTON,button:r}),p.push(b)}}return{contents:a,gaps:p}}getDynamicCategoryContents(r){if(r=this.workspace_.targetWorkspace.getToolboxCategoryCallback(r),typeof r!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return r(this.workspace_.targetWorkspace)}createButton(r,a){return new Rn(this.workspace_,this.targetWorkspace,r,a)}createFlyoutBlock(r){let a;return r.blockxml?(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,(a=this.getRecycledBlock(r.getAttribute("type")))||(a=ks(r,this.workspace_))):(a=this.getRecycledBlock(r.type),a||(r.enabled===void 0&&(r.enabled=r.disabled!=="true"&&r.disabled!==!0),a=Kr(r,this.workspace_))),a.isEnabled()||this.permanentlyDisabled.push(a),a}getRecycledBlock(r){let a=-1;for(let p=0;p<this.recycledBlocks.length;p++)if(this.recycledBlocks[p].type===r){a=p;break}return a===-1?void 0:this.recycledBlocks.splice(a,1)[0]}addBlockGap(r,a,p){let b;r.gap?b=parseInt(String(r.gap)):r.blockxml&&(r=typeof r.blockxml=="string"?t.textToDom$$module$build$src$core$utils$xml(r.blockxml):r.blockxml,b=parseInt(r.getAttribute("gap"))),a.push(!b||isNaN(b)?p:b)}addSeparatorGap(r,a,p){r=parseInt(String(r.gap)),!isNaN(r)&&0<a.length?a[a.length-1]=r:a.push(p)}clearOldBlocks(){var r=this.workspace_.getTopBlocks(!1);for(let p=0,b;b=r[p];p++)this.blockIsRecyclable_(b)?this.recycleBlock(b):b.dispose(!1,!1);for(r=0;r<this.mats.length;r++){const p=this.mats[r];p&&(ed(p),ct(p))}this.mats.length=0;for(let p=0,b;b=this.buttons_[p];p++)b.dispose();this.buttons_.length=0;let a;(a=this.workspace_.getPotentialVariableMap())==null||a.clear()}emptyRecycledBlocks(){for(let r=0;r<this.recycledBlocks.length;r++)this.recycledBlocks[r].dispose();this.recycledBlocks=[]}blockIsRecyclable_(r){return!1}recycleBlock(r){const a=r.getRelativeToSurfaceXY();r.moveBy(-a.x,-a.y),this.recycledBlocks.push(r)}addBlockListeners_(r,a,p){this.listeners.push(Se(r,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Se(p,"pointerdown",null,this.blockMouseDown(a))),this.listeners.push(Pe(r,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(Pe(r,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()})),this.listeners.push(Pe(p,"pointerenter",a,()=>{this.targetWorkspace.isDragging()||a.addSelect()})),this.listeners.push(Pe(p,"pointerleave",a,()=>{this.targetWorkspace.isDragging()||a.removeSelect()}))}blockMouseDown(r){return a=>{const p=this.targetWorkspace.getGesture(a);p&&(p.setStartBlock(r),p.handleFlyoutStart(a,this))}}onMouseDown(r){const a=this.targetWorkspace.getGesture(r);a&&a.handleFlyoutStart(r,this)}isBlockCreatable(r){return r.isEnabled()}createBlock(r){let a=null;t.disable$$module$build$src$core$events$utils();var p=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock(r)}finally{t.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),r=uu(this.targetWorkspace,p),ne()){for(t.setGroup$$module$build$src$core$events$utils(!0),p=0;p<r.length;p++){const b=r[p];ue(new(xe(Ka))(b))}ue(new(xe(t.CREATE$$module$build$src$core$events$utils))(a))}return this.autoClose?this.hide():this.filterForCapacity(),a}initFlyoutButton_(r,a,p){const b=r.createDom();r.moveTo(a,p),r.show(),this.listeners.push(Se(b,"pointerdown",this,this.onMouseDown)),this.buttons_.push(r)}createRect_(r,a,p,b,R){return a=ee(Be.RECT,{"fill-opacity":0,x:a,y:p,height:b.height,width:b.width}),a.tooltip=r,ri(a),this.workspace_.getCanvas().insertBefore(a,r.getSvgRoot()),this.rectMap_.set(r,a),this.mats[R]=a}moveRectToBlock_(r,a){const p=a.getHeightWidth();r.setAttribute("width",String(p.width)),r.setAttribute("height",String(p.height)),a=a.getRelativeToSurfaceXY(),r.setAttribute("y",String(a.y)),r.setAttribute("x",String(this.RTL?a.x-p.width:a.x))}filterForCapacity(){const r=this.workspace_.getTopBlocks(!1);for(let a=0,p;p=r[a];a++)if(this.permanentlyDisabled.indexOf(p)===-1){const b=this.targetWorkspace.isCapacityAvailable(H(p));for(;p;)p.setEnabled(b),p=p.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(r){var a=this.targetWorkspace;if(!r.getSvgRoot())throw Error("oldBlock is not rendered");const p=ti(r);return a.setResizesEnabled(!1),a=Un(p,a),this.positionNewBlock(r,a),a}positionNewBlock(r,a){const p=this.targetWorkspace;var b=p.getOriginOffsetInPixels(),R=this.workspace_.getOriginOffsetInPixels();r=r.getRelativeToSurfaceXY(),r.scale(this.workspace_.scale),R=tn.sum(R,r),b=tn.difference(R,b),b.scale(1/p.scale),a.moveTo(new tn(b.x,b.y))}};or.FlyoutItemType=Nr;var li=class extends or{constructor(r){super(r),this.horizontalLayout=!0}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.x=="number"&&(this.workspace_.scrollX=-(p.left+(p.width-b.width)*r.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),p=r.getViewMetrics();r=r.getToolboxMetrics();const b=this.toolboxPosition_===Kn.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?b?r.height:p.height-this.height_:b?0:p.height:b?0:p.height+a.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=r.width,this.setBackgroundPath(r.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const p=this.toolboxPosition_===Kn.TOP,b=["M 0,"+(p?0:this.CORNER_RADIUS)];p?(b.push("h",r+2*this.CORNER_RADIUS),b.push("v",a),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",-r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),b.push("h",r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",a),b.push("h",-r-2*this.CORNER_RADIUS)),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setX(this.RTL?1/0:0)}wheel_(r){var a=ht(r);if(a=a.x||a.y){const p=this.workspace_.getMetricsManager(),b=p.getScrollMetrics();a=p.getViewMetrics().left-b.left+a;let R;(R=this.workspace_.scrollbar)==null||R.setX(a),gl(),va()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;const p=this.MARGIN;let b=p+this.tabWidth_;this.RTL&&(r=r.reverse());for(let Le=0,Nt;Nt=r[Le];Le++)if(Nt.type==="block"){var R=Nt.block,W=R.getDescendants(!1);for(let zo=0,Mo;Mo=W[zo];zo++)Mo.isInFlyout=!0;W=R.getSvgRoot();const $n=R.getHeightWidth();var pe=R.outputConnection?this.tabWidth_:0;pe=this.RTL?b+$n.width:b-pe,R.moveBy(pe,p),pe=this.createRect_(R,pe,p,$n,Le),b+=$n.width+a[Le],this.addBlockListeners_(W,R,pe)}else Nt.type==="button"&&(R=Nt.button,this.initFlyoutButton_(R,b,p),b+=R.width+a[Le])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<90+a&&r>90-a||r>-90-a&&r<-90+a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.top;return this.toolboxPosition_===Kn.TOP?new vi(-1e9,a+r.height,-1e9,1e9):new vi(a,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;const a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++)r=Math.max(r,R.getHeightWidth().height);const p=this.buttons_;for(let b=0,R;R=p[b];b++)r=Math.max(r,R.height);if(r+=1.5*this.MARGIN,r*=this.workspace_.scale,r+=Fo.scrollbarThickness,this.height_!==r){for(let b=0,R;R=a[b];b++)this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Kn.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+r),this.height_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};i(Dt.FLYOUTS_HORIZONTAL_TOOLBOX,Ya,li);var yi=class extends or{constructor(r){super(r)}setMetrics_(r){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),p=a.getScrollMetrics(),b=a.getViewMetrics();a=a.getAbsoluteMetrics(),typeof r.y=="number"&&(this.workspace_.scrollY=-(p.top+(p.height-b.height)*r.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}}getX(){if(!this.isVisible())return 0;var r=this.targetWorkspace.getMetricsManager();const a=r.getAbsoluteMetrics(),p=r.getViewMetrics();return r=r.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Kn.LEFT?r.width:p.width-this.width_:this.toolboxPosition_===Kn.LEFT?0:p.width:this.toolboxPosition_===Kn.LEFT?0:p.width+a.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var r=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=r.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,r.height-2*this.CORNER_RADIUS),r=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,r,a)}}setBackgroundPath(r,a){const p=this.toolboxPosition_===Kn.RIGHT;var b=r+this.CORNER_RADIUS;b=["M "+(p?b:0)+",0"],b.push("h",p?-r:r),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("v",Math.max(0,a)),b.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,p?0:1,p?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),b.push("h",p?r:-r),b.push("z"),this.svgBackground_.setAttribute("d",b.join(" "))}scrollToStart(){let r;(r=this.workspace_.scrollbar)==null||r.setY(0)}wheel_(r){var a=ht(r);if(a.y){const p=this.workspace_.getMetricsManager(),b=p.getScrollMetrics();a=p.getViewMetrics().top-b.top+a.y;let R;(R=this.workspace_.scrollbar)==null||R.setY(a),gl(),va()}r.preventDefault(),r.stopPropagation()}layout_(r,a){this.workspace_.scale=this.targetWorkspace.scale;var p=this.MARGIN;const b=this.RTL?p:p+this.tabWidth_;for(let Le=0,Nt;Nt=r[Le];Le++)if(Nt.type==="block"){var R=Nt.block,W=R.getDescendants(!1);for(let zo=0,Mo;Mo=W[zo];zo++)Mo.isInFlyout=!0;W=R.getSvgRoot();const $n=R.getHeightWidth();var pe=R.outputConnection?b-this.tabWidth_:b;R.moveBy(pe,p),pe=this.createRect_(R,this.RTL?pe-$n.width:pe,p,$n,Le),this.addBlockListeners_(W,R,pe),p+=$n.height+a[Le]}else Nt.type==="button"&&(R=Nt.button,this.initFlyoutButton_(R,b,p),p+=R.height+a[Le])}isDragTowardWorkspace(r){r=Math.atan2(r.y,r.x)/Math.PI*180;const a=this.dragAngleRange_;return r<a&&r>-a||r<-180+a||r>180-a}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const r=this.svgGroup_.getBoundingClientRect(),a=r.left;return this.toolboxPosition_===Kn.LEFT?new vi(-1e9,1e9,-1e9,a+r.width):new vi(-1e9,1e9,a,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let r=0;var a=this.workspace_.getTopBlocks(!1);for(let b=0,R;R=a[b];b++){var p=R.getHeightWidth().width;R.outputConnection&&(p-=this.tabWidth_),r=Math.max(r,p)}for(let b=0,R;R=this.buttons_[b];b++)r=Math.max(r,R.width);if(r+=1.5*this.MARGIN+this.tabWidth_,r*=this.workspace_.scale,r+=Fo.scrollbarThickness,this.width_!==r){for(let b=0,R;R=a[b];b++){if(this.RTL){p=R.getRelativeToSurfaceXY().x;let W=r/this.workspace_.scale-this.MARGIN;R.outputConnection||(W-=this.tabWidth_),R.moveBy(W-p,0)}this.rectMap_.has(R)&&this.moveRectToBlock_(this.rectMap_.get(R),R)}if(this.RTL)for(let b=0,R;R=this.buttons_[b];b++)a=R.getPosition().y,R.moveTo(r/this.workspace_.scale-R.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Kn.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+r,this.targetWorkspace.scrollY),this.width_=r,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};yi.registryName="verticalFlyout",i(Dt.FLYOUTS_VERTICAL_TOOLBOX,Ya,yi);var gd;t.CodeGenerator$$module$build$src$core$generator=class{constructor(r){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=r,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(r){r||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),r=A());var a=[];this.init(r),r=r.getTopBlocks(!0);for(let p=0,b;b=r[p];p++){let R=this.blockToCode(b);Array.isArray(R)&&(R=R[0]),R&&(b.outputConnection&&(R=this.scrubNakedValue(R),this.STATEMENT_PREFIX&&!b.suppressPrefixSuffix&&(R=this.injectId(this.STATEMENT_PREFIX,b)+R),this.STATEMENT_SUFFIX&&!b.suppressPrefixSuffix&&(R+=this.injectId(this.STATEMENT_SUFFIX,b))),a.push(R))}return a=a.join(`
`),a=this.finish(a),a=a.replace(/^\s+\n/,""),a=a.replace(/\n\s+$/,`
`),a=a.replace(/[ \t]+\n/g,`
`)}prefixLines(r,a){return a+r.replace(/(?!\n$)\n/g,`
`+a)}allNestedComments(r){const a=[];r=r.getDescendants(!0);for(let p=0;p<r.length;p++){const b=r[p].getCommentText();b&&a.push(b)}return a.length&&a.push(""),a.join(`
`)}blockToCode(r,a){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!r)return"";if(!r.isEnabled())return a?"":this.blockToCode(r.getNextBlock());if(r.isInsertionMarker())return a?"":this.blockToCode(r.getChildren(!1)[0]);var p=this.forBlock[r.type];if(!p&&this[r.type]&&(ve("block generator functions on CodeGenerator objects","10.0","11.0","the .forBlock[blockType] dictionary"),p=this[r.type]),typeof p!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${r.type}".`);if(p=p.call(r,r,this),Array.isArray(p)){if(!r.outputConnection)throw TypeError("Expecting string from statement block: "+r.type);return[this.scrub_(r,p[0],a),p[1]]}if(typeof p=="string")return this.STATEMENT_PREFIX&&!r.suppressPrefixSuffix&&(p=this.injectId(this.STATEMENT_PREFIX,r)+p),this.STATEMENT_SUFFIX&&!r.suppressPrefixSuffix&&(p+=this.injectId(this.STATEMENT_SUFFIX,r)),this.scrub_(r,p,a);if(p===null)return"";throw SyntaxError("Invalid code generated: "+p)}valueToCode(r,a,p){if(isNaN(p))throw TypeError("Expecting valid order from block: "+r.type);var b=r.getInputTargetBlock(a);if(!b||(a=this.blockToCode(b),a===""))return"";if(!Array.isArray(a))throw TypeError(`Expecting tuple from value block: ${b.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(r=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+b.type);if(!r)return"";b=!1;var R=Math.floor(p);const W=Math.floor(a);if(R<=W&&(R!==W||R!==0&&R!==99)){for(b=!0,R=0;R<this.ORDER_OVERRIDES.length;R++)if(this.ORDER_OVERRIDES[R][0]===p&&this.ORDER_OVERRIDES[R][1]===a){b=!1;break}}return b&&(r="("+r+")"),r}statementToCode(r,a){if(r=r.getInputTargetBlock(a),a=this.blockToCode(r),typeof a!="string")throw TypeError("Expecting code from statement block: "+(r&&r.type));return a&&(a=this.prefixLines(a,this.INDENT)),a}addLoopTrap(r,a){return this.INFINITE_LOOP_TRAP&&(r=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+r),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(r=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+r),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(r+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),r}injectId(r,a){return a=a.id.replace(/\$/g,"$$$$"),r.replace(/%1/g,"'"+a+"'")}addReservedWords(r){this.RESERVED_WORDS_+=r+","}provideFunction_(r,a){if(!this.definitions_[r]){const p=this.nameDB_.getDistinctName(r,t.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[r]=p,Array.isArray(a)&&(a=a.join(`
`)),a=a.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,p);let b;for(;b!==a;)b=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[r]=a}return this.functionNames_[r]}getVariableName(r){return this.getName(r,t.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(r){return this.getName(r,t.NameType$$module$build$src$core$names.PROCEDURE)}getName(r,a){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(r,a)}init(r){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(r,a,p){return a}finish(r){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),r}scrubNakedValue(r){return r}},gd={},gd.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator;var lh=!1,ru={};ru.Align=t.Align$$module$build$src$core$inputs$align,ru.DummyInput=qf,ru.EndRowInput=Wm,ru.Input=La,ru.StatementInput=md,ru.ValueInput=t.ValueInput$$module$build$src$core$inputs$value_input,ru.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types;var rl="The insertion marker previewer tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Ap=class{constructor(r){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=r.workspace}previewReplacement(r,a,p){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=p,p.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(a)&&(a.highlight(),this.staticConn=a)}finally{t.enable$$module$build$src$core$events$utils()}}previewConnection(r,a){if(r!==this.draggedConn||a!==this.staticConn){t.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(r,a)&&(this.markerConn=this.previewMarker(r,a)),this.workspace.getRenderer().shouldHighlightConnection(a)&&a.highlight(),this.draggedConn=r,this.staticConn=a}finally{t.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(r,a){return a.type===En.PREVIOUS_STATEMENT||a.type===En.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof P)}previewMarker(r,a){const p=r.getSourceBlock(),b=this.createInsertionMarker(p),R=this.getMatchingConnection(p,b,r);if(!R)throw Error("Could not create insertion marker to preview connection");b.queueRender(),Pi(),R.connect(a);const W={x:a.x-R.x,y:a.y-R.y},pe=R.getOffsetInBlock().clone();return tr().then(()=>{b==null||b.positionNearConnection(R,W,pe),b==null||b.getSvgRoot().setAttribute("visibility","visible")}),R}createInsertionMarker(r){const a=this.workspace.newBlock(r.type);if(a.setInsertionMarker(!0),r.saveExtraState){var p=r.saveExtraState(!0);p&&a.loadExtraState&&a.loadExtraState(p)}else r.mutationToDom&&(p=r.mutationToDom())&&a.domToMutation&&a.domToMutation(p);for(p=0;p<r.inputList.length;p++){const b=r.inputList[p];if(b.name===b0)continue;const R=a.inputList[p];if(!R)throw Error(rl.replace("%1","an input"));for(let W=0;W<b.fieldRow.length;W++){const pe=b.fieldRow[W],Le=R.fieldRow[W];if(!Le)throw Error(rl.replace("%1","a field"));Le.setValue(pe.getValue())}}for(const b of a.getDescendants(!1))b.setInsertionMarker(!0);return a.setCollapsed(r.isCollapsed()),a.setInputsInline(r.getInputsInline()),a.initSvg(),a.getSvgRoot().setAttribute("visibility","hidden"),a}getMatchingConnection(r,a,p){if(r=r.getConnections_(!0),a=a.getConnections_(!0),r.length!==a.length)return null;for(let b=0;b<r.length;b++)if(r[b]===p)return a[b];return null}hidePreview(){t.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{t.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(r){const a=r.getSourceBlock(),p=a.outputConnection;let b;if((b=a.previousConnection)!=null&&b.targetConnection||p!=null&&p.targetConnection)a.unplug(!0);else{let R;(R=r.targetBlock())==null||R.unplug(!1)}a.dispose()}dispose(){this.hidePreview()}};i(Dt.CONNECTION_PREVIEWER,Ya,Ap);var nm=class extends Wv{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(r){return super.getCSS_(r).concat([`${r} .blocklyInsertionMarker>.blocklyPathLight,`,`${r} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},JE=class{constructor(r){this.inlineSteps_=this.steps_="",this.info_=r,this.RTL_=this.info_.RTL,r=r.getRenderer(),this.constants_=r.getConstants(),this.highlightConstants_=r.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(r){this.steps_+=ii(r.xPos,this.info_.startY);for(let a=0,p;p=r.elements[a];a++)tt.isLeftSquareCorner(p)?this.steps_+=this.highlightConstants_.START_POINT:tt.isLeftRoundedCorner(p)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):tt.isPreviousConnection(p)?this.steps_+=this.notchPaths_.pathLeft:tt.isHat(p)?this.steps_+=this.startPaths_.path(this.RTL_):tt.isSpacer(p)&&p.width!==0&&(this.steps_+=cn("H",p.xPos+p.width-this.highlightOffset));this.steps_+=cn("H",r.xPos+r.width-this.highlightOffset)}drawJaggedEdge_(r){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+cn("v",r.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(r){const a=r.getLastInput();if(this.RTL_){const p=r.height-a.connectionHeight;this.steps_+=ys(a.xPos+a.width-this.highlightOffset,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+cn("v",p)}else this.steps_+=ys(a.xPos+a.width,r.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(r){const a=r.getLastInput();if(a)if(this.RTL_){const p=r.height-2*this.insideCornerPaths_.height;this.steps_+=ys(a.xPos,r.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+cn("v",p)+this.insideCornerPaths_.pathBottom(this.RTL_)+$l(r.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=ys(a.xPos,r.yPos+r.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+$l(r.width-a.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(r){const a=r.xPos+r.width-this.highlightOffset;r instanceof $E&&r.followsStatement&&(this.steps_+=cn("H",a)),this.RTL_&&(this.steps_+=cn("H",a),r.height>this.highlightOffset&&(this.steps_+=cn("V",r.yPos+r.height-this.highlightOffset)))}drawBottomRow(r){if(this.RTL_)this.steps_+=cn("V",r.baseline-this.highlightOffset);else{const a=this.info_.bottomRow.elements[0];tt.isLeftSquareCorner(a)?this.steps_+=ys(r.xPos+this.highlightOffset,r.baseline-this.highlightOffset):tt.isLeftRoundedCorner(a)&&(this.steps_+=ys(r.xPos,r.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var r=this.info_.outputConnection;r&&(r=r.connectionOffsetY+r.height,this.RTL_?this.steps_+=ys(this.info_.startX,r):(this.steps_+=ys(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=cn("V",r)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(r=this.info_.topRow,tt.isLeftRoundedCorner(r.elements[0])?this.steps_+=cn("V",this.outsideCornerPaths_.height):this.steps_+=cn("V",r.capline+this.highlightOffset))}drawInlineInput(r){const a=this.highlightOffset,p=r.xPos+r.connectionWidth;var b=r.centerline-r.height/2;const R=r.width-r.connectionWidth,W=b+a;this.RTL_?(b=r.connectionOffsetY-a,r=r.height-(r.connectionOffsetY+r.connectionHeight)+a,this.inlineSteps_+=ys(p-a,W)+cn("v",b)+this.puzzleTabPaths_.pathDown(this.RTL_)+cn("v",r)+cn("h",R)):this.inlineSteps_+=ys(r.xPos+r.width+a,W)+cn("v",r.height)+cn("h",-R)+ys(p,b+r.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},uF=class extends Vv{constructor(r,a){super(r,a),this.highlighter_=new JE(a)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const r=this.block_.pathObject;r.setPath(this.outlinePath_+`
`+this.inlinePath_),r.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&r.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(r){this.highlighter_.drawJaggedEdge_(r),super.drawJaggedEdge_(r)}drawValueInput_(r){this.highlighter_.drawValueInput(r),super.drawValueInput_(r)}drawStatementInput_(r){this.highlighter_.drawStatementInput(r),super.drawStatementInput_(r)}drawRightSideRow_(r){this.highlighter_.drawRightSideRow(r),this.outlinePath_+=cn("H",r.xPos+r.width)+cn("V",r.yPos+r.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(r){this.highlighter_.drawInlineInput(r),super.drawInlineInput_(r)}positionInlineInputConnection_(r){const a=r.centerline-r.height/2;if(r.connectionModel){let p=r.xPos+r.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),r.connectionModel.setOffsetInBlock(p,a+r.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(r){const a=r.getLastInput();if(a!=null&&a.connectionModel){let p=r.xPos+r.statementEdge+a.notchOffset;p=this.info_.RTL?-1*p:p+this.constants_.DARK_PATH_OFFSET,a.connectionModel.setOffsetInBlock(p,r.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(r){const a=r.getLastInput();if(a&&a.connectionModel){let p=r.xPos+r.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(p*=-1),a.connectionModel.setOffsetInBlock(p,r.yPos)}}positionNextConnection_(){const r=this.info_.bottomRow;if(r.connection){const a=r.connection,p=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-p:p)+this.constants_.DARK_PATH_OFFSET/2,r.baseline+this.constants_.DARK_PATH_OFFSET)}}},cF=class{constructor(r){this.OFFSET=.5,this.constantProvider=r,this.START_POINT=ii(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(r+a)-a,b=ii(p,p)+zr("a","0 0,0",r,Cn(-p-a,r-p)),R=zr("a","0 0,0",r+a,Cn(r+a,r+a)),W=ii(p,-p)+zr("a","0 0,0",r+a,Cn(r-p,p+a));return{width:r+a,height:r,pathTop(pe){return pe?b:""},pathBottom(pe){return pe?R:W}}}makeOutsideCorner(){const r=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,p=(1-Math.SQRT1_2)*(r-a)+a,b=ii(p,p)+zr("a","0 0,1",r-a,Cn(r-p,-p+a)),R=ii(a,r)+zr("a","0 0,1",r-a,Cn(r,-r+a)),W=-p,pe=ii(p,W)+zr("a","0 0,1",r-a,Cn(-p+a,-W-r));return{height:r,topLeft(Le){return Le?b:R},bottomLeft(){return pe}}}makePuzzleTab(){const r=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,p=ii(-2,-a+3.4)+$l(-.45*r,-2.1),b=cn("v",2.5)+ii(.97*-r,2.5)+as("q",[Cn(.05*-r,10),Cn(.3*r,9.5)])+ii(.67*r,-1.9)+cn("v",2.5),R=cn("v",-1.5)+ii(-.92*r,-.5)+as("q",[Cn(-.19*r,-5.5),Cn(0,-11)])+ii(.92*r,1),W=ii(-5,a-.7)+$l(.46*r,-2.1);return{width:r,height:a,pathUp(pe){return pe?p:R},pathDown(pe){return pe?b:W}}}makeNotch(){return{pathLeft:cn("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:$l(5.1,2.6)+ii(-10.2,6.8)+$l(5.1,2.6),height:12,width:10.2}}makeStartHat(){const r=this.constantProvider.START_HAT.height,a=ii(25,-8.7)+as("c",[Cn(29.7,-6.2),Cn(57.2,-.5),Cn(75,8.7)]),p=as("c",[Cn(17.8,-9.2),Cn(45.3,-14.9),Cn(75,-8.7)])+ys(100.5,r+.5);return{path(b){return b?a:p}}}},hF=class extends TE{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},dF=class extends Gv{constructor(r,a){super(r,a),this.constants_=r,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},pF=class extends T_{constructor(r,a){super(r,a),this.renderer_=r}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof md||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(r,a){this.isInline&&r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new hF(this.constants_,r)),a.hasInlineInput=!0):r instanceof md?(a.elements.push(new dF(this.constants_,r)),a.hasStatement=!0):r instanceof t.ValueInput$$module$build$src$core$inputs$value_input?(a.elements.push(new Nb(this.constants_,r)),a.hasExternalInput=!0):(r instanceof qf||r instanceof Wm)&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||a.align!==null||(a.align=r.align)}addElemSpacing_(){let r=!1;for(let p=0,b;b=this.rows[p];p++)b.hasExternalInput&&(r=!0);for(let p=0,b;b=this.rows[p];p++){var a=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new Xd(this.constants_,this.getInRowSpacing_(null,a[0]))),a.length){for(let R=0;R<a.length-1;R++){b.elements.push(a[R]);const W=this.getInRowSpacing_(a[R],a[R+1]);b.elements.push(new Xd(this.constants_,W))}b.elements.push(a[a.length-1]),b.endsWithElemSpacer()&&(a=this.getInRowSpacing_(a[a.length-1],null),r&&b.hasDummyInput&&(a+=this.constants_.TAB_WIDTH),b.elements.push(new Xd(this.constants_,a)))}}}getInRowSpacing_(r,a){if(!r)return a&&tt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&tt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&tt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!tt.isInput(r)&&(!a||tt.isStatementInput(a)))return tt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:tt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:tt.isHat(r)?this.constants_.NO_PADDING:tt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:tt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:tt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(tt.isInput(r)&&!a){if(tt.isExternalInput(r))return this.constants_.NO_PADDING;if(tt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(tt.isStatementInput(r))return this.constants_.NO_PADDING}if(!tt.isInput(r)&&a&&tt.isInput(a)){if(tt.isField(r)&&r.isEditable){if(tt.isInlineInput(a)||tt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(tt.isInlineInput(a)||tt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(tt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(tt.isIcon(r)&&a&&!tt.isInput(a))return this.constants_.LARGE_PADDING;if(tt.isInlineInput(r)&&a&&tt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(tt.isLeftSquareCorner(r)&&a){if(tt.isHat(a))return this.constants_.NO_PADDING;if(tt.isPreviousConnection(a))return a.notchOffset;if(tt.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(tt.isLeftRoundedCorner(r)&&a){if(tt.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(tt.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return tt.isField(r)&&a&&tt.isField(a)&&r.isEditable===a.isEditable||a&&tt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return tt.isTopRow(r)&&tt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:tt.isTopRow(r)||tt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||!r.hasStatement&&a.hasDummyInput||r.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(tt.isSpacer(a))return r.yPos+a.height/2;if(tt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,tt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(tt.isTopRow(r))return tt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let p=r.yPos;return tt.isField(a)||tt.isIcon(a)?(p+=a.height/2,(r.hasInlineInput||r.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=r.height&&(p+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):p=tt.isInlineInput(a)?p+a.height/2:p+r.height/2,p}alignRowElements_(){if(this.isInline){var r=0,a=new WeakMap,p=null;for(let b=this.rows.length-1,R;R=this.rows[b];b--)a.set(R,r),tt.isInputRow(R)&&(R.hasStatement&&this.alignStatementRow_(R),p&&p.hasStatement&&R.width<p.width?a.set(R,p.width):r=R.hasStatement?R.width:Math.max(r,R.width),p=R);r=0;for(let b=0,R;R=this.rows[b];b++)R.hasStatement?r=this.getDesiredRowWidth_(R):tt.isSpacer(R)?R.width=Math.max(r,a.get(R)):(p=R.width,r=Math.max(r,a.get(R))-p,0<r&&this.addAlignmentPadding_(R,r),r=R.width)}else super.alignRowElements_()}getDesiredRowWidth_(r){return this.isInline&&r.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(r)}finalize_(){let r=0,a=0;for(let b=0,R;R=this.rows[b];b++){R.yPos=a,R.xPos=this.startX,a+=R.height,r=Math.max(r,R.widthWithConnectedBlocks);var p=a-this.topRow.ascenderHeight;R===this.bottomRow&&p<this.constants_.MIN_BLOCK_HEIGHT&&(p=this.constants_.MIN_BLOCK_HEIGHT-p,this.bottomRow.height+=p,a+=p),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,p.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},fF=class extends jv{constructor(r,a,p){super(r,a,p),this.constants=p,this.colourDark="#000000",this.svgPathDark=ee(Be.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=ee(Be.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(r){this.svgPath.setAttribute("d",r),this.svgPathDark.setAttribute("d",r)}setHighlightPath(r){this.svgPathLight.setAttribute("d",r)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(r){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(r),this.svgPath.setAttribute("stroke","none")}setStyle(r){this.style=r,this.colourDark=xc("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(r){r?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(r){if(r){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(r){super.updateDisabled_(r),r&&this.svgPath.setAttribute("stroke","none")}},mF=class extends Xv{constructor(r){super(r),this.highlightConstants=null}init(r,a){super.init(r,a),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(r,a){super.refreshDom(r,a),this.getHighlightConstants().init()}makeConstants_(){return new nm}makeRenderInfo_(r){return new pF(this,r)}makeDrawer_(r,a){return new uF(r,a)}makePathObject(r,a){return new fF(r,a,this.getConstants())}makeHighlightConstants_(){return new cF(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Ys("geras",mF);var Lg={};Lg.ConstantProvider=nm,Lg.Drawer=uF,Lg.HighlightConstantProvider=cF,Lg.Highlighter=JE,Lg.InlineInput=hF,Lg.PathObject=fF,Lg.RenderInfo=pF,Lg.Renderer=mF,Lg.StatementInput=dF;var gF=class extends Wv{constructor(){super(),ve("Blockly.minimalist.ConstantProvider","v10","v11","Blockly.blockRendering.ConstantProvider")}},_F=class extends Vv{constructor(r,a){super(r,a),ve("Blockly.minimalist.Drawer","v10","v11","Blockly.blockRendering.Drawer")}},vF=class extends T_{constructor(r,a){super(r,a),ve("Blockly.minimalist.RenderInfo","v10","v11","Blockly.blockRendering.RenderInfo")}getRenderer(){return this.renderer_}},yF=class extends Xv{constructor(r){super(r),ve("Blockly.minimalist.Renderer","v10","v11","Blockly.blockRendering.Renderer")}makeConstants_(){return new gF}makeRenderInfo_(r){return new vF(this,r)}makeDrawer_(r,a){return new _F(r,a)}};Ys("minimalist",yF);var QE={};QE.ConstantProvider=gF,QE.Drawer=_F,QE.RenderInfo=vF,QE.Renderer=yF;var bF=class extends T_{constructor(r,a){super(r,a)}getRenderer(){return this.renderer_}addElemSpacing_(){let r=!1;for(var a=0;a<this.rows.length;a++)if(this.rows[a].hasExternalInput){r=!0;break}for(a=0;a<this.rows.length;a++){const b=this.rows[a];var p=b.elements;if(b.elements=[],b.startsWithElemSpacer()&&b.elements.push(new Xd(this.constants_,this.getInRowSpacing_(null,p[0]))),p.length){for(let R=0;R<p.length-1;R++){b.elements.push(p[R]);const W=this.getInRowSpacing_(p[R],p[R+1]);b.elements.push(new Xd(this.constants_,W))}b.elements.push(p[p.length-1]),b.endsWithElemSpacer()&&(p=this.getInRowSpacing_(p[p.length-1],null),r&&b.hasDummyInput&&(p+=this.constants_.TAB_WIDTH),b.elements.push(new Xd(this.constants_,p)))}}}getInRowSpacing_(r,a){if(!r)return a&&tt.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&tt.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&tt.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!tt.isInput(r)&&!a)return tt.isField(r)&&r.isEditable?this.constants_.MEDIUM_PADDING:tt.isIcon(r)?2*this.constants_.LARGE_PADDING+1:tt.isHat(r)?this.constants_.NO_PADDING:tt.isPreviousOrNextConnection(r)?this.constants_.LARGE_PADDING:tt.isLeftRoundedCorner(r)?this.constants_.MIN_BLOCK_WIDTH:tt.isJaggedEdge(r)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(tt.isInput(r)&&!a){if(tt.isExternalInput(r))return this.constants_.NO_PADDING;if(tt.isInlineInput(r))return this.constants_.LARGE_PADDING;if(tt.isStatementInput(r))return this.constants_.NO_PADDING}if(!tt.isInput(r)&&a&&tt.isInput(a)){if(tt.isField(r)&&r.isEditable){if(tt.isInlineInput(a)||tt.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(tt.isInlineInput(a)||tt.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(tt.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(tt.isIcon(r)&&a&&!tt.isInput(a))return this.constants_.LARGE_PADDING;if(tt.isInlineInput(r)&&a&&tt.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(tt.isLeftSquareCorner(r)&&a){if(tt.isHat(a))return this.constants_.NO_PADDING;if(tt.isPreviousConnection(a)||tt.isNextConnection(a))return a.notchOffset}return tt.isLeftRoundedCorner(r)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:tt.isField(r)&&a&&tt.isField(a)&&r.isEditable===a.isEditable||a&&tt.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(r,a){return tt.isTopRow(r)&&tt.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:tt.isTopRow(r)||tt.isBottomRow(a)?this.constants_.NO_PADDING:r.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!r.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:r.hasStatement&&a.hasStatement||r.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(r,a){if(tt.isSpacer(a))return r.yPos+a.height/2;if(tt.isBottomRow(r))return r=r.yPos+r.height-r.descenderHeight,tt.isNextConnection(a)?r+a.height/2:r-a.height/2;if(tt.isTopRow(r))return tt.isHat(a)?r.capline-a.height/2:r.capline+a.height/2;let p=r.yPos;return p=tt.isField(a)&&r.hasStatement?p+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):p+r.height/2}finalize_(){let r=0,a=0;for(var p=0;p<this.rows.length;p++){const R=this.rows[p];R.yPos=a,R.xPos=this.startX,a+=R.height,r=Math.max(r,R.widthWithConnectedBlocks);var b=a-this.topRow.ascenderHeight;R===this.bottomRow&&b<this.constants_.MIN_BLOCK_HEIGHT&&(b=this.constants_.MIN_BLOCK_HEIGHT-b,this.bottomRow.height+=b,a+=b),this.recordElemPositions_(R)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(p=this.block_.nextConnection.targetBlock())&&(r=Math.max(r,p.getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=r+this.startX,this.height=a,this.startY=this.topRow.capline}},TF=class extends Xv{constructor(r){super(r)}makeRenderInfo_(r){return new bF(this,r)}};Ys("thrasos",TF);var jR={};jR.RenderInfo=bF,jR.Renderer=TF;var cX={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},hX={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},dX=new g0("zelos",cX,hX),pX={Classic:Ab,Zelos:dX},XR=class{constructor(r,a,p){this.id_=r.toolboxitemid||re(),this.level_=(this.parent_=p||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=r,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(r){}},Vm=class extends XR{constructor(r,a,p){super(r,a,p),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else if(r=r.contents)for(let a=0;a<r.length;a++){const p=r[a];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(p)}}parseCategoryDef_(r){this.name_="name"in r?xr(r.name):"",this.colour_=this.getColour_(r),Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Wr(this.htmlDiv_,Nc.TREEITEM),lr(this.htmlDiv_,zs.SELECTED,!1),lr(this.htmlDiv_,zs.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Wr(this.iconDom_,Nc.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const r=this.labelDom_.getAttribute("id");return r&&lr(this.htmlDiv_,zs.LABELLEDBY,r),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(r,a),r}createRowContainer_(){const r=document.createElement("div");var a=this.cssConfig_.row;return a&&ke(r,a),a=`${Vm.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?r.style.paddingRight=a:r.style.paddingLeft=a,r}createRowContentsContainer_(){const r=document.createElement("div"),a=this.cssConfig_.rowcontentcontainer;return a&&ke(r,a),r}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(r,a)}return r.style.display="inline-block",r}createLabelDom_(r){const a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=r,(r=this.cssConfig_.label)&&ke(a,r),a}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(r){r&&(r=Vm.borderWidth+"px solid "+(r||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=r:this.rowDiv_.style.borderLeft=r)}getColour_(r){const a=r.categorystyle||r.categoryStyle;if((r=r.colour)&&a)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(a)return this.getColourfromStyle_(a);if(r)return this.parseColour_(r)}return""}getColourfromStyle_(r){var a=this.workspace_.getTheme();if(r&&a){if((a=a.categoryStyles[r])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+r+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(r){if(r=xr(r),r==null||r==="")return"";var a=Number(r);return isNaN(a)?(a=Ha(r))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+r),""):qu(a)}openIcon_(r){if(r){var a=this.cssConfig_.closedicon;a&&ot(r,a),(a=this.cssConfig_.openicon)&&ke(r,a)}}closeIcon_(r){if(r){var a=this.cssConfig_.openicon;a&&ot(r,a),(a=this.cssConfig_.closedicon)&&ke(r,a)}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none",this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let r=this;for(;r.getParent();)if(r=r.getParent(),!r.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(r){}setSelected(r){if(this.rowDiv_){var a=this.cssConfig_.selected;if(r){const p=this.parseColour_(Vm.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||p,a&&ke(this.rowDiv_,a)}else this.rowDiv_.style.backgroundColor="",a&&dt(this.rowDiv_,a);lr(this.htmlDiv_,zs.SELECTED,r)}}setDisabled(r){this.isDisabled_=r,this.getDiv().setAttribute("disabled",`${r}`),r?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(r){this.flyoutItems_=[],this.toolboxItemDef_=typeof r=="string"?{kind:this.toolboxItemDef_.kind,custom:r,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:pt(r),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ct(this.htmlDiv_)}};Vm.registrationName="category",Vm.nestedPadding=19,Vm.borderWidth=8,Vm.defaultBackgroundColour="#57e",It(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),i(Dt.TOOLBOX_ITEM,Vm.registrationName,Vm);var qE=class extends XR{constructor(r,a){super(r,a),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,r.cssconfig||r.cssConfig)}init(){this.createDom_()}createDom_(){const r=document.createElement("div"),a=this.cssConfig_.container;return a&&ke(r,a),this.htmlDiv_=r}getDiv(){return this.htmlDiv_}dispose(){ct(this.htmlDiv_)}};qE.registrationName="sep",It(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Dt.TOOLBOX_ITEM,qE.registrationName,qE);var Kb=class extends Vm{constructor(r,a,p){super(r,a,p),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const r=super.makeDefaultCssConfig_();return r.contents="blocklyToolboxContents",r}parseContents_(r){if("custom"in r)this.flyoutItems_=r.custom;else{const a=r.contents;if(a){this.flyoutItems_=[],r=!0;for(let p=0;p<a.length;p++){const b=a[p];!u(Dt.TOOLBOX_ITEM,b.kind)||b.kind.toLowerCase()===qE.registrationName&&r?(this.flyoutItems_.push(b),r=!0):(this.createToolboxItem_(b),r=!1)}}}}createToolboxItem_(r){let a=r.kind;a.toUpperCase()==="CATEGORY"&&Bn(r)&&(a=Kb.registrationName),r=new(h(Dt.TOOLBOX_ITEM,a))(r,this.parentToolbox_,this),this.toolboxItems_.push(r)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const r=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(r),Wr(this.subcategoriesDiv_,Nc.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),lr(this.htmlDiv_,zs.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const r=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const a=this.cssConfig_.icon;a&&ke(r,a),r.style.visibility="visible"}return r.style.display="inline-block",r}createSubCategoriesDom_(r){const a=document.createElement("div");a.style.display="none";var p=this.cssConfig_.contents;for(p&&ke(a,p),p=0;p<r.length;p++){const b=r[p];b.init();const R=b.getDiv();if(a.appendChild(R),b.getClickTarget){let W;(W=b.getClickTarget())==null||W.setAttribute("id",b.getId())}}return a}setExpanded(r){if(this.expanded_!==r){if(this.expanded_=r)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let a;(a=this.parentToolbox_.getFlyout())==null||a.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}lr(this.htmlDiv_,zs.EXPANDED,r),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(r){this.htmlDiv_.style.display=r?"block":"none";const a=this.getChildToolboxItems();for(let p=0;p<a.length;p++)a[p].setVisible_(r);this.isHidden_=!r,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(r){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Kb.registrationName="collapsibleCategory",i(Dt.TOOLBOX_ITEM,Kb.registrationName,Kb);var EF=class extends Ub{constructor(r){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=r,this.toolboxDef_=r.options.languageTree||{contents:[]},this.horizontalLayout_=r.options.horizontalLayout,this.RTL=r.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=r.options.toolboxPosition}onShortcut(r){return!1}init(){var r=this.workspace_;const a=r.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Ge(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(r),this.render(this.toolboxDef_),r=r.getThemeManager(),r.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),r.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ma.Capability.AUTOHIDEABLE,Ma.Capability.DELETE_AREA,Ma.Capability.DRAG_TARGET]})}createDom_(r){r=r.getParentSvg();const a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Wr(this.contentsDiv_,Nc.TREE),a.appendChild(this.contentsDiv_),r.parentNode.insertBefore(a,r),this.attachEvents_(a,this.contentsDiv_),a}createContainer_(){const r=document.createElement("div");return r.setAttribute("layout",this.isHorizontal()?"h":"v"),ke(r,"blocklyToolboxDiv"),ke(r,"blocklyNonSelectable"),r.setAttribute("dir",this.RTL?"RTL":"LTR"),r}createContentsContainer_(){const r=document.createElement("div");return ke(r,"blocklyToolboxContents"),this.isHorizontal()&&(r.style.flexDirection="row"),r}attachEvents_(r,a){r=Se(r,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(r),a=Se(a,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(a)}onClick_(r){if(wt(r)||r.target===this.HtmlDiv)A().hideChaff(!1);else{var a=r.target.getAttribute("id");a&&(a=this.getToolboxItemById(a),a.isSelectable()&&(this.setSelectedItem(a),a.onClick(r))),A().hideChaff(!0)}et()}onKeyDown_(r){let a=!1;switch(r.key){case"ArrowDown":a=this.selectNext_();break;case"ArrowUp":a=this.selectPrevious_();break;case"ArrowLeft":a=this.selectParent_();break;case"ArrowRight":a=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(r)),a&&r.preventDefault()}createFlyout_(){const r=this.workspace_,a=new Uo({parentWorkspace:r,rtl:r.RTL,oneBasedIndex:r.options.oneBasedIndex,horizontalLayout:r.horizontalLayout,renderer:r.options.renderer,rendererOverrides:r.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=r.options.toolboxPosition,new(r.horizontalLayout?_(Dt.FLYOUTS_HORIZONTAL_TOOLBOX,r.options,!0):_(Dt.FLYOUTS_VERTICAL_TOOLBOX,r.options,!0))(a)}render(r){this.toolboxDef_=r;for(let a=0;a<this.contents_.length;a++){const p=this.contents_[a];p&&p.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(r.contents),this.position(),this.handleToolboxItemResize()}renderContents_(r){const a=document.createDocumentFragment();for(let p=0;p<r.length;p++)this.createToolboxItem_(r[p],a);this.contentsDiv_.appendChild(a)}createToolboxItem_(r,a){var p=r.kind;p.toUpperCase()==="CATEGORY"&&Bn(r)&&(p=Kb.registrationName),(p=h(Dt.TOOLBOX_ITEM,p.toLowerCase()))&&(r=new p(r,this),r.init(),this.addToolboxItem_(r),(p=r.getDiv())&&a.appendChild(p),r.getClickTarget()&&r.getClickTarget().setAttribute("id",r.getId()))}addToolboxItem_(r){if(this.contents_.push(r),this.contentMap_[r.getId()]=r,r.isCollapsible()){r=r.getChildToolboxItems();for(let a=0;a<r.length;a++)this.addToolboxItem_(r[a])}}getToolboxItems(){return this.contents_}addStyle(r){r&&this.HtmlDiv&&ke(this.HtmlDiv,r)}removeStyle(r){r&&this.HtmlDiv&&dt(this.HtmlDiv,r)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var r=this.HtmlDiv.getBoundingClientRect();const a=r.top,p=a+r.height,b=r.left;return r=b+r.width,this.toolboxPosition===Kn.TOP?new vi(-1e7,p,-1e7,1e7):this.toolboxPosition===Kn.BOTTOM?new vi(a,1e7,-1e7,1e7):this.toolboxPosition===Kn.LEFT?new vi(-1e7,1e7,-1e7,r):new vi(-1e7,1e7,b,1e7)}wouldDelete(r,a){return r instanceof Zf?this.updateWouldDelete_(!r.getParent()&&r.isDeletable()):this.updateWouldDelete_(r.isDeletable()),this.wouldDelete_}onDragEnter(r){this.updateCursorDeleteStyle_(!0)}onDragExit(r){this.updateCursorDeleteStyle_(!1)}onDrop(r){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(r){r!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=r,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(r){const a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";r?this.addStyle(a):this.removeStyle(a)}getToolboxItemById(r){return this.contentMap_[r]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const r=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=r.viewWidth,this.toolboxPosition===Kn.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition===Kn.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=r.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const r=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();r.translate(this.toolboxPosition===Kn.LEFT?r.scrollX+a.width:r.scrollX,this.toolboxPosition===Kn.TOP?r.scrollY+a.height:r.scrollY),F(r)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let r=0;r<this.contents_.length;r++){const a=this.contents_[r];a.refreshTheme&&a.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(r){this.isVisible_!==r&&(this.HtmlDiv.style.display=r?"block":"none",this.isVisible_=r,this.workspace_.recordDragTargets())}autoHide(r){!r&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(r){const a=this.selectedItem_;!r&&!a||r&&!Gn(r)||(this.shouldDeselectItem_(a,r)&&a!==null&&this.deselectItem_(a),this.shouldSelectItem_(a,r)&&r!==null&&this.selectItem_(a,r),this.updateFlyout_(a,r),this.fireSelectEvent_(a,r))}shouldDeselectItem_(r,a){return r!==null&&(!r.isCollapsible()||r!==a)}shouldSelectItem_(r,a){return a!==null&&a!==r}deselectItem_(r){this.selectedItem_=null,this.previouslySelectedItem_=r,r.setSelected(!1),lr(this.contentsDiv_,zs.ACTIVEDESCENDANT,"")}selectItem_(r,a){this.selectedItem_=a,this.previouslySelectedItem_=r,a.setSelected(!0),lr(this.contentsDiv_,zs.ACTIVEDESCENDANT,a.getId())}selectItemByPosition(r){-1<r&&r<this.contents_.length&&(r=this.contents_[r],r.isSelectable()&&this.setSelectedItem(r))}updateFlyout_(r,a){a&&(r!==a||a.isCollapsible())&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(r,a){const p=r&&r.getName();let b=a&&a.getName();r===a&&(b=null),r=new(xe(Ca))(p,b,this.workspace_.id),ue(r)}selectParent_(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const r=this.selectedItem_;return r.isExpanded()?this.selectNext_():r.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)+1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[++r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let r=this.contents_.indexOf(this.selectedItem_)-1;if(-1<r&&r<this.contents_.length){let a=this.contents_[r];for(;a&&!a.isSelectable();)a=this.contents_[--r];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var r=0;r<this.contents_.length;r++)this.contents_[r].dispose();for(r=0;r<this.boundEvents_.length;r++)rt(this.boundEvents_[r]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ct(this.HtmlDiv))}};It(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),i(Dt.TOOLBOX,Ya,EF);var fX="10.4.3",mX=t.Align$$module$build$src$core$inputs$align.LEFT,gX=t.Align$$module$build$src$core$inputs$align.CENTRE,_X=t.Align$$module$build$src$core$inputs$align.RIGHT,vX=En.INPUT_VALUE,yX=En.OUTPUT_VALUE,bX=En.NEXT_STATEMENT,TX=En.PREVIOUS_STATEMENT,EX=t.inputTypes$$module$build$src$core$inputs$input_types.DUMMY,$X=Kn.TOP,SX=Kn.BOTTOM,wX=Kn.LEFT,xX=Kn.RIGHT;Yv.prototype.newBlock=function(r,a){return new E_(this,r,a)},hf.prototype.newBlock=function(r,a){return new Zf(this,r,a)},hf.newTrashcan=function(r){return new ax(r)},el.prototype.showContextMenu=function(r){if(!this.workspace.options.readOnly){var a=[];this.isDeletable()&&this.isMovable()&&(a.push(bh(this)),a.push(Yu(this))),bu(r,a,this.RTL)}},Gm.prototype.newWorkspaceSvg=function(r){return new hf(r)},t.Names$$module$build$src$core$names.prototype.populateProcedures=function(r){r=Kc(r),r=r[0].concat(r[1]);for(let a=0;a<r.length;a++)this.getName(r[a][0],t.Names$$module$build$src$core$names.NameType.PROCEDURE)};var CX=En,At={ALIGN_CENTRE:gX,ALIGN_LEFT:mX,ALIGN_RIGHT:_X};return At.ASTNode=Vt,At.BasicCursor=Kv,At.Block=E_,At.BlockDragger=Xb,At.BlockSvg=Zf,At.Blocks=Lr,At.Bubble=Yi,At.BubbleDragger=Ue,At.COLLAPSED_FIELD_NAME=Fb,At.COLLAPSED_INPUT_NAME=b0,At.COLLAPSE_CHARS=Ze,At.CodeGenerator=t.CodeGenerator$$module$build$src$core$generator,At.CollapsibleToolboxCategory=Kb,At.ComponentManager=Ma,At.Connection=Li,At.ConnectionChecker=xE,At.ConnectionDB=Rh,At.ConnectionType=En,At.ContextMenu=Wd,At.ContextMenuItems=ce,At.ContextMenuRegistry=qr,At.Css=ql,At.Cursor=kE,At.DELETE_VARIABLE_ID=Jt,At.DRAG_STACK=Ct,At.DUMMY_INPUT=EX,At.DeleteArea=Ub,At.DragTarget=ox,At.DropDownDiv=y,At.Events=Mn,At.Extensions=xp,At.Field=ai,At.FieldAngle=be,At.FieldCheckbox=qe,At.FieldColour=ut,At.FieldDropdown=jd,At.FieldImage=$0,At.FieldLabel=ua,At.FieldLabelSerializable=Ht,At.FieldMultilineInput=Gt,At.FieldNumber=qt,At.FieldTextInput=x_,At.FieldVariable=yn,At.Flyout=or,At.FlyoutButton=Rn,At.FlyoutMetricsManager=gr,At.Generator=t.CodeGenerator$$module$build$src$core$generator,At.Gesture=Hm,At.Grid=gE,At.HorizontalFlyout=li,At.INPUT_VALUE=vX,At.Input=La,At.InsertionMarkerManager=Mp,At.InsertionMarkerPreviewer=Ap,At.Marker=ix,At.MarkerManager=Oh,At.Menu=h0,At.MenuItem=xg,At.MetricsManager=Vb,At.Msg=t.Msg$$module$build$src$core$msg,At.NEXT_STATEMENT=bX,At.Names=t.Names$$module$build$src$core$names,At.OPPOSITE_TYPE=jt,At.OUTPUT_VALUE=yX,At.Options=Uo,At.PREVIOUS_STATEMENT=TX,At.PROCEDURE_CATEGORY_NAME=zv,At.Procedures=Co,At.RENAME_VARIABLE_ID=en,At.RenderedConnection=Dh,At.Scrollbar=Fo,At.ScrollbarPair=FE,At.ShortcutItems=tm,At.ShortcutRegistry=Di,At.TOOLBOX_AT_BOTTOM=SX,At.TOOLBOX_AT_LEFT=wX,At.TOOLBOX_AT_RIGHT=xX,At.TOOLBOX_AT_TOP=$X,At.TabNavigateCursor=sx,At.Theme=g0,At.ThemeManager=nx,At.Themes=pX,At.Toolbox=EF,At.ToolboxCategory=Vm,At.ToolboxItem=XR,At.ToolboxSeparator=qE,At.Tooltip=Vd,At.Touch=_t,At.Trashcan=ax,At.UnattachedFieldError=no,At.VARIABLE_CATEGORY_NAME=u0,At.VARIABLE_DYNAMIC_CATEGORY_NAME=wE,At.VERSION=fX,At.VariableMap=AE,At.VariableModel=Zp,At.Variables=Za,At.VariablesDynamic=kg,At.VerticalFlyout=yi,At.WidgetDiv=Sp,At.Workspace=Yv,At.WorkspaceAudio=rx,At.WorkspaceComment=Dc,At.WorkspaceCommentSvg=el,At.WorkspaceDragger=Gw,At.WorkspaceSvg=hf,At.Xml=wo,At.ZoomControls=u_,At.blockAnimations=V,At.blockRendering=rs,At.browserEvents=ud,At.bubbles=E0,At.bumpObjects=jb,At.clipboard=Dm,At.common=qs,At.config=t.config$$module$build$src$core$config,At.connectionTypes=CX,At.constants=PR,At.defineBlocksWithJsonArray=J,At.dialog=Al,At.fieldRegistry=Uv,At.geras=Lg,At.getMainWorkspace=A,At.getSelected=k,At.hasBubble=El,At.hideChaff=Ic,At.icons=Cr,At.inject=ic,At.inputTypes=t.inputTypes$$module$build$src$core$inputs$input_types,At.inputs=ru,At.isCopyable=wu,At.isIcon=aa,At.isObservable=ye,At.isPaster=Ps,At.isSerializable=Yr,At.isVariableBackedParameterModel=fs,At.minimalist=QE,At.procedures=Co,At.registry=xa,At.renderManagement=Gd,At.serialization=VR,At.setLocale=Gf,At.setParentContainer=U,At.svgResize=F,At.thrasos=jR,At.uiPosition=Mm,At.utils=la,At.zelos=Y,Object.defineProperties(At,{HSV_SATURATION:{get:function(){return ve("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.getHsvSaturation()"),Sc()},set:function(r){ve("Blockly.HSV_SATURATION","version 10","version 11","Blockly.utils.colour.setHsvSaturation()"),xh(r)}},HSV_VALUE:{get:function(){return ve("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.getHsvValue()"),td()},set:function(r){ve("Blockly.HSV_VALUE","version 10","version 11","Blockly.utils.colour.setHsvValue()"),Ju(r)}}}),"Blockly"in globalThis||(globalThis.Blockly={Msg:qa}),At.__namespace__=t,At})}(Sk)),Sk.exports}var B3;function tJ(){return B3||(B3=1,function(n,e){(function(t,i){n.exports=i(rB())})(zu,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}($k)),$k.exports}var P3;function iB(){return P3||(P3=1,function(n,e){(function(t,i){n.exports=i(tJ())})(zu,function(t){return t})}(Ek)),Ek.exports}var wk={exports:{}},F3;function nJ(){return F3||(F3=1,function(n,e){(function(t,i){n.exports=i()})(zu,function(){var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1  %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg})}(wk)),wk.exports}var xk={exports:{}},Ck={exports:{}},U3;function rJ(){return U3||(U3=1,function(n,e){(function(t,i){n.exports=i(rB())})(zu,function(t){var i=t.__namespace__,s=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ae={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:u(this)},X.unshift(ae),X.unshift($e));else{if(this.type==="variables_get_dynamic")var Q="variables_set_dynamic",ae=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Q="variables_get_dynamic",ae=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");Q={type:Q,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:ae.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}},onchange:function(X){X=this.getFieldValue("VAR"),X=i.getVariable$$module$build$src$core$variables(this.workspace,X),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(X.type):this.getInput("VALUE").connection.setCheck(X.type)}},l=function(X){return function(){const Q=X.workspace,ae=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(Q,ae)}},u=function(X){return function(){const Q=X.workspace,ae=X.getField("VAR").getVariable();Q.deleteVariableById(ae.getId()),Q.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),i.defineBlocks$$module$build$src$core$common(s);var h={blocks:s},d=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),m={customContextMenu:function(X){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ae={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:_(this)},$e=this.getField("VAR").getText(),$e={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",$e),enabled:!0,callback:v(this)},X.unshift(ae),X.unshift($e));else{if(this.type==="variables_get")var Q="variables_set",ae=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else Q="variables_get",ae=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var $e=this.getField("VAR");Q={type:Q,fields:{VAR:$e.saveState(!0)}},X.push({enabled:0<this.workspace.remainingCapacity(),text:ae.replace("%1",$e.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)})}}},_=function(X){return function(){const Q=X.workspace,ae=X.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(Q,ae)}},v=function(X){return function(){const Q=X.workspace,ae=X.getField("VAR").getVariable();Q.deleteVariableById(ae.getId()),Q.refreshToolboxSelection()}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",m),i.defineBlocks$$module$build$src$core$common(d);var E={blocks:d},w=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),x={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var Q=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",`${Q}`),Q=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",`${Q}`),X},domToMutation:function(X){const Q=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,Q),this.updateAt_(2,X)},updateAt_:function(X,Q){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),Q?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X),X===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const ae=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});ae.setValidator(function($e){const Ve=$e==="FROM_START"||$e==="FROM_END";if(Ve!==Q){const Pt=this.getSourceBlock();return Pt.updateAt_(X,Ve),Pt.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(ae,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};w.text_getSubstring=x,w.text_changeCase={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},w.text_trim={init:function(){const X=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},w.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(X){this.outputConnection.setCheck(X==="NUMBER"?"Number":"String")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("type",this.getFieldValue("TYPE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("type"))}};w.text_prompt_ext=Object.assign({},A,{init:function(){var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(Q=>{this.updateType_(Q)}),this.appendValueInput("TEXT").appendField(X,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var O=Object.assign({},A,{init:function(){this.mixin(k);var X=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(Q=>{this.updateType_(Q)}),this.appendDummyInput().appendField(X,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});w.text_prompt=O,w.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},w.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},w.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var k={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(X){for(let Q=0,ae;ae=this.inputList[Q];Q++)for(let $e=0,Ve;Ve=ae.fieldRow[$e];$e++)if(X===Ve.name){ae.insertFieldAt($e,this.newQuote_(!0)),ae.insertFieldAt($e+2,this.newQuote_(!1));return}console.warn('field named "'+X+'" not found in '+this.toDevString())},newQuote_:function(X){return X=this.RTL?!X:X,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:X?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:X?"":""})}},N=function(){this.mixin(k),this.quoteField_("TEXT")},D={itemCount_:0,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",`${this.itemCount_}`),X},domToMutation:function(X){this.itemCount_=parseInt(X.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const Q=X.newBlock("text_create_join_container");Q.initSvg();let ae=Q.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const Ve=X.newBlock("text_create_join_item");Ve.initSvg(),ae.connect(Ve.previousConnection),ae=Ve.nextConnection}return Q},compose:function(X){var Q=X.getInputTargetBlock("STACK");for(X=[];Q;)Q.isInsertionMarker()||X.push(Q.valueConnection_),Q=Q.getNextBlock();for(Q=0;Q<this.itemCount_;Q++){const ae=this.getInput("ADD"+Q).connection.targetConnection;ae&&X.indexOf(ae)===-1&&ae.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),Q=0;Q<this.itemCount_;Q++){let ae;(ae=X[Q])==null||ae.reconnect(this,"ADD"+Q)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let Q=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const ae=this.getInput("ADD"+Q);X.valueConnection_=ae&&ae.connection.targetConnection,X=X.getNextBlock(),Q++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const Q=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&Q.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}},U=function(){this.mixin(k),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var F=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},H={isAt_:!1,mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("at",`${this.isAt_}`),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},updateAt_:function(X){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),X&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=X}},z=function(){this.getField("WHERE").setValidator(function(X){X=X==="FROM_START"||X==="FROM_END";const Q=this.getSourceBlock();X!==Q.isAt_&&Q.updateAt_(X)}),this.updateAt_(!0),this.setTooltip(()=>{var X=this.getFieldValue("WHERE");let Q=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(X==="FROM_START"||X==="FROM_END")&&(X=X==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(Q+="  "+X.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),Q})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",F),i.register$$module$build$src$core$extensions("text_quotes",N),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",k),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",D,U),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",H,z),i.defineBlocks$$module$build$src$core$common(w);var J={blocks:w},te={},re={setStatements_:function(X){this.hasStatements_!==X&&(X?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=X)},updateParams_:function(){let X="";this.arguments_.length&&(X=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(X,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(X){const Q=i.createElement$$module$build$src$core$utils$xml("mutation");X&&Q.setAttribute("name",this.getFieldValue("NAME"));for(let ae=0;ae<this.argumentVarModels_.length;ae++){const $e=i.createElement$$module$build$src$core$utils$xml("arg"),Ve=this.argumentVarModels_[ae];$e.setAttribute("name",Ve.name),$e.setAttribute("varid",Ve.getId()),X&&this.paramIds_&&$e.setAttribute("paramId",this.paramIds_[ae]),Q.appendChild($e)}return this.hasStatements_||Q.setAttribute("statements","false"),Q},domToMutation:function(X){this.arguments_=[],this.argumentVarModels_=[];for(let ae=0,$e;$e=X.childNodes[ae];ae++)if($e.nodeName.toLowerCase()==="arg"){var Q=$e;const Ve=Q.getAttribute("name");Q=Q.getAttribute("varid")||Q.getAttribute("varId"),this.arguments_.push(Ve),Q=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Q,Ve,""),Q!==null?this.argumentVarModels_.push(Q):console.log(`Failed to create a variable named "${Ve}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const X=Object.create(null);if(this.argumentVarModels_.length){X.params=[];for(let Q=0;Q<this.argumentVarModels_.length;Q++)X.params.push({name:this.argumentVarModels_[Q].name,id:this.argumentVarModels_[Q].getId()})}return this.hasStatements_||(X.hasStatements=!1),X},loadExtraState:function(X){if(this.arguments_=[],this.argumentVarModels_=[],X.params)for(let ae=0;ae<X.params.length;ae++){var Q=X.params[ae];Q=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,Q.id,Q.name,""),this.arguments_.push(Q.name),this.argumentVarModels_.push(Q)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(X.hasStatements!==!1)},decompose:function(X){const Q=i.createElement$$module$build$src$core$utils$xml("block");Q.setAttribute("type","procedures_mutatorcontainer");var ae=i.createElement$$module$build$src$core$utils$xml("statement");ae.setAttribute("name","STACK"),Q.appendChild(ae);for(let Ve=0;Ve<this.arguments_.length;Ve++){const Pt=i.createElement$$module$build$src$core$utils$xml("block");Pt.setAttribute("type","procedures_mutatorarg");var $e=i.createElement$$module$build$src$core$utils$xml("field");$e.setAttribute("name","NAME");const Fe=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Ve]);$e.appendChild(Fe),Pt.appendChild($e),$e=i.createElement$$module$build$src$core$utils$xml("next"),Pt.appendChild($e),ae.appendChild(Pt),ae=$e}return X=i.domToBlock$$module$build$src$core$xml(Q,X),this.type==="procedures_defreturn"?X.setFieldValue(this.hasStatements_,"STATEMENTS"):X.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),X},compose:function(X){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let Q=X.getInputTargetBlock("STACK");for(;Q&&!Q.isInsertionMarker();){var ae=Q.getFieldValue("NAME");this.arguments_.push(ae),ae=this.workspace.getVariable(ae,""),this.argumentVarModels_.push(ae),this.paramIds_.push(Q.id),Q=Q.nextConnection&&Q.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),X=X.getFieldValue("STATEMENTS"),X!==null&&(X=X==="TRUE",this.hasStatements_!==X))if(X){this.setStatements_(!0);var $e;($e=this.statementConnection_)==null||$e.reconnect(this,"STACK"),this.statementConnection_=null}else $e=this.getInput("STACK").connection,(this.statementConnection_=$e.targetConnection)&&($e=$e.targetBlock(),$e.unplug(),$e.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(X,Q){var ae=this.workspace.getVariableById(X);if(ae.type===""){ae=ae.name,Q=this.workspace.getVariableById(Q);var $e=!1;for(let Ve=0;Ve<this.argumentVarModels_.length;Ve++)this.argumentVarModels_[Ve].getId()===X&&(this.arguments_[Ve]=Q.name,this.argumentVarModels_[Ve]=Q,$e=!0);$e&&(this.displayRenamedVar_(ae,Q.name),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(X){const Q=X.name;let ae=!1,$e;for(let Ve=0;Ve<this.argumentVarModels_.length;Ve++)this.argumentVarModels_[Ve].getId()===X.getId()&&($e=this.arguments_[Ve],this.arguments_[Ve]=Q,ae=!0);ae&&(this.displayRenamedVar_($e,Q),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(X,Q){this.updateParams_();var ae=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(ae&&ae.bubbleIsVisible()){ae=ae.getWorkspace().getAllBlocks(!1);for(let $e=0,Ve;Ve=ae[$e];$e++)Ve.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(X,Ve.getFieldValue("NAME"))&&Ve.setFieldValue(Q,"NAME")}},customContextMenu:function(X){if(!this.isInFlyout){var Q=this.getFieldValue("NAME"),ae={type:this.callType_,extraState:{name:Q,params:this.arguments_}};if(X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",Q),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ae)}),!this.isCollapsed())for(Q=0;Q<this.argumentVarModels_.length;Q++){ae=this.argumentVarModels_[Q];const $e={type:"variables_get",fields:{VAR:{name:ae.name,id:ae.getId(),type:ae.type}}};X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ae.name),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,$e)})}}}};te.procedures_defnoreturn=Object.assign({},re,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),te.procedures_defreturn=Object.assign({},re,{init:function(){var X=i.findLegalName$$module$build$src$core$procedures("",this);X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:X}),X.setValidator(i.rename$$module$build$src$core$procedures),X.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(X,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var ie={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};te.procedures_mutatorcontainer=ie;var de={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:i.DEFAULT_ARG$$module$build$src$core$procedures});X.setValidator(this.validator_),X.oldShowEditorFn_=X.showEditor_,X.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(X,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,X.onFinishEditing_=this.deleteIntermediateVars_,X.createdVariables_=[],X.onFinishEditing_("x")},validator_:function(X){var Q=this.getSourceBlock();const ae=Q.workspace.getRootWorkspace();if(X=X.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!X)return null;const $e=(Q.workspace.targetWorkspace||Q.workspace).getAllBlocks(!1),Ve=X.toLowerCase();for(let Pt=0;Pt<$e.length;Pt++){if($e[Pt].id===this.getSourceBlock().id)continue;const Fe=$e[Pt].getFieldValue("NAME");if(Fe&&Fe.toLowerCase()===Ve)return null}return Q.isInFlyout||((Q=ae.getVariable(X,""))&&Q.name!==X&&ae.renameVariableById(Q.getId(),X),Q||(Q=ae.createVariable(X,""))&&this.createdVariables_&&this.createdVariables_.push(Q)),X},deleteIntermediateVars_:function(X){const Q=this.getSourceBlock().workspace.getRootWorkspace();if(Q)for(let ae=0;ae<this.createdVariables_.length;ae++){const $e=this.createdVariables_[ae];$e.name!==X&&Q.deleteVariableById($e.getId())}}};te.procedures_mutatorarg=de;var oe={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(X,Q){i.Names$$module$build$src$core$names.equals(X,this.getProcedureCall())&&(this.setFieldValue(Q,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",Q)))},setProcedureParameters_:function(X,Q){var ae=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((ae=(ae=ae&&ae.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&ae.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),X.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=Q;else{if(Q.length!==X.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Ve=0;Ve<this.arguments_.length;Ve++){var $e=this.getInput("ARG"+Ve);$e&&($e=$e.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Ve]]=$e,ae&&$e&&Q.indexOf(this.quarkIds_[Ve])===-1&&($e.disconnect(),$e.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(X),this.argumentVarModels_=[],X=0;X<this.arguments_.length;X++)ae=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[X],""),this.argumentVarModels_.push(ae);if(this.updateShape_(),this.quarkIds_=Q){for(Q=0;Q<this.arguments_.length;Q++)if(X=this.quarkIds_[Q],X in this.quarkConnections_){let Ve;(Ve=this.quarkConnections_[X])!=null&&Ve.reconnect(this,"ARG"+Q)||delete this.quarkConnections_[X]}}}},updateShape_:function(){for(var X=0;X<this.arguments_.length;X++){var Q=this.getField("ARGNAME"+X);if(Q){i.disable$$module$build$src$core$events$utils();try{Q.setValue(this.arguments_[X])}finally{i.enable$$module$build$src$core$events$utils()}}else Q=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[X]}),this.appendValueInput("ARG"+X).setAlign(i.Align$$module$build$src$core$inputs$input.RIGHT).appendField(Q,"ARGNAME"+X).init()}for(X=this.arguments_.length;this.getInput("ARG"+X);X++)this.removeInput("ARG"+X);(X=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(X.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),X.init()):this.getField("WITH")&&X.removeField("WITH"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("name",this.getProcedureCall());for(let Q=0;Q<this.arguments_.length;Q++){const ae=i.createElement$$module$build$src$core$utils$xml("arg");ae.setAttribute("name",this.arguments_[Q]),X.appendChild(ae)}return X},domToMutation:function(X){var Q=X.getAttribute("name");this.renameProcedure(this.getProcedureCall(),Q),Q=[];const ae=[];for(let $e=0,Ve;Ve=X.childNodes[$e];$e++)Ve.nodeName.toLowerCase()==="arg"&&(Q.push(Ve.getAttribute("name")),ae.push(Ve.getAttribute("paramId")));this.setProcedureParameters_(Q,ae)},saveExtraState:function(){const X=Object.create(null);return X.name=this.getProcedureCall(),this.arguments_.length&&(X.params=this.arguments_),X},loadExtraState:function(X){if(this.renameProcedure(this.getProcedureCall(),X.name),X=X.params){const Q=[];Q.length=X.length,Q.fill(null),this.setProcedureParameters_(X,Q)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(X){if(this.workspace&&!this.workspace.isFlyout&&X.recordUndo)if(X.type===i.CREATE$$module$build$src$core$events$utils&&X.ids.indexOf(this.id)!==-1){var Q=this.getProcedureCall();if(Q=i.getDefinition$$module$build$src$core$procedures(Q,this.workspace),!Q||Q.type===this.defType_&&JSON.stringify(Q.getVars())===JSON.stringify(this.arguments_)||(Q=null),!Q){i.setGroup$$module$build$src$core$events$utils(X.group),X=i.createElement$$module$build$src$core$utils$xml("xml"),Q=i.createElement$$module$build$src$core$utils$xml("block"),Q.setAttribute("type",this.defType_);var ae=this.getRelativeToSurfaceXY(),$e=ae.y+2*i.config$$module$build$src$core$config.snapRadius;Q.setAttribute("x",`${ae.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),Q.setAttribute("y",`${$e}`),ae=this.mutationToDom(),Q.appendChild(ae),ae=i.createElement$$module$build$src$core$utils$xml("field"),ae.setAttribute("name","NAME"),$e=this.getProcedureCall();const Ve=i.findLegalName$$module$build$src$core$procedures($e,this);$e!==Ve&&this.renameProcedure($e,Ve),ae.appendChild(i.createTextNode$$module$build$src$core$utils$xml($e)),Q.appendChild(ae),X.appendChild(Q),i.domToWorkspace$$module$build$src$core$xml(X,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else X.type===i.DELETE$$module$build$src$core$events$utils?(Q=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(Q,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(X.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):X.type===i.CHANGE$$module$build$src$core$events$utils&&X.element==="disabled"&&(Q=this.getProcedureCall(),(Q=i.getDefinition$$module$build$src$core$procedures(Q,this.workspace))&&Q.id===X.blockId&&((Q=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(X.group),X.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),i.setGroup$$module$build$src$core$events$utils(Q)))},customContextMenu:function(X){if(this.workspace.isMovable()){var Q=this.getProcedureCall(),ae=this.workspace;X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const $e=i.getDefinition$$module$build$src$core$procedures(Q,ae);$e&&(ae.centerOnBlock($e.id),$e.select())}})}}};te.procedures_callnoreturn=Object.assign({},oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),te.procedures_callreturn=Object.assign({},oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"});var ue={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("value",String(Number(this.hasReturnValue_))),X},domToMutation:function(X){this.hasReturnValue_=X.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(X){if(!(this.workspace.isDragging&&this.workspace.isDragging()||X.type!==i.MOVE$$module$build$src$core$events$utils)){var Q=!1,ae=this;do{if(this.FUNCTION_TYPES.indexOf(ae.type)!==-1){Q=!0;break}ae=ae.getSurroundParent()}while(ae);Q?(ae.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):ae.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(ae=i.getGroup$$module$build$src$core$events$utils(),i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(Q),i.setGroup$$module$build$src$core$events$utils(ae))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};te.procedures_ifreturn=ue,i.defineBlocks$$module$build$src$core$common(te);var ge={blocks:te},Ae=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),j={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",j));var Z={mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),Q=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return X.setAttribute("divisor_input",String(Q)),X},domToMutation:function(X){X=X.getAttribute("divisor_input")==="true",this.updateShape_(X)},updateShape_:function(X){const Q=this.getInput("DIVISOR");X?Q||this.appendValueInput("DIVISOR").setCheck("Number"):Q&&this.removeInput("DIVISOR")}},ne=function(){this.getField("PROPERTY").setValidator(function(X){X=X==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(X)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",Z,ne),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var le={updateType_:function(X){X==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("op",this.getFieldValue("OP")),X},domToMutation:function(X){if(X=X.getAttribute("op"),X===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(X)}},_e=function(){this.getField("OP").setValidator((function(X){this.updateType_(X)}).bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",le,_e),i.defineBlocks$$module$build$src$core$common(Ae);var Oe={blocks:Ae},xe=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Xe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Xe));var Re={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Re));var Je={customContextMenu:function(X){if(!this.isInFlyout){var Q=this.getField("VAR"),ae=Q.getVariable().name;this.isCollapsed()||ae===null||(Q={type:"variables_get",fields:{VAR:Q.saveState(!0)}},X.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ae),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,Q)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",Je),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var et=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),at={getSurroundLoop:function(){let X=this;do{if(et.has(X.type))return X;X=X.getSurroundParent()}while(X);return null},onchange:function(X){var Q=this.workspace;if(Q.isDragging&&!Q.isDragging()&&X.type===i.MOVE$$module$build$src$core$events$utils&&(Q=!!this.getSurroundLoop(),this.setWarningText(Q?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){const ae=i.getGroup$$module$build$src$core$events$utils();i.setGroup$$module$build$src$core$events$utils(X.group),this.setEnabled(Q),i.setGroup$$module$build$src$core$events$utils(ae)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",at),i.defineBlocks$$module$build$src$core$common(xe);var Qe={blocks:xe,loopTypes:et},De=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Se={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Se));var Pe={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&X.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&X.setAttribute("else","1"),X},domToMutation:function(X){this.elseifCount_=parseInt(X.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(X.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const X=Object.create(null);return this.elseifCount_&&(X.elseIfCount=this.elseifCount_),this.elseCount_&&(X.hasElse=!0),X},loadExtraState:function(X){this.elseifCount_=X.elseIfCount||0,this.elseCount_=X.hasElse?1:0,this.updateShape_()},decompose:function(X){const Q=X.newBlock("controls_if_if");Q.initSvg();let ae=Q.nextConnection;for(let $e=1;$e<=this.elseifCount_;$e++){const Ve=X.newBlock("controls_if_elseif");Ve.initSvg(),ae.connect(Ve.previousConnection),ae=Ve.nextConnection}return this.elseCount_&&(X=X.newBlock("controls_if_else"),X.initSvg(),ae.connect(X.previousConnection)),Q},compose:function(X){X=X.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const Q=[null],ae=[null];let $e=null;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":this.elseifCount_++,Q.push(X.valueConnection_),ae.push(X.statementConnection_);break;case"controls_if_else":this.elseCount_++,$e=X.statementConnection_;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(Q,ae,$e)},saveConnections:function(X){X=X.nextConnection.targetBlock();let Q=1;for(;X;){if(!X.isInsertionMarker())switch(X.type){case"controls_if_elseif":var ae=this.getInput("IF"+Q);const $e=this.getInput("DO"+Q);X.valueConnection_=ae&&ae.connection.targetConnection,X.statementConnection_=$e&&$e.connection.targetConnection,Q++;break;case"controls_if_else":ae=this.getInput("ELSE"),X.statementConnection_=ae&&ae.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+X.type)}X=X.getNextBlock()}},rebuildShape_:function(){const X=[null],Q=[null];let ae=null;this.getInput("ELSE")&&(ae=this.getInput("ELSE").connection.targetConnection);for(let $e=1;this.getInput("IF"+$e);$e++){const Ve=this.getInput("IF"+$e),Pt=this.getInput("DO"+$e);X.push(Ve.connection.targetConnection),Q.push(Pt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(X,Q,ae)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var X=1;this.getInput("IF"+X);X++)this.removeInput("IF"+X),this.removeInput("DO"+X);for(X=1;X<=this.elseifCount_;X++)this.appendValueInput("IF"+X).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+X).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(X,Q,ae){for(let $e=1;$e<=this.elseifCount_;$e++){let Ve;(Ve=X[$e])==null||Ve.reconnect(this,"IF"+$e);let Pt;(Pt=Q[$e])==null||Pt.reconnect(this,"DO"+$e)}ae==null||ae.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Pe,null,["controls_if_elseif","controls_if_else"]);var rt=function(){this.setTooltip((function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}).bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",rt);var We={onchange:function(X){this.prevBlocks_||(this.prevBlocks_=[null,null]);var Q=this.getInputTargetBlock("A");const ae=this.getInputTargetBlock("B");Q&&ae&&!this.workspace.connectionChecker.doTypeChecks(Q.outputConnection,ae.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(X.group),X=this.prevBlocks_[0],X!==Q&&(Q.unplug(),!X||X.isDisposed()||X.isShadow()||this.getInput("A").connection.connect(X.outputConnection)),Q=this.prevBlocks_[1],Q!==ae&&(ae.unplug(),!Q||Q.isDisposed()||Q.isShadow()||this.getInput("B").connection.connect(Q.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},wt=function(){this.mixin(We)};i.register$$module$build$src$core$extensions("logic_compare",wt);var xt={prevParentConnection_:null,onchange:function(X){const Q=this.getInputTargetBlock("THEN"),ae=this.getInputTargetBlock("ELSE"),$e=this.outputConnection.targetConnection;if((Q||ae)&&$e)for(let Ve=0;2>Ve;Ve++){const Pt=Ve===1?Q:ae;Pt&&!Pt.workspace.connectionChecker.doTypeChecks(Pt.outputConnection,$e)&&(i.setGroup$$module$build$src$core$events$utils(X.group),$e===this.prevParentConnection_?(this.unplug(),$e.getSourceBlock().bumpNeighbours()):(Pt.unplug(),Pt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=$e}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",xt),i.defineBlocks$$module$build$src$core$common(De);var ht=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),St={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("items",String(this.itemCount_)),X},domToMutation:function(X){if(X=X.getAttribute("items"),!X)throw new TypeError("element did not have items");this.itemCount_=parseInt(X,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(X){this.itemCount_=X.itemCount,this.updateShape_()},decompose:function(X){const Q=X.newBlock("lists_create_with_container");Q.initSvg();let ae=Q.getInput("STACK").connection;for(let $e=0;$e<this.itemCount_;$e++){const Ve=X.newBlock("lists_create_with_item");if(Ve.initSvg(),!Ve.previousConnection)throw Error("itemBlock has no previousConnection");ae.connect(Ve.previousConnection),ae=Ve.nextConnection}return Q},compose:function(X){var Q=X.getInputTargetBlock("STACK");for(X=[];Q;)Q.isInsertionMarker()||X.push(Q.valueConnection_),Q=Q.getNextBlock();for(Q=0;Q<this.itemCount_;Q++){const ae=this.getInput("ADD"+Q).connection.targetConnection;ae&&X.indexOf(ae)===-1&&ae.disconnect()}for(this.itemCount_=X.length,this.updateShape_(),Q=0;Q<this.itemCount_;Q++){let ae;(ae=X[Q])==null||ae.reconnect(this,"ADD"+Q)}},saveConnections:function(X){X=X.getInputTargetBlock("STACK");let Q=0;for(;X;){if(X.isInsertionMarker()){X=X.getNextBlock();continue}const ae=this.getInput("ADD"+Q);let $e;X.valueConnection_=($e=ae)==null?void 0:$e.connection.targetConnection,X=X.getNextBlock(),Q++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var X=0;X<this.itemCount_;X++)if(!this.getInput("ADD"+X)){const Q=this.appendValueInput("ADD"+X).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);X===0&&Q.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(X=this.itemCount_;this.getInput("ADD"+X);X++)this.removeInput("ADD"+X)}};ht.lists_create_with=St;var It={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};ht.lists_create_with_container=It;var mt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};ht.lists_create_with_item=mt;var ve={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),!X)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(X,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};ht.lists_indexOf=ve;var ee={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),X.setValidator(function(Q){Q=Q==="REMOVE",this.getSourceBlock().updateStatement_(Q)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const Q=this.getFieldValue("MODE"),ae=this.getFieldValue("WHERE");let $e="";switch(Q+" "+ae){case"GET FROM_START":case"GET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ae==="FROM_START"||ae==="FROM_END")&&($e+="  "+(ae==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");X.setAttribute("statement",String(!this.outputConnection));const Q=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(Q)),X},domToMutation:function(X){const Q=X.getAttribute("statement")==="true";this.updateStatement_(Q),X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(X){X.isStatement?this.updateStatement_(!0):typeof X=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(X))},updateStatement_:function(X){X!==!this.outputConnection&&(this.unplug(!0,!0),X?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});Q.setValidator(function(ae){const $e=ae==="FROM_START"||ae==="FROM_END";if($e!==X){const Ve=this.getSourceBlock();return Ve.updateAt_($e),Ve.setFieldValue(ae,"WHERE"),null}}),this.getInput("AT").appendField(Q,"WHERE"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};ht.lists_getIndex=ee;var ke={init:function(){var X=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:X}),this.appendDummyInput().appendField(X,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const Q=this.getFieldValue("MODE"),ae=this.getFieldValue("WHERE");let $e="";switch(Q+" "+ae){case"SET FROM_START":case"SET FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":$e=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ae==="FROM_START"||ae==="FROM_END")&&($e+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),$e})},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation"),Q=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at",String(Q)),X},domToMutation:function(X){X=X.getAttribute("at")!=="false",this.updateAt_(X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X){this.removeInput("AT"),this.removeInput("ORDINAL",!0),X?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const Q=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});Q.setValidator(function(ae){const $e=ae==="FROM_START"||ae==="FROM_END";if($e!==X){const Ve=this.getSourceBlock();return Ve.updateAt_($e),Ve.setFieldValue(ae,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(Q,"WHERE")}};ht.lists_setIndex=ke;var ot={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");var Q=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return X.setAttribute("at1",String(Q)),Q=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,X.setAttribute("at2",String(Q)),X},domToMutation:function(X){const Q=X.getAttribute("at1")==="true";X=X.getAttribute("at2")==="true",this.updateAt_(1,Q),this.updateAt_(2,X)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(X,Q){this.removeInput("AT"+X),this.removeInput("ORDINAL"+X,!0),Q?(this.appendValueInput("AT"+X).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+X).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+X);const ae=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+X]});ae.setValidator(function($e){const Ve=$e==="FROM_START"||$e==="FROM_END";if(Ve!==Q){const Pt=this.getSourceBlock();return Pt.updateAt_(X,Ve),Pt.setFieldValue($e,"WHERE"+X),null}}),this.getInput("AT"+X).appendField(ae,"WHERE"+X),X===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};ht.lists_getSublist=ot,ht.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},ht.lists_split={init:function(){const X=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!X)throw Error("field_dropdown not found");X.setValidator(Q=>{this.updateType_(Q)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(X,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const Q=this.getFieldValue("MODE");if(Q==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(Q==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+Q)})},updateType_:function(X){if(this.getFieldValue("MODE")!==X){const Q=this.getInput("INPUT").connection;Q.setShadowDom(null);const ae=Q.targetBlock();ae&&(Q.disconnect(),ae.isShadow()?ae.dispose(!1):this.bumpNeighbours())}X==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const X=i.createElement$$module$build$src$core$utils$xml("mutation");return X.setAttribute("mode",this.getFieldValue("MODE")),X},domToMutation:function(X){this.updateType_(X.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},i.defineBlocks$$module$build$src$core$common(ht);var dt={blocks:ht},$t=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);i.defineBlocks$$module$build$src$core$common($t);var ct={blocks:$t},Ge=Object.assign({},$t,ht,De,xe,Ae,te,d,s),Me={blocks:Ge,colour:ct,lists:dt,loops:Qe,math:Oe,procedures:ge,texts:J,variables:E,variablesDynamic:h};return Me.__namespace__=i,Me})}(Ck)),Ck.exports}var z3;function iJ(){return z3||(z3=1,function(n,e){(function(t,i){n.exports=i(rJ())})(zu,function(t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})}(xk)),xk.exports}var xW={exports:{}},Mk={exports:{}},H3;function sJ(){return H3||(H3=1,function(n,e){(function(t,i){n.exports=i(rB())})(zu,function(t){var i=t.__namespace__,s=function(q,me){return[me.quote_(q.getFieldValue("COLOUR")),Me.ATOMIC]},o=function(q,me){return[me.provideFunction_("colourRandom",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",Me.FUNCTION_CALL]},l=function(q,me){const Ne=me.valueToCode(q,"RED",Me.NONE)||0,nt=me.valueToCode(q,"GREEN",Me.NONE)||0;return q=me.valueToCode(q,"BLUE",Me.NONE)||0,[me.provideFunction_("colourRgb",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ne+", "+nt+", "+q+")",Me.FUNCTION_CALL]},u=function(q,me){const Ne=me.valueToCode(q,"COLOUR1",Me.NONE)||"'#000000'",nt=me.valueToCode(q,"COLOUR2",Me.NONE)||"'#000000'";return q=me.valueToCode(q,"RATIO",Me.NONE)||.5,[me.provideFunction_("colourBlend",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+Ne+", "+nt+", "+q+")",Me.FUNCTION_CALL]},h=function(q,me){return["[]",Me.ATOMIC]},d=function(q,me){const Ne=Array(q.itemCount_);for(let nt=0;nt<q.itemCount_;nt++)Ne[nt]=me.valueToCode(q,"ADD"+nt,Me.NONE)||"null";return["["+Ne.join(", ")+"]",Me.ATOMIC]},m=function(q,me){const Ne=me.provideFunction_("listsRepeat",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),nt=me.valueToCode(q,"ITEM",Me.NONE)||"null";return q=me.valueToCode(q,"NUM",Me.NONE)||"0",[Ne+"("+nt+", "+q+")",Me.FUNCTION_CALL]},_=function(q,me){return[(me.valueToCode(q,"VALUE",Me.MEMBER)||"[]")+".length",Me.MEMBER]},v=function(q,me){return["!"+(me.valueToCode(q,"VALUE",Me.MEMBER)||"[]")+".length",Me.LOGICAL_NOT]},E=function(q,me){const Ne=q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",nt=me.valueToCode(q,"FIND",Me.NONE)||"''";return me=(me.valueToCode(q,"VALUE",Me.MEMBER)||"[]")+"."+Ne+"("+nt+")",q.workspace.options.oneBasedIndex?[me+" + 1",Me.ADDITION]:[me,Me.FUNCTION_CALL]},w=function(q,me){const Ne=q.getFieldValue("MODE")||"GET",nt=q.getFieldValue("WHERE")||"FROM_START";var Rt=me.valueToCode(q,"VALUE",nt==="RANDOM"?Me.NONE:Me.MEMBER)||"[]";switch(nt){case"FIRST":if(Ne==="GET")return[Rt+"[0]",Me.MEMBER];if(Ne==="GET_REMOVE")return[Rt+".shift()",Me.MEMBER];if(Ne==="REMOVE")return Rt+`.shift();
`;break;case"LAST":if(Ne==="GET")return[Rt+".slice(-1)[0]",Me.MEMBER];if(Ne==="GET_REMOVE")return[Rt+".pop()",Me.MEMBER];if(Ne==="REMOVE")return Rt+`.pop();
`;break;case"FROM_START":if(q=me.getAdjusted(q,"AT"),Ne==="GET")return[Rt+"["+q+"]",Me.MEMBER];if(Ne==="GET_REMOVE")return[Rt+".splice("+q+", 1)[0]",Me.FUNCTION_CALL];if(Ne==="REMOVE")return Rt+".splice("+q+`, 1);
`;break;case"FROM_END":if(q=me.getAdjusted(q,"AT",1,!0),Ne==="GET")return[Rt+".slice("+q+")[0]",Me.FUNCTION_CALL];if(Ne==="GET_REMOVE")return[Rt+".splice("+q+", 1)[0]",Me.FUNCTION_CALL];if(Ne==="REMOVE")return Rt+".splice("+q+", 1);";break;case"RANDOM":if(Rt=me.provideFunction_("listsGetRandomItem",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Rt+", "+(Ne!=="GET")+")",Ne==="GET"||Ne==="GET_REMOVE")return[Rt,Me.FUNCTION_CALL];if(Ne==="REMOVE")return Rt+`;
`}throw Error("Unhandled combination (lists_getIndex).")},x=function(q,me){function Ne(){if(nt.match(/^\w+$/))return"";const Ie=me.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),st="var "+Ie+" = "+nt+`;
`;return nt=Ie,st}let nt=me.valueToCode(q,"LIST",Me.MEMBER)||"[]";const Rt=q.getFieldValue("MODE")||"GET";var Qt=q.getFieldValue("WHERE")||"FROM_START";const gn=me.valueToCode(q,"TO",Me.ASSIGNMENT)||"null";switch(Qt){case"FIRST":if(Rt==="SET")return nt+"[0] = "+gn+`;
`;if(Rt==="INSERT")return nt+".unshift("+gn+`);
`;break;case"LAST":if(Rt==="SET")return Ne()+(nt+"["+nt+".length - 1] = "+gn+`;
`);if(Rt==="INSERT")return nt+".push("+gn+`);
`;break;case"FROM_START":if(q=me.getAdjusted(q,"AT"),Rt==="SET")return nt+"["+q+"] = "+gn+`;
`;if(Rt==="INSERT")return nt+".splice("+q+", 0, "+gn+`);
`;break;case"FROM_END":if(q=me.getAdjusted(q,"AT",1,!1,Me.SUBTRACTION),Qt=Ne(),Rt==="SET")return Qt+(nt+"["+nt+".length - "+q+"] = "+gn+`;
`);if(Rt==="INSERT")return Qt+(nt+".splice("+nt+".length - "+q+", 0, "+gn+`);
`);break;case"RANDOM":if(q=Ne(),Qt=me.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Qt+" = Math.floor(Math.random() * "+nt+`.length);
`,Rt==="SET")return q+(nt+"["+Qt+"] = "+gn+`;
`);if(Rt==="INSERT")return q+(nt+".splice("+Qt+", 0, "+gn+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},A=function(q,me){var Ne={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},nt=me.valueToCode(q,"LIST",Me.MEMBER)||"[]";const Rt=q.getFieldValue("WHERE1"),Qt=q.getFieldValue("WHERE2");if(Rt==="FIRST"&&Qt==="LAST")nt+=".slice(0)";else if(nt.match(/^\w+$/)||Rt!=="FROM_END"&&Qt==="FROM_START"){switch(Rt){case"FROM_START":Ne=me.getAdjusted(q,"AT1");break;case"FROM_END":Ne=me.getAdjusted(q,"AT1",1,!1,Me.SUBTRACTION),Ne=nt+".length - "+Ne;break;case"FIRST":Ne="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Qt){case"FROM_START":me=me.getAdjusted(q,"AT2",1);break;case"FROM_END":me=me.getAdjusted(q,"AT2",0,!1,Me.SUBTRACTION),me=nt+".length - "+me;break;case"LAST":me=nt+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}nt=nt+".slice("+Ne+", "+me+")"}else{const gn=me.getAdjusted(q,"AT1");q=me.getAdjusted(q,"AT2"),nt=me.provideFunction_("subsequence"+Ne[Rt]+Ne[Qt],`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(sequence${Rt==="FROM_END"||Rt==="FROM_START"?", at1":""}${Qt==="FROM_END"||Qt==="FROM_START"?", at2":""}) {
  var start = ${ae("sequence",Rt,"at1")};
  var end = ${ae("sequence",Qt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+nt+(Rt==="FROM_END"||Rt==="FROM_START"?", "+gn:"")+(Qt==="FROM_END"||Qt==="FROM_START"?", "+q:"")+")"}return[nt,Me.FUNCTION_CALL]},O=function(q,me){const Ne=me.valueToCode(q,"LIST",Me.FUNCTION_CALL)||"[]",nt=q.getFieldValue("DIRECTION")==="1"?1:-1;return q=q.getFieldValue("TYPE"),me=me.provideFunction_("listsGetSortCompare",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Ne+".slice().sort("+me+'("'+q+'", '+nt+"))",Me.FUNCTION_CALL]},k=function(q,me){let Ne=me.valueToCode(q,"INPUT",Me.MEMBER);if(me=me.valueToCode(q,"DELIM",Me.NONE)||"''",q=q.getFieldValue("MODE"),q==="SPLIT")Ne||(Ne="''"),q="split";else if(q==="JOIN")Ne||(Ne="[]"),q="join";else throw Error("Unknown mode: "+q);return[Ne+"."+q+"("+me+")",Me.FUNCTION_CALL]},N=function(q,me){return[(me.valueToCode(q,"LIST",Me.FUNCTION_CALL)||"[]")+".slice().reverse()",Me.FUNCTION_CALL]},D=function(q,me){var Ne=0;let nt="";me.STATEMENT_PREFIX&&(nt+=me.injectId(me.STATEMENT_PREFIX,q));do{const Rt=me.valueToCode(q,"IF"+Ne,Me.NONE)||"false";let Qt=me.statementToCode(q,"DO"+Ne);me.STATEMENT_SUFFIX&&(Qt=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,q),me.INDENT)+Qt),nt+=(0<Ne?" else ":"")+"if ("+Rt+`) {
`+Qt+"}",Ne++}while(q.getInput("IF"+Ne));return(q.getInput("ELSE")||me.STATEMENT_SUFFIX)&&(Ne=me.statementToCode(q,"ELSE"),me.STATEMENT_SUFFIX&&(Ne=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,q),me.INDENT)+Ne),nt+=` else {
`+Ne+"}"),nt+`
`},U=function(q,me){const Ne={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[q.getFieldValue("OP")],nt=Ne==="=="||Ne==="!="?Me.EQUALITY:Me.RELATIONAL,Rt=me.valueToCode(q,"A",nt)||"0";return q=me.valueToCode(q,"B",nt)||"0",[Rt+" "+Ne+" "+q,nt]},F=function(q,me){const Ne=q.getFieldValue("OP")==="AND"?"&&":"||",nt=Ne==="&&"?Me.LOGICAL_AND:Me.LOGICAL_OR;let Rt=me.valueToCode(q,"A",nt);return q=me.valueToCode(q,"B",nt),Rt||q?(me=Ne==="&&"?"true":"false",Rt||(Rt=me),q||(q=me)):q=Rt="false",[Rt+" "+Ne+" "+q,nt]},H=function(q,me){const Ne=Me.LOGICAL_NOT;return["!"+(me.valueToCode(q,"BOOL",Ne)||"true"),Ne]},z=function(q,me){return[q.getFieldValue("BOOL")==="TRUE"?"true":"false",Me.ATOMIC]},J=function(q,me){return["null",Me.ATOMIC]},te=function(q,me){const Ne=me.valueToCode(q,"IF",Me.CONDITIONAL)||"false",nt=me.valueToCode(q,"THEN",Me.CONDITIONAL)||"null";return q=me.valueToCode(q,"ELSE",Me.CONDITIONAL)||"null",[Ne+" ? "+nt+" : "+q,Me.CONDITIONAL]},re=function(q,me){let Ne;Ne=q.getField("TIMES")?String(Number(q.getFieldValue("TIMES"))):me.valueToCode(q,"TIMES",Me.ASSIGNMENT)||"0";let nt=me.statementToCode(q,"DO");nt=me.addLoopTrap(nt,q),q="";const Rt=me.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let Qt=Ne;return Ne.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ne)||(Qt=me.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Qt+" = "+Ne+`;
`),q+("for (var "+Rt+" = 0; "+Rt+" < "+Qt+"; "+Rt+`++) {
`+nt+`}
`)},ie=function(q,me){const Ne=q.getFieldValue("MODE")==="UNTIL";let nt=me.valueToCode(q,"BOOL",Ne?Me.LOGICAL_NOT:Me.NONE)||"false",Rt=me.statementToCode(q,"DO");return Rt=me.addLoopTrap(Rt,q),Ne&&(nt="!"+nt),"while ("+nt+`) {
`+Rt+`}
`},de=function(q,me){var Ne=me.getVariableName(q.getFieldValue("VAR")),nt=me.valueToCode(q,"FROM",Me.ASSIGNMENT)||"0",Rt=me.valueToCode(q,"TO",Me.ASSIGNMENT)||"0";const Qt=me.valueToCode(q,"BY",Me.ASSIGNMENT)||"1";let gn=me.statementToCode(q,"DO");if(gn=me.addLoopTrap(gn,q),i.isNumber$$module$build$src$core$utils$string(nt)&&i.isNumber$$module$build$src$core$utils$string(Rt)&&i.isNumber$$module$build$src$core$utils$string(Qt))me=Number(nt)<=Number(Rt),q="for ("+Ne+" = "+nt+"; "+Ne+(me?" <= ":" >= ")+Rt+"; "+Ne,Ne=Math.abs(Number(Qt)),q=Ne===1?q+(me?"++":"--"):q+((me?" += ":" -= ")+Ne),q+=`) {
`+gn+`}
`;else{q="";let Ie=nt;nt.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(nt)||(Ie=me.nameDB_.getDistinctName(Ne+"_start",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Ie+" = "+nt+`;
`),nt=Rt,Rt.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Rt)||(nt=me.nameDB_.getDistinctName(Ne+"_end",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+nt+" = "+Rt+`;
`),Rt=me.nameDB_.getDistinctName(Ne+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Rt+" = ",q=i.isNumber$$module$build$src$core$utils$string(Qt)?q+(Math.abs(Number(Qt))+`;
`):q+("Math.abs("+Qt+`);
`),q+="if ("+Ie+" > "+nt+`) {
`,q+=me.INDENT+Rt+" = -"+Rt+`;
`,q=q+`}
for (`+(Ne+" = "+Ie+"; "+Rt+" >= 0 ? "+Ne+" <= "+nt+" : "+Ne+" >= "+nt+"; "+Ne+" += "+Rt+`) {
`+gn+`}
`)}return q},oe=function(q,me){const Ne=me.getVariableName(q.getFieldValue("VAR"));var nt=me.valueToCode(q,"LIST",Me.ASSIGNMENT)||"[]";let Rt=me.statementToCode(q,"DO");Rt=me.addLoopTrap(Rt,q),q="";let Qt=nt;return nt.match(/^\w+$/)||(Qt=me.nameDB_.getDistinctName(Ne+"_list",i.NameType$$module$build$src$core$names.VARIABLE),q+="var "+Qt+" = "+nt+`;
`),nt=me.nameDB_.getDistinctName(Ne+"_index",i.NameType$$module$build$src$core$names.VARIABLE),Rt=me.INDENT+Ne+" = "+Qt+"["+nt+`];
`+Rt,q+("for (var "+nt+" in "+Qt+`) {
`+Rt+`}
`)},ue=function(q,me){let Ne="";if(me.STATEMENT_PREFIX&&(Ne+=me.injectId(me.STATEMENT_PREFIX,q)),me.STATEMENT_SUFFIX&&(Ne+=me.injectId(me.STATEMENT_SUFFIX,q)),me.STATEMENT_PREFIX){const nt=q.getSurroundLoop();nt&&!nt.suppressPrefixSuffix&&(Ne+=me.injectId(me.STATEMENT_PREFIX,nt))}switch(q.getFieldValue("FLOW")){case"BREAK":return Ne+`break;
`;case"CONTINUE":return Ne+`continue;
`}throw Error("Unknown flow statement.")},ge=function(q,me){return q=Number(q.getFieldValue("NUM")),[String(q),0<=q?Me.ATOMIC:Me.UNARY_NEGATION]},Ae=function(q,me){var Ne={ADD:[" + ",Me.ADDITION],MINUS:[" - ",Me.SUBTRACTION],MULTIPLY:[" * ",Me.MULTIPLICATION],DIVIDE:[" / ",Me.DIVISION],POWER:[null,Me.NONE]}[q.getFieldValue("OP")];const nt=Ne[0];Ne=Ne[1];const Rt=me.valueToCode(q,"A",Ne)||"0";return q=me.valueToCode(q,"B",Ne)||"0",nt?[Rt+nt+q,Ne]:["Math.pow("+Rt+", "+q+")",Me.FUNCTION_CALL]},j=function(q,me){const Ne=q.getFieldValue("OP");let nt;if(Ne==="NEG")return q=me.valueToCode(q,"NUM",Me.UNARY_NEGATION)||"0",q[0]==="-"&&(q=" "+q),["-"+q,Me.UNARY_NEGATION];switch(q=Ne==="SIN"||Ne==="COS"||Ne==="TAN"?me.valueToCode(q,"NUM",Me.DIVISION)||"0":me.valueToCode(q,"NUM",Me.NONE)||"0",Ne){case"ABS":nt="Math.abs("+q+")";break;case"ROOT":nt="Math.sqrt("+q+")";break;case"LN":nt="Math.log("+q+")";break;case"EXP":nt="Math.exp("+q+")";break;case"POW10":nt="Math.pow(10,"+q+")";break;case"ROUND":nt="Math.round("+q+")";break;case"ROUNDUP":nt="Math.ceil("+q+")";break;case"ROUNDDOWN":nt="Math.floor("+q+")";break;case"SIN":nt="Math.sin("+q+" / 180 * Math.PI)";break;case"COS":nt="Math.cos("+q+" / 180 * Math.PI)";break;case"TAN":nt="Math.tan("+q+" / 180 * Math.PI)"}if(nt)return[nt,Me.FUNCTION_CALL];switch(Ne){case"LOG10":nt="Math.log("+q+") / Math.log(10)";break;case"ASIN":nt="Math.asin("+q+") / Math.PI * 180";break;case"ACOS":nt="Math.acos("+q+") / Math.PI * 180";break;case"ATAN":nt="Math.atan("+q+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Ne)}return[nt,Me.DIVISION]},Z=function(q,me){return{PI:["Math.PI",Me.MEMBER],E:["Math.E",Me.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",Me.DIVISION],SQRT2:["Math.SQRT2",Me.MEMBER],SQRT1_2:["Math.SQRT1_2",Me.MEMBER],INFINITY:["Infinity",Me.ATOMIC]}[q.getFieldValue("CONSTANT")]},ne=function(q,me){var Ne={EVEN:[" % 2 === 0",Me.MODULUS,Me.EQUALITY],ODD:[" % 2 === 1",Me.MODULUS,Me.EQUALITY],WHOLE:[" % 1 === 0",Me.MODULUS,Me.EQUALITY],POSITIVE:[" > 0",Me.RELATIONAL,Me.RELATIONAL],NEGATIVE:[" < 0",Me.RELATIONAL,Me.RELATIONAL],DIVISIBLE_BY:[null,Me.MODULUS,Me.EQUALITY],PRIME:[null,Me.NONE,Me.FUNCTION_CALL]};const nt=q.getFieldValue("PROPERTY"),[Rt,Qt,gn]=Ne[nt];return Ne=me.valueToCode(q,"NUMBER_TO_CHECK",Qt)||"0",nt==="PRIME"?q=me.provideFunction_("mathIsPrime",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Ne+")":nt==="DIVISIBLE_BY"?(q=me.valueToCode(q,"DIVISOR",Me.MODULUS)||"0",q=Ne+" % "+q+" === 0"):q=Ne+Rt,[q,gn]},le=function(q,me){const Ne=me.valueToCode(q,"DELTA",Me.ADDITION)||"0";return q=me.getVariableName(q.getFieldValue("VAR")),q+" = (typeof "+q+" === 'number' ? "+q+" : 0) + "+Ne+`;
`},_e=function(q,me){var Ne=q.getFieldValue("OP");switch(Ne){case"SUM":q=me.valueToCode(q,"LIST",Me.MEMBER)||"[]",q+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q="Math.min.apply(null, "+q+")";break;case"MAX":q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q="Math.max.apply(null, "+q+")";break;case"AVERAGE":Ne=me.provideFunction_("mathMean",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q=Ne+"("+q+")";break;case"MEDIAN":Ne=me.provideFunction_("mathMedian",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q=Ne+"("+q+")";break;case"MODE":Ne=me.provideFunction_("mathModes",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q=Ne+"("+q+")";break;case"STD_DEV":Ne=me.provideFunction_("mathStandardDeviation",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q=Ne+"("+q+")";break;case"RANDOM":Ne=me.provideFunction_("mathRandomList",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),q=me.valueToCode(q,"LIST",Me.NONE)||"[]",q=Ne+"("+q+")";break;default:throw Error("Unknown operator: "+Ne)}return[q,Me.FUNCTION_CALL]},Oe=function(q,me){const Ne=me.valueToCode(q,"DIVIDEND",Me.MODULUS)||"0";return q=me.valueToCode(q,"DIVISOR",Me.MODULUS)||"0",[Ne+" % "+q,Me.MODULUS]},xe=function(q,me){const Ne=me.valueToCode(q,"VALUE",Me.NONE)||"0",nt=me.valueToCode(q,"LOW",Me.NONE)||"0";return q=me.valueToCode(q,"HIGH",Me.NONE)||"Infinity",["Math.min(Math.max("+Ne+", "+nt+"), "+q+")",Me.FUNCTION_CALL]},Xe=function(q,me){const Ne=me.valueToCode(q,"FROM",Me.NONE)||"0";return q=me.valueToCode(q,"TO",Me.NONE)||"0",[me.provideFunction_("mathRandomInt",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Ne+", "+q+")",Me.FUNCTION_CALL]},Re=function(q,me){return["Math.random()",Me.FUNCTION_CALL]},Je=function(q,me){const Ne=me.valueToCode(q,"X",Me.NONE)||"0";return["Math.atan2("+(me.valueToCode(q,"Y",Me.NONE)||"0")+", "+Ne+") / Math.PI * 180",Me.DIVISION]},et=function(q,me){const Ne=me.getProcedureName(q.getFieldValue("NAME"));var nt="";me.STATEMENT_PREFIX&&(nt+=me.injectId(me.STATEMENT_PREFIX,q)),me.STATEMENT_SUFFIX&&(nt+=me.injectId(me.STATEMENT_SUFFIX,q)),nt&&(nt=me.prefixLines(nt,me.INDENT));let Rt="";me.INFINITE_LOOP_TRAP&&(Rt=me.prefixLines(me.injectId(me.INFINITE_LOOP_TRAP,q),me.INDENT));const Qt=me.statementToCode(q,"STACK");let gn=me.valueToCode(q,"RETURN",Me.NONE)||"",Ie="";Qt&&gn&&(Ie=nt),gn&&(gn=me.INDENT+"return "+gn+`;
`);const st=[],Tt=q.getVars();for(let pt=0;pt<Tt.length;pt++)st[pt]=me.getVariableName(Tt[pt]);return nt="function "+Ne+"("+st.join(", ")+`) {
`+nt+Rt+Qt+Ie+gn+"}",nt=me.scrub_(q,nt),me.definitions_["%"+Ne]=nt,null},at=function(q,me){const Ne=me.getProcedureName(q.getFieldValue("NAME")),nt=[],Rt=q.getVars();for(let Qt=0;Qt<Rt.length;Qt++)nt[Qt]=me.valueToCode(q,"ARG"+Qt,Me.NONE)||"null";return[Ne+"("+nt.join(", ")+")",Me.FUNCTION_CALL]},Qe=function(q,me){return me.forBlock.procedures_callreturn(q,me)[0]+`;
`},De=function(q,me){let Ne="if ("+(me.valueToCode(q,"CONDITION",Me.NONE)||"false")+`) {
`;return me.STATEMENT_SUFFIX&&(Ne+=me.prefixLines(me.injectId(me.STATEMENT_SUFFIX,q),me.INDENT)),q.hasReturnValue_?(q=me.valueToCode(q,"VALUE",Me.NONE)||"null",Ne+=me.INDENT+"return "+q+`;
`):Ne+=me.INDENT+`return;
`,Ne+`}
`},Se=function(q,me){return[me.quote_(q.getFieldValue("TEXT")),Me.ATOMIC]},Pe=function(q,me){return q=me.multiline_quote_(q.getFieldValue("TEXT")),me=q.indexOf("+")!==-1?Me.ADDITION:Me.ATOMIC,[q,me]},rt=function(q,me){switch(q.itemCount_){case 0:return["''",Me.ATOMIC];case 1:return q=me.valueToCode(q,"ADD0",Me.NONE)||"''",Ut(q);case 2:var Ne=me.valueToCode(q,"ADD0",Me.NONE)||"''";return q=me.valueToCode(q,"ADD1",Me.NONE)||"''",[Ut(Ne)[0]+" + "+Ut(q)[0],Me.ADDITION];default:Ne=Array(q.itemCount_);for(let nt=0;nt<q.itemCount_;nt++)Ne[nt]=me.valueToCode(q,"ADD"+nt,Me.NONE)||"''";return["["+Ne.join(",")+"].join('')",Me.FUNCTION_CALL]}},We=function(q,me){const Ne=me.getVariableName(q.getFieldValue("VAR"));return q=me.valueToCode(q,"TEXT",Me.NONE)||"''",Ne+" += "+Ut(q)[0]+`;
`},wt=function(q,me){return[(me.valueToCode(q,"VALUE",Me.MEMBER)||"''")+".length",Me.MEMBER]},xt=function(q,me){return["!"+(me.valueToCode(q,"VALUE",Me.MEMBER)||"''")+".length",Me.LOGICAL_NOT]},ht=function(q,me){const Ne=q.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",nt=me.valueToCode(q,"FIND",Me.NONE)||"''";return me=(me.valueToCode(q,"VALUE",Me.MEMBER)||"''")+"."+Ne+"("+nt+")",q.workspace.options.oneBasedIndex?[me+" + 1",Me.ADDITION]:[me,Me.FUNCTION_CALL]},St=function(q,me){const Ne=q.getFieldValue("WHERE")||"FROM_START",nt=me.valueToCode(q,"VALUE",Ne==="RANDOM"?Me.NONE:Me.MEMBER)||"''";switch(Ne){case"FIRST":return[nt+".charAt(0)",Me.FUNCTION_CALL];case"LAST":return[nt+".slice(-1)",Me.FUNCTION_CALL];case"FROM_START":return q=me.getAdjusted(q,"AT"),[nt+".charAt("+q+")",Me.FUNCTION_CALL];case"FROM_END":return q=me.getAdjusted(q,"AT",1,!0),[nt+".slice("+q+").charAt(0)",Me.FUNCTION_CALL];case"RANDOM":return[me.provideFunction_("textRandomLetter",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+nt+")",Me.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},It=function(q,me){var Ne={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const nt=q.getFieldValue("WHERE1"),Rt=q.getFieldValue("WHERE2");var Qt=nt!=="FROM_END"&&nt!=="LAST"&&Rt!=="FROM_END"&&Rt!=="LAST",gn=me.valueToCode(q,"STRING",Qt?Me.MEMBER:Me.NONE)||"''";if(nt==="FIRST"&&Rt==="LAST")return[gn,Me.NONE];if(gn.match(/^'?\w+'?$/)||Qt){switch(nt){case"FROM_START":Ne=me.getAdjusted(q,"AT1");break;case"FROM_END":Ne=me.getAdjusted(q,"AT1",1,!1,Me.SUBTRACTION),Ne=gn+".length - "+Ne;break;case"FIRST":Ne="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Rt){case"FROM_START":me=me.getAdjusted(q,"AT2",1);break;case"FROM_END":me=me.getAdjusted(q,"AT2",0,!1,Me.SUBTRACTION),me=gn+".length - "+me;break;case"LAST":me=gn+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}gn=gn+".slice("+Ne+", "+me+")"}else Qt=me.getAdjusted(q,"AT1"),q=me.getAdjusted(q,"AT2"),gn=me.provideFunction_("subsequence"+Ne[nt]+Ne[Rt],`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(sequence${nt==="FROM_END"||nt==="FROM_START"?", at1":""}${Rt==="FROM_END"||Rt==="FROM_START"?", at2":""}) {
  var start = ${Ft("sequence",nt,"at1")};
  var end = ${Ft("sequence",Rt,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+gn+(nt==="FROM_END"||nt==="FROM_START"?", "+Qt:"")+(Rt==="FROM_END"||Rt==="FROM_START"?", "+q:"")+")";return[gn,Me.FUNCTION_CALL]},mt=function(q,me){const Ne={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[q.getFieldValue("CASE")];return q=me.valueToCode(q,"TEXT",Ne?Me.MEMBER:Me.NONE)||"''",[Ne?q+Ne:me.provideFunction_("textToTitleCase",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+q+")",Me.FUNCTION_CALL]},ve=function(q,me){const Ne={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[q.getFieldValue("MODE")];return[(me.valueToCode(q,"TEXT",Me.MEMBER)||"''")+Ne,Me.FUNCTION_CALL]},ee=function(q,me){return"window.alert("+(me.valueToCode(q,"TEXT",Me.NONE)||"''")+`);
`},ke=function(q,me){return me="window.prompt("+(q.getField("TEXT")?me.quote_(q.getFieldValue("TEXT")):me.valueToCode(q,"TEXT",Me.NONE)||"''")+")",q.getFieldValue("TYPE")==="NUMBER"&&(me="Number("+me+")"),[me,Me.FUNCTION_CALL]},ot=function(q,me){const Ne=me.valueToCode(q,"TEXT",Me.NONE)||"''";return q=me.valueToCode(q,"SUB",Me.NONE)||"''",[me.provideFunction_("textCount",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Ne+", "+q+")",Me.FUNCTION_CALL]},dt=function(q,me){const Ne=me.valueToCode(q,"TEXT",Me.NONE)||"''",nt=me.valueToCode(q,"FROM",Me.NONE)||"''";return q=me.valueToCode(q,"TO",Me.NONE)||"''",[me.provideFunction_("textReplace",`
function ${me.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Ne+", "+nt+", "+q+")",Me.FUNCTION_CALL]},$t=function(q,me){return[(me.valueToCode(q,"TEXT",Me.MEMBER)||"''")+".split('').reverse().join('')",Me.FUNCTION_CALL]},ct=function(q,me){return[me.getVariableName(q.getFieldValue("VAR")),Me.ATOMIC]},Ge=function(q,me){const Ne=me.valueToCode(q,"VALUE",Me.ASSIGNMENT)||"0";return me.getVariableName(q.getFieldValue("VAR"))+" = "+Ne+`;
`},Me;(function(q){q[q.ATOMIC=0]="ATOMIC",q[q.NEW=1.1]="NEW",q[q.MEMBER=1.2]="MEMBER",q[q.FUNCTION_CALL=2]="FUNCTION_CALL",q[q.INCREMENT=3]="INCREMENT",q[q.DECREMENT=3]="DECREMENT",q[q.BITWISE_NOT=4.1]="BITWISE_NOT",q[q.UNARY_PLUS=4.2]="UNARY_PLUS",q[q.UNARY_NEGATION=4.3]="UNARY_NEGATION",q[q.LOGICAL_NOT=4.4]="LOGICAL_NOT",q[q.TYPEOF=4.5]="TYPEOF",q[q.VOID=4.6]="VOID",q[q.DELETE=4.7]="DELETE",q[q.AWAIT=4.8]="AWAIT",q[q.EXPONENTIATION=5]="EXPONENTIATION",q[q.MULTIPLICATION=5.1]="MULTIPLICATION",q[q.DIVISION=5.2]="DIVISION",q[q.MODULUS=5.3]="MODULUS",q[q.SUBTRACTION=6.1]="SUBTRACTION",q[q.ADDITION=6.2]="ADDITION",q[q.BITWISE_SHIFT=7]="BITWISE_SHIFT",q[q.RELATIONAL=8]="RELATIONAL",q[q.IN=8]="IN",q[q.INSTANCEOF=8]="INSTANCEOF",q[q.EQUALITY=9]="EQUALITY",q[q.BITWISE_AND=10]="BITWISE_AND",q[q.BITWISE_XOR=11]="BITWISE_XOR",q[q.BITWISE_OR=12]="BITWISE_OR",q[q.LOGICAL_AND=13]="LOGICAL_AND",q[q.LOGICAL_OR=14]="LOGICAL_OR",q[q.CONDITIONAL=15]="CONDITIONAL",q[q.ASSIGNMENT=16]="ASSIGNMENT",q[q.YIELD=17]="YIELD",q[q.COMMA=18]="COMMA",q[q.NONE=99]="NONE"})(Me||(Me={}));var X=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(q="JavaScript"){super(q),this.ORDER_OVERRIDES=[[Me.FUNCTION_CALL,Me.MEMBER],[Me.FUNCTION_CALL,Me.FUNCTION_CALL],[Me.MEMBER,Me.MEMBER],[Me.MEMBER,Me.FUNCTION_CALL],[Me.LOGICAL_NOT,Me.LOGICAL_NOT],[Me.MULTIPLICATION,Me.MULTIPLICATION],[Me.ADDITION,Me.ADDITION],[Me.LOGICAL_AND,Me.LOGICAL_AND],[Me.LOGICAL_OR,Me.LOGICAL_OR]],this.isInitialized=!1;for(const me in Me)q=Me[me],typeof q!="string"&&(this["ORDER_"+me]=q);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(q){super.init(q),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(q.getVariableMap()),this.nameDB_.populateVariables(q),this.nameDB_.populateProcedures(q);const me=[];var Ne=i.allDeveloperVariables$$module$build$src$core$variables(q);for(let nt=0;nt<Ne.length;nt++)me.push(this.nameDB_.getName(Ne[nt],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(q=i.allUsedVarModels$$module$build$src$core$variables(q),Ne=0;Ne<q.length;Ne++)me.push(this.nameDB_.getName(q[Ne].getId(),i.NameType$$module$build$src$core$names.VARIABLE));me.length&&(this.definitions_.variables="var "+me.join(", ")+";"),this.isInitialized=!0}finish(q){const me=Object.values(this.definitions_);return super.finish(q),this.isInitialized=!1,this.nameDB_.reset(),me.join(`

`)+`


`+q}scrubNakedValue(q){return q+`;
`}quote_(q){return q=q.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+q+"'"}multiline_quote_(q){return q.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(q,me,Ne=!1){let nt="";if(!q.outputConnection||!q.outputConnection.targetConnection){var Rt=q.getCommentText();Rt&&(Rt=i.wrap$$module$build$src$core$utils$string(Rt,this.COMMENT_WRAP-3),nt+=this.prefixLines(Rt+`
`,"// "));for(let Qt=0;Qt<q.inputList.length;Qt++)q.inputList[Qt].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Rt=q.inputList[Qt].connection.targetBlock())&&(Rt=this.allNestedComments(Rt))&&(nt+=this.prefixLines(Rt,"// "))}return q=q.nextConnection&&q.nextConnection.targetBlock(),Ne=Ne?"":this.blockToCode(q),nt+me+Ne}getAdjusted(q,me,Ne=0,nt=!1,Rt=Me.NONE){q.workspace.options.oneBasedIndex&&Ne--;const Qt=q.workspace.options.oneBasedIndex?"1":"0";let gn=Rt;return 0<Ne?gn=Me.ADDITION:0>Ne?gn=Me.SUBTRACTION:nt&&(gn=Me.UNARY_NEGATION),q=this.valueToCode(q,me,gn)||Qt,Ne===0&&!nt?q:i.isNumber$$module$build$src$core$utils$string(q)?(q=String(Number(q)+Ne),nt&&(q=String(-Number(q))),q):(0<Ne?q=`${q} + ${Ne}`:0>Ne&&(q=`${q} - ${-Ne}`),nt&&(q=Ne?`-(${q})`:`-${q}`),Math.floor(Rt)>=Math.floor(gn)&&(q=`(${q})`),q)}},Q={};Q.colour_blend=u,Q.colour_picker=s,Q.colour_random=o,Q.colour_rgb=l;var ae=function(q,me,Ne){return me==="FIRST"?"0":me==="FROM_END"?q+".length - 1 - "+Ne:me==="LAST"?q+".length - 1":Ne},$e={};$e.lists_create_empty=h,$e.lists_create_with=d,$e.lists_getIndex=w,$e.lists_getSublist=A,$e.lists_indexOf=E,$e.lists_isEmpty=v,$e.lists_length=_,$e.lists_repeat=m,$e.lists_reverse=N,$e.lists_setIndex=x,$e.lists_sort=O,$e.lists_split=k;var Ve={};Ve.controls_if=D,Ve.controls_ifelse=D,Ve.logic_boolean=z,Ve.logic_compare=U,Ve.logic_negate=H,Ve.logic_null=J,Ve.logic_operation=F,Ve.logic_ternary=te;var Pt={};Pt.controls_flow_statements=ue,Pt.controls_for=de,Pt.controls_forEach=oe,Pt.controls_repeat=re,Pt.controls_repeat_ext=re,Pt.controls_whileUntil=ie;var Fe={};Fe.math_arithmetic=Ae,Fe.math_atan2=Je,Fe.math_change=le,Fe.math_constant=Z,Fe.math_constrain=xe,Fe.math_modulo=Oe,Fe.math_number=ge,Fe.math_number_property=ne,Fe.math_on_list=_e,Fe.math_random_float=Re,Fe.math_random_int=Xe,Fe.math_round=j,Fe.math_single=j,Fe.math_trig=j;var Wt={};Wt.procedures_callnoreturn=Qe,Wt.procedures_callreturn=at,Wt.procedures_defnoreturn=et,Wt.procedures_defreturn=et,Wt.procedures_ifreturn=De;var lt=/^\s*'([^']|\\')*'\s*$/,Ut=function(q){return lt.test(q)?[q,Me.ATOMIC]:["String("+q+")",Me.FUNCTION_CALL]},Ft=function(q,me,Ne){return me==="FIRST"?"0":me==="FROM_END"?q+".length - 1 - "+Ne:me==="LAST"?q+".length - 1":Ne},Tn={};Tn.text=Se,Tn.text_append=We,Tn.text_changeCase=mt,Tn.text_charAt=St,Tn.text_count=ot,Tn.text_getSubstring=It,Tn.text_indexOf=ht,Tn.text_isEmpty=xt,Tn.text_join=rt,Tn.text_length=wt,Tn.text_multiline=Pe,Tn.text_print=ee,Tn.text_prompt=ke,Tn.text_prompt_ext=ke,Tn.text_replace=dt,Tn.text_reverse=$t,Tn.text_trim=ve;var Er={};Er.variables_get=ct,Er.variables_set=Ge;var cr={};cr.variables_get_dynamic=ct,cr.variables_set_dynamic=Ge;var Gr=new X,sr=Object.assign({},Q,$e,Ve,Pt,Fe,Wt,Tn,Er,cr);for(const q in sr)Gr.forBlock[q]=sr[q];var Xn={};return Xn.JavascriptGenerator=X,Xn.Order=Me,Xn.javascriptGenerator=Gr,Xn.__namespace__=i,Xn})}(Mk)),Mk.exports}(function(n,e){(function(t,i){n.exports=i(iB(),sJ())})(zu,function(t,i){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return i})})(xW);var MT=xW.exports,G3;function oJ(){return G3||(G3=1,function(n,e){(function(t,i){n.exports=i(iB(),nJ(),iJ(),MT)})(zu,function(t,i,s,o){return t.setLocale(i),t})}(Tk)),Tk.exports}(function(n,e){(function(t,i){n.exports=i(oJ())})(zu,function(t){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t})})(wW);var J_=wW.exports,Et=iB();/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aJ={type:"add_text",message0:"Add text %1 with color %2",args0:[{type:"input_value",name:"TEXT",check:"String"},{type:"input_value",name:"COLOR",check:"Colour"}],previousStatement:null,nextStatement:null,colour:160,tooltip:"",helpUrl:""};Et.Blocks.ChangeLED={init:function(){this.setColour("#873B9C"),this.appendValueInput("FIELD_ChangeLED").setCheck("Colour").appendField("Change the LED color to"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setOutput(!1),this.setTooltip("Changes Misty's LED to a specified color")}};Et.Blocks.TransitionLED={init:function(){this.setColour("#873B9C"),this.appendValueInput("COLOR1").setCheck("Colour").appendField("Transition LED from"),this.appendValueInput("COLOR2").setCheck("Colour").appendField("to"),this.appendDummyInput().appendField("using the").appendField(new Et.FieldDropdown([["Breathe","BREATHE"],["Blink","BLINK"],["Transition Once","TRANSITION_ONCE"]]),"TRANSITION_TYPE").appendField("transition"),this.appendDummyInput().appendField("for a duration of").appendField(new Et.FieldNumber(1e3),"FIELD_TransitionTime_TimeMs").appendField("ms"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Transition LED between two colors with the specified transition type and time.")}};Et.Blocks.DisplayImage={init:function(){this.setColour("#873B9C"),this.appendValueInput("FIELD_DisplayImage_Filename").setCheck("Face").appendField("Change face expression to: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Displays an image on Misty's screen, Alpha specifies transparency (0 is completely transparent, 1 is completely opaque) ***WARNING: MUST connect with ListFilesAvailable to select the image file to display***")}};Et.Blocks.DisplayAnimation={init:function(){this.setColour("#873B9C"),this.appendValueInput("FIELD_DisplayAnimation_Filename").setCheck("Animation").appendField("Show this animation on Misty: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Runs a specified animation on Misty")}};Et.Blocks.MoveHead={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move head").appendField(new Et.FieldDropdown([["Up","U"],["Down","D"]]),"FIELD_MoveHead_Pitch"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head Up or Down"),this.setHelpUrl("MoveHead")}};Et.Blocks.MoveHead2={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move head").appendField("Pitch (-40 to 25):").appendField(new Et.FieldNumber(0,-40,25,1),"FIELD_MoveHead_Pitch").appendField("Roll (-42 to 42):").appendField(new Et.FieldNumber(0,-42,42,1),"FIELD_MoveHead_Roll").appendField("Yaw (-90 to 90):").appendField(new Et.FieldNumber(0,-90,90,1),"FIELD_MoveHead_Yaw"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw"),this.setHelpUrl("MoveHead")}};Et.Blocks.MoveArm={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move ").appendField(new Et.FieldDropdown([["Right","Right"],["Left","Left"]]),"FIELD_MoveArm_Arm").appendField("arm to position").appendField(new Et.FieldNumber(0,-90,90,1),"FIELD_MoveArm_Position").appendField("at a speed of (0 to 100)").appendField(new Et.FieldNumber(50,0,100,1),"FIELD_MoveArm_Velocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves one of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArm")}};Et.Blocks.MoveArm2={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move both arms to position").appendField(new Et.FieldNumber(0),"FIELD_MoveArm2_Position").appendField("at a speed of (0 to 100)").appendField(new Et.FieldNumber(50,0,100,1),"FIELD_MoveArm2_Velocity"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArm2")}};Et.Blocks.MoveArms={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move left arm to position").appendField(new Et.FieldNumber(0,-29,90,1),"FIELD_MoveArm_LeftPosition").appendField("at a speed of (0 to 100)").appendField(new Et.FieldNumber(50,0,100,1),"FIELD_MoveArm_LeftVelocity").appendField("and move right arm to position").appendField(new Et.FieldNumber(0,-29,90,1),"FIELD_MoveArm_RightPosition").appendField("at a speed of (0 to 100)").appendField(new Et.FieldNumber(50,0,100,1),"FIELD_MoveArm_RightVelocity"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed (between 0 and 100)"),this.setHelpUrl("MoveArms")}};Et.Blocks.MoveArms2={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("math_number");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour("#006486"),this.appendValueInput("FIELD_MoveArm_LeftPosition").setCheck("Number").appendField("Move left arm to position");var h=this.getInput("FIELD_MoveArm_LeftPosition").connection;h.connect(e),this.appendValueInput("FIELD_MoveArm_LeftVelocity").setCheck("Number").appendField("at a speed of (0 to 100)");var m=this.getInput("FIELD_MoveArm_LeftVelocity").connection;m.connect(i),this.appendValueInput("FIELD_MoveArm_RightPosition").setCheck("Number").appendField("and move right arm to position");var d=this.getInput("FIELD_MoveArm_RightPosition").connection;d.connect(o),this.appendValueInput("FIELD_MoveArm_RightVelocity").setCheck("Number").appendField("at a speed of (0 to 100)");var m=this.getInput("FIELD_MoveArm_RightVelocity").connection;m.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves both of Misty's arms to a specified position (expects a value from 0-10, 5 points the arm straight forward) at a specified speed"),this.setHelpUrl("MoveArms")}};Et.Blocks.DriveTime={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Move ").appendField(new Et.FieldDropdown([["Forward","F"],["Backward","B"]]),"FIELD_DriveTime_Direction").appendField("at a speed of (0 to 100)").appendField(new Et.FieldNumber(25,0,100,1),"FIELD_DriveTime_Velocity").appendField("for a duration of").appendField(new Et.FieldNumber(1500,100,1e4,100),"FIELD_DriveTime_TimeMs").appendField("ms"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty straight in a specified direction at a specified speed for a specified amount of time (1000ms = 1 second)"),this.setHelpUrl("DriveTime")}};Et.Blocks.MoveHead3={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection,l=this.workspace.newBlock("math_number");l.setShadow(!0),l.initSvg(),l.render();var u=l.outputConnection;this.setColour("#006486"),this.appendValueInput("FIELD_MoveHead_Pitch").setCheck("Number").appendField("Move head").appendField("Pitch (-40 to 25):");var h=this.getInput("FIELD_MoveHead_Pitch").connection;h.connect(e),this.appendValueInput("FIELD_MoveHead_Roll").setCheck("Number").appendField("Roll (-42 to 42):");var d=this.getInput("FIELD_MoveHead_Roll").connection;d.connect(i),this.appendValueInput("FIELD_MoveHead_Yaw").setCheck("Number").appendField("Yaw (-90 to 90):");var m=this.getInput("FIELD_MoveHead_Yaw").connection;m.connect(o),this.appendValueInput("FIELD_MoveHead_Time").setCheck("Number").appendField("Time (0 to 60 seconds):");var _=this.getInput("FIELD_MoveHead_Time").connection;_.connect(u),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Moves Misty's head a specified amount of degrees with roll, pitch, and/or yaw"),this.setHelpUrl("MoveHead")}};Et.Blocks.DriveTime2={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection,t=this.workspace.newBlock("math_number");t.setShadow(!0),t.initSvg(),t.render();var i=t.outputConnection,s=this.workspace.newBlock("math_number");s.setShadow(!0),s.initSvg(),s.render();var o=s.outputConnection;this.setColour("#006486"),this.appendValueInput("FIELD_DriveTime_Velocity").setCheck("Number").appendField("Move at a speed of (-100 to 100)");var l=this.getInput("FIELD_DriveTime_Velocity").connection;l.connect(e),this.appendValueInput("FIELD_DriveTime_Angular").setCheck("Number").appendField("with angular velocity of (-100 CW to 100 CCW)");var u=this.getInput("FIELD_DriveTime_Angular").connection;u.connect(i),this.appendValueInput("FIELD_DriveTime_TimeMs").setCheck("Number").appendField("for a duration of (ms)");var h=this.getInput("FIELD_DriveTime_TimeMs").connection;h.connect(o),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Drives Misty forward (positive speed) or backward (negative speed) with possible turning using angular velocity (0 for straight) for the specified duration (1000 ms = 1 second)"),this.setHelpUrl("DriveTime")}};Et.Blocks.Turn={init:function(){this.setColour("#006486"),this.appendDummyInput().appendField("Turn").appendField(new Et.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction").appendField("for time of").appendField(new Et.FieldNumber(4500),"FIELD_Turn_Duration").appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)"),this.setHelpUrl("Turn")}};Et.Blocks.Turn2={init:function(){var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.setColour("#006486"),this.appendDummyInput().appendField("Turn").appendField(new Et.FieldDropdown([["Left","L"],["Right","R"]]),"FIELD_Turn_Direction"),this.appendValueInput("FIELD_Turn_Duration").setCheck("Number").appendField("for time of");var t=this.getInput("FIELD_Turn_Duration").connection;t.connect(e),this.appendDummyInput().appendField("milliseconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turns Misty in the specified direction (1000ms = 1 second and 4500ms is approximately 90 degrees)"),this.setHelpUrl("Turn")}};Et.Blocks.Speak={init:function(){this.setColour("#007CB5"),this.appendValueInput("FIELD_Speak_Text").setCheck("String").appendField("Speak: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given input text")}};Et.Blocks.SpeakDefault={init:function(){this.setColour("#007CB5"),this.appendDummyInput().appendField("Speak: ").appendField(new Et.FieldDropdown([["Hi","Hi"],["Hello","Hello"],["How are you today?","How are you today?"],["Goodbye","Goodbye"]]),"FIELD_SpeakDefault_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Speak given selected default text")}};Et.Blocks.TurnOnFlashlight={init:function(){this.setColour("#873B9C"),this.appendDummyInput().appendField("Turn on flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn on flashlight")}};Et.Blocks.TurnOffFlashlight={init:function(){this.setColour("#873B9C"),this.appendDummyInput().appendField("Turn off flashlight "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Turn off flashlight")}};Et.Blocks.WaitForSeconds={init:function(){this.appendDummyInput().appendField("wait for"),this.appendDummyInput().setAlign(Et.ALIGN_CENTRE).appendField(new Et.FieldNumber(0,-1/0,1/0,.1),"NumSeconds"),this.appendDummyInput().appendField("Seconds"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour("#873B9C"),this.setTooltip(""),this.setHelpUrl("")}};Et.Blocks.PlayAudio={init:function(){this.setColour("#873B9C"),this.appendValueInput("FIELD_PlayAudio_Filename").setCheck("Audio").appendField("Play audio: "),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};Et.Blocks.SetVolume={init:function(){this.setColour("#873B9C");var n=this.workspace.newBlock("math_number");n.setShadow(!0),n.initSvg(),n.render();var e=n.outputConnection;this.appendValueInput("FIELD_Volume").setCheck("Number").appendField("Set volume to (0-100): ");var t=this.getInput("FIELD_Volume").connection;t.connect(e),this.setInputsInline(!1),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("Adjusts Misty's volume level for audio playback"),this.setHelpUrl("")}};Et.Blocks.DisplayText={init:function(){this.setColour("#873B9C"),this.appendDummyInput().appendField("Display Text: ").appendField(new Et.FieldTextInput("default"),"FIELD_DisplayText_Text"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("")}};Et.Blocks.eyes_acceptance={init:function(){this.appendDummyInput().appendField("Expression: acceptance"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'acceptance'")}};Et.Blocks.eyes_admiration={init:function(){this.appendDummyInput().appendField("Expression: admiration"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'admiration'")}};Et.Blocks.eyes_amazement={init:function(){this.appendDummyInput().appendField("Expression: amazement"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'amazement'")}};Et.Blocks.eyes_anger={init:function(){this.appendDummyInput().appendField("Expression: anger"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'anger'")}};Et.Blocks.eyes_annoyed={init:function(){this.appendDummyInput().appendField("Expression: annoyed"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'annoyed'")}};Et.Blocks.eyes_anticipation={init:function(){this.appendDummyInput().appendField("Expression: anticipation"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'anticipation'")}};Et.Blocks.eyes_apprehension={init:function(){this.appendDummyInput().appendField("Expression: apprehension"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'apprehension'")}};Et.Blocks.eyes_boredom={init:function(){this.appendDummyInput().appendField("Expression: boredom"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'boredom'")}};Et.Blocks.eyes_default={init:function(){this.appendDummyInput().appendField("Expression: default"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'default'")}};Et.Blocks.eyes_disgust={init:function(){this.appendDummyInput().appendField("Expression: disgust"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'disgust'")}};Et.Blocks.eyes_distraction={init:function(){this.appendDummyInput().appendField("Expression: distraction"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'distraction'")}};Et.Blocks.eyes_ecstasy_frame_1={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 1"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'ecstasy 1'")}};Et.Blocks.eyes_ecstasy_frame_2={init:function(){this.appendDummyInput().appendField("Expression: ecstasy 2"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'ecstasy 2'")}};Et.Blocks.eyes_fear={init:function(){this.appendDummyInput().appendField("Expression: fear"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'fear'")}};Et.Blocks.eyes_grief={init:function(){this.appendDummyInput().appendField("Expression: grief"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'grief'")}};Et.Blocks.eyes_interest={init:function(){this.appendDummyInput().appendField("Expression: interest"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'interest'")}};Et.Blocks.eyes_joy={init:function(){this.appendDummyInput().appendField("Expression: joy"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'joy'")}};Et.Blocks.eyes_loathing={init:function(){this.appendDummyInput().appendField("Expression: loathing"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'loathing'")}};Et.Blocks.eyes_pensiveness={init:function(){this.appendDummyInput().appendField("Expression: pensiveness"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'pensiveness'")}};Et.Blocks.eyes_rage={init:function(){this.appendDummyInput().appendField("Expression: rage eyes"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'rage eyes'")}};Et.Blocks.eyes_sad={init:function(){this.appendDummyInput().appendField("Expression: sad"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'sad'")}};Et.Blocks.eyes_serenity={init:function(){this.appendDummyInput().appendField("Expression: serenity"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'serenity'")}};Et.Blocks.eyes_surprise={init:function(){this.appendDummyInput().appendField("Expression: surprise"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'surprise'")}};Et.Blocks.eyes_terror={init:function(){this.appendDummyInput().appendField("Expression: terror"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'terror'")}};Et.Blocks.eyes_trust={init:function(){this.appendDummyInput().appendField("Expression: trust"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'trust'")}};Et.Blocks.eyes_vigilance={init:function(){this.appendDummyInput().appendField("Expression: vigilance"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'vigilance'")}};Et.Blocks.e_Sleeping={init:function(){this.appendDummyInput().appendField("Expression: sleeping"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'sleeping'")}};Et.Blocks.e_SleepingZZZ={init:function(){this.appendDummyInput().appendField("Expression: sleeping ZZZ"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'sleeping ZZZ'")}};Et.Blocks.e_Contempt={init:function(){this.appendDummyInput().appendField("Expression: contempt"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'contempt'")}};Et.Blocks.e_ContentLeft={init:function(){this.appendDummyInput().appendField("Expression: content (left)"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'content (left)'")}};Et.Blocks.e_ContentRight={init:function(){this.appendDummyInput().appendField("Expression: content (right)"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'content (right)'")}};Et.Blocks.e_Disoriented={init:function(){this.appendDummyInput().appendField("Expression: disoriented"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'disoriented'")}};Et.Blocks.e_EcstacyHilarious={init:function(){this.appendDummyInput().appendField("Expression: ecstacy hilarious"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'ecstacy hilarious'")}};Et.Blocks.e_EcstacyStarryEyed={init:function(){this.appendDummyInput().appendField("Expression: ecstacy starry eyed"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'ecstacy starry eyed'")}};Et.Blocks.e_JoyGoofy={init:function(){this.appendDummyInput().appendField("Expression: joy goofy"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'joy goofy'")}};Et.Blocks.e_JoyGoofy2={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 2"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'joy goofy 2'")}};Et.Blocks.e_JoyGoofy3={init:function(){this.appendDummyInput().appendField("Expression: joy goofy 3"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'joy goofy 3'")}};Et.Blocks.e_Love={init:function(){this.appendDummyInput().appendField("Expression: love"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'love'")}};Et.Blocks.e_Rage={init:function(){this.appendDummyInput().appendField("Expression: rage"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'rage'")}};Et.Blocks.e_Rage2={init:function(){this.appendDummyInput().appendField("Expression: rage 2"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'rage 2'")}};Et.Blocks.e_Rage3={init:function(){this.appendDummyInput().appendField("Expression: rage 3"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'rage 3'")}};Et.Blocks.e_Rage4={init:function(){this.appendDummyInput().appendField("Expression: rage 4"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'rage 4'")}};Et.Blocks.e_RemorseShame={init:function(){this.appendDummyInput().appendField("Expression: remorse shame"),this.setOutput(!0,"Face"),this.setColour("#465AB2"),this.setTooltip("Represents the facial expression 'remorse shame'")}};Et.Blocks["animation_sleepy.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Sleeping"),this.setOutput(!0,"Animation"),this.setColour("#465AB2"),this.setTooltip("Run the animation 'sleepy'")}};Et.Blocks["animation_dancing.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Dancing"),this.setOutput(!0,"Animation"),this.setColour("#465AB2"),this.setTooltip("Run the animation 'dancing'")}};Et.Blocks["animation_spooked.bv"]={init:function(){this.appendDummyInput().appendField("Animation: Spooked"),this.setOutput(!0,"Animation"),this.setColour("#465AB2"),this.setTooltip("Run the animation 'spooked'")}};Et.Blocks.s_Acceptance={init:function(){this.appendDummyInput().appendField("Sound: acceptance"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'acceptance'")}};Et.Blocks.s_Amazement={init:function(){this.appendDummyInput().appendField("Sound: amazement"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'amazement'")}};Et.Blocks.s_Amazement2={init:function(){this.appendDummyInput().appendField("Sound: amazement 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'amazement 2'")}};Et.Blocks.s_Anger={init:function(){this.appendDummyInput().appendField("Sound: anger"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'anger'")}};Et.Blocks.s_Anger2={init:function(){this.appendDummyInput().appendField("Sound: anger 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'anger 2'")}};Et.Blocks.s_Anger3={init:function(){this.appendDummyInput().appendField("Sound: anger 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'anger 3'")}};Et.Blocks.s_Anger4={init:function(){this.appendDummyInput().appendField("Sound: anger 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'anger 4'")}};Et.Blocks.s_Annoyance={init:function(){this.appendDummyInput().appendField("Sound: annoyance"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'annoyance'")}};Et.Blocks.s_Annoyance2={init:function(){this.appendDummyInput().appendField("Sound: annoyance 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'annoyance 2'")}};Et.Blocks.s_Annoyance3={init:function(){this.appendDummyInput().appendField("Sound: annoyance 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'annoyance 3'")}};Et.Blocks.s_Annoyance4={init:function(){this.appendDummyInput().appendField("Sound: annoyance 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'annoyance 4'")}};Et.Blocks.s_Awe={init:function(){this.appendDummyInput().appendField("Sound: awe"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'awe'")}};Et.Blocks.s_Awe2={init:function(){this.appendDummyInput().appendField("Sound: awe 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'awe 2'")}};Et.Blocks.s_Awe3={init:function(){this.appendDummyInput().appendField("Sound: awe 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'awe 3'")}};Et.Blocks.s_Boredom={init:function(){this.appendDummyInput().appendField("Sound: boredom"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'boredom'")}};Et.Blocks.s_Disapproval={init:function(){this.appendDummyInput().appendField("Sound: disapproval"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disapproval'")}};Et.Blocks.s_Disgust={init:function(){this.appendDummyInput().appendField("Sound: disgust"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disgust'")}};Et.Blocks.s_Disgust2={init:function(){this.appendDummyInput().appendField("Sound: disgust 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disgust 2'")}};Et.Blocks.s_Disgust3={init:function(){this.appendDummyInput().appendField("Sound: disgust 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disgust 3'")}};Et.Blocks.s_DisorientedConfused={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused'")}};Et.Blocks.s_DisorientedConfused2={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused 2'")}};Et.Blocks.s_DisorientedConfused3={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused 3'")}};Et.Blocks.s_DisorientedConfused4={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused 4'")}};Et.Blocks.s_DisorientedConfused5={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 5"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused 5'")}};Et.Blocks.s_DisorientedConfused6={init:function(){this.appendDummyInput().appendField("Sound: disoriented confused 6"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'disoriented confused 6'")}};Et.Blocks.s_Distraction={init:function(){this.appendDummyInput().appendField("Sound: distraction"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'distraction'")}};Et.Blocks.s_Ecstacy={init:function(){this.appendDummyInput().appendField("Sound: ecstacy"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'ecstacy'")}};Et.Blocks.s_Ecstacy2={init:function(){this.appendDummyInput().appendField("Sound: ecstacy 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'ecstacy 2'")}};Et.Blocks.s_Fear={init:function(){this.appendDummyInput().appendField("Sound: fear"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'fear'")}};Et.Blocks.s_Grief={init:function(){this.appendDummyInput().appendField("Sound: grief"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'grief'")}};Et.Blocks.s_Grief2={init:function(){this.appendDummyInput().appendField("Sound: grief 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'grief 2'")}};Et.Blocks.s_Grief3={init:function(){this.appendDummyInput().appendField("Sound: grief 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'grief 3'")}};Et.Blocks.s_Grief4={init:function(){this.appendDummyInput().appendField("Sound: grief 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'grief 4'")}};Et.Blocks.s_Joy={init:function(){this.appendDummyInput().appendField("Sound: joy"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'joy'")}};Et.Blocks.s_Joy2={init:function(){this.appendDummyInput().appendField("Sound: joy 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'joy 2'")}};Et.Blocks.s_Joy3={init:function(){this.appendDummyInput().appendField("Sound: joy 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'joy 3'")}};Et.Blocks.s_Joy4={init:function(){this.appendDummyInput().appendField("Sound: joy 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'joy 4'")}};Et.Blocks.s_Loathing={init:function(){this.appendDummyInput().appendField("Sound: loathing"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'loathing'")}};Et.Blocks.s_Love={init:function(){this.appendDummyInput().appendField("Sound: love"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'love'")}};Et.Blocks.s_PhraseByeBye={init:function(){this.appendDummyInput().appendField("Sound: Bye Bye"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Bye Bye'")}};Et.Blocks.s_PhraseEvilAhHa={init:function(){this.appendDummyInput().appendField("Sound: Evil Ah Ha"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Evil Ah Ha'")}};Et.Blocks.s_PhraseHello={init:function(){this.appendDummyInput().appendField("Sound: Hello"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Hello'")}};Et.Blocks.s_PhraseNoNoNo={init:function(){this.appendDummyInput().appendField("Sound: No No No"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: No No No'")}};Et.Blocks.s_PhraseOopsy={init:function(){this.appendDummyInput().appendField("Sound: Oopsy"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Oopsy'")}};Et.Blocks.s_PhraseOwOwOw={init:function(){this.appendDummyInput().appendField("Sound: Ow Ow Ow"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Ow Ow Ow'")}};Et.Blocks.s_PhraseOwwww={init:function(){this.appendDummyInput().appendField("Sound: Owwww"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Owwww'")}};Et.Blocks.s_PhraseUhOh={init:function(){this.appendDummyInput().appendField("Sound: Uh Oh"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'phrase: Uh Oh'")}};Et.Blocks.s_Rage={init:function(){this.appendDummyInput().appendField("Sound: rage"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'rage'")}};Et.Blocks.s_Sadness={init:function(){this.appendDummyInput().appendField("Sound: sadness"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness'")}};Et.Blocks.s_Sadness2={init:function(){this.appendDummyInput().appendField("Sound: sadness 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 2'")}};Et.Blocks.s_Sadness3={init:function(){this.appendDummyInput().appendField("Sound: sadness 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 3'")}};Et.Blocks.s_Sadness4={init:function(){this.appendDummyInput().appendField("Sound: sadness 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 4'")}};Et.Blocks.s_Sadness5={init:function(){this.appendDummyInput().appendField("Sound: sadness 5"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 5'")}};Et.Blocks.s_Sadness6={init:function(){this.appendDummyInput().appendField("Sound: sadness 6"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 6'")}};Et.Blocks.s_Sadness7={init:function(){this.appendDummyInput().appendField("Sound: sadness 7"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sadness 7'")}};Et.Blocks.s_Sleepy={init:function(){this.appendDummyInput().appendField("Sound: sleepy"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sleepy'")}};Et.Blocks.s_Sleepy2={init:function(){this.appendDummyInput().appendField("Sound: sleepy 2"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sleepy 2'")}};Et.Blocks.s_Sleepy3={init:function(){this.appendDummyInput().appendField("Sound: sleepy 3"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sleepy 3'")}};Et.Blocks.s_Sleepy4={init:function(){this.appendDummyInput().appendField("Sound: sleepy 4"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sleepy 4'")}};Et.Blocks.s_SleepySnore={init:function(){this.appendDummyInput().appendField("Sound: sleepy snore"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'sleepy snore'")}};Et.Blocks.s_SystemCameraShutter={init:function(){this.appendDummyInput().appendField("Sound: system camera shutter"),this.setOutput(!0,"Audio"),this.setColour("#6D47B1"),this.setTooltip("Represents the audio 'system camera shutter'")}};const lJ=Et.common.createBlockDefinitionsFromJsonArray([aJ]);/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cI=Object.create(null);cI.add_text=function(n,e){const t=e.valueToCode(n,"TEXT",MT.Order.NONE)||"''",i=e.valueToCode(n,"COLOR",MT.Order.ATOMIC)||"'#ffffff'";return`${e.provideFunction_("addText",`function ${e.FUNCTION_NAME_PLACEHOLDER_}(text, color) {

  // Add text to the output area.
  const outputDiv = document.getElementById('output');
  const textEl = document.createElement('p');
  textEl.innerText = text;
  textEl.style.color = color;
  outputDiv.appendChild(textEl);
}`)}(${t}, ${i});
`};cI.Start=function(n){return""};var uJ={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const W3=n=>{let e;const t=new Set,i=(m,_)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const E=e;e=_??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(w=>w(e,E))}},s=()=>e,h={setState:i,getState:s,getInitialState:()=>d,subscribe:m=>(t.add(m),()=>t.delete(m)),destroy:()=>{(uJ?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=e=n(i,s,h);return h},cJ=n=>n?W3(n):W3;var CW={exports:{}},MW={},AW={exports:{}},IW={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT=he;function hJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var dJ=typeof Object.is=="function"?Object.is:hJ,pJ=AT.useState,fJ=AT.useEffect,mJ=AT.useLayoutEffect,gJ=AT.useDebugValue;function _J(n,e){var t=e(),i=pJ({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return mJ(function(){s.value=t,s.getSnapshot=e,Ak(s)&&o({inst:s})},[n,t,e]),fJ(function(){return Ak(s)&&o({inst:s}),n(function(){Ak(s)&&o({inst:s})})},[n]),gJ(t),t}function Ak(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!dJ(n,t)}catch{return!0}}function vJ(n,e){return e()}var yJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vJ:_J;IW.useSyncExternalStore=AT.useSyncExternalStore!==void 0?AT.useSyncExternalStore:yJ;AW.exports=IW;var bJ=AW.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hI=he,TJ=bJ;function EJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $J=typeof Object.is=="function"?Object.is:EJ,SJ=TJ.useSyncExternalStore,wJ=hI.useRef,xJ=hI.useEffect,CJ=hI.useMemo,MJ=hI.useDebugValue;MW.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var o=wJ(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=CJ(function(){function h(E){if(!d){if(d=!0,m=E,E=i(E),s!==void 0&&l.hasValue){var w=l.value;if(s(w,E))return _=w}return _=E}if(w=_,$J(m,E))return w;var x=i(E);return s!==void 0&&s(w,x)?w:(m=E,_=x)}var d=!1,m,_,v=t===void 0?null:t;return[function(){return h(e())},v===null?void 0:function(){return h(v())}]},[e,t,i,s]);var u=SJ(n,o[0],o[1]);return xJ(function(){l.hasValue=!0,l.value=u},[u]),MJ(u),u};CW.exports=MW;var AJ=CW.exports;const IJ=fb(AJ);var RW={BASE_URL:"/gpu-programming/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:RJ}=Tr,{useSyncExternalStoreWithSelector:kJ}=IJ;let V3=!1;const OJ=n=>n;function LJ(n,e=OJ,t){(RW?"production":void 0)!=="production"&&t&&!V3&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),V3=!0);const i=kJ(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return RJ(i),i}const j3=n=>{(RW?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?cJ(n):n,t=(i,s)=>LJ(e,i,s);return Object.assign(t,e),t},DJ=n=>n?j3(n):j3;var sB={},dI={};(function(n){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",t=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+e+"]["+t+"]*",s=new RegExp("^"+i+"$"),o=function(u,h){const d=[];let m=h.exec(u);for(;m;){const _=[];_.startIndex=h.lastIndex-m[0].length;const v=m.length;for(let E=0;E<v;E++)_.push(m[E]);d.push(_),m=h.exec(u)}return d},l=function(u){const h=s.exec(u);return!(h===null||typeof h>"u")};n.isExist=function(u){return typeof u<"u"},n.isEmptyObject=function(u){return Object.keys(u).length===0},n.merge=function(u,h,d){if(h){const m=Object.keys(h),_=m.length;for(let v=0;v<_;v++)d==="strict"?u[m[v]]=[h[m[v]]]:u[m[v]]=h[m[v]]}},n.getValue=function(u){return n.isExist(u)?u:""},n.isName=l,n.getAllMatches=o,n.nameRegexp=i})(dI);const oB=dI,NJ={allowBooleanAttributes:!1,unpairedTags:[]};sB.validate=function(n,e){e=Object.assign({},NJ,e);const t=[];let i=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let o=0;o<n.length;o++)if(n[o]==="<"&&n[o+1]==="?"){if(o+=2,o=Y3(n,o),o.err)return o}else if(n[o]==="<"){let l=o;if(o++,n[o]==="!"){o=K3(n,o);continue}else{let u=!1;n[o]==="/"&&(u=!0,o++);let h="";for(;o<n.length&&n[o]!==">"&&n[o]!==" "&&n[o]!=="	"&&n[o]!==`
`&&n[o]!=="\r";o++)h+=n[o];if(h=h.trim(),h[h.length-1]==="/"&&(h=h.substring(0,h.length-1),o--),!WJ(h)){let _;return h.trim().length===0?_="Invalid space after '<'.":_="Tag '"+h+"' is an invalid name.",hc("InvalidTag",_,kp(n,o))}const d=FJ(n,o);if(d===!1)return hc("InvalidAttr","Attributes for '"+h+"' have open quote.",kp(n,o));let m=d.value;if(o=d.index,m[m.length-1]==="/"){const _=o-m.length;m=m.substring(0,m.length-1);const v=J3(m,e);if(v===!0)i=!0;else return hc(v.err.code,v.err.msg,kp(n,_+v.err.line))}else if(u)if(d.tagClosed){if(m.trim().length>0)return hc("InvalidTag","Closing tag '"+h+"' can't have attributes or invalid starting.",kp(n,l));{const _=t.pop();if(h!==_.tagName){let v=kp(n,_.tagStartPos);return hc("InvalidTag","Expected closing tag '"+_.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+h+"'.",kp(n,l))}t.length==0&&(s=!0)}}else return hc("InvalidTag","Closing tag '"+h+"' doesn't have proper closing.",kp(n,o));else{const _=J3(m,e);if(_!==!0)return hc(_.err.code,_.err.msg,kp(n,o-m.length+_.err.line));if(s===!0)return hc("InvalidXml","Multiple possible root nodes found.",kp(n,o));e.unpairedTags.indexOf(h)!==-1||t.push({tagName:h,tagStartPos:l}),i=!0}for(o++;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="!"){o++,o=K3(n,o);continue}else if(n[o+1]==="?"){if(o=Y3(n,++o),o.err)return o}else break;else if(n[o]==="&"){const _=HJ(n,o);if(_==-1)return hc("InvalidChar","char '&' is not expected.",kp(n,o));o=_}else if(s===!0&&!X3(n[o]))return hc("InvalidXml","Extra text at the end",kp(n,o));n[o]==="<"&&o--}}else{if(X3(n[o]))continue;return hc("InvalidChar","char '"+n[o]+"' is not expected.",kp(n,o))}if(i){if(t.length==1)return hc("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",kp(n,t[0].tagStartPos));if(t.length>0)return hc("InvalidXml","Invalid '"+JSON.stringify(t.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return hc("InvalidXml","Start tag expected.",1);return!0};function X3(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Y3(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const i=n.substr(t,e-t);if(e>5&&i==="xml")return hc("InvalidXml","XML declaration allowed only at the start of the document.",kp(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function K3(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const BJ='"',PJ="'";function FJ(n,e){let t="",i="",s=!1;for(;e<n.length;e++){if(n[e]===BJ||n[e]===PJ)i===""?i=n[e]:i!==n[e]||(i="");else if(n[e]===">"&&i===""){s=!0;break}t+=n[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const UJ=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function J3(n,e){const t=oB.getAllMatches(n,UJ),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return hc("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",a$(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return hc("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",a$(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return hc("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",a$(t[s]));const o=t[s][2];if(!GJ(o))return hc("InvalidAttr","Attribute '"+o+"' is an invalid name.",a$(t[s]));if(!i.hasOwnProperty(o))i[o]=1;else return hc("InvalidAttr","Attribute '"+o+"' is repeated.",a$(t[s]))}return!0}function zJ(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function HJ(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,zJ(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function hc(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function GJ(n){return oB.isName(n)}function WJ(n){return oB.isName(n)}function kp(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function a$(n){return n.startIndex+n[1].length}var aB={};const kW={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n}},VJ=function(n){return Object.assign({},kW,n)};aB.buildOptions=VJ;aB.defaultOptions=kW;class jJ{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}var XJ=jJ;const YJ=dI;function KJ(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let i=1,s=!1,o=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!o){if(s&&qJ(n,e))e+=7,[entityName,val,e]=JJ(n,e+1),val.indexOf("&")===-1&&(t[nQ(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&ZJ(n,e))e+=8;else if(s&&eQ(n,e))e+=8;else if(s&&tQ(n,e))e+=9;else if(QJ)o=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(n[e]===">"){if(o?n[e-1]==="-"&&n[e-2]==="-"&&(o=!1,i--):i--,i===0)break}else n[e]==="["?s=!0:l+=n[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}function JJ(n,e){let t="";for(;e<n.length&&n[e]!=="'"&&n[e]!=='"';e++)t+=n[e];if(t=t.trim(),t.indexOf(" ")!==-1)throw new Error("External entites are not supported");const i=n[e++];let s="";for(;e<n.length&&n[e]!==i;e++)s+=n[e];return[t,s,e]}function QJ(n,e){return n[e+1]==="!"&&n[e+2]==="-"&&n[e+3]==="-"}function qJ(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="N"&&n[e+4]==="T"&&n[e+5]==="I"&&n[e+6]==="T"&&n[e+7]==="Y"}function ZJ(n,e){return n[e+1]==="!"&&n[e+2]==="E"&&n[e+3]==="L"&&n[e+4]==="E"&&n[e+5]==="M"&&n[e+6]==="E"&&n[e+7]==="N"&&n[e+8]==="T"}function eQ(n,e){return n[e+1]==="!"&&n[e+2]==="A"&&n[e+3]==="T"&&n[e+4]==="T"&&n[e+5]==="L"&&n[e+6]==="I"&&n[e+7]==="S"&&n[e+8]==="T"}function tQ(n,e){return n[e+1]==="!"&&n[e+2]==="N"&&n[e+3]==="O"&&n[e+4]==="T"&&n[e+5]==="A"&&n[e+6]==="T"&&n[e+7]==="I"&&n[e+8]==="O"&&n[e+9]==="N"}function nQ(n){if(YJ.isName(n))return n;throw new Error(`Invalid entity name ${n}`)}var rQ=KJ;const iQ=/^[-+]?0x[a-fA-F0-9]+$/,sQ=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const oQ={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function aQ(n,e={}){if(e=Object.assign({},oQ,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(e.hex&&iQ.test(t))return Number.parseInt(t,16);{const i=sQ.exec(t);if(i){const s=i[1],o=i[2];let l=lQ(i[3]);const u=i[4]||i[6];if(!e.leadingZeros&&o.length>0&&s&&t[2]!==".")return n;if(!e.leadingZeros&&o.length>0&&!s&&t[1]!==".")return n;{const h=Number(t),d=""+h;return d.search(/[eE]/)!==-1||u?e.eNotation?h:n:t.indexOf(".")!==-1?d==="0"&&l===""||d===l||s&&d==="-"+l?h:n:o?l===d||s+l===d?h:n:t===d||t===s+d?h:n}}else return n}}function lQ(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substr(0,n.length-1))),n}var uQ=aQ;const OW=dI,l$=XJ,cQ=rQ,hQ=uQ;let dQ=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCharCode(Number.parseInt(i,16))}},this.addExternalEntities=pQ,this.parseXml=vQ,this.parseTextData=fQ,this.resolveNameSpace=mQ,this.buildAttributesMap=_Q,this.isItStopNode=EQ,this.replaceEntitiesValue=bQ,this.readStopNodeData=SQ,this.saveTextToParentTag=TQ,this.addChild=yQ}};function pQ(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function fQ(n,e,t,i,s,o,l){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,o);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?LL(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?LL(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function mQ(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const gQ=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function _Q(n,e,t){if(!this.options.ignoreAttributes&&typeof n=="string"){const i=OW.getAllMatches(n,gQ),s=i.length,o={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);let h=i[l][4],d=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),h!==void 0){this.options.trimValues&&(h=h.trim()),h=this.replaceEntitiesValue(h);const m=this.options.attributeValueProcessor(u,h,e);m==null?o[d]=h:typeof m!=typeof h||m!==h?o[d]=m:o[d]=LL(h,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[d]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=o,l}return o}}const vQ=function(n){n=n.replace(/\r\n?/g,`
`);const e=new l$("!xml");let t=e,i="",s="";for(let o=0;o<n.length;o++)if(n[o]==="<")if(n[o+1]==="/"){const u=ky(n,">",o,"Closing Tag is not closed.");let h=n.substring(o+2,u).trim();if(this.options.removeNSPrefix){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1))}this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&(i=this.saveTextToParentTag(i,t,s));const d=s.substring(s.lastIndexOf(".")+1);if(h&&this.options.unpairedTags.indexOf(h)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${h}>`);let m=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(m=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):m=s.lastIndexOf("."),s=s.substring(0,m),t=this.tagsNodeStack.pop(),i="",o=u}else if(n[o+1]==="?"){let u=OL(n,o,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const h=new l$(u.tagName);h.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(h[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,h,s)}o=u.closeIndex+1}else if(n.substr(o+1,3)==="!--"){const u=ky(n,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const h=n.substring(o+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:h}])}o=u}else if(n.substr(o+1,2)==="!D"){const u=cQ(n,o);this.docTypeEntities=u.entities,o=u.i}else if(n.substr(o+1,2)==="!["){const u=ky(n,"]]>",o,"CDATA is not closed.")-2,h=n.substring(o+9,u);i=this.saveTextToParentTag(i,t,s);let d=this.parseTextData(h,t.tagname,s,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:h}]):t.add(this.options.textNodeName,d),o=u+2}else{let u=OL(n,o,this.options.removeNSPrefix),h=u.tagName;const d=u.rawTagName;let m=u.tagExp,_=u.attrExpPresent,v=u.closeIndex;this.options.transformTagName&&(h=this.options.transformTagName(h)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const E=t;if(E&&this.options.unpairedTags.indexOf(E.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),h!==e.tagname&&(s+=s?"."+h:h),this.isItStopNode(this.options.stopNodes,s,h)){let w="";if(m.length>0&&m.lastIndexOf("/")===m.length-1)o=u.closeIndex;else if(this.options.unpairedTags.indexOf(h)!==-1)o=u.closeIndex;else{const A=this.readStopNodeData(n,d,v+1);if(!A)throw new Error(`Unexpected end of ${d}`);o=A.i,w=A.tagContent}const x=new l$(h);h!==m&&_&&(x[":@"]=this.buildAttributesMap(m,s,h)),w&&(w=this.parseTextData(w,h,s,!0,_,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),x.add(this.options.textNodeName,w),this.addChild(t,x,s)}else{if(m.length>0&&m.lastIndexOf("/")===m.length-1){h[h.length-1]==="/"?(h=h.substr(0,h.length-1),s=s.substr(0,s.length-1),m=h):m=m.substr(0,m.length-1),this.options.transformTagName&&(h=this.options.transformTagName(h));const w=new l$(h);h!==m&&_&&(w[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,w,s),s=s.substr(0,s.lastIndexOf("."))}else{const w=new l$(h);this.tagsNodeStack.push(t),h!==m&&_&&(w[":@"]=this.buildAttributesMap(m,s,h)),this.addChild(t,w,s),t=w}i="",o=v}}else i+=n[o];return e.child};function yQ(n,e,t){const i=this.options.updateTag(e.tagname,t,e[":@"]);i===!1||(typeof i=="string"&&(e.tagname=i),n.addChild(e))}const bQ=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function TQ(n,e,t,i){return n&&(i===void 0&&(i=Object.keys(e.child).length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function EQ(n,e,t){const i="*."+t;for(const s in n){const o=n[s];if(i===o||e===o)return!0}return!1}function $Q(n,e,t=">"){let i,s="";for(let o=e;o<n.length;o++){let l=n[o];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(n[o+1]===t[1])return{data:s,index:o}}else return{data:s,index:o};else l==="	"&&(l=" ");s+=l}}function ky(n,e,t,i){const s=n.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function OL(n,e,t,i=">"){const s=$Q(n,e+1,i);if(!s)return;let o=s.data;const l=s.index,u=o.search(/\s/);let h=o,d=!0;u!==-1&&(h=o.substring(0,u),o=o.substring(u+1).trimStart());const m=h;if(t){const _=h.indexOf(":");_!==-1&&(h=h.substr(_+1),d=h!==s.data.substr(_+1))}return{tagName:h,tagExp:o,closeIndex:l,attrExpPresent:d,rawTagName:m}}function SQ(n,e,t){const i=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const o=ky(n,">",t,`${e} is not closed`);if(n.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:n.substring(i,t),i:o};t=o}else if(n[t+1]==="?")t=ky(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=ky(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=ky(n,"]]>",t,"StopNode is not closed.")-2;else{const o=OL(n,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function LL(n,e,t){if(e&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:hQ(n,t)}else return OW.isExist(n)?n:""}var wQ=dQ,LW={};function xQ(n,e){return DW(n,e)}function DW(n,e,t){let i;const s={};for(let o=0;o<n.length;o++){const l=n[o],u=CQ(l);let h="";if(t===void 0?h=u:h=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let d=DW(l[u],e,h);const m=AQ(d,e);l[":@"]?MQ(d,l[":@"],h,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(d)):e.isArray(u,h,m)?s[u]=[d]:s[u]=d}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function CQ(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function MQ(n,e,t,i){if(e){const s=Object.keys(e),o=s.length;for(let l=0;l<o;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function AQ(n,e){const{textNodeName:t}=e,i=Object.keys(n).length;return!!(i===0||i===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}LW.prettify=xQ;const{buildOptions:IQ}=aB,RQ=wQ,{prettify:kQ}=LW,OQ=sB;let LQ=class{constructor(e){this.externalEntities={},this.options=IQ(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=OQ.validate(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const i=new RQ(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:kQ(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var DQ=LQ;const NQ=`
`;function BQ(n,e){let t="";return e.format&&e.indentBy.length>0&&(t=NQ),NW(n,e,"",t)}function NW(n,e,t,i){let s="",o=!1;for(let l=0;l<n.length;l++){const u=n[l],h=PQ(u);if(h===void 0)continue;let d="";if(t.length===0?d=h:d=`${t}.${h}`,h===e.textNodeName){let w=u[h];FQ(d,e)||(w=e.tagValueProcessor(h,w),w=BW(w,e)),o&&(s+=i),s+=w,o=!1;continue}else if(h===e.cdataPropName){o&&(s+=i),s+=`<![CDATA[${u[h][0][e.textNodeName]}]]>`,o=!1;continue}else if(h===e.commentPropName){s+=i+`<!--${u[h][0][e.textNodeName]}-->`,o=!0;continue}else if(h[0]==="?"){const w=Q3(u[":@"],e),x=h==="?xml"?"":i;let A=u[h][0][e.textNodeName];A=A.length!==0?" "+A:"",s+=x+`<${h}${A}${w}?>`,o=!0;continue}let m=i;m!==""&&(m+=e.indentBy);const _=Q3(u[":@"],e),v=i+`<${h}${_}`,E=NW(u[h],e,d,m);e.unpairedTags.indexOf(h)!==-1?e.suppressUnpairedNode?s+=v+">":s+=v+"/>":(!E||E.length===0)&&e.suppressEmptyNode?s+=v+"/>":E&&E.endsWith(">")?s+=v+`>${E}${i}</${h}>`:(s+=v+">",E&&i!==""&&(E.includes("/>")||E.includes("</"))?s+=i+e.indentBy+E+i:s+=E,s+=`</${h}>`),o=!0}return s}function PQ(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(n.hasOwnProperty(i)&&i!==":@")return i}}function Q3(n,e){let t="";if(n&&!e.ignoreAttributes)for(let i in n){if(!n.hasOwnProperty(i))continue;let s=e.attributeValueProcessor(i,n[i]);s=BW(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${i.substr(e.attributeNamePrefix.length)}`:t+=` ${i.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function FQ(n,e){n=n.substr(0,n.length-e.textNodeName.length-1);let t=n.substr(n.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===n||e.stopNodes[i]==="*."+t)return!0;return!1}function BW(n,e){if(n&&n.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const i=e.entities[t];n=n.replace(i.regex,i.val)}return n}var UQ=BQ;const zQ=UQ,HQ={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function xv(n){this.options=Object.assign({},HQ,n),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=VQ),this.processTextOrObjNode=GQ,this.options.format?(this.indentate=WQ,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}xv.prototype.build=function(n){return this.options.preserveOrder?zQ(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0).val)};xv.prototype.j2x=function(n,e){let t="",i="";for(let s in n)if(Object.prototype.hasOwnProperty.call(n,s))if(typeof n[s]>"u")this.isAttribute(s)&&(i+="");else if(n[s]===null)this.isAttribute(s)?i+="":s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(n[s]instanceof Date)i+=this.buildTextValNode(n[s],s,"",e);else if(typeof n[s]!="object"){const o=this.isAttribute(s);if(o)t+=this.buildAttrPairStr(o,""+n[s]);else if(s===this.options.textNodeName){let l=this.options.tagValueProcessor(s,""+n[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(n[s],s,"",e)}else if(Array.isArray(n[s])){const o=n[s].length;let l="";for(let u=0;u<o;u++){const h=n[s][u];typeof h>"u"||(h===null?s[0]==="?"?i+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+s+"/"+this.tagEndChar:typeof h=="object"?this.options.oneListGroup?l+=this.j2x(h,e+1).val:l+=this.processTextOrObjNode(h,s,e):l+=this.buildTextValNode(h,s,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,s,"",e)),i+=l}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(n[s]),l=o.length;for(let u=0;u<l;u++)t+=this.buildAttrPairStr(o[u],""+n[s][o[u]])}else i+=this.processTextOrObjNode(n[s],s,e);return{attrStr:t,val:i}};xv.prototype.buildAttrPairStr=function(n,e){return e=this.options.attributeValueProcessor(n,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+n:" "+n+'="'+e+'"'};function GQ(n,e,t){const i=this.j2x(n,t+1);return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],e,i.attrStr,t):this.buildObjectNode(i.val,e,i.attrStr,t)}xv.prototype.buildObjectNode=function(n,e,t,i){if(n==="")return e[0]==="?"?this.indentate(i)+"<"+e+t+"?"+this.tagEndChar:this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),(t||t==="")&&n.indexOf("<")===-1?this.indentate(i)+"<"+e+t+o+">"+n+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(i)+`<!--${n}-->`+this.newLine:this.indentate(i)+"<"+e+t+o+this.tagEndChar+n+this.indentate(i)+s}};xv.prototype.closeTag=function(n){let e="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${n}`,e};xv.prototype.buildTextValNode=function(n,e,t,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${n}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,n);return s=this.replaceEntitiesValue(s),s===""?this.indentate(i)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}};xv.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];n=n.replace(t.regex,t.val)}return n};function WQ(n){return this.options.indentBy.repeat(n)}function VQ(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}var jQ=xv;const XQ=sB,YQ=DQ,KQ=jQ;var PW={XMLParser:YQ,XMLValidator:XQ,XMLBuilder:KQ};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lB="162",TA=0,JQ=1,QQ=2,q3=1,Z3=100,eU=204,tU=205,nU=3,qQ=0,rU="attached",ZQ="detached",FW=300,NS=1e3,V$=1001,DL=1002,BS=1003,eq=1004,tq=1005,uB=1006,nq=1007,cB=1008,UW=1009,rq=1014,hB=1015,iq=1020,dB=1023,Ik=1026,iU=1027,sq=1028,PS=2300,IT=2301,Rk=2302,sU=2400,oU=2401,aU=2402,oq=2500,aq=0,zW=1,NL=2,lq=0,HW="",X_="srgb",pB="srgb-linear",uq="display-p3",GW="display-p3-linear",BL="linear",lU="srgb",uU="rec709",cU="p3",Zb=7680,hU=519,cq=515,PL=35044,Oy=2e3,FL=2001;class pI{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,l=s.length;o<l;o++)s[o].call(this,e);e.target=null}}}const yd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let dU=1234567;const lS=Math.PI/180,FS=180/Math.PI;function cg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(yd[n&255]+yd[n>>8&255]+yd[n>>16&255]+yd[n>>24&255]+"-"+yd[e&255]+yd[e>>8&255]+"-"+yd[e>>16&15|64]+yd[e>>24&255]+"-"+yd[t&63|128]+yd[t>>8&255]+"-"+yd[t>>16&255]+yd[t>>24&255]+yd[i&255]+yd[i>>8&255]+yd[i>>16&255]+yd[i>>24&255]).toLowerCase()}function Cd(n,e,t){return Math.max(e,Math.min(t,n))}function fB(n,e){return(n%e+e)%e}function hq(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function dq(n,e,t){return n!==e?(t-n)/(e-n):0}function uS(n,e,t){return(1-t)*n+t*e}function pq(n,e,t,i){return uS(n,e,1-Math.exp(-t*i))}function fq(n,e=1){return e-Math.abs(fB(n,e*2)-e)}function mq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function gq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _q(n,e){return n+Math.floor(Math.random()*(e-n+1))}function vq(n,e){return n+Math.random()*(e-n)}function yq(n){return n*(.5-Math.random())}function bq(n){n!==void 0&&(dU=n);let e=dU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Tq(n){return n*lS}function Eq(n){return n*FS}function $q(n){return(n&n-1)===0&&n!==0}function Sq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function wq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xq(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),d=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),E=o((i-e)/2),w=l((i-e)/2);switch(s){case"XYX":n.set(u*m,h*_,h*v,u*d);break;case"YZY":n.set(h*v,u*m,h*_,u*d);break;case"ZXZ":n.set(h*_,h*v,u*m,u*d);break;case"XZX":n.set(u*m,h*w,h*E,u*d);break;case"YXY":n.set(h*E,u*m,h*w,u*d);break;case"ZYZ":n.set(h*w,h*E,u*m,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function ig(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function po(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Cq={DEG2RAD:lS,RAD2DEG:FS,generateUUID:cg,clamp:Cd,euclideanModulo:fB,mapLinear:hq,inverseLerp:dq,lerp:uS,damp:pq,pingpong:fq,smoothstep:mq,smootherstep:gq,randInt:_q,randFloat:vq,randFloatSpread:yq,seededRandom:bq,degToRad:Tq,radToDeg:Eq,isPowerOfTwo:$q,ceilPowerOfTwo:Sq,floorPowerOfTwo:wq,setQuaternionFromProperEuler:xq,normalize:po,denormalize:ig};class Dl{constructor(e=0,t=0){Dl.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Cd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class n_{constructor(e,t,i,s,o,l,u,h,d){n_.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,d)}set(e,t,i,s,o,l,u,h,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],d=i[1],m=i[4],_=i[7],v=i[2],E=i[5],w=i[8],x=s[0],A=s[3],O=s[6],k=s[1],N=s[4],D=s[7],U=s[2],F=s[5],H=s[8];return o[0]=l*x+u*k+h*U,o[3]=l*A+u*N+h*F,o[6]=l*O+u*D+h*H,o[1]=d*x+m*k+_*U,o[4]=d*A+m*N+_*F,o[7]=d*O+m*D+_*H,o[2]=v*x+E*k+w*U,o[5]=v*A+E*N+w*F,o[8]=v*O+E*D+w*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8];return t*l*m-t*u*d-i*o*m+i*u*h+s*o*d-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=m*l-u*d,v=u*h-m*o,E=d*o-l*h,w=t*_+i*v+s*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=_*x,e[1]=(s*d-m*i)*x,e[2]=(u*i-s*l)*x,e[3]=v*x,e[4]=(m*t-s*h)*x,e[5]=(s*o-u*t)*x,e[6]=E*x,e[7]=(i*h-d*t)*x,e[8]=(l*t-i*o)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),d=Math.sin(o);return this.set(i*h,i*d,-i*(h*l+d*u)+l+e,-s*d,s*h,-s*(-d*l+h*u)+u+t,0,0,1),this}scale(e,t){return this.premultiply(kk.makeScale(e,t)),this}rotate(e){return this.premultiply(kk.makeRotation(-e)),this}translate(e,t){return this.premultiply(kk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const kk=new n_;function Mq(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function UL(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const pU={};function WW(n){n in pU||(pU[n]=!0,console.warn(n))}const fU=new n_().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),mU=new n_().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Nx={[pB]:{transfer:BL,primaries:uU,toReference:n=>n,fromReference:n=>n},[X_]:{transfer:lU,primaries:uU,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[GW]:{transfer:BL,primaries:cU,toReference:n=>n.applyMatrix3(mU),fromReference:n=>n.applyMatrix3(fU)},[uq]:{transfer:lU,primaries:cU,toReference:n=>n.convertSRGBToLinear().applyMatrix3(mU),fromReference:n=>n.applyMatrix3(fU).convertLinearToSRGB()}},Aq=new Set([pB,GW]),Xm={enabled:!0,_workingColorSpace:pB,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Aq.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Nx[e].toReference,s=Nx[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Nx[n].primaries},getTransfer:function(n){return n===HW?BL:Nx[n].transfer}};function mT(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Ok(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let e1;class Iq{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{e1===void 0&&(e1=UL("canvas")),e1.width=e.width,e1.height=e.height;const i=e1.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=e1}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=UL("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=mT(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(mT(t[i]/255)*255):t[i]=mT(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Rq=0;class kq{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Rq++}),this.uuid=cg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(Lk(s[l].image)):o.push(Lk(s[l]))}else o=Lk(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function Lk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Iq.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Oq=0;class $f extends pI{constructor(e=$f.DEFAULT_IMAGE,t=$f.DEFAULT_MAPPING,i=V$,s=V$,o=uB,l=cB,u=dB,h=UW,d=$f.DEFAULT_ANISOTROPY,m=HW){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Oq++}),this.uuid=cg(),this.name="",this.source=new kq(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Dl(0,0),this.repeat=new Dl(1,1),this.center=new Dl(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new n_,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==FW)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case NS:e.x=e.x-Math.floor(e.x);break;case V$:e.x=e.x<0?0:1;break;case DL:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case NS:e.y=e.y-Math.floor(e.y);break;case V$:e.y=e.y<0?0:1;break;case DL:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}$f.DEFAULT_IMAGE=null;$f.DEFAULT_MAPPING=FW;$f.DEFAULT_ANISOTROPY=1;class fm{constructor(e=0,t=0,i=0,s=1){fm.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const h=e.elements,d=h[0],m=h[4],_=h[8],v=h[1],E=h[5],w=h[9],x=h[2],A=h[6],O=h[10];if(Math.abs(m-v)<.01&&Math.abs(_-x)<.01&&Math.abs(w-A)<.01){if(Math.abs(m+v)<.1&&Math.abs(_+x)<.1&&Math.abs(w+A)<.1&&Math.abs(d+E+O-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(d+1)/2,D=(E+1)/2,U=(O+1)/2,F=(m+v)/4,H=(_+x)/4,z=(w+A)/4;return N>D&&N>U?N<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(N),s=F/i,o=H/i):D>U?D<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(D),i=F/s,o=z/s):U<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(U),i=H/o,s=z/o),this.set(i,s,o,t),this}let k=Math.sqrt((A-w)*(A-w)+(_-x)*(_-x)+(v-m)*(v-m));return Math.abs(k)<.001&&(k=1),this.x=(A-w)/k,this.y=(_-x)/k,this.z=(v-m)/k,this.w=Math.acos((d+E+O-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Go{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],d=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],E=o[l+1],w=o[l+2],x=o[l+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=E,e[t+2]=w,e[t+3]=x;return}if(_!==x||h!==v||d!==E||m!==w){let A=1-u;const O=h*v+d*E+m*w+_*x,k=O>=0?1:-1,N=1-O*O;if(N>Number.EPSILON){const U=Math.sqrt(N),F=Math.atan2(U,O*k);A=Math.sin(A*F)/U,u=Math.sin(u*F)/U}const D=u*k;if(h=h*A+v*D,d=d*A+E*D,m=m*A+w*D,_=_*A+x*D,A===1-u){const U=1/Math.sqrt(h*h+d*d+m*m+_*_);h*=U,d*=U,m*=U,_*=U}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],d=i[s+2],m=i[s+3],_=o[l],v=o[l+1],E=o[l+2],w=o[l+3];return e[t]=u*w+m*_+h*E-d*v,e[t+1]=h*w+m*v+d*_-u*E,e[t+2]=d*w+m*E+u*v-h*_,e[t+3]=m*w-u*_-h*v-d*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,d=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),E=h(s/2),w=h(o/2);switch(l){case"XYZ":this._x=v*m*_+d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_-v*E*w;break;case"YXZ":this._x=v*m*_+d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_+v*E*w;break;case"ZXY":this._x=v*m*_-d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_-v*E*w;break;case"ZYX":this._x=v*m*_-d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_+v*E*w;break;case"YZX":this._x=v*m*_+d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_-v*E*w;break;case"XZY":this._x=v*m*_-d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_+v*E*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],d=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const E=.5/Math.sqrt(v+1);this._w=.25/E,this._x=(m-h)*E,this._y=(o-d)*E,this._z=(l-s)*E}else if(i>u&&i>_){const E=2*Math.sqrt(1+i-u-_);this._w=(m-h)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+d)/E}else if(u>_){const E=2*Math.sqrt(1+u-i-_);this._w=(o-d)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(h+m)/E}else{const E=2*Math.sqrt(1+_-i-u);this._w=(l-s)/E,this._x=(o+d)/E,this._y=(h+m)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cd(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,d=t._z,m=t._w;return this._x=i*m+l*u+s*d-o*h,this._y=s*m+l*h+o*u-i*d,this._z=o*m+l*d+i*h-s*u,this._w=l*m-i*u-s*h-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this}const d=Math.sqrt(h),m=Math.atan2(d,u),_=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Mt{constructor(e=0,t=0,i=0){Mt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(gU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(gU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,d=2*(l*s-u*i),m=2*(u*t-o*s),_=2*(o*i-l*t);return this.x=t+h*d+l*_-u*m,this.y=i+h*m+u*d-o*_,this.z=s+h*_+o*m-l*d,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Dk.copy(this).projectOnVector(e),this.sub(Dk)}reflect(e){return this.sub(Dk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Cd(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dk=new Mt,gU=new Go;class r_{constructor(e=new Mt(1/0,1/0,1/0),t=new Mt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ym.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ym.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ym.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let l=0,u=o.count;l<u;l++)e.isMesh===!0?e.getVertexPosition(l,Ym):Ym.fromBufferAttribute(o,l),Ym.applyMatrix4(e.matrixWorld),this.expandByPoint(Ym);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Bx.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Bx.copy(i.boundingBox)),Bx.applyMatrix4(e.matrixWorld),this.union(Bx)}const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ym),Ym.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(u$),Px.subVectors(this.max,u$),t1.subVectors(e.a,u$),n1.subVectors(e.b,u$),r1.subVectors(e.c,u$),M_.subVectors(n1,t1),A_.subVectors(r1,n1),Zv.subVectors(t1,r1);let t=[0,-M_.z,M_.y,0,-A_.z,A_.y,0,-Zv.z,Zv.y,M_.z,0,-M_.x,A_.z,0,-A_.x,Zv.z,0,-Zv.x,-M_.y,M_.x,0,-A_.y,A_.x,0,-Zv.y,Zv.x,0];return!Nk(t,t1,n1,r1,Px)||(t=[1,0,0,0,1,0,0,0,1],!Nk(t,t1,n1,r1,Px))?!1:(Fx.crossVectors(M_,A_),t=[Fx.x,Fx.y,Fx.z],Nk(t,t1,n1,r1,Px))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ym).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ym).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(S0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),S0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),S0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),S0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),S0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),S0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),S0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),S0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(S0),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const S0=[new Mt,new Mt,new Mt,new Mt,new Mt,new Mt,new Mt,new Mt],Ym=new Mt,Bx=new r_,t1=new Mt,n1=new Mt,r1=new Mt,M_=new Mt,A_=new Mt,Zv=new Mt,u$=new Mt,Px=new Mt,Fx=new Mt,ey=new Mt;function Nk(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){ey.fromArray(n,o);const u=s.x*Math.abs(ey.x)+s.y*Math.abs(ey.y)+s.z*Math.abs(ey.z),h=e.dot(ey),d=t.dot(ey),m=i.dot(ey);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>u)return!1}return!0}const Lq=new r_,c$=new Mt,Bk=new Mt;class r0{constructor(e=new Mt,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Lq.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;c$.subVectors(e,this.center);const t=c$.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(c$,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Bk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(c$.copy(e.center).add(Bk)),this.expandByPoint(c$.copy(e.center).sub(Bk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const w0=new Mt,Pk=new Mt,Ux=new Mt,I_=new Mt,Fk=new Mt,zx=new Mt,Uk=new Mt;class fI{constructor(e=new Mt,t=new Mt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,w0)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=w0.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(w0.copy(this.origin).addScaledVector(this.direction,t),w0.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Pk.copy(e).add(t).multiplyScalar(.5),Ux.copy(t).sub(e).normalize(),I_.copy(this.origin).sub(Pk);const o=e.distanceTo(t)*.5,l=-this.direction.dot(Ux),u=I_.dot(this.direction),h=-I_.dot(Ux),d=I_.lengthSq(),m=Math.abs(1-l*l);let _,v,E,w;if(m>0)if(_=l*h-u,v=l*u-h,w=o*m,_>=0)if(v>=-w)if(v<=w){const x=1/m;_*=x,v*=x,E=_*(_+l*v+2*u)+v*(l*_+v+2*h)+d}else v=o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;else v=-o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;else v<=-w?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+d):v<=w?(_=0,v=Math.min(Math.max(-o,-h),o),E=v*(v+2*h)+d):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+d);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,_),s&&s.copy(Pk).addScaledVector(Ux,v),E}intersectSphere(e,t){w0.subVectors(e.center,this.origin);const i=w0.dot(this.direction),s=w0.dot(w0)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const d=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return d>=0?(i=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(i=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||isNaN(i))&&(i=o),(l<s||isNaN(s))&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,w0)!==null}intersectTriangle(e,t,i,s,o){Fk.subVectors(t,e),zx.subVectors(i,e),Uk.crossVectors(Fk,zx);let l=this.direction.dot(Uk),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;I_.subVectors(this.origin,e);const h=u*this.direction.dot(zx.crossVectors(I_,zx));if(h<0)return null;const d=u*this.direction.dot(Fk.cross(I_));if(d<0||h+d>l)return null;const m=-u*I_.dot(Uk);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ji{constructor(e,t,i,s,o,l,u,h,d,m,_,v,E,w,x,A){Ji.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,l,u,h,d,m,_,v,E,w,x,A)}set(e,t,i,s,o,l,u,h,d,m,_,v,E,w,x,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=i,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=d,O[6]=m,O[10]=_,O[14]=v,O[3]=E,O[7]=w,O[11]=x,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ji().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/i1.setFromMatrixColumn(e,0).length(),o=1/i1.setFromMatrixColumn(e,1).length(),l=1/i1.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=-h*_,t[8]=d,t[1]=E+w*d,t[5]=v-x*d,t[9]=-u*h,t[2]=x-v*d,t[6]=w+E*d,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,E=h*_,w=d*m,x=d*_;t[0]=v+x*u,t[4]=w*u-E,t[8]=l*d,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=E*u-w,t[6]=x+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,E=h*_,w=d*m,x=d*_;t[0]=v-x*u,t[4]=-l*_,t[8]=w+E*u,t[1]=E+w*u,t[5]=l*m,t[9]=x-v*u,t[2]=-l*d,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=w*d-E,t[8]=v*d+x,t[1]=h*_,t[5]=x*d+v,t[9]=E*d-w,t[2]=-d,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,E=l*d,w=u*h,x=u*d;t[0]=h*m,t[4]=x-v*_,t[8]=w*_+E,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-d*m,t[6]=E*_+w,t[10]=v-x*_}else if(e.order==="XZY"){const v=l*h,E=l*d,w=u*h,x=u*d;t[0]=h*m,t[4]=-_,t[8]=d*m,t[1]=v*_+x,t[5]=l*m,t[9]=E*_-w,t[2]=w*_-E,t[6]=u*m,t[10]=x*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Dq,e,Nq)}lookAt(e,t,i){const s=this.elements;return df.subVectors(e,t),df.lengthSq()===0&&(df.z=1),df.normalize(),R_.crossVectors(i,df),R_.lengthSq()===0&&(Math.abs(i.z)===1?df.x+=1e-4:df.z+=1e-4,df.normalize(),R_.crossVectors(i,df)),R_.normalize(),Hx.crossVectors(df,R_),s[0]=R_.x,s[4]=Hx.x,s[8]=df.x,s[1]=R_.y,s[5]=Hx.y,s[9]=df.y,s[2]=R_.z,s[6]=Hx.z,s[10]=df.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],d=i[12],m=i[1],_=i[5],v=i[9],E=i[13],w=i[2],x=i[6],A=i[10],O=i[14],k=i[3],N=i[7],D=i[11],U=i[15],F=s[0],H=s[4],z=s[8],J=s[12],te=s[1],re=s[5],ie=s[9],de=s[13],oe=s[2],ue=s[6],ge=s[10],Ae=s[14],j=s[3],Z=s[7],ne=s[11],le=s[15];return o[0]=l*F+u*te+h*oe+d*j,o[4]=l*H+u*re+h*ue+d*Z,o[8]=l*z+u*ie+h*ge+d*ne,o[12]=l*J+u*de+h*Ae+d*le,o[1]=m*F+_*te+v*oe+E*j,o[5]=m*H+_*re+v*ue+E*Z,o[9]=m*z+_*ie+v*ge+E*ne,o[13]=m*J+_*de+v*Ae+E*le,o[2]=w*F+x*te+A*oe+O*j,o[6]=w*H+x*re+A*ue+O*Z,o[10]=w*z+x*ie+A*ge+O*ne,o[14]=w*J+x*de+A*Ae+O*le,o[3]=k*F+N*te+D*oe+U*j,o[7]=k*H+N*re+D*ue+U*Z,o[11]=k*z+N*ie+D*ge+U*ne,o[15]=k*J+N*de+D*Ae+U*le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],d=e[13],m=e[2],_=e[6],v=e[10],E=e[14],w=e[3],x=e[7],A=e[11],O=e[15];return w*(+o*h*_-s*d*_-o*u*v+i*d*v+s*u*E-i*h*E)+x*(+t*h*E-t*d*v+o*l*v-s*l*E+s*d*m-o*h*m)+A*(+t*d*_-t*u*E-o*l*_+i*l*E+o*u*m-i*d*m)+O*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=e[9],v=e[10],E=e[11],w=e[12],x=e[13],A=e[14],O=e[15],k=_*A*d-x*v*d+x*h*E-u*A*E-_*h*O+u*v*O,N=w*v*d-m*A*d-w*h*E+l*A*E+m*h*O-l*v*O,D=m*x*d-w*_*d+w*u*E-l*x*E-m*u*O+l*_*O,U=w*_*h-m*x*h-w*u*v+l*x*v+m*u*A-l*_*A,F=t*k+i*N+s*D+o*U;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/F;return e[0]=k*H,e[1]=(x*v*o-_*A*o-x*s*E+i*A*E+_*s*O-i*v*O)*H,e[2]=(u*A*o-x*h*o+x*s*d-i*A*d-u*s*O+i*h*O)*H,e[3]=(_*h*o-u*v*o-_*s*d+i*v*d+u*s*E-i*h*E)*H,e[4]=N*H,e[5]=(m*A*o-w*v*o+w*s*E-t*A*E-m*s*O+t*v*O)*H,e[6]=(w*h*o-l*A*o-w*s*d+t*A*d+l*s*O-t*h*O)*H,e[7]=(l*v*o-m*h*o+m*s*d-t*v*d-l*s*E+t*h*E)*H,e[8]=D*H,e[9]=(w*_*o-m*x*o-w*i*E+t*x*E+m*i*O-t*_*O)*H,e[10]=(l*x*o-w*u*o+w*i*d-t*x*d-l*i*O+t*u*O)*H,e[11]=(m*u*o-l*_*o-m*i*d+t*_*d+l*i*E-t*u*E)*H,e[12]=U*H,e[13]=(m*x*s-w*_*s+w*i*v-t*x*v-m*i*A+t*_*A)*H,e[14]=(w*u*s-l*x*s-w*i*h+t*x*h+l*i*A-t*u*A)*H,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*H,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,d=o*l,m=o*u;return this.set(d*l+i,d*u-s*h,d*h+s*u,0,d*u+s*h,m*u+i,m*h-s*l,0,d*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,d=o+o,m=l+l,_=u+u,v=o*d,E=o*m,w=o*_,x=l*m,A=l*_,O=u*_,k=h*d,N=h*m,D=h*_,U=i.x,F=i.y,H=i.z;return s[0]=(1-(x+O))*U,s[1]=(E+D)*U,s[2]=(w-N)*U,s[3]=0,s[4]=(E-D)*F,s[5]=(1-(v+O))*F,s[6]=(A+k)*F,s[7]=0,s[8]=(w+N)*H,s[9]=(A-k)*H,s[10]=(1-(v+x))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=i1.set(s[0],s[1],s[2]).length();const l=i1.set(s[4],s[5],s[6]).length(),u=i1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Km.copy(this);const d=1/o,m=1/l,_=1/u;return Km.elements[0]*=d,Km.elements[1]*=d,Km.elements[2]*=d,Km.elements[4]*=m,Km.elements[5]*=m,Km.elements[6]*=m,Km.elements[8]*=_,Km.elements[9]*=_,Km.elements[10]*=_,t.setFromRotationMatrix(Km),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l,u=Oy){const h=this.elements,d=2*o/(t-e),m=2*o/(i-s),_=(t+e)/(t-e),v=(i+s)/(i-s);let E,w;if(u===Oy)E=-(l+o)/(l-o),w=-2*l*o/(l-o);else if(u===FL)E=-l/(l-o),w=-l*o/(l-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=d,h[4]=0,h[8]=_,h[12]=0,h[1]=0,h[5]=m,h[9]=v,h[13]=0,h[2]=0,h[6]=0,h[10]=E,h[14]=w,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,s,o,l,u=Oy){const h=this.elements,d=1/(t-e),m=1/(i-s),_=1/(l-o),v=(t+e)*d,E=(i+s)*m;let w,x;if(u===Oy)w=(l+o)*_,x=-2*_;else if(u===FL)w=o*_,x=-1*_;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=2*d,h[4]=0,h[8]=0,h[12]=-v,h[1]=0,h[5]=2*m,h[9]=0,h[13]=-E,h[2]=0,h[6]=0,h[10]=x,h[14]=-w,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const i1=new Mt,Km=new Ji,Dq=new Mt(0,0,0),Nq=new Mt(1,1,1),R_=new Mt,Hx=new Mt,df=new Mt,_U=new Ji,vU=new Go;class _b{constructor(e=0,t=0,i=0,s=_b.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],d=s[5],m=s[9],_=s[2],v=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(Cd(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Cd(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Cd(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,E),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Cd(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,E),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Cd(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-Cd(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return _U.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_U,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return vU.setFromEuler(this),this.setFromQuaternion(vU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_b.DEFAULT_ORDER="XYZ";class CM{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Bq=0;const yU=new Mt,s1=new Go,x0=new Ji,Gx=new Mt,h$=new Mt,Pq=new Mt,Fq=new Go,bU=new Mt(1,0,0),TU=new Mt(0,1,0),EU=new Mt(0,0,1),Uq={type:"added"},zq={type:"removed"},zk={type:"childadded",child:null},Hk={type:"childremoved",child:null};class Hu extends pI{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Bq++}),this.uuid=cg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hu.DEFAULT_UP.clone();const e=new Mt,t=new _b,i=new Go,s=new Mt(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ji},normalMatrix:{value:new n_}}),this.matrix=new Ji,this.matrixWorld=new Ji,this.matrixAutoUpdate=Hu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Hu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new CM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return s1.setFromAxisAngle(e,t),this.quaternion.multiply(s1),this}rotateOnWorldAxis(e,t){return s1.setFromAxisAngle(e,t),this.quaternion.premultiply(s1),this}rotateX(e){return this.rotateOnAxis(bU,e)}rotateY(e){return this.rotateOnAxis(TU,e)}rotateZ(e){return this.rotateOnAxis(EU,e)}translateOnAxis(e,t){return yU.copy(e).applyQuaternion(this.quaternion),this.position.add(yU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bU,e)}translateY(e){return this.translateOnAxis(TU,e)}translateZ(e){return this.translateOnAxis(EU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(x0.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Gx.copy(e):Gx.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),h$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?x0.lookAt(h$,Gx,this.up):x0.lookAt(Gx,h$,this.up),this.quaternion.setFromRotationMatrix(x0),s&&(x0.extractRotation(s.matrixWorld),s1.setFromRotationMatrix(x0),this.quaternion.premultiply(s1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Uq),zk.child=e,this.dispatchEvent(zk),zk.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zq),Hk.child=e,this.dispatchEvent(Hk),Hk.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),x0.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),x0.multiply(e.parent.matrixWorld)),e.applyMatrix4(x0),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(h$,e,Pq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(h$,Fq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++){const o=t[i];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];u.matrixWorldAutoUpdate===!0&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(u=>({boxInitialized:u.boxInitialized,boxMin:u.box.min.toArray(),boxMax:u.box.max.toArray(),sphereInitialized:u.sphereInitialized,sphereRadius:u.sphere.radius,sphereCenter:u.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const _=h[d];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,d=this.material.length;h<d;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),d=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),E=l(e.animations),w=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),E.length>0&&(i.animations=E),w.length>0&&(i.nodes=w)}return i.object=s,i;function l(u){const h=[];for(const d in u){const m=u[d];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Hu.DEFAULT_UP=new Mt(0,1,0);Hu.DEFAULT_MATRIX_AUTO_UPDATE=!0;Hu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jm=new Mt,C0=new Mt,Gk=new Mt,M0=new Mt,o1=new Mt,a1=new Mt,$U=new Mt,Wk=new Mt,Vk=new Mt,jk=new Mt;class Wg{constructor(e=new Mt,t=new Mt,i=new Mt){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Jm.subVectors(e,t),s.cross(Jm);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Jm.subVectors(s,t),C0.subVectors(i,t),Gk.subVectors(e,t);const l=Jm.dot(Jm),u=Jm.dot(C0),h=Jm.dot(Gk),d=C0.dot(C0),m=C0.dot(Gk),_=l*d-u*u;if(_===0)return o.set(0,0,0),null;const v=1/_,E=(d*h-u*m)*v,w=(l*m-u*h)*v;return o.set(1-E-w,w,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,M0)===null?!1:M0.x>=0&&M0.y>=0&&M0.x+M0.y<=1}static getInterpolation(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,M0)===null?(h.x=0,h.y=0,"z"in h&&(h.z=0),"w"in h&&(h.w=0),null):(h.setScalar(0),h.addScaledVector(o,M0.x),h.addScaledVector(l,M0.y),h.addScaledVector(u,M0.z),h)}static isFrontFacing(e,t,i,s){return Jm.subVectors(i,t),C0.subVectors(e,t),Jm.cross(C0).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Jm.subVectors(this.c,this.b),C0.subVectors(this.a,this.b),Jm.cross(C0).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wg.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return Wg.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return Wg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;o1.subVectors(s,i),a1.subVectors(o,i),Wk.subVectors(e,i);const h=o1.dot(Wk),d=a1.dot(Wk);if(h<=0&&d<=0)return t.copy(i);Vk.subVectors(e,s);const m=o1.dot(Vk),_=a1.dot(Vk);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*d;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(o1,l);jk.subVectors(e,o);const E=o1.dot(jk),w=a1.dot(jk);if(w>=0&&E<=w)return t.copy(o);const x=E*d-h*w;if(x<=0&&d>=0&&w<=0)return u=d/(d-w),t.copy(i).addScaledVector(a1,u);const A=m*w-E*_;if(A<=0&&_-m>=0&&E-w>=0)return $U.subVectors(o,s),u=(_-m)/(_-m+(E-w)),t.copy(s).addScaledVector($U,u);const O=1/(A+x+v);return l=x*O,u=v*O,t.copy(i).addScaledVector(o1,l).addScaledVector(a1,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const VW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},k_={h:0,s:0,l:0},Wx={h:0,s:0,l:0};function Xk(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class fc{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=X_){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Xm.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=Xm.workingColorSpace){return this.r=e,this.g=t,this.b=i,Xm.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=Xm.workingColorSpace){if(e=fB(e,1),t=Cd(t,0,1),i=Cd(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=Xk(l,o,e+1/3),this.g=Xk(l,o,e),this.b=Xk(l,o,e-1/3)}return Xm.toWorkingColorSpace(this,s),this}setStyle(e,t=X_){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=X_){const i=VW[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=mT(e.r),this.g=mT(e.g),this.b=mT(e.b),this}copyLinearToSRGB(e){return this.r=Ok(e.r),this.g=Ok(e.g),this.b=Ok(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=X_){return Xm.fromWorkingColorSpace(bd.copy(this),e),Math.round(Cd(bd.r*255,0,255))*65536+Math.round(Cd(bd.g*255,0,255))*256+Math.round(Cd(bd.b*255,0,255))}getHexString(e=X_){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Xm.workingColorSpace){Xm.fromWorkingColorSpace(bd.copy(this),t);const i=bd.r,s=bd.g,o=bd.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,d;const m=(u+l)/2;if(u===l)h=0,d=0;else{const _=l-u;switch(d=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=d,e.l=m,e}getRGB(e,t=Xm.workingColorSpace){return Xm.fromWorkingColorSpace(bd.copy(this),t),e.r=bd.r,e.g=bd.g,e.b=bd.b,e}getStyle(e=X_){Xm.fromWorkingColorSpace(bd.copy(this),e);const t=bd.r,i=bd.g,s=bd.b;return e!==X_?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(k_),this.setHSL(k_.h+e,k_.s+t,k_.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(k_),e.getHSL(Wx);const i=uS(k_.h,Wx.h,t),s=uS(k_.s,Wx.s,t),o=uS(k_.l,Wx.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const bd=new fc;fc.NAMES=VW;let Hq=0;class dv extends pI{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Hq++}),this.uuid=cg(),this.name="",this.type="Material",this.blending=q3,this.side=TA,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=eU,this.blendDst=tU,this.blendEquation=Z3,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new fc(0,0,0),this.blendAlpha=0,this.depthFunc=nU,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=hU,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zb,this.stencilZFail=Zb,this.stencilZPass=Zb,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==q3&&(i.blending=this.blending),this.side!==TA&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==eU&&(i.blendSrc=this.blendSrc),this.blendDst!==tU&&(i.blendDst=this.blendDst),this.blendEquation!==Z3&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==nU&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==hU&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zb&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Zb&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Zb&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class rT extends dv{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fc(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _b,this.combine=qQ,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const lc=new Mt,Vx=new Dl;class Sf{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=PL,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=hB,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return WW("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Vx.fromBufferAttribute(this,t),Vx.applyMatrix3(e),this.setXY(t,Vx.x,Vx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)lc.fromBufferAttribute(this,t),lc.applyMatrix3(e),this.setXYZ(t,lc.x,lc.y,lc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)lc.fromBufferAttribute(this,t),lc.applyMatrix4(e),this.setXYZ(t,lc.x,lc.y,lc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)lc.fromBufferAttribute(this,t),lc.applyNormalMatrix(e),this.setXYZ(t,lc.x,lc.y,lc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)lc.fromBufferAttribute(this,t),lc.transformDirection(e),this.setXYZ(t,lc.x,lc.y,lc.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ig(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=po(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ig(t,this.array)),t}setX(e,t){return this.normalized&&(t=po(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ig(t,this.array)),t}setY(e,t){return this.normalized&&(t=po(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ig(t,this.array)),t}setZ(e,t){return this.normalized&&(t=po(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ig(t,this.array)),t}setW(e,t){return this.normalized&&(t=po(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=po(t,this.array),i=po(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=po(t,this.array),i=po(i,this.array),s=po(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=po(t,this.array),i=po(i,this.array),s=po(s,this.array),o=po(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==PL&&(e.usage=this.usage),e}}class Gq extends Sf{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Wq extends Sf{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class mB extends Sf{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Vq=0;const rm=new Ji,Yk=new Hu,l1=new Mt,pf=new r_,d$=new r_,uh=new Mt;class Cv extends pI{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Vq++}),this.uuid=cg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Mq(e)?Wq:Gq)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new n_().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return rm.makeRotationFromQuaternion(e),this.applyMatrix4(rm),this}rotateX(e){return rm.makeRotationX(e),this.applyMatrix4(rm),this}rotateY(e){return rm.makeRotationY(e),this.applyMatrix4(rm),this}rotateZ(e){return rm.makeRotationZ(e),this.applyMatrix4(rm),this}translate(e,t,i){return rm.makeTranslation(e,t,i),this.applyMatrix4(rm),this}scale(e,t,i){return rm.makeScale(e,t,i),this.applyMatrix4(rm),this}lookAt(e){return Yk.lookAt(e),Yk.updateMatrix(),this.applyMatrix4(Yk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(l1).negate(),this.translate(l1.x,l1.y,l1.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new mB(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new r_);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Mt(-1/0,-1/0,-1/0),new Mt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];pf.setFromBufferAttribute(o),this.morphTargetsRelative?(uh.addVectors(this.boundingBox.min,pf.min),this.boundingBox.expandByPoint(uh),uh.addVectors(this.boundingBox.max,pf.max),this.boundingBox.expandByPoint(uh)):(this.boundingBox.expandByPoint(pf.min),this.boundingBox.expandByPoint(pf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new r0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Mt,1/0);return}if(e){const i=this.boundingSphere.center;if(pf.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];d$.setFromBufferAttribute(u),this.morphTargetsRelative?(uh.addVectors(pf.min,d$.min),pf.expandByPoint(uh),uh.addVectors(pf.max,d$.max),pf.expandByPoint(uh)):(pf.expandByPoint(d$.min),pf.expandByPoint(d$.max))}pf.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)uh.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(uh));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let d=0,m=u.count;d<m;d++)uh.fromBufferAttribute(u,d),h&&(l1.fromBufferAttribute(e,d),uh.add(l1)),s=Math.max(s,i.distanceToSquared(uh))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Sf(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),u=[],h=[];for(let z=0;z<i.count;z++)u[z]=new Mt,h[z]=new Mt;const d=new Mt,m=new Mt,_=new Mt,v=new Dl,E=new Dl,w=new Dl,x=new Mt,A=new Mt;function O(z,J,te){d.fromBufferAttribute(i,z),m.fromBufferAttribute(i,J),_.fromBufferAttribute(i,te),v.fromBufferAttribute(o,z),E.fromBufferAttribute(o,J),w.fromBufferAttribute(o,te),m.sub(d),_.sub(d),E.sub(v),w.sub(v);const re=1/(E.x*w.y-w.x*E.y);isFinite(re)&&(x.copy(m).multiplyScalar(w.y).addScaledVector(_,-E.y).multiplyScalar(re),A.copy(_).multiplyScalar(E.x).addScaledVector(m,-w.x).multiplyScalar(re),u[z].add(x),u[J].add(x),u[te].add(x),h[z].add(A),h[J].add(A),h[te].add(A))}let k=this.groups;k.length===0&&(k=[{start:0,count:e.count}]);for(let z=0,J=k.length;z<J;++z){const te=k[z],re=te.start,ie=te.count;for(let de=re,oe=re+ie;de<oe;de+=3)O(e.getX(de+0),e.getX(de+1),e.getX(de+2))}const N=new Mt,D=new Mt,U=new Mt,F=new Mt;function H(z){U.fromBufferAttribute(s,z),F.copy(U);const J=u[z];N.copy(J),N.sub(U.multiplyScalar(U.dot(J))).normalize(),D.crossVectors(F,J);const re=D.dot(h[z])<0?-1:1;l.setXYZW(z,N.x,N.y,N.z,re)}for(let z=0,J=k.length;z<J;++z){const te=k[z],re=te.start,ie=te.count;for(let de=re,oe=re+ie;de<oe;de+=3)H(e.getX(de+0)),H(e.getX(de+1)),H(e.getX(de+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Sf(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,E=i.count;v<E;v++)i.setXYZ(v,0,0,0);const s=new Mt,o=new Mt,l=new Mt,u=new Mt,h=new Mt,d=new Mt,m=new Mt,_=new Mt;if(e)for(let v=0,E=e.count;v<E;v+=3){const w=e.getX(v+0),x=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,x),d.fromBufferAttribute(i,A),u.add(m),h.add(m),d.add(m),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(x,h.x,h.y,h.z),i.setXYZ(A,d.x,d.y,d.z)}else for(let v=0,E=t.count;v<E;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)uh.fromBufferAttribute(e,t),uh.normalize(),e.setXYZ(t,uh.x,uh.y,uh.z)}toNonIndexed(){function e(u,h){const d=u.array,m=u.itemSize,_=u.normalized,v=new d.constructor(h.length*m);let E=0,w=0;for(let x=0,A=h.length;x<A;x++){u.isInterleavedBufferAttribute?E=h[x]*u.data.stride+u.offset:E=h[x]*m;for(let O=0;O<m;O++)v[w++]=d[E++]}return new Sf(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Cv,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],d=e(h,i);t.setAttribute(u,d)}const o=this.morphAttributes;for(const u in o){const h=[],d=o[u];for(let m=0,_=d.length;m<_;m++){const v=d[m],E=e(v,i);h.push(E)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const d=l[u];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let _=0,v=d.length;_<v;_++){const E=d[_];m.push(E.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const d in s){const m=s[d];this.setAttribute(d,m.clone(t))}const o=e.morphAttributes;for(const d in o){const m=[],_=o[d];for(let v=0,E=_.length;v<E;v++)m.push(_[v].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,m=l.length;d<m;d++){const _=l[d];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const SU=new Ji,ty=new fI,jx=new r0,wU=new Mt,u1=new Mt,c1=new Mt,h1=new Mt,Kk=new Mt,Xx=new Mt,Yx=new Dl,Kx=new Dl,Jx=new Dl,xU=new Mt,CU=new Mt,MU=new Mt,Qx=new Mt,qx=new Mt;class mI extends Hu{constructor(e=new Cv,t=new rT){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const u=this.morphTargetInfluences;if(o&&u){Xx.set(0,0,0);for(let h=0,d=o.length;h<d;h++){const m=u[h],_=o[h];m!==0&&(Kk.fromBufferAttribute(_,e),l?Xx.addScaledVector(Kk,m):Xx.addScaledVector(Kk.sub(t),m))}t.add(Xx)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),jx.copy(i.boundingSphere),jx.applyMatrix4(o),ty.copy(e.ray).recast(e.near),!(jx.containsPoint(ty.origin)===!1&&(ty.intersectSphere(jx,wU)===null||ty.origin.distanceToSquared(wU)>(e.far-e.near)**2))&&(SU.copy(o).invert(),ty.copy(e.ray).applyMatrix4(SU),!(i.boundingBox!==null&&ty.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ty)))}_computeIntersections(e,t,i){let s;const o=this.geometry,l=this.material,u=o.index,h=o.attributes.position,d=o.attributes.uv,m=o.attributes.uv1,_=o.attributes.normal,v=o.groups,E=o.drawRange;if(u!==null)if(Array.isArray(l))for(let w=0,x=v.length;w<x;w++){const A=v[w],O=l[A.materialIndex],k=Math.max(A.start,E.start),N=Math.min(u.count,Math.min(A.start+A.count,E.start+E.count));for(let D=k,U=N;D<U;D+=3){const F=u.getX(D),H=u.getX(D+1),z=u.getX(D+2);s=Zx(this,O,e,i,d,m,_,F,H,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const w=Math.max(0,E.start),x=Math.min(u.count,E.start+E.count);for(let A=w,O=x;A<O;A+=3){const k=u.getX(A),N=u.getX(A+1),D=u.getX(A+2);s=Zx(this,l,e,i,d,m,_,k,N,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}else if(h!==void 0)if(Array.isArray(l))for(let w=0,x=v.length;w<x;w++){const A=v[w],O=l[A.materialIndex],k=Math.max(A.start,E.start),N=Math.min(h.count,Math.min(A.start+A.count,E.start+E.count));for(let D=k,U=N;D<U;D+=3){const F=D,H=D+1,z=D+2;s=Zx(this,O,e,i,d,m,_,F,H,z),s&&(s.faceIndex=Math.floor(D/3),s.face.materialIndex=A.materialIndex,t.push(s))}}else{const w=Math.max(0,E.start),x=Math.min(h.count,E.start+E.count);for(let A=w,O=x;A<O;A+=3){const k=A,N=A+1,D=A+2;s=Zx(this,l,e,i,d,m,_,k,N,D),s&&(s.faceIndex=Math.floor(A/3),t.push(s))}}}}function jq(n,e,t,i,s,o,l,u){let h;if(e.side===JQ?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side===TA,u),h===null)return null;qx.copy(u),qx.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(qx);return d<t.near||d>t.far?null:{distance:d,point:qx.clone(),object:n}}function Zx(n,e,t,i,s,o,l,u,h,d){n.getVertexPosition(u,u1),n.getVertexPosition(h,c1),n.getVertexPosition(d,h1);const m=jq(n,e,t,i,u1,c1,h1,Qx);if(m){s&&(Yx.fromBufferAttribute(s,u),Kx.fromBufferAttribute(s,h),Jx.fromBufferAttribute(s,d),m.uv=Wg.getInterpolation(Qx,u1,c1,h1,Yx,Kx,Jx,new Dl)),o&&(Yx.fromBufferAttribute(o,u),Kx.fromBufferAttribute(o,h),Jx.fromBufferAttribute(o,d),m.uv1=Wg.getInterpolation(Qx,u1,c1,h1,Yx,Kx,Jx,new Dl)),l&&(xU.fromBufferAttribute(l,u),CU.fromBufferAttribute(l,h),MU.fromBufferAttribute(l,d),m.normal=Wg.getInterpolation(Qx,u1,c1,h1,xU,CU,MU,new Mt),m.normal.dot(i.direction)>0&&m.normal.multiplyScalar(-1));const _={a:u,b:h,c:d,normal:new Mt,materialIndex:0};Wg.getNormal(u1,c1,h1,_.normal),m.face=_}return m}class jW extends Hu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ji,this.projectionMatrix=new Ji,this.projectionMatrixInverse=new Ji,this.coordinateSystem=Oy}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const O_=new Mt,AU=new Dl,IU=new Dl;class gB extends jW{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=FS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(lS*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return FS*2*Math.atan(Math.tan(lS*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){O_.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(O_.x,O_.y).multiplyScalar(-e/O_.z),O_.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(O_.x,O_.y).multiplyScalar(-e/O_.z)}getViewSize(e,t){return this.getViewBounds(e,AU,IU),t.subVectors(IU,AU)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(lS*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,d=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/d,s*=l.width/h,i*=l.height/d}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Jk=new Mt,Xq=new Mt,Yq=new n_;class d1{constructor(e=new Mt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=Jk.subVectors(i,t).cross(Xq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Jk),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Yq.getNormalMatrix(e),s=this.coplanarPoint(Jk).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ny=new r0,eC=new Mt;class Kq{constructor(e=new d1,t=new d1,i=new d1,s=new d1,o=new d1,l=new d1){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Oy){const i=this.planes,s=e.elements,o=s[0],l=s[1],u=s[2],h=s[3],d=s[4],m=s[5],_=s[6],v=s[7],E=s[8],w=s[9],x=s[10],A=s[11],O=s[12],k=s[13],N=s[14],D=s[15];if(i[0].setComponents(h-o,v-d,A-E,D-O).normalize(),i[1].setComponents(h+o,v+d,A+E,D+O).normalize(),i[2].setComponents(h+l,v+m,A+w,D+k).normalize(),i[3].setComponents(h-l,v-m,A-w,D-k).normalize(),i[4].setComponents(h-u,v-_,A-x,D-N).normalize(),t===Oy)i[5].setComponents(h+u,v+_,A+x,D+N).normalize();else if(t===FL)i[5].setComponents(u,_,x,N).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ny.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ny.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ny)}intersectsSprite(e){return ny.center.set(0,0,0),ny.radius=.7071067811865476,ny.applyMatrix4(e.matrixWorld),this.intersectsSphere(ny)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(eC.x=s.normal.x>0?e.max.x:e.min.x,eC.y=s.normal.y>0?e.max.y:e.min.y,eC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(eC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class XW extends jW{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Jq extends $f{constructor(e,t,i,s,o,l,u,h,d,m){if(m=m!==void 0?m:Ik,m!==Ik&&m!==iU)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===Ik&&(i=rq),i===void 0&&m===iU&&(i=iq),super(null,s,o,l,u,h,m,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:BS,this.minFilter=h!==void 0?h:BS,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Qq=new Jq(1,1);Qq.compareFunction=cq;class Qk extends Hu{constructor(){super(),this.isGroup=!0,this.type="Group"}}class qq{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=PL,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=cg()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return WW("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cg()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yd=new Mt;class _B{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Yd.fromBufferAttribute(this,t),Yd.applyMatrix4(e),this.setXYZ(t,Yd.x,Yd.y,Yd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Yd.fromBufferAttribute(this,t),Yd.applyNormalMatrix(e),this.setXYZ(t,Yd.x,Yd.y,Yd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Yd.fromBufferAttribute(this,t),Yd.transformDirection(e),this.setXYZ(t,Yd.x,Yd.y,Yd.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ig(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=po(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=po(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=po(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=po(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=po(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ig(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ig(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ig(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ig(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=po(t,this.array),i=po(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=po(t,this.array),i=po(i,this.array),s=po(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=po(t,this.array),i=po(i,this.array),s=po(s,this.array),o=po(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Sf(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new _B(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const RU=new Mt,kU=new fm,OU=new fm,Zq=new Mt,LU=new Ji,tC=new Mt,qk=new r0,DU=new Ji,Zk=new fI;class eZ extends mI{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=rU,this.bindMatrix=new Ji,this.bindMatrixInverse=new Ji,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new r_),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tC),this.boundingBox.expandByPoint(tC)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new r0),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tC),this.boundingSphere.expandByPoint(tC)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),qk.copy(this.boundingSphere),qk.applyMatrix4(s),e.ray.intersectsSphere(qk)!==!1&&(DU.copy(s).invert(),Zk.copy(e.ray).applyMatrix4(DU),!(this.boundingBox!==null&&Zk.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Zk)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fm,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===rU?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ZQ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;kU.fromBufferAttribute(s.attributes.skinIndex,e),OU.fromBufferAttribute(s.attributes.skinWeight,e),RU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=OU.getComponent(o);if(l!==0){const u=kU.getComponent(o);LU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(Zq.copy(RU).applyMatrix4(LU),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class YW extends Hu{constructor(){super(),this.isBone=!0,this.type="Bone"}}class KW extends $f{constructor(e=null,t=1,i=1,s,o,l,u,h,d=BS,m=BS,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const NU=new Ji,tZ=new Ji;class vB{constructor(e=[],t=[]){this.uuid=cg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Ji)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ji;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:tZ;NU.multiplyMatrices(u,t[o]),NU.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new vB(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new KW(t,e,e,dB,hB);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new YW),this.bones.push(l),this.boneInverses.push(new Ji().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class BU extends Sf{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const p1=new Ji,PU=new Ji,nC=[],FU=new r_,nZ=new Ji,p$=new mI,f$=new r0;class rZ extends mI{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new BU(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,nZ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new r_),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,p1),FU.copy(e.boundingBox).applyMatrix4(p1),this.boundingBox.union(FU)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new r0),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,p1),f$.copy(e.boundingSphere).applyMatrix4(p1),this.boundingSphere.union(f$)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,l=e*o+1;for(let u=0;u<i.length;u++)i[u]=s[l+u]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(p$.geometry=this.geometry,p$.material=this.material,p$.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),f$.copy(this.boundingSphere),f$.applyMatrix4(i),e.ray.intersectsSphere(f$)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,p1),PU.multiplyMatrices(i,p1),p$.matrixWorld=PU,p$.raycast(e,nC);for(let l=0,u=nC.length;l<u;l++){const h=nC[l];h.instanceId=o,h.object=this,t.push(h)}nC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new BU(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new KW(new Float32Array(s*this.count),s,this.count,sq,hB));const o=this.morphTexture.source.data.data;let l=0;for(let d=0;d<i.length;d++)l+=i[d];const u=this.geometry.morphTargetsRelative?1:1-l,h=s*e;o[h]=u,o.set(i,h+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class JW extends dv{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fc(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const UU=new Mt,zU=new Mt,HU=new Ji,e2=new fI,rC=new r0;class yB extends Hu{constructor(e=new Cv,t=new JW){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)UU.fromBufferAttribute(t,s-1),zU.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=UU.distanceTo(zU);e.setAttribute("lineDistance",new mB(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rC.copy(i.boundingSphere),rC.applyMatrix4(s),rC.radius+=o,e.ray.intersectsSphere(rC)===!1)return;HU.copy(s).invert(),e2.copy(e.ray).applyMatrix4(HU);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=new Mt,m=new Mt,_=new Mt,v=new Mt,E=this.isLineSegments?2:1,w=i.index,A=i.attributes.position;if(w!==null){const O=Math.max(0,l.start),k=Math.min(w.count,l.start+l.count);for(let N=O,D=k-1;N<D;N+=E){const U=w.getX(N),F=w.getX(N+1);if(d.fromBufferAttribute(A,U),m.fromBufferAttribute(A,F),e2.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(v);z<e.near||z>e.far||t.push({distance:z,point:_.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}else{const O=Math.max(0,l.start),k=Math.min(A.count,l.start+l.count);for(let N=O,D=k-1;N<D;N+=E){if(d.fromBufferAttribute(A,N),m.fromBufferAttribute(A,N+1),e2.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(v);F<e.near||F>e.far||t.push({distance:F,point:_.clone().applyMatrix4(this.matrixWorld),index:N,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}const GU=new Mt,WU=new Mt;class iZ extends yB{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)GU.fromBufferAttribute(t,s),WU.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+GU.distanceTo(WU);e.setAttribute("lineDistance",new mB(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sZ extends yB{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class QW extends dv{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new fc(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VU=new Ji,zL=new fI,iC=new r0,sC=new Mt;class oZ extends Hu{constructor(e=new Cv,t=new QW){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),iC.copy(i.boundingSphere),iC.applyMatrix4(s),iC.radius+=o,e.ray.intersectsSphere(iC)===!1)return;VU.copy(s).invert(),zL.copy(e.ray).applyMatrix4(VU);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=i.index,_=i.attributes.position;if(d!==null){const v=Math.max(0,l.start),E=Math.min(d.count,l.start+l.count);for(let w=v,x=E;w<x;w++){const A=d.getX(w);sC.fromBufferAttribute(_,A),jU(sC,A,h,s,e,t,this)}}else{const v=Math.max(0,l.start),E=Math.min(_.count,l.start+l.count);for(let w=v,x=E;w<x;w++)sC.fromBufferAttribute(_,w),jU(sC,w,h,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,l=s.length;o<l;o++){const u=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=o}}}}}function jU(n,e,t,i,s,o,l){const u=zL.distanceSqToPoint(n);if(u<t){const h=new Mt;zL.closestPointToPoint(n,h),h.applyMatrix4(i);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;o.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class bB extends dv{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new fc(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fc(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lq,this.normalScale=new Dl(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _b,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mv extends bB{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Dl(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Cd(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new fc(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new fc(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new fc(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function oC(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function aZ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function lZ(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function XU(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function qW(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}class Tw{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class uZ extends Tw{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:sU,endingEnd:sU}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case oU:o=e,u=2*t-i;break;case aU:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case oU:l=e,h=2*i-t;break;case aU:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const d=(i-t)*.5,m=this.valueSize;this._weightPrev=d/(t-u),this._weightNext=d/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,E=this._weightNext,w=(i-t)/(s-t),x=w*w,A=x*w,O=-v*A+2*v*x-v*w,k=(1+v)*A+(-1.5-2*v)*x+(-.5+v)*w+1,N=(-1-E)*A+(1.5+E)*x+.5*w,D=E*A-E*x;for(let U=0;U!==u;++U)o[U]=O*l[m+U]+k*l[d+U]+N*l[h+U]+D*l[_+U];return o}}class cZ extends Tw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[d+v]*_+l[h+v]*m;return o}}class hZ extends Tw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class i0{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oC(t,this.TimeBufferType),this.values=oC(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:oC(e.times,Array),values:oC(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new hZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new uZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case PS:t=this.InterpolantFactoryMethodDiscrete;break;case IT:t=this.InterpolantFactoryMethodLinear;break;case Rk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return PS;case this.InterpolantFactoryMethodLinear:return IT;case this.InterpolantFactoryMethodSmooth:return Rk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=i.slice(o,l),this.values=this.values.slice(o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&aZ(s))for(let u=0,h=s.length;u!==h;++u){const d=s[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===Rk,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const d=e[u],m=e[u+1];if(d!==m&&(u!==1||d!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,E=_+i;for(let w=0;w!==i;++w){const x=t[_+w];if(x!==t[v+w]||x!==t[E+w]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let E=0;E!==i;++E)t[v+E]=t[_+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,d=0;d!==i;++d)t[h+d]=t[u+d];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}i0.prototype.TimeBufferType=Float32Array;i0.prototype.ValueBufferType=Float32Array;i0.prototype.DefaultInterpolation=IT;class eE extends i0{}eE.prototype.ValueTypeName="bool";eE.prototype.ValueBufferType=Array;eE.prototype.DefaultInterpolation=PS;eE.prototype.InterpolantFactoryMethodLinear=void 0;eE.prototype.InterpolantFactoryMethodSmooth=void 0;class ZW extends i0{}ZW.prototype.ValueTypeName="color";class US extends i0{}US.prototype.ValueTypeName="number";class dZ extends Tw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let d=e*u;for(let m=d+u;d!==m;d+=4)Go.slerpFlat(o,0,l,d-u,l,d,h);return o}}class ob extends i0{InterpolantFactoryMethodLinear(e){return new dZ(this.times,this.values,this.getValueSize(),e)}}ob.prototype.ValueTypeName="quaternion";ob.prototype.DefaultInterpolation=IT;ob.prototype.InterpolantFactoryMethodSmooth=void 0;class tE extends i0{}tE.prototype.ValueTypeName="string";tE.prototype.ValueBufferType=Array;tE.prototype.DefaultInterpolation=PS;tE.prototype.InterpolantFactoryMethodLinear=void 0;tE.prototype.InterpolantFactoryMethodSmooth=void 0;class zS extends i0{}zS.prototype.ValueTypeName="vector";class pZ{constructor(e,t=-1,i,s=oq){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=cg(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(mZ(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(i0.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],d=[];h.push((u+o-1)%o,u,(u+1)%o),d.push(0,1,0);const m=lZ(h);h=XU(h,1,m),d=XU(d,1,m),!s&&h[0]===0&&(h.push(o),d.push(d[0])),l.push(new US(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(d)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(_,v,E,w,x){if(E.length!==0){const A=[],O=[];qW(E,A,O,w),A.length!==0&&x.push(new _(v,A,O))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let _=0;_<d.length;_++){const v=d[_].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const E={};let w;for(w=0;w<v.length;w++)if(v[w].morphTargets)for(let x=0;x<v[w].morphTargets.length;x++)E[v[w].morphTargets[x]]=-1;for(const x in E){const A=[],O=[];for(let k=0;k!==v[w].morphTargets.length;++k){const N=v[w];A.push(N.time),O.push(N.morphTarget===x?1:0)}s.push(new US(".morphTargetInfluence["+x+"]",A,O))}h=E.length*l}else{const E=".bones["+t[_].name+"]";i(zS,E+".position",v,"pos",s),i(ob,E+".quaternion",v,"rot",s),i(zS,E+".scale",v,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return US;case"vector":case"vector2":case"vector3":case"vector4":return zS;case"color":return ZW;case"quaternion":return ob;case"bool":case"boolean":return eE;case"string":return tE}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function mZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=fZ(n.type);if(n.times===void 0){const t=[],i=[];qW(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const nv={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class gZ{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return d.push(m,_),this},this.removeHandler=function(m){const _=d.indexOf(m);return _!==-1&&d.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=d.length;_<v;_+=2){const E=d[_],w=d[_+1];if(E.global&&(E.lastIndex=0),E.test(m))return w}return null}}}const _Z=new gZ;class vb{constructor(e){this.manager=e!==void 0?e:_Z,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}vb.DEFAULT_MATERIAL_NAME="__DEFAULT";const A0={};class vZ extends Error{constructor(e,t){super(e),this.response=t}}class EA extends vb{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=nv.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(A0[e]!==void 0){A0[e].push({onLoad:t,onProgress:i,onError:s});return}A0[e]=[],A0[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=A0[e],_=d.body.getReader(),v=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),E=v?parseInt(v):0,w=E!==0;let x=0;const A=new ReadableStream({start(O){k();function k(){_.read().then(({done:N,value:D})=>{if(N)O.close();else{x+=D.byteLength;const U=new ProgressEvent("progress",{lengthComputable:w,loaded:x,total:E});for(let F=0,H=m.length;F<H;F++){const z=m[F];z.onProgress&&z.onProgress(U)}O.enqueue(D),k()}})}}});return new Response(A)}else throw new vZ(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return d.json();default:if(u===void 0)return d.text();{const _=/charset="?([^;"\s]*)"?/i.exec(u),v=_&&_[1]?_[1].toLowerCase():void 0,E=new TextDecoder(v);return d.arrayBuffer().then(w=>E.decode(w))}}}).then(d=>{nv.add(e,d);const m=A0[e];delete A0[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onLoad&&E.onLoad(d)}}).catch(d=>{const m=A0[e];if(m===void 0)throw this.manager.itemError(e),d;delete A0[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onError&&E.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yZ extends vb{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=nv.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=UL("img");function h(){m(),nv.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class bZ extends vb{constructor(e){super(e)}load(e,t,i,s){const o=new $f,l=new yZ(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class TB extends Hu{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new fc(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const t2=new Ji,YU=new Mt,KU=new Mt;class EB{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Dl(512,512),this.map=null,this.mapPass=null,this.matrix=new Ji,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kq,this._frameExtents=new Dl(1,1),this._viewportCount=1,this._viewports=[new fm(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;YU.setFromMatrixPosition(e.matrixWorld),t.position.copy(YU),KU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(KU),t.updateMatrixWorld(),t2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(t2),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class TZ extends EB{constructor(){super(new gB(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=FS*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class EZ extends TB{constructor(e,t,i=0,s=Math.PI/3,o=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hu.DEFAULT_UP),this.updateMatrix(),this.target=new Hu,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.map=null,this.shadow=new TZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const JU=new Ji,m$=new Mt,n2=new Mt;class $Z extends EB{constructor(){super(new gB(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Dl(4,2),this._viewportCount=6,this._viewports=[new fm(2,1,1,1),new fm(0,1,1,1),new fm(3,1,1,1),new fm(1,1,1,1),new fm(3,0,1,1),new fm(1,0,1,1)],this._cubeDirections=[new Mt(1,0,0),new Mt(-1,0,0),new Mt(0,0,1),new Mt(0,0,-1),new Mt(0,1,0),new Mt(0,-1,0)],this._cubeUps=[new Mt(0,1,0),new Mt(0,1,0),new Mt(0,1,0),new Mt(0,1,0),new Mt(0,0,1),new Mt(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),m$.setFromMatrixPosition(e.matrixWorld),i.position.copy(m$),n2.copy(i.position),n2.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(n2),i.updateMatrixWorld(),s.makeTranslation(-m$.x,-m$.y,-m$.z),JU.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JU)}}class SZ extends TB{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new $Z}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wZ extends EB{constructor(){super(new XW(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class xZ extends TB{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hu.DEFAULT_UP),this.updateMatrix(),this.target=new Hu,this.shadow=new wZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Vy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class CZ extends vb{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=nv.get(e);if(l!==void 0){if(o.manager.itemStart(e),l.then){l.then(d=>{t&&t(d),o.manager.itemEnd(e)}).catch(d=>{s&&s(d)});return}return setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader;const h=fetch(e,u).then(function(d){return d.blob()}).then(function(d){return createImageBitmap(d,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(d){return nv.add(e,d),t&&t(d),o.manager.itemEnd(e),d}).catch(function(d){s&&s(d),nv.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});nv.add(e,h),o.manager.itemStart(e)}}const $B="\\[\\]\\.:\\/",MZ=new RegExp("["+$B+"]","g"),SB="[^"+$B+"]",AZ="[^"+$B.replace("\\.","")+"]",IZ=/((?:WC+[\/:])*)/.source.replace("WC",SB),RZ=/(WCOD+)?/.source.replace("WCOD",AZ),kZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",SB),OZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",SB),LZ=new RegExp("^"+IZ+RZ+kZ+OZ+"$"),DZ=["material","materials","bones","map"];class NZ{constructor(e,t,i){const s=i||fo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class fo{constructor(e,t,i){this.path=t,this.parsedPath=i||fo.parseTrackName(t),this.node=fo.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new fo.Composite(e,t,i):new fo(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(MZ,"")}static parseTrackName(e){const t=LZ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);DZ.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=fo.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[s];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fo.Composite=NZ;fo.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fo.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fo.prototype.GetterByBindingType=[fo.prototype._getValue_direct,fo.prototype._getValue_array,fo.prototype._getValue_arrayElement,fo.prototype._getValue_toArray];fo.prototype.SetterByBindingTypeAndVersioning=[[fo.prototype._setValue_direct,fo.prototype._setValue_direct_setNeedsUpdate,fo.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fo.prototype._setValue_array,fo.prototype._setValue_array_setNeedsUpdate,fo.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fo.prototype._setValue_arrayElement,fo.prototype._setValue_arrayElement_setNeedsUpdate,fo.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fo.prototype._setValue_fromArray,fo.prototype._setValue_fromArray_setNeedsUpdate,fo.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lB);const r2=180/Math.PI,Pc=Math.PI,MM=.079,i2=2*Math.PI*MM*180/1.5,s2=45,eV=.3725,tV=50*Pc/180,Op=1e3,BZ=1e3,PZ={sxyz:[0,0,0,0],sxyx:[0,0,1,0],sxzy:[0,1,0,0],sxzx:[0,1,1,0],syzx:[1,0,0,0],syzy:[1,0,1,0],syxz:[1,1,0,0],syxy:[1,1,1,0],szxy:[2,0,0,0],szxz:[2,0,1,0],szyx:[2,1,0,0],szyz:[2,1,1,0],rzyx:[0,0,0,1],rxyx:[0,0,1,1],ryzx:[0,1,0,1],rxzx:[0,1,1,1],rxzy:[1,0,0,1],ryzy:[1,0,1,1],rzxy:[1,1,0,1],ryxy:[1,1,1,1],ryxz:[2,0,0,1],rzxz:[2,0,1,1],rxyz:[2,1,0,1],rzyz:[2,1,1,1]},QU=[1,2,0,1];function ca(n,e){return n.length<=0?null:i=>{const s=i>n[n.length-1]?i%n[n.length-1]:i;let o=0;for(let l=0;l<n.length&&n[l]<=s;l++)o=l;return e[o]}}const nV=(n,e="szxy")=>{let[t,i,s]=[...n],[o,l,u,h]=[...PZ[e.toLowerCase()]],d=o+1,m=QU[d+l-1]+1,_=QU[d-l]+1;if(h!==0){let H=[t,s];t=H[1],s=H[0]}l!==0&&(i=-1*i),t=t/2,i=i/2,s=s/2;let v=Math.cos(t),E=Math.sin(t),w=Math.cos(i),x=Math.sin(i),A=Math.cos(s),O=Math.sin(s),k=v*A,N=v*O,D=E*A,U=E*O,F=[null,null,null,null];return u!==0?(F[0]=w*(k-U),F[d]=w*(N+D),F[m]=x*(k+U),F[_]=x*(N-D)):(F[0]=w*k+x*U,F[d]=w*D-x*N,F[m]=w*U+x*k,F[_]=w*N-x*D),l!==0&&(F[m]*=-1),F},FZ=n=>({x:n.x*r2,y:n.y*r2,z:n.z*r2}),AM=n=>{let e=FZ(new _b().setFromQuaternion(new Go(n.x,n.y,n.z,n.w)));return{x:e.x,y:e.y,z:e.z}},N0=(n,e,t)=>{let i=Math.cos(n*.5),s=Math.cos(e*.5),o=Math.cos(t*.5),l=Math.sin(n*.5),u=Math.sin(e*.5),h=Math.sin(t*.5),d=new Go;return d.w=o*i*s+h*l*u,d.x=o*l*s-h*i*u,d.y=o*i*u+h*l*s,d.z=h*i*s-o*l*u,d},rV=n=>n._w===.707&&n._z===.707?Pc/2:n._w===.707&&n._z===-.707?-Pc/2:n._w===-.707&&n._z===.707?3*Pc/4:n._w===-.707&&n._z===-.707?-3*Pc/4:n._z===1?Pc:n._z===-1?-Pc:AM(n).z;function f1(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return console.log(t),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function UZ(n,e){const t={ignoreAttributes:!1,attributeNamePrefix:"@_"},o=new PW.XMLParser(t).parse(n).robot.joint,l={};return(Array.isArray(o)?o:[o]).forEach(h=>{h["@_name"];const d=h.origin,m=h.parent["@_link"],_=h.child["@_link"],v=d["@_xyz"].split(" ").map(Number),E=d["@_rpy"].split(" ").map(Number),w=nV(E,"sxyz");l[_]={frame:m,position:{x:v[0],y:v[1],z:v[2]},rotation:{w:w[0],x:w[1],y:w[2],z:w[3]},scale:{x:1,y:1,z:1}}}),l.base_link={frame:"world",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},console.log(l),l}function zZ(n){const e={ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0},i=new PW.XMLParser(e).parse(n),s=i.robot.link,o=i.robot.material,l={},u={};return o&&(Array.isArray(o)?o:[o]).forEach(m=>{const _=m["@_name"],v=m.color["@_rgba"].split(" ").map(Number);u[_]={r:v[0],g:v[1],b:v[2],a:v[3]}}),(Array.isArray(s)?s:[s]).forEach(d=>{var w,x;const m=d["@_name"],_=d.visual;let v=null,E=null;if((w=_==null?void 0:_.geometry)!=null&&w.mesh&&(v=_.geometry.mesh["@_filename"],E=(x=_.geometry.mesh["@_scale"])==null?void 0:x.split(" ").map(Number)),m&&_&&v){if(_.material.color){let N=_.material.color["@_rgba"].split(" ").map(Number);N[0],N[1],N[2],N[3]}else _.material["@_name"]&&u[_.material["@_name"]]&&u[_.material["@_name"]];const A=_.origin["@_xyz"].split(" ").map(Number),O=_.origin["@_rpy"].split(" ").map(Number),k=nV(O,"sxyz");l[m]={shape:v,name:m,frame:m,position:{x:A[0],y:A[1],z:A[2]},rotation:{w:k[0],x:k[1],y:k[2],z:k[3]},color:{r:.7*255,g:.7*255,b:.7*255,a:1},scale:E?{x:E[0],y:E[1],z:E[2]}:{x:1,y:1,z:1},highlight:"false"}}}),l}class HZ{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=GZ.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}reset_elapsed(){return this._elapsed=0,this}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function GZ(){document.hidden===!1&&this.reset()}const WZ={Left:"LEFT_ARM_CONNECTOR_1",Right:"RIGHT_ARM_CONNECTOR_1",Head:"HEAD_1",Neck:"NECK_GLOBE_BASE_1",Base:"base_link"},Pr=n=>WZ[n],o2={camera_link:{frame:"HEAD_1",position:{x:null,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},imu_sensor_link:{frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_LEFT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},REAR_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.075191,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},MIDDLE_RIGHT_WHEEL_1:{frame:"base_link",position:{x:-.006691,y:-.060225,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BODY_BASE_CONNECTOR_1:{frame:"base_link",position:{x:-.263414,y:-.061691,z:.210284},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_RIGHT_COVER_1:{frame:"base_link",position:{x:.062309,y:-.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_LEFT_COVER_1:{frame:"base_link",position:{x:.062309,y:.045,z:.074646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BASE_FRONT_GRILL_1:{frame:"base_link",position:{x:.039109,y:.043,z:.078796},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Torso_1:{frame:"BODY_BASE_CONNECTOR_1",position:{x:.214514,y:.061691,z:-.095653},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},NECK_GLOBE_BASE_1:{frame:"Torso_1",position:{x:.014661,y:.0228,z:.084122},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_RIGHT_1:{frame:"HEAD_1",position:{x:.08973-.019009,y:-.057013+.025,z:.04831+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_1:{frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.02,z:.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},EYE_LENS_1:{frame:"HEAD_1",position:{x:.016845-.019009,y:.061941+.025,z:.034753+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FACE_1:{frame:"EYE_LENS_1",position:{x:.076086,y:.007237,z:-.003703},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},VISOR_GLASS_1:{frame:"HEAD_1",position:{x:.111798-.019009,y:-.024175+.025,z:-.124256+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},HEAD_VENT_LEFT_1:{frame:"HEAD_1",position:{x:-.042326-.019009,y:.038377+.025,z:-.162881+.238601-.05},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_1:{frame:"LEFT_ARM_CONNECTOR_1",position:{x:-.013297,y:.005336,z:-.001514},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_1:{frame:"RIGHT_ARM_CONNECTOR_1",position:{x:-.014964,y:-.001971,z:-287e-6},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},Battery_1:{frame:"base_link",position:{x:-.321414,y:.065009,z:.175134},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},RIGHT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:-.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},LEFT_ARM_CONNECTOR_1:{frame:"Torso_1",position:{x:.044751,y:.066216,z:.057987},rotation:{w:.924,x:0,y:.383,z:0},scale:{x:1,y:1,z:1}},FRONT_LEFT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},FRONT_RIGHT_WHEEL_1:{frame:"base_link",position:{x:.060309,y:-.060225,z:.036146},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},BALANCE_WHEEL:{frame:"base_link",position:{x:-.075191,y:0,z:.028646},rotation:{w:1,x:0,y:0,z:0},scale:{x:1,y:1,z:1}},base_link:{frame:"world",position:{x:0,y:0,z:0},rotation:{w:.707,x:0,y:0,z:-.707},scale:{x:1,y:1,z:1}}},VZ={base_link:{shape:"package://misty_description/meshes/base_link.stl",name:"base_link",frame:"base_link",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl",name:"MIDDLE_LEFT_WHEEL_1",frame:"MIDDLE_LEFT_WHEEL_1",position:{x:.006691,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl",name:"REAR_LEFT_WHEEL_1",frame:"REAR_LEFT_WHEEL_1",position:{x:.075191,y:-.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},REAR_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl",name:"REAR_RIGHT_WHEEL_1",frame:"REAR_RIGHT_WHEEL_1",position:{x:.075191,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},MIDDLE_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl",name:"MIDDLE_RIGHT_WHEEL_1",frame:"MIDDLE_RIGHT_WHEEL_1",position:{x:.006691,y:.060225,z:-.027646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BODY_BASE_CONNECTOR_1:{shape:"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl",name:"BODY_BASE_CONNECTOR_1",frame:"BODY_BASE_CONNECTOR_1",position:{x:.263414,y:.061691,z:-.210284},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_RIGHT_COVER_1:{shape:"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl",name:"BASE_RIGHT_COVER_1",frame:"BASE_RIGHT_COVER_1",position:{x:-.062309,y:.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_LEFT_COVER_1:{shape:"package://misty_description/meshes/BASE_LEFT_COVER_1.stl",name:"BASE_LEFT_COVER_1",frame:"BASE_LEFT_COVER_1",position:{x:-.062309,y:-.045,z:-.074646},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},BASE_FRONT_GRILL_1:{shape:"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl",name:"BASE_FRONT_GRILL_1",frame:"BASE_FRONT_GRILL_1",position:{x:-.039109,y:-.043,z:-.078796},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Torso_1:{shape:"package://misty_description/meshes/Torso_1.stl",name:"Torso_1",frame:"Torso_1",position:{x:.0489,y:0,z:-.114631},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},NECK_GLOBE_BASE_1:{shape:"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl",name:"NECK_GLOBE_BASE_1",frame:"NECK_GLOBE_BASE_1",position:{x:.034239,y:-.0228,z:-.198753},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_RIGHT_1:{shape:"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl",name:"HEAD_VENT_RIGHT_1",frame:"HEAD_VENT_RIGHT_1",position:{x:-.070814,y:.032838,z:-.485664},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_1:{shape:"package://misty_description/meshes/HEAD_1.stl",name:"HEAD_1",frame:"HEAD_1",position:{x:0,y:0,z:-.25},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},EYE_LENS_1:{shape:"package://misty_description/meshes/EYE_LENS_1.stl",name:"EYE_LENS_1",frame:"EYE_LENS_1",position:{x:.002071,y:-.086116,z:-.472107},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FACE_1:{shape:"package://misty_description/meshes/FACE_1.stl",name:"FACE_1",frame:"FACE_1",position:{x:-.074015,y:-.093353,z:-.468404},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},VISOR_GLASS_1:{shape:"package://misty_description/meshes/VISOR_GLASS_1.stl",name:"VISOR_GLASS_1",frame:"VISOR_GLASS_1",position:{x:-.092882,y:0,z:-.313098},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},HEAD_VENT_LEFT_1:{shape:"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl",name:"HEAD_VENT_LEFT_1",frame:"HEAD_VENT_LEFT_1",position:{x:.061242,y:-.062552,z:-.274473},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_1:{shape:"package://misty_description/meshes/LEFT_ARM_1.stl",name:"LEFT_ARM_1",frame:"LEFT_ARM_1",position:{x:.017446,y:-.071552,z:-.171104},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_1:{shape:"package://misty_description/meshes/RIGHT_ARM_1.stl",name:"RIGHT_ARM_1",frame:"RIGHT_ARM_1",position:{x:.019113,y:.068187,z:-.172331},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Battery_1:{shape:"package://misty_description/meshes/Battery_1.stl",name:"Battery_1",frame:"Battery_1",position:{x:.321414,y:-.065009,z:-.175134},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},RIGHT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl",name:"RIGHT_ARM_CONNECTOR_1",frame:"RIGHT_ARM_CONNECTOR_1",position:{x:.004149,y:.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},LEFT_ARM_CONNECTOR_1:{shape:"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl",name:"LEFT_ARM_CONNECTOR_1",frame:"LEFT_ARM_CONNECTOR_1",position:{x:.004149,y:-.066216,z:-.172618},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_LEFT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl",name:"FRONT_LEFT_WHEEL_1",frame:"FRONT_LEFT_WHEEL_1",position:{x:-.060309,y:-.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},FRONT_RIGHT_WHEEL_1:{shape:"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl",name:"FRONT_RIGHT_WHEEL_1",frame:"FRONT_RIGHT_WHEEL_1",position:{x:-.060309,y:.060225,z:-.035146},rotation:{w:1,x:0,y:0,z:0},color:{r:178.5,g:178.5,b:178.5,a:1},scale:{x:.001,y:.001,z:.001},highlight:"false"},Reset_Button:{shape:"cube",frame:"gizmo",name:"Reset_Button",position:{x:0,y:0,z:0},rotation:{w:1,x:0,y:0,z:0},color:{r:255,g:0,b:0,a:1},scale:{x:1,y:1,z:1}}},Ao=DJ((n,e)=>({ip:"",blocks:{},Start:{},lines:{},hulls:{},texts:{},points:{},widgets:{},counter:0,lightMode:!0,simOnly:!1,isConnected:!1,mistyAudioList:[],mistyImageList:[],clock:new HZ,tfs:{...o2},startingTfs:JSON.parse(JSON.stringify(o2)),endingTfs:JSON.parse(JSON.stringify(o2)),items:{...VZ},activeModal:null,setActiveModal:t=>n(i=>({activeModal:t})),closeModal:()=>n(t=>({activeModal:null})),toggleTheme:t=>n({lightMode:t}),setImageList:t=>n({mistyImageList:t}),setAudioList:t=>n({mistyAudioList:t}),setIsConnected:t=>n({isConnected:t}),loadFromURDF:t=>n({tfs:{...UZ(t)},items:{...zZ(t)}}),setIp:t=>n({ip:t}),disconnect:()=>n({ip:"",isConnected:!1,mistyAudioList:[],mistyImageList:[]}),addBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),removeBlock:t=>n(i=>({blocks:Object.keys(i.blocks).reduce((o,l)=>(t.includes(l)||(o[l]=i.blocks[l]),o),{})})),updateBlock:(t,i)=>n(s=>({blocks:{...s.blocks,[t]:i}})),getBlock:t=>e().blocks[t],getBlocks:()=>e().blocks,addBlocktoStart:(t,i)=>n(s=>({Start:{...s.Start,[t]:i}})),removeBlockfromStart:t=>n(i=>({Start:Object.keys(i.Start).reduce((o,l)=>(l!==t&&(o[l]=i.Start[l]),o),{})})),getBlocksByType:t=>{const i=e().blocks;return Object.values(i).filter(s=>s.type===t)[0]},getBlockType:t=>{var s;return((s=e().blocks[t])==null?void 0:s.type)||"Unknown block type"},onPointerMissed:()=>console.log("Missed Click"),onPointerOver:()=>{},onPointerOut:()=>{},resetSim:()=>{const t=JSON.parse(JSON.stringify(e().startingTfs));n({tfs:{...t},endingTfs:{...t}})},toggleSimOnly:t=>{n({simOnly:t})},setAnimationFrames:(t,i)=>{n({tfs:{...t},endingTfs:{...i}})},animateDrive:(t,i,s,o)=>{const l=JSON.parse(JSON.stringify(e().endingTfs));let u=JSON.parse(JSON.stringify(l[Pr("Base")])),h=JSON.parse(JSON.stringify(l[Pr("Base")]));const d=i/100*tV*o/1e3,m=t/100*eV*o/1e3,_=d!==0?m/d:m;let v=new Go(h.rotation.x,h.rotation.y,h.rotation.z,h.rotation.w);const E=rV(v);if(console.log(E),d!==0){let ie={x:0,y:0,z:d};v=N0(ie.x,ie.y,ie.z),v.multiply(new Go(h.rotation.x,h.rotation.y,h.rotation.z,h.rotation.w))}let w=[0],x=[h.position.x],A=[h.position.y],O=[h.position.z],k=[h.rotation.w],N=[h.rotation.x],D=[h.rotation.y],U=[h.rotation.z];const F=Op;let H=h.position.x,z=h.position.y;d>0?H+=_:d<0&&(H-=_),console.log(d);let J=null;for(let ie=10;ie<=F;ie+=10){w.push(o/1e3*ie);let de=d*ie/F,oe=m*ie/F;d!==0?J=new Mt(H+Math.cos(E)*oe/de*Math.cos(oe),z+Math.sin(E)*oe/de*Math.sin(oe),O[0]):J=new Mt(H+Math.cos(E)*oe,z+Math.sin(E)*oe,O[0]),x.push(J.x),A.push(J.y),O.push(J.z);let ue=new Go(N[0],D[0],U[0],k[0]);ue.slerp(v,ie/F),k.push(ue._w),N.push(ue._x),D.push(ue._y),U.push(ue._z)}w.push(1/0),x.push(J.x),A.push(J.y),O.push(J.z),k.push(v._w),N.push(v._x),D.push(v._y),U.push(v._z),u.position.x=J.x,u.position.y=J.y,u.position.z=J.z,u.rotation.w=v._w,u.rotation.x=v._x,u.rotation.y=v._y,u.rotation.z=v._z,h.position.x=ca(w,x),h.position.y=ca(w,A),h.position.z=ca(w,O),h.rotation.w=ca(w,k),h.rotation.x=ca(w,N),h.rotation.y=ca(w,D),h.rotation.z=ca(w,U);let te={};te[Pr("Base")]={...h};let re={};re[Pr("Base")]={...u},n({tfs:{...l,...te},endingTfs:{...l,...re}})}}));let qU="";const cc=n=>{const t=new Date().toLocaleString();qU=qU.concat(`
`,`[${t}] ${n}`)};function jZ(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(const i of t)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(n[i],e[i]))return!1;return!0}const{useRef:XZ}=Tr;function zh(n){const e=XZ();return t=>{const i=n(t);return jZ(e.current,i)?e.current:e.current=i}}const YZ={black:"#000",white:"#fff"},HS=YZ,KZ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m1=KZ,JZ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},g1=JZ,QZ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},_1=QZ,qZ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v1=qZ,ZZ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},y1=ZZ,eee={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g$=eee,tee={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nee=tee;function ab(n){let e="https://mui.com/production-error/?code="+n;for(let t=1;t<arguments.length;t+=1)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified MUI error #"+n+"; visit "+e+" for the full message."}const ree=Object.freeze(Object.defineProperty({__proto__:null,default:ab},Symbol.toStringTag,{value:"Module"})),Ew="$$material";function He(){return He=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},He.apply(this,arguments)}const iee=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));function Zn(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function iV(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var see=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,oee=iV(function(n){return see.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91});function aee(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function lee(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var uee=function(){function n(t){var i=this;this._insertTag=function(s){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,o),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lee(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var o=aee(s);try{o.insertRule(i,o.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Ed="-ms-",$A="-moz-",Hs="-webkit-",sV="comm",wB="rule",xB="decl",cee="@import",oV="@keyframes",hee="@layer",dee=Math.abs,gI=String.fromCharCode,pee=Object.assign;function fee(n,e){return Gh(n,0)^45?(((e<<2^Gh(n,0))<<2^Gh(n,1))<<2^Gh(n,2))<<2^Gh(n,3):0}function aV(n){return n.trim()}function mee(n,e){return(n=e.exec(n))?n[0]:n}function Gs(n,e,t){return n.replace(e,t)}function HL(n,e){return n.indexOf(e)}function Gh(n,e){return n.charCodeAt(e)|0}function GS(n,e,t){return n.slice(e,t)}function zg(n){return n.length}function CB(n){return n.length}function aC(n,e){return e.push(n),n}function gee(n,e){return n.map(e).join("")}var _I=1,RT=1,lV=0,Hp=0,dc=0,nE="";function vI(n,e,t,i,s,o,l){return{value:n,root:e,parent:t,type:i,props:s,children:o,line:_I,column:RT,length:l,return:""}}function _$(n,e){return pee(vI("",null,null,"",null,null,0),n,{length:-n.length},e)}function _ee(){return dc}function vee(){return dc=Hp>0?Gh(nE,--Hp):0,RT--,dc===10&&(RT=1,_I--),dc}function wf(){return dc=Hp<lV?Gh(nE,Hp++):0,RT++,dc===10&&(RT=1,_I++),dc}function Kg(){return Gh(nE,Hp)}function IM(){return Hp}function $w(n,e){return GS(nE,n,e)}function WS(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uV(n){return _I=RT=1,lV=zg(nE=n),Hp=0,[]}function cV(n){return nE="",n}function RM(n){return aV($w(Hp-1,GL(n===91?n+2:n===40?n+1:n)))}function yee(n){for(;(dc=Kg())&&dc<33;)wf();return WS(n)>2||WS(dc)>3?"":" "}function bee(n,e){for(;--e&&wf()&&!(dc<48||dc>102||dc>57&&dc<65||dc>70&&dc<97););return $w(n,IM()+(e<6&&Kg()==32&&wf()==32))}function GL(n){for(;wf();)switch(dc){case n:return Hp;case 34:case 39:n!==34&&n!==39&&GL(dc);break;case 40:n===41&&GL(n);break;case 92:wf();break}return Hp}function Tee(n,e){for(;wf()&&n+dc!==57;)if(n+dc===84&&Kg()===47)break;return"/*"+$w(e,Hp-1)+"*"+gI(n===47?n:wf())}function Eee(n){for(;!WS(Kg());)wf();return $w(n,Hp)}function $ee(n){return cV(kM("",null,null,null,[""],n=uV(n),0,[0],n))}function kM(n,e,t,i,s,o,l,u,h){for(var d=0,m=0,_=l,v=0,E=0,w=0,x=1,A=1,O=1,k=0,N="",D=s,U=o,F=i,H=N;A;)switch(w=k,k=wf()){case 40:if(w!=108&&Gh(H,_-1)==58){HL(H+=Gs(RM(k),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:H+=RM(k);break;case 9:case 10:case 13:case 32:H+=yee(w);break;case 92:H+=bee(IM()-1,7);continue;case 47:switch(Kg()){case 42:case 47:aC(See(Tee(wf(),IM()),e,t),h);break;default:H+="/"}break;case 123*x:u[d++]=zg(H)*O;case 125*x:case 59:case 0:switch(k){case 0:case 125:A=0;case 59+m:O==-1&&(H=Gs(H,/\f/g,"")),E>0&&zg(H)-_&&aC(E>32?e4(H+";",i,t,_-1):e4(Gs(H," ","")+";",i,t,_-2),h);break;case 59:H+=";";default:if(aC(F=ZU(H,e,t,d,m,s,u,N,D=[],U=[],_),o),k===123)if(m===0)kM(H,e,F,F,D,o,_,u,U);else switch(v===99&&Gh(H,3)===110?100:v){case 100:case 108:case 109:case 115:kM(n,F,F,i&&aC(ZU(n,F,F,0,0,s,u,N,s,D=[],_),U),s,U,_,u,i?D:U);break;default:kM(H,F,F,F,[""],U,0,u,U)}}d=m=E=0,x=O=1,N=H="",_=l;break;case 58:_=1+zg(H),E=w;default:if(x<1){if(k==123)--x;else if(k==125&&x++==0&&vee()==125)continue}switch(H+=gI(k),k*x){case 38:O=m>0?1:(H+="\f",-1);break;case 44:u[d++]=(zg(H)-1)*O,O=1;break;case 64:Kg()===45&&(H+=RM(wf())),v=Kg(),m=_=zg(N=H+=Eee(IM())),k++;break;case 45:w===45&&zg(H)==2&&(x=0)}}return o}function ZU(n,e,t,i,s,o,l,u,h,d,m){for(var _=s-1,v=s===0?o:[""],E=CB(v),w=0,x=0,A=0;w<i;++w)for(var O=0,k=GS(n,_+1,_=dee(x=l[w])),N=n;O<E;++O)(N=aV(x>0?v[O]+" "+k:Gs(k,/&\f/g,v[O])))&&(h[A++]=N);return vI(n,e,t,s===0?wB:u,h,d,m)}function See(n,e,t){return vI(n,e,t,sV,gI(_ee()),GS(n,2,-2),0)}function e4(n,e,t,i){return vI(n,e,t,xB,GS(n,0,i),GS(n,i+1,-1),i)}function gT(n,e){for(var t="",i=CB(n),s=0;s<i;s++)t+=e(n[s],s,n,e)||"";return t}function wee(n,e,t,i){switch(n.type){case hee:if(n.children.length)break;case cee:case xB:return n.return=n.return||n.value;case sV:return"";case oV:return n.return=n.value+"{"+gT(n.children,i)+"}";case wB:n.value=n.props.join(",")}return zg(t=gT(n.children,i))?n.return=n.value+"{"+t+"}":""}function xee(n){var e=CB(n);return function(t,i,s,o){for(var l="",u=0;u<e;u++)l+=n[u](t,i,s,o)||"";return l}}function Cee(n){return function(e){e.root||(e=e.return)&&n(e)}}var Mee=function(e,t,i){for(var s=0,o=0;s=o,o=Kg(),s===38&&o===12&&(t[i]=1),!WS(o);)wf();return $w(e,Hp)},Aee=function(e,t){var i=-1,s=44;do switch(WS(s)){case 0:s===38&&Kg()===12&&(t[i]=1),e[i]+=Mee(Hp-1,t,i);break;case 2:e[i]+=RM(s);break;case 4:if(s===44){e[++i]=Kg()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=gI(s)}while(s=wf());return e},Iee=function(e,t){return cV(Aee(uV(e),t))},t4=new WeakMap,Ree=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!t4.get(i))&&!s){t4.set(e,!0);for(var o=[],l=Iee(t,o),u=i.props,h=0,d=0;h<l.length;h++)for(var m=0;m<u.length;m++,d++)e.props[d]=o[h]?l[h].replace(/&\f/g,u[m]):u[m]+" "+l[h]}}},kee=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function hV(n,e){switch(fee(n,e)){case 5103:return Hs+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Hs+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Hs+n+$A+n+Ed+n+n;case 6828:case 4268:return Hs+n+Ed+n+n;case 6165:return Hs+n+Ed+"flex-"+n+n;case 5187:return Hs+n+Gs(n,/(\w+).+(:[^]+)/,Hs+"box-$1$2"+Ed+"flex-$1$2")+n;case 5443:return Hs+n+Ed+"flex-item-"+Gs(n,/flex-|-self/,"")+n;case 4675:return Hs+n+Ed+"flex-line-pack"+Gs(n,/align-content|flex-|-self/,"")+n;case 5548:return Hs+n+Ed+Gs(n,"shrink","negative")+n;case 5292:return Hs+n+Ed+Gs(n,"basis","preferred-size")+n;case 6060:return Hs+"box-"+Gs(n,"-grow","")+Hs+n+Ed+Gs(n,"grow","positive")+n;case 4554:return Hs+Gs(n,/([^-])(transform)/g,"$1"+Hs+"$2")+n;case 6187:return Gs(Gs(Gs(n,/(zoom-|grab)/,Hs+"$1"),/(image-set)/,Hs+"$1"),n,"")+n;case 5495:case 3959:return Gs(n,/(image-set\([^]*)/,Hs+"$1$`$1");case 4968:return Gs(Gs(n,/(.+:)(flex-)?(.*)/,Hs+"box-pack:$3"+Ed+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Hs+n+n;case 4095:case 3583:case 4068:case 2532:return Gs(n,/(.+)-inline(.+)/,Hs+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zg(n)-1-e>6)switch(Gh(n,e+1)){case 109:if(Gh(n,e+4)!==45)break;case 102:return Gs(n,/(.+:)(.+)-([^]+)/,"$1"+Hs+"$2-$3$1"+$A+(Gh(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~HL(n,"stretch")?hV(Gs(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Gh(n,e+1)!==115)break;case 6444:switch(Gh(n,zg(n)-3-(~HL(n,"!important")&&10))){case 107:return Gs(n,":",":"+Hs)+n;case 101:return Gs(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Hs+(Gh(n,14)===45?"inline-":"")+"box$3$1"+Hs+"$2$3$1"+Ed+"$2box$3")+n}break;case 5936:switch(Gh(n,e+11)){case 114:return Hs+n+Ed+Gs(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Hs+n+Ed+Gs(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Hs+n+Ed+Gs(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Hs+n+Ed+n+n}return n}var Oee=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case xB:e.return=hV(e.value,e.length);break;case oV:return gT([_$(e,{value:Gs(e.value,"@","@"+Hs)})],s);case wB:if(e.length)return gee(e.props,function(o){switch(mee(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gT([_$(e,{props:[Gs(o,/:(read-\w+)/,":"+$A+"$1")]})],s);case"::placeholder":return gT([_$(e,{props:[Gs(o,/:(plac\w+)/,":"+Hs+"input-$1")]}),_$(e,{props:[Gs(o,/:(plac\w+)/,":"+$A+"$1")]}),_$(e,{props:[Gs(o,/:(plac\w+)/,Ed+"input-$1")]})],s)}return""})}},Lee=[Oee],dV=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(x){var A=x.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var s=e.stylisPlugins||Lee,o={},l,u=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(x){for(var A=x.getAttribute("data-emotion").split(" "),O=1;O<A.length;O++)o[A[O]]=!0;u.push(x)});var h,d=[Ree,kee];{var m,_=[wee,Cee(function(x){m.insert(x)})],v=xee(d.concat(s,_)),E=function(A){return gT($ee(A),v)};h=function(A,O,k,N){m=k,E(A?A+"{"+O.styles+"}":O.styles),N&&(w.inserted[O.name]=!0)}}var w={key:t,sheet:new uee({key:t,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return w.sheet.hydrate(u),w},pV={exports:{}},go={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=typeof Symbol=="function"&&Symbol.for,MB=fh?Symbol.for("react.element"):60103,AB=fh?Symbol.for("react.portal"):60106,yI=fh?Symbol.for("react.fragment"):60107,bI=fh?Symbol.for("react.strict_mode"):60108,TI=fh?Symbol.for("react.profiler"):60114,EI=fh?Symbol.for("react.provider"):60109,$I=fh?Symbol.for("react.context"):60110,IB=fh?Symbol.for("react.async_mode"):60111,SI=fh?Symbol.for("react.concurrent_mode"):60111,wI=fh?Symbol.for("react.forward_ref"):60112,xI=fh?Symbol.for("react.suspense"):60113,Dee=fh?Symbol.for("react.suspense_list"):60120,CI=fh?Symbol.for("react.memo"):60115,MI=fh?Symbol.for("react.lazy"):60116,Nee=fh?Symbol.for("react.block"):60121,Bee=fh?Symbol.for("react.fundamental"):60117,Pee=fh?Symbol.for("react.responder"):60118,Fee=fh?Symbol.for("react.scope"):60119;function kf(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case MB:switch(n=n.type,n){case IB:case SI:case yI:case TI:case bI:case xI:return n;default:switch(n=n&&n.$$typeof,n){case $I:case wI:case MI:case CI:case EI:return n;default:return e}}case AB:return e}}}function fV(n){return kf(n)===SI}go.AsyncMode=IB;go.ConcurrentMode=SI;go.ContextConsumer=$I;go.ContextProvider=EI;go.Element=MB;go.ForwardRef=wI;go.Fragment=yI;go.Lazy=MI;go.Memo=CI;go.Portal=AB;go.Profiler=TI;go.StrictMode=bI;go.Suspense=xI;go.isAsyncMode=function(n){return fV(n)||kf(n)===IB};go.isConcurrentMode=fV;go.isContextConsumer=function(n){return kf(n)===$I};go.isContextProvider=function(n){return kf(n)===EI};go.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===MB};go.isForwardRef=function(n){return kf(n)===wI};go.isFragment=function(n){return kf(n)===yI};go.isLazy=function(n){return kf(n)===MI};go.isMemo=function(n){return kf(n)===CI};go.isPortal=function(n){return kf(n)===AB};go.isProfiler=function(n){return kf(n)===TI};go.isStrictMode=function(n){return kf(n)===bI};go.isSuspense=function(n){return kf(n)===xI};go.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===yI||n===SI||n===TI||n===bI||n===xI||n===Dee||typeof n=="object"&&n!==null&&(n.$$typeof===MI||n.$$typeof===CI||n.$$typeof===EI||n.$$typeof===$I||n.$$typeof===wI||n.$$typeof===Bee||n.$$typeof===Pee||n.$$typeof===Fee||n.$$typeof===Nee)};go.typeOf=kf;pV.exports=go;var Uee=pV.exports,mV=Uee,zee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Hee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gV={};gV[mV.ForwardRef]=zee;gV[mV.Memo]=Hee;var Gee=!0;function Wee(n,e,t){var i="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):i+=s+" "}),i}var _V=function(e,t,i){var s=e.key+"-"+t.name;(i===!1||Gee===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},vV=function(e,t,i){_V(e,t,i);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var o=t;do e.insert(t===o?"."+s:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Vee(n){for(var e=0,t,i=0,s=n.length;s>=4;++i,s-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var jee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Xee=/[A-Z]|^ms/g,Yee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yV=function(e){return e.charCodeAt(1)===45},n4=function(e){return e!=null&&typeof e!="boolean"},a2=iV(function(n){return yV(n)?n:n.replace(Xee,"-$&").toLowerCase()}),r4=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Yee,function(i,s,o){return Hg={name:s,styles:o,next:Hg},s})}return jee[e]!==1&&!yV(e)&&typeof t=="number"&&t!==0?t+"px":t};function VS(n,e,t){if(t==null)return"";if(t.__emotion_styles!==void 0)return t;switch(typeof t){case"boolean":return"";case"object":{if(t.anim===1)return Hg={name:t.name,styles:t.styles,next:Hg},t.name;if(t.styles!==void 0){var i=t.next;if(i!==void 0)for(;i!==void 0;)Hg={name:i.name,styles:i.styles,next:Hg},i=i.next;var s=t.styles+";";return s}return Kee(n,e,t)}case"function":{if(n!==void 0){var o=Hg,l=t(n);return Hg=o,VS(n,e,l)}break}}if(e==null)return t;var u=e[t];return u!==void 0?u:t}function Kee(n,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=VS(n,e,t[s])+";";else for(var o in t){var l=t[o];if(typeof l!="object")e!=null&&e[l]!==void 0?i+=o+"{"+e[l]+"}":n4(l)&&(i+=a2(o)+":"+r4(o,l)+";");else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var u=0;u<l.length;u++)n4(l[u])&&(i+=a2(o)+":"+r4(o,l[u])+";");else{var h=VS(n,e,l);switch(o){case"animation":case"animationName":{i+=a2(o)+":"+h+";";break}default:i+=o+"{"+h+"}"}}}return i}var i4=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Hg,RB=function(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,o="";Hg=void 0;var l=e[0];l==null||l.raw===void 0?(s=!1,o+=VS(i,t,l)):o+=l[0];for(var u=1;u<e.length;u++)o+=VS(i,t,e[u]),s&&(o+=l[u]);i4.lastIndex=0;for(var h="",d;(d=i4.exec(o))!==null;)h+="-"+d[1];var m=Vee(o)+h;return{name:m,styles:o,next:Hg}},Jee=function(e){return e()},bV=FO.useInsertionEffect?FO.useInsertionEffect:!1,Qee=bV||Jee,s4=bV||he.useLayoutEffect,TV=he.createContext(typeof HTMLElement<"u"?dV({key:"css"}):null),qee=TV.Provider,EV=function(e){return he.forwardRef(function(t,i){var s=he.useContext(TV);return e(t,s,i)})},AI=he.createContext({}),Zee=EV(function(n,e){var t=n.styles,i=RB([t],void 0,he.useContext(AI)),s=he.useRef();return s4(function(){var o=e.key+"-global",l=new e.sheet.constructor({key:o,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),u=!1,h=document.querySelector('style[data-emotion="'+o+" "+i.name+'"]');return e.sheet.tags.length&&(l.before=e.sheet.tags[0]),h!==null&&(u=!0,h.setAttribute("data-emotion",o),l.hydrate([h])),s.current=[l,u],function(){l.flush()}},[e]),s4(function(){var o=s.current,l=o[0],u=o[1];if(u){o[1]=!1;return}if(i.next!==void 0&&vV(e,i.next,!0),l.tags.length){var h=l.tags[l.tags.length-1].nextElementSibling;l.before=h,l.flush()}e.insert("",i,l,!1)},[e,i.name]),null});function $V(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return RB(e)}var II=function(){var e=$V.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},ete=oee,tte=function(e){return e!=="theme"},o4=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?ete:tte},a4=function(e,t,i){var s;if(t){var o=t.shouldForwardProp;s=e.__emotion_forwardProp&&o?function(l){return e.__emotion_forwardProp(l)&&o(l)}:o}return typeof s!="function"&&i&&(s=e.__emotion_forwardProp),s},nte=function(e){var t=e.cache,i=e.serialized,s=e.isStringTag;return _V(t,i,s),Qee(function(){return vV(t,i,s)}),null},rte=function n(e,t){var i=e.__emotion_real===e,s=i&&e.__emotion_base||e,o,l;t!==void 0&&(o=t.label,l=t.target);var u=a4(e,t,i),h=u||o4(s),d=!h("as");return function(){var m=arguments,_=i&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(o!==void 0&&_.push("label:"+o+";"),m[0]==null||m[0].raw===void 0)_.push.apply(_,m);else{_.push(m[0][0]);for(var v=m.length,E=1;E<v;E++)_.push(m[E],m[0][E])}var w=EV(function(x,A,O){var k=d&&x.as||s,N="",D=[],U=x;if(x.theme==null){U={};for(var F in x)U[F]=x[F];U.theme=he.useContext(AI)}typeof x.className=="string"?N=Wee(A.registered,D,x.className):x.className!=null&&(N=x.className+" ");var H=RB(_.concat(D),A.registered,U);N+=A.key+"-"+H.name,l!==void 0&&(N+=" "+l);var z=d&&u===void 0?o4(k):h,J={};for(var te in x)d&&te==="as"||z(te)&&(J[te]=x[te]);return J.className=N,J.ref=O,he.createElement(he.Fragment,null,he.createElement(nte,{cache:A,serialized:H,isStringTag:typeof k=="string"}),he.createElement(k,J))});return w.displayName=o!==void 0?o:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=s,w.__emotion_styles=_,w.__emotion_forwardProp=u,Object.defineProperty(w,"toString",{value:function(){return"."+l}}),w.withComponent=function(x,A){return n(x,He({},t,A,{shouldForwardProp:a4(w,A,!0)})).apply(void 0,_)},w}},ite=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],WL=rte.bind();ite.forEach(function(n){WL[n]=WL(n)});var SV={exports:{}},ste="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ote=ste,ate=ote;function wV(){}function xV(){}xV.resetWarningCache=wV;var lte=function(){function n(i,s,o,l,u,h){if(h!==ate){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:xV,resetWarningCache:wV};return t.PropTypes=t,t};SV.exports=lte();var ute=SV.exports;const ui=fb(ute);let VL;typeof document=="object"&&(VL=dV({key:"css",prepend:!0}));function cte(n){const{injectFirst:e,children:t}=n;return e&&VL?gt.jsx(qee,{value:VL,children:t}):t}function hte(n){return n==null||Object.keys(n).length===0}function CV(n){const{styles:e,defaultTheme:t={}}=n,i=typeof e=="function"?s=>e(hte(s)?t:s):e;return gt.jsx(Zee,{styles:i})}function kB(n,e){return WL(n,e)}const MV=(n,e)=>{Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))},dte=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:CV,StyledEngineProvider:cte,ThemeContext:AI,css:$V,default:kB,internal_processStyles:MV,keyframes:II},Symbol.toStringTag,{value:"Module"}));function U0(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function AV(n){if(!U0(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=AV(n[t])}),e}function ip(n,e,t={clone:!0}){const i=t.clone?He({},n):n;return U0(n)&&U0(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(U0(e[s])&&s in n&&U0(n[s])?i[s]=ip(n[s],e[s],t):t.clone?i[s]=U0(e[s])?AV(e[s]):e[s]:i[s]=e[s])}),i}const pte=Object.freeze(Object.defineProperty({__proto__:null,default:ip,isPlainObject:U0},Symbol.toStringTag,{value:"Module"})),fte=["values","unit","step"],mte=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,i)=>t.val-i.val),e.reduce((t,i)=>He({},t,{[i.key]:i.val}),{})};function IV(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:i=5}=n,s=Zn(n,fte),o=mte(e),l=Object.keys(o);function u(v){return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t})`}function h(v){return`@media (max-width:${(typeof e[v]=="number"?e[v]:v)-i/100}${t})`}function d(v,E){const w=l.indexOf(E);return`@media (min-width:${typeof e[v]=="number"?e[v]:v}${t}) and (max-width:${(w!==-1&&typeof e[l[w]]=="number"?e[l[w]]:E)-i/100}${t})`}function m(v){return l.indexOf(v)+1<l.length?d(v,l[l.indexOf(v)+1]):u(v)}function _(v){const E=l.indexOf(v);return E===0?u(l[1]):E===l.length-1?h(l[E]):d(v,l[l.indexOf(v)+1]).replace("@media","@media not all and")}return He({keys:l,values:o,up:u,down:h,between:d,only:m,not:_,unit:t},s)}const gte={borderRadius:4},_te=gte;function cS(n,e){return e?ip(n,e,{clone:!1}):n}const OB={xs:0,sm:600,md:900,lg:1200,xl:1536},l4={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${OB[n]}px)`};function Gp(n,e,t){const i=n.theme||{};if(Array.isArray(e)){const o=i.breakpoints||l4;return e.reduce((l,u,h)=>(l[o.up(o.keys[h])]=t(e[h]),l),{})}if(typeof e=="object"){const o=i.breakpoints||l4;return Object.keys(e).reduce((l,u)=>{if(Object.keys(o.values||OB).indexOf(u)!==-1){const h=o.up(u);l[h]=t(e[u],u)}else{const h=u;l[h]=e[h]}return l},{})}return t(e)}function RV(n={}){var e;return((e=n.keys)==null?void 0:e.reduce((i,s)=>{const o=n.up(s);return i[o]={},i},{}))||{}}function kV(n,e){return n.reduce((t,i)=>{const s=t[i];return(!s||Object.keys(s).length===0)&&delete t[i],t},e)}function vte(n,...e){const t=RV(n),i=[t,...e].reduce((s,o)=>ip(s,o),{});return kV(Object.keys(t),i)}function yte(n,e){if(typeof n!="object")return{};const t={},i=Object.keys(e);return Array.isArray(n)?i.forEach((s,o)=>{o<n.length&&(t[s]=!0)}):i.forEach(s=>{n[s]!=null&&(t[s]=!0)}),t}function jy({values:n,breakpoints:e,base:t}){const i=t||yte(n,e),s=Object.keys(i);if(s.length===0)return n;let o;return s.reduce((l,u,h)=>(Array.isArray(n)?(l[u]=n[h]!=null?n[h]:n[o],o=h):typeof n=="object"?(l[u]=n[u]!=null?n[u]:n[o],o=u):l[u]=n,l),{})}function ir(n){if(typeof n!="string")throw new Error(ab(7));return n.charAt(0).toUpperCase()+n.slice(1)}const bte=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"}));function RI(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const i=`vars.${e}`.split(".").reduce((s,o)=>s&&s[o]?s[o]:null,n);if(i!=null)return i}return e.split(".").reduce((i,s)=>i&&i[s]!=null?i[s]:null,n)}function SA(n,e,t,i=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||i:s=RI(n,t)||i,e&&(s=e(s,i,n)),s}function Gu(n){const{prop:e,cssProperty:t=n.prop,themeKey:i,transform:s}=n,o=l=>{if(l[e]==null)return null;const u=l[e],h=l.theme,d=RI(h,i)||{};return Gp(l,u,_=>{let v=SA(d,s,_);return _===v&&typeof _=="string"&&(v=SA(d,s,`${e}${_==="default"?"":ir(_)}`,_)),t===!1?v:{[t]:v}})};return o.propTypes={},o.filterProps=[e],o}function Tte(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const Ete={m:"margin",p:"padding"},$te={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ste=Tte(n=>{if(n.length>2)if(u4[n])n=u4[n];else return[n];const[e,t]=n.split(""),i=Ete[e],s=$te[t]||"";return Array.isArray(s)?s.map(o=>i+o):[i+s]}),LB=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],DB=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...LB,...DB];function Sw(n,e,t,i){var s;const o=(s=RI(n,e,!1))!=null?s:t;return typeof o=="number"?l=>typeof l=="string"?l:o*l:Array.isArray(o)?l=>typeof l=="string"?l:o[l]:typeof o=="function"?o:()=>{}}function NB(n){return Sw(n,"spacing",8)}function lb(n,e){if(typeof e=="string"||e==null)return e;const t=Math.abs(e),i=n(t);return e>=0?i:typeof i=="number"?-i:`-${i}`}function wte(n,e){return t=>n.reduce((i,s)=>(i[s]=lb(e,t),i),{})}function xte(n,e,t,i){if(e.indexOf(t)===-1)return null;const s=Ste(t),o=wte(s,i),l=n[t];return Gp(n,l,o)}function OV(n,e){const t=NB(n.theme);return Object.keys(n).map(i=>xte(n,e,i,t)).reduce(cS,{})}function su(n){return OV(n,LB)}su.propTypes={};su.filterProps=LB;function ou(n){return OV(n,DB)}ou.propTypes={};ou.filterProps=DB;function Cte(n=8){if(n.mui)return n;const e=NB({spacing:n}),t=(...i)=>(i.length===0?[1]:i).map(o=>{const l=e(o);return typeof l=="number"?`${l}px`:l}).join(" ");return t.mui=!0,t}function kI(...n){const e=n.reduce((i,s)=>(s.filterProps.forEach(o=>{i[o]=s}),i),{}),t=i=>Object.keys(i).reduce((s,o)=>e[o]?cS(s,e[o](i)):s,{});return t.propTypes={},t.filterProps=n.reduce((i,s)=>i.concat(s.filterProps),[]),t}function mm(n){return typeof n!="number"?n:`${n}px solid`}function Em(n,e){return Gu({prop:n,themeKey:"borders",transform:e})}const Mte=Em("border",mm),Ate=Em("borderTop",mm),Ite=Em("borderRight",mm),Rte=Em("borderBottom",mm),kte=Em("borderLeft",mm),Ote=Em("borderColor"),Lte=Em("borderTopColor"),Dte=Em("borderRightColor"),Nte=Em("borderBottomColor"),Bte=Em("borderLeftColor"),Pte=Em("outline",mm),Fte=Em("outlineColor"),OI=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=Sw(n.theme,"shape.borderRadius",4),t=i=>({borderRadius:lb(e,i)});return Gp(n,n.borderRadius,t)}return null};OI.propTypes={};OI.filterProps=["borderRadius"];kI(Mte,Ate,Ite,Rte,kte,Ote,Lte,Dte,Nte,Bte,OI,Pte,Fte);const LI=n=>{if(n.gap!==void 0&&n.gap!==null){const e=Sw(n.theme,"spacing",8),t=i=>({gap:lb(e,i)});return Gp(n,n.gap,t)}return null};LI.propTypes={};LI.filterProps=["gap"];const DI=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=Sw(n.theme,"spacing",8),t=i=>({columnGap:lb(e,i)});return Gp(n,n.columnGap,t)}return null};DI.propTypes={};DI.filterProps=["columnGap"];const NI=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=Sw(n.theme,"spacing",8),t=i=>({rowGap:lb(e,i)});return Gp(n,n.rowGap,t)}return null};NI.propTypes={};NI.filterProps=["rowGap"];const Ute=Gu({prop:"gridColumn"}),zte=Gu({prop:"gridRow"}),Hte=Gu({prop:"gridAutoFlow"}),Gte=Gu({prop:"gridAutoColumns"}),Wte=Gu({prop:"gridAutoRows"}),Vte=Gu({prop:"gridTemplateColumns"}),jte=Gu({prop:"gridTemplateRows"}),Xte=Gu({prop:"gridTemplateAreas"}),Yte=Gu({prop:"gridArea"});kI(LI,DI,NI,Ute,zte,Hte,Gte,Wte,Vte,jte,Xte,Yte);function _T(n,e){return e==="grey"?e:n}const Kte=Gu({prop:"color",themeKey:"palette",transform:_T}),Jte=Gu({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:_T}),Qte=Gu({prop:"backgroundColor",themeKey:"palette",transform:_T});kI(Kte,Jte,Qte);function vf(n){return n<=1&&n!==0?`${n*100}%`:n}const qte=Gu({prop:"width",transform:vf}),BB=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s;const o=((i=n.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[t])||OB[t];return o?((s=n.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${o}${n.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:vf(t)}};return Gp(n,n.maxWidth,e)}return null};BB.filterProps=["maxWidth"];const Zte=Gu({prop:"minWidth",transform:vf}),ene=Gu({prop:"height",transform:vf}),tne=Gu({prop:"maxHeight",transform:vf}),nne=Gu({prop:"minHeight",transform:vf});Gu({prop:"size",cssProperty:"width",transform:vf});Gu({prop:"size",cssProperty:"height",transform:vf});const rne=Gu({prop:"boxSizing"});kI(qte,BB,Zte,ene,tne,nne,rne);const ine={border:{themeKey:"borders",transform:mm},borderTop:{themeKey:"borders",transform:mm},borderRight:{themeKey:"borders",transform:mm},borderBottom:{themeKey:"borders",transform:mm},borderLeft:{themeKey:"borders",transform:mm},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:mm},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:OI},color:{themeKey:"palette",transform:_T},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:_T},backgroundColor:{themeKey:"palette",transform:_T},p:{style:ou},pt:{style:ou},pr:{style:ou},pb:{style:ou},pl:{style:ou},px:{style:ou},py:{style:ou},padding:{style:ou},paddingTop:{style:ou},paddingRight:{style:ou},paddingBottom:{style:ou},paddingLeft:{style:ou},paddingX:{style:ou},paddingY:{style:ou},paddingInline:{style:ou},paddingInlineStart:{style:ou},paddingInlineEnd:{style:ou},paddingBlock:{style:ou},paddingBlockStart:{style:ou},paddingBlockEnd:{style:ou},m:{style:su},mt:{style:su},mr:{style:su},mb:{style:su},ml:{style:su},mx:{style:su},my:{style:su},margin:{style:su},marginTop:{style:su},marginRight:{style:su},marginBottom:{style:su},marginLeft:{style:su},marginX:{style:su},marginY:{style:su},marginInline:{style:su},marginInlineStart:{style:su},marginInlineEnd:{style:su},marginBlock:{style:su},marginBlockStart:{style:su},marginBlockEnd:{style:su},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:LI},rowGap:{style:NI},columnGap:{style:DI},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vf},maxWidth:{style:BB},minWidth:{transform:vf},height:{transform:vf},maxHeight:{transform:vf},minHeight:{transform:vf},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},ww=ine;function sne(...n){const e=n.reduce((i,s)=>i.concat(Object.keys(s)),[]),t=new Set(e);return n.every(i=>t.size===Object.keys(i).length)}function one(n,e){return typeof n=="function"?n(e):n}function LV(){function n(t,i,s,o){const l={[t]:i,theme:s},u=o[t];if(!u)return{[t]:i};const{cssProperty:h=t,themeKey:d,transform:m,style:_}=u;if(i==null)return null;if(d==="typography"&&i==="inherit")return{[t]:i};const v=RI(s,d)||{};return _?_(l):Gp(l,i,w=>{let x=SA(v,m,w);return w===x&&typeof w=="string"&&(x=SA(v,m,`${t}${w==="default"?"":ir(w)}`,w)),h===!1?x:{[h]:x}})}function e(t){var i;const{sx:s,theme:o={}}=t||{};if(!s)return null;const l=(i=o.unstable_sxConfig)!=null?i:ww;function u(h){let d=h;if(typeof h=="function")d=h(o);else if(typeof h!="object")return h;if(!d)return null;const m=RV(o.breakpoints),_=Object.keys(m);let v=m;return Object.keys(d).forEach(E=>{const w=one(d[E],o);if(w!=null)if(typeof w=="object")if(l[E])v=cS(v,n(E,w,o,l));else{const x=Gp({theme:o},w,A=>({[E]:A}));sne(x,w)?v[E]=e({sx:w,theme:o}):v=cS(v,x)}else v=cS(v,n(E,w,o,l))}),kV(_,v)}return Array.isArray(s)?s.map(u):u(s)}return e}const DV=LV();DV.filterProps=["sx"];const xw=DV;function NV(n,e){const t=this;return t.vars&&typeof t.getColorSchemeSelector=="function"?{[t.getColorSchemeSelector(n).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:t.palette.mode===n?e:{}}const ane=["breakpoints","palette","spacing","shape"];function rE(n={},...e){const{breakpoints:t={},palette:i={},spacing:s,shape:o={}}=n,l=Zn(n,ane),u=IV(t),h=Cte(s);let d=ip({breakpoints:u,direction:"ltr",components:{},palette:He({mode:"light"},i),spacing:h,shape:He({},_te,o)},l);return d.applyStyles=NV,d=e.reduce((m,_)=>ip(m,_),d),d.unstable_sxConfig=He({},ww,l==null?void 0:l.unstable_sxConfig),d.unstable_sx=function(_){return xw({sx:_,theme:this})},d}const lne=Object.freeze(Object.defineProperty({__proto__:null,default:rE,private_createBreakpoints:IV,unstable_applyStyles:NV},Symbol.toStringTag,{value:"Module"}));function une(n){return Object.keys(n).length===0}function cne(n=null){const e=he.useContext(AI);return!e||une(e)?n:e}const hne=rE();function BI(n=hne){return cne(n)}function dne({styles:n,themeId:e,defaultTheme:t={}}){const i=BI(t),s=typeof n=="function"?n(e&&i[e]||i):n;return gt.jsx(CV,{styles:s})}const pne=["sx"],fne=n=>{var e,t;const i={systemProps:{},otherProps:{}},s=(e=n==null||(t=n.theme)==null?void 0:t.unstable_sxConfig)!=null?e:ww;return Object.keys(n).forEach(o=>{s[o]?i.systemProps[o]=n[o]:i.otherProps[o]=n[o]}),i};function Cw(n){const{sx:e}=n,t=Zn(n,pne),{systemProps:i,otherProps:s}=fne(t);let o;return Array.isArray(e)?o=[i,...e]:typeof e=="function"?o=(...l)=>{const u=e(...l);return U0(u)?He({},i,u):i}:o=He({},i,e),He({},s,{sx:o})}const mne=Object.freeze(Object.defineProperty({__proto__:null,default:xw,extendSxProp:Cw,unstable_createStyleFunctionSx:LV,unstable_defaultSxConfig:ww},Symbol.toStringTag,{value:"Module"})),c4=n=>n,gne=()=>{let n=c4;return{configure(e){n=e},generate(e){return n(e)},reset(){n=c4}}},_ne=gne(),PB=_ne;function BV(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=BV(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Rr(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=BV(n))&&(i&&(i+=" "),i+=e);return i}const vne=["className","component"];function yne(n={}){const{themeId:e,defaultTheme:t,defaultClassName:i="MuiBox-root",generateClassName:s}=n,o=kB("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(xw);return he.forwardRef(function(h,d){const m=BI(t),_=Cw(h),{className:v,component:E="div"}=_,w=Zn(_,vne);return gt.jsx(o,He({as:E,ref:d,className:Rr(v,s?s(i):i),theme:e&&m[e]||m},w))})}const bne={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ds(n,e,t="Mui"){const i=bne[e];return i?`${t}-${i}`:`${PB.generate(n)}-${e}`}function As(n,e,t="Mui"){const i={};return e.forEach(s=>{i[s]=ds(n,s,t)}),i}var PV={exports:{}},_o={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FB=Symbol.for("react.element"),UB=Symbol.for("react.portal"),PI=Symbol.for("react.fragment"),FI=Symbol.for("react.strict_mode"),UI=Symbol.for("react.profiler"),zI=Symbol.for("react.provider"),HI=Symbol.for("react.context"),Tne=Symbol.for("react.server_context"),GI=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),VI=Symbol.for("react.suspense_list"),jI=Symbol.for("react.memo"),XI=Symbol.for("react.lazy"),Ene=Symbol.for("react.offscreen"),FV;FV=Symbol.for("react.module.reference");function $m(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case FB:switch(n=n.type,n){case PI:case UI:case FI:case WI:case VI:return n;default:switch(n=n&&n.$$typeof,n){case Tne:case HI:case GI:case XI:case jI:case zI:return n;default:return e}}case UB:return e}}}_o.ContextConsumer=HI;_o.ContextProvider=zI;_o.Element=FB;_o.ForwardRef=GI;_o.Fragment=PI;_o.Lazy=XI;_o.Memo=jI;_o.Portal=UB;_o.Profiler=UI;_o.StrictMode=FI;_o.Suspense=WI;_o.SuspenseList=VI;_o.isAsyncMode=function(){return!1};_o.isConcurrentMode=function(){return!1};_o.isContextConsumer=function(n){return $m(n)===HI};_o.isContextProvider=function(n){return $m(n)===zI};_o.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===FB};_o.isForwardRef=function(n){return $m(n)===GI};_o.isFragment=function(n){return $m(n)===PI};_o.isLazy=function(n){return $m(n)===XI};_o.isMemo=function(n){return $m(n)===jI};_o.isPortal=function(n){return $m(n)===UB};_o.isProfiler=function(n){return $m(n)===UI};_o.isStrictMode=function(n){return $m(n)===FI};_o.isSuspense=function(n){return $m(n)===WI};_o.isSuspenseList=function(n){return $m(n)===VI};_o.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===PI||n===UI||n===FI||n===WI||n===VI||n===Ene||typeof n=="object"&&n!==null&&(n.$$typeof===XI||n.$$typeof===jI||n.$$typeof===zI||n.$$typeof===HI||n.$$typeof===GI||n.$$typeof===FV||n.getModuleId!==void 0)};_o.typeOf=$m;PV.exports=_o;var h4=PV.exports;const $ne=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function UV(n){const e=`${n}`.match($ne);return e&&e[1]||""}function zV(n,e=""){return n.displayName||n.name||UV(n)||e}function d4(n,e,t){const i=zV(e);return n.displayName||(i!==""?`${t}(${i})`:t)}function Sne(n){if(n!=null){if(typeof n=="string")return n;if(typeof n=="function")return zV(n,"Component");if(typeof n=="object")switch(n.$$typeof){case h4.ForwardRef:return d4(n,n.render,"ForwardRef");case h4.Memo:return d4(n,n.type,"memo");default:return}}}const wne=Object.freeze(Object.defineProperty({__proto__:null,default:Sne,getFunctionName:UV},Symbol.toStringTag,{value:"Module"})),xne=["ownerState"],Cne=["variants"],Mne=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Ane(n){return Object.keys(n).length===0}function Ine(n){return typeof n=="string"&&n.charCodeAt(0)>96}function l2(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Rne=rE(),kne=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function lC({defaultTheme:n,theme:e,themeId:t}){return Ane(e)?n:e[t]||e}function One(n){return n?(e,t)=>t[n]:null}function OM(n,e){let{ownerState:t}=e,i=Zn(e,xne);const s=typeof n=="function"?n(He({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>OM(o,He({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=Zn(s,Cne);return o.forEach(h=>{let d=!0;typeof h.props=="function"?d=h.props(He({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(d=!1)}),d&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style(He({ownerState:t},i,t)):h.style))}),u}return s}function Lne(n={}){const{themeId:e,defaultTheme:t=Rne,rootShouldForwardProp:i=l2,slotShouldForwardProp:s=l2}=n,o=l=>xw(He({},l,{theme:lC(He({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{MV(l,U=>U.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:h,slot:d,skipVariantsResolver:m,skipSx:_,overridesResolver:v=One(kne(d))}=u,E=Zn(u,Mne),w=m!==void 0?m:d&&d!=="Root"&&d!=="root"||!1,x=_||!1;let A,O=l2;d==="Root"||d==="root"?O=i:d?O=s:Ine(l)&&(O=void 0);const k=kB(l,He({shouldForwardProp:O,label:A},E)),N=U=>typeof U=="function"&&U.__emotion_real!==U||U0(U)?F=>OM(U,He({},F,{theme:lC({theme:F.theme,defaultTheme:t,themeId:e})})):U,D=(U,...F)=>{let H=N(U);const z=F?F.map(N):[];h&&v&&z.push(re=>{const ie=lC(He({},re,{defaultTheme:t,themeId:e}));if(!ie.components||!ie.components[h]||!ie.components[h].styleOverrides)return null;const de=ie.components[h].styleOverrides,oe={};return Object.entries(de).forEach(([ue,ge])=>{oe[ue]=OM(ge,He({},re,{theme:ie}))}),v(re,oe)}),h&&!w&&z.push(re=>{var ie;const de=lC(He({},re,{defaultTheme:t,themeId:e})),oe=de==null||(ie=de.components)==null||(ie=ie[h])==null?void 0:ie.variants;return OM({variants:oe},He({},re,{theme:de}))}),x||z.push(o);const J=z.length-F.length;if(Array.isArray(U)&&J>0){const re=new Array(J).fill("");H=[...U,...re],H.raw=[...U.raw,...re]}const te=k(H,...z);return l.muiName&&(te.muiName=l.muiName),te};return k.withConfig&&(D.withConfig=k.withConfig),D}}const HV=Lne();function zB(n,e){const t=He({},e);return Object.keys(n).forEach(i=>{if(i.toString().match(/^(components|slots)$/))t[i]=He({},n[i],t[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const s=n[i]||{},o=e[i];t[i]={},!o||!Object.keys(o)?t[i]=s:!s||!Object.keys(s)?t[i]=o:(t[i]=He({},o),Object.keys(s).forEach(l=>{t[i][l]=zB(s[l],o[l])}))}else t[i]===void 0&&(t[i]=n[i])}),t}function Dne(n){const{theme:e,name:t,props:i}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?i:zB(e.components[t].defaultProps,i)}function HB({props:n,name:e,defaultTheme:t,themeId:i}){let s=BI(t);return i&&(s=s[i]||s),Dne({theme:s,name:e,props:n})}const Nne=typeof window<"u"?he.useLayoutEffect:he.useEffect,_v=Nne;function Bne(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}const Pne=Object.freeze(Object.defineProperty({__proto__:null,default:Bne},Symbol.toStringTag,{value:"Module"}));function jL(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function GB(n,e=166){let t;function i(...s){const o=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(o,e)}return i.clear=()=>{clearTimeout(t)},i}function Fne(n,e){return()=>null}function LM(n,e){var t,i;return he.isValidElement(n)&&e.indexOf((t=n.type.muiName)!=null?t:(i=n.type)==null||(i=i._payload)==null||(i=i.value)==null?void 0:i.muiName)!==-1}function zp(n){return n&&n.ownerDocument||document}function vv(n){return zp(n).defaultView||window}function Une(n,e){return()=>null}function wA(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let p4=0;function zne(n){const[e,t]=he.useState(n),i=n||e;return he.useEffect(()=>{e==null&&(p4+=1,t(`mui-${p4}`))},[e]),i}const f4=FO.useId;function YI(n){if(f4!==void 0){const e=f4();return n??e}return zne(n)}function Hne(n,e,t,i,s){return null}function xA({controlled:n,default:e,name:t,state:i="value"}){const{current:s}=he.useRef(n!==void 0),[o,l]=he.useState(e),u=s?n:o,h=he.useCallback(d=>{s||l(d)},[]);return[u,h]}function Ly(n){const e=he.useRef(n);return _v(()=>{e.current=n}),he.useRef((...t)=>(0,e.current)(...t)).current}function op(...n){return he.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{wA(t,e)})},n)}const m4={};function Gne(n,e){const t=he.useRef(m4);return t.current===m4&&(t.current=n(e)),t}const Wne=[];function Vne(n){he.useEffect(n,Wne)}class KI{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new KI}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function GV(){const n=Gne(KI.create).current;return Vne(n.disposeEffect),n}let JI=!0,XL=!1;const jne=new KI,Xne={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Yne(n){const{type:e,tagName:t}=n;return!!(t==="INPUT"&&Xne[e]&&!n.readOnly||t==="TEXTAREA"&&!n.readOnly||n.isContentEditable)}function Kne(n){n.metaKey||n.altKey||n.ctrlKey||(JI=!0)}function u2(){JI=!1}function Jne(){this.visibilityState==="hidden"&&XL&&(JI=!0)}function Qne(n){n.addEventListener("keydown",Kne,!0),n.addEventListener("mousedown",u2,!0),n.addEventListener("pointerdown",u2,!0),n.addEventListener("touchstart",u2,!0),n.addEventListener("visibilitychange",Jne,!0)}function qne(n){const{target:e}=n;try{return e.matches(":focus-visible")}catch{}return JI||Yne(e)}function WV(){const n=he.useCallback(s=>{s!=null&&Qne(s.ownerDocument)},[]),e=he.useRef(!1);function t(){return e.current?(XL=!0,jne.start(100,()=>{XL=!1}),e.current=!1,!0):!1}function i(s){return qne(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:i,onBlur:t,ref:n}}function VV(n){const e=n.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}function Is(n,e,t=void 0){const i={};return Object.keys(n).forEach(s=>{i[s]=n[s].reduce((o,l)=>{if(l){const u=e(l);u!==""&&o.push(u),t&&t[l]&&o.push(t[l])}return o},[]).join(" ")}),i}const Zne=he.createContext(),ere=()=>{const n=he.useContext(Zne);return n??!1};function jS(n){"@babel/helpers - typeof";return jS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jS(n)}function tre(n,e){if(jS(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(jS(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function nre(n){var e=tre(n,"string");return jS(e)=="symbol"?e:e+""}const rre=["className","component","disableGutters","fixed","maxWidth","classes"],ire=rE(),sre=HV("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${ir(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),ore=n=>HB({props:n,name:"MuiContainer",defaultTheme:ire}),are=(n,e)=>{const t=h=>ds(e,h),{classes:i,fixed:s,disableGutters:o,maxWidth:l}=n,u={root:["root",l&&`maxWidth${ir(String(l))}`,s&&"fixed",o&&"disableGutters"]};return Is(u,t,i)};function lre(n={}){const{createStyledComponent:e=sre,useThemeProps:t=ore,componentName:i="MuiContainer"}=n,s=e(({theme:l,ownerState:u})=>He({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!u.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}),({theme:l,ownerState:u})=>u.fixed&&Object.keys(l.breakpoints.values).reduce((h,d)=>{const m=d,_=l.breakpoints.values[m];return _!==0&&(h[l.breakpoints.up(m)]={maxWidth:`${_}${l.breakpoints.unit}`}),h},{}),({theme:l,ownerState:u})=>He({},u.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},u.maxWidth&&u.maxWidth!=="xs"&&{[l.breakpoints.up(u.maxWidth)]:{maxWidth:`${l.breakpoints.values[u.maxWidth]}${l.breakpoints.unit}`}}));return he.forwardRef(function(u,h){const d=t(u),{className:m,component:_="div",disableGutters:v=!1,fixed:E=!1,maxWidth:w="lg"}=d,x=Zn(d,rre),A=He({},d,{component:_,disableGutters:v,fixed:E,maxWidth:w}),O=are(A,i);return gt.jsx(s,He({as:_,ownerState:A,className:Rr(O.root,m),ref:h},x))})}const ure=["component","direction","spacing","divider","children","className","useFlexGap"],cre=rE(),hre=HV("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function dre(n){return HB({props:n,name:"MuiStack",defaultTheme:cre})}function pre(n,e){const t=he.Children.toArray(n).filter(Boolean);return t.reduce((i,s,o)=>(i.push(s),o<t.length-1&&i.push(he.cloneElement(e,{key:`separator-${o}`})),i),[])}const fre=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],mre=({ownerState:n,theme:e})=>{let t=He({display:"flex",flexDirection:"column"},Gp({theme:e},jy({values:n.direction,breakpoints:e.breakpoints.values}),i=>({flexDirection:i})));if(n.spacing){const i=NB(e),s=Object.keys(e.breakpoints.values).reduce((h,d)=>((typeof n.spacing=="object"&&n.spacing[d]!=null||typeof n.direction=="object"&&n.direction[d]!=null)&&(h[d]=!0),h),{}),o=jy({values:n.direction,base:s}),l=jy({values:n.spacing,base:s});typeof o=="object"&&Object.keys(o).forEach((h,d,m)=>{if(!o[h]){const v=d>0?o[m[d-1]]:"column";o[h]=v}}),t=ip(t,Gp({theme:e},l,(h,d)=>n.useFlexGap?{gap:lb(i,h)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${fre(d?o[d]:n.direction)}`]:lb(i,h)}}))}return t=vte(e.breakpoints,t),t};function gre(n={}){const{createStyledComponent:e=hre,useThemeProps:t=dre,componentName:i="MuiStack"}=n,s=()=>Is({root:["root"]},h=>ds(i,h),{}),o=e(mre);return he.forwardRef(function(h,d){const m=t(h),_=Cw(m),{component:v="div",direction:E="column",spacing:w=0,divider:x,children:A,className:O,useFlexGap:k=!1}=_,N=Zn(_,ure),D={direction:E,spacing:w,useFlexGap:k},U=s();return gt.jsx(o,He({as:v,ownerState:D,ref:d,className:Rr(U.root,O)},N,{children:x?pre(A,x):A}))})}function _re(n,e){return He({toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}}},e)}var Wu={},jV={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(jV);var Mw=jV.exports;const vre=n0(ree),yre=n0(Pne);var XV=Mw;Object.defineProperty(Wu,"__esModule",{value:!0});var V0=Wu.alpha=QV;Wu.blend=kre;Wu.colorChannel=void 0;var bre=Wu.darken=VB;Wu.decomposeColor=bm;Wu.emphasize=qV;var Tre=Wu.getContrastRatio=Cre;Wu.getLuminance=CA;Wu.hexToRgb=YV;Wu.hslToRgb=JV;var Ere=Wu.lighten=jB;Wu.private_safeAlpha=Mre;Wu.private_safeColorChannel=void 0;Wu.private_safeDarken=Are;Wu.private_safeEmphasize=Rre;Wu.private_safeLighten=Ire;Wu.recomposeColor=iE;Wu.rgbToHex=xre;var g4=XV(vre),$re=XV(yre);function WB(n,e=0,t=1){return(0,$re.default)(n,e,t)}function YV(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(i=>i+i)),t?`rgb${t.length===4?"a":""}(${t.map((i,s)=>s<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Sre(n){const e=n.toString(16);return e.length===1?`0${e}`:e}function bm(n){if(n.type)return n;if(n.charAt(0)==="#")return bm(YV(n));const e=n.indexOf("("),t=n.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(t)===-1)throw new Error((0,g4.default)(9,n));let i=n.substring(e+1,n.length-1),s;if(t==="color"){if(i=i.split(" "),s=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,g4.default)(10,s))}else i=i.split(",");return i=i.map(o=>parseFloat(o)),{type:t,values:i,colorSpace:s}}const KV=n=>{const e=bm(n);return e.values.slice(0,3).map((t,i)=>e.type.indexOf("hsl")!==-1&&i!==0?`${t}%`:t).join(" ")};Wu.colorChannel=KV;const wre=(n,e)=>{try{return KV(n)}catch{return n}};Wu.private_safeColorChannel=wre;function iE(n){const{type:e,colorSpace:t}=n;let{values:i}=n;return e.indexOf("rgb")!==-1?i=i.map((s,o)=>o<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),e.indexOf("color")!==-1?i=`${t} ${i.join(" ")}`:i=`${i.join(", ")}`,`${e}(${i})`}function xre(n){if(n.indexOf("#")===0)return n;const{values:e}=bm(n);return`#${e.map((t,i)=>Sre(i===3?Math.round(255*t):t)).join("")}`}function JV(n){n=bm(n);const{values:e}=n,t=e[0],i=e[1]/100,s=e[2]/100,o=i*Math.min(s,1-s),l=(d,m=(d+t/30)%12)=>s-o*Math.max(Math.min(m-3,9-m,1),-1);let u="rgb";const h=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return n.type==="hsla"&&(u+="a",h.push(e[3])),iE({type:u,values:h})}function CA(n){n=bm(n);let e=n.type==="hsl"||n.type==="hsla"?bm(JV(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Cre(n,e){const t=CA(n),i=CA(e);return(Math.max(t,i)+.05)/(Math.min(t,i)+.05)}function QV(n,e){return n=bm(n),e=WB(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,iE(n)}function Mre(n,e,t){try{return QV(n,e)}catch{return n}}function VB(n,e){if(n=bm(n),e=WB(e),n.type.indexOf("hsl")!==-1)n.values[2]*=1-e;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]*=1-e;return iE(n)}function Are(n,e,t){try{return VB(n,e)}catch{return n}}function jB(n,e){if(n=bm(n),e=WB(e),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*e;else if(n.type.indexOf("rgb")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.indexOf("color")!==-1)for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return iE(n)}function Ire(n,e,t){try{return jB(n,e)}catch{return n}}function qV(n,e=.15){return CA(n)>.5?VB(n,e):jB(n,e)}function Rre(n,e,t){try{return qV(n,e)}catch{return n}}function kre(n,e,t,i=1){const s=(h,d)=>Math.round((h**(1/i)*(1-t)+d**(1/i)*t)**i),o=bm(n),l=bm(e),u=[s(o.values[0],l.values[0]),s(o.values[1],l.values[1]),s(o.values[2],l.values[2])];return iE({type:"rgb",values:u})}const Ore=["mode","contrastThreshold","tonalOffset"],_4={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:HS.white,default:HS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},c2={text:{primary:HS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:HS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function v4(n,e,t,i){const s=i.light||i,o=i.dark||i*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Ere(n.main,s):e==="dark"&&(n.dark=bre(n.main,o)))}function Lre(n="light"){return n==="dark"?{main:_1[200],light:_1[50],dark:_1[400]}:{main:_1[700],light:_1[400],dark:_1[800]}}function Dre(n="light"){return n==="dark"?{main:g1[200],light:g1[50],dark:g1[400]}:{main:g1[500],light:g1[300],dark:g1[700]}}function Nre(n="light"){return n==="dark"?{main:m1[500],light:m1[300],dark:m1[700]}:{main:m1[700],light:m1[400],dark:m1[800]}}function Bre(n="light"){return n==="dark"?{main:v1[400],light:v1[300],dark:v1[700]}:{main:v1[700],light:v1[500],dark:v1[900]}}function Pre(n="light"){return n==="dark"?{main:y1[400],light:y1[300],dark:y1[700]}:{main:y1[800],light:y1[500],dark:y1[900]}}function Fre(n="light"){return n==="dark"?{main:g$[400],light:g$[300],dark:g$[700]}:{main:"#ed6c02",light:g$[500],dark:g$[900]}}function Ure(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:i=.2}=n,s=Zn(n,Ore),o=n.primary||Lre(e),l=n.secondary||Dre(e),u=n.error||Nre(e),h=n.info||Bre(e),d=n.success||Pre(e),m=n.warning||Fre(e);function _(x){return Tre(x,c2.text.primary)>=t?c2.text.primary:_4.text.primary}const v=({color:x,name:A,mainShade:O=500,lightShade:k=300,darkShade:N=700})=>{if(x=He({},x),!x.main&&x[O]&&(x.main=x[O]),!x.hasOwnProperty("main"))throw new Error(ab(11,A?` (${A})`:"",O));if(typeof x.main!="string")throw new Error(ab(12,A?` (${A})`:"",JSON.stringify(x.main)));return v4(x,"light",k,i),v4(x,"dark",N,i),x.contrastText||(x.contrastText=_(x.main)),x},E={dark:c2,light:_4};return ip(He({common:He({},HS),mode:e,primary:v({color:o,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:u,name:"error"}),warning:v({color:m,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:d,name:"success"}),grey:nee,contrastThreshold:t,getContrastText:_,augmentColor:v,tonalOffset:i},E[e]),s)}const zre=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Hre(n){return Math.round(n*1e5)/1e5}const y4={textTransform:"uppercase"},b4='"Roboto", "Helvetica", "Arial", sans-serif';function Gre(n,e){const t=typeof e=="function"?e(n):e,{fontFamily:i=b4,fontSize:s=14,fontWeightLight:o=300,fontWeightRegular:l=400,fontWeightMedium:u=500,fontWeightBold:h=700,htmlFontSize:d=16,allVariants:m,pxToRem:_}=t,v=Zn(t,zre),E=s/14,w=_||(O=>`${O/d*E}rem`),x=(O,k,N,D,U)=>He({fontFamily:i,fontWeight:O,fontSize:w(k),lineHeight:N},i===b4?{letterSpacing:`${Hre(D/k)}em`}:{},U,m),A={h1:x(o,96,1.167,-1.5),h2:x(o,60,1.2,-.5),h3:x(l,48,1.167,0),h4:x(l,34,1.235,.25),h5:x(l,24,1.334,0),h6:x(u,20,1.6,.15),subtitle1:x(l,16,1.75,.15),subtitle2:x(u,14,1.57,.1),body1:x(l,16,1.5,.15),body2:x(l,14,1.43,.15),button:x(u,14,1.75,.4,y4),caption:x(l,12,1.66,.4),overline:x(l,12,2.66,1,y4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ip(He({htmlFontSize:d,pxToRem:w,fontFamily:i,fontSize:s,fontWeightLight:o,fontWeightRegular:l,fontWeightMedium:u,fontWeightBold:h},A),v,{clone:!1})}const Wre=.2,Vre=.14,jre=.12;function il(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Wre})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Vre})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${jre})`].join(",")}const Xre=["none",il(0,2,1,-1,0,1,1,0,0,1,3,0),il(0,3,1,-2,0,2,2,0,0,1,5,0),il(0,3,3,-2,0,3,4,0,0,1,8,0),il(0,2,4,-1,0,4,5,0,0,1,10,0),il(0,3,5,-1,0,5,8,0,0,1,14,0),il(0,3,5,-1,0,6,10,0,0,1,18,0),il(0,4,5,-2,0,7,10,1,0,2,16,1),il(0,5,5,-3,0,8,10,1,0,3,14,2),il(0,5,6,-3,0,9,12,1,0,3,16,2),il(0,6,6,-3,0,10,14,1,0,4,18,3),il(0,6,7,-4,0,11,15,1,0,4,20,3),il(0,7,8,-4,0,12,17,2,0,5,22,4),il(0,7,8,-4,0,13,19,2,0,5,24,4),il(0,7,9,-4,0,14,21,2,0,5,26,4),il(0,8,9,-5,0,15,22,2,0,6,28,5),il(0,8,10,-5,0,16,24,2,0,6,30,5),il(0,8,11,-5,0,17,26,2,0,6,32,5),il(0,9,11,-5,0,18,28,2,0,7,34,6),il(0,9,12,-6,0,19,29,2,0,7,36,6),il(0,10,13,-6,0,20,31,3,0,8,38,7),il(0,10,13,-6,0,21,33,3,0,8,40,7),il(0,10,14,-6,0,22,35,3,0,8,42,7),il(0,11,14,-7,0,23,36,3,0,9,44,8),il(0,11,15,-7,0,24,38,3,0,9,46,8)],Yre=["duration","easing","delay"],Kre={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Jre={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function T4(n){return`${Math.round(n)}ms`}function Qre(n){if(!n)return 0;const e=n/36;return Math.round((4+15*e**.25+e/5)*10)}function qre(n){const e=He({},Kre,n.easing),t=He({},Jre,n.duration);return He({getAutoHeightDuration:Qre,create:(s=["all"],o={})=>{const{duration:l=t.standard,easing:u=e.easeInOut,delay:h=0}=o;return Zn(o,Yre),(Array.isArray(s)?s:[s]).map(d=>`${d} ${typeof l=="string"?l:T4(l)} ${u} ${typeof h=="string"?h:T4(h)}`).join(",")}},n,{easing:e,duration:t})}const Zre={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},eie=Zre,tie=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function ZV(n={},...e){const{mixins:t={},palette:i={},transitions:s={},typography:o={}}=n,l=Zn(n,tie);if(n.vars)throw new Error(ab(18));const u=Ure(i),h=rE(n);let d=ip(h,{mixins:_re(h.breakpoints,t),palette:u,shadows:Xre.slice(),typography:Gre(u,o),transitions:qre(s),zIndex:He({},eie)});return d=ip(d,l),d=e.reduce((m,_)=>ip(m,_),d),d.unstable_sxConfig=He({},ww,l==null?void 0:l.unstable_sxConfig),d.unstable_sx=function(_){return xw({sx:_,theme:this})},d}const nie=ZV(),QI=nie;function qI(){const n=BI(QI);return n[Ew]||n}function Ws({props:n,name:e}){return HB({props:n,name:e,defaultTheme:QI,themeId:Ew})}var Aw={};const rie=n0(iee);var h2={exports:{}},E4;function iie(){return E4||(E4=1,function(n){function e(t,i){if(t==null)return{};var s={},o=Object.keys(t),l,u;for(u=0;u<o.length;u++)l=o[u],!(i.indexOf(l)>=0)&&(s[l]=t[l]);return s}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(h2)),h2.exports}const sie=n0(dte),oie=n0(pte),aie=n0(bte),lie=n0(wne),uie=n0(lne),cie=n0(mne);var sE=Mw;Object.defineProperty(Aw,"__esModule",{value:!0});var hie=Aw.default=Sie;Aw.shouldForwardProp=DM;Aw.systemDefaultTheme=void 0;var lm=sE(rie),YL=sE(iie()),$4=vie(sie),die=oie;sE(aie);sE(lie);var pie=sE(uie),fie=sE(cie);const mie=["ownerState"],gie=["variants"],_ie=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function e8(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(e8=function(i){return i?t:e})(n)}function vie(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=e8(e);if(t&&t.has(n))return t.get(n);var i={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in n)if(o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)){var l=s?Object.getOwnPropertyDescriptor(n,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=n[o]}return i.default=n,t&&t.set(n,i),i}function yie(n){return Object.keys(n).length===0}function bie(n){return typeof n=="string"&&n.charCodeAt(0)>96}function DM(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Tie=Aw.systemDefaultTheme=(0,pie.default)(),Eie=n=>n&&n.charAt(0).toLowerCase()+n.slice(1);function uC({defaultTheme:n,theme:e,themeId:t}){return yie(e)?n:e[t]||e}function $ie(n){return n?(e,t)=>t[n]:null}function NM(n,e){let{ownerState:t}=e,i=(0,YL.default)(e,mie);const s=typeof n=="function"?n((0,lm.default)({ownerState:t},i)):n;if(Array.isArray(s))return s.flatMap(o=>NM(o,(0,lm.default)({ownerState:t},i)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:o=[]}=s;let u=(0,YL.default)(s,gie);return o.forEach(h=>{let d=!0;typeof h.props=="function"?d=h.props((0,lm.default)({ownerState:t},i,t)):Object.keys(h.props).forEach(m=>{(t==null?void 0:t[m])!==h.props[m]&&i[m]!==h.props[m]&&(d=!1)}),d&&(Array.isArray(u)||(u=[u]),u.push(typeof h.style=="function"?h.style((0,lm.default)({ownerState:t},i,t)):h.style))}),u}return s}function Sie(n={}){const{themeId:e,defaultTheme:t=Tie,rootShouldForwardProp:i=DM,slotShouldForwardProp:s=DM}=n,o=l=>(0,fie.default)((0,lm.default)({},l,{theme:uC((0,lm.default)({},l,{defaultTheme:t,themeId:e}))}));return o.__mui_systemSx=!0,(l,u={})=>{(0,$4.internal_processStyles)(l,U=>U.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:h,slot:d,skipVariantsResolver:m,skipSx:_,overridesResolver:v=$ie(Eie(d))}=u,E=(0,YL.default)(u,_ie),w=m!==void 0?m:d&&d!=="Root"&&d!=="root"||!1,x=_||!1;let A,O=DM;d==="Root"||d==="root"?O=i:d?O=s:bie(l)&&(O=void 0);const k=(0,$4.default)(l,(0,lm.default)({shouldForwardProp:O,label:A},E)),N=U=>typeof U=="function"&&U.__emotion_real!==U||(0,die.isPlainObject)(U)?F=>NM(U,(0,lm.default)({},F,{theme:uC({theme:F.theme,defaultTheme:t,themeId:e})})):U,D=(U,...F)=>{let H=N(U);const z=F?F.map(N):[];h&&v&&z.push(re=>{const ie=uC((0,lm.default)({},re,{defaultTheme:t,themeId:e}));if(!ie.components||!ie.components[h]||!ie.components[h].styleOverrides)return null;const de=ie.components[h].styleOverrides,oe={};return Object.entries(de).forEach(([ue,ge])=>{oe[ue]=NM(ge,(0,lm.default)({},re,{theme:ie}))}),v(re,oe)}),h&&!w&&z.push(re=>{var ie;const de=uC((0,lm.default)({},re,{defaultTheme:t,themeId:e})),oe=de==null||(ie=de.components)==null||(ie=ie[h])==null?void 0:ie.variants;return NM({variants:oe},(0,lm.default)({},re,{theme:de}))}),x||z.push(o);const J=z.length-F.length;if(Array.isArray(U)&&J>0){const re=new Array(J).fill("");H=[...U,...re],H.raw=[...U.raw,...re]}const te=k(H,...z);return l.muiName&&(te.muiName=l.muiName),te};return k.withConfig&&(D.withConfig=k.withConfig),D}}function t8(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const wie=n=>t8(n)&&n!=="classes",Of=wie,jn=hie({themeId:Ew,defaultTheme:QI,rootShouldForwardProp:Of}),S4=n=>{let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,(e/100).toFixed(2)};function xie(n){return ds("MuiSvgIcon",n)}As("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Cie=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Mie=n=>{const{color:e,fontSize:t,classes:i}=n,s={root:["root",e!=="inherit"&&`color${ir(e)}`,`fontSize${ir(t)}`]};return Is(s,xie,i)},Aie=jn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${ir(t.color)}`],e[`fontSize${ir(t.fontSize)}`]]}})(({theme:n,ownerState:e})=>{var t,i,s,o,l,u,h,d,m,_,v,E,w;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=n.transitions)==null||(i=t.create)==null?void 0:i.call(t,"fill",{duration:(s=n.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((o=n.typography)==null||(l=o.pxToRem)==null?void 0:l.call(o,20))||"1.25rem",medium:((u=n.typography)==null||(h=u.pxToRem)==null?void 0:h.call(u,24))||"1.5rem",large:((d=n.typography)==null||(m=d.pxToRem)==null?void 0:m.call(d,35))||"2.1875rem"}[e.fontSize],color:(_=(v=(n.vars||n).palette)==null||(v=v[e.color])==null?void 0:v.main)!=null?_:{action:(E=(n.vars||n).palette)==null||(E=E.action)==null?void 0:E.active,disabled:(w=(n.vars||n).palette)==null||(w=w.action)==null?void 0:w.disabled,inherit:void 0}[e.color]}}),KL=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiSvgIcon"}),{children:s,className:o,color:l="inherit",component:u="svg",fontSize:h="medium",htmlColor:d,inheritViewBox:m=!1,titleAccess:_,viewBox:v="0 0 24 24"}=i,E=Zn(i,Cie),w=he.isValidElement(s)&&s.type==="svg",x=He({},i,{color:l,component:u,fontSize:h,instanceFontSize:e.fontSize,inheritViewBox:m,viewBox:v,hasSvgAsChild:w}),A={};m||(A.viewBox=v);const O=Mie(x);return gt.jsxs(Aie,He({as:u,className:Rr(O.root,o),focusable:"false",color:d,"aria-hidden":_?void 0:!0,role:_?"img":void 0,ref:t},A,E,w&&s.props,{ownerState:x,children:[w?s.props.children:s,_?gt.jsx("title",{children:_}):null]}))});KL.muiName="SvgIcon";function Iw(n,e){function t(i,s){return gt.jsx(KL,He({"data-testid":`${e}Icon`,ref:s},i,{children:n}))}return t.muiName=KL.muiName,he.memo(he.forwardRef(t))}const Iie={configure:n=>{PB.configure(n)}},Rie=Object.freeze(Object.defineProperty({__proto__:null,capitalize:ir,createChainedFunction:jL,createSvgIcon:Iw,debounce:GB,deprecatedPropType:Fne,isMuiElement:LM,ownerDocument:zp,ownerWindow:vv,requirePropFactory:Une,setRef:wA,unstable_ClassNameGenerator:Iie,unstable_useEnhancedEffect:_v,unstable_useId:YI,unsupportedProp:Hne,useControlled:xA,useEventCallback:Ly,useForkRef:op,useIsFocusVisible:WV},Symbol.toStringTag,{value:"Module"}));function JL(n,e){return JL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},JL(n,e)}function XB(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,JL(n,e)}const w4={disabled:!1},MA=Tr.createContext(null);var kie=function(e){return e.scrollTop},j$="unmounted",by="exited",Ty="entering",z1="entered",QL="exiting",i_=function(n){XB(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=s,u=l&&!l.isMounting?i.enter:i.appear,h;return o.appearStatus=null,i.in?u?(h=by,o.appearStatus=Ty):h=z1:i.unmountOnExit||i.mountOnEnter?h=j$:h=by,o.state={status:h},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===j$?{status:by}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==Ty&&l!==z1&&(o=Ty):(l===Ty||l===z1)&&(o=QL)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===Ty){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Dx.findDOMNode(this);l&&kie(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===by&&this.setState({status:j$})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,h=this.props.nodeRef?[u]:[Dx.findDOMNode(this),u],d=h[0],m=h[1],_=this.getTimeouts(),v=u?_.appear:_.enter;if(!s&&!l||w4.disabled){this.safeSetState({status:z1},function(){o.props.onEntered(d)});return}this.props.onEnter(d,m),this.safeSetState({status:Ty},function(){o.props.onEntering(d,m),o.onTransitionEnd(v,function(){o.safeSetState({status:z1},function(){o.props.onEntered(d,m)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Dx.findDOMNode(this);if(!o||w4.disabled){this.safeSetState({status:by},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:QL},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:by},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Dx.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var h=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=h[0],m=h[1];this.props.addEndListener(d,m)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===j$)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=Zn(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Tr.createElement(MA.Provider,{value:null},typeof l=="function"?l(s,u):Tr.cloneElement(Tr.Children.only(l),u))},e}(Tr.Component);i_.contextType=MA;i_.propTypes={};function b1(){}i_.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:b1,onEntering:b1,onEntered:b1,onExit:b1,onExiting:b1,onExited:b1};i_.UNMOUNTED=j$;i_.EXITED=by;i_.ENTERING=Ty;i_.ENTERED=z1;i_.EXITING=QL;const n8=i_;function Oie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function YB(n,e){var t=function(o){return e&&he.isValidElement(o)?e(o):o},i=Object.create(null);return n&&he.Children.map(n,function(s){return s}).forEach(function(s){i[s.key]=t(s)}),i}function Lie(n,e){n=n||{},e=e||{};function t(m){return m in e?e[m]:n[m]}var i=Object.create(null),s=[];for(var o in n)o in e?s.length&&(i[o]=s,s=[]):s.push(o);var l,u={};for(var h in e){if(i[h])for(l=0;l<i[h].length;l++){var d=i[h][l];u[i[h][l]]=t(d)}u[h]=t(h)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function Dy(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Die(n,e){return YB(n.children,function(t){return he.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Dy(t,"appear",n),enter:Dy(t,"enter",n),exit:Dy(t,"exit",n)})})}function Nie(n,e,t){var i=YB(n.children),s=Lie(e,i);return Object.keys(s).forEach(function(o){var l=s[o];if(he.isValidElement(l)){var u=o in e,h=o in i,d=e[o],m=he.isValidElement(d)&&!d.props.in;h&&(!u||m)?s[o]=he.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:Dy(l,"exit",n),enter:Dy(l,"enter",n)}):!h&&u&&!m?s[o]=he.cloneElement(l,{in:!1}):h&&u&&he.isValidElement(d)&&(s[o]=he.cloneElement(l,{onExited:t.bind(null,l),in:d.props.in,exit:Dy(l,"exit",n),enter:Dy(l,"enter",n)}))}}),s}var Bie=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Pie={component:"div",childFactory:function(e){return e}},KB=function(n){XB(e,n);function e(i,s){var o;o=n.call(this,i,s)||this;var l=o.handleExited.bind(Oie(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,h=o.firstRender;return{children:h?Die(s,u):Nie(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=YB(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var h=He({},u.children);return delete h[s.key],{children:h}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=Zn(s,["component","childFactory"]),h=this.state.contextValue,d=Bie(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Tr.createElement(MA.Provider,{value:h},d):Tr.createElement(MA.Provider,{value:h},Tr.createElement(o,u,d))},e}(Tr.Component);KB.propTypes={};KB.defaultProps=Pie;const Fie=KB,r8=n=>n.scrollTop;function AA(n,e){var t,i;const{timeout:s,easing:o,style:l={}}=n;return{duration:(t=l.transitionDuration)!=null?t:typeof s=="number"?s:s[e.mode]||0,easing:(i=l.transitionTimingFunction)!=null?i:typeof o=="object"?o[e.mode]:o,delay:l.transitionDelay}}function Uie(n){return ds("MuiPaper",n)}As("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const zie=["className","component","elevation","square","variant"],Hie=n=>{const{square:e,elevation:t,variant:i,classes:s}=n,o={root:["root",i,!e&&"rounded",i==="elevation"&&`elevation${t}`]};return Is(o,Uie,s)},Gie=jn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(({theme:n,ownerState:e})=>{var t;return He({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!e.square&&{borderRadius:n.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.divider}`},e.variant==="elevation"&&He({boxShadow:(n.vars||n).shadows[e.elevation]},!n.vars&&n.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${V0("#fff",S4(e.elevation))}, ${V0("#fff",S4(e.elevation))})`},n.vars&&{backgroundImage:(t=n.vars.overlays)==null?void 0:t[e.elevation]}))}),Wie=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiPaper"}),{className:s,component:o="div",elevation:l=1,square:u=!1,variant:h="elevation"}=i,d=Zn(i,zie),m=He({},i,{component:o,elevation:l,square:u,variant:h}),_=Hie(m);return gt.jsx(Gie,He({as:o,ownerState:m,className:Rr(_.root,s),ref:t},d))}),ZI=Wie;function IA(n){return typeof n=="string"}function Vie(n,e,t){return n===void 0||IA(n)?e:He({},e,{ownerState:He({},e.ownerState,t)})}function i8(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(i=>i.match(/^on[A-Z]/)&&typeof n[i]=="function"&&!e.includes(i)).forEach(i=>{t[i]=n[i]}),t}function jie(n,e,t){return typeof n=="function"?n(e,t):n}function x4(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Xie(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:i,externalForwardedProps:s,className:o}=n;if(!e){const E=Rr(t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),w=He({},t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),x=He({},t,s,i);return E.length>0&&(x.className=E),Object.keys(w).length>0&&(x.style=w),{props:x,internalRef:void 0}}const l=i8(He({},s,i)),u=x4(i),h=x4(s),d=e(l),m=Rr(d==null?void 0:d.className,t==null?void 0:t.className,o,s==null?void 0:s.className,i==null?void 0:i.className),_=He({},d==null?void 0:d.style,t==null?void 0:t.style,s==null?void 0:s.style,i==null?void 0:i.style),v=He({},d,t,h,u);return m.length>0&&(v.className=m),Object.keys(_).length>0&&(v.style=_),{props:v,internalRef:d.ref}}const Yie=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function kT(n){var e;const{elementType:t,externalSlotProps:i,ownerState:s,skipResolvingSlotProps:o=!1}=n,l=Zn(n,Yie),u=o?{}:jie(i,s),{props:h,internalRef:d}=Xie(He({},l,{externalSlotProps:u})),m=op(d,u==null?void 0:u.ref,(e=n.additionalProps)==null?void 0:e.ref);return Vie(t,He({},h,{ref:m}),s)}function Kie(n){const{className:e,classes:t,pulsate:i=!1,rippleX:s,rippleY:o,rippleSize:l,in:u,onExited:h,timeout:d}=n,[m,_]=he.useState(!1),v=Rr(e,t.ripple,t.rippleVisible,i&&t.ripplePulsate),E={width:l,height:l,top:-(l/2)+o,left:-(l/2)+s},w=Rr(t.child,m&&t.childLeaving,i&&t.childPulsate);return!u&&!m&&_(!0),he.useEffect(()=>{if(!u&&h!=null){const x=setTimeout(h,d);return()=>{clearTimeout(x)}}},[h,u,d]),gt.jsx("span",{className:v,style:E,children:gt.jsx("span",{className:w})})}const cm=As("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Jie=["center","classes","className"];let eR=n=>n,C4,M4,A4,I4;const qL=550,Qie=80,qie=II(C4||(C4=eR`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Zie=II(M4||(M4=eR`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),ese=II(A4||(A4=eR`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),tse=jn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nse=jn(Kie,{name:"MuiTouchRipple",slot:"Ripple"})(I4||(I4=eR`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),cm.rippleVisible,qie,qL,({theme:n})=>n.transitions.easing.easeInOut,cm.ripplePulsate,({theme:n})=>n.transitions.duration.shorter,cm.child,cm.childLeaving,Zie,qL,({theme:n})=>n.transitions.easing.easeInOut,cm.childPulsate,ese,({theme:n})=>n.transitions.easing.easeInOut),rse=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:o={},className:l}=i,u=Zn(i,Jie),[h,d]=he.useState([]),m=he.useRef(0),_=he.useRef(null);he.useEffect(()=>{_.current&&(_.current(),_.current=null)},[h]);const v=he.useRef(!1),E=GV(),w=he.useRef(null),x=he.useRef(null),A=he.useCallback(D=>{const{pulsate:U,rippleX:F,rippleY:H,rippleSize:z,cb:J}=D;d(te=>[...te,gt.jsx(nse,{classes:{ripple:Rr(o.ripple,cm.ripple),rippleVisible:Rr(o.rippleVisible,cm.rippleVisible),ripplePulsate:Rr(o.ripplePulsate,cm.ripplePulsate),child:Rr(o.child,cm.child),childLeaving:Rr(o.childLeaving,cm.childLeaving),childPulsate:Rr(o.childPulsate,cm.childPulsate)},timeout:qL,pulsate:U,rippleX:F,rippleY:H,rippleSize:z},m.current)]),m.current+=1,_.current=J},[o]),O=he.useCallback((D={},U={},F=()=>{})=>{const{pulsate:H=!1,center:z=s||U.pulsate,fakeElement:J=!1}=U;if((D==null?void 0:D.type)==="mousedown"&&v.current){v.current=!1;return}(D==null?void 0:D.type)==="touchstart"&&(v.current=!0);const te=J?null:x.current,re=te?te.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ie,de,oe;if(z||D===void 0||D.clientX===0&&D.clientY===0||!D.clientX&&!D.touches)ie=Math.round(re.width/2),de=Math.round(re.height/2);else{const{clientX:ue,clientY:ge}=D.touches&&D.touches.length>0?D.touches[0]:D;ie=Math.round(ue-re.left),de=Math.round(ge-re.top)}if(z)oe=Math.sqrt((2*re.width**2+re.height**2)/3),oe%2===0&&(oe+=1);else{const ue=Math.max(Math.abs((te?te.clientWidth:0)-ie),ie)*2+2,ge=Math.max(Math.abs((te?te.clientHeight:0)-de),de)*2+2;oe=Math.sqrt(ue**2+ge**2)}D!=null&&D.touches?w.current===null&&(w.current=()=>{A({pulsate:H,rippleX:ie,rippleY:de,rippleSize:oe,cb:F})},E.start(Qie,()=>{w.current&&(w.current(),w.current=null)})):A({pulsate:H,rippleX:ie,rippleY:de,rippleSize:oe,cb:F})},[s,A,E]),k=he.useCallback(()=>{O({},{pulsate:!0})},[O]),N=he.useCallback((D,U)=>{if(E.clear(),(D==null?void 0:D.type)==="touchend"&&w.current){w.current(),w.current=null,E.start(0,()=>{N(D,U)});return}w.current=null,d(F=>F.length>0?F.slice(1):F),_.current=U},[E]);return he.useImperativeHandle(t,()=>({pulsate:k,start:O,stop:N}),[k,O,N]),gt.jsx(tse,He({className:Rr(cm.root,o.root,l),ref:x},u,{children:gt.jsx(Fie,{component:null,exit:!0,children:h})}))}),ise=rse;function sse(n){return ds("MuiButtonBase",n)}const ose=As("MuiButtonBase",["root","disabled","focusVisible"]),ase=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],lse=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:i,classes:s}=n,l=Is({root:["root",e&&"disabled",t&&"focusVisible"]},sse,s);return t&&i&&(l.root+=` ${i}`),l},use=jn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ose.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cse=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:o=!1,children:l,className:u,component:h="button",disabled:d=!1,disableRipple:m=!1,disableTouchRipple:_=!1,focusRipple:v=!1,LinkComponent:E="a",onBlur:w,onClick:x,onContextMenu:A,onDragLeave:O,onFocus:k,onFocusVisible:N,onKeyDown:D,onKeyUp:U,onMouseDown:F,onMouseLeave:H,onMouseUp:z,onTouchEnd:J,onTouchMove:te,onTouchStart:re,tabIndex:ie=0,TouchRippleProps:de,touchRippleRef:oe,type:ue}=i,ge=Zn(i,ase),Ae=he.useRef(null),j=he.useRef(null),Z=op(j,oe),{isFocusVisibleRef:ne,onFocus:le,onBlur:_e,ref:Oe}=WV(),[xe,Xe]=he.useState(!1);d&&xe&&Xe(!1),he.useImperativeHandle(s,()=>({focusVisible:()=>{Xe(!0),Ae.current.focus()}}),[]);const[Re,Je]=he.useState(!1);he.useEffect(()=>{Je(!0)},[]);const et=Re&&!m&&!d;he.useEffect(()=>{xe&&v&&!m&&Re&&j.current.pulsate()},[m,v,xe,Re]);function at(Ge,Me,X=_){return Ly(Q=>(Me&&Me(Q),!X&&j.current&&j.current[Ge](Q),!0))}const Qe=at("start",F),De=at("stop",A),Se=at("stop",O),Pe=at("stop",z),rt=at("stop",Ge=>{xe&&Ge.preventDefault(),H&&H(Ge)}),We=at("start",re),wt=at("stop",J),xt=at("stop",te),ht=at("stop",Ge=>{_e(Ge),ne.current===!1&&Xe(!1),w&&w(Ge)},!1),St=Ly(Ge=>{Ae.current||(Ae.current=Ge.currentTarget),le(Ge),ne.current===!0&&(Xe(!0),N&&N(Ge)),k&&k(Ge)}),It=()=>{const Ge=Ae.current;return h&&h!=="button"&&!(Ge.tagName==="A"&&Ge.href)},mt=he.useRef(!1),ve=Ly(Ge=>{v&&!mt.current&&xe&&j.current&&Ge.key===" "&&(mt.current=!0,j.current.stop(Ge,()=>{j.current.start(Ge)})),Ge.target===Ge.currentTarget&&It()&&Ge.key===" "&&Ge.preventDefault(),D&&D(Ge),Ge.target===Ge.currentTarget&&It()&&Ge.key==="Enter"&&!d&&(Ge.preventDefault(),x&&x(Ge))}),ee=Ly(Ge=>{v&&Ge.key===" "&&j.current&&xe&&!Ge.defaultPrevented&&(mt.current=!1,j.current.stop(Ge,()=>{j.current.pulsate(Ge)})),U&&U(Ge),x&&Ge.target===Ge.currentTarget&&It()&&Ge.key===" "&&!Ge.defaultPrevented&&x(Ge)});let ke=h;ke==="button"&&(ge.href||ge.to)&&(ke=E);const ot={};ke==="button"?(ot.type=ue===void 0?"button":ue,ot.disabled=d):(!ge.href&&!ge.to&&(ot.role="button"),d&&(ot["aria-disabled"]=d));const dt=op(t,Oe,Ae),$t=He({},i,{centerRipple:o,component:h,disabled:d,disableRipple:m,disableTouchRipple:_,focusRipple:v,tabIndex:ie,focusVisible:xe}),ct=lse($t);return gt.jsxs(use,He({as:ke,className:Rr(ct.root,u),ownerState:$t,onBlur:ht,onClick:x,onContextMenu:De,onFocus:St,onKeyDown:ve,onKeyUp:ee,onMouseDown:Qe,onMouseLeave:rt,onMouseUp:Pe,onDragLeave:Se,onTouchEnd:wt,onTouchMove:xt,onTouchStart:We,ref:dt,tabIndex:d?-1:ie,type:ue},ot,ge,{children:[l,et?gt.jsx(ise,He({ref:Z,center:o},de)):null]}))}),JB=cse;function hse(n){return ds("MuiIconButton",n)}const dse=As("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),pse=["edge","children","className","color","disabled","disableFocusRipple","size"],fse=n=>{const{classes:e,disabled:t,color:i,edge:s,size:o}=n,l={root:["root",t&&"disabled",i!=="default"&&`color${ir(i)}`,s&&`edge${ir(s)}`,`size${ir(o)}`]};return Is(l,hse,e)},mse=jn(JB,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${ir(t.color)}`],t.edge&&e[`edge${ir(t.edge)}`],e[`size${ir(t.size)}`]]}})(({theme:n,ownerState:e})=>He({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(n.palette.action.active,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:n,ownerState:e})=>{var t;const i=(t=(n.vars||n).palette)==null?void 0:t[e.color];return He({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&He({color:i==null?void 0:i.main},!e.disableRipple&&{"&:hover":He({},i&&{backgroundColor:n.vars?`rgba(${i.mainChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(i.main,n.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:n.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:n.typography.pxToRem(28)},{[`&.${dse.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}})}),gse=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiIconButton"}),{edge:s=!1,children:o,className:l,color:u="default",disabled:h=!1,disableFocusRipple:d=!1,size:m="medium"}=i,_=Zn(i,pse),v=He({},i,{edge:s,color:u,disabled:h,disableFocusRipple:d,size:m}),E=fse(v);return gt.jsx(mse,He({className:Rr(E.root,l),centerRipple:!0,focusRipple:!d,disabled:h,ref:t},_,{ownerState:v,children:o}))}),ZL=gse;function _se(n){return ds("MuiTypography",n)}As("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const vse=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],yse=n=>{const{align:e,gutterBottom:t,noWrap:i,paragraph:s,variant:o,classes:l}=n,u={root:["root",o,n.align!=="inherit"&&`align${ir(e)}`,t&&"gutterBottom",i&&"noWrap",s&&"paragraph"]};return Is(u,_se,l)},bse=jn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${ir(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(({theme:n,ownerState:e})=>He({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&n.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),R4={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Tse={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ese=n=>Tse[n]||n,$se=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiTypography"}),s=Ese(i.color),o=Cw(He({},i,{color:s})),{align:l="inherit",className:u,component:h,gutterBottom:d=!1,noWrap:m=!1,paragraph:_=!1,variant:v="body1",variantMapping:E=R4}=o,w=Zn(o,vse),x=He({},o,{align:l,color:s,className:u,component:h,gutterBottom:d,noWrap:m,paragraph:_,variant:v,variantMapping:E}),A=h||(_?"p":E[v]||R4[v])||"span",O=yse(x);return gt.jsx(bse,He({as:A,ref:t,ownerState:x,className:Rr(O.root,u)},w))}),eD=$se,Sse=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function wse(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function xse(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=i=>n.ownerDocument.querySelector(`input[type="radio"]${i}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Cse(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||xse(n))}function Mse(n){const e=[],t=[];return Array.from(n.querySelectorAll(Sse)).forEach((i,s)=>{const o=wse(i);o===-1||!Cse(i)||(o===0?e.push(i):t.push({documentOrder:s,tabIndex:o,node:i}))}),t.sort((i,s)=>i.tabIndex===s.tabIndex?i.documentOrder-s.documentOrder:i.tabIndex-s.tabIndex).map(i=>i.node).concat(e)}function Ase(){return!0}function Ise(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:i=!1,disableRestoreFocus:s=!1,getTabbable:o=Mse,isEnabled:l=Ase,open:u}=n,h=he.useRef(!1),d=he.useRef(null),m=he.useRef(null),_=he.useRef(null),v=he.useRef(null),E=he.useRef(!1),w=he.useRef(null),x=op(e.ref,w),A=he.useRef(null);he.useEffect(()=>{!u||!w.current||(E.current=!t)},[t,u]),he.useEffect(()=>{if(!u||!w.current)return;const N=zp(w.current);return w.current.contains(N.activeElement)||(w.current.hasAttribute("tabIndex")||w.current.setAttribute("tabIndex","-1"),E.current&&w.current.focus()),()=>{s||(_.current&&_.current.focus&&(h.current=!0,_.current.focus()),_.current=null)}},[u]),he.useEffect(()=>{if(!u||!w.current)return;const N=zp(w.current),D=H=>{A.current=H,!(i||!l()||H.key!=="Tab")&&N.activeElement===w.current&&H.shiftKey&&(h.current=!0,m.current&&m.current.focus())},U=()=>{const H=w.current;if(H===null)return;if(!N.hasFocus()||!l()||h.current){h.current=!1;return}if(H.contains(N.activeElement)||i&&N.activeElement!==d.current&&N.activeElement!==m.current)return;if(N.activeElement!==v.current)v.current=null;else if(v.current!==null)return;if(!E.current)return;let z=[];if((N.activeElement===d.current||N.activeElement===m.current)&&(z=o(w.current)),z.length>0){var J,te;const re=!!((J=A.current)!=null&&J.shiftKey&&((te=A.current)==null?void 0:te.key)==="Tab"),ie=z[0],de=z[z.length-1];typeof ie!="string"&&typeof de!="string"&&(re?de.focus():ie.focus())}else H.focus()};N.addEventListener("focusin",U),N.addEventListener("keydown",D,!0);const F=setInterval(()=>{N.activeElement&&N.activeElement.tagName==="BODY"&&U()},50);return()=>{clearInterval(F),N.removeEventListener("focusin",U),N.removeEventListener("keydown",D,!0)}},[t,i,s,l,u,o]);const O=N=>{_.current===null&&(_.current=N.relatedTarget),E.current=!0,v.current=N.target;const D=e.props.onFocus;D&&D(N)},k=N=>{_.current===null&&(_.current=N.relatedTarget),E.current=!0};return gt.jsxs(he.Fragment,{children:[gt.jsx("div",{tabIndex:u?0:-1,onFocus:k,ref:d,"data-testid":"sentinelStart"}),he.cloneElement(e,{ref:x,onFocus:O}),gt.jsx("div",{tabIndex:u?0:-1,onFocus:k,ref:m,"data-testid":"sentinelEnd"})]})}function Rse(n){return typeof n=="function"?n():n}const kse=he.forwardRef(function(e,t){const{children:i,container:s,disablePortal:o=!1}=e,[l,u]=he.useState(null),h=op(he.isValidElement(i)?i.ref:null,t);if(_v(()=>{o||u(Rse(s)||document.body)},[s,o]),_v(()=>{if(l&&!o)return wA(t,l),()=>{wA(t,null)}},[t,l,o]),o){if(he.isValidElement(i)){const d={ref:h};return he.cloneElement(i,d)}return gt.jsx(he.Fragment,{children:i})}return gt.jsx(he.Fragment,{children:l&&nB.createPortal(i,l)})});function Ose(n){const e=zp(n);return e.body===n?vv(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function hS(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function k4(n){return parseInt(vv(n).getComputedStyle(n).paddingRight,10)||0}function Lse(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(n.tagName)!==-1,i=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||i}function O4(n,e,t,i,s){const o=[e,t,...i];[].forEach.call(n.children,l=>{const u=o.indexOf(l)===-1,h=!Lse(l);u&&h&&hS(l,s)})}function d2(n,e){let t=-1;return n.some((i,s)=>e(i)?(t=s,!0):!1),t}function Dse(n,e){const t=[],i=n.container;if(!e.disableScrollLock){if(Ose(i)){const l=VV(zp(i));t.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${k4(i)+l}px`;const u=zp(i).querySelectorAll(".mui-fixed");[].forEach.call(u,h=>{t.push({value:h.style.paddingRight,property:"padding-right",el:h}),h.style.paddingRight=`${k4(h)+l}px`})}let o;if(i.parentNode instanceof DocumentFragment)o=zp(i).body;else{const l=i.parentElement,u=vv(i);o=(l==null?void 0:l.nodeName)==="HTML"&&u.getComputedStyle(l).overflowY==="scroll"?l:i}t.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{t.forEach(({value:o,el:l,property:u})=>{o?l.style.setProperty(u,o):l.style.removeProperty(u)})}}function Nse(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Bse{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,t){let i=this.modals.indexOf(e);if(i!==-1)return i;i=this.modals.length,this.modals.push(e),e.modalRef&&hS(e.modalRef,!1);const s=Nse(t);O4(t,e.mount,e.modalRef,s,!0);const o=d2(this.containers,l=>l.container===t);return o!==-1?(this.containers[o].modals.push(e),i):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),i)}mount(e,t){const i=d2(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];s.restore||(s.restore=Dse(s,t))}remove(e,t=!0){const i=this.modals.indexOf(e);if(i===-1)return i;const s=d2(this.containers,l=>l.modals.indexOf(e)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(i,1),o.modals.length===0)o.restore&&o.restore(),e.modalRef&&hS(e.modalRef,t),O4(o.container,e.mount,e.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const l=o.modals[o.modals.length-1];l.modalRef&&hS(l.modalRef,!1)}return i}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Pse(n){return typeof n=="function"?n():n}function Fse(n){return n?n.props.hasOwnProperty("in"):!1}const Use=new Bse;function zse(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:i=!1,manager:s=Use,closeAfterTransition:o=!1,onTransitionEnter:l,onTransitionExited:u,children:h,onClose:d,open:m,rootRef:_}=n,v=he.useRef({}),E=he.useRef(null),w=he.useRef(null),x=op(w,_),[A,O]=he.useState(!m),k=Fse(h);let N=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(N=!1);const D=()=>zp(E.current),U=()=>(v.current.modalRef=w.current,v.current.mount=E.current,v.current),F=()=>{s.mount(U(),{disableScrollLock:i}),w.current&&(w.current.scrollTop=0)},H=Ly(()=>{const ge=Pse(e)||D().body;s.add(U(),ge),w.current&&F()}),z=he.useCallback(()=>s.isTopModal(U()),[s]),J=Ly(ge=>{E.current=ge,ge&&(m&&z()?F():w.current&&hS(w.current,N))}),te=he.useCallback(()=>{s.remove(U(),N)},[N,s]);he.useEffect(()=>()=>{te()},[te]),he.useEffect(()=>{m?H():(!k||!o)&&te()},[m,te,k,o,H]);const re=ge=>Ae=>{var j;(j=ge.onKeyDown)==null||j.call(ge,Ae),!(Ae.key!=="Escape"||Ae.which===229||!z())&&(t||(Ae.stopPropagation(),d&&d(Ae,"escapeKeyDown")))},ie=ge=>Ae=>{var j;(j=ge.onClick)==null||j.call(ge,Ae),Ae.target===Ae.currentTarget&&d&&d(Ae,"backdropClick")};return{getRootProps:(ge={})=>{const Ae=i8(n);delete Ae.onTransitionEnter,delete Ae.onTransitionExited;const j=He({},Ae,ge);return He({role:"presentation"},j,{onKeyDown:re(j),ref:x})},getBackdropProps:(ge={})=>{const Ae=ge;return He({"aria-hidden":!0},Ae,{onClick:ie(Ae),open:m})},getTransitionProps:()=>{const ge=()=>{O(!1),l&&l()},Ae=()=>{O(!0),u&&u(),o&&te()};return{onEnter:jL(ge,h==null?void 0:h.props.onEnter),onExited:jL(Ae,h==null?void 0:h.props.onExited)}},rootRef:x,portalRef:J,isTopModal:z,exited:A,hasTransition:k}}const Hse=["onChange","maxRows","minRows","style","value"];function cC(n){return parseInt(n,10)||0}const Gse={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Wse(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const Vse=he.forwardRef(function(e,t){const{onChange:i,maxRows:s,minRows:o=1,style:l,value:u}=e,h=Zn(e,Hse),{current:d}=he.useRef(u!=null),m=he.useRef(null),_=op(t,m),v=he.useRef(null),E=he.useCallback(()=>{const A=m.current,k=vv(A).getComputedStyle(A);if(k.width==="0px")return{outerHeightStyle:0,overflowing:!1};const N=v.current;N.style.width=k.width,N.value=A.value||e.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const D=k.boxSizing,U=cC(k.paddingBottom)+cC(k.paddingTop),F=cC(k.borderBottomWidth)+cC(k.borderTopWidth),H=N.scrollHeight;N.value="x";const z=N.scrollHeight;let J=H;o&&(J=Math.max(Number(o)*z,J)),s&&(J=Math.min(Number(s)*z,J)),J=Math.max(J,z);const te=J+(D==="border-box"?U+F:0),re=Math.abs(J-H)<=1;return{outerHeightStyle:te,overflowing:re}},[s,o,e.placeholder]),w=he.useCallback(()=>{const A=E();if(Wse(A))return;const O=m.current;O.style.height=`${A.outerHeightStyle}px`,O.style.overflow=A.overflowing?"hidden":""},[E]);_v(()=>{const A=()=>{w()};let O;const k=GB(A),N=m.current,D=vv(N);D.addEventListener("resize",k);let U;return typeof ResizeObserver<"u"&&(U=new ResizeObserver(A),U.observe(N)),()=>{k.clear(),cancelAnimationFrame(O),D.removeEventListener("resize",k),U&&U.disconnect()}},[E,w]),_v(()=>{w()});const x=A=>{d||w(),i&&i(A)};return gt.jsxs(he.Fragment,{children:[gt.jsx("textarea",He({value:u,onChange:x,ref:_,rows:o,style:l},h)),gt.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:v,tabIndex:-1,style:He({},Gse.shadow,l,{paddingTop:0,paddingBottom:0})})]})});function Av({props:n,states:e,muiFormControl:t}){return e.reduce((i,s)=>(i[s]=n[s],t&&typeof n[s]>"u"&&(i[s]=t[s]),i),{})}const jse=he.createContext(void 0),QB=jse;function s_(){return he.useContext(QB)}function Xse(n){return gt.jsx(dne,He({},n,{defaultTheme:QI,themeId:Ew}))}function L4(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function RA(n,e=!1){return n&&(L4(n.value)&&n.value!==""||e&&L4(n.defaultValue)&&n.defaultValue!=="")}function Yse(n){return n.startAdornment}function Kse(n){return ds("MuiInputBase",n)}const Jse=As("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),OT=Jse,Qse=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],tR=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${ir(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},nR=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},qse=n=>{const{classes:e,color:t,disabled:i,error:s,endAdornment:o,focused:l,formControl:u,fullWidth:h,hiddenLabel:d,multiline:m,readOnly:_,size:v,startAdornment:E,type:w}=n,x={root:["root",`color${ir(t)}`,i&&"disabled",s&&"error",h&&"fullWidth",l&&"focused",u&&"formControl",v&&v!=="medium"&&`size${ir(v)}`,m&&"multiline",E&&"adornedStart",o&&"adornedEnd",d&&"hiddenLabel",_&&"readOnly"],input:["input",i&&"disabled",w==="search"&&"inputTypeSearch",m&&"inputMultiline",v==="small"&&"inputSizeSmall",d&&"inputHiddenLabel",E&&"inputAdornedStart",o&&"inputAdornedEnd",_&&"readOnly"]};return Is(x,Kse,e)},rR=jn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:tR})(({theme:n,ownerState:e})=>He({},n.typography.body1,{color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${OT.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"}},e.multiline&&He({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),iR=jn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:nR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light",i=He({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},o=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return He({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${OT.formControl} &`]:{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${OT.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Zse=gt.jsx(Xse,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),eoe=he.forwardRef(function(e,t){var i;const s=Ws({props:e,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:l,autoFocus:u,className:h,components:d={},componentsProps:m={},defaultValue:_,disabled:v,disableInjectingGlobalStyles:E,endAdornment:w,fullWidth:x=!1,id:A,inputComponent:O="input",inputProps:k={},inputRef:N,maxRows:D,minRows:U,multiline:F=!1,name:H,onBlur:z,onChange:J,onClick:te,onFocus:re,onKeyDown:ie,onKeyUp:de,placeholder:oe,readOnly:ue,renderSuffix:ge,rows:Ae,slotProps:j={},slots:Z={},startAdornment:ne,type:le="text",value:_e}=s,Oe=Zn(s,Qse),xe=k.value!=null?k.value:_e,{current:Xe}=he.useRef(xe!=null),Re=he.useRef(),Je=he.useCallback(ct=>{},[]),et=op(Re,N,k.ref,Je),[at,Qe]=he.useState(!1),De=s_(),Se=Av({props:s,muiFormControl:De,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Se.focused=De?De.focused:at,he.useEffect(()=>{!De&&v&&at&&(Qe(!1),z&&z())},[De,v,at,z]);const Pe=De&&De.onFilled,rt=De&&De.onEmpty,We=he.useCallback(ct=>{RA(ct)?Pe&&Pe():rt&&rt()},[Pe,rt]);_v(()=>{Xe&&We({value:xe})},[xe,We,Xe]);const wt=ct=>{if(Se.disabled){ct.stopPropagation();return}re&&re(ct),k.onFocus&&k.onFocus(ct),De&&De.onFocus?De.onFocus(ct):Qe(!0)},xt=ct=>{z&&z(ct),k.onBlur&&k.onBlur(ct),De&&De.onBlur?De.onBlur(ct):Qe(!1)},ht=(ct,...Ge)=>{if(!Xe){const Me=ct.target||Re.current;if(Me==null)throw new Error(ab(1));We({value:Me.value})}k.onChange&&k.onChange(ct,...Ge),J&&J(ct,...Ge)};he.useEffect(()=>{We(Re.current)},[]);const St=ct=>{Re.current&&ct.currentTarget===ct.target&&Re.current.focus(),te&&te(ct)};let It=O,mt=k;F&&It==="input"&&(Ae?mt=He({type:void 0,minRows:Ae,maxRows:Ae},mt):mt=He({type:void 0,maxRows:D,minRows:U},mt),It=Vse);const ve=ct=>{We(ct.animationName==="mui-auto-fill-cancel"?Re.current:{value:"x"})};he.useEffect(()=>{De&&De.setAdornedStart(!!ne)},[De,ne]);const ee=He({},s,{color:Se.color||"primary",disabled:Se.disabled,endAdornment:w,error:Se.error,focused:Se.focused,formControl:De,fullWidth:x,hiddenLabel:Se.hiddenLabel,multiline:F,size:Se.size,startAdornment:ne,type:le}),ke=qse(ee),ot=Z.root||d.Root||rR,dt=j.root||m.root||{},$t=Z.input||d.Input||iR;return mt=He({},mt,(i=j.input)!=null?i:m.input),gt.jsxs(he.Fragment,{children:[!E&&Zse,gt.jsxs(ot,He({},dt,!IA(ot)&&{ownerState:He({},ee,dt.ownerState)},{ref:t,onClick:St},Oe,{className:Rr(ke.root,dt.className,h,ue&&"MuiInputBase-readOnly"),children:[ne,gt.jsx(QB.Provider,{value:null,children:gt.jsx($t,He({ownerState:ee,"aria-invalid":Se.error,"aria-describedby":o,autoComplete:l,autoFocus:u,defaultValue:_,disabled:Se.disabled,id:A,onAnimationStart:ve,name:H,placeholder:oe,readOnly:ue,required:Se.required,rows:Ae,value:xe,onKeyDown:ie,onKeyUp:de,type:le},mt,!IA($t)&&{as:It,ownerState:He({},ee,mt.ownerState)},{ref:et,className:Rr(ke.input,mt.className,ue&&"MuiInputBase-readOnly"),onBlur:xt,onChange:ht,onFocus:wt}))}),w,ge?ge(He({},Se,{startAdornment:ne})):null]}))]})}),qB=eoe;function toe(n){return ds("MuiInput",n)}const noe=He({},OT,As("MuiInput",["root","underline","input"])),v$=noe;function roe(n){return ds("MuiOutlinedInput",n)}const ioe=He({},OT,As("MuiOutlinedInput",["root","notchedOutline","input"])),L_=ioe;function soe(n){return ds("MuiFilledInput",n)}const ooe=He({},OT,As("MuiFilledInput",["root","underline","input"])),ry=ooe,aoe=Iw(gt.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),loe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],uoe={entering:{opacity:1},entered:{opacity:1}},coe=he.forwardRef(function(e,t){const i=qI(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:o,appear:l=!0,children:u,easing:h,in:d,onEnter:m,onEntered:_,onEntering:v,onExit:E,onExited:w,onExiting:x,style:A,timeout:O=s,TransitionComponent:k=n8}=e,N=Zn(e,loe),D=he.useRef(null),U=op(D,u.ref,t),F=oe=>ue=>{if(oe){const ge=D.current;ue===void 0?oe(ge):oe(ge,ue)}},H=F(v),z=F((oe,ue)=>{r8(oe);const ge=AA({style:A,timeout:O,easing:h},{mode:"enter"});oe.style.webkitTransition=i.transitions.create("opacity",ge),oe.style.transition=i.transitions.create("opacity",ge),m&&m(oe,ue)}),J=F(_),te=F(x),re=F(oe=>{const ue=AA({style:A,timeout:O,easing:h},{mode:"exit"});oe.style.webkitTransition=i.transitions.create("opacity",ue),oe.style.transition=i.transitions.create("opacity",ue),E&&E(oe)}),ie=F(w),de=oe=>{o&&o(D.current,oe)};return gt.jsx(k,He({appear:l,in:d,nodeRef:D,onEnter:z,onEntered:J,onEntering:H,onExit:re,onExited:ie,onExiting:te,addEndListener:de,timeout:O},N,{children:(oe,ue)=>he.cloneElement(u,He({style:He({opacity:0,visibility:oe==="exited"&&!d?"hidden":void 0},uoe[oe],A,u.props.style),ref:U},ue))}))}),s8=coe;function hoe(n){return ds("MuiBackdrop",n)}As("MuiBackdrop",["root","invisible"]);const doe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],poe=n=>{const{classes:e,invisible:t}=n;return Is({root:["root",t&&"invisible"]},hoe,e)},foe=jn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})(({ownerState:n})=>He({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},n.invisible&&{backgroundColor:"transparent"})),moe=he.forwardRef(function(e,t){var i,s,o;const l=Ws({props:e,name:"MuiBackdrop"}),{children:u,className:h,component:d="div",components:m={},componentsProps:_={},invisible:v=!1,open:E,slotProps:w={},slots:x={},TransitionComponent:A=s8,transitionDuration:O}=l,k=Zn(l,doe),N=He({},l,{component:d,invisible:v}),D=poe(N),U=(i=w.root)!=null?i:_.root;return gt.jsx(A,He({in:E,timeout:O},k,{children:gt.jsx(foe,He({"aria-hidden":!0},U,{as:(s=(o=x.root)!=null?o:m.Root)!=null?s:d,className:Rr(D.root,h,U==null?void 0:U.className),ownerState:He({},N,U==null?void 0:U.ownerState),classes:D,ref:t,children:u}))}))}),o8=moe,goe=As("MuiBox",["root"]),_oe=goe,voe=ZV(),yoe=yne({themeId:Ew,defaultTheme:voe,defaultClassName:_oe.root,generateClassName:PB.generate}),sR=yoe;function boe(n){return ds("MuiButton",n)}const Toe=As("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),hC=Toe,Eoe=he.createContext({}),$oe=Eoe,Soe=he.createContext(void 0),woe=Soe,xoe=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Coe=n=>{const{color:e,disableElevation:t,fullWidth:i,size:s,variant:o,classes:l}=n,u={root:["root",o,`${o}${ir(e)}`,`size${ir(s)}`,`${o}Size${ir(s)}`,`color${ir(e)}`,t&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${ir(s)}`],endIcon:["icon","endIcon",`iconSize${ir(s)}`]},h=Is(u,boe,l);return He({},l,h)},a8=n=>He({},n.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},n.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},n.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),Moe=jn(JB,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${ir(t.color)}`],e[`size${ir(t.size)}`],e[`${t.variant}Size${ir(t.size)}`],t.color==="inherit"&&e.colorInherit,t.disableElevation&&e.disableElevation,t.fullWidth&&e.fullWidth]}})(({theme:n,ownerState:e})=>{var t,i;const s=n.palette.mode==="light"?n.palette.grey[300]:n.palette.grey[800],o=n.palette.mode==="light"?n.palette.grey.A100:n.palette.grey[700];return He({},n.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":He({textDecoration:"none",backgroundColor:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(n.vars||n).palette[e.color].main}`,backgroundColor:n.vars?`rgba(${n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:n.vars?n.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(n.vars||n).shadows[4],"@media (hover: none)":{boxShadow:(n.vars||n).shadows[2],backgroundColor:(n.vars||n).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(n.vars||n).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(n.vars||n).palette[e.color].main}}),"&:active":He({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[8]}),[`&.${hC.focusVisible}`]:He({},e.variant==="contained"&&{boxShadow:(n.vars||n).shadows[6]}),[`&.${hC.disabled}`]:He({color:(n.vars||n).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(n.vars||n).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(n.vars||n).palette.action.disabled,boxShadow:(n.vars||n).shadows[0],backgroundColor:(n.vars||n).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main,border:n.vars?`1px solid rgba(${n.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${V0(n.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:n.vars?n.vars.palette.text.primary:(t=(i=n.palette).getContrastText)==null?void 0:t.call(i,n.palette.grey[300]),backgroundColor:n.vars?n.vars.palette.Button.inheritContainedBg:s,boxShadow:(n.vars||n).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].contrastText,backgroundColor:(n.vars||n).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:n})=>n.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${hC.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${hC.disabled}`]:{boxShadow:"none"}}),Aoe=jn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.startIcon,e[`iconSize${ir(t.size)}`]]}})(({ownerState:n})=>He({display:"inherit",marginRight:8,marginLeft:-4},n.size==="small"&&{marginLeft:-2},a8(n))),Ioe=jn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.endIcon,e[`iconSize${ir(t.size)}`]]}})(({ownerState:n})=>He({display:"inherit",marginRight:-4,marginLeft:8},n.size==="small"&&{marginRight:-2},a8(n))),Roe=he.forwardRef(function(e,t){const i=he.useContext($oe),s=he.useContext(woe),o=zB(i,e),l=Ws({props:o,name:"MuiButton"}),{children:u,color:h="primary",component:d="button",className:m,disabled:_=!1,disableElevation:v=!1,disableFocusRipple:E=!1,endIcon:w,focusVisibleClassName:x,fullWidth:A=!1,size:O="medium",startIcon:k,type:N,variant:D="text"}=l,U=Zn(l,xoe),F=He({},l,{color:h,component:d,disabled:_,disableElevation:v,disableFocusRipple:E,fullWidth:A,size:O,type:N,variant:D}),H=Coe(F),z=k&&gt.jsx(Aoe,{className:H.startIcon,ownerState:F,children:k}),J=w&&gt.jsx(Ioe,{className:H.endIcon,ownerState:F,children:w}),te=s||"";return gt.jsxs(Moe,He({ownerState:F,className:Rr(i.className,H.root,m,te),component:d,disabled:_,focusRipple:!E,focusVisibleClassName:Rr(H.focusVisible,x),ref:t,type:N},U,{classes:H,children:[z,u,J]}))}),tD=Roe;function koe(n){return ds("MuiCard",n)}As("MuiCard",["root"]);const Ooe=["className","raised"],Loe=n=>{const{classes:e}=n;return Is({root:["root"]},koe,e)},Doe=jn(ZI,{name:"MuiCard",slot:"Root",overridesResolver:(n,e)=>e.root})(()=>({overflow:"hidden"})),Noe=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiCard"}),{className:s,raised:o=!1}=i,l=Zn(i,Ooe),u=He({},i,{raised:o}),h=Loe(u);return gt.jsx(Doe,He({className:Rr(h.root,s),elevation:o?8:void 0,ref:t,ownerState:u},l))}),Boe=Noe;function Poe(n){return ds("MuiCardContent",n)}As("MuiCardContent",["root"]);const Foe=["className","component"],Uoe=n=>{const{classes:e}=n;return Is({root:["root"]},Poe,e)},zoe=jn("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(n,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),Hoe=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiCardContent"}),{className:s,component:o="div"}=i,l=Zn(i,Foe),u=He({},i,{component:o}),h=Uoe(u);return gt.jsx(zoe,He({as:o,className:Rr(h.root,s),ownerState:u,ref:t},l))}),Goe=Hoe;function Woe(n){return ds("PrivateSwitchBase",n)}As("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Voe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],joe=n=>{const{classes:e,checked:t,disabled:i,edge:s}=n,o={root:["root",t&&"checked",i&&"disabled",s&&`edge${ir(s)}`],input:["input"]};return Is(o,Woe,e)},Xoe=jn(JB)(({ownerState:n})=>He({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),Yoe=jn("input",{shouldForwardProp:Of})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Koe=he.forwardRef(function(e,t){const{autoFocus:i,checked:s,checkedIcon:o,className:l,defaultChecked:u,disabled:h,disableFocusRipple:d=!1,edge:m=!1,icon:_,id:v,inputProps:E,inputRef:w,name:x,onBlur:A,onChange:O,onFocus:k,readOnly:N,required:D=!1,tabIndex:U,type:F,value:H}=e,z=Zn(e,Voe),[J,te]=xA({controlled:s,default:!!u,name:"SwitchBase",state:"checked"}),re=s_(),ie=Z=>{k&&k(Z),re&&re.onFocus&&re.onFocus(Z)},de=Z=>{A&&A(Z),re&&re.onBlur&&re.onBlur(Z)},oe=Z=>{if(Z.nativeEvent.defaultPrevented)return;const ne=Z.target.checked;te(ne),O&&O(Z,ne)};let ue=h;re&&typeof ue>"u"&&(ue=re.disabled);const ge=F==="checkbox"||F==="radio",Ae=He({},e,{checked:J,disabled:ue,disableFocusRipple:d,edge:m}),j=joe(Ae);return gt.jsxs(Xoe,He({component:"span",className:Rr(j.root,l),centerRipple:!0,focusRipple:!d,disabled:ue,tabIndex:null,role:void 0,onFocus:ie,onBlur:de,ownerState:Ae,ref:t},z,{children:[gt.jsx(Yoe,He({autoFocus:i,checked:s,defaultChecked:u,className:j.input,disabled:ue,id:ge?v:void 0,name:x,onChange:oe,readOnly:N,ref:w,required:D,ownerState:Ae,tabIndex:U,type:F},F==="checkbox"&&H===void 0?{}:{value:H},E)),J?o:_]}))}),Joe=Koe,Qoe=Iw(gt.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),qoe=Iw(gt.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Zoe=Iw(gt.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function eae(n){return ds("MuiCheckbox",n)}const tae=As("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),p2=tae,nae=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],rae=n=>{const{classes:e,indeterminate:t,color:i,size:s}=n,o={root:["root",t&&"indeterminate",`color${ir(i)}`,`size${ir(s)}`]},l=Is(o,eae,e);return He({},e,l)},iae=jn(Joe,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${ir(t.size)}`],t.color!=="default"&&e[`color${ir(t.color)}`]]}})(({theme:n,ownerState:e})=>He({color:(n.vars||n).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${e.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[e.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:V0(e.color==="default"?n.palette.action.active:n.palette[e.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${p2.checked}, &.${p2.indeterminate}`]:{color:(n.vars||n).palette[e.color].main},[`&.${p2.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),sae=gt.jsx(qoe,{}),oae=gt.jsx(Qoe,{}),aae=gt.jsx(Zoe,{}),lae=he.forwardRef(function(e,t){var i,s;const o=Ws({props:e,name:"MuiCheckbox"}),{checkedIcon:l=sae,color:u="primary",icon:h=oae,indeterminate:d=!1,indeterminateIcon:m=aae,inputProps:_,size:v="medium",className:E}=o,w=Zn(o,nae),x=d?m:h,A=d?m:l,O=He({},o,{color:u,indeterminate:d,size:v}),k=rae(O);return gt.jsx(iae,He({type:"checkbox",inputProps:He({"data-indeterminate":d},_),icon:he.cloneElement(x,{fontSize:(i=x.props.fontSize)!=null?i:v}),checkedIcon:he.cloneElement(A,{fontSize:(s=A.props.fontSize)!=null?s:v}),ownerState:O,ref:t,className:Rr(k.root,E)},w,{classes:k}))}),uae=lae,cae=lre({createStyledComponent:jn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`maxWidth${ir(String(t.maxWidth))}`],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:n=>Ws({props:n,name:"MuiContainer"})}),nD=cae;function hae(n){return ds("MuiModal",n)}As("MuiModal",["root","hidden","backdrop"]);const dae=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],pae=n=>{const{open:e,exited:t,classes:i}=n;return Is({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},hae,i)},fae=jn("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(({theme:n,ownerState:e})=>He({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),mae=jn(o8,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),gae=he.forwardRef(function(e,t){var i,s,o,l,u,h;const d=Ws({name:"MuiModal",props:e}),{BackdropComponent:m=mae,BackdropProps:_,className:v,closeAfterTransition:E=!1,children:w,container:x,component:A,components:O={},componentsProps:k={},disableAutoFocus:N=!1,disableEnforceFocus:D=!1,disableEscapeKeyDown:U=!1,disablePortal:F=!1,disableRestoreFocus:H=!1,disableScrollLock:z=!1,hideBackdrop:J=!1,keepMounted:te=!1,onBackdropClick:re,open:ie,slotProps:de,slots:oe}=d,ue=Zn(d,dae),ge=He({},d,{closeAfterTransition:E,disableAutoFocus:N,disableEnforceFocus:D,disableEscapeKeyDown:U,disablePortal:F,disableRestoreFocus:H,disableScrollLock:z,hideBackdrop:J,keepMounted:te}),{getRootProps:Ae,getBackdropProps:j,getTransitionProps:Z,portalRef:ne,isTopModal:le,exited:_e,hasTransition:Oe}=zse(He({},ge,{rootRef:t})),xe=He({},ge,{exited:_e}),Xe=pae(xe),Re={};if(w.props.tabIndex===void 0&&(Re.tabIndex="-1"),Oe){const{onEnter:Pe,onExited:rt}=Z();Re.onEnter=Pe,Re.onExited=rt}const Je=(i=(s=oe==null?void 0:oe.root)!=null?s:O.Root)!=null?i:fae,et=(o=(l=oe==null?void 0:oe.backdrop)!=null?l:O.Backdrop)!=null?o:m,at=(u=de==null?void 0:de.root)!=null?u:k.root,Qe=(h=de==null?void 0:de.backdrop)!=null?h:k.backdrop,De=kT({elementType:Je,externalSlotProps:at,externalForwardedProps:ue,getSlotProps:Ae,additionalProps:{ref:t,as:A},ownerState:xe,className:Rr(v,at==null?void 0:at.className,Xe==null?void 0:Xe.root,!xe.open&&xe.exited&&(Xe==null?void 0:Xe.hidden))}),Se=kT({elementType:et,externalSlotProps:Qe,additionalProps:_,getSlotProps:Pe=>j(He({},Pe,{onClick:rt=>{re&&re(rt),Pe!=null&&Pe.onClick&&Pe.onClick(rt)}})),className:Rr(Qe==null?void 0:Qe.className,_==null?void 0:_.className,Xe==null?void 0:Xe.backdrop),ownerState:xe});return!te&&!ie&&(!Oe||_e)?null:gt.jsx(kse,{ref:ne,container:x,disablePortal:F,children:gt.jsxs(Je,He({},De,{children:[!J&&m?gt.jsx(et,He({},Se)):null,gt.jsx(Ise,{disableEnforceFocus:D,disableAutoFocus:N,disableRestoreFocus:H,isEnabled:le,open:ie,children:he.cloneElement(w,Re)})]}))})}),l8=gae;function _ae(n){return ds("MuiDialog",n)}const vae=As("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),f2=vae,yae=he.createContext({}),bae=yae,Tae=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Eae=jn(o8,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),$ae=n=>{const{classes:e,scroll:t,maxWidth:i,fullWidth:s,fullScreen:o}=n,l={root:["root"],container:["container",`scroll${ir(t)}`],paper:["paper",`paperScroll${ir(t)}`,`paperWidth${ir(String(i))}`,s&&"paperFullWidth",o&&"paperFullScreen"]};return Is(l,_ae,e)},Sae=jn(l8,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),wae=jn("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${ir(t.scroll)}`]]}})(({ownerState:n})=>He({height:"100%","@media print":{height:"auto"},outline:0},n.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},n.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),xae=jn(ZI,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${ir(t.scroll)}`],e[`paperWidth${ir(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(({theme:n,ownerState:e})=>He({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${f2.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${n.breakpoints.values[e.maxWidth]}${n.breakpoints.unit}`,[`&.${f2.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${f2.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Cae=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiDialog"}),s=qI(),o={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":u,BackdropComponent:h,BackdropProps:d,children:m,className:_,disableEscapeKeyDown:v=!1,fullScreen:E=!1,fullWidth:w=!1,maxWidth:x="sm",onBackdropClick:A,onClose:O,open:k,PaperComponent:N=ZI,PaperProps:D={},scroll:U="paper",TransitionComponent:F=s8,transitionDuration:H=o,TransitionProps:z}=i,J=Zn(i,Tae),te=He({},i,{disableEscapeKeyDown:v,fullScreen:E,fullWidth:w,maxWidth:x,scroll:U}),re=$ae(te),ie=he.useRef(),de=Ae=>{ie.current=Ae.target===Ae.currentTarget},oe=Ae=>{ie.current&&(ie.current=null,A&&A(Ae),O&&O(Ae,"backdropClick"))},ue=YI(u),ge=he.useMemo(()=>({titleId:ue}),[ue]);return gt.jsx(Sae,He({className:Rr(re.root,_),closeAfterTransition:!0,components:{Backdrop:Eae},componentsProps:{backdrop:He({transitionDuration:H,as:h},d)},disableEscapeKeyDown:v,onClose:O,open:k,ref:t,onClick:oe,ownerState:te},J,{children:gt.jsx(F,He({appear:!0,in:k,timeout:H,role:"presentation"},z,{children:gt.jsx(wae,{className:Rr(re.container),onMouseDown:de,ownerState:te,children:gt.jsx(xae,He({as:N,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":ue},D,{className:Rr(re.paper,D.className),ownerState:te,children:gt.jsx(bae.Provider,{value:ge,children:m})}))})}))}))}),Mae=Cae,Aae=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Iae=n=>{const{classes:e,disableUnderline:t}=n,s=Is({root:["root",!t&&"underline"],input:["input"]},soe,e);return He({},e,s)},Rae=jn(rR,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...tR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{var t;const i=n.palette.mode==="light",s=i?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=i?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",l=i?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=i?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return He({position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:l,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o}},[`&.${ry.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:o},[`&.${ry.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:u}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t=(n.vars||n).palette[e.color||"primary"])==null?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ry.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ry.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:s}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ry.disabled}, .${ry.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${ry.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&He({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),kae=jn(iR,{name:"MuiFilledInput",slot:"Input",overridesResolver:nR})(({theme:n,ownerState:e})=>He({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),u8=he.forwardRef(function(e,t){var i,s,o,l;const u=Ws({props:e,name:"MuiFilledInput"}),{components:h={},componentsProps:d,fullWidth:m=!1,inputComponent:_="input",multiline:v=!1,slotProps:E,slots:w={},type:x="text"}=u,A=Zn(u,Aae),O=He({},u,{fullWidth:m,inputComponent:_,multiline:v,type:x}),k=Iae(u),N={root:{ownerState:O},input:{ownerState:O}},D=E??d?ip(N,E??d):N,U=(i=(s=w.root)!=null?s:h.Root)!=null?i:Rae,F=(o=(l=w.input)!=null?l:h.Input)!=null?o:kae;return gt.jsx(qB,He({slots:{root:U,input:F},componentsProps:D,fullWidth:m,inputComponent:_,multiline:v,ref:t,type:x},A,{classes:k}))});u8.muiName="Input";const c8=u8;function Oae(n){return ds("MuiFormControl",n)}As("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Lae=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Dae=n=>{const{classes:e,margin:t,fullWidth:i}=n,s={root:["root",t!=="none"&&`margin${ir(t)}`,i&&"fullWidth"]};return Is(s,Oae,e)},Nae=jn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>He({},e.root,e[`margin${ir(n.margin)}`],n.fullWidth&&e.fullWidth)})(({ownerState:n})=>He({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},n.margin==="normal"&&{marginTop:16,marginBottom:8},n.margin==="dense"&&{marginTop:8,marginBottom:4},n.fullWidth&&{width:"100%"})),Bae=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiFormControl"}),{children:s,className:o,color:l="primary",component:u="div",disabled:h=!1,error:d=!1,focused:m,fullWidth:_=!1,hiddenLabel:v=!1,margin:E="none",required:w=!1,size:x="medium",variant:A="outlined"}=i,O=Zn(i,Lae),k=He({},i,{color:l,component:u,disabled:h,error:d,fullWidth:_,hiddenLabel:v,margin:E,required:w,size:x,variant:A}),N=Dae(k),[D,U]=he.useState(()=>{let de=!1;return s&&he.Children.forEach(s,oe=>{if(!LM(oe,["Input","Select"]))return;const ue=LM(oe,["Select"])?oe.props.input:oe;ue&&Yse(ue.props)&&(de=!0)}),de}),[F,H]=he.useState(()=>{let de=!1;return s&&he.Children.forEach(s,oe=>{LM(oe,["Input","Select"])&&(RA(oe.props,!0)||RA(oe.props.inputProps,!0))&&(de=!0)}),de}),[z,J]=he.useState(!1);h&&z&&J(!1);const te=m!==void 0&&!h?m:z;let re;const ie=he.useMemo(()=>({adornedStart:D,setAdornedStart:U,color:l,disabled:h,error:d,filled:F,focused:te,fullWidth:_,hiddenLabel:v,size:x,onBlur:()=>{J(!1)},onEmpty:()=>{H(!1)},onFilled:()=>{H(!0)},onFocus:()=>{J(!0)},registerEffect:re,required:w,variant:A}),[D,l,h,d,F,te,_,v,re,w,x,A]);return gt.jsx(QB.Provider,{value:ie,children:gt.jsx(Nae,He({as:u,ownerState:k,className:Rr(N.root,o),ref:t},O,{children:s}))})}),Pae=Bae,Fae=gre({createStyledComponent:jn("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>Ws({props:n,name:"MuiStack"})}),ZB=Fae;function Uae(n){return ds("MuiFormControlLabel",n)}const zae=As("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),X$=zae,Hae=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Gae=n=>{const{classes:e,disabled:t,labelPlacement:i,error:s,required:o}=n,l={root:["root",t&&"disabled",`labelPlacement${ir(i)}`,s&&"error",o&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return Is(l,Uae,e)},Wae=jn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${X$.label}`]:e.label},e.root,e[`labelPlacement${ir(t.labelPlacement)}`]]}})(({theme:n,ownerState:e})=>He({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${X$.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${X$.label}`]:{[`&.${X$.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),Vae=jn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${X$.error}`]:{color:(n.vars||n).palette.error.main}})),jae=he.forwardRef(function(e,t){var i,s;const o=Ws({props:e,name:"MuiFormControlLabel"}),{className:l,componentsProps:u={},control:h,disabled:d,disableTypography:m,label:_,labelPlacement:v="end",required:E,slotProps:w={}}=o,x=Zn(o,Hae),A=s_(),O=(i=d??h.props.disabled)!=null?i:A==null?void 0:A.disabled,k=E??h.props.required,N={disabled:O,required:k};["checked","name","onChange","value","inputRef"].forEach(J=>{typeof h.props[J]>"u"&&typeof o[J]<"u"&&(N[J]=o[J])});const D=Av({props:o,muiFormControl:A,states:["error"]}),U=He({},o,{disabled:O,labelPlacement:v,required:k,error:D.error}),F=Gae(U),H=(s=w.typography)!=null?s:u.typography;let z=_;return z!=null&&z.type!==eD&&!m&&(z=gt.jsx(eD,He({component:"span"},H,{className:Rr(F.label,H==null?void 0:H.className),children:z}))),gt.jsxs(Wae,He({className:Rr(F.root,l),ownerState:U,ref:t},x,{children:[he.cloneElement(h,N),k?gt.jsxs(ZB,{display:"block",children:[z,gt.jsxs(Vae,{ownerState:U,"aria-hidden":!0,className:F.asterisk,children:["","*"]})]}):z]}))}),Xae=jae;function Yae(n){return ds("MuiFormGroup",n)}As("MuiFormGroup",["root","row","error"]);const Kae=["className","row"],Jae=n=>{const{classes:e,row:t,error:i}=n;return Is({root:["root",t&&"row",i&&"error"]},Yae,e)},Qae=jn("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.row&&e.row]}})(({ownerState:n})=>He({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})),qae=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiFormGroup"}),{className:s,row:o=!1}=i,l=Zn(i,Kae),u=s_(),h=Av({props:i,muiFormControl:u,states:["error"]}),d=He({},i,{row:o,error:h.error}),m=Jae(d);return gt.jsx(Qae,He({className:Rr(m.root,s),ownerState:d,ref:t},l))}),Zae=qae;function ele(n){return ds("MuiFormHelperText",n)}const tle=As("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),D4=tle;var N4;const nle=["children","className","component","disabled","error","filled","focused","margin","required","variant"],rle=n=>{const{classes:e,contained:t,size:i,disabled:s,error:o,filled:l,focused:u,required:h}=n,d={root:["root",s&&"disabled",o&&"error",i&&`size${ir(i)}`,t&&"contained",u&&"focused",l&&"filled",h&&"required"]};return Is(d,ele,e)},ile=jn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${ir(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(({theme:n,ownerState:e})=>He({color:(n.vars||n).palette.text.secondary},n.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${D4.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${D4.error}`]:{color:(n.vars||n).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),sle=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiFormHelperText"}),{children:s,className:o,component:l="p"}=i,u=Zn(i,nle),h=s_(),d=Av({props:i,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),m=He({},i,{component:l,contained:d.variant==="filled"||d.variant==="outlined",variant:d.variant,size:d.size,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),_=rle(m);return gt.jsx(ile,He({as:l,ownerState:m,className:Rr(_.root,o),ref:t},u,{children:s===" "?N4||(N4=gt.jsx("span",{className:"notranslate",children:""})):s}))}),ole=sle;function ale(n){return ds("MuiFormLabel",n)}const lle=As("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),dS=lle,ule=["children","className","color","component","disabled","error","filled","focused","required"],cle=n=>{const{classes:e,color:t,focused:i,disabled:s,error:o,filled:l,required:u}=n,h={root:["root",`color${ir(t)}`,s&&"disabled",o&&"error",l&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",o&&"error"]};return Is(h,ale,e)},hle=jn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>He({},e.root,n.color==="secondary"&&e.colorSecondary,n.filled&&e.filled)})(({theme:n,ownerState:e})=>He({color:(n.vars||n).palette.text.secondary},n.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${dS.focused}`]:{color:(n.vars||n).palette[e.color].main},[`&.${dS.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${dS.error}`]:{color:(n.vars||n).palette.error.main}})),dle=jn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(({theme:n})=>({[`&.${dS.error}`]:{color:(n.vars||n).palette.error.main}})),ple=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiFormLabel"}),{children:s,className:o,component:l="label"}=i,u=Zn(i,ule),h=s_(),d=Av({props:i,muiFormControl:h,states:["color","required","focused","disabled","error","filled"]}),m=He({},i,{color:d.color||"primary",component:l,disabled:d.disabled,error:d.error,filled:d.filled,focused:d.focused,required:d.required}),_=cle(m);return gt.jsxs(hle,He({as:l,ownerState:m,className:Rr(_.root,o),ref:t},u,{children:[s,d.required&&gt.jsxs(dle,{ownerState:m,"aria-hidden":!0,className:_.asterisk,children:["","*"]})]}))}),fle=ple,mle=he.createContext(),B4=mle;function gle(n){return ds("MuiGrid",n)}const _le=[0,1,2,3,4,5,6,7,8,9,10],vle=["column-reverse","column","row-reverse","row"],yle=["nowrap","wrap-reverse","wrap"],y$=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],XS=As("MuiGrid",["root","container","item","zeroMinWidth",..._le.map(n=>`spacing-xs-${n}`),...vle.map(n=>`direction-xs-${n}`),...yle.map(n=>`wrap-xs-${n}`),...y$.map(n=>`grid-xs-${n}`),...y$.map(n=>`grid-sm-${n}`),...y$.map(n=>`grid-md-${n}`),...y$.map(n=>`grid-lg-${n}`),...y$.map(n=>`grid-xl-${n}`)]),ble=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function vT(n){const e=parseFloat(n);return`${e}${String(n).replace(String(e),"")||"px"}`}function Tle({theme:n,ownerState:e}){let t;return n.breakpoints.keys.reduce((i,s)=>{let o={};if(e[s]&&(t=e[s]),!t)return i;if(t===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const l=jy({values:e.columns,breakpoints:n.breakpoints.values}),u=typeof l=="object"?l[s]:l;if(u==null)return i;const h=`${Math.round(t/u*1e8)/1e6}%`;let d={};if(e.container&&e.item&&e.columnSpacing!==0){const m=n.spacing(e.columnSpacing);if(m!=="0px"){const _=`calc(${h} + ${vT(m)})`;d={flexBasis:_,maxWidth:_}}}o=He({flexBasis:h,flexGrow:0,maxWidth:h},d)}return n.breakpoints.values[s]===0?Object.assign(i,o):i[n.breakpoints.up(s)]=o,i},{})}function Ele({theme:n,ownerState:e}){const t=jy({values:e.direction,breakpoints:n.breakpoints.values});return Gp({theme:n},t,i=>{const s={flexDirection:i};return i.indexOf("column")===0&&(s[`& > .${XS.item}`]={maxWidth:"none"}),s})}function h8({breakpoints:n,values:e}){let t="";Object.keys(e).forEach(s=>{t===""&&e[s]!==0&&(t=s)});const i=Object.keys(n).sort((s,o)=>n[s]-n[o]);return i.slice(0,i.indexOf(t))}function $le({theme:n,ownerState:e}){const{container:t,rowSpacing:i}=e;let s={};if(t&&i!==0){const o=jy({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=h8({breakpoints:n.breakpoints.values,values:o})),s=Gp({theme:n},o,(u,h)=>{var d;const m=n.spacing(u);return m!=="0px"?{marginTop:`-${vT(m)}`,[`& > .${XS.item}`]:{paddingTop:vT(m)}}:(d=l)!=null&&d.includes(h)?{}:{marginTop:0,[`& > .${XS.item}`]:{paddingTop:0}}})}return s}function Sle({theme:n,ownerState:e}){const{container:t,columnSpacing:i}=e;let s={};if(t&&i!==0){const o=jy({values:i,breakpoints:n.breakpoints.values});let l;typeof o=="object"&&(l=h8({breakpoints:n.breakpoints.values,values:o})),s=Gp({theme:n},o,(u,h)=>{var d;const m=n.spacing(u);return m!=="0px"?{width:`calc(100% + ${vT(m)})`,marginLeft:`-${vT(m)}`,[`& > .${XS.item}`]:{paddingLeft:vT(m)}}:(d=l)!=null&&d.includes(h)?{}:{width:"100%",marginLeft:0,[`& > .${XS.item}`]:{paddingLeft:0}}})}return s}function wle(n,e,t={}){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[t[`spacing-xs-${String(n)}`]];const i=[];return e.forEach(s=>{const o=n[s];Number(o)>0&&i.push(t[`spacing-${s}-${String(o)}`])}),i}const xle=jn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{container:i,direction:s,item:o,spacing:l,wrap:u,zeroMinWidth:h,breakpoints:d}=t;let m=[];i&&(m=wle(l,d,e));const _=[];return d.forEach(v=>{const E=t[v];E&&_.push(e[`grid-${v}-${String(E)}`])}),[e.root,i&&e.container,o&&e.item,h&&e.zeroMinWidth,...m,s!=="row"&&e[`direction-xs-${String(s)}`],u!=="wrap"&&e[`wrap-xs-${String(u)}`],..._]}})(({ownerState:n})=>He({boxSizing:"border-box"},n.container&&{display:"flex",flexWrap:"wrap",width:"100%"},n.item&&{margin:0},n.zeroMinWidth&&{minWidth:0},n.wrap!=="wrap"&&{flexWrap:n.wrap}),Ele,$le,Sle,Tle);function Cle(n,e){if(!n||n<=0)return[];if(typeof n=="string"&&!Number.isNaN(Number(n))||typeof n=="number")return[`spacing-xs-${String(n)}`];const t=[];return e.forEach(i=>{const s=n[i];if(Number(s)>0){const o=`spacing-${i}-${String(s)}`;t.push(o)}}),t}const Mle=n=>{const{classes:e,container:t,direction:i,item:s,spacing:o,wrap:l,zeroMinWidth:u,breakpoints:h}=n;let d=[];t&&(d=Cle(o,h));const m=[];h.forEach(v=>{const E=n[v];E&&m.push(`grid-${v}-${String(E)}`)});const _={root:["root",t&&"container",s&&"item",u&&"zeroMinWidth",...d,i!=="row"&&`direction-xs-${String(i)}`,l!=="wrap"&&`wrap-xs-${String(l)}`,...m]};return Is(_,gle,e)},Ale=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiGrid"}),{breakpoints:s}=qI(),o=Cw(i),{className:l,columns:u,columnSpacing:h,component:d="div",container:m=!1,direction:_="row",item:v=!1,rowSpacing:E,spacing:w=0,wrap:x="wrap",zeroMinWidth:A=!1}=o,O=Zn(o,ble),k=E||w,N=h||w,D=he.useContext(B4),U=m?u||12:D,F={},H=He({},O);s.keys.forEach(te=>{O[te]!=null&&(F[te]=O[te],delete H[te])});const z=He({},o,{columns:U,container:m,direction:_,item:v,rowSpacing:k,columnSpacing:N,wrap:x,zeroMinWidth:A,spacing:w},F,{breakpoints:s.keys}),J=Mle(z);return gt.jsx(B4.Provider,{value:U,children:gt.jsx(xle,He({ownerState:z,className:Rr(J.root,l),as:d,ref:t},H))})}),Ile=Ale,Rle=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function rD(n){return`scale(${n}, ${n**2})`}const kle={entering:{opacity:1,transform:rD(1)},entered:{opacity:1,transform:"none"}},m2=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),d8=he.forwardRef(function(e,t){const{addEndListener:i,appear:s=!0,children:o,easing:l,in:u,onEnter:h,onEntered:d,onEntering:m,onExit:_,onExited:v,onExiting:E,style:w,timeout:x="auto",TransitionComponent:A=n8}=e,O=Zn(e,Rle),k=GV(),N=he.useRef(),D=qI(),U=he.useRef(null),F=op(U,o.ref,t),H=ue=>ge=>{if(ue){const Ae=U.current;ge===void 0?ue(Ae):ue(Ae,ge)}},z=H(m),J=H((ue,ge)=>{r8(ue);const{duration:Ae,delay:j,easing:Z}=AA({style:w,timeout:x,easing:l},{mode:"enter"});let ne;x==="auto"?(ne=D.transitions.getAutoHeightDuration(ue.clientHeight),N.current=ne):ne=Ae,ue.style.transition=[D.transitions.create("opacity",{duration:ne,delay:j}),D.transitions.create("transform",{duration:m2?ne:ne*.666,delay:j,easing:Z})].join(","),h&&h(ue,ge)}),te=H(d),re=H(E),ie=H(ue=>{const{duration:ge,delay:Ae,easing:j}=AA({style:w,timeout:x,easing:l},{mode:"exit"});let Z;x==="auto"?(Z=D.transitions.getAutoHeightDuration(ue.clientHeight),N.current=Z):Z=ge,ue.style.transition=[D.transitions.create("opacity",{duration:Z,delay:Ae}),D.transitions.create("transform",{duration:m2?Z:Z*.666,delay:m2?Ae:Ae||Z*.333,easing:j})].join(","),ue.style.opacity=0,ue.style.transform=rD(.75),_&&_(ue)}),de=H(v),oe=ue=>{x==="auto"&&k.start(N.current||0,ue),i&&i(U.current,ue)};return gt.jsx(A,He({appear:s,in:u,nodeRef:U,onEnter:J,onEntered:te,onEntering:z,onExit:ie,onExited:de,onExiting:re,addEndListener:oe,timeout:x==="auto"?null:x},O,{children:(ue,ge)=>he.cloneElement(o,He({style:He({opacity:0,transform:rD(.75),visibility:ue==="exited"&&!u?"hidden":void 0},kle[ue],w,o.props.style),ref:F},ge))}))});d8.muiSupportAuto=!0;const Ole=d8,Lle=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Dle=n=>{const{classes:e,disableUnderline:t}=n,s=Is({root:["root",!t&&"underline"],input:["input"]},toe,e);return He({},e,s)},Nle=jn(rR,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...tR(n,e),!t.disableUnderline&&e.underline]}})(({theme:n,ownerState:e})=>{let i=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(i=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),He({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${v$.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${v$.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${v$.disabled}, .${v$.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${i}`}},[`&.${v$.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Ble=jn(iR,{name:"MuiInput",slot:"Input",overridesResolver:nR})({}),p8=he.forwardRef(function(e,t){var i,s,o,l;const u=Ws({props:e,name:"MuiInput"}),{disableUnderline:h,components:d={},componentsProps:m,fullWidth:_=!1,inputComponent:v="input",multiline:E=!1,slotProps:w,slots:x={},type:A="text"}=u,O=Zn(u,Lle),k=Dle(u),D={root:{ownerState:{disableUnderline:h}}},U=w??m?ip(w??m,D):D,F=(i=(s=x.root)!=null?s:d.Root)!=null?i:Nle,H=(o=(l=x.input)!=null?l:d.Input)!=null?o:Ble;return gt.jsx(qB,He({slots:{root:F,input:H},slotProps:U,fullWidth:_,inputComponent:v,multiline:E,ref:t,type:A},O,{classes:k}))});p8.muiName="Input";const f8=p8;function Ple(n){return ds("MuiInputLabel",n)}As("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Fle=["disableAnimation","margin","shrink","variant","className"],Ule=n=>{const{classes:e,formControl:t,size:i,shrink:s,disableAnimation:o,variant:l,required:u}=n,h={root:["root",t&&"formControl",!o&&"animated",s&&"shrink",i&&i!=="normal"&&`size${ir(i)}`,l],asterisk:[u&&"asterisk"]},d=Is(h,Ple,e);return He({},e,d)},zle=jn(fle,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${dS.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(({theme:n,ownerState:e})=>He({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})},e.variant==="filled"&&He({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&He({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&He({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Hle=he.forwardRef(function(e,t){const i=Ws({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,shrink:o,className:l}=i,u=Zn(i,Fle),h=s_();let d=o;typeof d>"u"&&h&&(d=h.filled||h.focused||h.adornedStart);const m=Av({props:i,muiFormControl:h,states:["size","variant","required","focused"]}),_=He({},i,{disableAnimation:s,formControl:h,shrink:d,size:m.size,variant:m.variant,required:m.required,focused:m.focused}),v=Ule(_);return gt.jsx(zle,He({"data-shrink":d,ownerState:_,ref:t,className:Rr(v.root,l)},u,{classes:v}))}),Gle=Hle,Wle=he.createContext({}),Vle=Wle;function jle(n){return ds("MuiList",n)}As("MuiList",["root","padding","dense","subheader"]);const Xle=["children","className","component","dense","disablePadding","subheader"],Yle=n=>{const{classes:e,disablePadding:t,dense:i,subheader:s}=n;return Is({root:["root",!t&&"padding",i&&"dense",s&&"subheader"]},jle,e)},Kle=jn("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})(({ownerState:n})=>He({listStyle:"none",margin:0,padding:0,position:"relative"},!n.disablePadding&&{paddingTop:8,paddingBottom:8},n.subheader&&{paddingTop:0})),Jle=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiList"}),{children:s,className:o,component:l="ul",dense:u=!1,disablePadding:h=!1,subheader:d}=i,m=Zn(i,Xle),_=he.useMemo(()=>({dense:u}),[u]),v=He({},i,{component:l,dense:u,disablePadding:h}),E=Yle(v);return gt.jsx(Vle.Provider,{value:_,children:gt.jsxs(Kle,He({as:l,className:Rr(E.root,o),ref:t,ownerState:v},m,{children:[d,s]}))})}),Qle=Jle,qle=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function g2(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function P4(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function m8(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.indexOf(e.keys.join(""))===0}function b$(n,e,t,i,s,o){let l=!1,u=s(n,e,e?t:!1);for(;u;){if(u===n.firstChild){if(l)return!1;l=!0}const h=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!m8(u,o)||h)u=s(n,u,t);else return u.focus(),!0}return!1}const Zle=he.forwardRef(function(e,t){const{actions:i,autoFocus:s=!1,autoFocusItem:o=!1,children:l,className:u,disabledItemsFocusable:h=!1,disableListWrap:d=!1,onKeyDown:m,variant:_="selectedMenu"}=e,v=Zn(e,qle),E=he.useRef(null),w=he.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});_v(()=>{s&&E.current.focus()},[s]),he.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(N,{direction:D})=>{const U=!E.current.style.width;if(N.clientHeight<E.current.clientHeight&&U){const F=`${VV(zp(N))}px`;E.current.style[D==="rtl"?"paddingLeft":"paddingRight"]=F,E.current.style.width=`calc(100% + ${F})`}return E.current}}),[]);const x=N=>{const D=E.current,U=N.key,F=zp(D).activeElement;if(U==="ArrowDown")N.preventDefault(),b$(D,F,d,h,g2);else if(U==="ArrowUp")N.preventDefault(),b$(D,F,d,h,P4);else if(U==="Home")N.preventDefault(),b$(D,null,d,h,g2);else if(U==="End")N.preventDefault(),b$(D,null,d,h,P4);else if(U.length===1){const H=w.current,z=U.toLowerCase(),J=performance.now();H.keys.length>0&&(J-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&z!==H.keys[0]&&(H.repeating=!1)),H.lastTime=J,H.keys.push(z);const te=F&&!H.repeating&&m8(F,H);H.previousKeyMatched&&(te||b$(D,F,!1,h,g2,H))?N.preventDefault():H.previousKeyMatched=!1}m&&m(N)},A=op(E,t);let O=-1;he.Children.forEach(l,(N,D)=>{if(!he.isValidElement(N)){O===D&&(O+=1,O>=l.length&&(O=-1));return}N.props.disabled||(_==="selectedMenu"&&N.props.selected||O===-1)&&(O=D),O===D&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(O+=1,O>=l.length&&(O=-1))});const k=he.Children.map(l,(N,D)=>{if(D===O){const U={};return o&&(U.autoFocus=!0),N.props.tabIndex===void 0&&_==="selectedMenu"&&(U.tabIndex=0),he.cloneElement(N,U)}return N});return gt.jsx(Qle,He({role:"menu",ref:A,className:u,onKeyDown:x,tabIndex:s?0:-1},v,{children:k}))}),eue=Zle;function tue(n){return ds("MuiPopover",n)}As("MuiPopover",["root","paper"]);const nue=["onEntering"],rue=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],iue=["slotProps"];function F4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function U4(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function z4(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function _2(n){return typeof n=="function"?n():n}const sue=n=>{const{classes:e}=n;return Is({root:["root"],paper:["paper"]},tue,e)},oue=jn(l8,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),g8=jn(ZI,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),aue=he.forwardRef(function(e,t){var i,s,o;const l=Ws({props:e,name:"MuiPopover"}),{action:u,anchorEl:h,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:m,anchorReference:_="anchorEl",children:v,className:E,container:w,elevation:x=8,marginThreshold:A=16,open:O,PaperProps:k={},slots:N,slotProps:D,transformOrigin:U={vertical:"top",horizontal:"left"},TransitionComponent:F=Ole,transitionDuration:H="auto",TransitionProps:{onEntering:z}={},disableScrollLock:J=!1}=l,te=Zn(l.TransitionProps,nue),re=Zn(l,rue),ie=(i=D==null?void 0:D.paper)!=null?i:k,de=he.useRef(),oe=op(de,ie.ref),ue=He({},l,{anchorOrigin:d,anchorReference:_,elevation:x,marginThreshold:A,externalPaperSlotProps:ie,transformOrigin:U,TransitionComponent:F,transitionDuration:H,TransitionProps:te}),ge=sue(ue),Ae=he.useCallback(()=>{if(_==="anchorPosition")return m;const Pe=_2(h),We=(Pe&&Pe.nodeType===1?Pe:zp(de.current).body).getBoundingClientRect();return{top:We.top+F4(We,d.vertical),left:We.left+U4(We,d.horizontal)}},[h,d.horizontal,d.vertical,m,_]),j=he.useCallback(Pe=>({vertical:F4(Pe,U.vertical),horizontal:U4(Pe,U.horizontal)}),[U.horizontal,U.vertical]),Z=he.useCallback(Pe=>{const rt={width:Pe.offsetWidth,height:Pe.offsetHeight},We=j(rt);if(_==="none")return{top:null,left:null,transformOrigin:z4(We)};const wt=Ae();let xt=wt.top-We.vertical,ht=wt.left-We.horizontal;const St=xt+rt.height,It=ht+rt.width,mt=vv(_2(h)),ve=mt.innerHeight-A,ee=mt.innerWidth-A;if(A!==null&&xt<A){const ke=xt-A;xt-=ke,We.vertical+=ke}else if(A!==null&&St>ve){const ke=St-ve;xt-=ke,We.vertical+=ke}if(A!==null&&ht<A){const ke=ht-A;ht-=ke,We.horizontal+=ke}else if(It>ee){const ke=It-ee;ht-=ke,We.horizontal+=ke}return{top:`${Math.round(xt)}px`,left:`${Math.round(ht)}px`,transformOrigin:z4(We)}},[h,_,Ae,j,A]),[ne,le]=he.useState(O),_e=he.useCallback(()=>{const Pe=de.current;if(!Pe)return;const rt=Z(Pe);rt.top!==null&&(Pe.style.top=rt.top),rt.left!==null&&(Pe.style.left=rt.left),Pe.style.transformOrigin=rt.transformOrigin,le(!0)},[Z]);he.useEffect(()=>(J&&window.addEventListener("scroll",_e),()=>window.removeEventListener("scroll",_e)),[h,J,_e]);const Oe=(Pe,rt)=>{z&&z(Pe,rt),_e()},xe=()=>{le(!1)};he.useEffect(()=>{O&&_e()}),he.useImperativeHandle(u,()=>O?{updatePosition:()=>{_e()}}:null,[O,_e]),he.useEffect(()=>{if(!O)return;const Pe=GB(()=>{_e()}),rt=vv(h);return rt.addEventListener("resize",Pe),()=>{Pe.clear(),rt.removeEventListener("resize",Pe)}},[h,O,_e]);let Xe=H;H==="auto"&&!F.muiSupportAuto&&(Xe=void 0);const Re=w||(h?zp(_2(h)).body:void 0),Je=(s=N==null?void 0:N.root)!=null?s:oue,et=(o=N==null?void 0:N.paper)!=null?o:g8,at=kT({elementType:et,externalSlotProps:He({},ie,{style:ne?ie.style:He({},ie.style,{opacity:0})}),additionalProps:{elevation:x,ref:oe},ownerState:ue,className:Rr(ge.paper,ie==null?void 0:ie.className)}),Qe=kT({elementType:Je,externalSlotProps:(D==null?void 0:D.root)||{},externalForwardedProps:re,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:Re,open:O},ownerState:ue,className:Rr(ge.root,E)}),{slotProps:De}=Qe,Se=Zn(Qe,iue);return gt.jsx(Je,He({},Se,!IA(Je)&&{slotProps:De,disableScrollLock:J},{children:gt.jsx(F,He({appear:!0,in:O,onEntering:Oe,onExited:xe,timeout:Xe},te,{children:gt.jsx(et,He({},at,{children:v}))}))}))}),lue=aue;function uue(n){return ds("MuiMenu",n)}As("MuiMenu",["root","paper","list"]);const cue=["onEntering"],hue=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],due={vertical:"top",horizontal:"right"},pue={vertical:"top",horizontal:"left"},fue=n=>{const{classes:e}=n;return Is({root:["root"],paper:["paper"],list:["list"]},uue,e)},mue=jn(lue,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),gue=jn(g8,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),_ue=jn(eue,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),vue=he.forwardRef(function(e,t){var i,s;const o=Ws({props:e,name:"MuiMenu"}),{autoFocus:l=!0,children:u,className:h,disableAutoFocusItem:d=!1,MenuListProps:m={},onClose:_,open:v,PaperProps:E={},PopoverClasses:w,transitionDuration:x="auto",TransitionProps:{onEntering:A}={},variant:O="selectedMenu",slots:k={},slotProps:N={}}=o,D=Zn(o.TransitionProps,cue),U=Zn(o,hue),F=ere(),H=He({},o,{autoFocus:l,disableAutoFocusItem:d,MenuListProps:m,onEntering:A,PaperProps:E,transitionDuration:x,TransitionProps:D,variant:O}),z=fue(H),J=l&&!d&&v,te=he.useRef(null),re=(j,Z)=>{te.current&&te.current.adjustStyleForScrollbar(j,{direction:F?"rtl":"ltr"}),A&&A(j,Z)},ie=j=>{j.key==="Tab"&&(j.preventDefault(),_&&_(j,"tabKeyDown"))};let de=-1;he.Children.map(u,(j,Z)=>{he.isValidElement(j)&&(j.props.disabled||(O==="selectedMenu"&&j.props.selected||de===-1)&&(de=Z))});const oe=(i=k.paper)!=null?i:gue,ue=(s=N.paper)!=null?s:E,ge=kT({elementType:k.root,externalSlotProps:N.root,ownerState:H,className:[z.root,h]}),Ae=kT({elementType:oe,externalSlotProps:ue,ownerState:H,className:z.paper});return gt.jsx(mue,He({onClose:_,anchorOrigin:{vertical:"bottom",horizontal:F?"right":"left"},transformOrigin:F?due:pue,slots:{paper:oe,root:k.root},slotProps:{root:ge,paper:Ae},open:v,ref:t,transitionDuration:x,TransitionProps:He({onEntering:re},D),ownerState:H},U,{classes:w,children:gt.jsx(_ue,He({onKeyDown:ie,actions:te,autoFocus:l&&(de===-1||d),autoFocusItem:J,variant:O},m,{className:Rr(z.list,m.className),children:u}))}))}),yue=vue;function bue(n){return ds("MuiNativeSelect",n)}const Tue=As("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),eP=Tue,Eue=["className","disabled","error","IconComponent","inputRef","variant"],$ue=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${ir(t)}`,o&&"iconOpen",i&&"disabled"]};return Is(u,bue,e)},_8=({ownerState:n,theme:e})=>He({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":He({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${eP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},n.variant==="filled"&&{"&&&":{paddingRight:32}},n.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),Sue=jn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Of,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${eP.multiple}`]:e.multiple}]}})(_8),v8=({ownerState:n,theme:e})=>He({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${eP.disabled}`]:{color:(e.vars||e).palette.action.disabled}},n.open&&{transform:"rotate(180deg)"},n.variant==="filled"&&{right:7},n.variant==="outlined"&&{right:7}),wue=jn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${ir(t.variant)}`],t.open&&e.iconOpen]}})(v8),xue=he.forwardRef(function(e,t){const{className:i,disabled:s,error:o,IconComponent:l,inputRef:u,variant:h="standard"}=e,d=Zn(e,Eue),m=He({},e,{disabled:s,variant:h,error:o}),_=$ue(m);return gt.jsxs(he.Fragment,{children:[gt.jsx(Sue,He({ownerState:m,className:Rr(_.select,i),disabled:s,ref:u||t},d)),e.multiple?null:gt.jsx(wue,{as:l,ownerState:m,className:_.icon})]})}),Cue=xue;var H4;const Mue=["children","classes","className","label","notched"],Aue=jn("fieldset",{shouldForwardProp:Of})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Iue=jn("legend",{shouldForwardProp:Of})(({ownerState:n,theme:e})=>He({float:"unset",width:"auto",overflow:"hidden"},!n.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},n.withLabel&&He({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},n.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function Rue(n){const{className:e,label:t,notched:i}=n,s=Zn(n,Mue),o=t!=null&&t!=="",l=He({},n,{notched:i,withLabel:o});return gt.jsx(Aue,He({"aria-hidden":!0,className:e,ownerState:l},s,{children:gt.jsx(Iue,{ownerState:l,children:o?gt.jsx("span",{children:t}):H4||(H4=gt.jsx("span",{className:"notranslate",children:""}))})}))}const kue=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Oue=n=>{const{classes:e}=n,i=Is({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},roe,e);return He({},e,i)},Lue=jn(rR,{shouldForwardProp:n=>Of(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:tR})(({theme:n,ownerState:e})=>{const t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return He({position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${L_.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${L_.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${L_.focused} .${L_.notchedOutline}`]:{borderColor:(n.vars||n).palette[e.color].main,borderWidth:2},[`&.${L_.error} .${L_.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${L_.disabled} .${L_.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&He({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),Due=jn(Rue,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),Nue=jn(iR,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:nR})(({theme:n,ownerState:e})=>He({padding:"16.5px 14px"},!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),y8=he.forwardRef(function(e,t){var i,s,o,l,u;const h=Ws({props:e,name:"MuiOutlinedInput"}),{components:d={},fullWidth:m=!1,inputComponent:_="input",label:v,multiline:E=!1,notched:w,slots:x={},type:A="text"}=h,O=Zn(h,kue),k=Oue(h),N=s_(),D=Av({props:h,muiFormControl:N,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),U=He({},h,{color:D.color||"primary",disabled:D.disabled,error:D.error,focused:D.focused,formControl:N,fullWidth:m,hiddenLabel:D.hiddenLabel,multiline:E,size:D.size,type:A}),F=(i=(s=x.root)!=null?s:d.Root)!=null?i:Lue,H=(o=(l=x.input)!=null?l:d.Input)!=null?o:Nue;return gt.jsx(qB,He({slots:{root:F,input:H},renderSuffix:z=>gt.jsx(Due,{ownerState:U,className:k.notchedOutline,label:v!=null&&v!==""&&D.required?u||(u=gt.jsxs(he.Fragment,{children:[v,"","*"]})):v,notched:typeof w<"u"?w:!!(z.startAdornment||z.filled||z.focused)}),fullWidth:m,inputComponent:_,multiline:E,ref:t,type:A},O,{classes:He({},k,{notchedOutline:null})}))});y8.muiName="Input";const b8=y8;function Bue(n){return ds("MuiSelect",n)}const T$=As("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var G4;const Pue=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Fue=jn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${T$.select}`]:e.select},{[`&.${T$.select}`]:e[t.variant]},{[`&.${T$.error}`]:e.error},{[`&.${T$.multiple}`]:e.multiple}]}})(_8,{[`&.${T$.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Uue=jn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${ir(t.variant)}`],t.open&&e.iconOpen]}})(v8),zue=jn("input",{shouldForwardProp:n=>t8(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function W4(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Hue(n){return n==null||typeof n=="string"&&!n.trim()}const Gue=n=>{const{classes:e,variant:t,disabled:i,multiple:s,open:o,error:l}=n,u={select:["select",t,i&&"disabled",s&&"multiple",l&&"error"],icon:["icon",`icon${ir(t)}`,o&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Is(u,Bue,e)},Wue=he.forwardRef(function(e,t){var i;const{"aria-describedby":s,"aria-label":o,autoFocus:l,autoWidth:u,children:h,className:d,defaultOpen:m,defaultValue:_,disabled:v,displayEmpty:E,error:w=!1,IconComponent:x,inputRef:A,labelId:O,MenuProps:k={},multiple:N,name:D,onBlur:U,onChange:F,onClose:H,onFocus:z,onOpen:J,open:te,readOnly:re,renderValue:ie,SelectDisplayProps:de={},tabIndex:oe,value:ue,variant:ge="standard"}=e,Ae=Zn(e,Pue),[j,Z]=xA({controlled:ue,default:_,name:"Select"}),[ne,le]=xA({controlled:te,default:m,name:"Select"}),_e=he.useRef(null),Oe=he.useRef(null),[xe,Xe]=he.useState(null),{current:Re}=he.useRef(te!=null),[Je,et]=he.useState(),at=op(t,A),Qe=he.useCallback(ae=>{Oe.current=ae,ae&&Xe(ae)},[]),De=xe==null?void 0:xe.parentNode;he.useImperativeHandle(at,()=>({focus:()=>{Oe.current.focus()},node:_e.current,value:j}),[j]),he.useEffect(()=>{m&&ne&&xe&&!Re&&(et(u?null:De.clientWidth),Oe.current.focus())},[xe,u]),he.useEffect(()=>{l&&Oe.current.focus()},[l]),he.useEffect(()=>{if(!O)return;const ae=zp(Oe.current).getElementById(O);if(ae){const $e=()=>{getSelection().isCollapsed&&Oe.current.focus()};return ae.addEventListener("click",$e),()=>{ae.removeEventListener("click",$e)}}},[O]);const Se=(ae,$e)=>{ae?J&&J($e):H&&H($e),Re||(et(u?null:De.clientWidth),le(ae))},Pe=ae=>{ae.button===0&&(ae.preventDefault(),Oe.current.focus(),Se(!0,ae))},rt=ae=>{Se(!1,ae)},We=he.Children.toArray(h),wt=ae=>{const $e=We.find(Ve=>Ve.props.value===ae.target.value);$e!==void 0&&(Z($e.props.value),F&&F(ae,$e))},xt=ae=>$e=>{let Ve;if($e.currentTarget.hasAttribute("tabindex")){if(N){Ve=Array.isArray(j)?j.slice():[];const Pt=j.indexOf(ae.props.value);Pt===-1?Ve.push(ae.props.value):Ve.splice(Pt,1)}else Ve=ae.props.value;if(ae.props.onClick&&ae.props.onClick($e),j!==Ve&&(Z(Ve),F)){const Pt=$e.nativeEvent||$e,Fe=new Pt.constructor(Pt.type,Pt);Object.defineProperty(Fe,"target",{writable:!0,value:{value:Ve,name:D}}),F(Fe,ae)}N||Se(!1,$e)}},ht=ae=>{re||[" ","ArrowUp","ArrowDown","Enter"].indexOf(ae.key)!==-1&&(ae.preventDefault(),Se(!0,ae))},St=xe!==null&&ne,It=ae=>{!St&&U&&(Object.defineProperty(ae,"target",{writable:!0,value:{value:j,name:D}}),U(ae))};delete Ae["aria-invalid"];let mt,ve;const ee=[];let ke=!1;(RA({value:j})||E)&&(ie?mt=ie(j):ke=!0);const ot=We.map(ae=>{if(!he.isValidElement(ae))return null;let $e;if(N){if(!Array.isArray(j))throw new Error(ab(2));$e=j.some(Ve=>W4(Ve,ae.props.value)),$e&&ke&&ee.push(ae.props.children)}else $e=W4(j,ae.props.value),$e&&ke&&(ve=ae.props.children);return he.cloneElement(ae,{"aria-selected":$e?"true":"false",onClick:xt(ae),onKeyUp:Ve=>{Ve.key===" "&&Ve.preventDefault(),ae.props.onKeyUp&&ae.props.onKeyUp(Ve)},role:"option",selected:$e,value:void 0,"data-value":ae.props.value})});ke&&(N?ee.length===0?mt=null:mt=ee.reduce((ae,$e,Ve)=>(ae.push($e),Ve<ee.length-1&&ae.push(", "),ae),[]):mt=ve);let dt=Je;!u&&Re&&xe&&(dt=De.clientWidth);let $t;typeof oe<"u"?$t=oe:$t=v?null:0;const ct=de.id||(D?`mui-component-select-${D}`:void 0),Ge=He({},e,{variant:ge,value:j,open:St,error:w}),Me=Gue(Ge),X=He({},k.PaperProps,(i=k.slotProps)==null?void 0:i.paper),Q=YI();return gt.jsxs(he.Fragment,{children:[gt.jsx(Fue,He({ref:Qe,tabIndex:$t,role:"combobox","aria-controls":Q,"aria-disabled":v?"true":void 0,"aria-expanded":St?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[O,ct].filter(Boolean).join(" ")||void 0,"aria-describedby":s,onKeyDown:ht,onMouseDown:v||re?null:Pe,onBlur:It,onFocus:z},de,{ownerState:Ge,className:Rr(de.className,Me.select,d),id:ct,children:Hue(mt)?G4||(G4=gt.jsx("span",{className:"notranslate",children:""})):mt})),gt.jsx(zue,He({"aria-invalid":w,value:Array.isArray(j)?j.join(","):j,name:D,ref:_e,"aria-hidden":!0,onChange:wt,tabIndex:-1,disabled:v,className:Me.nativeInput,autoFocus:l,ownerState:Ge},Ae)),gt.jsx(Uue,{as:x,className:Me.icon,ownerState:Ge}),gt.jsx(yue,He({id:`menu-${D||""}`,anchorEl:De,open:St,onClose:rt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},k,{MenuListProps:He({"aria-labelledby":O,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:Q},k.MenuListProps),slotProps:He({},k.slotProps,{paper:He({},X,{style:He({minWidth:dt},X!=null?X.style:null)})}),children:ot}))]})}),Vue=Wue,jue=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Xue=["root"],Yue=n=>{const{classes:e}=n;return e},tP={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Of(n)&&n!=="variant",slot:"Root"},Kue=jn(f8,tP)(""),Jue=jn(b8,tP)(""),Que=jn(c8,tP)(""),T8=he.forwardRef(function(e,t){const i=Ws({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:o,classes:l={},className:u,defaultOpen:h=!1,displayEmpty:d=!1,IconComponent:m=aoe,id:_,input:v,inputProps:E,label:w,labelId:x,MenuProps:A,multiple:O=!1,native:k=!1,onClose:N,onOpen:D,open:U,renderValue:F,SelectDisplayProps:H,variant:z="outlined"}=i,J=Zn(i,jue),te=k?Cue:Vue,re=s_(),ie=Av({props:i,muiFormControl:re,states:["variant","error"]}),de=ie.variant||z,oe=He({},i,{variant:de,classes:l}),ue=Yue(oe),ge=Zn(ue,Xue),Ae=v||{standard:gt.jsx(Kue,{ownerState:oe}),outlined:gt.jsx(Jue,{label:w,ownerState:oe}),filled:gt.jsx(Que,{ownerState:oe})}[de],j=op(t,Ae.ref);return gt.jsx(he.Fragment,{children:he.cloneElement(Ae,He({inputComponent:te,inputProps:He({children:o,error:ie.error,IconComponent:m,variant:de,type:void 0,multiple:O},k?{id:_}:{autoWidth:s,defaultOpen:h,displayEmpty:d,labelId:x,MenuProps:A,onClose:N,onOpen:D,open:U,renderValue:F,SelectDisplayProps:He({id:_},H)},E,{classes:E?ip(ge,E.classes):ge},v?v.props.inputProps:{})},(O&&k||d)&&de==="outlined"?{notched:!0}:{},{ref:j,className:Rr(Ae.props.className,u,ue.root)},!v&&{variant:de},J))})});T8.muiName="Select";const que=T8;function Zue(n){return ds("MuiTextField",n)}As("MuiTextField",["root"]);const ece=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],tce={standard:f8,filled:c8,outlined:b8},nce=n=>{const{classes:e}=n;return Is({root:["root"]},Zue,e)},rce=jn(Pae,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),ice=he.forwardRef(function(e,t){const i=Ws({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:o=!1,children:l,className:u,color:h="primary",defaultValue:d,disabled:m=!1,error:_=!1,FormHelperTextProps:v,fullWidth:E=!1,helperText:w,id:x,InputLabelProps:A,inputProps:O,InputProps:k,inputRef:N,label:D,maxRows:U,minRows:F,multiline:H=!1,name:z,onBlur:J,onChange:te,onFocus:re,placeholder:ie,required:de=!1,rows:oe,select:ue=!1,SelectProps:ge,type:Ae,value:j,variant:Z="outlined"}=i,ne=Zn(i,ece),le=He({},i,{autoFocus:o,color:h,disabled:m,error:_,fullWidth:E,multiline:H,required:de,select:ue,variant:Z}),_e=nce(le),Oe={};Z==="outlined"&&(A&&typeof A.shrink<"u"&&(Oe.notched=A.shrink),Oe.label=D),ue&&((!ge||!ge.native)&&(Oe.id=void 0),Oe["aria-describedby"]=void 0);const xe=YI(x),Xe=w&&xe?`${xe}-helper-text`:void 0,Re=D&&xe?`${xe}-label`:void 0,Je=tce[Z],et=gt.jsx(Je,He({"aria-describedby":Xe,autoComplete:s,autoFocus:o,defaultValue:d,fullWidth:E,multiline:H,name:z,rows:oe,maxRows:U,minRows:F,type:Ae,value:j,id:xe,inputRef:N,onBlur:J,onChange:te,onFocus:re,placeholder:ie,inputProps:O},Oe,k));return gt.jsxs(rce,He({className:Rr(_e.root,u),disabled:m,error:_,fullWidth:E,ref:t,required:de,color:h,variant:Z,ownerState:le},ne,{children:[D!=null&&D!==""&&gt.jsx(Gle,He({htmlFor:xe,id:Re},A,{children:D})),ue?gt.jsx(que,He({"aria-describedby":Xe,id:xe,labelId:Re,value:j,input:et},ge,{children:l})):et,w&&gt.jsx(ole,He({id:Xe},v,{children:w}))]}))}),sce=ice,oce="/gpu-programming/assets/misty-Q0vWeXcA.svg",ace="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20400%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-54.8776,-69.2073)'%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,-55.9535,52.2937)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,655.131,143.162)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(1.02822,0,0,1.03479,44.3939,-48.6949)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.249775,0.249775,-0.614768,-0.614768,274.402,521.42)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20451.634,248.57%20429.001,248.57L121.05,248.57C98.417,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2098.417,215.247%20121.05,215.247L429.001,215.247C451.634,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",lce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20401%20400'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-53.2986,-56.7857)'%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,286.809,459.697)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'/%3e%3c/g%3e%3cg%20transform='matrix(0.440957,0.440957,-0.704461,0.704461,267.224,-50.5009)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,613.767,184.608)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.992184,0,0,0.998302,0.416603,0.0964004)'%3e%3cg%20transform='matrix(-0.423317,-0.423317,0.614768,-0.614768,171.204,575.302)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20459.167,248.57%20445.813,248.57L104.238,248.57C90.884,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2090.884,215.247%20104.238,215.247L445.813,215.247C459.167,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,453.376,402.183)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.237219,0.237219,-0.614768,-0.614768,311.603,484.301)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20450.661,248.57%20426.831,248.57L123.22,248.57C99.39,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%2099.39,215.247%20123.22,215.247L426.831,215.247C450.661,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.440957,-0.440957,0.704461,-0.704461,241.43,564.525)'%3e%3cpath%20d='M451.221,155.518L212.117,155.518C200.001,141.06%20193.623,124.66%20193.623,107.966C193.623,55.476%20255.479,12.861%20331.669,12.861C407.859,12.861%20469.715,55.476%20469.715,107.966C469.715,124.66%20463.337,141.06%20451.221,155.518Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3cg%20transform='matrix(-0.216719,0.216719,-0.614768,-0.614768,395.716,343.809)'%3e%3cpath%20d='M470.009,231.909C470.009,241.104%20448.831,248.57%20422.746,248.57L127.305,248.57C101.22,248.57%2080.042,241.104%2080.042,231.909C80.042,222.713%20101.22,215.247%20127.305,215.247L422.746,215.247C448.831,215.247%20470.009,222.713%20470.009,231.909Z'%20style='fill:rgb(12,0,0);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function V4({text:n,clickFunction:e}){return gt.jsx(tD,{onClick:e,style:{margin:"5px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:n})}var nP={},v2={};const uce=n0(Rie);var j4;function rP(){return j4||(j4=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=uce}(v2)),v2}var cce=Mw;Object.defineProperty(nP,"__esModule",{value:!0});var E8=nP.default=void 0,hce=cce(rP()),dce=gt;E8=nP.default=(0,hce.default)((0,dce.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");function pce(n){const[e,t]=he.useState(""),i=Ao(zh(v=>v.setIp)),s=Ao(zh(v=>v.setImageList)),o=Ao(zh(v=>v.setAudioList)),l=Ao(zh(v=>v.setIsConnected)),u=Ao(zh(v=>v.isConnected)),h=Ao(zh(v=>v.disconnect)),d=Ao(v=>v.setActiveModal),m=()=>{i(e),fetch(`http://${e}/api/battery`,{method:"GET"}).then(v=>{if(!v.ok)throw new Error(`Request failed with status ${v.status}`);return v.json()}).then(v=>(console.log(`Successfully sent a GET request, the response is: ${v}`),l(!0),fetch(`http://${e}/api/audio/list`))).then(v=>{if(!v.ok)throw new Error(`Request failed with status ${v.status}`);return v.json()}).then(v=>(o(v.result),fetch(`http://${e}/api/images/list`))).then(v=>{if(!v.ok)throw new Error(`Request failed with status ${v.status}`);return v.json()}).then(v=>{s(v.result)}).catch(v=>{console.error("Error during fetch operation:",v.message),alert(`Error fetching data: ${v.message}`)}),cc("Hit Confirm IP Address Button")},_={backgroundColor:"#585D92",color:"#FFFFFF",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",zIndex:101,position:"relative",height:"65px"};return gt.jsxs(sR,{style:_,children:[gt.jsxs(Ile,{container:!0,direction:"row",justifyContent:"left",alignItems:"center",style:{paddingLeft:"20px"},children:[gt.jsx("img",{style:{height:"35px",paddingRight:"10px"},src:oce}),gt.jsx(eD,{display:"inline",variant:"h5",children:"Robo-Blocks"})]}),gt.jsxs(nD,{style:{textAlign:"center",display:"flex",justifyContent:"right",alignItems:"center",width:"100%",marginTop:"5px",marginBottom:"5px",paddingRight:"0px"},children:[!u&&gt.jsx("div",{style:{backgroundColor:"#FF7E7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:gt.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:lce})}),u&&gt.jsx("div",{style:{backgroundColor:"#A0FF7E",width:"45px",height:"45px",borderRadius:"25px",marginRight:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},children:gt.jsx("img",{style:{height:"34px",position:"absolute",top:"5px",left:"5px"},src:ace})}),gt.jsx(sce,{id:"robotIpAddress",disabled:u,label:"IP",variant:"filled",style:{backgroundColor:"#FFFFFF50",borderRadius:"5px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))",marginRight:"5px"},defaultValue:"",onChange:v=>t(v.target.value)}),!u&&gt.jsx(V4,{text:"Connect",clickFunction:m}),u&&gt.jsx(V4,{text:"Disconnect",clickFunction:h}),gt.jsx(ZL,{style:{margin:"5px",marginRight:"10px",color:"black",backgroundColor:"#FAFAFA",borderRadius:"10px",filter:"drop-shadow(0px 10px 4px rgba(0,0,0,0.25))"},onClick:()=>{d(!0)},children:gt.jsx(E8,{})})]})]})}/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $8="mainWorkspace",X4=function(n){var t;const e=Et.serialization.workspaces.save(n);(t=window.localStorage)==null||t.setItem($8,JSON.stringify(e))},fce=function(n){var t;const e=(t=window.localStorage)==null?void 0:t.getItem($8);e&&(Et.Events.disable(),Et.serialization.workspaces.load(JSON.parse(e),n,!1),Et.Events.enable())};/**
 * @license
 * Copyright 2023 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mce={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:"Loops",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}}]},{kind:"category",name:"Functions",categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"sep",gap:"8"},{kind:"category",name:"Movement",categorystyle:"movement_category",contents:[{kind:"block",type:"DriveTime"},{kind:"block",type:"DriveTime2"},{kind:"block",type:"Turn"},{kind:"block",type:"Turn2"},{kind:"block",type:"MoveHead"},{kind:"block",type:"MoveHead3"},{kind:"block",type:"MoveArm"},{kind:"block",type:"MoveArm2"},{kind:"block",type:"MoveArms2"}]},{kind:"category",name:"Light",categorystyle:"light_category",contents:[{kind:"block",type:"ChangeLED"},{kind:"block",type:"TransitionLED"},{kind:"block",type:"colour_picker"},{kind:"block",type:"colour_random"},{kind:"block",type:"colour_rgb",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"colour_blend",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}},{kind:"block",type:"TurnOnFlashlight"},{kind:"block",type:"TurnOffFlashlight"}]},{kind:"category",name:"Speech",categorystyle:"speech_category",contents:[{kind:"block",type:"Speak"},{kind:"block",type:"SpeakDefault"},{kind:"block",type:"text"}]},{kind:"category",name:"Face",categorystyle:"face_category",contents:[{kind:"block",type:"DisplayImage"},{kind:"block",type:"eyes_acceptance"},{kind:"block",type:"eyes_admiration"},{kind:"block",type:"eyes_amazement"},{kind:"block",type:"eyes_anger"},{kind:"block",type:"eyes_annoyed"},{kind:"block",type:"eyes_anticipation"},{kind:"block",type:"eyes_apprehension"},{kind:"block",type:"eyes_boredom"},{kind:"block",type:"eyes_default"},{kind:"block",type:"eyes_disgust"},{kind:"block",type:"eyes_distraction"},{kind:"block",type:"eyes_ecstasy_frame_1"},{kind:"block",type:"eyes_ecstasy_frame_2"},{kind:"block",type:"eyes_fear"},{kind:"block",type:"eyes_grief"},{kind:"block",type:"eyes_interest"},{kind:"block",type:"eyes_joy"},{kind:"block",type:"eyes_loathing"},{kind:"block",type:"eyes_pensiveness"},{kind:"block",type:"eyes_rage"},{kind:"block",type:"eyes_sad"},{kind:"block",type:"eyes_serenity"},{kind:"block",type:"eyes_surprise"},{kind:"block",type:"eyes_terror"},{kind:"block",type:"eyes_trust"},{kind:"block",type:"eyes_vigilance"},{kind:"block",type:"e_Sleeping"},{kind:"block",type:"e_SleepingZZZ"},{kind:"block",type:"e_Contempt"},{kind:"block",type:"e_ContentLeft"},{kind:"block",type:"e_ContentRight"},{kind:"block",type:"e_Disoriented"},{kind:"block",type:"e_EcstacyHilarious"},{kind:"block",type:"e_EcstacyStarryEyed"},{kind:"block",type:"e_JoyGoofy"},{kind:"block",type:"e_JoyGoofy2"},{kind:"block",type:"e_JoyGoofy3"},{kind:"block",type:"e_Love"},{kind:"block",type:"e_Rage"},{kind:"block",type:"e_Rage2"},{kind:"block",type:"e_Rage3"},{kind:"block",type:"e_Rage4"},{kind:"block",type:"e_RemorseShame"}]},{kind:"category",name:"Audio",categorystyle:"audio_category",contents:[{kind:"block",type:"SetVolume"},{kind:"block",type:"PlayAudio"},{kind:"block",type:"s_Acceptance"},{kind:"block",type:"s_Amazement"},{kind:"block",type:"s_Amazement2"},{kind:"block",type:"s_Anger"},{kind:"block",type:"s_Anger2"},{kind:"block",type:"s_Anger3"},{kind:"block",type:"s_Anger4"},{kind:"block",type:"s_Annoyance"},{kind:"block",type:"s_Annoyance2"},{kind:"block",type:"s_Annoyance3"},{kind:"block",type:"s_Annoyance4"},{kind:"block",type:"s_Awe"},{kind:"block",type:"s_Awe2"},{kind:"block",type:"s_Awe3"},{kind:"block",type:"s_Boredom"},{kind:"block",type:"s_Disapproval"},{kind:"block",type:"s_Disgust"},{kind:"block",type:"s_Disgust2"},{kind:"block",type:"s_Disgust3"},{kind:"block",type:"s_DisorientedConfused"},{kind:"block",type:"s_DisorientedConfused2"},{kind:"block",type:"s_DisorientedConfused3"},{kind:"block",type:"s_DisorientedConfused4"},{kind:"block",type:"s_DisorientedConfused5"},{kind:"block",type:"s_DisorientedConfused6"},{kind:"block",type:"s_Distraction"},{kind:"block",type:"s_Ecstacy"},{kind:"block",type:"s_Ecstacy2"},{kind:"block",type:"s_Fear"},{kind:"block",type:"s_Grief"},{kind:"block",type:"s_Grief2"},{kind:"block",type:"s_Grief3"},{kind:"block",type:"s_Grief4"},{kind:"block",type:"s_Joy"},{kind:"block",type:"s_Joy2"},{kind:"block",type:"s_Joy3"},{kind:"block",type:"s_Joy4"},{kind:"block",type:"s_Loathing"},{kind:"block",type:"s_Love"},{kind:"block",type:"s_PhraseByeBye"},{kind:"block",type:"s_PhraseEvilAhHa"},{kind:"block",type:"s_PhraseHello"},{kind:"block",type:"s_PhraseNoNoNo"},{kind:"block",type:"s_PhraseOopsy"},{kind:"block",type:"s_PhraseOwOwOw"},{kind:"block",type:"s_PhraseOwwww"},{kind:"block",type:"s_PhraseUhOh"},{kind:"block",type:"s_Rage"},{kind:"block",type:"s_Sadness"},{kind:"block",type:"s_Sadness2"},{kind:"block",type:"s_Sadness3"},{kind:"block",type:"s_Sadness4"},{kind:"block",type:"s_Sadness5"},{kind:"block",type:"s_Sadness6"},{kind:"block",type:"s_Sadness7"},{kind:"block",type:"s_Sleepy"},{kind:"block",type:"s_Sleepy2"},{kind:"block",type:"s_Sleepy3"},{kind:"block",type:"s_Sleepy4"},{kind:"block",type:"s_SleepySnore"},{kind:"block",type:"s_SystemCameraShutter"}]},{kind:"category",name:"Misc",categorystyle:"misc_category",contents:[{kind:"block",type:"DisplayAnimation"},{kind:"block",type:"DisplayText"},{kind:"block",type:"WaitForSeconds"}]}]};J_.Blocks.Start={init:function(){this.setStyle("hat_blocks"),this.appendDummyInput().appendField("Program starts here"),this.setColour(345),this.setTooltip("This is the starting block"),this.setNextStatement(!0,null),this.setHelpUrl(""),this.setDeletable(!1)}};function gce(n){const e=Ao(d=>d.addBlock),t=Ao(d=>d.blocks),i=Ao(d=>d.removeBlock),s=Ao(d=>d.getBlock),o=Ao(d=>d.updateBlock),l=Ao(d=>d.getBlockType);Ao(d=>d.ip);const u=(d,m)=>{d.push(m);let _=s(m);for(;_.next;)_=_.next,d.push(_)},h=(d,m)=>{cc(m?d?`switch toolbox category from ${m} to ${d}`:`unselect toolbox category: ${m}`:`select toolbox category: ${d}`)};return J_.common.defineBlocks(t),Object.assign(MT.javascriptGenerator.forBlock,cI),he.useEffect(()=>{if(!document.querySelector(".blocklySvg")){var d=document.getElementById("pageContainer"),m=document.getElementById("blocklyDiv");const _=J_.inject(m,{toolbox:mce,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},theme:J_.Theme.defineTheme("gpuTheme",{componentStyles:{toolboxBackgroundColour:"#E4E5F1",flyoutBackgroundColour:"#d2d3db"},categoryStyles:{logic_category:{colour:"#CC2F00"},loop_category:{colour:"#DB6600"},math_category:{colour:"#E39E00"},colour_category:{colour:"#76B80D"},procedure_category:{colour:"#007668"},movement_category:{colour:"#006486"},speech_category:{colour:"#007CB5"},face_category:{colour:"#465AB2"},audio_category:{colour:"#6D47B1"},misc_category:{colour:"#873B9C"}},blockStyles:{logic_blocks:{colourPrimary:"#CC2F00"},loop_blocks:{colourPrimary:"#DB6600"},math_blocks:{colourPrimary:"#E39E00"},colour_blocks:{colourPrimary:"#76B80D"},procedure_blocks:{colourPrimary:"#007668"},text_blocks:{colourPrimary:"#007CB5"},hat_blocks:{hat:"cap"}}})});_.newBlock("Start").moveBy(50,50),X4(_),fce(_),MT.javascriptGenerator.addReservedWords("code"),new ResizeObserver(w=>{for(let x of w){let A=d,O=0,k=0;do O+=A.offsetLeft,k+=A.offsetTop,A=A.offsetParent;while(A);m.style.left=O+"px",m.style.top=k+"px",m.style.width=d.offsetWidth+"px",m.style.height=d.offsetHeight+"px",J_.svgResize(_)}}).observe(d),_.addChangeListener(w=>{if(console.log(w),w.isUiEvent){if(w.type==="toolbox_item_select")h(w.newItem,w.oldItem);else if(w.type==="click"){if(w.targetType==="block"){const x=l(w.blockId);cc(`click on ${x} block`)}w.targetType==="workspace"&&cc("click on workspace")}else if(w.type==="selected"){if(w.oldElementId){const x=l(w.oldElementId);cc(`unselect and un-highlight ${x} `)}if(w.newElementId){const x=l(w.newElementId);cc(`select and highlight ${x} `)}}else if(w.type==="drag"){const x=l(w.blockId);w.isStart?cc(`drag block ${x} start `):cc(`drag block ${x} end `)}return}if(w.type===J_.Events.BLOCK_DELETE){let x=w.blockId,A=[x],O=s(x).inputs;if(O)for(let[D,U]of Object.entries(O))typeof U!="string"?A.push(U.id):u(A,U);let k=s(w.blockId).next;k&&u(A,k);const N=A.map(D=>l(D));i(A),cc(`block ${x} is deleted, total delete blocks: ${N}`)}if(w.type===J_.Events.BLOCK_CHANGE){const x=l(w.blockId);let A=w.blockId,O=s(A);O.fields[w.name]=w.newValue,o(A,O),cc(`field ${w.name} of ${x} change from ${w.oldValue} to ${w.newValue} `)}if(w.type==="create"){let x={id:w.json.id,type:w.json.type,prev:"",next:"",isShadow:!1};if(w.json.type==="Start"&&(w.json.id,x={id:w.json.id,type:w.json.type,next:""}),w.json.fields&&(x.fields=w.json.fields),w.json.inputs){x.inputs=w.json.inputs;for(let[A,O]of Object.entries(w.json.inputs))if(O.shadow){let k={id:O.shadow.id,type:O.shadow.type,fields:O.shadow.fields,isShadow:!0,initialParent:w.ids[0],initialInput:A};"shadows"in x||(x.shadows={}),x.shadows[A]=O.shadow.id,e(O.shadow.id,k),cc(`create a instance of type ${k.type}`)}}e(w.json.id,x),cc(`create a instance of type ${x.type}`)}if(w.type==="move"){const x=l(w.blockId),A=w.reason;if(A&&(typeof A!="string"&&A[1]==="drag"||A[0]==="drag")&&w.newCoordinate&&cc(`drag ${x} from coordinate: {x: ${w.oldCoordinate.x}, y: ${w.oldCoordinate.y}} to {x: ${w.newCoordinate.x},y: ${w.newCoordinate.y}}`),w.reason&&w.reason.includes("connect")){let O=w.newParentId,k=s(w.newParentId);const N=k.type,D=s(w.blockId);w.newInputName?("inputs"in k||(k.inputs={}),k.inputs[w.newInputName]=w.blockId,o(O,k),cc(`connect ${D.type}  as input of ${N}`)):(k.next=w.blockId,o(O,k),D.prev=O,o(w.blockId,D),cc(`Placed ${D.type} after ${N}`))}if(w.reason&&w.reason.includes("disconnect")){let O=w.oldParentId,k=s(w.oldParentId);const N=k.type,D=s(w.blockId);if(!w.oldInputName)k.next="",o(O,k),D.prev="",o(w.blockId,D),cc(`disconnect ${N} from ${k.type}`);else{if(k.inputs[w.oldInputName]="",k.shadows&&k.shadows[w.oldInputName]){let U=k.shadows[w.oldInputName];k.inputs[w.oldInputName]=U}o(O,k),cc(`remove ${N} from input of ${k.type}`)}}}X4(_)})}},[]),gt.jsxs("div",{id:"pageContainer",style:{width:"100%",height:"100%"},children:[gt.jsx("div",{id:"blocklyDiv",style:{width:"100%",height:"100%",minHeight:"480px",minWidth:"480px"}}),gt.jsx("xml",{id:"toolbox",style:{display:"none"}})]})}function kl(n,e,t){return e=nre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Y0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.forEach(function(s){kl(n,s,t[s])})}return n}class ws{static isBrowser(){return typeof window<"u"}static isOpera(){return ws.isBrowser()&&(!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0)}static isFirefox(){return ws.isBrowser()&&typeof InstallTrigger<"u"}static isSafari(){return ws.isBrowser()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}static isIE(){return ws.isBrowser()&&!!document.documentMode}static isEdge(){return ws.isBrowser()&&!ws.isIE()&&!!window.StyleMedia}static isChrome(){return ws.isBrowser()&&!!window.chrome&&!!window.chrome.webstore}static isBlink(){return ws.isBrowser()&&(ws.isChrome()||ws.isOpera())&&!!window.CSS}static getUserAgent(){return typeof navigator>"u"?"":navigator.userAgent}static isAndroid(){return ws.isBrowser()&&ws.getUserAgent().match(/Android/i)}static isBlackBerry(){return ws.isBrowser()&&ws.getUserAgent().match(/BlackBerry/i)}static isIOS(){return ws.isBrowser()&&ws.getUserAgent().match(/iPhone|iPad|iPod/i)}static isOpera(){return ws.isBrowser()&&ws.getUserAgent().match(/Opera Mini/i)}static isWindows(){return ws.isBrowser()&&ws.isWindowsDesktop()||ws.isWindowsMobile()}static isWindowsMobile(){return ws.isBrowser()&&ws.getUserAgent().match(/IEMobile/i)}static isWindowsDesktop(){return ws.isBrowser()&&ws.getUserAgent().match(/WPDesktop/i)}static isMobile(){return ws.isBrowser()&&(ws.isWindowsMobile()||ws.isBlackBerry()||ws.isAndroid()||ws.isIOS())}}const oR=n=>Object.keys(n).reduce((e,t)=>t.substr(0,5)==="data-"?Y0({},e,{[t]:n[t]}):e,{});class _f extends Tr.Component{static isA(e){return e?e.type===Tr.createElement(_f,null).type:!1}constructor(e){super(e),kl(this,"ref",Tr.createRef()),kl(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),kl(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),kl(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[ws.isMobile()?"reflex-thin":"",...this.props.className.split(" "),this.state.active?"active":"","reflex-splitter"].join(" ").trim();return Tr.createElement("div",He({},oR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}kl(_f,"propTypes",{children:ui.oneOfType([ui.arrayOf(ui.node),ui.node]),onStartResize:ui.func,onStopResize:ui.func,className:ui.string,propagate:ui.bool,onResize:ui.func,style:ui.object});kl(_f,"defaultProps",{document:typeof document<"u"?document:null,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});class _ce{constructor(){this._events={}}on(e,t){return e.split(" ").forEach(i=>{this._events[i]=this._events[i]||[],this._events[i].push(t)}),this}off(e,t){if(e==null){this._events={};return}return e.split(" ").forEach(i=>{i in this._events&&(t?this._events[i].splice(this._events[i].indexOf(t),1):this._events[i]=[])}),this}emit(e){if(this._events[e]!==void 0)for(var t=this._events[e].slice(),i=0;i<t.length;++i){var s=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(s!==void 0)return s}}}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(n,e){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if(i===0)return!1;var s=e|0,o=Math.max(s>=0?s:i-Math.abs(s),0);function l(u,h){return u===h||typeof u=="number"&&typeof h=="number"&&isNaN(u)&&isNaN(h)}for(;o<i;){if(l(t[o],n))return!0;o++}return!1}});Math.sign||(Math.sign=function(n){return(n>0)-(n<0)||+n});class kA extends Tr.Component{constructor(e){super(e),kl(this,"onWindowResize",()=>{this.setState({flexData:this.computeFlexData()})}),kl(this,"onStartResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event;switch(this.props.orientation){case"horizontal":document.body.classList.add("reflex-row-resize"),this.previousPos=i.clientY;break;case"vertical":default:document.body.classList.add("reflex-col-resize"),this.previousPos=i.clientX;break}this.elements=[this.children[t.index-1],this.children[t.index+1]],this.emitElementsEvent(this.elements,"onStartResize")}),kl(this,"onResize",t=>{const i=t.event.changedTouches?t.event.changedTouches[0]:t.event,s=this.getOffset(i,t.domElement);switch(this.props.orientation){case"horizontal":this.previousPos=i.clientY;break;case"vertical":default:this.previousPos=i.clientX;break}if(s){const o=this.computeAvailableOffset(t.index,s);o&&(this.elements=this.dispatchOffset(t.index,o),this.adjustFlex(this.elements),this.setState({resizing:!0},()=>{this.emitElementsEvent(this.elements,"onResize")}))}}),kl(this,"onStopResize",t=>{document.body.classList.remove("reflex-row-resize"),document.body.classList.remove("reflex-col-resize");const i=this.elements?this.elements.map(o=>o.ref):[],s=this.children.filter(o=>!_f.isA(o)&&i.includes(o.ref));this.emitElementsEvent(s,"onStopResize"),this.setState({resizing:!1})}),kl(this,"onElementSize",t=>new Promise(i=>{try{const s=t.index,o=this.getSize(this.children[s]),l=t.size-o,u=t.direction,h=s+u,d=this.computeAvailableOffset(h,u*l);this.elements=null,d&&(this.elements=this.dispatchOffset(h,d),this.adjustFlex(this.elements)),this.setState(this.state,()=>{this.emitElementsEvent(this.elements,"onResize"),i()})}catch(s){console.log(s)}})),this.events=new _ce,this.children=[],this.state={flexData:[]},this.ref=Tr.createRef()}componentDidMount(){const e=this.computeFlexData(),{windowResizeAware:t}=this.props;t&&window.addEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:t,flexData:e}),this.events.on("element.size",this.onElementSize),this.events.on("startResize",this.onStartResize),this.events.on("stopResize",this.onStopResize),this.events.on("resize",this.onResize)}componentWillUnmount(){this.events.off(),window.removeEventListener("resize",this.onWindowResize)}getValidChildren(e=this.props){return this.toArray(e.children).filter(t=>!!t)}componentDidUpdate(e,t){const i=this.getValidChildren(this.props);if(i.length!==this.state.flexData.length||e.orientation!==this.props.orientation||this.flexHasChanged(e)){const s=this.computeFlexData(i,this.props);this.setState({flexData:s})}this.props.windowResizeAware!==this.state.windowResizeAware&&(this.props.windowResizeAware?window.addEventListener("resize",this.onWindowResize):window.removeEventListener("resize",this.onWindowResize),this.setState({windowResizeAware:this.props.windowResizeAware}))}flexHasChanged(e){const t=this.getValidChildren(e).map(s=>s.props.flex||0);return!this.getValidChildren().map(s=>s.props.flex||0).every((s,o)=>s===t[o])}getSize(e){var t,i,s;const o=e==null||(t=e.ref)===null||t===void 0?void 0:t.current;switch(this.props.orientation){case"horizontal":return(i=o==null?void 0:o.offsetHeight)!==null&&i!==void 0?i:0;case"vertical":default:return(s=o==null?void 0:o.offsetWidth)!==null&&s!==void 0?s:0}}getOffset(e,t){const{top:i,bottom:s,left:o,right:l}=t.getBoundingClientRect();switch(this.props.orientation){case"horizontal":{const u=e.clientY-this.previousPos;if(u>0){if(e.clientY>=i)return u}else if(e.clientY<=s)return u;break}case"vertical":default:{const u=e.clientX-this.previousPos;if(u>0){if(e.clientX>o)return u}else if(e.clientX<l)return u}break}return 0}adjustFlex(e){const t=e.reduce((i,s)=>{const o=s.props.index,l=s.props.flex,u=this.state.flexData[o].flex;return i+(l-u)/e.length},0);e.forEach(i=>{this.state.flexData[i.props.index].flex+=t})}computeAvailableOffset(e,t){const i=this.computeAvailableStretch(e,t),s=this.computeAvailableShrink(e,t);return Math.min(i,s)*Math.sign(t)}checkPropagate(e,t){if(t>0){if(e<this.children.length-2){const i=this.children[e+2];return _f.isA(i)&&i.props.propagate}}else if(e>2){const i=this.children[e-2];return _f.isA(i)&&i.props.propagate}return!1}computeAvailableStretch(e,t){var i;const s=t<0?e+1:e-1,o=this.children[s],l=this.getSize(o),h=((i=o==null?void 0:o.props.maxSize)!==null&&i!==void 0?i:0)-l;if(h<Math.abs(t)&&this.checkPropagate(e,-1*t)){const d=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableStretch(t<0?e+2:e-2,d)}return Math.min(h,Math.abs(t))}computeAvailableShrink(e,t){var i;const s=t>0?e+1:e-1,o=this.children[s],l=this.getSize(o),u=Math.max((i=o==null?void 0:o.props.minSize)!==null&&i!==void 0?i:0,0),h=l-u;if(h<Math.abs(t)&&this.checkPropagate(e,t)){const d=Math.sign(t)*(Math.abs(t)-h);return h+this.computeAvailableShrink(t>0?e+2:e-2,d)}return Math.min(h,Math.abs(t))}computePixelFlex(e=this.props.orientation){if(!this.ref.current)return console.warn("Unable to locate ReflexContainer dom node"),0;switch(e){case"horizontal":return this.ref.current.offsetHeight===0?(console.warn("Found ReflexContainer with height=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetHeight;case"vertical":default:return this.ref.current.offsetWidth===0?(console.warn("Found ReflexContainer with width=0, this will cause invalid behavior..."),console.warn(this.ref.current),0):1/this.ref.current.offsetWidth}}addOffset(e,t){const i=this.getSize(e),s=e.props.index,o=Math.max(i+t,0),l=this.state.flexData[s].flex,u=l>0?l*o/i:this.computePixelFlex()*o;this.state.flexData[s].flex=!isFinite(u)||isNaN(u)?0:u}dispatchStretch(e,t){const i=t<0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.min(s.props.maxSize,o+Math.abs(t))-o;if(this.addOffset(s,u),u<Math.abs(t)){const h=e-Math.sign(t)*2,d=Math.sign(t)*(Math.abs(t)-u);return[s,...this.dispatchStretch(h,d)]}return[s]}dispatchShrink(e,t){const i=t>0?e+1:e-1;if(i<0||i>this.children.length-1)return[];const s=this.children[i],o=this.getSize(s),u=Math.max(s.props.minSize,o-Math.abs(t))-o;if(this.addOffset(s,u),Math.abs(u)<Math.abs(t)){const h=e+Math.sign(t)*2,d=Math.sign(t)*(Math.abs(t)+u);return[s,...this.dispatchShrink(h,d)]}return[s]}dispatchOffset(e,t){return[...this.dispatchStretch(e,t),...this.dispatchShrink(e,t)]}emitElementsEvent(e,t){this.toArray(e).forEach(i=>{i.props[t]&&i.props[t]({domElement:i.ref.current,component:i})})}computeFlexData(e=this.getValidChildren(),t=this.props){const i=this.computePixelFlex(t.orientation),s=d=>d.reduce((m,_)=>!_f.isA(_)&&_.constrained?m-_.flex:m,1),o=d=>d.reduce((m,_)=>!_f.isA(_)&&!_.constrained?m+1:m,0),l=e.map(d=>{const m=d.props;return{maxFlex:(m.maxSize||Number.MAX_VALUE)*i,sizeFlex:(m.size||Number.MAX_VALUE)*i,minFlex:(m.minSize||1)*i,constrained:m.flex!==void 0,flex:m.flex||0,type:d.type}}),u=(d,m=0)=>{let _=!1;const v=o(d),E=s(d),w=d.map(x=>{if(_f.isA(x))return x;const A=x.constrained?x.flex:E/v,O=Math.min(x.sizeFlex,Math.min(x.maxFlex,Math.max(x.minFlex,A))),k=x.constrained||O!==A;return _=_||k,Y0({},x,{flex:O,constrained:k})});return _&&m<this.props.maxRecDepth?u(w,m+1):w};return u(l).map(d=>({flex:_f.isA(d)?0:d.flex,ref:Tr.createRef()}))}toArray(e){return e?Array.isArray(e)?e:[e]:[]}render(){const e=[this.state.resizing?"reflex-resizing":"",...this.props.className.split(" "),this.props.orientation,"reflex-container"].join(" ").trim();return this.children=Tr.Children.map(this.getValidChildren(),(t,i)=>{if(i>this.state.flexData.length-1)return Tr.createElement("div",null);const s=this.state.flexData[i],o=Y0({},t.props,{maxSize:t.props.maxSize||Number.MAX_VALUE,orientation:this.props.orientation,minSize:t.props.minSize||1,events:this.events,flex:s.flex,ref:s.ref,index:i});return Tr.cloneElement(t,o)}),Tr.createElement("div",He({},oR(this.props),{style:this.props.style,className:e,ref:this.ref}),this.children)}}kl(kA,"propTypes",{windowResizeAware:ui.bool,orientation:ui.oneOf(["horizontal","vertical"]),maxRecDepth:ui.number,className:ui.string,style:ui.object});kl(kA,"defaultProps",{orientation:"horizontal",windowResizeAware:!1,maxRecDepth:100,className:"",style:{}});class oE extends Tr.Component{static isA(e){return e?e.type===oE:!1}constructor(e){super(e),kl(this,"ref",Tr.createRef()),kl(this,"onMouseMove",t=>{if(this.state.active){const i=this.ref.current;this.props.events.emit("resize",{index:this.props.index,domElement:i,event:t}),this.props.onResize&&this.props.onResize({component:this,domElement:i}),t.stopPropagation(),t.preventDefault()}}),kl(this,"onMouseDown",t=>{this.setState({active:!0}),!(this.props.onStartResize&&this.props.onStartResize({domElement:this.ref.current,component:this}))&&this.props.events.emit("startResize",{index:this.props.index,event:t})}),kl(this,"onMouseUp",t=>{this.state.active&&(this.setState({active:!1}),this.props.onStopResize&&this.props.onStopResize({domElement:this.ref.current,component:this}),this.props.events.emit("stopResize",{index:this.props.index,event:t}))}),this.state={active:!1},this.document=e.document}componentDidMount(){this.document&&(this.document.addEventListener("touchend",this.onMouseUp),this.document.addEventListener("mouseup",this.onMouseUp),this.document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),this.document.addEventListener("touchmove",this.onMouseMove,{passive:!1}))}componentWillUnmount(){this.document&&(this.document.removeEventListener("mouseup",this.onMouseUp),this.document.removeEventListener("touchend",this.onMouseUp),this.document.removeEventListener("mousemove",this.onMouseMove),this.document.removeEventListener("touchmove",this.onMouseMove),this.state.active&&this.props.events.emit("stopResize",{index:this.props.index,event:null}))}render(){const e=[...this.props.className.split(" "),this.state.active?"active":"","reflex-handle"].join(" ").trim();return Tr.createElement("div",He({},oR(this.props),{onTouchStart:this.onMouseDown,onMouseDown:this.onMouseDown,style:this.props.style,className:e,id:this.props.id,ref:this.ref}),this.props.children)}}kl(oE,"propTypes",{children:ui.oneOfType([ui.arrayOf(ui.node),ui.node]),onStartResize:ui.func,onStopResize:ui.func,className:ui.string,propagate:ui.bool,onResize:ui.func,style:ui.object});kl(oE,"defaultProps",{document:typeof document>"u"?null:document,onStartResize:null,onStopResize:null,propagate:!1,onResize:null,className:"",style:{}});var S8="Expected a function",Y4=NaN,vce="[object Symbol]",yce=/^\s+|\s+$/g,bce=/^[-+]0x[0-9a-f]+$/i,Tce=/^0b[01]+$/i,Ece=/^0o[0-7]+$/i,$ce=parseInt,Sce=typeof zu=="object"&&zu&&zu.Object===Object&&zu,wce=typeof self=="object"&&self&&self.Object===Object&&self,xce=Sce||wce||Function("return this")(),Cce=Object.prototype,Mce=Cce.toString,Ace=Math.max,Ice=Math.min,y2=function(){return xce.Date.now()};function Rce(n,e,t){var i,s,o,l,u,h,d=0,m=!1,_=!1,v=!0;if(typeof n!="function")throw new TypeError(S8);e=K4(e)||0,OA(t)&&(m=!!t.leading,_="maxWait"in t,o=_?Ace(K4(t.maxWait)||0,e):o,v="trailing"in t?!!t.trailing:v);function E(F){var H=i,z=s;return i=s=void 0,d=F,l=n.apply(z,H),l}function w(F){return d=F,u=setTimeout(O,e),m?E(F):l}function x(F){var H=F-h,z=F-d,J=e-H;return _?Ice(J,o-z):J}function A(F){var H=F-h,z=F-d;return h===void 0||H>=e||H<0||_&&z>=o}function O(){var F=y2();if(A(F))return k(F);u=setTimeout(O,x(F))}function k(F){return u=void 0,v&&i?E(F):(i=s=void 0,l)}function N(){u!==void 0&&clearTimeout(u),d=0,i=h=s=u=void 0}function D(){return u===void 0?l:k(y2())}function U(){var F=y2(),H=A(F);if(i=arguments,s=this,h=F,H){if(u===void 0)return w(h);if(_)return u=setTimeout(O,e),E(h)}return u===void 0&&(u=setTimeout(O,e)),l}return U.cancel=N,U.flush=D,U}function kce(n,e,t){var i=!0,s=!0;if(typeof n!="function")throw new TypeError(S8);return OA(t)&&(i="leading"in t?!!t.leading:i,s="trailing"in t?!!t.trailing:s),Rce(n,e,{leading:i,maxWait:e,trailing:s})}function OA(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Oce(n){return!!n&&typeof n=="object"}function Lce(n){return typeof n=="symbol"||Oce(n)&&Mce.call(n)==vce}function K4(n){if(typeof n=="number")return n;if(Lce(n))return Y4;if(OA(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=OA(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(yce,"");var t=Tce.test(n);return t||Ece.test(n)?$ce(n.slice(2),t?2:8):bce.test(n)?Y4:+n}var Dce=kce;const Nce=fb(Dce);var w8=function(){if(typeof Map<"u")return Map;function n(e,t){var i=-1;return e.some(function(s,o){return s[0]===t?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var i=n(this.__entries__,t),s=this.__entries__[i];return s&&s[1]},e.prototype.set=function(t,i){var s=n(this.__entries__,t);~s?this.__entries__[s][1]=i:this.__entries__.push([t,i])},e.prototype.delete=function(t){var i=this.__entries__,s=n(i,t);~s&&i.splice(s,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,i){i===void 0&&(i=null);for(var s=0,o=this.__entries__;s<o.length;s++){var l=o[s];t.call(i,l[1],l[0])}},e}()}(),iD=typeof window<"u"&&typeof document<"u"&&window.document===document,LA=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Bce=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(LA):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Pce=2;function Fce(n,e){var t=!1,i=!1,s=0;function o(){t&&(t=!1,n()),i&&u()}function l(){Bce(o)}function u(){var h=Date.now();if(t){if(h-s<Pce)return;i=!0}else t=!0,i=!1,setTimeout(l,e);s=h}return u}var Uce=20,zce=["top","right","bottom","left","width","height","size","weight"],Hce=typeof MutationObserver<"u",Gce=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Fce(this.refresh.bind(this),Uce)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!iD||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Hce?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!iD||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=t===void 0?"":t,s=zce.some(function(o){return!!~i.indexOf(o)});s&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),x8=function(n,e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];Object.defineProperty(n,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return n},LT=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||LA},C8=aR(0,0,0,0);function DA(n){return parseFloat(n)||0}function J4(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(i,s){var o=n["border-"+s+"-width"];return i+DA(o)},0)}function Wce(n){for(var e=["top","right","bottom","left"],t={},i=0,s=e;i<s.length;i++){var o=s[i],l=n["padding-"+o];t[o]=DA(l)}return t}function Vce(n){var e=n.getBBox();return aR(0,0,e.width,e.height)}function jce(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return C8;var i=LT(n).getComputedStyle(n),s=Wce(i),o=s.left+s.right,l=s.top+s.bottom,u=DA(i.width),h=DA(i.height);if(i.boxSizing==="border-box"&&(Math.round(u+o)!==e&&(u-=J4(i,"left","right")+o),Math.round(h+l)!==t&&(h-=J4(i,"top","bottom")+l)),!Yce(n)){var d=Math.round(u+o)-e,m=Math.round(h+l)-t;Math.abs(d)!==1&&(u-=d),Math.abs(m)!==1&&(h-=m)}return aR(s.left,s.top,u,h)}var Xce=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof LT(n).SVGGraphicsElement}:function(n){return n instanceof LT(n).SVGElement&&typeof n.getBBox=="function"}}();function Yce(n){return n===LT(n).document.documentElement}function Kce(n){return iD?Xce(n)?Vce(n):jce(n):C8}function Jce(n){var e=n.x,t=n.y,i=n.width,s=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return x8(l,{x:e,y:t,width:i,height:s,top:t,right:e+i,bottom:s+t,left:e}),l}function aR(n,e,t,i){return{x:n,y:e,width:t,height:i}}var Qce=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=aR(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Kce(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),qce=function(){function n(e,t){var i=Jce(t);x8(this,{target:e,contentRect:i})}return n}(),Zce=function(){function n(e,t,i){if(this.activeObservations_=[],this.observations_=new w8,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof LT(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Qce(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof LT(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(i){return new qce(i.target,i.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),M8=typeof WeakMap<"u"?new WeakMap:new w8,A8=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Gce.getInstance(),i=new Zce(e,t,this);M8.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){A8.prototype[n]=function(){var e;return(e=M8.get(this))[n].apply(e,arguments)}});var ehe=function(){return typeof LA.ResizeObserver<"u"?LA.ResizeObserver:A8}(),the=["client","offset","scroll","bounds","margin"];function Q4(n){var e=[];return the.forEach(function(t){n[t]&&e.push(t)}),e}function q4(n,e){var t={};if(e.indexOf("client")>-1&&(t.client={top:n.clientTop,left:n.clientLeft,width:n.clientWidth,height:n.clientHeight}),e.indexOf("offset")>-1&&(t.offset={top:n.offsetTop,left:n.offsetLeft,width:n.offsetWidth,height:n.offsetHeight}),e.indexOf("scroll")>-1&&(t.scroll={top:n.scrollTop,left:n.scrollLeft,width:n.scrollWidth,height:n.scrollHeight}),e.indexOf("bounds")>-1){var i=n.getBoundingClientRect();t.bounds={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height}}if(e.indexOf("margin")>-1){var s=getComputedStyle(n);t.margin={top:s?parseInt(s.marginTop):0,right:s?parseInt(s.marginRight):0,bottom:s?parseInt(s.marginBottom):0,left:s?parseInt(s.marginLeft):0}}return t}function nhe(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||window}function rhe(n){return function(e){var t,i;return i=t=function(s){XB(o,s);function o(){for(var u,h=arguments.length,d=new Array(h),m=0;m<h;m++)d[m]=arguments[m];return u=s.call.apply(s,[this].concat(d))||this,u.state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},u._animationFrameID=null,u._resizeObserver=null,u._node=null,u._window=null,u.measure=function(_){var v=q4(u._node,n||Q4(u.props));_&&(v.entry=_[0].contentRect),u._animationFrameID=u._window.requestAnimationFrame(function(){u._resizeObserver!==null&&(u.setState({contentRect:v}),typeof u.props.onResize=="function"&&u.props.onResize(v))})},u._handleRef=function(_){u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.unobserve(u._node),u._node=_,u._window=nhe(u._node);var v=u.props.innerRef;v&&(typeof v=="function"?v(u._node):v.current=u._node),u._resizeObserver!==null&&u._node!==null&&u._resizeObserver.observe(u._node)},u}var l=o.prototype;return l.componentDidMount=function(){this._resizeObserver=this._window!==null&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new ehe(this.measure),this._node!==null&&(this._resizeObserver.observe(this._node),typeof this.props.onResize=="function"&&this.props.onResize(q4(this._node,n||Q4(this.props))))},l.componentWillUnmount=function(){this._window!==null&&this._window.cancelAnimationFrame(this._animationFrameID),this._resizeObserver!==null&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},l.render=function(){var h=this.props;h.innerRef,h.onResize;var d=Zn(h,["innerRef","onResize"]);return he.createElement(e,He({},d,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(he.Component),t.propTypes={client:ui.bool,offset:ui.bool,scroll:ui.bool,bounds:ui.bool,margin:ui.bool,innerRef:ui.oneOfType([ui.object,ui.func]),onResize:ui.func},i}}var iP=rhe()(function(n){var e=n.measure,t=n.measureRef,i=n.contentRect,s=n.children;return s({measure:e,measureRef:t,contentRect:i})});iP.displayName="Measure";iP.propTypes.children=ui.func;const sD=n=>n?Array.isArray(n)?n:[n]:[];class ihe extends Tr.Component{constructor(e){super(e),kl(this,"onResize",t=>{const{resizeHeight:i,resizeWidth:s}=this.props,{height:o,width:l}=t.bounds;this.setDimensions(Y0({},i&&{height:o},s&&{width:l}))}),this.setDimensions=Nce(t=>{this.setState(t)},this.props.propagateDimensionsRate/1e3),this.state={height:"100%",width:"100%"}}renderChildren(){const{propagateDimensions:e}=this.props,t=sD(this.props.children).filter(i=>!!i);return Tr.Children.map(t,i=>this.props.withHandle||oE.isA(i)?Tr.cloneElement(i,Y0({dimensions:e&&this.state},i.props,{index:this.props.index-1,events:this.props.events})):e?Tr.cloneElement(i,Y0({},i.props,{dimensions:this.state})):i)}render(){return Tr.createElement(iP,{bounds:!0,onResize:this.onResize},({measureRef:e})=>Tr.createElement("div",{ref:e,className:"reflex-size-aware"},Tr.createElement("div",{style:this.state},this.renderChildren())))}}class sP extends Tr.Component{constructor(e){super(e),this.state={size:e.size}}static getDerivedStateFromProps(e,t){return e.size!==t.size?Y0({},t,{size:e.size}):null}async componentDidUpdate(e,t,i){if(t.size!==this.state.size){const s=sD(this.props.direction);for(let o of s)await this.props.events.emit("element.size",{index:this.props.index,size:this.props.size,direction:o})}}renderChildren(){const e=sD(this.props.children).filter(t=>!!t);return Tr.Children.map(e,t=>this.props.withHandle||oE.isA(t)?Tr.cloneElement(t,Y0({},t.props,{index:this.props.index-1,events:this.props.events})):t)}render(){const e=[...this.props.className.split(" "),this.props.orientation,"reflex-element"].join(" ").trim(),t=Y0({},this.props.style,{flexGrow:this.props.flex,flexShrink:1,flexBasis:"0%"});return Tr.createElement("div",He({},oR(this.props),{ref:this.props.innerRef,className:e,style:t}),this.props.propagateDimensions?Tr.createElement(ihe,this.props):this.renderChildren())}}kl(sP,"propTypes",{propagateDimensions:ui.bool,resizeHeight:ui.bool,resizeWidth:ui.bool,className:ui.string,size:ui.number});kl(sP,"defaultProps",{propagateDimensionsRate:100,propagateDimensions:!1,resizeHeight:!0,resizeWidth:!0,direction:[1],className:""});const dC=Tr.forwardRef((n,e)=>Tr.createElement(sP,He({innerRef:e},n))),I8="/gpu-programming/assets/BASE_FRONT_GRILL_1-b5goAhwv.glb";var R8={exports:{}},yb={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */yb.ConcurrentRoot=1;yb.ContinuousEventPriority=4;yb.DefaultEventPriority=16;yb.DiscreteEventPriority=1;yb.IdleEventPriority=536870912;yb.LegacyRoot=0;R8.exports=yb;var Y$=R8.exports,k8={exports:{}},b2={exports:{}},T2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z4;function she(){return Z4||(Z4=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var le=ne-1>>>1,_e=j[le];if(0<s(_e,Z))j[le]=Z,j[ne]=_e,ne=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var le=0,_e=j.length,Oe=_e>>>1;le<Oe;){var xe=2*(le+1)-1,Xe=j[xe],Re=xe+1,Je=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(Je,Xe)?(j[le]=Je,j[Re]=ne,le=Re):(j[le]=Xe,j[xe]=ne,le=xe);else if(Re<_e&&0>s(Je,ne))j[le]=Je,j[Re]=ne,le=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function D(j){if(x=!1,N(j),!w)if(t(h)!==null)w=!0,ge(U);else{var Z=t(d);Z!==null&&Ae(D,Z.startTime-j)}}function U(j,Z){w=!1,x&&(x=!1,O(z),z=-1),E=!0;var ne=v;try{for(N(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),N(Z)}else i(h);_=t(h)}if(_!==null)var Oe=!0;else{var xe=t(d);xe!==null&&Ae(D,xe.startTime-Z),Oe=!1}return Oe}finally{_=null,v=ne,E=!1}}var F=!1,H=null,z=-1,J=5,te=-1;function re(){return!(n.unstable_now()-te<J)}function ie(){if(H!==null){var j=n.unstable_now();te=j;var Z=!0;try{Z=H(!0,j)}finally{Z?de():(F=!1,H=null)}}else F=!1}var de;if(typeof k=="function")de=function(){k(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=ie,de=function(){ue.postMessage(null)}}else de=function(){A(ie,0)};function ge(j){H=j,F||(F=!0,de())}function Ae(j,Z){z=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){w||E||(w=!0,ge(U))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var le=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>le?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(x?(O(z),z=-1):x=!0,Ae(D,ne-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(U))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(T2)),T2}var ez;function ohe(){return ez||(ez=1,b2.exports=she()),b2.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ahe=function(e){var t={},i=he,s=ohe(),o=Object.assign;function l(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,S=1;S<arguments.length;S++)f+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=Symbol.for("react.element"),d=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),U=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}function H(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case m:return"Fragment";case d:return"Portal";case v:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case w:return(c.displayName||"Context")+".Consumer";case E:return(c._context.displayName||"Context")+".Provider";case x:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case k:return f=c.displayName||null,f!==null?f:H(c.type)||"Memo";case N:f=c._payload,c=c._init;try{return H(c(f))}catch{}}return null}function z(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(f);case 8:return f===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function J(c){var f=c,S=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(S=f.return),c=f.return;while(c)}return f.tag===3?S:null}function te(c){if(J(c)!==c)throw Error(l(188))}function re(c){var f=c.alternate;if(!f){if(f=J(c),f===null)throw Error(l(188));return f!==c?null:c}for(var S=c,M=f;;){var L=S.return;if(L===null)break;var G=L.alternate;if(G===null){if(M=L.return,M!==null){S=M;continue}break}if(L.child===G.child){for(G=L.child;G;){if(G===S)return te(L),c;if(G===M)return te(L),f;G=G.sibling}throw Error(l(188))}if(S.return!==M.return)S=L,M=G;else{for(var se=!1,we=L.child;we;){if(we===S){se=!0,S=L,M=G;break}if(we===M){se=!0,M=L,S=G;break}we=we.sibling}if(!se){for(we=G.child;we;){if(we===S){se=!0,S=G,M=L;break}if(we===M){se=!0,M=G,S=L;break}we=we.sibling}if(!se)throw Error(l(189))}}if(S.alternate!==M)throw Error(l(190))}if(S.tag!==3)throw Error(l(188));return S.stateNode.current===S?c:f}function ie(c){return c=re(c),c!==null?de(c):null}function de(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=de(c);if(f!==null)return f;c=c.sibling}return null}function oe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=oe(c);if(f!==null)return f}c=c.sibling}return null}var ue=Array.isArray,ge=e.getPublicInstance,Ae=e.getRootHostContext,j=e.getChildHostContext,Z=e.prepareForCommit,ne=e.resetAfterCommit,le=e.createInstance,_e=e.appendInitialChild,Oe=e.finalizeInitialChildren,xe=e.prepareUpdate,Xe=e.shouldSetTextContent,Re=e.createTextInstance,Je=e.scheduleTimeout,et=e.cancelTimeout,at=e.noTimeout,Qe=e.isPrimaryRenderer,De=e.supportsMutation,Se=e.supportsPersistence,Pe=e.supportsHydration,rt=e.getInstanceFromNode,We=e.preparePortalMount,wt=e.getCurrentEventPriority,xt=e.detachDeletedInstance,ht=e.supportsMicrotasks,St=e.scheduleMicrotask,It=e.supportsTestSelectors,mt=e.findFiberRoot,ve=e.getBoundingRect,ee=e.getTextContent,ke=e.isHiddenSubtree,ot=e.matchAccessibilityRole,dt=e.setFocusIfFocusable,$t=e.setupIntersectionObserver,ct=e.appendChild,Ge=e.appendChildToContainer,Me=e.commitTextUpdate,X=e.commitMount,Q=e.commitUpdate,ae=e.insertBefore,$e=e.insertInContainerBefore,Ve=e.removeChild,Pt=e.removeChildFromContainer,Fe=e.resetTextContent,Wt=e.hideInstance,lt=e.hideTextInstance,Ut=e.unhideInstance,Ft=e.unhideTextInstance,Tn=e.clearContainer,Er=e.cloneInstance,cr=e.createContainerChildSet,Gr=e.appendChildToContainerChildSet,sr=e.finalizeContainerChildren,Xn=e.replaceContainerChildren,q=e.cloneHiddenInstance,me=e.cloneHiddenTextInstance,Ne=e.canHydrateInstance,nt=e.canHydrateTextInstance,Rt=e.canHydrateSuspenseInstance,Qt=e.isSuspenseInstancePending,gn=e.isSuspenseInstanceFallback,Ie=e.registerSuspenseInstanceRetry,st=e.getNextHydratableSibling,Tt=e.getFirstHydratableChild,pt=e.getFirstHydratableChildWithinContainer,Bt=e.getFirstHydratableChildWithinSuspenseInstance,xn=e.hydrateInstance,Bn=e.hydrateTextInstance,nr=e.hydrateSuspenseInstance,vr=e.getNextHydratableInstanceAfterSuspenseInstance,ei=e.commitHydratedContainer,$r=e.commitHydratedSuspenseInstance,Ar=e.clearSuspenseBoundary,Wi=e.clearSuspenseBoundaryFromContainer,jo=e.shouldDeleteUnhydratedTailInstances,Ro=e.didNotMatchHydratedContainerTextInstance,ll=e.didNotMatchHydratedTextInstance,Yt;function hr(c){if(Yt===void 0)try{throw Error()}catch(S){var f=S.stack.trim().match(/\n( *(at )?)/);Yt=f&&f[1]||""}return`
`+Yt+c}var fa=!1;function Xo(c,f){if(!c||fa)return"";fa=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(_t){var M=_t}Reflect.construct(c,[],f)}else{try{f.call()}catch(_t){M=_t}c.call(f.prototype)}else{try{throw Error()}catch(_t){M=_t}c()}}catch(_t){if(_t&&M&&typeof _t.stack=="string"){for(var L=_t.stack.split(`
`),G=M.stack.split(`
`),se=L.length-1,we=G.length-1;1<=se&&0<=we&&L[se]!==G[we];)we--;for(;1<=se&&0<=we;se--,we--)if(L[se]!==G[we]){if(se!==1||we!==1)do if(se--,we--,0>we||L[se]!==G[we]){var je=`
`+L[se].replace(" at new "," at ");return c.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",c.displayName)),je}while(1<=se&&0<=we);break}}}finally{fa=!1,Error.prepareStackTrace=S}return(c=c?c.displayName||c.name:"")?hr(c):""}var ps=Object.prototype.hasOwnProperty,fs=[],ci=-1;function dr(c){return{current:c}}function pn(c){0>ci||(c.current=fs[ci],fs[ci]=null,ci--)}function ar(c,f){ci++,fs[ci]=c.current,c.current=f}var wr={},er=dr(wr),hi=dr(!1),Qi=wr;function jr(c,f){var S=c.type.contextTypes;if(!S)return wr;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var L={},G;for(G in S)L[G]=f[G];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=L),L}function Bi(c){return c=c.childContextTypes,c!=null}function Pa(){pn(hi),pn(er)}function ul(c,f,S){if(er.current!==wr)throw Error(l(168));ar(er,f),ar(hi,S)}function gc(c,f,S){var M=c.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return S;M=M.getChildContext();for(var L in M)if(!(L in f))throw Error(l(108,z(c)||"Unknown",L));return o({},S,M)}function Vu(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||wr,Qi=er.current,ar(er,c),ar(hi,hi.current),!0}function Rs(c,f,S){var M=c.stateNode;if(!M)throw Error(l(169));S?(c=gc(c,f,Qi),M.__reactInternalMemoizedMergedChildContext=c,pn(hi),pn(er),ar(er,c)):pn(hi),ar(hi,S)}var ko=Math.clz32?Math.clz32:mh,uu=Math.log,Pl=Math.LN2;function mh(c){return c>>>=0,c===0?32:31-(uu(c)/Pl|0)|0}var Yo=64,tr=4194304;function Pi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Gc(c,f){var S=c.pendingLanes;if(S===0)return 0;var M=0,L=c.suspendedLanes,G=c.pingedLanes,se=S&268435455;if(se!==0){var we=se&~L;we!==0?M=Pi(we):(G&=se,G!==0&&(M=Pi(G)))}else se=S&~L,se!==0?M=Pi(se):G!==0&&(M=Pi(G));if(M===0)return 0;if(f!==0&&f!==M&&!(f&L)&&(L=M&-M,G=f&-f,L>=G||L===16&&(G&4194240)!==0))return f;if(M&4&&(M|=S&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=M;0<f;)S=31-ko(f),L=1<<S,M|=c[S],f&=~L;return M}function gh(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _c(c,f){for(var S=c.suspendedLanes,M=c.pingedLanes,L=c.expirationTimes,G=c.pendingLanes;0<G;){var se=31-ko(G),we=1<<se,je=L[se];je===-1?(!(we&S)||we&M)&&(L[se]=gh(we,f)):je<=f&&(c.expiredLanes|=we),G&=~we}}function cl(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function cu(c){for(var f=[],S=0;31>S;S++)f.push(c);return f}function hl(c,f,S){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-ko(f),c[f]=S}function dl(c,f){var S=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<S;){var L=31-ko(S),G=1<<L;f[L]=0,M[L]=-1,c[L]=-1,S&=~G}}function Jn(c,f){var S=c.entangledLanes|=f;for(c=c.entanglements;S;){var M=31-ko(S),L=1<<M;L&f|c[M]&f&&(c[M]|=f),S&=~L}}var Qn=0;function pl(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Fa=s.unstable_scheduleCallback,ma=s.unstable_cancelCallback,Fl=s.unstable_shouldYield,Ei=s.unstable_requestPaint,Fi=s.unstable_now,fl=s.unstable_ImmediatePriority,Rd=s.unstable_UserBlockingPriority,ks=s.unstable_NormalPriority,hu=s.unstable_IdlePriority,Oo=null,Ul=null;function Xr(c){if(Ul&&typeof Ul.onCommitFiberRoot=="function")try{Ul.onCommitFiberRoot(Oo,c,void 0,(c.current.flags&128)===128)}catch{}}function pr(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Vi=typeof Object.is=="function"?Object.is:pr,Os=null,du=!1,zl=!1;function Wc(c){Os===null?Os=[c]:Os.push(c)}function Ko(c){du=!0,Wc(c)}function Jo(){if(!zl&&Os!==null){zl=!0;var c=0,f=Qn;try{var S=Os;for(Qn=1;c<S.length;c++){var M=S[c];do M=M(!0);while(M!==null)}Os=null,du=!1}catch(L){throw Os!==null&&(Os=Os.slice(c+1)),Fa(fl,Jo),L}finally{Qn=f,zl=!1}}return null}var pu=u.ReactCurrentBatchConfig;function Yr(c,f){if(Vi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var S=Object.keys(c),M=Object.keys(f);if(S.length!==M.length)return!1;for(M=0;M<S.length;M++){var L=S[M];if(!ps.call(f,L)||!Vi(c[L],f[L]))return!1}return!0}function ms(c){switch(c.tag){case 5:return hr(c.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 2:case 15:return c=Xo(c.type,!1),c;case 11:return c=Xo(c.type.render,!1),c;case 1:return c=Xo(c.type,!0),c;default:return""}}function Ai(c,f){if(c&&c.defaultProps){f=o({},f),c=c.defaultProps;for(var S in c)f[S]===void 0&&(f[S]=c[S]);return f}return f}var ti=dr(null),ga=null,Ui=null,fu=null;function ro(){fu=Ui=ga=null}function mu(c,f,S){Qe?(ar(ti,f._currentValue),f._currentValue=S):(ar(ti,f._currentValue2),f._currentValue2=S)}function Ua(c){var f=ti.current;pn(ti),Qe?c._currentValue=f:c._currentValue2=f}function di(c,f,S){for(;c!==null;){var M=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),c===S)break;c=c.return}}function ni(c,f){ga=c,fu=Ui=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Qr=!0),c.firstContext=null)}function Un(c){var f=Qe?c._currentValue:c._currentValue2;if(fu!==c)if(c={context:c,memoizedValue:f,next:null},Ui===null){if(ga===null)throw Error(l(308));Ui=c,ga.dependencies={lanes:0,firstContext:c}}else Ui=Ui.next=c;return f}var Kr=null,$i=!1;function Xh(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gu(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function gs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function ml(c,f){var S=c.updateQueue;S!==null&&(S=S.shared,yr!==null&&c.mode&1&&!(On&2)?(c=S.interleaved,c===null?(f.next=f,Kr===null?Kr=[S]:Kr.push(S)):(f.next=c.next,c.next=f),S.interleaved=f):(c=S.pending,c===null?f.next=f:(f.next=c.next,c.next=f),S.pending=f))}function Yh(c,f,S){if(f=f.updateQueue,f!==null&&(f=f.shared,(S&4194240)!==0)){var M=f.lanes;M&=c.pendingLanes,S|=M,f.lanes=S,Jn(c,S)}}function pi(c,f){var S=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,S===M)){var L=null,G=null;if(S=S.firstBaseUpdate,S!==null){do{var se={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};G===null?L=G=se:G=G.next=se,S=S.next}while(S!==null);G===null?L=G=f:G=G.next=f}else L=G=f;S={baseState:M.baseState,firstBaseUpdate:L,lastBaseUpdate:G,shared:M.shared,effects:M.effects},c.updateQueue=S;return}c=S.lastBaseUpdate,c===null?S.firstBaseUpdate=f:c.next=f,S.lastBaseUpdate=f}function _u(c,f,S,M){var L=c.updateQueue;$i=!1;var G=L.firstBaseUpdate,se=L.lastBaseUpdate,we=L.shared.pending;if(we!==null){L.shared.pending=null;var je=we,_t=je.next;je.next=null,se===null?G=_t:se.next=_t,se=je;var zt=c.alternate;zt!==null&&(zt=zt.updateQueue,we=zt.lastBaseUpdate,we!==se&&(we===null?zt.firstBaseUpdate=_t:we.next=_t,zt.lastBaseUpdate=je))}if(G!==null){var Zt=L.baseState;se=0,zt=_t=je=null,we=G;do{var hn=we.lane,an=we.eventTime;if((M&hn)===hn){zt!==null&&(zt=zt.next={eventTime:an,lane:0,tag:we.tag,payload:we.payload,callback:we.callback,next:null});e:{var nn=c,br=we;switch(hn=f,an=S,br.tag){case 1:if(nn=br.payload,typeof nn=="function"){Zt=nn.call(an,Zt,hn);break e}Zt=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=br.payload,hn=typeof nn=="function"?nn.call(an,Zt,hn):nn,hn==null)break e;Zt=o({},Zt,hn);break e;case 2:$i=!0}}we.callback!==null&&we.lane!==0&&(c.flags|=64,hn=L.effects,hn===null?L.effects=[we]:hn.push(we))}else an={eventTime:an,lane:hn,tag:we.tag,payload:we.payload,callback:we.callback,next:null},zt===null?(_t=zt=an,je=Zt):zt=zt.next=an,se|=hn;if(we=we.next,we===null){if(we=L.shared.pending,we===null)break;hn=we,we=hn.next,hn.next=null,L.lastBaseUpdate=hn,L.shared.pending=null}}while(!0);if(zt===null&&(je=Zt),L.baseState=je,L.firstBaseUpdate=_t,L.lastBaseUpdate=zt,f=L.shared.interleaved,f!==null){L=f;do se|=L.lane,L=L.next;while(L!==f)}else G===null&&(L.shared.lanes=0);Cu|=se,c.lanes=se,c.memoizedState=Zt}}function hp(c,f,S){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var M=c[f],L=M.callback;if(L!==null){if(M.callback=null,M=S,typeof L!="function")throw Error(l(191,L));L.call(M)}}}var dp=new i.Component().refs;function _h(c,f,S,M){f=c.memoizedState,S=S(M,f),S=S==null?f:o({},f,S),c.memoizedState=S,c.lanes===0&&(c.updateQueue.baseState=S)}var pp={isMounted:function(c){return(c=c._reactInternals)?J(c)===c:!1},enqueueSetState:function(c,f,S){c=c._reactInternals;var M=Xi(),L=Ts(c),G=gs(M,L);G.payload=f,S!=null&&(G.callback=S),ml(c,G),f=aa(c,L,M),f!==null&&Yh(f,c,L)},enqueueReplaceState:function(c,f,S){c=c._reactInternals;var M=Xi(),L=Ts(c),G=gs(M,L);G.tag=1,G.payload=f,S!=null&&(G.callback=S),ml(c,G),f=aa(c,L,M),f!==null&&Yh(f,c,L)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var S=Xi(),M=Ts(c),L=gs(S,M);L.tag=2,f!=null&&(L.callback=f),ml(c,L),f=aa(c,M,S),f!==null&&Yh(f,c,M)}};function Wp(c,f,S,M,L,G,se){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,G,se):f.prototype&&f.prototype.isPureReactComponent?!Yr(S,M)||!Yr(L,G):!0}function Pf(c,f,S){var M=!1,L=wr,G=f.contextType;return typeof G=="object"&&G!==null?G=Un(G):(L=Bi(f)?Qi:er.current,M=f.contextTypes,G=(M=M!=null)?jr(c,L):wr),f=new f(S,G),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=pp,c.stateNode=f,f._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=L,c.__reactInternalMemoizedMaskedChildContext=G),f}function fp(c,f,S,M){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(S,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(S,M),f.state!==c&&pp.enqueueReplaceState(f,f.state,null)}function ju(c,f,S,M){var L=c.stateNode;L.props=S,L.state=c.memoizedState,L.refs=dp,Xh(c);var G=f.contextType;typeof G=="object"&&G!==null?L.context=Un(G):(G=Bi(f)?Qi:er.current,L.context=jr(c,G)),L.state=c.memoizedState,G=f.getDerivedStateFromProps,typeof G=="function"&&(_h(c,f,G,S),L.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(f=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),f!==L.state&&pp.enqueueReplaceState(L,L.state,null),_u(c,S,L,M),L.state=c.memoizedState),typeof L.componentDidMount=="function"&&(c.flags|=4194308)}var io=[],vu=0,vh=null,_a=0,Wr=[],lr=0,Vs=null,Qo=1,Lo="";function yu(c,f){io[vu++]=_a,io[vu++]=vh,vh=c,_a=f}function gl(c,f,S){Wr[lr++]=Qo,Wr[lr++]=Lo,Wr[lr++]=Vs,Vs=c;var M=Qo;c=Lo;var L=32-ko(M)-1;M&=~(1<<L),S+=1;var G=32-ko(f)+L;if(30<G){var se=L-L%5;G=(M&(1<<se)-1).toString(32),M>>=se,L-=se,Qo=1<<32-ko(f)+L|S<<L|M,Lo=G+c}else Qo=1<<G|S<<L|M,Lo=c}function Kh(c){c.return!==null&&(yu(c,1),gl(c,1,0))}function Si(c){for(;c===vh;)vh=io[--vu],io[vu]=null,_a=io[--vu],io[vu]=null;for(;c===Vs;)Vs=Wr[--lr],Wr[lr]=null,Lo=Wr[--lr],Wr[lr]=null,Qo=Wr[--lr],Wr[lr]=null}var fi=null,ur=null,wi=!1,qo=!1,Hl=null;function mp(c,f){var S=Fs(5,null,null,0);S.elementType="DELETED",S.stateNode=f,S.return=c,f=c.deletions,f===null?(c.deletions=[S],c.flags|=16):f.push(S)}function gp(c,f){switch(c.tag){case 5:return f=Ne(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,fi=c,ur=Tt(f),!0):!1;case 6:return f=nt(f,c.pendingProps),f!==null?(c.stateNode=f,fi=c,ur=null,!0):!1;case 13:if(f=Rt(f),f!==null){var S=Vs!==null?{id:Qo,overflow:Lo}:null;return c.memoizedState={dehydrated:f,treeContext:S,retryLane:1073741824},S=Fs(18,null,null,0),S.stateNode=f,S.return=c,c.child=S,fi=c,ur=null,!0}return!1;default:return!1}}function Jh(c){return(c.mode&1)!==0&&(c.flags&128)===0}function bu(c){if(wi){var f=ur;if(f){var S=f;if(!gp(c,f)){if(Jh(c))throw Error(l(418));f=st(S);var M=fi;f&&gp(c,f)?mp(M,S):(c.flags=c.flags&-4097|2,wi=!1,fi=c)}}else{if(Jh(c))throw Error(l(418));c.flags=c.flags&-4097|2,wi=!1,fi=c}}}function Xu(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;fi=c}function vc(c){if(!Pe||c!==fi)return!1;if(!wi)return Xu(c),wi=!0,!1;if(c.tag!==3&&(c.tag!==5||jo(c.type)&&!Xe(c.type,c.memoizedProps))){var f=ur;if(f){if(Jh(c)){for(c=ur;c;)c=st(c);throw Error(l(418))}for(;f;)mp(c,f),f=st(f)}}if(Xu(c),c.tag===13){if(!Pe)throw Error(l(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));ur=vr(c)}else ur=fi?st(c.stateNode):null;return!0}function yh(){Pe&&(ur=fi=null,qo=wi=!1)}function yc(c){Hl===null?Hl=[c]:Hl.push(c)}function Gl(c,f,S){if(c=S.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(l(309));var M=S.stateNode}if(!M)throw Error(l(147,c));var L=M,G=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===G?f.ref:(f=function(se){var we=L.refs;we===dp&&(we=L.refs={}),se===null?delete we[G]:we[G]=se},f._stringRef=G,f)}if(typeof c!="string")throw Error(l(284));if(!S._owner)throw Error(l(290,c))}return c}function Zo(c,f){throw c=Object.prototype.toString.call(f),Error(l(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function Yu(c){var f=c._init;return f(c._payload)}function bh(c){function f(Ee,Ce){if(c){var Ke=Ee.deletions;Ke===null?(Ee.deletions=[Ce],Ee.flags|=16):Ke.push(Ce)}}function S(Ee,Ce){if(!c)return null;for(;Ce!==null;)f(Ee,Ce),Ce=Ce.sibling;return null}function M(Ee,Ce){for(Ee=new Map;Ce!==null;)Ce.key!==null?Ee.set(Ce.key,Ce):Ee.set(Ce.index,Ce),Ce=Ce.sibling;return Ee}function L(Ee,Ce){return Ee=eo(Ee,Ce),Ee.index=0,Ee.sibling=null,Ee}function G(Ee,Ce,Ke){return Ee.index=Ke,c?(Ke=Ee.alternate,Ke!==null?(Ke=Ke.index,Ke<Ce?(Ee.flags|=2,Ce):Ke):(Ee.flags|=2,Ce)):(Ee.flags|=1048576,Ce)}function se(Ee){return c&&Ee.alternate===null&&(Ee.flags|=2),Ee}function we(Ee,Ce,Ke,Ot){return Ce===null||Ce.tag!==6?(Ce=ns(Ke,Ee.mode,Ot),Ce.return=Ee,Ce):(Ce=L(Ce,Ke),Ce.return=Ee,Ce)}function je(Ee,Ce,Ke,Ot){var Kt=Ke.type;return Kt===m?zt(Ee,Ce,Ke.props.children,Ot,Ke.key):Ce!==null&&(Ce.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===N&&Yu(Kt)===Ce.type)?(Ot=L(Ce,Ke.props),Ot.ref=Gl(Ee,Ce,Ke),Ot.return=Ee,Ot):(Ot=Ja(Ke.type,Ke.key,Ke.props,null,Ee.mode,Ot),Ot.ref=Gl(Ee,Ce,Ke),Ot.return=Ee,Ot)}function _t(Ee,Ce,Ke,Ot){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ke.containerInfo||Ce.stateNode.implementation!==Ke.implementation?(Ce=So(Ke,Ee.mode,Ot),Ce.return=Ee,Ce):(Ce=L(Ce,Ke.children||[]),Ce.return=Ee,Ce)}function zt(Ee,Ce,Ke,Ot,Kt){return Ce===null||Ce.tag!==7?(Ce=Ca(Ke,Ee.mode,Ot,Kt),Ce.return=Ee,Ce):(Ce=L(Ce,Ke),Ce.return=Ee,Ce)}function Zt(Ee,Ce,Ke){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ce=ns(""+Ce,Ee.mode,Ke),Ce.return=Ee,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case h:return Ke=Ja(Ce.type,Ce.key,Ce.props,null,Ee.mode,Ke),Ke.ref=Gl(Ee,null,Ce),Ke.return=Ee,Ke;case d:return Ce=So(Ce,Ee.mode,Ke),Ce.return=Ee,Ce;case N:var Ot=Ce._init;return Zt(Ee,Ot(Ce._payload),Ke)}if(ue(Ce)||F(Ce))return Ce=Ca(Ce,Ee.mode,Ke,null),Ce.return=Ee,Ce;Zo(Ee,Ce)}return null}function hn(Ee,Ce,Ke,Ot){var Kt=Ce!==null?Ce.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Kt!==null?null:we(Ee,Ce,""+Ke,Ot);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case h:return Ke.key===Kt?je(Ee,Ce,Ke,Ot):null;case d:return Ke.key===Kt?_t(Ee,Ce,Ke,Ot):null;case N:return Kt=Ke._init,hn(Ee,Ce,Kt(Ke._payload),Ot)}if(ue(Ke)||F(Ke))return Kt!==null?null:zt(Ee,Ce,Ke,Ot,null);Zo(Ee,Ke)}return null}function an(Ee,Ce,Ke,Ot,Kt){if(typeof Ot=="string"&&Ot!==""||typeof Ot=="number")return Ee=Ee.get(Ke)||null,we(Ce,Ee,""+Ot,Kt);if(typeof Ot=="object"&&Ot!==null){switch(Ot.$$typeof){case h:return Ee=Ee.get(Ot.key===null?Ke:Ot.key)||null,je(Ce,Ee,Ot,Kt);case d:return Ee=Ee.get(Ot.key===null?Ke:Ot.key)||null,_t(Ce,Ee,Ot,Kt);case N:var ln=Ot._init;return an(Ee,Ce,Ke,ln(Ot._payload),Kt)}if(ue(Ot)||F(Ot))return Ee=Ee.get(Ke)||null,zt(Ce,Ee,Ot,Kt,null);Zo(Ce,Ot)}return null}function nn(Ee,Ce,Ke,Ot){for(var Kt=null,ln=null,fn=Ce,kn=Ce=0,Wn=null;fn!==null&&kn<Ke.length;kn++){fn.index>kn?(Wn=fn,fn=null):Wn=fn.sibling;var fr=hn(Ee,fn,Ke[kn],Ot);if(fr===null){fn===null&&(fn=Wn);break}c&&fn&&fr.alternate===null&&f(Ee,fn),Ce=G(fr,Ce,kn),ln===null?Kt=fr:ln.sibling=fr,ln=fr,fn=Wn}if(kn===Ke.length)return S(Ee,fn),wi&&yu(Ee,kn),Kt;if(fn===null){for(;kn<Ke.length;kn++)fn=Zt(Ee,Ke[kn],Ot),fn!==null&&(Ce=G(fn,Ce,kn),ln===null?Kt=fn:ln.sibling=fn,ln=fn);return wi&&yu(Ee,kn),Kt}for(fn=M(Ee,fn);kn<Ke.length;kn++)Wn=an(fn,Ee,kn,Ke[kn],Ot),Wn!==null&&(c&&Wn.alternate!==null&&fn.delete(Wn.key===null?kn:Wn.key),Ce=G(Wn,Ce,kn),ln===null?Kt=Wn:ln.sibling=Wn,ln=Wn);return c&&fn.forEach(function(Ql){return f(Ee,Ql)}),wi&&yu(Ee,kn),Kt}function br(Ee,Ce,Ke,Ot){var Kt=F(Ke);if(typeof Kt!="function")throw Error(l(150));if(Ke=Kt.call(Ke),Ke==null)throw Error(l(151));for(var ln=Kt=null,fn=Ce,kn=Ce=0,Wn=null,fr=Ke.next();fn!==null&&!fr.done;kn++,fr=Ke.next()){fn.index>kn?(Wn=fn,fn=null):Wn=fn.sibling;var Ql=hn(Ee,fn,fr.value,Ot);if(Ql===null){fn===null&&(fn=Wn);break}c&&fn&&Ql.alternate===null&&f(Ee,fn),Ce=G(Ql,Ce,kn),ln===null?Kt=Ql:ln.sibling=Ql,ln=Ql,fn=Wn}if(fr.done)return S(Ee,fn),wi&&yu(Ee,kn),Kt;if(fn===null){for(;!fr.done;kn++,fr=Ke.next())fr=Zt(Ee,fr.value,Ot),fr!==null&&(Ce=G(fr,Ce,kn),ln===null?Kt=fr:ln.sibling=fr,ln=fr);return wi&&yu(Ee,kn),Kt}for(fn=M(Ee,fn);!fr.done;kn++,fr=Ke.next())fr=an(fn,Ee,kn,fr.value,Ot),fr!==null&&(c&&fr.alternate!==null&&fn.delete(fr.key===null?kn:fr.key),Ce=G(fr,Ce,kn),ln===null?Kt=fr:ln.sibling=fr,ln=fr);return c&&fn.forEach(function(Sm){return f(Ee,Sm)}),wi&&yu(Ee,kn),Kt}function ft(Ee,Ce,Ke,Ot){if(typeof Ke=="object"&&Ke!==null&&Ke.type===m&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case h:e:{for(var Kt=Ke.key,ln=Ce;ln!==null;){if(ln.key===Kt){if(Kt=Ke.type,Kt===m){if(ln.tag===7){S(Ee,ln.sibling),Ce=L(ln,Ke.props.children),Ce.return=Ee,Ee=Ce;break e}}else if(ln.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===N&&Yu(Kt)===ln.type){S(Ee,ln.sibling),Ce=L(ln,Ke.props),Ce.ref=Gl(Ee,ln,Ke),Ce.return=Ee,Ee=Ce;break e}S(Ee,ln);break}else f(Ee,ln);ln=ln.sibling}Ke.type===m?(Ce=Ca(Ke.props.children,Ee.mode,Ot,Ke.key),Ce.return=Ee,Ee=Ce):(Ot=Ja(Ke.type,Ke.key,Ke.props,null,Ee.mode,Ot),Ot.ref=Gl(Ee,Ce,Ke),Ot.return=Ee,Ee=Ot)}return se(Ee);case d:e:{for(ln=Ke.key;Ce!==null;){if(Ce.key===ln)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ke.containerInfo&&Ce.stateNode.implementation===Ke.implementation){S(Ee,Ce.sibling),Ce=L(Ce,Ke.children||[]),Ce.return=Ee,Ee=Ce;break e}else{S(Ee,Ce);break}else f(Ee,Ce);Ce=Ce.sibling}Ce=So(Ke,Ee.mode,Ot),Ce.return=Ee,Ee=Ce}return se(Ee);case N:return ln=Ke._init,ft(Ee,Ce,ln(Ke._payload),Ot)}if(ue(Ke))return nn(Ee,Ce,Ke,Ot);if(F(Ke))return br(Ee,Ce,Ke,Ot);Zo(Ee,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Ce!==null&&Ce.tag===6?(S(Ee,Ce.sibling),Ce=L(Ce,Ke),Ce.return=Ee,Ee=Ce):(S(Ee,Ce),Ce=ns(Ke,Ee.mode,Ot),Ce.return=Ee,Ee=Ce),se(Ee)):S(Ee,Ce)}return ft}var bc=bh(!0),Tc=bh(!1),_s={},Jr=dr(_s),_l=dr(_s),ea=dr(_s);function vl(c){if(c===_s)throw Error(l(174));return c}function Wl(c,f){ar(ea,f),ar(_l,c),ar(Jr,_s),c=Ae(f),pn(Jr),ar(Jr,c)}function Vc(){pn(Jr),pn(_l),pn(ea)}function kd(c){var f=vl(ea.current),S=vl(Jr.current);f=j(S,c.type,f),S!==f&&(ar(_l,c),ar(Jr,f))}function mi(c){_l.current===c&&(pn(Jr),pn(_l))}var Ye=dr(0);function kt(c){for(var f=c;f!==null;){if(f.tag===13){var S=f.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||Qt(S)||gn(S)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var bt=[];function mn(){for(var c=0;c<bt.length;c++){var f=bt[c];Qe?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}bt.length=0}var Dn=u.ReactCurrentDispatcher,qn=u.ReactCurrentBatchConfig,rr=0,An=null,Ir=null,Ls=null,vs=!1,vo=!1,va=0,ji=0;function os(){throw Error(l(321))}function Ec(c,f){if(f===null)return!1;for(var S=0;S<f.length&&S<c.length;S++)if(!Vi(c[S],f[S]))return!1;return!0}function Br(c,f,S,M,L,G){if(rr=G,An=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Dn.current=c===null||c.memoizedState===null?xh:td,c=S(M,L),vo){G=0;do{if(vo=!1,va=0,25<=G)throw Error(l(301));G+=1,Ls=Ir=null,f.updateQueue=null,Dn.current=Ju,c=S(M,L)}while(vo)}if(Dn.current=Sc,f=Ir!==null&&Ir.next!==null,rr=0,Ls=Ir=An=null,vs=!1,f)throw Error(l(300));return c}function Do(){var c=va!==0;return va=0,c}function Ds(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ls===null?An.memoizedState=Ls=c:Ls=Ls.next=c,Ls}function js(){if(Ir===null){var c=An.alternate;c=c!==null?c.memoizedState:null}else c=Ir.next;var f=Ls===null?An.memoizedState:Ls.next;if(f!==null)Ls=f,Ir=c;else{if(c===null)throw Error(l(310));Ir=c,c={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},Ls===null?An.memoizedState=Ls=c:Ls=Ls.next=c}return Ls}function ta(c,f){return typeof f=="function"?f(c):f}function Th(c){var f=js(),S=f.queue;if(S===null)throw Error(l(311));S.lastRenderedReducer=c;var M=Ir,L=M.baseQueue,G=S.pending;if(G!==null){if(L!==null){var se=L.next;L.next=G.next,G.next=se}M.baseQueue=L=G,S.pending=null}if(L!==null){G=L.next,M=M.baseState;var we=se=null,je=null,_t=G;do{var zt=_t.lane;if((rr&zt)===zt)je!==null&&(je=je.next={lane:0,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),M=_t.hasEagerState?_t.eagerState:c(M,_t.action);else{var Zt={lane:zt,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null};je===null?(we=je=Zt,se=M):je=je.next=Zt,An.lanes|=zt,Cu|=zt}_t=_t.next}while(_t!==null&&_t!==G);je===null?se=M:je.next=we,Vi(M,f.memoizedState)||(Qr=!0),f.memoizedState=M,f.baseState=se,f.baseQueue=je,S.lastRenderedState=M}if(c=S.interleaved,c!==null){L=c;do G=L.lane,An.lanes|=G,Cu|=G,L=L.next;while(L!==c)}else L===null&&(S.lanes=0);return[f.memoizedState,S.dispatch]}function jc(c){var f=js(),S=f.queue;if(S===null)throw Error(l(311));S.lastRenderedReducer=c;var M=S.dispatch,L=S.pending,G=f.memoizedState;if(L!==null){S.pending=null;var se=L=L.next;do G=c(G,se.action),se=se.next;while(se!==L);Vi(G,f.memoizedState)||(Qr=!0),f.memoizedState=G,f.baseQueue===null&&(f.baseState=G),S.lastRenderedState=G}return[G,M]}function Eh(){}function Tu(c,f){var S=An,M=js(),L=f(),G=!Vi(M.memoizedState,L);if(G&&(M.memoizedState=L,Qr=!0),M=M.queue,$h(yl.bind(null,S,M,c),[c]),M.getSnapshot!==f||G||Ls!==null&&Ls.memoizedState.tag&1){if(S.flags|=2048,Xc(9,qh.bind(null,S,M,L,f),void 0,null),yr===null)throw Error(l(349));rr&30||Qh(S,f,L)}return L}function Qh(c,f,S){c.flags|=16384,c={getSnapshot:f,value:S},f=An.updateQueue,f===null?(f={lastEffect:null,stores:null},An.updateQueue=f,f.stores=[c]):(S=f.stores,S===null?f.stores=[c]:S.push(c))}function qh(c,f,S,M){f.value=S,f.getSnapshot=M,Zh(f)&&aa(c,1,-1)}function yl(c,f,S){return S(function(){Zh(f)&&aa(c,1,-1)})}function Zh(c){var f=c.getSnapshot;c=c.value;try{var S=f();return!Vi(c,S)}catch{return!0}}function $c(c){var f=Ds();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:c},f.queue=c,c=c.dispatch=na.bind(null,An,c),[f.memoizedState,c]}function Xc(c,f,S,M){return c={tag:c,create:f,destroy:S,deps:M,next:null},f=An.updateQueue,f===null?(f={lastEffect:null,stores:null},An.updateQueue=f,f.lastEffect=c.next=c):(S=f.lastEffect,S===null?f.lastEffect=c.next=c:(M=S.next,S.next=c,c.next=M,f.lastEffect=c)),c}function Od(){return js().memoizedState}function za(c,f,S,M){var L=Ds();An.flags|=c,L.memoizedState=Xc(1|f,S,void 0,M===void 0?null:M)}function ya(c,f,S,M){var L=js();M=M===void 0?null:M;var G=void 0;if(Ir!==null){var se=Ir.memoizedState;if(G=se.destroy,M!==null&&Ec(M,se.deps)){L.memoizedState=Xc(f,S,G,M);return}}An.flags|=c,L.memoizedState=Xc(1|f,S,G,M)}function Eu(c,f){return za(8390656,8,c,f)}function $h(c,f){return ya(2048,8,c,f)}function ri(c,f){return ya(4,2,c,f)}function ed(c,f){return ya(4,4,c,f)}function Yc(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function Ku(c,f,S){return S=S!=null?S.concat([c]):null,ya(4,4,Yc.bind(null,f,c),S)}function Sh(){}function Ld(c,f){var S=js();f=f===void 0?null:f;var M=S.memoizedState;return M!==null&&f!==null&&Ec(f,M[1])?M[0]:(S.memoizedState=[c,f],c)}function bl(c,f){var S=js();f=f===void 0?null:f;var M=S.memoizedState;return M!==null&&f!==null&&Ec(f,M[1])?M[0]:(c=c(),S.memoizedState=[c,f],c)}function Dd(c,f){var S=Qn;Qn=S!==0&&4>S?S:4,c(!0);var M=qn.transition;qn.transition={};try{c(!1),f()}finally{Qn=S,qn.transition=M}}function wh(){return js().memoizedState}function so(c,f,S){var M=Ts(c);S={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null},Ff(c)?Vp(f,S):(Tl(c,f,S),S=Xi(),c=aa(c,M,S),c!==null&&El(c,f,M))}function na(c,f,S){var M=Ts(c),L={lane:M,action:S,hasEagerState:!1,eagerState:null,next:null};if(Ff(c))Vp(f,L);else{Tl(c,f,L);var G=c.alternate;if(c.lanes===0&&(G===null||G.lanes===0)&&(G=f.lastRenderedReducer,G!==null))try{var se=f.lastRenderedState,we=G(se,S);if(L.hasEagerState=!0,L.eagerState=we,Vi(we,se))return}catch{}finally{}S=Xi(),c=aa(c,M,S),c!==null&&El(c,f,M)}}function Ff(c){var f=c.alternate;return c===An||f!==null&&f===An}function Vp(c,f){vo=vs=!0;var S=c.pending;S===null?f.next=f:(f.next=S.next,S.next=f),c.pending=f}function Tl(c,f,S){yr!==null&&c.mode&1&&!(On&2)?(c=f.interleaved,c===null?(S.next=S,Kr===null?Kr=[f]:Kr.push(f)):(S.next=c.next,c.next=S),f.interleaved=S):(c=f.pending,c===null?S.next=S:(S.next=c.next,c.next=S),f.pending=S)}function El(c,f,S){if(S&4194240){var M=f.lanes;M&=c.pendingLanes,S|=M,f.lanes=S,Jn(c,S)}}var Sc={readContext:Un,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},xh={readContext:Un,useCallback:function(c,f){return Ds().memoizedState=[c,f===void 0?null:f],c},useContext:Un,useEffect:Eu,useImperativeHandle:function(c,f,S){return S=S!=null?S.concat([c]):null,za(4194308,4,Yc.bind(null,f,c),S)},useLayoutEffect:function(c,f){return za(4194308,4,c,f)},useInsertionEffect:function(c,f){return za(4,2,c,f)},useMemo:function(c,f){var S=Ds();return f=f===void 0?null:f,c=c(),S.memoizedState=[c,f],c},useReducer:function(c,f,S){var M=Ds();return f=S!==void 0?S(f):f,M.memoizedState=M.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},M.queue=c,c=c.dispatch=so.bind(null,An,c),[M.memoizedState,c]},useRef:function(c){var f=Ds();return c={current:c},f.memoizedState=c},useState:$c,useDebugValue:Sh,useDeferredValue:function(c){var f=$c(c),S=f[0],M=f[1];return Eu(function(){var L=qn.transition;qn.transition={};try{M(c)}finally{qn.transition=L}},[c]),S},useTransition:function(){var c=$c(!1),f=c[0];return c=Dd.bind(null,c[1]),Ds().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,S){var M=An,L=Ds();if(wi){if(S===void 0)throw Error(l(407));S=S()}else{if(S=f(),yr===null)throw Error(l(349));rr&30||Qh(M,f,S)}L.memoizedState=S;var G={value:S,getSnapshot:f};return L.queue=G,Eu(yl.bind(null,M,G,c),[c]),M.flags|=2048,Xc(9,qh.bind(null,M,G,S,f),void 0,null),S},useId:function(){var c=Ds(),f=yr.identifierPrefix;if(wi){var S=Lo,M=Qo;S=(M&~(1<<32-ko(M)-1)).toString(32)+S,f=":"+f+"R"+S,S=va++,0<S&&(f+="H"+S.toString(32)),f+=":"}else S=ji++,f=":"+f+"r"+S.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},td={readContext:Un,useCallback:Ld,useContext:Un,useEffect:$h,useImperativeHandle:Ku,useInsertionEffect:ri,useLayoutEffect:ed,useMemo:bl,useReducer:Th,useRef:Od,useState:function(){return Th(ta)},useDebugValue:Sh,useDeferredValue:function(c){var f=Th(ta),S=f[0],M=f[1];return $h(function(){var L=qn.transition;qn.transition={};try{M(c)}finally{qn.transition=L}},[c]),S},useTransition:function(){var c=Th(ta)[0],f=js().memoizedState;return[c,f]},useMutableSource:Eh,useSyncExternalStore:Tu,useId:wh,unstable_isNewReconciler:!1},Ju={readContext:Un,useCallback:Ld,useContext:Un,useEffect:$h,useImperativeHandle:Ku,useInsertionEffect:ri,useLayoutEffect:ed,useMemo:bl,useReducer:jc,useRef:Od,useState:function(){return jc(ta)},useDebugValue:Sh,useDeferredValue:function(c){var f=jc(ta),S=f[0],M=f[1];return $h(function(){var L=qn.transition;qn.transition={};try{M(c)}finally{qn.transition=L}},[c]),S},useTransition:function(){var c=jc(ta)[0],f=js().memoizedState;return[c,f]},useMutableSource:Eh,useSyncExternalStore:Tu,useId:wh,unstable_isNewReconciler:!1};function Ha(c,f){try{var S="",M=f;do S+=ms(M),M=M.return;while(M);var L=S}catch(G){L=`
Error generating stack: `+G.message+`
`+G.stack}return{value:c,source:f,stack:L}}function Qu(c,f){try{console.error(f.value)}catch(S){setTimeout(function(){throw S})}}var nd=typeof WeakMap=="function"?WeakMap:Map;function wc(c,f,S){S=gs(-1,S),S.tag=3,S.payload={element:null};var M=f.value;return S.callback=function(){Iu||(Iu=!0,Qs=M),Qu(c,f)},S}function xc(c,f,S){S=gs(-1,S),S.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var L=f.value;S.payload=function(){return M(L)},S.callback=function(){Qu(c,f)}}var G=c.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(S.callback=function(){Qu(c,f),typeof M!="function"&&(To===null?To=new Set([this]):To.add(this));var se=f.stack;this.componentDidCatch(f.value,{componentStack:se!==null?se:""})}),S}function qu(c,f,S){var M=c.pingCache;if(M===null){M=c.pingCache=new nd;var L=new Set;M.set(f,L)}else L=M.get(f),L===void 0&&(L=new Set,M.set(f,L));L.has(S)||(L.add(S),c=ku.bind(null,c,f,S),f.then(c,c))}function Nd(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function ra(c,f,S,M,L){return c.mode&1?(c.flags|=65536,c.lanes=L,c):(c===f?c.flags|=65536:(c.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(f=gs(-1,1),f.tag=2,ml(S,f))),S.lanes|=1),c)}function xr(c){c.flags|=4}function Vl(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var qi,ia,ye,Xs;if(De)qi=function(c,f){for(var S=f.child;S!==null;){if(S.tag===5||S.tag===6)_e(c,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},ia=function(){},ye=function(c,f,S,M,L){if(c=c.memoizedProps,c!==M){var G=f.stateNode,se=vl(Jr.current);S=xe(G,S,c,M,L,se),(f.updateQueue=S)&&xr(f)}},Xs=function(c,f,S,M){S!==M&&xr(f)};else if(Se){qi=function(c,f,S,M){for(var L=f.child;L!==null;){if(L.tag===5){var G=L.stateNode;S&&M&&(G=q(G,L.type,L.memoizedProps,L)),_e(c,G)}else if(L.tag===6)G=L.stateNode,S&&M&&(G=me(G,L.memoizedProps,L)),_e(c,G);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)G=L.child,G!==null&&(G.return=L),qi(c,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};var Ga=function(c,f,S,M){for(var L=f.child;L!==null;){if(L.tag===5){var G=L.stateNode;S&&M&&(G=q(G,L.type,L.memoizedProps,L)),Gr(c,G)}else if(L.tag===6)G=L.stateNode,S&&M&&(G=me(G,L.memoizedProps,L)),Gr(c,G);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)G=L.child,G!==null&&(G.return=L),Ga(c,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};ia=function(c,f){var S=f.stateNode;if(!Vl(c,f)){c=S.containerInfo;var M=cr(c);Ga(M,f,!1,!1),S.pendingChildren=M,xr(f),sr(c,M)}},ye=function(c,f,S,M,L){var G=c.stateNode,se=c.memoizedProps;if((c=Vl(c,f))&&se===M)f.stateNode=G;else{var we=f.stateNode,je=vl(Jr.current),_t=null;se!==M&&(_t=xe(we,S,se,M,L,je)),c&&_t===null?f.stateNode=G:(G=Er(G,_t,S,se,M,f,c,we),Oe(G,S,M,L,je)&&xr(f),f.stateNode=G,c?xr(f):qi(G,f,!1,!1))}},Xs=function(c,f,S,M){S!==M?(c=vl(ea.current),S=vl(Jr.current),f.stateNode=Re(M,c,S,f),xr(f)):f.stateNode=c.stateNode}}else ia=function(){},ye=function(){},Xs=function(){};function Ur(c,f){if(!wi)switch(c.tailMode){case"hidden":f=c.tail;for(var S=null;f!==null;)f.alternate!==null&&(S=f),f=f.sibling;S===null?c.tail=null:S.sibling=null;break;case"collapsed":S=c.tail;for(var M=null;S!==null;)S.alternate!==null&&(M=S),S=S.sibling;M===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function zn(c){var f=c.alternate!==null&&c.alternate.child===c.child,S=0,M=0;if(f)for(var L=c.child;L!==null;)S|=L.lanes|L.childLanes,M|=L.subtreeFlags&14680064,M|=L.flags&14680064,L.return=c,L=L.sibling;else for(L=c.child;L!==null;)S|=L.lanes|L.childLanes,M|=L.subtreeFlags,M|=L.flags,L.return=c,L=L.sibling;return c.subtreeFlags|=M,c.childLanes=S,f}function jp(c,f,S){var M=f.pendingProps;switch(Si(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(f),null;case 1:return Bi(f.type)&&Pa(),zn(f),null;case 3:return M=f.stateNode,Vc(),pn(hi),pn(er),mn(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(vc(f)?xr(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Hl!==null&&(si(Hl),Hl=null))),ia(c,f),zn(f),null;case 5:mi(f),S=vl(ea.current);var L=f.type;if(c!==null&&f.stateNode!=null)ye(c,f,L,M,S),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(l(166));return zn(f),null}if(c=vl(Jr.current),vc(f)){if(!Pe)throw Error(l(175));c=xn(f.stateNode,f.type,f.memoizedProps,S,c,f,!qo),f.updateQueue=c,c!==null&&xr(f)}else{var G=le(L,M,S,c,f);qi(G,f,!1,!1),f.stateNode=G,Oe(G,L,M,S,c)&&xr(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return zn(f),null;case 6:if(c&&f.stateNode!=null)Xs(c,f,c.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(l(166));if(c=vl(ea.current),S=vl(Jr.current),vc(f)){if(!Pe)throw Error(l(176));if(c=f.stateNode,M=f.memoizedProps,(S=Bn(c,M,f,!qo))&&(L=fi,L!==null))switch(G=(L.mode&1)!==0,L.tag){case 3:Ro(L.stateNode.containerInfo,c,M,G);break;case 5:ll(L.type,L.memoizedProps,L.stateNode,c,M,G)}S&&xr(f)}else f.stateNode=Re(M,c,S,f)}return zn(f),null;case 13:if(pn(Ye),M=f.memoizedState,wi&&ur!==null&&f.mode&1&&!(f.flags&128)){for(c=ur;c;)c=st(c);return yh(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=vc(f),c===null){if(!M)throw Error(l(318));if(!Pe)throw Error(l(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));nr(c,f)}else yh(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return zn(f),null}return Hl!==null&&(si(Hl),Hl=null),f.flags&128?(f.lanes=S,f):(M=M!==null,S=!1,c===null?vc(f):S=c.memoizedState!==null,M&&!S&&(f.child.flags|=8192,f.mode&1&&(c===null||Ye.current&1?Hi===0&&(Hi=3):eh())),f.updateQueue!==null&&(f.flags|=4),zn(f),null);case 4:return Vc(),ia(c,f),c===null&&We(f.stateNode.containerInfo),zn(f),null;case 10:return Ua(f.type._context),zn(f),null;case 17:return Bi(f.type)&&Pa(),zn(f),null;case 19:if(pn(Ye),L=f.memoizedState,L===null)return zn(f),null;if(M=(f.flags&128)!==0,G=L.rendering,G===null)if(M)Ur(L,!1);else{if(Hi!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(G=kt(c),G!==null){for(f.flags|=128,Ur(L,!1),c=G.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=S,M=f.child;M!==null;)S=M,L=c,S.flags&=14680066,G=S.alternate,G===null?(S.childLanes=0,S.lanes=L,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=G.childLanes,S.lanes=G.lanes,S.child=G.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=G.memoizedProps,S.memoizedState=G.memoizedState,S.updateQueue=G.updateQueue,S.type=G.type,L=G.dependencies,S.dependencies=L===null?null:{lanes:L.lanes,firstContext:L.firstContext}),M=M.sibling;return ar(Ye,Ye.current&1|2),f.child}c=c.sibling}L.tail!==null&&Fi()>wa&&(f.flags|=128,M=!0,Ur(L,!1),f.lanes=4194304)}else{if(!M)if(c=kt(G),c!==null){if(f.flags|=128,M=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Ur(L,!0),L.tail===null&&L.tailMode==="hidden"&&!G.alternate&&!wi)return zn(f),null}else 2*Fi()-L.renderingStartTime>wa&&S!==1073741824&&(f.flags|=128,M=!0,Ur(L,!1),f.lanes=4194304);L.isBackwards?(G.sibling=f.child,f.child=G):(c=L.last,c!==null?c.sibling=G:f.child=G,L.last=G)}return L.tail!==null?(f=L.tail,L.rendering=f,L.tail=f.sibling,L.renderingStartTime=Fi(),f.sibling=null,c=Ye.current,ar(Ye,M?c&1|2:c&1),f):(zn(f),null);case 22:case 23:return xa(),M=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?Js&1073741824&&(zn(f),De&&f.subtreeFlags&6&&(f.flags|=8192)):zn(f),null;case 24:return null;case 25:return null}throw Error(l(156,f.tag))}var ba=u.ReactCurrentOwner,Qr=!1;function gi(c,f,S,M){f.child=c===null?Tc(f,null,S,M):bc(f,c.child,S,M)}function xi(c,f,S,M,L){S=S.render;var G=f.ref;return ni(f,L),M=Br(c,f,S,M,G,L),S=Do(),c!==null&&!Qr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~L,Zi(c,f,L)):(wi&&S&&Kh(f),f.flags|=1,gi(c,f,M,L),f.child)}function Ii(c,f,S,M,L){if(c===null){var G=S.type;return typeof G=="function"&&!Lu(G)&&G.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(f.tag=15,f.type=G,Cc(c,f,G,M,L)):(c=Ja(S.type,null,M,f,f.mode,L),c.ref=f.ref,c.return=f,f.child=c)}if(G=c.child,!(c.lanes&L)){var se=G.memoizedProps;if(S=S.compare,S=S!==null?S:Yr,S(se,M)&&c.ref===f.ref)return Zi(c,f,L)}return f.flags|=1,c=eo(G,M),c.ref=f.ref,c.return=f,f.child=c}function Cc(c,f,S,M,L){if(c!==null&&Yr(c.memoizedProps,M)&&c.ref===f.ref)if(Qr=!1,(c.lanes&L)!==0)c.flags&131072&&(Qr=!0);else return f.lanes=c.lanes,Zi(c,f,L);return oo(c,f,S,M,L)}function No(c,f,S){var M=f.pendingProps,L=M.children,G=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},ar(Ri,Js),Js|=S;else if(S&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=G!==null?G.baseLanes:S,ar(Ri,Js),Js|=M;else return c=G!==null?G.baseLanes|S:S,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,ar(Ri,Js),Js|=c,null;else G!==null?(M=G.baseLanes|S,f.memoizedState=null):M=S,ar(Ri,Js),Js|=M;return gi(c,f,L,S),f.child}function Bo(c,f){var S=f.ref;(c===null&&S!==null||c!==null&&c.ref!==S)&&(f.flags|=512,f.flags|=2097152)}function oo(c,f,S,M,L){var G=Bi(S)?Qi:er.current;return G=jr(f,G),ni(f,L),S=Br(c,f,S,M,G,L),M=Do(),c!==null&&!Qr?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~L,Zi(c,f,L)):(wi&&M&&Kh(f),f.flags|=1,gi(c,f,S,L),f.child)}function Mc(c,f,S,M,L){if(Bi(S)){var G=!0;Vu(f)}else G=!1;if(ni(f,L),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Pf(f,S,M),ju(f,S,M,L),M=!0;else if(c===null){var se=f.stateNode,we=f.memoizedProps;se.props=we;var je=se.context,_t=S.contextType;typeof _t=="object"&&_t!==null?_t=Un(_t):(_t=Bi(S)?Qi:er.current,_t=jr(f,_t));var zt=S.getDerivedStateFromProps,Zt=typeof zt=="function"||typeof se.getSnapshotBeforeUpdate=="function";Zt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(we!==M||je!==_t)&&fp(f,se,M,_t),$i=!1;var hn=f.memoizedState;se.state=hn,_u(f,M,se,L),je=f.memoizedState,we!==M||hn!==je||hi.current||$i?(typeof zt=="function"&&(_h(f,S,zt,M),je=f.memoizedState),(we=$i||Wp(f,S,we,M,hn,je,_t))?(Zt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(f.flags|=4194308)):(typeof se.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=je),se.props=M,se.state=je,se.context=_t,M=we):(typeof se.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{se=f.stateNode,gu(c,f),we=f.memoizedProps,_t=f.type===f.elementType?we:Ai(f.type,we),se.props=_t,Zt=f.pendingProps,hn=se.context,je=S.contextType,typeof je=="object"&&je!==null?je=Un(je):(je=Bi(S)?Qi:er.current,je=jr(f,je));var an=S.getDerivedStateFromProps;(zt=typeof an=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(we!==Zt||hn!==je)&&fp(f,se,M,je),$i=!1,hn=f.memoizedState,se.state=hn,_u(f,M,se,L);var nn=f.memoizedState;we!==Zt||hn!==nn||hi.current||$i?(typeof an=="function"&&(_h(f,S,an,M),nn=f.memoizedState),(_t=$i||Wp(f,S,_t,M,hn,nn,je)||!1)?(zt||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,nn,je),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,nn,je)),typeof se.componentDidUpdate=="function"&&(f.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof se.componentDidUpdate!="function"||we===c.memoizedProps&&hn===c.memoizedState||(f.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||we===c.memoizedProps&&hn===c.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=nn),se.props=M,se.state=nn,se.context=je,M=_t):(typeof se.componentDidUpdate!="function"||we===c.memoizedProps&&hn===c.memoizedState||(f.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||we===c.memoizedProps&&hn===c.memoizedState||(f.flags|=1024),M=!1)}return yo(c,f,S,M,G,L)}function yo(c,f,S,M,L,G){Bo(c,f);var se=(f.flags&128)!==0;if(!M&&!se)return L&&Rs(f,S,!1),Zi(c,f,G);M=f.stateNode,ba.current=f;var we=se&&typeof S.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,c!==null&&se?(f.child=bc(f,c.child,null,G),f.child=bc(f,null,we,G)):gi(c,f,we,G),f.memoizedState=M.state,L&&Rs(f,S,!0),f.child}function Bd(c){var f=c.stateNode;f.pendingContext?ul(c,f.pendingContext,f.pendingContext!==f.context):f.context&&ul(c,f.context,!1),Wl(c,f.containerInfo)}function Pd(c,f,S,M,L){return yh(),yc(L),f.flags|=256,gi(c,f,S,M),f.child}var Ch={dehydrated:null,treeContext:null,retryLane:0};function Ta(c){return{baseLanes:c,cachePool:null}}function Cn(c,f,S){var M=f.pendingProps,L=Ye.current,G=!1,se=(f.flags&128)!==0,we;if((we=se)||(we=c!==null&&c.memoizedState===null?!1:(L&2)!==0),we?(G=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(L|=1),ar(Ye,L&1),c===null)return bu(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?gn(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(L=M.children,c=M.fallback,G?(M=f.mode,G=f.child,L={mode:"hidden",children:L},!(M&1)&&G!==null?(G.childLanes=0,G.pendingProps=L):G=Kl(L,M,0,null),c=Ca(c,M,S,null),G.return=f,c.return=f,G.sibling=c,f.child=G,f.child.memoizedState=Ta(S),f.memoizedState=Ch,c):as(f,L));if(L=c.memoizedState,L!==null){if(we=L.dehydrated,we!==null){if(se)return f.flags&256?(f.flags&=-257,$l(c,f,S,Error(l(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(G=M.fallback,L=f.mode,M=Kl({mode:"visible",children:M.children},L,0,null),G=Ca(G,L,S,null),G.flags|=2,M.return=f,G.return=f,M.sibling=G,f.child=M,f.mode&1&&bc(f,c.child,null,S),f.child.memoizedState=Ta(S),f.memoizedState=Ch,G);if(!(f.mode&1))f=$l(c,f,S,null);else if(gn(we))f=$l(c,f,S,Error(l(419)));else if(M=(S&c.childLanes)!==0,Qr||M){if(M=yr,M!==null){switch(S&-S){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}M=G&(M.suspendedLanes|S)?0:G,M!==0&&M!==L.retryLane&&(L.retryLane=M,aa(c,M,-1))}eh(),f=$l(c,f,S,Error(l(421)))}else Qt(we)?(f.flags|=128,f.child=c.child,f=Ka.bind(null,c),Ie(we,f),f=null):(S=L.treeContext,Pe&&(ur=Bt(we),fi=f,wi=!0,Hl=null,qo=!1,S!==null&&(Wr[lr++]=Qo,Wr[lr++]=Lo,Wr[lr++]=Vs,Qo=S.id,Lo=S.overflow,Vs=f)),f=as(f,f.pendingProps.children),f.flags|=4096);return f}return G?(M=ii(c,f,M.children,M.fallback,S),G=f.child,L=c.child.memoizedState,G.memoizedState=L===null?Ta(S):{baseLanes:L.baseLanes|S,cachePool:null},G.childLanes=c.childLanes&~S,f.memoizedState=Ch,M):(S=ys(c,f,M.children,S),f.memoizedState=null,S)}return G?(M=ii(c,f,M.children,M.fallback,S),G=f.child,L=c.child.memoizedState,G.memoizedState=L===null?Ta(S):{baseLanes:L.baseLanes|S,cachePool:null},G.childLanes=c.childLanes&~S,f.memoizedState=Ch,M):(S=ys(c,f,M.children,S),f.memoizedState=null,S)}function as(c,f){return f=Kl({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function ys(c,f,S,M){var L=c.child;return c=L.sibling,S=eo(L,{mode:"visible",children:S}),!(f.mode&1)&&(S.lanes=M),S.return=f,S.sibling=null,c!==null&&(M=f.deletions,M===null?(f.deletions=[c],f.flags|=16):M.push(c)),f.child=S}function ii(c,f,S,M,L){var G=f.mode;c=c.child;var se=c.sibling,we={mode:"hidden",children:S};return!(G&1)&&f.child!==c?(S=f.child,S.childLanes=0,S.pendingProps=we,f.deletions=null):(S=eo(c,we),S.subtreeFlags=c.subtreeFlags&14680064),se!==null?M=eo(se,M):(M=Ca(M,G,L,null),M.flags|=2),M.return=f,S.return=f,S.sibling=M,f.child=S,M}function $l(c,f,S,M){return M!==null&&yc(M),bc(f,c.child,null,S),c=as(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function Sl(c,f,S){c.lanes|=f;var M=c.alternate;M!==null&&(M.lanes|=f),di(c.return,f,S)}function cn(c,f,S,M,L){var G=c.memoizedState;G===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:S,tailMode:L}:(G.isBackwards=f,G.rendering=null,G.renderingStartTime=0,G.last=M,G.tail=S,G.tailMode=L)}function zr(c,f,S){var M=f.pendingProps,L=M.revealOrder,G=M.tail;if(gi(c,f,M.children,S),M=Ye.current,M&2)M=M&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Sl(c,S,f);else if(c.tag===19)Sl(c,S,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(ar(Ye,M),!(f.mode&1))f.memoizedState=null;else switch(L){case"forwards":for(S=f.child,L=null;S!==null;)c=S.alternate,c!==null&&kt(c)===null&&(L=S),S=S.sibling;S=L,S===null?(L=f.child,f.child=null):(L=S.sibling,S.sibling=null),cn(f,!1,L,S,G);break;case"backwards":for(S=null,L=f.child,f.child=null;L!==null;){if(c=L.alternate,c!==null&&kt(c)===null){f.child=L;break}c=L.sibling,L.sibling=S,S=L,L=c}cn(f,!0,S,null,G);break;case"together":cn(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Zi(c,f,S){if(c!==null&&(f.dependencies=c.dependencies),Cu|=f.lanes,!(S&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(l(153));if(f.child!==null){for(c=f.child,S=eo(c,c.pendingProps),f.child=S,S.return=f;c.sibling!==null;)c=c.sibling,S=S.sibling=eo(c,c.pendingProps),S.return=f;S.sibling=null}return f.child}function Xp(c,f,S){switch(f.tag){case 3:Bd(f),yh();break;case 5:kd(f);break;case 1:Bi(f.type)&&Vu(f);break;case 4:Wl(f,f.stateNode.containerInfo);break;case 10:mu(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(ar(Ye,Ye.current&1),f.flags|=128,null):S&f.child.childLanes?Cn(c,f,S):(ar(Ye,Ye.current&1),c=Zi(c,f,S),c!==null?c.sibling:null);ar(Ye,Ye.current&1);break;case 19:if(M=(S&f.childLanes)!==0,c.flags&128){if(M)return zr(c,f,S);f.flags|=128}var L=f.memoizedState;if(L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ar(Ye,Ye.current),M)break;return null;case 22:case 23:return f.lanes=0,No(c,f,S)}return Zi(c,f,S)}function Kc(c,f){switch(Si(f),f.tag){case 1:return Bi(f.type)&&Pa(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Vc(),pn(hi),pn(er),mn(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return mi(f),null;case 13:if(pn(Ye),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(l(340));yh()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return pn(Ye),null;case 4:return Vc(),null;case 10:return Ua(f.type._context),null;case 22:case 23:return xa(),null;case 24:return null;default:return null}}var Ns=!1,Po=!1,dn=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Wa(c,f){var S=c.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(M){Zs(c,f,M)}else S.current=null}function Zu(c,f,S){try{S()}catch(M){Zs(c,f,M)}}var Uf=!1;function $u(c,f){for(Z(c.containerInfo),rn=f;rn!==null;)if(c=rn,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,rn=f;else for(;rn!==null;){c=rn;try{var S=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var M=S.memoizedProps,L=S.memoizedState,G=c.stateNode,se=G.getSnapshotBeforeUpdate(c.elementType===c.type?M:Ai(c.type,M),L);G.__reactInternalSnapshotBeforeUpdate=se}break;case 3:De&&Tn(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(l(163))}}catch(we){Zs(c,c.return,we)}if(f=c.sibling,f!==null){f.return=c.return,rn=f;break}rn=c.return}return S=Uf,Uf=!1,S}function sa(c,f,S){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var L=M=M.next;do{if((L.tag&c)===c){var G=L.destroy;L.destroy=void 0,G!==void 0&&Zu(f,S,G)}L=L.next}while(L!==M)}}function ls(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var S=f=f.next;do{if((S.tag&c)===c){var M=S.create;S.destroy=M()}S=S.next}while(S!==f)}}function Ea(c){var f=c.ref;if(f!==null){var S=c.stateNode;switch(c.tag){case 5:c=ge(S);break;default:c=S}typeof f=="function"?f(c):f.current=c}}function zi(c,f,S){if(Ul&&typeof Ul.onCommitFiberUnmount=="function")try{Ul.onCommitFiberUnmount(Oo,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var L=M,G=L.destroy;L=L.tag,G!==void 0&&(L&2||L&4)&&Zu(f,S,G),M=M.next}while(M!==c)}break;case 1:if(Wa(f,S),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(se){Zs(f,S,se)}break;case 5:Wa(f,S);break;case 4:De?rd(c,f,S):Se&&Se&&(f=f.stateNode.containerInfo,S=cr(f),Xn(f,S))}}function $a(c,f,S){for(var M=f;;)if(zi(c,M,S),M.child===null||De&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function Su(c){var f=c.alternate;f!==null&&(c.alternate=null,Su(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&xt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Fd(c){return c.tag===5||c.tag===3||c.tag===4}function ec(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Fd(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Ys(c){if(De){e:{for(var f=c.return;f!==null;){if(Fd(f))break e;f=f.return}throw Error(l(160))}var S=f;switch(S.tag){case 5:f=S.stateNode,S.flags&32&&(Fe(f),S.flags&=-33),S=ec(c),Jc(c,S,f);break;case 3:case 4:f=S.stateNode.containerInfo,S=ec(c),Ud(c,S,f);break;default:throw Error(l(161))}}}function Ud(c,f,S){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?$e(S,c,f):Ge(S,c);else if(M!==4&&(c=c.child,c!==null))for(Ud(c,f,S),c=c.sibling;c!==null;)Ud(c,f,S),c=c.sibling}function Jc(c,f,S){var M=c.tag;if(M===5||M===6)c=c.stateNode,f?ae(S,c,f):ct(S,c);else if(M!==4&&(c=c.child,c!==null))for(Jc(c,f,S),c=c.sibling;c!==null;)Jc(c,f,S),c=c.sibling}function rd(c,f,S){for(var M=f,L=!1,G,se;;){if(!L){L=M.return;e:for(;;){if(L===null)throw Error(l(160));switch(G=L.stateNode,L.tag){case 5:se=!1;break e;case 3:G=G.containerInfo,se=!0;break e;case 4:G=G.containerInfo,se=!0;break e}L=L.return}L=!0}if(M.tag===5||M.tag===6)$a(c,M,S),se?Pt(G,M.stateNode):Ve(G,M.stateNode);else if(M.tag===18)se?Wi(G,M.stateNode):Ar(G,M.stateNode);else if(M.tag===4){if(M.child!==null){G=M.stateNode.containerInfo,se=!0,M.child.return=M,M=M.child;continue}}else if(zi(c,M,S),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(L=!1)}M.sibling.return=M.return,M=M.sibling}}function Sa(c,f){if(De){switch(f.tag){case 0:case 11:case 14:case 15:sa(3,f,f.return),ls(3,f),sa(5,f,f.return);return;case 1:return;case 5:var S=f.stateNode;if(S!=null){var M=f.memoizedProps;c=c!==null?c.memoizedProps:M;var L=f.type,G=f.updateQueue;f.updateQueue=null,G!==null&&Q(S,G,L,c,M,f)}return;case 6:if(f.stateNode===null)throw Error(l(162));S=f.memoizedProps,Me(f.stateNode,c!==null?c.memoizedProps:S,S);return;case 3:Pe&&c!==null&&c.memoizedState.isDehydrated&&ei(f.stateNode.containerInfo);return;case 12:return;case 13:wl(f);return;case 19:wl(f);return;case 17:return}throw Error(l(163))}switch(f.tag){case 0:case 11:case 14:case 15:sa(3,f,f.return),ls(3,f),sa(5,f,f.return);return;case 12:return;case 13:wl(f);return;case 19:wl(f);return;case 3:Pe&&c!==null&&c.memoizedState.isDehydrated&&ei(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Se){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Xn(f.containerInfo,f.pendingChildren);break e}throw Error(l(163))}}function wl(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var S=c.stateNode;S===null&&(S=c.stateNode=new dn),f.forEach(function(M){var L=Ou.bind(null,c,M);S.has(M)||(S.add(M),M.then(L,L))})}}function Yp(c,f){for(rn=f;rn!==null;){f=rn;var S=f.deletions;if(S!==null)for(var M=0;M<S.length;M++){var L=S[M];try{var G=c;De?rd(G,L,f):$a(G,L,f);var se=L.alternate;se!==null&&(se.return=null),L.return=null}catch(Kt){Zs(L,f,Kt)}}if(S=f.child,f.subtreeFlags&12854&&S!==null)S.return=f,rn=S;else for(;rn!==null;){f=rn;try{var we=f.flags;if(we&32&&De&&Fe(f.stateNode),we&512){var je=f.alternate;if(je!==null){var _t=je.ref;_t!==null&&(typeof _t=="function"?_t(null):_t.current=null)}}if(we&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var zt=f.alternate;(zt===null||zt.memoizedState===null)&&(sd=Fi())}break;case 22:var Zt=f.memoizedState!==null,hn=f.alternate,an=hn!==null&&hn.memoizedState!==null;if(S=f,De){e:if(M=S,L=Zt,G=null,De)for(var nn=M;;){if(nn.tag===5){if(G===null){G=nn;var br=nn.stateNode;L?Wt(br):Ut(nn.stateNode,nn.memoizedProps)}}else if(nn.tag===6){if(G===null){var ft=nn.stateNode;L?lt(ft):Ft(ft,nn.memoizedProps)}}else if((nn.tag!==22&&nn.tag!==23||nn.memoizedState===null||nn===M)&&nn.child!==null){nn.child.return=nn,nn=nn.child;continue}if(nn===M)break;for(;nn.sibling===null;){if(nn.return===null||nn.return===M)break e;G===nn&&(G=null),nn=nn.return}G===nn&&(G=null),nn.sibling.return=nn.return,nn=nn.sibling}}if(Zt&&!an&&S.mode&1){rn=S;for(var Ee=S.child;Ee!==null;){for(S=rn=Ee;rn!==null;){M=rn;var Ce=M.child;switch(M.tag){case 0:case 11:case 14:case 15:sa(4,M,M.return);break;case 1:Wa(M,M.return);var Ke=M.stateNode;if(typeof Ke.componentWillUnmount=="function"){var Ot=M.return;try{Ke.props=M.memoizedProps,Ke.state=M.memoizedState,Ke.componentWillUnmount()}catch(Kt){Zs(M,Ot,Kt)}}break;case 5:Wa(M,M.return);break;case 22:if(M.memoizedState!==null){Ac(S);continue}}Ce!==null?(Ce.return=M,rn=Ce):Ac(S)}Ee=Ee.sibling}}}switch(we&4102){case 2:Ys(f),f.flags&=-3;break;case 6:Ys(f),f.flags&=-3,Sa(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Sa(f.alternate,f);break;case 4:Sa(f.alternate,f)}}catch(Kt){Zs(f,f.return,Kt)}if(S=f.sibling,S!==null){S.return=f.return,rn=S;break}rn=f.return}}}function jl(c,f,S){rn=c,wu(c)}function wu(c,f,S){for(var M=(c.mode&1)!==0;rn!==null;){var L=rn,G=L.child;if(L.tag===22&&M){var se=L.memoizedState!==null||Ns;if(!se){var we=L.alternate,je=we!==null&&we.memoizedState!==null||Po;we=Ns;var _t=Po;if(Ns=se,(Po=je)&&!_t)for(rn=L;rn!==null;)se=rn,je=se.child,se.tag===22&&se.memoizedState!==null?us(L):je!==null?(je.return=se,rn=je):us(L);for(;G!==null;)rn=G,wu(G),G=G.sibling;rn=L,Ns=we,Po=_t}id(c)}else L.subtreeFlags&8772&&G!==null?(G.return=L,rn=G):id(c)}}function id(c){for(;rn!==null;){var f=rn;if(f.flags&8772){var S=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Po||ls(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!Po)if(S===null)M.componentDidMount();else{var L=f.elementType===f.type?S.memoizedProps:Ai(f.type,S.memoizedProps);M.componentDidUpdate(L,S.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var G=f.updateQueue;G!==null&&hp(f,G,M);break;case 3:var se=f.updateQueue;if(se!==null){if(S=null,f.child!==null)switch(f.child.tag){case 5:S=ge(f.child.stateNode);break;case 1:S=f.child.stateNode}hp(f,se,S)}break;case 5:var we=f.stateNode;S===null&&f.flags&4&&X(we,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Pe&&f.memoizedState===null){var je=f.alternate;if(je!==null){var _t=je.memoizedState;if(_t!==null){var zt=_t.dehydrated;zt!==null&&$r(zt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(l(163))}Po||f.flags&512&&Ea(f)}catch(Zt){Zs(f,f.return,Zt)}}if(f===c){rn=null;break}if(S=f.sibling,S!==null){S.return=f.return,rn=S;break}rn=f.return}}function Ac(c){for(;rn!==null;){var f=rn;if(f===c){rn=null;break}var S=f.sibling;if(S!==null){S.return=f.return,rn=S;break}rn=f.return}}function us(c){for(;rn!==null;){var f=rn;try{switch(f.tag){case 0:case 11:case 15:var S=f.return;try{ls(4,f)}catch(je){Zs(f,S,je)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var L=f.return;try{M.componentDidMount()}catch(je){Zs(f,L,je)}}var G=f.return;try{Ea(f)}catch(je){Zs(f,G,je)}break;case 5:var se=f.return;try{Ea(f)}catch(je){Zs(f,se,je)}}}catch(je){Zs(f,f.return,je)}if(f===c){rn=null;break}var we=f.sibling;if(we!==null){we.return=f.return,rn=we;break}rn=f.return}}var xu=0,tc=1,bo=2,Va=3,bs=4;if(typeof Symbol=="function"&&Symbol.for){var ao=Symbol.for;xu=ao("selector.component"),tc=ao("selector.has_pseudo_class"),bo=ao("selector.role"),Va=ao("selector.test_id"),bs=ao("selector.text")}function Qc(c){var f=rt(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(l(364));return f}if(c=mt(c),c===null)throw Error(l(362));return c.stateNode.current}function Ks(c,f){switch(f.$$typeof){case xu:if(c.type===f.value)return!0;break;case tc:e:{f=f.value,c=[c,0];for(var S=0;S<c.length;){var M=c[S++],L=c[S++],G=f[L];if(M.tag!==5||!ke(M)){for(;G!=null&&Ks(M,G);)L++,G=f[L];if(L===f.length){f=!0;break e}else for(M=M.child;M!==null;)c.push(M,L),M=M.sibling}}f=!1}return f;case bo:if(c.tag===5&&ot(c.stateNode,f.value))return!0;break;case bs:if((c.tag===5||c.tag===6)&&(c=ee(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Va:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(l(365))}return!1}function ja(c){switch(c.$$typeof){case xu:return"<"+(H(c.value)||"Unknown")+">";case tc:return":has("+(ja(c)||"")+")";case bo:return'[role="'+c.value+'"]';case bs:return'"'+c.value+'"';case Va:return'[data-testname="'+c.value+'"]';default:throw Error(l(365))}}function nc(c,f){var S=[];c=[c,0];for(var M=0;M<c.length;){var L=c[M++],G=c[M++],se=f[G];if(L.tag!==5||!ke(L)){for(;se!=null&&Ks(L,se);)G++,se=f[G];if(G===f.length)S.push(L);else for(L=L.child;L!==null;)c.push(L,G),L=L.sibling}}return S}function _p(c,f){if(!It)throw Error(l(363));c=Qc(c),c=nc(c,f),f=[],c=Array.from(c);for(var S=0;S<c.length;){var M=c[S++];if(M.tag===5)ke(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return f}var qc=Math.ceil,oa=u.ReactCurrentDispatcher,_i=u.ReactCurrentOwner,wn=u.ReactCurrentBatchConfig,On=0,yr=null,Or=null,Hr=0,Js=0,Ri=dr(0),Hi=0,Xl=null,Cu=0,rc=0,Mu=0,Bs=null,lo=null,sd=0,wa=1/0;function Au(){wa=Fi()+500}var Iu=!1,Qs=null,To=null,Xa=!1,Eo=null,ic=0,Ru=0,Mh=null,Zc=-1,Sr=0;function Xi(){return On&6?Fi():Zc!==-1?Zc:Zc=Fi()}function Ts(c){return c.mode&1?On&2&&Hr!==0?Hr&-Hr:pu.transition!==null?(Sr===0&&(c=Yo,Yo<<=1,!(Yo&4194240)&&(Yo=64),Sr=c),Sr):(c=Qn,c!==0?c:wt()):1}function aa(c,f,S){if(50<Ru)throw Ru=0,Mh=null,Error(l(185));var M=Ps(c,f);return M===null?null:(hl(M,f,S),(!(On&2)||M!==yr)&&(M===yr&&(!(On&2)&&(rc|=f),Hi===4&&xl(M,Hr)),Gn(M,S),f===1&&On===0&&!(c.mode&1)&&(Au(),du&&Jo())),M)}function Ps(c,f){c.lanes|=f;var S=c.alternate;for(S!==null&&(S.lanes|=f),S=c,c=c.return;c!==null;)c.childLanes|=f,S=c.alternate,S!==null&&(S.childLanes|=f),S=c,c=c.return;return S.tag===3?S.stateNode:null}function Gn(c,f){var S=c.callbackNode;_c(c,f);var M=Gc(c,c===yr?Hr:0);if(M===0)S!==null&&ma(S),c.callbackNode=null,c.callbackPriority=0;else if(f=M&-M,c.callbackPriority!==f){if(S!=null&&ma(S),f===1)c.tag===0?Ko(Ya.bind(null,c)):Wc(Ya.bind(null,c)),ht?St(function(){On===0&&Jo()}):Fa(fl,Jo),S=null;else{switch(pl(M)){case 1:S=fl;break;case 4:S=Rd;break;case 16:S=ks;break;case 536870912:S=hu;break;default:S=ks}S=sh(S,Ic.bind(null,c))}c.callbackPriority=f,c.callbackNode=S}}function Ic(c,f){if(Zc=-1,Sr=0,On&6)throw Error(l(327));var S=c.callbackNode;if(sc()&&c.callbackNode!==S)return null;var M=Gc(c,c===yr?Hr:0);if(M===0)return null;if(M&30||M&c.expiredLanes||f)f=ts(c,M);else{f=M;var L=On;On|=2;var G=od();(yr!==c||Hr!==f)&&(Au(),Lr(c,f));do try{Ah();break}catch(we){Rc(c,we)}while(!0);ro(),oa.current=G,On=L,Or!==null?f=0:(yr=null,Hr=0,f=Hi)}if(f!==0){if(f===2&&(L=cl(c),L!==0&&(M=L,f=on(c,L))),f===1)throw S=Xl,Lr(c,0),xl(c,M),Gn(c,Fi()),S;if(f===6)xl(c,M);else{if(L=c.current.alternate,!(M&30)&&!es(L)&&(f=ts(c,M),f===2&&(G=cl(c),G!==0&&(M=G,f=on(c,G))),f===1))throw S=Xl,Lr(c,0),xl(c,M),Gn(c,Fi()),S;switch(c.finishedWork=L,c.finishedLanes=M,f){case 0:case 1:throw Error(l(345));case 2:th(c,lo);break;case 3:if(xl(c,M),(M&130023424)===M&&(f=sd+500-Fi(),10<f)){if(Gc(c,0)!==0)break;if(L=c.suspendedLanes,(L&M)!==M){Xi(),c.pingedLanes|=c.suspendedLanes&L;break}c.timeoutHandle=Je(th.bind(null,c,lo),f);break}th(c,lo);break;case 4:if(xl(c,M),(M&4194240)===M)break;for(f=c.eventTimes,L=-1;0<M;){var se=31-ko(M);G=1<<se,se=f[se],se>L&&(L=se),M&=~G}if(M=L,M=Fi()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*qc(M/1960))-M,10<M){c.timeoutHandle=Je(th.bind(null,c,lo),M);break}th(c,lo);break;case 5:th(c,lo);break;default:throw Error(l(329))}}}return Gn(c,Fi()),c.callbackNode===S?Ic.bind(null,c):null}function on(c,f){var S=Bs;return c.current.memoizedState.isDehydrated&&(Lr(c,f).flags|=256),c=ts(c,f),c!==2&&(f=lo,lo=S,f!==null&&si(f)),c}function si(c){lo===null?lo=c:lo.push.apply(lo,c)}function es(c){for(var f=c;;){if(f.flags&16384){var S=f.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var M=0;M<S.length;M++){var L=S[M],G=L.getSnapshot;L=L.value;try{if(!Vi(G(),L))return!1}catch{return!1}}}if(S=f.child,f.subtreeFlags&16384&&S!==null)S.return=f,f=S;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function xl(c,f){for(f&=~Mu,f&=~rc,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var S=31-ko(f),M=1<<S;c[S]=-1,f&=~M}}function Ya(c){if(On&6)throw Error(l(327));sc();var f=Gc(c,0);if(!(f&1))return Gn(c,Fi()),null;var S=ts(c,f);if(c.tag!==0&&S===2){var M=cl(c);M!==0&&(f=M,S=on(c,M))}if(S===1)throw S=Xl,Lr(c,0),xl(c,f),Gn(c,Fi()),S;if(S===6)throw Error(l(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,th(c,lo),Gn(c,Fi()),null}function Dt(c){Eo!==null&&Eo.tag===0&&!(On&6)&&sc();var f=On;On|=1;var S=wn.transition,M=Qn;try{if(wn.transition=null,Qn=1,c)return c()}finally{Qn=M,wn.transition=S,On=f,!(On&6)&&Jo()}}function xa(){Js=Ri.current,pn(Ri)}function Lr(c,f){c.finishedWork=null,c.finishedLanes=0;var S=c.timeoutHandle;if(S!==at&&(c.timeoutHandle=at,et(S)),Or!==null)for(S=Or.return;S!==null;){var M=S;switch(Si(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Pa();break;case 3:Vc(),pn(hi),pn(er),mn();break;case 5:mi(M);break;case 4:Vc();break;case 13:pn(Ye);break;case 19:pn(Ye);break;case 10:Ua(M.type._context);break;case 22:case 23:xa()}S=S.return}if(yr=c,Or=c=eo(c.current,null),Hr=Js=f,Hi=0,Xl=null,Mu=rc=Cu=0,lo=Bs=null,Kr!==null){for(f=0;f<Kr.length;f++)if(S=Kr[f],M=S.interleaved,M!==null){S.interleaved=null;var L=M.next,G=S.pending;if(G!==null){var se=G.next;G.next=L,M.next=se}S.pending=M}Kr=null}return c}function Rc(c,f){do{var S=Or;try{if(ro(),Dn.current=Sc,vs){for(var M=An.memoizedState;M!==null;){var L=M.queue;L!==null&&(L.pending=null),M=M.next}vs=!1}if(rr=0,Ls=Ir=An=null,vo=!1,va=0,_i.current=null,S===null||S.return===null){Hi=1,Xl=f,Or=null;break}e:{var G=c,se=S.return,we=S,je=f;if(f=Hr,we.flags|=32768,je!==null&&typeof je=="object"&&typeof je.then=="function"){var _t=je,zt=we,Zt=zt.tag;if(!(zt.mode&1)&&(Zt===0||Zt===11||Zt===15)){var hn=zt.alternate;hn?(zt.updateQueue=hn.updateQueue,zt.memoizedState=hn.memoizedState,zt.lanes=hn.lanes):(zt.updateQueue=null,zt.memoizedState=null)}var an=Nd(se);if(an!==null){an.flags&=-257,ra(an,se,we,G,f),an.mode&1&&qu(G,_t,f),f=an,je=_t;var nn=f.updateQueue;if(nn===null){var br=new Set;br.add(je),f.updateQueue=br}else nn.add(je);break e}else{if(!(f&1)){qu(G,_t,f),eh();break e}je=Error(l(426))}}else if(wi&&we.mode&1){var ft=Nd(se);if(ft!==null){!(ft.flags&65536)&&(ft.flags|=256),ra(ft,se,we,G,f),yc(je);break e}}G=je,Hi!==4&&(Hi=2),Bs===null?Bs=[G]:Bs.push(G),je=Ha(je,we),we=se;do{switch(we.tag){case 3:we.flags|=65536,f&=-f,we.lanes|=f;var Ee=wc(we,je,f);pi(we,Ee);break e;case 1:G=je;var Ce=we.type,Ke=we.stateNode;if(!(we.flags&128)&&(typeof Ce.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(To===null||!To.has(Ke)))){we.flags|=65536,f&=-f,we.lanes|=f;var Ot=xc(we,G,f);pi(we,Ot);break e}}we=we.return}while(we!==null)}Yl(S)}catch(Kt){f=Kt,Or===S&&S!==null&&(Or=S=S.return);continue}break}while(!0)}function od(){var c=oa.current;return oa.current=Sc,c===null?Sc:c}function eh(){(Hi===0||Hi===3||Hi===2)&&(Hi=4),yr===null||!(Cu&268435455)&&!(rc&268435455)||xl(yr,Hr)}function ts(c,f){var S=On;On|=2;var M=od();yr===c&&Hr===f||Lr(c,f);do try{Es();break}catch(L){Rc(c,L)}while(!0);if(ro(),On=S,oa.current=M,Or!==null)throw Error(l(261));return yr=null,Hr=0,Hi}function Es(){for(;Or!==null;)qs(Or)}function Ah(){for(;Or!==null&&!Fl();)qs(Or)}function qs(c){var f=ih(c.alternate,c,Js);c.memoizedProps=c.pendingProps,f===null?Yl(c):Or=f,_i.current=null}function Yl(c){var f=c;do{var S=f.alternate;if(c=f.return,f.flags&32768){if(S=Kc(S,f),S!==null){S.flags&=32767,Or=S;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Hi=6,Or=null;return}}else if(S=jp(S,f,Js),S!==null){Or=S;return}if(f=f.sibling,f!==null){Or=f;return}Or=f=c}while(f!==null);Hi===0&&(Hi=5)}function th(c,f){var S=Qn,M=wn.transition;try{wn.transition=null,Qn=1,nh(c,f,S)}finally{wn.transition=M,Qn=S}return null}function nh(c,f,S){do sc();while(Eo!==null);if(On&6)throw Error(l(327));var M=c.finishedWork,L=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(l(177));c.callbackNode=null,c.callbackPriority=0;var G=M.lanes|M.childLanes;if(dl(c,G),c===yr&&(Or=yr=null,Hr=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Xa||(Xa=!0,sh(ks,function(){return sc(),null})),G=(M.flags&15990)!==0,M.subtreeFlags&15990||G){G=wn.transition,wn.transition=null;var se=Qn;Qn=1;var we=On;On|=4,_i.current=null,$u(c,M),Yp(c,M),ne(c.containerInfo),c.current=M,jl(M),Ei(),On=we,Qn=se,wn.transition=G}else c.current=M;if(Xa&&(Xa=!1,Eo=c,ic=L),G=c.pendingLanes,G===0&&(To=null),Xr(M.stateNode),Gn(c,Fi()),f!==null)for(S=c.onRecoverableError,M=0;M<f.length;M++)S(f[M]);if(Iu)throw Iu=!1,c=Qs,Qs=null,c;return ic&1&&c.tag!==0&&sc(),G=c.pendingLanes,G&1?c===Mh?Ru++:(Ru=0,Mh=c):Ru=0,Jo(),null}function sc(){if(Eo!==null){var c=pl(ic),f=wn.transition,S=Qn;try{if(wn.transition=null,Qn=16>c?16:c,Eo===null)var M=!1;else{if(c=Eo,Eo=null,ic=0,On&6)throw Error(l(331));var L=On;for(On|=4,rn=c.current;rn!==null;){var G=rn,se=G.child;if(rn.flags&16){var we=G.deletions;if(we!==null){for(var je=0;je<we.length;je++){var _t=we[je];for(rn=_t;rn!==null;){var zt=rn;switch(zt.tag){case 0:case 11:case 15:sa(8,zt,G)}var Zt=zt.child;if(Zt!==null)Zt.return=zt,rn=Zt;else for(;rn!==null;){zt=rn;var hn=zt.sibling,an=zt.return;if(Su(zt),zt===_t){rn=null;break}if(hn!==null){hn.return=an,rn=hn;break}rn=an}}}var nn=G.alternate;if(nn!==null){var br=nn.child;if(br!==null){nn.child=null;do{var ft=br.sibling;br.sibling=null,br=ft}while(br!==null)}}rn=G}}if(G.subtreeFlags&2064&&se!==null)se.return=G,rn=se;else e:for(;rn!==null;){if(G=rn,G.flags&2048)switch(G.tag){case 0:case 11:case 15:sa(9,G,G.return)}var Ee=G.sibling;if(Ee!==null){Ee.return=G.return,rn=Ee;break e}rn=G.return}}var Ce=c.current;for(rn=Ce;rn!==null;){se=rn;var Ke=se.child;if(se.subtreeFlags&2064&&Ke!==null)Ke.return=se,rn=Ke;else e:for(se=Ce;rn!==null;){if(we=rn,we.flags&2048)try{switch(we.tag){case 0:case 11:case 15:ls(9,we)}}catch(Kt){Zs(we,we.return,Kt)}if(we===se){rn=null;break e}var Ot=we.sibling;if(Ot!==null){Ot.return=we.return,rn=Ot;break e}rn=we.return}}if(On=L,Jo(),Ul&&typeof Ul.onPostCommitFiberRoot=="function")try{Ul.onPostCommitFiberRoot(Oo,c)}catch{}M=!0}return M}finally{Qn=S,wn.transition=f}}return!1}function $o(c,f,S){f=Ha(S,f),f=wc(c,f,1),ml(c,f),f=Xi(),c=Ps(c,1),c!==null&&(hl(c,1,f),Gn(c,f))}function Zs(c,f,S){if(c.tag===3)$o(c,c,S);else for(;f!==null;){if(f.tag===3){$o(f,c,S);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(To===null||!To.has(M))){c=Ha(S,c),c=xc(f,c,1),ml(f,c),c=Xi(),f=Ps(f,1),f!==null&&(hl(f,1,c),Gn(f,c));break}}f=f.return}}function ku(c,f,S){var M=c.pingCache;M!==null&&M.delete(f),f=Xi(),c.pingedLanes|=c.suspendedLanes&S,yr===c&&(Hr&S)===S&&(Hi===4||Hi===3&&(Hr&130023424)===Hr&&500>Fi()-sd?Lr(c,0):Mu|=S),Gn(c,f)}function rh(c,f){f===0&&(c.mode&1?(f=tr,tr<<=1,!(tr&130023424)&&(tr=4194304)):f=1);var S=Xi();c=Ps(c,f),c!==null&&(hl(c,f,S),Gn(c,S))}function Ka(c){var f=c.memoizedState,S=0;f!==null&&(S=f.retryLane),rh(c,S)}function Ou(c,f){var S=0;switch(c.tag){case 13:var M=c.stateNode,L=c.memoizedState;L!==null&&(S=L.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(l(314))}M!==null&&M.delete(f),rh(c,S)}var ih;ih=function(c,f,S){if(c!==null)if(c.memoizedProps!==f.pendingProps||hi.current)Qr=!0;else{if(!(c.lanes&S)&&!(f.flags&128))return Qr=!1,Xp(c,f,S);Qr=!!(c.flags&131072)}else Qr=!1,wi&&f.flags&1048576&&gl(f,_a,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var L=jr(f,er.current);ni(f,S),L=Br(null,f,M,c,L,S);var G=Do();return f.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Bi(M)?(G=!0,Vu(f)):G=!1,f.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,Xh(f),L.updater=pp,f.stateNode=L,L._reactInternals=f,ju(f,M,c,S),f=yo(null,f,M,!0,G,S)):(f.tag=0,wi&&G&&Kh(f),gi(null,f,L,S),f=f.child),f;case 16:M=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,L=M._init,M=L(M._payload),f.type=M,L=f.tag=Cl(M),c=Ai(M,c),L){case 0:f=oo(null,f,M,c,S);break e;case 1:f=Mc(null,f,M,c,S);break e;case 11:f=xi(null,f,M,c,S);break e;case 14:f=Ii(null,f,M,Ai(M.type,c),S);break e}throw Error(l(306,M,""))}return f;case 0:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ai(M,L),oo(c,f,M,L,S);case 1:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ai(M,L),Mc(c,f,M,L,S);case 3:e:{if(Bd(f),c===null)throw Error(l(387));M=f.pendingProps,G=f.memoizedState,L=G.element,gu(c,f),_u(f,M,null,S);var se=f.memoizedState;if(M=se.element,Pe&&G.isDehydrated)if(G={element:M,isDehydrated:!1,cache:se.cache,transitions:se.transitions},f.updateQueue.baseState=G,f.memoizedState=G,f.flags&256){L=Error(l(423)),f=Pd(c,f,M,S,L);break e}else if(M!==L){L=Error(l(424)),f=Pd(c,f,M,S,L);break e}else for(Pe&&(ur=pt(f.stateNode.containerInfo),fi=f,wi=!0,Hl=null,qo=!1),S=Tc(f,null,M,S),f.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(yh(),M===L){f=Zi(c,f,S);break e}gi(c,f,M,S)}f=f.child}return f;case 5:return kd(f),c===null&&bu(f),M=f.type,L=f.pendingProps,G=c!==null?c.memoizedProps:null,se=L.children,Xe(M,L)?se=null:G!==null&&Xe(M,G)&&(f.flags|=32),Bo(c,f),gi(c,f,se,S),f.child;case 6:return c===null&&bu(f),null;case 13:return Cn(c,f,S);case 4:return Wl(f,f.stateNode.containerInfo),M=f.pendingProps,c===null?f.child=bc(f,null,M,S):gi(c,f,M,S),f.child;case 11:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ai(M,L),xi(c,f,M,L,S);case 7:return gi(c,f,f.pendingProps,S),f.child;case 8:return gi(c,f,f.pendingProps.children,S),f.child;case 12:return gi(c,f,f.pendingProps.children,S),f.child;case 10:e:{if(M=f.type._context,L=f.pendingProps,G=f.memoizedProps,se=L.value,mu(f,M,se),G!==null)if(Vi(G.value,se)){if(G.children===L.children&&!hi.current){f=Zi(c,f,S);break e}}else for(G=f.child,G!==null&&(G.return=f);G!==null;){var we=G.dependencies;if(we!==null){se=G.child;for(var je=we.firstContext;je!==null;){if(je.context===M){if(G.tag===1){je=gs(-1,S&-S),je.tag=2;var _t=G.updateQueue;if(_t!==null){_t=_t.shared;var zt=_t.pending;zt===null?je.next=je:(je.next=zt.next,zt.next=je),_t.pending=je}}G.lanes|=S,je=G.alternate,je!==null&&(je.lanes|=S),di(G.return,S,f),we.lanes|=S;break}je=je.next}}else if(G.tag===10)se=G.type===f.type?null:G.child;else if(G.tag===18){if(se=G.return,se===null)throw Error(l(341));se.lanes|=S,we=se.alternate,we!==null&&(we.lanes|=S),di(se,S,f),se=G.sibling}else se=G.child;if(se!==null)se.return=G;else for(se=G;se!==null;){if(se===f){se=null;break}if(G=se.sibling,G!==null){G.return=se.return,se=G;break}se=se.return}G=se}gi(c,f,L.children,S),f=f.child}return f;case 9:return L=f.type,M=f.pendingProps.children,ni(f,S),L=Un(L),M=M(L),f.flags|=1,gi(c,f,M,S),f.child;case 14:return M=f.type,L=Ai(M,f.pendingProps),L=Ai(M.type,L),Ii(c,f,M,L,S);case 15:return Cc(c,f,f.type,f.pendingProps,S);case 17:return M=f.type,L=f.pendingProps,L=f.elementType===M?L:Ai(M,L),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Bi(M)?(c=!0,Vu(f)):c=!1,ni(f,S),Pf(f,M,L),ju(f,M,L,S),yo(null,f,M,!0,c,S);case 19:return zr(c,f,S);case 22:return No(c,f,S)}throw Error(l(156,f.tag))};function sh(c,f){return Fa(c,f)}function uo(c,f,S,M){this.tag=c,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(c,f,S,M){return new uo(c,f,S,M)}function Lu(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Cl(c){if(typeof c=="function")return Lu(c)?1:0;if(c!=null){if(c=c.$$typeof,c===x)return 11;if(c===k)return 14}return 2}function eo(c,f){var S=c.alternate;return S===null?(S=Fs(c.tag,f,c.key,c.mode),S.elementType=c.elementType,S.type=c.type,S.stateNode=c.stateNode,S.alternate=c,c.alternate=S):(S.pendingProps=f,S.type=c.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=c.flags&14680064,S.childLanes=c.childLanes,S.lanes=c.lanes,S.child=c.child,S.memoizedProps=c.memoizedProps,S.memoizedState=c.memoizedState,S.updateQueue=c.updateQueue,f=c.dependencies,S.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},S.sibling=c.sibling,S.index=c.index,S.ref=c.ref,S}function Ja(c,f,S,M,L,G){var se=2;if(M=c,typeof c=="function")Lu(c)&&(se=1);else if(typeof c=="string")se=5;else e:switch(c){case m:return Ca(S.children,L,G,f);case _:se=8,L|=8;break;case v:return c=Fs(12,S,f,L|2),c.elementType=v,c.lanes=G,c;case A:return c=Fs(13,S,f,L),c.elementType=A,c.lanes=G,c;case O:return c=Fs(19,S,f,L),c.elementType=O,c.lanes=G,c;case D:return Kl(S,L,G,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case E:se=10;break e;case w:se=9;break e;case x:se=11;break e;case k:se=14;break e;case N:se=16,M=null;break e}throw Error(l(130,c==null?c:typeof c,""))}return f=Fs(se,S,f,L),f.elementType=c,f.type=M,f.lanes=G,f}function Ca(c,f,S,M){return c=Fs(7,c,M,f),c.lanes=S,c}function Kl(c,f,S,M){return c=Fs(22,c,M,f),c.elementType=D,c.lanes=S,c.stateNode={},c}function ns(c,f,S){return c=Fs(6,c,null,f),c.lanes=S,c}function So(c,f,S){return f=Fs(4,c.children!==null?c.children:[],c.key,f),f.lanes=S,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function Ih(c,f,S,M,L){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=at,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cu(0),this.expirationTimes=cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.identifierPrefix=M,this.onRecoverableError=L,Pe&&(this.mutableSourceEagerHydrationData=null)}function ad(c,f,S,M,L,G,se,we,je){return c=new Ih(c,f,S,we,je),f===1?(f=1,G===!0&&(f|=8)):f=0,G=Fs(3,null,null,f),c.current=G,G.stateNode=c,G.memoizedState={element:M,isDehydrated:S,cache:null,transitions:null},Xh(G),c}function Qa(c){if(!c)return wr;c=c._reactInternals;e:{if(J(c)!==c||c.tag!==1)throw Error(l(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Bi(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(l(171))}if(c.tag===1){var S=c.type;if(Bi(S))return gc(c,S,f)}return f}function Jl(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(l(188)):(c=Object.keys(c).join(","),Error(l(268,c)));return c=ie(f),c===null?null:c.stateNode}function ld(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var S=c.retryLane;c.retryLane=S!==0&&S<f?S:f}}function kc(c,f){ld(c,f),(c=c.alternate)&&ld(c,f)}function Kp(c){return c=ie(c),c===null?null:c.stateNode}function $(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=Xi();aa(c,134217728,f),kc(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Xi(),S=Ts(c);aa(c,S,f),kc(c,S)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var S=Pi(f.pendingLanes);S!==0&&(Jn(f,S|1),Gn(f,Fi()),!(On&6)&&(Au(),Jo()))}break;case 13:var M=Xi();Dt(function(){return aa(c,1,M)}),kc(c,1)}},t.batchedUpdates=function(c,f){var S=On;On|=1;try{return c(f)}finally{On=S,On===0&&(Au(),du&&Jo())}},t.createComponentSelector=function(c){return{$$typeof:xu,value:c}},t.createContainer=function(c,f,S,M,L,G,se){return ad(c,f,!1,null,S,M,L,G,se)},t.createHasPseudoClassSelector=function(c){return{$$typeof:tc,value:c}},t.createHydrationContainer=function(c,f,S,M,L,G,se,we,je){return c=ad(S,M,!0,c,L,G,se,we,je),c.context=Qa(null),S=c.current,M=Xi(),L=Ts(S),G=gs(M,L),G.callback=f??null,ml(S,G),c.current.lanes=L,hl(c,L,M),Gn(c,M),c},t.createPortal=function(c,f,S){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:M==null?null:""+M,children:c,containerInfo:f,implementation:S}},t.createRoleSelector=function(c){return{$$typeof:bo,value:c}},t.createTestNameSelector=function(c){return{$$typeof:Va,value:c}},t.createTextSelector=function(c){return{$$typeof:bs,value:c}},t.deferredUpdates=function(c){var f=Qn,S=wn.transition;try{return wn.transition=null,Qn=16,c()}finally{Qn=f,wn.transition=S}},t.discreteUpdates=function(c,f,S,M,L){var G=Qn,se=wn.transition;try{return wn.transition=null,Qn=1,c(f,S,M,L)}finally{Qn=G,wn.transition=se,On===0&&Au()}},t.findAllNodes=_p,t.findBoundingRects=function(c,f){if(!It)throw Error(l(363));f=_p(c,f),c=[];for(var S=0;S<f.length;S++)c.push(ve(f[S]));for(f=c.length-1;0<f;f--){S=c[f];for(var M=S.x,L=M+S.width,G=S.y,se=G+S.height,we=f-1;0<=we;we--)if(f!==we){var je=c[we],_t=je.x,zt=_t+je.width,Zt=je.y,hn=Zt+je.height;if(M>=_t&&G>=Zt&&L<=zt&&se<=hn){c.splice(f,1);break}else if(M!==_t||S.width!==je.width||hn<G||Zt>se){if(!(G!==Zt||S.height!==je.height||zt<M||_t>L)){_t>M&&(je.width+=_t-M,je.x=M),zt<L&&(je.width=L-_t),c.splice(f,1);break}}else{Zt>G&&(je.height+=Zt-G,je.y=G),hn<se&&(je.height=se-Zt),c.splice(f,1);break}}}return c},t.findHostInstance=Jl,t.findHostInstanceWithNoPortals=function(c){return c=re(c),c=c!==null?oe(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return Jl(c)},t.flushControlled=function(c){var f=On;On|=1;var S=wn.transition,M=Qn;try{wn.transition=null,Qn=1,c()}finally{Qn=M,wn.transition=S,On=f,On===0&&(Au(),Jo())}},t.flushPassiveEffects=sc,t.flushSync=Dt,t.focusWithin=function(c,f){if(!It)throw Error(l(363));for(c=Qc(c),f=nc(c,f),f=Array.from(f),c=0;c<f.length;){var S=f[c++];if(!ke(S)){if(S.tag===5&&dt(S.stateNode))return!0;for(S=S.child;S!==null;)f.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qn},t.getFindAllNodesFailureDescription=function(c,f){if(!It)throw Error(l(363));var S=0,M=[];c=[Qc(c),0];for(var L=0;L<c.length;){var G=c[L++],se=c[L++],we=f[se];if((G.tag!==5||!ke(G))&&(Ks(G,we)&&(M.push(ja(we)),se++,se>S&&(S=se)),se<f.length))for(G=G.child;G!==null;)c.push(G,se),G=G.sibling}if(S<f.length){for(c=[];S<f.length;S++)c.push(ja(f[S]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return ge(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:Kp,findFiberByHostInstance:c.findFiberByHostInstance||$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Oo=f.inject(c),Ul=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,S,M){if(!It)throw Error(l(363));c=_p(c,f);var L=$t(c,S,M).disconnect;return{disconnect:function(){L()}}},t.registerMutableSourceForHydration=function(c,f){var S=f._getVersion;S=S(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,S]:c.mutableSourceEagerHydrationData.push(f,S)},t.runWithPriority=function(c,f){var S=Qn;try{return Qn=c,f()}finally{Qn=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,S,M){var L=f.current,G=Xi(),se=Ts(L);return S=Qa(S),f.context===null?f.context=S:f.pendingContext=S,f=gs(G,se),f.payload={element:c},M=M===void 0?null:M,M!==null&&(f.callback=M),ml(L,f),c=aa(L,se,G),c!==null&&Yh(c,L,se),se},t};k8.exports=ahe;var lhe=k8.exports;const uhe=fb(lhe);var O8={exports:{}},L8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var le=ne-1>>>1,_e=j[le];if(0<s(_e,Z))j[le]=Z,j[ne]=_e,ne=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var le=0,_e=j.length,Oe=_e>>>1;le<Oe;){var xe=2*(le+1)-1,Xe=j[xe],Re=xe+1,Je=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(Je,Xe)?(j[le]=Je,j[Re]=ne,le=Re):(j[le]=Xe,j[xe]=ne,le=xe);else if(Re<_e&&0>s(Je,ne))j[le]=Je,j[Re]=ne,le=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function D(j){if(x=!1,N(j),!w)if(t(h)!==null)w=!0,ge(U);else{var Z=t(d);Z!==null&&Ae(D,Z.startTime-j)}}function U(j,Z){w=!1,x&&(x=!1,O(z),z=-1),E=!0;var ne=v;try{for(N(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),N(Z)}else i(h);_=t(h)}if(_!==null)var Oe=!0;else{var xe=t(d);xe!==null&&Ae(D,xe.startTime-Z),Oe=!1}return Oe}finally{_=null,v=ne,E=!1}}var F=!1,H=null,z=-1,J=5,te=-1;function re(){return!(n.unstable_now()-te<J)}function ie(){if(H!==null){var j=n.unstable_now();te=j;var Z=!0;try{Z=H(!0,j)}finally{Z?de():(F=!1,H=null)}}else F=!1}var de;if(typeof k=="function")de=function(){k(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=ie,de=function(){ue.postMessage(null)}}else de=function(){A(ie,0)};function ge(j){H=j,F||(F=!0,de())}function Ae(j,Z){z=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){w||E||(w=!0,ge(U))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var le=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>le?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(x?(O(z),z=-1):x=!0,Ae(D,ne-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(U))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}})(L8);O8.exports=L8;var tz=O8.exports;const che=n=>typeof n=="object"&&typeof n.then=="function",Ny=[];function D8(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function N8(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const o of Ny)if(D8(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=Ny.indexOf(s);o!==-1&&Ny.splice(o,1)},promise:(che(n)?n:n(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(Ny.push(s),!t)throw s.promise}const hhe=(n,e,t)=>N8(n,e,!1,t),dhe=(n,e,t)=>void N8(n,e,!0,t),phe=n=>{if(n===void 0||n.length===0)Ny.splice(0,Ny.length);else{const e=Ny.find(t=>D8(n,t.keys,t.equal));e&&e.remove()}},B8={};function fhe(n,e){function t(m,{args:_=[],attach:v,...E},w){let x=`${m[0].toUpperCase()}${m.slice(1)}`,A;if(m==="primitive"){if(E.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const O=E.object;A=E$(O,{type:m,root:w,attach:v,primitive:!0})}else{const O=B8[x];if(!O)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(_))throw new Error("R3F: The args prop must be an array!");A=E$(new O(..._),{type:m,root:w,attach:v,memoizedProps:{args:_}})}return A.__r3f.attach===void 0&&(A instanceof Cv?A.__r3f.attach="geometry":A instanceof dv&&(A.__r3f.attach="material")),x!=="inject"&&S2(A,E),A}function i(m,_){let v=!1;if(_){var E,w;(E=_.__r3f)!=null&&E.attach?$2(m,_,_.__r3f.attach):_.isObject3D&&m.isObject3D&&(m.add(_),v=!0),v||(w=m.__r3f)==null||w.objects.push(_),_.__r3f||E$(_,{}),_.__r3f.parent=m,aD(_),H1(_)}}function s(m,_,v){let E=!1;if(_){var w,x;if((w=_.__r3f)!=null&&w.attach)$2(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){_.parent=m,_.dispatchEvent({type:"added"}),m.dispatchEvent({type:"childadded",child:_});const A=m.children.filter(k=>k!==_),O=A.indexOf(v);m.children=[...A.slice(0,O),_,...A.slice(O)],E=!0}E||(x=m.__r3f)==null||x.objects.push(_),_.__r3f||E$(_,{}),_.__r3f.parent=m,aD(_),H1(_)}}function o(m,_,v=!1){m&&[...m].forEach(E=>l(_,E,v))}function l(m,_,v){if(_){var E,w,x;if(_.__r3f&&(_.__r3f.parent=null),(E=m.__r3f)!=null&&E.objects&&(m.__r3f.objects=m.__r3f.objects.filter(D=>D!==_)),(w=_.__r3f)!=null&&w.attach)oz(m,_,_.__r3f.attach);else if(_.isObject3D&&m.isObject3D){var A;m.remove(_),(A=_.__r3f)!=null&&A.root&&Ehe(BM(_),_)}const k=(x=_.__r3f)==null?void 0:x.primitive,N=!k&&(v===void 0?_.dispose!==null:v);if(!k){var O;o((O=_.__r3f)==null?void 0:O.objects,_,N),o(_.children,_,N)}if(delete _.__r3f,N&&_.dispose&&_.type!=="Scene"){const D=()=>{try{_.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?tz.unstable_scheduleCallback(tz.unstable_IdlePriority,D):D()}H1(m)}}function u(m,_,v,E){var w;const x=(w=m.__r3f)==null?void 0:w.parent;if(!x)return;const A=t(_,v,m.__r3f.root);if(m.children){for(const O of m.children)O.__r3f&&i(A,O);m.children=m.children.filter(O=>!O.__r3f)}m.__r3f.objects.forEach(O=>i(A,O)),m.__r3f.objects=[],m.__r3f.autoRemovedBeforeAppend||l(x,m),A.parent&&(A.__r3f.autoRemovedBeforeAppend=!0),i(x,A),A.raycast&&A.__r3f.eventCount&&BM(A).getState().internal.interaction.push(A),[E,E.alternate].forEach(O=>{O!==null&&(O.stateNode=A,O.ref&&(typeof O.ref=="function"?O.ref(A):O.ref.current=A))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:uhe({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(m,_)=>{if(!_)return;const v=m.getState().scene;v.__r3f&&(v.__r3f.root=m,i(v,_))},removeChildFromContainer:(m,_)=>{_&&l(m.getState().scene,_)},insertInContainerBefore:(m,_,v)=>{if(!_||!v)return;const E=m.getState().scene;E.__r3f&&s(E,_,v)},getRootHostContext:()=>null,getChildHostContext:m=>m,finalizeInitialChildren(m){var _;return!!((_=m==null?void 0:m.__r3f)!=null?_:{}).handlers},prepareUpdate(m,_,v,E){var w;if(((w=m==null?void 0:m.__r3f)!=null?w:{}).primitive&&E.object&&E.object!==m)return[!0];{const{args:A=[],children:O,...k}=E,{args:N=[],children:D,...U}=v;if(!Array.isArray(A))throw new Error("R3F: the args prop must be an array!");if(A.some((H,z)=>H!==N[z]))return[!0];const F=F8(m,k,U,!0);return F.changes.length?[!1,F]:null}},commitUpdate(m,[_,v],E,w,x,A){_?u(m,E,x,A):S2(m,v)},commitMount(m,_,v,E){var w;const x=(w=m.__r3f)!=null?w:{};m.raycast&&x.handlers&&x.eventCount&&BM(m).getState().internal.interaction.push(m)},getPublicInstance:m=>m,prepareForCommit:()=>null,preparePortalMount:m=>E$(m.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(m){var _;const{attach:v,parent:E}=(_=m.__r3f)!=null?_:{};v&&E&&oz(E,m,v),m.isObject3D&&(m.visible=!1),H1(m)},unhideInstance(m,_){var v;const{attach:E,parent:w}=(v=m.__r3f)!=null?v:{};E&&w&&$2(w,m,E),(m.isObject3D&&_.visible==null||_.visible)&&(m.visible=!0),H1(m)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Y$.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Qd.fun(performance.now)?performance.now:Qd.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Qd.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Qd.fun(clearTimeout)?clearTimeout:void 0}),applyProps:S2}}var nz,rz;const E2=n=>"colorSpace"in n||"outputColorSpace"in n,mhe=()=>{var n;return(n=B8.ColorManagement)!=null?n:null};typeof window<"u"&&((nz=window.document)!=null&&nz.createElement||((rz=window.navigator)==null?void 0:rz.product)==="ReactNative")?he.useLayoutEffect:he.useEffect;class ghe extends he.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}ghe.getDerivedStateFromError=()=>({error:!0});const P8="__default",iz=new Map,_he=n=>n&&!!n.memoized&&!!n.changes;function BM(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Qd={obj:n=>n===Object(n)&&!Qd.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Qd.str(n)||Qd.num(n))return n===e;const o=Qd.obj(n);if(o&&i==="reference")return n===e;const l=Qd.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!Qd.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(Qd.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function vhe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function E$(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function oD(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const sz=/-\d+$/;function $2(n,e,t){if(Qd.str(t)){if(sz.test(t)){const o=t.replace(sz,""),{target:l,key:u}=oD(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=oD(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function oz(n,e,t){var i,s;if(Qd.str(t)){const{target:o,key:l}=oD(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function F8(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},d=!1){var m;const _=(m=n==null?void 0:n.__r3f)!=null?m:{},v=Object.entries(s),E=[];if(d){const x=Object.keys(h);for(let A=0;A<x.length;A++)s.hasOwnProperty(x[A])||v.unshift([x[A],P8+"remove"])}v.forEach(([x,A])=>{var O;if((O=n.__r3f)!=null&&O.primitive&&x==="object"||Qd.equ(A,h[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return E.push([x,A,!0,[]]);let k=[];x.includes("-")&&(k=x.split("-")),E.push([x,A,!1,k]);for(const N in s){const D=s[N];N.startsWith(`${x}-`)&&E.push([N,D,!1,N.split("-")])}});const w={...s};return _.memoizedProps&&_.memoizedProps.args&&(w.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(w.attach=_.memoizedProps.attach),{memoized:w,changes:E}}const yhe=typeof process<"u"&&!1;function S2(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:d}=_he(e)?e:F8(n,e),m=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let v=0;v<d.length;v++){let[E,w,x,A]=d[v];if(E2(n)){const D="srgb",U="srgb-linear";E==="encoding"?(E="colorSpace",w=w===3001?D:U):E==="outputEncoding"&&(E="outputColorSpace",w=w===3001?D:U)}let O=n,k=O[E];if(A.length&&(k=A.reduce((N,D)=>N[D],n),!(k&&k.set))){const[N,...D]=A.reverse();O=D.reverse().reduce((U,F)=>U[F],n),E=N}if(w===P8+"remove")if(O.constructor){let N=iz.get(O.constructor);N||(N=new O.constructor,iz.set(O.constructor,N)),w=N[E]}else w=0;if(x)w?o.handlers[E]=w:delete o.handlers[E],o.eventCount=Object.keys(o.handlers).length;else if(k&&k.set&&(k.copy||k instanceof CM)){if(Array.isArray(w))k.fromArray?k.fromArray(w):k.set(...w);else if(k.copy&&w&&w.constructor&&(yhe?k.constructor.name===w.constructor.name:k.constructor===w.constructor))k.copy(w);else if(w!==void 0){const N=k instanceof fc;!N&&k.setScalar?k.setScalar(w):k instanceof CM&&w instanceof CM?k.mask=w.mask:k.set(w),!mhe()&&!u.linear&&N&&k.convertSRGBToLinear()}}else if(O[E]=w,O[E]instanceof $f&&O[E].format===dB&&O[E].type===UW){const N=O[E];E2(N)&&E2(u.gl)?N.colorSpace=u.gl.outputColorSpace:N.encoding=u.gl.outputEncoding}H1(n)}if(o.parent&&n.raycast&&m!==o.eventCount){const v=BM(n).getState().internal,E=v.interaction.indexOf(n);E>-1&&v.interaction.splice(E,1),o.eventCount&&v.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(s=n.__r3f)!=null&&s.parent&&aD(n),n}function H1(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function aD(n){n.onUpdate==null||n.onUpdate(n)}function bhe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Y$.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Y$.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Y$.ContinuousEventPriority;default:return Y$.DefaultEventPriority}}function The(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function Ehe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{The(t.capturedMap,e,i,s)})}const az=new WeakMap;function U8(n,e){return function(t,...i){let s=az.get(t);return s||(s=new t,az.set(t,s)),n&&n(s),Promise.all(i.map(o=>new Promise((l,u)=>s.load(o,h=>{h.scene&&Object.assign(h,vhe(h.scene)),l(h)},e,h=>u(new Error(`Could not load ${o}: ${h==null?void 0:h.message}`)))))).finally(()=>s.dispose==null?void 0:s.dispose())}}function Rw(n,e,t,i){const s=Array.isArray(e)?e:[e],o=hhe(U8(t,i),[n,...s],{equal:Qd.equ});return Array.isArray(e)?o:o[0]}Rw.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return dhe(U8(t),[n,...i])};Rw.clear=function(n,e){const t=Array.isArray(e)?e:[e];return phe([n,...t])};const $he=new Map,{reconciler:She,applyProps:vSe}=fhe($he,bhe);She.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:he.version});function lz(n,e){if(e===aq)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===NL||e===zW){let t=n.getIndex();if(t===null){const l=[],u=n.getAttribute("position");if(u!==void 0){for(let h=0;h<u.count;h++)l.push(h);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(t)if(e===NL)for(let l=1;l<=i;l++)s.push(t.getX(0)),s.push(t.getX(l)),s.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(s.push(t.getX(l)),s.push(t.getX(l+1)),s.push(t.getX(l+2))):(s.push(t.getX(l+2)),s.push(t.getX(l+1)),s.push(t.getX(l)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(s),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const whe=parseInt(lB.replace(/\D+/g,""));class oP extends vb{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Ihe(t)}),this.register(function(t){return new Phe(t)}),this.register(function(t){return new Fhe(t)}),this.register(function(t){return new Uhe(t)}),this.register(function(t){return new khe(t)}),this.register(function(t){return new Ohe(t)}),this.register(function(t){return new Lhe(t)}),this.register(function(t){return new Dhe(t)}),this.register(function(t){return new Ahe(t)}),this.register(function(t){return new Nhe(t)}),this.register(function(t){return new Rhe(t)}),this.register(function(t){return new Bhe(t)}),this.register(function(t){return new Che(t)}),this.register(function(t){return new zhe(t)}),this.register(function(t){return new Hhe(t)})}load(e,t,i,s){const o=this;let l;this.resourcePath!==""?l=this.resourcePath:this.path!==""?l=this.path:l=Vy.extractUrlBase(e),this.manager.itemStart(e);const u=function(d){s?s(d):console.error(d),o.manager.itemError(e),o.manager.itemEnd(e)},h=new EA(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(d){try{o.parse(d,l,function(m){t(m),o.manager.itemEnd(e)},u)}catch(m){u(m)}},i,u)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let o;const l={},u={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Vy.decodeText(new Uint8Array(e.slice(0,4)))===z8){try{l[Ki.KHR_BINARY_GLTF]=new Ghe(e)}catch(m){s&&s(m);return}o=JSON.parse(l[Ki.KHR_BINARY_GLTF].content)}else o=JSON.parse(Vy.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new nde(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const m=this.pluginCallbacks[d](h);u[m.name]=m,l[m.name]=!0}if(o.extensionsUsed)for(let d=0;d<o.extensionsUsed.length;++d){const m=o.extensionsUsed[d],_=o.extensionsRequired||[];switch(m){case Ki.KHR_MATERIALS_UNLIT:l[m]=new Mhe;break;case Ki.KHR_DRACO_MESH_COMPRESSION:l[m]=new Whe(o,this.dracoLoader);break;case Ki.KHR_TEXTURE_TRANSFORM:l[m]=new Vhe;break;case Ki.KHR_MESH_QUANTIZATION:l[m]=new jhe;break;default:_.indexOf(m)>=0&&u[m]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+m+'".')}}h.setExtensions(l),h.setPlugins(u),h.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,o){i.parse(e,t,s,o)})}}function xhe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ki={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Che{constructor(e){this.parser=e,this.name=Ki.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const o=t.json,h=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let d;const m=new fc(16777215);h.color!==void 0&&m.fromArray(h.color);const _=h.range!==void 0?h.range:0;switch(h.type){case"directional":d=new xZ(m),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new SZ(m),d.distance=_;break;case"spot":d=new EZ(m),d.distance=_,h.spot=h.spot||{},h.spot.innerConeAngle=h.spot.innerConeAngle!==void 0?h.spot.innerConeAngle:0,h.spot.outerConeAngle=h.spot.outerConeAngle!==void 0?h.spot.outerConeAngle:Math.PI/4,d.angle=h.spot.outerConeAngle,d.penumbra=1-h.spot.innerConeAngle/h.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+h.type)}return d.position.set(0,0,0),d.decay=2,Q_(d,h),h.intensity!==void 0&&(d.intensity=h.intensity),d.name=t.createUniqueName(h.name||"light_"+e),s=Promise.resolve(d),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,o=i.json.nodes[e],u=(o.extensions&&o.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(h){return i._getNodeRef(t.cache,u,h)})}}class Mhe{constructor(){this.name=Ki.KHR_MATERIALS_UNLIT}getMaterialType(){return rT}extendParams(e,t,i){const s=[];e.color=new fc(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const l=o.baseColorFactor;e.color.fromArray(l),e.opacity=l[3]}o.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(s)}}class Ahe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class Ihe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const u=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Dl(u,u)}return Promise.all(o)}}class Rhe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(o)}}class khe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new fc(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=s.extensions[this.name];return l.sheenColorFactor!==void 0&&t.sheenColor.fromArray(l.sheenColorFactor),l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,3001)),l.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(o)}}class Ohe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(o)}}class Lhe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const u=l.attenuationColor||[1,1,1];return t.attenuationColor=new fc(u[0],u[1],u[2]),Promise.all(o)}}class Dhe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=s.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class Nhe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const u=l.specularColorFactor||[1,1,1];return t.specularColor=new fc(u[0],u[1],u[2]),l.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,3001)),Promise.all(o)}}class Bhe{constructor(e){this.parser=e,this.name=Ki.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Mv}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const o=[],l=s.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(o)}}class Phe{constructor(e){this.parser=e,this.name=Ki.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const o=s.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,l)}}class Fhe{constructor(e){this.parser=e,this.name=Ki.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const d=i.options.manager.getHandler(u.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Uhe{constructor(e){this.parser=e,this.name=Ki.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,o=s.textures[e];if(!o.extensions||!o.extensions[t])return null;const l=o.extensions[t],u=s.images[l.source];let h=i.textureLoader;if(u.uri){const d=i.options.manager.getHandler(u.uri);d!==null&&(h=d)}return this.detectSupport().then(function(d){if(d)return i.loadTextureImage(e,l.source,h);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zhe{constructor(e){this.name=Ki.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],o=this.parser.getDependency("buffer",s.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(u){const h=s.byteOffset||0,d=s.byteLength||0,m=s.count,_=s.byteStride,v=new Uint8Array(u,h,d);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(m,_,v,s.mode,s.filter).then(function(E){return E.buffer}):l.ready.then(function(){const E=new ArrayBuffer(m*_);return l.decodeGltfBuffer(new Uint8Array(E),m,_,v,s.mode,s.filter),E})})}else return null}}class Hhe{constructor(e){this.name=Ki.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const d of s.primitives)if(d.mode!==am.TRIANGLES&&d.mode!==am.TRIANGLE_STRIP&&d.mode!==am.TRIANGLE_FAN&&d.mode!==void 0)return null;const l=i.extensions[this.name].attributes,u=[],h={};for(const d in l)u.push(this.parser.getDependency("accessor",l[d]).then(m=>(h[d]=m,h[d])));return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then(d=>{const m=d.pop(),_=m.isGroup?m.children:[m],v=d[0].count,E=[];for(const w of _){const x=new Ji,A=new Mt,O=new Go,k=new Mt(1,1,1),N=new rZ(w.geometry,w.material,v);for(let D=0;D<v;D++)h.TRANSLATION&&A.fromBufferAttribute(h.TRANSLATION,D),h.ROTATION&&O.fromBufferAttribute(h.ROTATION,D),h.SCALE&&k.fromBufferAttribute(h.SCALE,D),N.setMatrixAt(D,x.compose(A,O,k));for(const D in h)D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&w.geometry.setAttribute(D,h[D]);Hu.prototype.copy.call(N,w),this.parser.assignFinalMaterial(N),E.push(N)}return m.isGroup?(m.clear(),m.add(...E),m):E[0]}))}}const z8="glTF",$$=12,uz={JSON:1313821514,BIN:5130562};class Ghe{constructor(e){this.name=Ki.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,$$);if(this.header={magic:Vy.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==z8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-$$,s=new DataView(e,$$);let o=0;for(;o<i;){const l=s.getUint32(o,!0);o+=4;const u=s.getUint32(o,!0);if(o+=4,u===uz.JSON){const h=new Uint8Array(e,$$+o,l);this.content=Vy.decodeText(h)}else if(u===uz.BIN){const h=$$+o;this.body=e.slice(h,h+l)}o+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Whe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ki.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,o=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,u={},h={},d={};for(const m in l){const _=lD[m]||m.toLowerCase();u[_]=l[m]}for(const m in e.attributes){const _=lD[m]||m.toLowerCase();if(l[m]!==void 0){const v=i.accessors[e.attributes[m]],E=yT[v.componentType];d[_]=E.name,h[_]=v.normalized===!0}}return t.getDependency("bufferView",o).then(function(m){return new Promise(function(_){s.decodeDracoFile(m,function(v){for(const E in v.attributes){const w=v.attributes[E],x=h[E];x!==void 0&&(w.normalized=x)}_(v)},u,d)})})}}class Vhe{constructor(){this.name=Ki.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class jhe{constructor(){this.name=Ki.KHR_MESH_QUANTIZATION}}class H8 extends Tw{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s*3+s;for(let l=0;l!==s;l++)t[l]=i[o+l];return t}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=u*2,d=u*3,m=s-t,_=(i-t)/m,v=_*_,E=v*_,w=e*d,x=w-d,A=-2*E+3*v,O=E-v,k=1-A,N=O-v+_;for(let D=0;D!==u;D++){const U=l[x+D+u],F=l[x+D+h]*m,H=l[w+D+u],z=l[w+D]*m;o[D]=k*U+N*F+A*H+O*z}return o}}const Xhe=new Go;class Yhe extends H8{interpolate_(e,t,i,s){const o=super.interpolate_(e,t,i,s);return Xhe.fromArray(o).normalize().toArray(o),o}}const am={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},yT={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},cz={9728:BS,9729:uB,9984:eq,9985:nq,9986:tq,9987:cB},hz={33071:V$,33648:DL,10497:NS},w2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lD={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...whe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},D_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Khe={CUBICSPLINE:void 0,LINEAR:IT,STEP:PS},x2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Jhe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new bB({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:TA})),n.DefaultMaterial}function iy(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Q_(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Qhe(n,e,t){let i=!1,s=!1,o=!1;for(let d=0,m=e.length;d<m;d++){const _=e[d];if(_.POSITION!==void 0&&(i=!0),_.NORMAL!==void 0&&(s=!0),_.COLOR_0!==void 0&&(o=!0),i&&s&&o)break}if(!i&&!s&&!o)return Promise.resolve(n);const l=[],u=[],h=[];for(let d=0,m=e.length;d<m;d++){const _=e[d];if(i){const v=_.POSITION!==void 0?t.getDependency("accessor",_.POSITION):n.attributes.position;l.push(v)}if(s){const v=_.NORMAL!==void 0?t.getDependency("accessor",_.NORMAL):n.attributes.normal;u.push(v)}if(o){const v=_.COLOR_0!==void 0?t.getDependency("accessor",_.COLOR_0):n.attributes.color;h.push(v)}}return Promise.all([Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const m=d[0],_=d[1],v=d[2];return i&&(n.morphAttributes.position=m),s&&(n.morphAttributes.normal=_),o&&(n.morphAttributes.color=v),n.morphTargetsRelative=!0,n})}function qhe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Zhe(n){let e;const t=n.extensions&&n.extensions[Ki.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+C2(t.attributes):e=n.indices+":"+C2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+C2(n.targets[i]);return e}function C2(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function uD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ede(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const tde=new Ji;class nde{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new xhe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,o=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||s&&o<98?this.textureLoader=new bZ(this.options.manager):this.textureLoader=new CZ(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new EA(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const u={scene:l[0][s.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:s.asset,parser:i,userData:{}};iy(o,u,s),Q_(u,s),Promise.all(i._invokeAll(function(h){return h.afterRoot&&h.afterRoot(u)})).then(function(){e(u)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,o=t.length;s<o;s++){const l=t[s].joints;for(let u=0,h=l.length;u<h;u++)e[l[u]].isBone=!0}for(let s=0,o=e.length;s<o;s++){const l=e[s];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),o=(l,u)=>{const h=this.associations.get(l);h!=null&&this.associations.set(u,h);for(const[d,m]of l.children.entries())o(m,u.children[d])};return o(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const o=e(t[s]);o&&i.push(o)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":s=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(o,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ki.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(o,l){i.load(Vy.resolveURL(t.uri,s.path),o,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const l=w2[s.type],u=yT[s.componentType],h=s.normalized===!0,d=new u(s.count*l);return Promise.resolve(new Sf(d,l,h))}const o=[];return s.bufferView!==void 0?o.push(this.getDependency("bufferView",s.bufferView)):o.push(null),s.sparse!==void 0&&(o.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(o).then(function(l){const u=l[0],h=w2[s.type],d=yT[s.componentType],m=d.BYTES_PER_ELEMENT,_=m*h,v=s.byteOffset||0,E=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,w=s.normalized===!0;let x,A;if(E&&E!==_){const O=Math.floor(v/E),k="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+O+":"+s.count;let N=t.cache.get(k);N||(x=new d(u,O*E,s.count*E/m),N=new qq(x,E/m),t.cache.add(k,N)),A=new _B(N,h,v%E/m,w)}else u===null?x=new d(s.count*h):x=new d(u,v,s.count*h),A=new Sf(x,h,w);if(s.sparse!==void 0){const O=w2.SCALAR,k=yT[s.sparse.indices.componentType],N=s.sparse.indices.byteOffset||0,D=s.sparse.values.byteOffset||0,U=new k(l[1],N,s.sparse.count*O),F=new d(l[2],D,s.sparse.count*h);u!==null&&(A=new Sf(A.array.slice(),A.itemSize,A.normalized));for(let H=0,z=U.length;H<z;H++){const J=U[H];if(A.setX(J,F[H*h]),h>=2&&A.setY(J,F[H*h+1]),h>=3&&A.setZ(J,F[H*h+2]),h>=4&&A.setW(J,F[H*h+3]),h>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){const t=this.json,i=this.options,o=t.textures[e].source,l=t.images[o];let u=this.textureLoader;if(l.uri){const h=i.manager.getHandler(l.uri);h!==null&&(u=h)}return this.loadTextureImage(e,o,u)}loadTextureImage(e,t,i){const s=this,o=this.json,l=o.textures[e],u=o.images[t],h=(u.uri||u.bufferView)+":"+l.sampler;if(this.textureCache[h])return this.textureCache[h];const d=this.loadImageSource(t,i).then(function(m){m.flipY=!1,m.name=l.name||u.name||"",m.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(m.name=u.uri);const v=(o.samplers||{})[l.sampler]||{};return m.magFilter=cz[v.magFilter]||uB,m.minFilter=cz[v.minFilter]||cB,m.wrapS=hz[v.wrapS]||NS,m.wrapT=hz[v.wrapT]||NS,s.associations.set(m,{textures:e}),m}).catch(function(){return null});return this.textureCache[h]=d,d}loadImageSource(e,t){const i=this,s=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(_=>_.clone());const l=s.images[e],u=self.URL||self.webkitURL;let h=l.uri||"",d=!1;if(l.bufferView!==void 0)h=i.getDependency("bufferView",l.bufferView).then(function(_){d=!0;const v=new Blob([_],{type:l.mimeType});return h=u.createObjectURL(v),h});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const m=Promise.resolve(h).then(function(_){return new Promise(function(v,E){let w=v;t.isImageBitmapLoader===!0&&(w=function(x){const A=new $f(x);A.needsUpdate=!0,v(A)}),t.load(Vy.resolveURL(_,o.path),w,void 0,E)})}).then(function(_){return d===!0&&u.revokeObjectURL(h),_.userData.mimeType=l.mimeType||ede(l.uri),_}).catch(function(_){throw console.error("THREE.GLTFLoader: Couldn't load texture",h),_});return this.sourceCache[e]=m,m}assignTexture(e,t,i,s){const o=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),o.extensions[Ki.KHR_TEXTURE_TRANSFORM]){const u=i.extensions!==void 0?i.extensions[Ki.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const h=o.associations.get(l);l=o.extensions[Ki.KHR_TEXTURE_TRANSFORM].extendTexture(l,u),o.associations.set(l,h)}}return s!==void 0&&("colorSpace"in l?l.colorSpace=s===3001?"srgb":"srgb-linear":l.encoding=s),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const u="PointsMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new QW,dv.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,h.sizeAttenuation=!1,this.cache.add(u,h)),i=h}else if(e.isLine){const u="LineBasicMaterial:"+i.uuid;let h=this.cache.get(u);h||(h=new JW,dv.prototype.copy.call(h,i),h.color.copy(i.color),h.map=i.map,this.cache.add(u,h)),i=h}if(s||o||l){let u="ClonedMaterial:"+i.uuid+":";s&&(u+="derivative-tangents:"),o&&(u+="vertex-colors:"),l&&(u+="flat-shading:");let h=this.cache.get(u);h||(h=i.clone(),o&&(h.vertexColors=!0),l&&(h.flatShading=!0),s&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(u,h),this.associations.set(h,this.associations.get(i))),i=h}e.material=i}getMaterialType(){return bB}loadMaterial(e){const t=this,i=this.json,s=this.extensions,o=i.materials[e];let l;const u={},h=o.extensions||{},d=[];if(h[Ki.KHR_MATERIALS_UNLIT]){const _=s[Ki.KHR_MATERIALS_UNLIT];l=_.getMaterialType(),d.push(_.extendParams(u,o,t))}else{const _=o.pbrMetallicRoughness||{};if(u.color=new fc(1,1,1),u.opacity=1,Array.isArray(_.baseColorFactor)){const v=_.baseColorFactor;u.color.fromArray(v),u.opacity=v[3]}_.baseColorTexture!==void 0&&d.push(t.assignTexture(u,"map",_.baseColorTexture,3001)),u.metalness=_.metallicFactor!==void 0?_.metallicFactor:1,u.roughness=_.roughnessFactor!==void 0?_.roughnessFactor:1,_.metallicRoughnessTexture!==void 0&&(d.push(t.assignTexture(u,"metalnessMap",_.metallicRoughnessTexture)),d.push(t.assignTexture(u,"roughnessMap",_.metallicRoughnessTexture))),l=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,u)})))}o.doubleSided===!0&&(u.side=QQ);const m=o.alphaMode||x2.OPAQUE;if(m===x2.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,m===x2.MASK&&(u.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&l!==rT&&(d.push(t.assignTexture(u,"normalMap",o.normalTexture)),u.normalScale=new Dl(1,1),o.normalTexture.scale!==void 0)){const _=o.normalTexture.scale;u.normalScale.set(_,_)}return o.occlusionTexture!==void 0&&l!==rT&&(d.push(t.assignTexture(u,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&l!==rT&&(u.emissive=new fc().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&l!==rT&&d.push(t.assignTexture(u,"emissiveMap",o.emissiveTexture,3001)),Promise.all(d).then(function(){const _=new l(u);return o.name&&(_.name=o.name),Q_(_,o),t.associations.set(_,{materials:e}),o.extensions&&iy(s,_,o),_})}createUniqueName(e){const t=fo.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function o(u){return i[Ki.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,t).then(function(h){return dz(h,u,t)})}const l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u],m=Zhe(d),_=s[m];if(_)l.push(_.promise);else{let v;d.extensions&&d.extensions[Ki.KHR_DRACO_MESH_COMPRESSION]?v=o(d):v=dz(new Cv,d,t),s[m]={primitive:d,promise:v},l.push(v)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,s=this.extensions,o=i.meshes[e],l=o.primitives,u=[];for(let h=0,d=l.length;h<d;h++){const m=l[h].material===void 0?Jhe(this.cache):this.getDependency("material",l[h].material);u.push(m)}return u.push(t.loadGeometries(l)),Promise.all(u).then(function(h){const d=h.slice(0,h.length-1),m=h[h.length-1],_=[];for(let E=0,w=m.length;E<w;E++){const x=m[E],A=l[E];let O;const k=d[E];if(A.mode===am.TRIANGLES||A.mode===am.TRIANGLE_STRIP||A.mode===am.TRIANGLE_FAN||A.mode===void 0)O=o.isSkinnedMesh===!0?new eZ(x,k):new mI(x,k),O.isSkinnedMesh===!0&&O.normalizeSkinWeights(),A.mode===am.TRIANGLE_STRIP?O.geometry=lz(O.geometry,zW):A.mode===am.TRIANGLE_FAN&&(O.geometry=lz(O.geometry,NL));else if(A.mode===am.LINES)O=new iZ(x,k);else if(A.mode===am.LINE_STRIP)O=new yB(x,k);else if(A.mode===am.LINE_LOOP)O=new sZ(x,k);else if(A.mode===am.POINTS)O=new oZ(x,k);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(O.geometry.morphAttributes).length>0&&qhe(O,o),O.name=t.createUniqueName(o.name||"mesh_"+e),Q_(O,o),A.extensions&&iy(s,O,A),t.assignFinalMaterial(O),_.push(O)}for(let E=0,w=_.length;E<w;E++)t.associations.set(_[E],{meshes:e,primitives:E});if(_.length===1)return o.extensions&&iy(s,_[0],o),_[0];const v=new Qk;o.extensions&&iy(s,v,o),t.associations.set(v,{meshes:e});for(let E=0,w=_.length;E<w;E++)v.add(_[E]);return v})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new gB(Cq.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new XW(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Q_(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,o=t.joints.length;s<o;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const o=s.pop(),l=s,u=[],h=[];for(let d=0,m=l.length;d<m;d++){const _=l[d];if(_){u.push(_);const v=new Ji;o!==null&&v.fromArray(o.array,d*16),h.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new vB(u,h)})}loadAnimation(e){const i=this.json.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],h=[],d=[];for(let m=0,_=i.channels.length;m<_;m++){const v=i.channels[m],E=i.samplers[v.sampler],w=v.target,x=w.node,A=i.parameters!==void 0?i.parameters[E.input]:E.input,O=i.parameters!==void 0?i.parameters[E.output]:E.output;w.node!==void 0&&(o.push(this.getDependency("node",x)),l.push(this.getDependency("accessor",A)),u.push(this.getDependency("accessor",O)),h.push(E),d.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(d)]).then(function(m){const _=m[0],v=m[1],E=m[2],w=m[3],x=m[4],A=[];for(let O=0,k=_.length;O<k;O++){const N=_[O],D=v[O],U=E[O],F=w[O],H=x[O];if(N===void 0)continue;N.updateMatrix();let z;switch(D_[H.path]){case D_.weights:z=US;break;case D_.rotation:z=ob;break;case D_.position:case D_.scale:default:z=zS;break}const J=N.name?N.name:N.uuid,te=F.interpolation!==void 0?Khe[F.interpolation]:IT,re=[];D_[H.path]===D_.weights?N.traverse(function(de){de.morphTargetInfluences&&re.push(de.name?de.name:de.uuid)}):re.push(J);let ie=U.array;if(U.normalized){const de=uD(ie.constructor),oe=new Float32Array(ie.length);for(let ue=0,ge=ie.length;ue<ge;ue++)oe[ue]=ie[ue]*de;ie=oe}for(let de=0,oe=re.length;de<oe;de++){const ue=new z(re[de]+"."+D_[H.path],D.array,ie,te);F.interpolation==="CUBICSPLINE"&&(ue.createInterpolant=function(Ae){const j=this instanceof ob?Yhe:H8;return new j(this.times,this.values,this.getValueSize()/3,Ae)},ue.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),A.push(ue)}}return new pZ(s,void 0,A)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(o){const l=i._getNodeRef(i.meshCache,s.mesh,o);return s.weights!==void 0&&l.traverse(function(u){if(u.isMesh)for(let h=0,d=s.weights.length;h<d;h++)u.morphTargetInfluences[h]=s.weights[h]}),l})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],o=i._loadNodeShallow(e),l=[],u=s.children||[];for(let d=0,m=u.length;d<m;d++)l.push(i.getDependency("node",u[d]));const h=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([o,Promise.all(l),h]).then(function(d){const m=d[0],_=d[1],v=d[2];v!==null&&m.traverse(function(E){E.isSkinnedMesh&&E.bind(v,tde)});for(let E=0,w=_.length;E<w;E++)m.add(_[E]);return m})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],l=o.name?s.createUniqueName(o.name):"",u=[],h=s._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return h&&u.push(h),o.camera!==void 0&&u.push(s.getDependency("camera",o.camera).then(function(d){return s._getNodeRef(s.cameraCache,o.camera,d)})),s._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){u.push(d)}),this.nodeCache[e]=Promise.all(u).then(function(d){let m;if(o.isBone===!0?m=new YW:d.length>1?m=new Qk:d.length===1?m=d[0]:m=new Hu,m!==d[0])for(let _=0,v=d.length;_<v;_++)m.add(d[_]);if(o.name&&(m.userData.name=o.name,m.name=l),Q_(m,o),o.extensions&&iy(i,m,o),o.matrix!==void 0){const _=new Ji;_.fromArray(o.matrix),m.applyMatrix4(_)}else o.translation!==void 0&&m.position.fromArray(o.translation),o.rotation!==void 0&&m.quaternion.fromArray(o.rotation),o.scale!==void 0&&m.scale.fromArray(o.scale);return s.associations.has(m)||s.associations.set(m,{}),s.associations.get(m).nodes=e,m}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,o=new Qk;i.name&&(o.name=s.createUniqueName(i.name)),Q_(o,i),i.extensions&&iy(t,o,i);const l=i.nodes||[],u=[];for(let h=0,d=l.length;h<d;h++)u.push(s.getDependency("node",l[h]));return Promise.all(u).then(function(h){for(let m=0,_=h.length;m<_;m++)o.add(h[m]);const d=m=>{const _=new Map;for(const[v,E]of s.associations)(v instanceof dv||v instanceof $f)&&_.set(v,E);return m.traverse(v=>{const E=s.associations.get(v);E!=null&&_.set(v,E)}),_};return s.associations=d(o),o})}}function rde(n,e,t){const i=e.attributes,s=new r_;if(i.POSITION!==void 0){const u=t.json.accessors[i.POSITION],h=u.min,d=u.max;if(h!==void 0&&d!==void 0){if(s.set(new Mt(h[0],h[1],h[2]),new Mt(d[0],d[1],d[2])),u.normalized){const m=uD(yT[u.componentType]);s.min.multiplyScalar(m),s.max.multiplyScalar(m)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const u=new Mt,h=new Mt;for(let d=0,m=o.length;d<m;d++){const _=o[d];if(_.POSITION!==void 0){const v=t.json.accessors[_.POSITION],E=v.min,w=v.max;if(E!==void 0&&w!==void 0){if(h.setX(Math.max(Math.abs(E[0]),Math.abs(w[0]))),h.setY(Math.max(Math.abs(E[1]),Math.abs(w[1]))),h.setZ(Math.max(Math.abs(E[2]),Math.abs(w[2]))),v.normalized){const x=uD(yT[v.componentType]);h.multiplyScalar(x)}u.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(u)}n.boundingBox=s;const l=new r0;s.getCenter(l.center),l.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=l}function dz(n,e,t){const i=e.attributes,s=[];function o(l,u){return t.getDependency("accessor",l).then(function(h){n.setAttribute(u,h)})}for(const l in i){const u=lD[l]||l.toLowerCase();u in n.attributes||s.push(o(i[l],u))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(u){n.setIndex(u)});s.push(l)}return Q_(n,e),rde(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?Qhe(n,e.targets,t):n})}const M2=new WeakMap;class ide extends vb{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const o=new EA(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,l=>{const u={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,u).then(t).catch(s)},i,s)}decodeDracoFile(e,t,i,s){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const h in t.attributeTypes){const d=t.attributeTypes[h];d.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[h]=d.name)}const i=JSON.stringify(t);if(M2.has(e)){const h=M2.get(e);if(h.key===i)return h.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const o=this.workerNextTaskID++,l=e.byteLength,u=this._getWorker(o,l).then(h=>(s=h,new Promise((d,m)=>{s._callbacks[o]={resolve:d,reject:m},s.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(h=>this._createGeometry(h.geometry));return u.catch(()=>!0).then(()=>{s&&o&&this._releaseTask(s,o)}),M2.set(e,{key:i,promise:u}),u}_createGeometry(e){const t=new Cv;e.index&&t.setIndex(new Sf(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],o=s.name,l=s.array,u=s.itemSize;t.setAttribute(o,new Sf(l,u))}return t}_loadLibrary(e,t){const i=new EA(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,o)=>{i.load(e,s,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const o=sde.toString(),l=["/* draco decoder */",s,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(o){const l=o.data;switch(l.type){case"decode":s._callbacks[l.id].resolve(l);break;case"error":s._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,o){return s._taskLoad>o._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function sde(){let n,e;onmessage=function(l){const u=l.data;switch(u.type){case"init":n=u.decoderConfig,e=new Promise(function(m){n.onModuleLoaded=function(_){m({draco:_})},DracoDecoderModule(n)});break;case"decode":const h=u.buffer,d=u.taskConfig;e.then(m=>{const _=m.draco,v=new _.Decoder,E=new _.DecoderBuffer;E.Init(new Int8Array(h),h.byteLength);try{const w=t(_,v,E,d),x=w.attributes.map(A=>A.array.buffer);w.index&&x.push(w.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:w},x)}catch(w){console.error(w),self.postMessage({type:"error",id:u.id,error:w.message})}finally{_.destroy(E),_.destroy(v)}});break}};function t(l,u,h,d){const m=d.attributeIDs,_=d.attributeTypes;let v,E;const w=u.GetEncodedGeometryType(h);if(w===l.TRIANGULAR_MESH)v=new l.Mesh,E=u.DecodeBufferToMesh(h,v);else if(w===l.POINT_CLOUD)v=new l.PointCloud,E=u.DecodeBufferToPointCloud(h,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!E.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+E.error_msg());const x={index:null,attributes:[]};for(const A in m){const O=self[_[A]];let k,N;if(d.useUniqueIDs)N=m[A],k=u.GetAttributeByUniqueId(v,N);else{if(N=u.GetAttributeId(v,l[m[A]]),N===-1)continue;k=u.GetAttribute(v,N)}x.attributes.push(s(l,u,v,A,O,k))}return w===l.TRIANGULAR_MESH&&(x.index=i(l,u,v)),l.destroy(v),x}function i(l,u,h){const m=h.num_faces()*3,_=m*4,v=l._malloc(_);u.GetTrianglesUInt32Array(h,_,v);const E=new Uint32Array(l.HEAPF32.buffer,v,m).slice();return l._free(v),{array:E,itemSize:1}}function s(l,u,h,d,m,_){const v=_.num_components(),w=h.num_points()*v,x=w*m.BYTES_PER_ELEMENT,A=o(l,m),O=l._malloc(x);u.GetAttributeDataArrayForAllPoints(h,_,A,x,O);const k=new m(l.HEAPF32.buffer,O,w).slice();return l._free(O),{name:d,array:k,itemSize:v}}function o(l,u){switch(u){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let pC;const A2=()=>{if(pC)return pC;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=n;WebAssembly.validate(t)&&(s=e);let o;const l=WebAssembly.instantiate(u(s),{}).then(_=>{o=_.instance,o.exports.__wasm_call_ctors()});function u(_){const v=new Uint8Array(_.length);for(let w=0;w<_.length;++w){const x=_.charCodeAt(w);v[w]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let E=0;for(let w=0;w<_.length;++w)v[E++]=v[w]<60?i[v[w]]:(v[w]-60)*64+v[++w];return v.buffer.slice(0,E)}function h(_,v,E,w,x,A){const O=o.exports.sbrk,k=E+3&-4,N=O(k*w),D=O(x.length),U=new Uint8Array(o.exports.memory.buffer);U.set(x,D);const F=_(N,E,w,D,x.length);if(F===0&&A&&A(N,k,w),v.set(U.subarray(N,N+E*w)),O(N-O(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const d={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},m={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return pC={ready:l,supported:!0,decodeVertexBuffer(_,v,E,w,x){h(o.exports.meshopt_decodeVertexBuffer,_,v,E,w,o.exports[d[x]])},decodeIndexBuffer(_,v,E,w){h(o.exports.meshopt_decodeIndexBuffer,_,v,E,w)},decodeIndexSequence(_,v,E,w){h(o.exports.meshopt_decodeIndexSequence,_,v,E,w)},decodeGltfBuffer(_,v,E,w,x,A){h(o.exports[m[x]],_,v,E,w,o.exports[d[A]])}},pC};let fC=null,G8="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function W8(n,e,t){return i=>{t&&t(i),n&&(fC||(fC=new ide),fC.setDecoderPath(typeof n=="string"?n:G8),i.setDRACOLoader(fC)),e&&i.setMeshoptDecoder(typeof A2=="function"?A2():A2)}}function _r(n,e=!0,t=!0,i){return Rw(oP,n,W8(e,t,i))}_r.preload=(n,e=!0,t=!0,i)=>Rw.preload(oP,n,W8(e,t,i));_r.clear=n=>Rw.clear(oP,n);_r.setDecoderPath=n=>{G8=n};function ode(n){const{nodes:e}=_r(I8);return[{type:"raw",geometry:e.BASE_FRONT_GRILL_1.geometry,material:e.BASE_FRONT_GRILL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(I8);const V8="/gpu-programming/assets/BASE_LEFT_COVER_1-DGxtL-mQ.glb";function ade(n){const{nodes:e}=_r(V8);return[{type:"raw",geometry:e.BASE_LEFT_COVER_1.geometry,material:e.BASE_LEFT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(V8);const j8="/gpu-programming/assets/base_link-CxNG3VaF.glb";function lde(n){const{nodes:e}=_r(j8);return[{type:"raw",geometry:e.base_link.geometry,material:e.base_link.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(j8);const X8="/gpu-programming/assets/BASE_RIGHT_COVER_1-hc0og1we.glb";function ude(n){const{nodes:e}=_r(X8);return[{type:"raw",geometry:e.BASE_RIGHT_COVER_1.geometry,material:e.BASE_RIGHT_COVER_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(X8);const Y8="/gpu-programming/assets/Battery_1-CK31T6T2.glb";function cde(n){const{nodes:e}=_r(Y8);return[{type:"raw",geometry:e.Battery_1.geometry,material:e.Battery_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(Y8);const K8="/gpu-programming/assets/BODY_BASE_CONNECTOR_1-BGiepl-q.glb";function hde(n){const{nodes:e}=_r(K8);return[{type:"raw",geometry:e.BODY_BASE_CONNECTOR_1.geometry,material:e.BODY_BASE_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(K8);const dde="/gpu-programming/assets/DRIVE_TRACK_LEFT_1-BU9fqrup.glb";_r.preload(dde);const pde="/gpu-programming/assets/DRIVE_TRACK_RIGHT_1-inJUmdan.glb";_r.preload(pde);const J8="/gpu-programming/assets/EYE_LENS_1-dEqRsnM7.glb";function fde(n){const{nodes:e}=_r(J8);return[{type:"raw",geometry:e.EYE_LENS_1.geometry,material:e.EYE_LENS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(J8);const Q8="/gpu-programming/assets/FACE_1-m_5yRlpQ.glb";function mde(n){const{nodes:e}=_r(Q8);return[{type:"raw",geometry:e.FACE_1.geometry,material:e.FACE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(Q8);const q8="/gpu-programming/assets/FRONT_LEFT_WHEEL_1-CbTd7ucE.glb";function gde(n){const{nodes:e}=_r(q8);return[{type:"raw",geometry:e.FRONT_LEFT_WHEEL_1.geometry,material:e.FRONT_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(q8);const Z8="/gpu-programming/assets/FRONT_RIGHT_WHEEL_1-DndcS7IV.glb";function _de(n){const{nodes:e}=_r(Z8);return[{type:"raw",geometry:e.FRONT_RIGHT_WHEEL_1.geometry,material:e.FRONT_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(Z8);const e9="/gpu-programming/assets/HEAD_1-BuuEOSCL.glb";function vde(n){const{nodes:e}=_r(e9);return[{type:"raw",geometry:e.HEAD_1.geometry,material:e.HEAD_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(e9);const t9="/gpu-programming/assets/HEAD_VENT_LEFT_1-DjAZtO3_.glb";function yde(n){const{nodes:e}=_r(t9);return[{type:"raw",geometry:e.HEAD_VENT_LEFT_1.geometry,material:e.HEAD_VENT_LEFT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(t9);const n9="/gpu-programming/assets/HEAD_VENT_RIGHT_1-BfOCx_V8.glb";function bde(n){const{nodes:e}=_r(n9);return[{type:"raw",geometry:e.HEAD_VENT_RIGHT_1.geometry,material:e.HEAD_VENT_RIGHT_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(n9);const r9="/gpu-programming/assets/LEFT_ARM_1-B8yh6mwG.glb";function Tde(n){const{nodes:e}=_r(r9);return[{type:"raw",geometry:e.LEFT_ARM_1.geometry,material:e.LEFT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(r9);const i9="/gpu-programming/assets/LEFT_ARM_CONNECTOR_1-CXrHlUi5.glb";function Ede(n){const{nodes:e}=_r(i9);return[{type:"raw",geometry:e.LEFT_ARM_CONNECTOR_1.geometry,material:e.LEFT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(i9);const s9="/gpu-programming/assets/MIDDLE_LEFT_WHEEL_1-BAVTGYOT.glb";function $de(n){const{nodes:e}=_r(s9);return[{type:"raw",geometry:e.MIDDLE_LEFT_WHEEL_1.geometry,material:e.MIDDLE_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(s9);const o9="/gpu-programming/assets/MIDDLE_RIGHT_WHEEL_1-GMj8YSda.glb";function Sde(n){const{nodes:e}=_r(o9);return[{type:"raw",geometry:e.MIDDLE_RIGHT_WHEEL_1.geometry,material:e.MIDDLE_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(o9);const a9="/gpu-programming/assets/NECK_GLOBE_BASE_1-CpAA3cya.glb";function wde(n){const{nodes:e}=_r(a9);return[{type:"raw",geometry:e.NECK_GLOBE_BASE_1.geometry,material:e.NECK_GLOBE_BASE_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(a9);const l9="/gpu-programming/assets/REAR_LEFT_WHEEL_1-Ca-hbPaC.glb";function xde(n){const{nodes:e}=_r(l9);return[{type:"raw",geometry:e.REAR_LEFT_WHEEL_1.geometry,material:e.REAR_LEFT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(l9);const u9="/gpu-programming/assets/REAR_RIGHT_WHEEL_1-DLUpOsjA.glb";function Cde(n){const{nodes:e}=_r(u9);return[{type:"raw",geometry:e.REAR_RIGHT_WHEEL_1.geometry,material:e.REAR_RIGHT_WHEEL_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(u9);const c9="/gpu-programming/assets/RIGHT_ARM_1-CsUyYnQa.glb";function Mde(n){const{nodes:e}=_r(c9);return[{type:"raw",geometry:e.RIGHT_ARM_1.geometry,material:e.RIGHT_ARM_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(c9);const h9="/gpu-programming/assets/RIGHT_ARM_CONNECTOR_1-Og6IFGgn.glb";function Ade(n){const{nodes:e}=_r(h9);return[{type:"raw",geometry:e.RIGHT_ARM_CONNECTOR_1.geometry,material:e.RIGHT_ARM_CONNECTOR_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(h9);const d9="/gpu-programming/assets/Torso_1-Dsttb7Xv.glb";function Ide(n){const{nodes:e}=_r(d9);return[{type:"raw",geometry:e.Torso_1.geometry,material:e.Torso_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(d9);const p9="/gpu-programming/assets/VISOR_GLASS_1-DUgs1YBX.glb";function Rde(n){const{nodes:e}=_r(p9);return[{type:"raw",geometry:e.VISOR_GLASS_1.geometry,material:e.VISOR_GLASS_1.material,scale:[1,1,1],rotation:[0,0,0]}]}_r.preload(p9);const kde={"package://misty_description/meshes/BASE_FRONT_GRILL_1.stl":ode,"package://misty_description/meshes/BASE_LEFT_COVER_1.stl":ade,"package://misty_description/meshes/base_link.stl":lde,"package://misty_description/meshes/BASE_RIGHT_COVER_1.stl":ude,"package://misty_description/meshes/Battery_1.stl":cde,"package://misty_description/meshes/BODY_BASE_CONNECTOR_1.stl":hde,"package://misty_description/meshes/EYE_LENS_1.stl":fde,"package://misty_description/meshes/FACE_1.stl":mde,"package://misty_description/meshes/FRONT_LEFT_WHEEL_1.stl":gde,"package://misty_description/meshes/FRONT_RIGHT_WHEEL_1.stl":_de,"package://misty_description/meshes/HEAD_1.stl":vde,"package://misty_description/meshes/HEAD_VENT_LEFT_1.stl":yde,"package://misty_description/meshes/HEAD_VENT_RIGHT_1.stl":bde,"package://misty_description/meshes/LEFT_ARM_1.stl":Tde,"package://misty_description/meshes/LEFT_ARM_CONNECTOR_1.stl":Ede,"package://misty_description/meshes/MIDDLE_LEFT_WHEEL_1.stl":$de,"package://misty_description/meshes/MIDDLE_RIGHT_WHEEL_1.stl":Sde,"package://misty_description/meshes/NECK_GLOBE_BASE_1.stl":wde,"package://misty_description/meshes/REAR_LEFT_WHEEL_1.stl":xde,"package://misty_description/meshes/REAR_RIGHT_WHEEL_1.stl":Cde,"package://misty_description/meshes/RIGHT_ARM_1.stl":Mde,"package://misty_description/meshes/RIGHT_ARM_CONNECTOR_1.stl":Ade,"package://misty_description/meshes/Torso_1.stl":Ide,"package://misty_description/meshes/VISOR_GLASS_1.stl":Rde};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const aE="143",Ey={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$y={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},f9=0,cD=1,m9=2,Ode=3,g9=0,lR=1,pS=2,By=3,e0=0,zc=1,ep=2,_9=1,Lde=2,sp=0,K0=1,NA=2,hD=3,dD=4,v9=5,Cy=100,y9=101,aP=102,pD=103,fD=104,b9=200,T9=201,E9=202,$9=203,uR=204,cR=205,S9=206,w9=207,x9=208,C9=209,M9=210,A9=0,I9=1,R9=2,BA=3,k9=4,O9=5,L9=6,D9=7,kw=0,N9=1,B9=2,hg=0,P9=1,F9=2,U9=3,lP=4,z9=5,hR=300,yv=301,bv=302,YS=303,KS=304,lE=306,DT=1e3,Zd=1001,JS=1002,da=1003,PA=1004,Dde=1004,FA=1005,Nde=1005,Vo=1006,uP=1007,Bde=1007,bb=1008,Pde=1008,jh=1009,H9=1010,G9=1011,cP=1012,W9=1013,j0=1014,jg=1015,ub=1016,V9=1017,j9=1018,pv=1020,X9=1021,Y9=1022,Bp=1023,K9=1024,J9=1025,fv=1026,Tv=1027,Q9=1028,q9=1029,Z9=1030,e7=1031,t7=1033,PM=33776,FM=33777,UM=33778,zM=33779,mD=35840,gD=35841,_D=35842,vD=35843,n7=36196,yD=37492,bD=37496,TD=37808,ED=37809,$D=37810,SD=37811,wD=37812,xD=37813,CD=37814,MD=37815,AD=37816,ID=37817,RD=37818,kD=37819,OD=37820,LD=37821,DD=36492,r7=2200,i7=2201,s7=2202,QS=2300,qS=2301,HM=2302,Py=2400,Fy=2401,ZS=2402,dR=2500,hP=2501,Fde=0,Ude=1,zde=2,Tm=3e3,Ti=3001,Iv=3200,NT=3201,Tb=0,o7=1,Hde="",Ug="srgb",rv="srgb-linear",Gde=0,GM=7680,Wde=7681,Vde=7682,jde=7683,Xde=34055,Yde=34056,Kde=5386,Jde=512,Qde=513,qde=514,Zde=515,epe=516,tpe=517,npe=518,a7=519,ew=35044,Xy=35048,rpe=35040,ipe=35045,spe=35049,ope=35041,ape=35046,lpe=35050,upe=35042,cpe="100",ND="300 es",UA=1035;class Lf{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Td=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let pz=1234567;const Yy=Math.PI/180,tw=180/Math.PI;function xf(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Td[n&255]+Td[n>>8&255]+Td[n>>16&255]+Td[n>>24&255]+"-"+Td[e&255]+Td[e>>8&255]+"-"+Td[e>>16&15|64]+Td[e>>24&255]+"-"+Td[t&63|128]+Td[t>>8&255]+"-"+Td[t>>16&255]+Td[t>>24&255]+Td[i&255]+Td[i>>8&255]+Td[i>>16&255]+Td[i>>24&255]).toLowerCase()}function Uu(n,e,t){return Math.max(e,Math.min(t,n))}function dP(n,e){return(n%e+e)%e}function hpe(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function dpe(n,e,t){return n!==e?(t-n)/(e-n):0}function fS(n,e,t){return(1-t)*n+t*e}function ppe(n,e,t,i){return fS(n,e,1-Math.exp(-t*i))}function fpe(n,e=1){return e-Math.abs(dP(n,e*2)-e)}function mpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function gpe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function _pe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function vpe(n,e){return n+Math.random()*(e-n)}function ype(n){return n*(.5-Math.random())}function bpe(n){n!==void 0&&(pz=n);let e=pz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Tpe(n){return n*Yy}function Epe(n){return n*tw}function BD(n){return(n&n-1)===0&&n!==0}function l7(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function zA(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $pe(n,e,t,i,s){const o=Math.cos,l=Math.sin,u=o(t/2),h=l(t/2),d=o((e+i)/2),m=l((e+i)/2),_=o((e-i)/2),v=l((e-i)/2),E=o((i-e)/2),w=l((i-e)/2);switch(s){case"XYX":n.set(u*m,h*_,h*v,u*d);break;case"YZY":n.set(h*v,u*m,h*_,u*d);break;case"ZXZ":n.set(h*_,h*v,u*m,u*d);break;case"XZX":n.set(u*m,h*w,h*E,u*d);break;case"YXY":n.set(h*E,u*m,h*w,u*d);break;case"ZYZ":n.set(h*w,h*E,u*m,u*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Spe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function wpe(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var u7=Object.freeze({__proto__:null,DEG2RAD:Yy,RAD2DEG:tw,generateUUID:xf,clamp:Uu,euclideanModulo:dP,mapLinear:hpe,inverseLerp:dpe,lerp:fS,damp:ppe,pingpong:fpe,smoothstep:mpe,smootherstep:gpe,randInt:_pe,randFloat:vpe,randFloatSpread:ype,seededRandom:bpe,degToRad:Tpe,radToDeg:Epe,isPowerOfTwo:BD,ceilPowerOfTwo:l7,floorPowerOfTwo:zA,setQuaternionFromProperEuler:$pe,normalize:wpe,denormalize:Spe});class Lt{constructor(e=0,t=0){Lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,l=this.y-e.y;return this.x=o*i-l*s+e.x,this.y=o*s+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tp{constructor(){tp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,s,o,l,u,h,d){const m=this.elements;return m[0]=e,m[1]=s,m[2]=u,m[3]=t,m[4]=o,m[5]=h,m[6]=i,m[7]=l,m[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[3],h=i[6],d=i[1],m=i[4],_=i[7],v=i[2],E=i[5],w=i[8],x=s[0],A=s[3],O=s[6],k=s[1],N=s[4],D=s[7],U=s[2],F=s[5],H=s[8];return o[0]=l*x+u*k+h*U,o[3]=l*A+u*N+h*F,o[6]=l*O+u*D+h*H,o[1]=d*x+m*k+_*U,o[4]=d*A+m*N+_*F,o[7]=d*O+m*D+_*H,o[2]=v*x+E*k+w*U,o[5]=v*A+E*N+w*F,o[8]=v*O+E*D+w*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8];return t*l*m-t*u*d-i*o*m+i*u*h+s*o*d-s*l*h}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=m*l-u*d,v=u*h-m*o,E=d*o-l*h,w=t*_+i*v+s*E;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=_*x,e[1]=(s*d-m*i)*x,e[2]=(u*i-s*l)*x,e[3]=v*x,e[4]=(m*t-s*h)*x,e[5]=(s*o-u*t)*x,e[6]=E*x,e[7]=(i*h-d*t)*x,e[8]=(l*t-i*o)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,l,u){const h=Math.cos(o),d=Math.sin(o);return this.set(i*h,i*d,-i*(h*l+d*u)+l+e,-s*d,s*h,-s*(-d*l+h*u)+u+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.elements,o=s[0],l=s[3],u=s[6],h=s[1],d=s[4],m=s[7];return s[0]=t*o+i*h,s[3]=t*l+i*d,s[6]=t*u+i*m,s[1]=-i*o+t*h,s[4]=-i*l+t*d,s[7]=-i*u+t*m,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}function c7(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const xpe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function iT(n,e){return new xpe[n](e)}function nw(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ky(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function WM(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const I2={[Ug]:{[rv]:Ky},[rv]:{[Ug]:WM}},om={legacyMode:!0,get workingColorSpace(){return rv},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(I2[e]&&I2[e][t]!==void 0){const i=I2[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},h7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bc={r:0,g:0,b:0},Qm={h:0,s:0,l:0},mC={h:0,s:0,l:0};function R2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function gC(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class _n{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ug){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,om.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=rv){return this.r=e,this.g=t,this.b=i,om.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=rv){if(e=dP(e,1),t=Uu(t,0,1),i=Uu(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,l=2*i-o;this.r=R2(l,o,e+1/3),this.g=R2(l,o,e),this.b=R2(l,o,e-1/3)}return om.toWorkingColorSpace(this,s),this}setStyle(e,t=Ug){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const l=s[1],u=s[2];switch(l){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,om.toWorkingColorSpace(this,t),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,om.toWorkingColorSpace(this,t),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const h=parseFloat(o[1])/360,d=parseInt(o[2],10)/100,m=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(h,d,m,t)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(l===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,om.toWorkingColorSpace(this,t),this;if(l===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,om.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ug){const i=h7[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ky(e.r),this.g=Ky(e.g),this.b=Ky(e.b),this}copyLinearToSRGB(e){return this.r=WM(e.r),this.g=WM(e.g),this.b=WM(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ug){return om.fromWorkingColorSpace(gC(this,Bc),e),Uu(Bc.r*255,0,255)<<16^Uu(Bc.g*255,0,255)<<8^Uu(Bc.b*255,0,255)<<0}getHexString(e=Ug){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=rv){om.fromWorkingColorSpace(gC(this,Bc),t);const i=Bc.r,s=Bc.g,o=Bc.b,l=Math.max(i,s,o),u=Math.min(i,s,o);let h,d;const m=(u+l)/2;if(u===l)h=0,d=0;else{const _=l-u;switch(d=m<=.5?_/(l+u):_/(2-l-u),l){case i:h=(s-o)/_+(s<o?6:0);break;case s:h=(o-i)/_+2;break;case o:h=(i-s)/_+4;break}h/=6}return e.h=h,e.s=d,e.l=m,e}getRGB(e,t=rv){return om.fromWorkingColorSpace(gC(this,Bc),t),e.r=Bc.r,e.g=Bc.g,e.b=Bc.b,e}getStyle(e=Ug){return om.fromWorkingColorSpace(gC(this,Bc),e),e!==Ug?`color(${e} ${Bc.r} ${Bc.g} ${Bc.b})`:`rgb(${Bc.r*255|0},${Bc.g*255|0},${Bc.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Qm),Qm.h+=e,Qm.s+=t,Qm.l+=i,this.setHSL(Qm.h,Qm.s,Qm.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Qm),e.getHSL(mC);const i=fS(Qm.h,mC.h,t),s=fS(Qm.s,mC.s,t),o=fS(Qm.l,mC.l,t);return this.setHSL(i,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}_n.NAMES=h7;let T1;class pP{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{T1===void 0&&(T1=nw("canvas")),T1.width=e.width,T1.height=e.height;const i=T1.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=T1}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=nw("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let l=0;l<o.length;l++)o[l]=Ky(o[l]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ky(t[i]/255)*255):t[i]=Ky(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Uy{constructor(e=null){this.isSource=!0,this.uuid=xf(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let l=0,u=s.length;l<u;l++)s[l].isDataTexture?o.push(k2(s[l].image)):o.push(k2(s[l]))}else o=k2(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function k2(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cpe=0;class Bl extends Lf{constructor(e=Bl.DEFAULT_IMAGE,t=Bl.DEFAULT_MAPPING,i=Zd,s=Zd,o=Vo,l=bb,u=Bp,h=jh,d=1,m=Tm){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cpe++}),this.uuid=xf(),this.name="",this.source=new Uy(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=d,this.format=u,this.internalFormat=null,this.type=h,this.offset=new Lt(0,0),this.repeat=new Lt(1,1),this.center=new Lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=m,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case DT:e.x=e.x-Math.floor(e.x);break;case Zd:e.x=e.x<0?0:1;break;case JS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case DT:e.y=e.y-Math.floor(e.y);break;case Zd:e.y=e.y<0?0:1;break;case JS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Bl.DEFAULT_IMAGE=null;Bl.DEFAULT_MAPPING=hR;class Mi{constructor(e=0,t=0,i=0,s=1){Mi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*s+l[12]*o,this.y=l[1]*t+l[5]*i+l[9]*s+l[13]*o,this.z=l[2]*t+l[6]*i+l[10]*s+l[14]*o,this.w=l[3]*t+l[7]*i+l[11]*s+l[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const l=e.elements,u=l[0],h=l[4],d=l[8],m=l[1],_=l[5],v=l[9],E=l[2],w=l[6],x=l[10];if(Math.abs(h-m)<.01&&Math.abs(d-E)<.01&&Math.abs(v-w)<.01){if(Math.abs(h+m)<.1&&Math.abs(d+E)<.1&&Math.abs(v+w)<.1&&Math.abs(u+_+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(u+1)/2,k=(_+1)/2,N=(x+1)/2,D=(h+m)/4,U=(d+E)/4,F=(v+w)/4;return O>k&&O>N?O<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(O),s=D/i,o=U/i):k>N?k<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(k),i=D/s,o=F/s):N<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(N),i=U/o,s=F/o),this.set(i,s,o,t),this}let A=Math.sqrt((w-v)*(w-v)+(d-E)*(d-E)+(m-h)*(m-h));return Math.abs(A)<.001&&(A=1),this.x=(w-v)/A,this.y=(d-E)/A,this.z=(m-h)/A,this.w=Math.acos((u+_+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lu extends Lf{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Mi(0,0,e,t),this.scissorTest=!1,this.viewport=new Mi(0,0,e,t);const s={width:e,height:t,depth:1};this.texture=new Bl(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Vo,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Uy(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ow extends Bl{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=da,this.minFilter=da,this.wrapR=Zd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Mpe extends lu{constructor(e,t,i){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Ow(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class pR extends Bl{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=da,this.minFilter=da,this.wrapR=Zd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ape extends lu{constructor(e,t,i){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new pR(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Ipe extends lu{constructor(e,t,i,s={}){super(e,t,s),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let l=0;l<i;l++)this.texture[l]=o.clone(),this.texture[l].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.texture.length;s<o;s++)this.texture[s].image.width=e,this.texture[s].image.height=t,this.texture[s].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Wo{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,l,u){let h=i[s+0],d=i[s+1],m=i[s+2],_=i[s+3];const v=o[l+0],E=o[l+1],w=o[l+2],x=o[l+3];if(u===0){e[t+0]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_;return}if(u===1){e[t+0]=v,e[t+1]=E,e[t+2]=w,e[t+3]=x;return}if(_!==x||h!==v||d!==E||m!==w){let A=1-u;const O=h*v+d*E+m*w+_*x,k=O>=0?1:-1,N=1-O*O;if(N>Number.EPSILON){const U=Math.sqrt(N),F=Math.atan2(U,O*k);A=Math.sin(A*F)/U,u=Math.sin(u*F)/U}const D=u*k;if(h=h*A+v*D,d=d*A+E*D,m=m*A+w*D,_=_*A+x*D,A===1-u){const U=1/Math.sqrt(h*h+d*d+m*m+_*_);h*=U,d*=U,m*=U,_*=U}}e[t]=h,e[t+1]=d,e[t+2]=m,e[t+3]=_}static multiplyQuaternionsFlat(e,t,i,s,o,l){const u=i[s],h=i[s+1],d=i[s+2],m=i[s+3],_=o[l],v=o[l+1],E=o[l+2],w=o[l+3];return e[t]=u*w+m*_+h*E-d*v,e[t+1]=h*w+m*v+d*_-u*E,e[t+2]=d*w+m*E+u*v-h*_,e[t+3]=m*w-u*_-h*v-d*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,o=e._z,l=e._order,u=Math.cos,h=Math.sin,d=u(i/2),m=u(s/2),_=u(o/2),v=h(i/2),E=h(s/2),w=h(o/2);switch(l){case"XYZ":this._x=v*m*_+d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_-v*E*w;break;case"YXZ":this._x=v*m*_+d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_+v*E*w;break;case"ZXY":this._x=v*m*_-d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_-v*E*w;break;case"ZYX":this._x=v*m*_-d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_+v*E*w;break;case"YZX":this._x=v*m*_+d*E*w,this._y=d*E*_+v*m*w,this._z=d*m*w-v*E*_,this._w=d*m*_-v*E*w;break;case"XZY":this._x=v*m*_-d*E*w,this._y=d*E*_-v*m*w,this._z=d*m*w+v*E*_,this._w=d*m*_+v*E*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],l=t[1],u=t[5],h=t[9],d=t[2],m=t[6],_=t[10],v=i+u+_;if(v>0){const E=.5/Math.sqrt(v+1);this._w=.25/E,this._x=(m-h)*E,this._y=(o-d)*E,this._z=(l-s)*E}else if(i>u&&i>_){const E=2*Math.sqrt(1+i-u-_);this._w=(m-h)/E,this._x=.25*E,this._y=(s+l)/E,this._z=(o+d)/E}else if(u>_){const E=2*Math.sqrt(1+u-i-_);this._w=(o-d)/E,this._x=(s+l)/E,this._y=.25*E,this._z=(h+m)/E}else{const E=2*Math.sqrt(1+_-i-u);this._w=(l-s)/E,this._x=(o+d)/E,this._y=(h+m)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Uu(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,l=e._w,u=t._x,h=t._y,d=t._z,m=t._w;return this._x=i*m+l*u+s*d-o*h,this._y=s*m+l*h+o*u-i*d,this._z=o*m+l*d+i*h-s*u,this._w=l*m-i*u-s*h-o*d,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,l=this._w;let u=l*e._w+i*e._x+s*e._y+o*e._z;if(u<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,u=-u):this.copy(e),u>=1)return this._w=l,this._x=i,this._y=s,this._z=o,this;const h=1-u*u;if(h<=Number.EPSILON){const E=1-t;return this._w=E*l+t*this._w,this._x=E*i+t*this._x,this._y=E*s+t*this._y,this._z=E*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(h),m=Math.atan2(d,u),_=Math.sin((1-t)*m)/d,v=Math.sin(t*m)/d;return this._w=l*_+this._w*v,this._x=i*_+this._x*v,this._y=s*_+this._y*v,this._z=o*_+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),s=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(s),i*Math.sin(o),i*Math.cos(o),t*Math.sin(s))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Te{constructor(e=0,t=0,i=0){Te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(fz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(fz.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,l=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*l,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*l,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,l=e.y,u=e.z,h=e.w,d=h*t+l*s-u*i,m=h*i+u*t-o*s,_=h*s+o*i-l*t,v=-o*t-l*i-u*s;return this.x=d*h+v*-o+m*-u-_*-l,this.y=m*h+v*-l+_*-o-d*-u,this.z=_*h+v*-u+d*-l-m*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,l=t.x,u=t.y,h=t.z;return this.x=s*h-o*u,this.y=o*l-i*h,this.z=i*u-s*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return O2.copy(this).projectOnVector(e),this.sub(O2)}reflect(e){return this.sub(O2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Uu(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const O2=new Te,fz=new Wo;class mg{constructor(e=new Te(1/0,1/0,1/0),t=new Te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,d=e.length;h<d;h+=3){const m=e[h],_=e[h+1],v=e[h+2];m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromBufferAttribute(e){let t=1/0,i=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let h=0,d=e.count;h<d;h++){const m=e.getX(h),_=e.getY(h),v=e.getZ(h);m<t&&(t=m),_<i&&(i=_),v<s&&(s=v),m>o&&(o=m),_>l&&(l=_),v>u&&(u=v)}return this.min.set(t,i,s),this.max.set(o,l,u),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=sy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const o=i.attributes.position;for(let l=0,u=o.count;l<u;l++)sy.fromBufferAttribute(o,l).applyMatrix4(e.matrixWorld),this.expandByPoint(sy)}else i.boundingBox===null&&i.computeBoundingBox(),L2.copy(i.boundingBox),L2.applyMatrix4(e.matrixWorld),this.union(L2);const s=e.children;for(let o=0,l=s.length;o<l;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,sy),sy.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(S$),_C.subVectors(this.max,S$),E1.subVectors(e.a,S$),$1.subVectors(e.b,S$),S1.subVectors(e.c,S$),N_.subVectors($1,E1),B_.subVectors(S1,$1),oy.subVectors(E1,S1);let t=[0,-N_.z,N_.y,0,-B_.z,B_.y,0,-oy.z,oy.y,N_.z,0,-N_.x,B_.z,0,-B_.x,oy.z,0,-oy.x,-N_.y,N_.x,0,-B_.y,B_.x,0,-oy.y,oy.x,0];return!D2(t,E1,$1,S1,_C)||(t=[1,0,0,0,1,0,0,0,1],!D2(t,E1,$1,S1,_C))?!1:(vC.crossVectors(N_,B_),t=[vC.x,vC.y,vC.z],D2(t,E1,$1,S1,_C))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return sy.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(sy).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(I0[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),I0[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),I0[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),I0[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),I0[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),I0[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),I0[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),I0[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(I0),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const I0=[new Te,new Te,new Te,new Te,new Te,new Te,new Te,new Te],sy=new Te,L2=new mg,E1=new Te,$1=new Te,S1=new Te,N_=new Te,B_=new Te,oy=new Te,S$=new Te,_C=new Te,vC=new Te,ay=new Te;function D2(n,e,t,i,s){for(let o=0,l=n.length-3;o<=l;o+=3){ay.fromArray(n,o);const u=s.x*Math.abs(ay.x)+s.y*Math.abs(ay.y)+s.z*Math.abs(ay.z),h=e.dot(ay),d=t.dot(ay),m=i.dot(ay);if(Math.max(-Math.max(h,d,m),Math.min(h,d,m))>u)return!1}return!0}const Rpe=new mg,mz=new Te,yC=new Te,N2=new Te;class s0{constructor(e=new Te,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Rpe.setFromPoints(e).getCenter(i);let s=0;for(let o=0,l=e.length;o<l;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){N2.subVectors(e,this.center);const t=N2.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.add(N2.multiplyScalar(s/i)),this.radius+=s}return this}union(e){return this.center.equals(e.center)===!0?yC.set(0,0,1).multiplyScalar(e.radius):yC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(mz.copy(e.center).add(yC)),this.expandByPoint(mz.copy(e.center).sub(yC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const R0=new Te,B2=new Te,bC=new Te,P_=new Te,P2=new Te,TC=new Te,F2=new Te;class Lw{constructor(e=new Te,t=new Te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,R0)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=R0.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(R0.copy(this.direction).multiplyScalar(t).add(this.origin),R0.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){B2.copy(e).add(t).multiplyScalar(.5),bC.copy(t).sub(e).normalize(),P_.copy(this.origin).sub(B2);const o=e.distanceTo(t)*.5,l=-this.direction.dot(bC),u=P_.dot(this.direction),h=-P_.dot(bC),d=P_.lengthSq(),m=Math.abs(1-l*l);let _,v,E,w;if(m>0)if(_=l*h-u,v=l*u-h,w=o*m,_>=0)if(v>=-w)if(v<=w){const x=1/m;_*=x,v*=x,E=_*(_+l*v+2*u)+v*(l*_+v+2*h)+d}else v=o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;else v=-o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;else v<=-w?(_=Math.max(0,-(-l*o+u)),v=_>0?-o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+d):v<=w?(_=0,v=Math.min(Math.max(-o,-h),o),E=v*(v+2*h)+d):(_=Math.max(0,-(l*o+u)),v=_>0?o:Math.min(Math.max(-o,-h),o),E=-_*_+v*(v+2*h)+d);else v=l>0?-o:o,_=Math.max(0,-(l*v+u)),E=-_*_+v*(v+2*h)+d;return i&&i.copy(this.direction).multiplyScalar(_).add(this.origin),s&&s.copy(bC).multiplyScalar(v).add(B2),E}intersectSphere(e,t){R0.subVectors(e.center,this.origin);const i=R0.dot(this.direction),s=R0.dot(R0)-i*i,o=e.radius*e.radius;if(s>o)return null;const l=Math.sqrt(o-s),u=i-l,h=i+l;return u<0&&h<0?null:u<0?this.at(h,t):this.at(u,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,l,u,h;const d=1/this.direction.x,m=1/this.direction.y,_=1/this.direction.z,v=this.origin;return d>=0?(i=(e.min.x-v.x)*d,s=(e.max.x-v.x)*d):(i=(e.max.x-v.x)*d,s=(e.min.x-v.x)*d),m>=0?(o=(e.min.y-v.y)*m,l=(e.max.y-v.y)*m):(o=(e.max.y-v.y)*m,l=(e.min.y-v.y)*m),i>l||o>s||((o>i||i!==i)&&(i=o),(l<s||s!==s)&&(s=l),_>=0?(u=(e.min.z-v.z)*_,h=(e.max.z-v.z)*_):(u=(e.max.z-v.z)*_,h=(e.min.z-v.z)*_),i>h||u>s)||((u>i||i!==i)&&(i=u),(h<s||s!==s)&&(s=h),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,R0)!==null}intersectTriangle(e,t,i,s,o){P2.subVectors(t,e),TC.subVectors(i,e),F2.crossVectors(P2,TC);let l=this.direction.dot(F2),u;if(l>0){if(s)return null;u=1}else if(l<0)u=-1,l=-l;else return null;P_.subVectors(this.origin,e);const h=u*this.direction.dot(TC.crossVectors(P_,TC));if(h<0)return null;const d=u*this.direction.dot(P2.cross(P_));if(d<0||h+d>l)return null;const m=-u*P_.dot(F2);return m<0?null:this.at(m/l,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Mr{constructor(){Mr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,s,o,l,u,h,d,m,_,v,E,w,x,A){const O=this.elements;return O[0]=e,O[4]=t,O[8]=i,O[12]=s,O[1]=o,O[5]=l,O[9]=u,O[13]=h,O[2]=d,O[6]=m,O[10]=_,O[14]=v,O[3]=E,O[7]=w,O[11]=x,O[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Mr().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/w1.setFromMatrixColumn(e,0).length(),o=1/w1.setFromMatrixColumn(e,1).length(),l=1/w1.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s),m=Math.cos(o),_=Math.sin(o);if(e.order==="XYZ"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=-h*_,t[8]=d,t[1]=E+w*d,t[5]=v-x*d,t[9]=-u*h,t[2]=x-v*d,t[6]=w+E*d,t[10]=l*h}else if(e.order==="YXZ"){const v=h*m,E=h*_,w=d*m,x=d*_;t[0]=v+x*u,t[4]=w*u-E,t[8]=l*d,t[1]=l*_,t[5]=l*m,t[9]=-u,t[2]=E*u-w,t[6]=x+v*u,t[10]=l*h}else if(e.order==="ZXY"){const v=h*m,E=h*_,w=d*m,x=d*_;t[0]=v-x*u,t[4]=-l*_,t[8]=w+E*u,t[1]=E+w*u,t[5]=l*m,t[9]=x-v*u,t[2]=-l*d,t[6]=u,t[10]=l*h}else if(e.order==="ZYX"){const v=l*m,E=l*_,w=u*m,x=u*_;t[0]=h*m,t[4]=w*d-E,t[8]=v*d+x,t[1]=h*_,t[5]=x*d+v,t[9]=E*d-w,t[2]=-d,t[6]=u*h,t[10]=l*h}else if(e.order==="YZX"){const v=l*h,E=l*d,w=u*h,x=u*d;t[0]=h*m,t[4]=x-v*_,t[8]=w*_+E,t[1]=_,t[5]=l*m,t[9]=-u*m,t[2]=-d*m,t[6]=E*_+w,t[10]=v-x*_}else if(e.order==="XZY"){const v=l*h,E=l*d,w=u*h,x=u*d;t[0]=h*m,t[4]=-_,t[8]=d*m,t[1]=v*_+x,t[5]=l*m,t[9]=E*_-w,t[2]=w*_-E,t[6]=u*m,t[10]=x*_+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kpe,e,Ope)}lookAt(e,t,i){const s=this.elements;return ff.subVectors(e,t),ff.lengthSq()===0&&(ff.z=1),ff.normalize(),F_.crossVectors(i,ff),F_.lengthSq()===0&&(Math.abs(i.z)===1?ff.x+=1e-4:ff.z+=1e-4,ff.normalize(),F_.crossVectors(i,ff)),F_.normalize(),EC.crossVectors(ff,F_),s[0]=F_.x,s[4]=EC.x,s[8]=ff.x,s[1]=F_.y,s[5]=EC.y,s[9]=ff.y,s[2]=F_.z,s[6]=EC.z,s[10]=ff.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,l=i[0],u=i[4],h=i[8],d=i[12],m=i[1],_=i[5],v=i[9],E=i[13],w=i[2],x=i[6],A=i[10],O=i[14],k=i[3],N=i[7],D=i[11],U=i[15],F=s[0],H=s[4],z=s[8],J=s[12],te=s[1],re=s[5],ie=s[9],de=s[13],oe=s[2],ue=s[6],ge=s[10],Ae=s[14],j=s[3],Z=s[7],ne=s[11],le=s[15];return o[0]=l*F+u*te+h*oe+d*j,o[4]=l*H+u*re+h*ue+d*Z,o[8]=l*z+u*ie+h*ge+d*ne,o[12]=l*J+u*de+h*Ae+d*le,o[1]=m*F+_*te+v*oe+E*j,o[5]=m*H+_*re+v*ue+E*Z,o[9]=m*z+_*ie+v*ge+E*ne,o[13]=m*J+_*de+v*Ae+E*le,o[2]=w*F+x*te+A*oe+O*j,o[6]=w*H+x*re+A*ue+O*Z,o[10]=w*z+x*ie+A*ge+O*ne,o[14]=w*J+x*de+A*Ae+O*le,o[3]=k*F+N*te+D*oe+U*j,o[7]=k*H+N*re+D*ue+U*Z,o[11]=k*z+N*ie+D*ge+U*ne,o[15]=k*J+N*de+D*Ae+U*le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],l=e[1],u=e[5],h=e[9],d=e[13],m=e[2],_=e[6],v=e[10],E=e[14],w=e[3],x=e[7],A=e[11],O=e[15];return w*(+o*h*_-s*d*_-o*u*v+i*d*v+s*u*E-i*h*E)+x*(+t*h*E-t*d*v+o*l*v-s*l*E+s*d*m-o*h*m)+A*(+t*d*_-t*u*E-o*l*_+i*l*E+o*u*m-i*d*m)+O*(-s*u*m-t*h*_+t*u*v+s*l*_-i*l*v+i*h*m)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],l=e[4],u=e[5],h=e[6],d=e[7],m=e[8],_=e[9],v=e[10],E=e[11],w=e[12],x=e[13],A=e[14],O=e[15],k=_*A*d-x*v*d+x*h*E-u*A*E-_*h*O+u*v*O,N=w*v*d-m*A*d-w*h*E+l*A*E+m*h*O-l*v*O,D=m*x*d-w*_*d+w*u*E-l*x*E-m*u*O+l*_*O,U=w*_*h-m*x*h-w*u*v+l*x*v+m*u*A-l*_*A,F=t*k+i*N+s*D+o*U;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/F;return e[0]=k*H,e[1]=(x*v*o-_*A*o-x*s*E+i*A*E+_*s*O-i*v*O)*H,e[2]=(u*A*o-x*h*o+x*s*d-i*A*d-u*s*O+i*h*O)*H,e[3]=(_*h*o-u*v*o-_*s*d+i*v*d+u*s*E-i*h*E)*H,e[4]=N*H,e[5]=(m*A*o-w*v*o+w*s*E-t*A*E-m*s*O+t*v*O)*H,e[6]=(w*h*o-l*A*o-w*s*d+t*A*d+l*s*O-t*h*O)*H,e[7]=(l*v*o-m*h*o+m*s*d-t*v*d-l*s*E+t*h*E)*H,e[8]=D*H,e[9]=(w*_*o-m*x*o-w*i*E+t*x*E+m*i*O-t*_*O)*H,e[10]=(l*x*o-w*u*o+w*i*d-t*x*d-l*i*O+t*u*O)*H,e[11]=(m*u*o-l*_*o-m*i*d+t*_*d+l*i*E-t*u*E)*H,e[12]=U*H,e[13]=(m*x*s-w*_*s+w*i*v-t*x*v-m*i*A+t*_*A)*H,e[14]=(w*u*s-l*x*s-w*i*h+t*x*h+l*i*A-t*u*A)*H,e[15]=(l*_*s-m*u*s+m*i*h-t*_*h-l*i*v+t*u*v)*H,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,l=e.x,u=e.y,h=e.z,d=o*l,m=o*u;return this.set(d*l+i,d*u-s*h,d*h+s*u,0,d*u+s*h,m*u+i,m*h-s*l,0,d*h-s*u,m*h+s*l,o*h*h+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,l){return this.set(1,i,o,0,e,1,l,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,l=t._y,u=t._z,h=t._w,d=o+o,m=l+l,_=u+u,v=o*d,E=o*m,w=o*_,x=l*m,A=l*_,O=u*_,k=h*d,N=h*m,D=h*_,U=i.x,F=i.y,H=i.z;return s[0]=(1-(x+O))*U,s[1]=(E+D)*U,s[2]=(w-N)*U,s[3]=0,s[4]=(E-D)*F,s[5]=(1-(v+O))*F,s[6]=(A+k)*F,s[7]=0,s[8]=(w+N)*H,s[9]=(A-k)*H,s[10]=(1-(v+x))*H,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=w1.set(s[0],s[1],s[2]).length();const l=w1.set(s[4],s[5],s[6]).length(),u=w1.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],qm.copy(this);const h=1/o,d=1/l,m=1/u;return qm.elements[0]*=h,qm.elements[1]*=h,qm.elements[2]*=h,qm.elements[4]*=d,qm.elements[5]*=d,qm.elements[6]*=d,qm.elements[8]*=m,qm.elements[9]*=m,qm.elements[10]*=m,t.setFromRotationMatrix(qm),i.x=o,i.y=l,i.z=u,this}makePerspective(e,t,i,s,o,l){const u=this.elements,h=2*o/(t-e),d=2*o/(i-s),m=(t+e)/(t-e),_=(i+s)/(i-s),v=-(l+o)/(l-o),E=-2*l*o/(l-o);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=d,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=v,u[14]=E,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,s,o,l){const u=this.elements,h=1/(t-e),d=1/(i-s),m=1/(l-o),_=(t+e)*h,v=(i+s)*d,E=(l+o)*m;return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-_,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-v,u[2]=0,u[6]=0,u[10]=-2*m,u[14]=-E,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const w1=new Te,qm=new Mr,kpe=new Te(0,0,0),Ope=new Te(1,1,1),F_=new Te,EC=new Te,ff=new Te,gz=new Mr,_z=new Wo;class Eb{constructor(e=0,t=0,i=0,s=Eb.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],h=s[1],d=s[5],m=s[9],_=s[2],v=s[6],E=s[10];switch(t){case"XYZ":this._y=Math.asin(Uu(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-m,E),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Uu(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(u,E),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-_,o),this._z=0);break;case"ZXY":this._x=Math.asin(Uu(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-_,E),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Uu(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(v,E),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Uu(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-m,d),this._y=Math.atan2(-_,o)):(this._x=0,this._y=Math.atan2(u,E));break;case"XZY":this._z=Math.asin(-Uu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-m,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return gz.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gz,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _z.setFromEuler(this),this.setFromQuaternion(_z,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Eb.DefaultOrder="XYZ";Eb.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Jy{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Lpe=0;const vz=new Te,x1=new Wo,k0=new Mr,$C=new Te,w$=new Te,Dpe=new Te,Npe=new Wo,yz=new Te(1,0,0),bz=new Te(0,1,0),Tz=new Te(0,0,1),Bpe={type:"added"},Ez={type:"removed"};class ss extends Lf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lpe++}),this.uuid=xf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ss.DefaultUp.clone();const e=new Te,t=new Eb,i=new Wo,s=new Te(1,1,1);function o(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Mr},normalMatrix:{value:new tp}}),this.matrix=new Mr,this.matrixWorld=new Mr,this.matrixAutoUpdate=ss.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jy,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return x1.setFromAxisAngle(e,t),this.quaternion.multiply(x1),this}rotateOnWorldAxis(e,t){return x1.setFromAxisAngle(e,t),this.quaternion.premultiply(x1),this}rotateX(e){return this.rotateOnAxis(yz,e)}rotateY(e){return this.rotateOnAxis(bz,e)}rotateZ(e){return this.rotateOnAxis(Tz,e)}translateOnAxis(e,t){return vz.copy(e).applyQuaternion(this.quaternion),this.position.add(vz.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(yz,e)}translateY(e){return this.translateOnAxis(bz,e)}translateZ(e){return this.translateOnAxis(Tz,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(k0.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$C.copy(e):$C.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),w$.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?k0.lookAt(w$,$C,this.up):k0.lookAt($C,w$,this.up),this.quaternion.setFromRotationMatrix(k0),s&&(k0.extractRotation(s.matrixWorld),x1.setFromRotationMatrix(k0),this.quaternion.premultiply(x1.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Bpe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ez)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Ez)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),k0.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),k0.multiply(e.parent.matrixWorld)),e.applyMatrix4(k0),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w$,e,Dpe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w$,Npe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const s=this.children;for(let o=0,l=s.length;o<l;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function o(u,h){return u[h.uuid]===void 0&&(u[h.uuid]=h.toJSON(e)),h.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const h=u.shapes;if(Array.isArray(h))for(let d=0,m=h.length;d<m;d++){const _=h[d];o(e.shapes,_)}else o(e.shapes,h)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let h=0,d=this.material.length;h<d;h++)u.push(o(e.materials,this.material[h]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++){const h=this.animations[u];s.animations.push(o(e.animations,h))}}if(t){const u=l(e.geometries),h=l(e.materials),d=l(e.textures),m=l(e.images),_=l(e.shapes),v=l(e.skeletons),E=l(e.animations),w=l(e.nodes);u.length>0&&(i.geometries=u),h.length>0&&(i.materials=h),d.length>0&&(i.textures=d),m.length>0&&(i.images=m),_.length>0&&(i.shapes=_),v.length>0&&(i.skeletons=v),E.length>0&&(i.animations=E),w.length>0&&(i.nodes=w)}return i.object=s,i;function l(u){const h=[];for(const d in u){const m=u[d];delete m.metadata,h.push(m)}return h}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}ss.DefaultUp=new Te(0,1,0);ss.DefaultMatrixAutoUpdate=!0;const Zm=new Te,O0=new Te,U2=new Te,L0=new Te,C1=new Te,M1=new Te,$z=new Te,z2=new Te,H2=new Te,G2=new Te;class yf{constructor(e=new Te,t=new Te,i=new Te){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),Zm.subVectors(e,t),s.cross(Zm);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){Zm.subVectors(s,t),O0.subVectors(i,t),U2.subVectors(e,t);const l=Zm.dot(Zm),u=Zm.dot(O0),h=Zm.dot(U2),d=O0.dot(O0),m=O0.dot(U2),_=l*d-u*u;if(_===0)return o.set(-2,-1,-1);const v=1/_,E=(d*h-u*m)*v,w=(l*m-u*h)*v;return o.set(1-E-w,w,E)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,L0),L0.x>=0&&L0.y>=0&&L0.x+L0.y<=1}static getUV(e,t,i,s,o,l,u,h){return this.getBarycoord(e,t,i,s,L0),h.set(0,0),h.addScaledVector(o,L0.x),h.addScaledVector(l,L0.y),h.addScaledVector(u,L0.z),h}static isFrontFacing(e,t,i,s){return Zm.subVectors(i,t),O0.subVectors(e,t),Zm.cross(O0).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zm.subVectors(this.c,this.b),O0.subVectors(this.a,this.b),Zm.cross(O0).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yf.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yf.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,s,o){return yf.getUV(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return yf.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yf.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let l,u;C1.subVectors(s,i),M1.subVectors(o,i),z2.subVectors(e,i);const h=C1.dot(z2),d=M1.dot(z2);if(h<=0&&d<=0)return t.copy(i);H2.subVectors(e,s);const m=C1.dot(H2),_=M1.dot(H2);if(m>=0&&_<=m)return t.copy(s);const v=h*_-m*d;if(v<=0&&h>=0&&m<=0)return l=h/(h-m),t.copy(i).addScaledVector(C1,l);G2.subVectors(e,o);const E=C1.dot(G2),w=M1.dot(G2);if(w>=0&&E<=w)return t.copy(o);const x=E*d-h*w;if(x<=0&&d>=0&&w<=0)return u=d/(d-w),t.copy(i).addScaledVector(M1,u);const A=m*w-E*_;if(A<=0&&_-m>=0&&E-w>=0)return $z.subVectors(o,s),u=(_-m)/(_-m+(E-w)),t.copy(s).addScaledVector($z,u);const O=1/(A+x+v);return l=x*O,u=v*O,t.copy(i).addScaledVector(C1,l).addScaledVector(M1,u)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ppe=0;class Hc extends Lf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ppe++}),this.uuid=xf(),this.name="",this.type="Material",this.blending=K0,this.side=e0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=uR,this.blendDst=cR,this.blendEquation=Cy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=BA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=a7,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=GM,this.stencilZFail=GM,this.stencilZPass=GM,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===_9;continue}const s=this[t];if(s===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==K0&&(i.blending=this.blending),this.side!==e0&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function s(o){const l=[];for(const u in o){const h=o[u];delete h.metadata,l.push(h)}return l}if(t){const o=s(e.textures),l=s(e.images);o.length>0&&(i.textures=o),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class gg extends Hc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const uc=new Te,SC=new Lt;class Ms{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=ew,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),l=new _n),t[i++]=l.r,t[i++]=l.g,t[i++]=l.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),l=new Lt),t[i++]=l.x,t[i++]=l.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),l=new Te),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let s=0,o=e.length;s<o;s++){let l=e[s];l===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),l=new Mi),t[i++]=l.x,t[i++]=l.y,t[i++]=l.z,t[i++]=l.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)SC.fromBufferAttribute(this,t),SC.applyMatrix3(e),this.setXY(t,SC.x,SC.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)uc.fromBufferAttribute(this,t),uc.applyMatrix3(e),this.setXYZ(t,uc.x,uc.y,uc.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)uc.fromBufferAttribute(this,t),uc.applyMatrix4(e),this.setXYZ(t,uc.x,uc.y,uc.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)uc.fromBufferAttribute(this,t),uc.applyNormalMatrix(e),this.setXYZ(t,uc.x,uc.y,uc.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)uc.fromBufferAttribute(this,t),uc.transformDirection(e),this.setXYZ(t,uc.x,uc.y,uc.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ew&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class Fpe extends Ms{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Upe extends Ms{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class zpe extends Ms{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Hpe extends Ms{constructor(e,t,i){super(new Int16Array(e),t,i)}}class fP extends Ms{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Gpe extends Ms{constructor(e,t,i){super(new Int32Array(e),t,i)}}class mP extends Ms{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Wpe extends Ms{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class Pn extends Ms{constructor(e,t,i){super(new Float32Array(e),t,i)}}class Vpe extends Ms{constructor(e,t,i){super(new Float64Array(e),t,i)}}let jpe=0;const im=new Mr,W2=new ss,A1=new Te,mf=new mg,x$=new mg,ch=new Te;class kr extends Lf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:jpe++}),this.uuid=xf(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(c7(e)?mP:fP)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new tp().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return im.makeRotationFromQuaternion(e),this.applyMatrix4(im),this}rotateX(e){return im.makeRotationX(e),this.applyMatrix4(im),this}rotateY(e){return im.makeRotationY(e),this.applyMatrix4(im),this}rotateZ(e){return im.makeRotationZ(e),this.applyMatrix4(im),this}translate(e,t,i){return im.makeTranslation(e,t,i),this.applyMatrix4(im),this}scale(e,t,i){return im.makeScale(e,t,i),this.applyMatrix4(im),this}lookAt(e){return W2.lookAt(e),W2.updateMatrix(),this.applyMatrix4(W2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(A1).negate(),this.translate(A1.x,A1.y,A1.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Pn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new mg);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Te(-1/0,-1/0,-1/0),new Te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];mf.setFromBufferAttribute(o),this.morphTargetsRelative?(ch.addVectors(this.boundingBox.min,mf.min),this.boundingBox.expandByPoint(ch),ch.addVectors(this.boundingBox.max,mf.max),this.boundingBox.expandByPoint(ch)):(this.boundingBox.expandByPoint(mf.min),this.boundingBox.expandByPoint(mf.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Te,1/0);return}if(e){const i=this.boundingSphere.center;if(mf.setFromBufferAttribute(e),t)for(let o=0,l=t.length;o<l;o++){const u=t[o];x$.setFromBufferAttribute(u),this.morphTargetsRelative?(ch.addVectors(mf.min,x$.min),mf.expandByPoint(ch),ch.addVectors(mf.max,x$.max),mf.expandByPoint(ch)):(mf.expandByPoint(x$.min),mf.expandByPoint(x$.max))}mf.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)ch.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(ch));if(t)for(let o=0,l=t.length;o<l;o++){const u=t[o],h=this.morphTargetsRelative;for(let d=0,m=u.count;d<m;d++)ch.fromBufferAttribute(u,d),h&&(A1.fromBufferAttribute(e,d),ch.add(A1)),s=Math.max(s,i.distanceToSquared(ch))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,s=t.position.array,o=t.normal.array,l=t.uv.array,u=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ms(new Float32Array(4*u),4));const h=this.getAttribute("tangent").array,d=[],m=[];for(let te=0;te<u;te++)d[te]=new Te,m[te]=new Te;const _=new Te,v=new Te,E=new Te,w=new Lt,x=new Lt,A=new Lt,O=new Te,k=new Te;function N(te,re,ie){_.fromArray(s,te*3),v.fromArray(s,re*3),E.fromArray(s,ie*3),w.fromArray(l,te*2),x.fromArray(l,re*2),A.fromArray(l,ie*2),v.sub(_),E.sub(_),x.sub(w),A.sub(w);const de=1/(x.x*A.y-A.x*x.y);!isFinite(de)||(O.copy(v).multiplyScalar(A.y).addScaledVector(E,-x.y).multiplyScalar(de),k.copy(E).multiplyScalar(x.x).addScaledVector(v,-A.x).multiplyScalar(de),d[te].add(O),d[re].add(O),d[ie].add(O),m[te].add(k),m[re].add(k),m[ie].add(k))}let D=this.groups;D.length===0&&(D=[{start:0,count:i.length}]);for(let te=0,re=D.length;te<re;++te){const ie=D[te],de=ie.start,oe=ie.count;for(let ue=de,ge=de+oe;ue<ge;ue+=3)N(i[ue+0],i[ue+1],i[ue+2])}const U=new Te,F=new Te,H=new Te,z=new Te;function J(te){H.fromArray(o,te*3),z.copy(H);const re=d[te];U.copy(re),U.sub(H.multiplyScalar(H.dot(re))).normalize(),F.crossVectors(z,re);const ie=F.dot(m[te])<0?-1:1;h[te*4]=U.x,h[te*4+1]=U.y,h[te*4+2]=U.z,h[te*4+3]=ie}for(let te=0,re=D.length;te<re;++te){const ie=D[te],de=ie.start,oe=ie.count;for(let ue=de,ge=de+oe;ue<ge;ue+=3)J(i[ue+0]),J(i[ue+1]),J(i[ue+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ms(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,E=i.count;v<E;v++)i.setXYZ(v,0,0,0);const s=new Te,o=new Te,l=new Te,u=new Te,h=new Te,d=new Te,m=new Te,_=new Te;if(e)for(let v=0,E=e.count;v<E;v+=3){const w=e.getX(v+0),x=e.getX(v+1),A=e.getX(v+2);s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),l.fromBufferAttribute(t,A),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),u.fromBufferAttribute(i,w),h.fromBufferAttribute(i,x),d.fromBufferAttribute(i,A),u.add(m),h.add(m),d.add(m),i.setXYZ(w,u.x,u.y,u.z),i.setXYZ(x,h.x,h.y,h.z),i.setXYZ(A,d.x,d.y,d.z)}else for(let v=0,E=t.count;v<E;v+=3)s.fromBufferAttribute(t,v+0),o.fromBufferAttribute(t,v+1),l.fromBufferAttribute(t,v+2),m.subVectors(l,o),_.subVectors(s,o),m.cross(_),i.setXYZ(v+0,m.x,m.y,m.z),i.setXYZ(v+1,m.x,m.y,m.z),i.setXYZ(v+2,m.x,m.y,m.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(e.attributes[s]===void 0)continue;const o=i[s].array,l=e.attributes[s],u=l.array,h=l.itemSize*t,d=Math.min(u.length,o.length-h);for(let m=0,_=h;m<d;m++,_++)o[_]=u[m]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ch.fromBufferAttribute(e,t),ch.normalize(),e.setXYZ(t,ch.x,ch.y,ch.z)}toNonIndexed(){function e(u,h){const d=u.array,m=u.itemSize,_=u.normalized,v=new d.constructor(h.length*m);let E=0,w=0;for(let x=0,A=h.length;x<A;x++){u.isInterleavedBufferAttribute?E=h[x]*u.data.stride+u.offset:E=h[x]*m;for(let O=0;O<m;O++)v[w++]=d[E++]}return new Ms(v,m,_)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new kr,i=this.index.array,s=this.attributes;for(const u in s){const h=s[u],d=e(h,i);t.setAttribute(u,d)}const o=this.morphAttributes;for(const u in o){const h=[],d=o[u];for(let m=0,_=d.length;m<_;m++){const v=d[m],E=e(v,i);h.push(E)}t.morphAttributes[u]=h}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let u=0,h=l.length;u<h;u++){const d=l[u];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const d in h)h[d]!==void 0&&(e[d]=h[d]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const h in i){const d=i[h];e.data.attributes[h]=d.toJSON(e.data)}const s={};let o=!1;for(const h in this.morphAttributes){const d=this.morphAttributes[h],m=[];for(let _=0,v=d.length;_<v;_++){const E=d[_];m.push(E.toJSON(e.data))}m.length>0&&(s[h]=m,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const u=this.boundingSphere;return u!==null&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const d in s){const m=s[d];this.setAttribute(d,m.clone(t))}const o=e.morphAttributes;for(const d in o){const m=[],_=o[d];for(let v=0,E=_.length;v<E;v++)m.push(_[v].clone(t));this.morphAttributes[d]=m}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let d=0,m=l.length;d<m;d++){const _=l[d];this.addGroup(_.start,_.count,_.materialIndex)}const u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());const h=e.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Sz=new Mr,I1=new Lw,V2=new s0,U_=new Te,z_=new Te,H_=new Te,j2=new Te,X2=new Te,Y2=new Te,wC=new Te,xC=new Te,CC=new Te,MC=new Lt,AC=new Lt,IC=new Lt,K2=new Te,RC=new Te;class bn extends ss{constructor(e=new kr,t=new gg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;if(s===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),V2.copy(i.boundingSphere),V2.applyMatrix4(o),e.ray.intersectsSphere(V2)===!1)||(Sz.copy(o).invert(),I1.copy(e.ray).applyMatrix4(Sz),i.boundingBox!==null&&I1.intersectsBox(i.boundingBox)===!1))return;let l;const u=i.index,h=i.attributes.position,d=i.morphAttributes.position,m=i.morphTargetsRelative,_=i.attributes.uv,v=i.attributes.uv2,E=i.groups,w=i.drawRange;if(u!==null)if(Array.isArray(s))for(let x=0,A=E.length;x<A;x++){const O=E[x],k=s[O.materialIndex],N=Math.max(O.start,w.start),D=Math.min(u.count,Math.min(O.start+O.count,w.start+w.count));for(let U=N,F=D;U<F;U+=3){const H=u.getX(U),z=u.getX(U+1),J=u.getX(U+2);l=kC(this,k,e,I1,h,d,m,_,v,H,z,J),l&&(l.faceIndex=Math.floor(U/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const x=Math.max(0,w.start),A=Math.min(u.count,w.start+w.count);for(let O=x,k=A;O<k;O+=3){const N=u.getX(O),D=u.getX(O+1),U=u.getX(O+2);l=kC(this,s,e,I1,h,d,m,_,v,N,D,U),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}else if(h!==void 0)if(Array.isArray(s))for(let x=0,A=E.length;x<A;x++){const O=E[x],k=s[O.materialIndex],N=Math.max(O.start,w.start),D=Math.min(h.count,Math.min(O.start+O.count,w.start+w.count));for(let U=N,F=D;U<F;U+=3){const H=U,z=U+1,J=U+2;l=kC(this,k,e,I1,h,d,m,_,v,H,z,J),l&&(l.faceIndex=Math.floor(U/3),l.face.materialIndex=O.materialIndex,t.push(l))}}else{const x=Math.max(0,w.start),A=Math.min(h.count,w.start+w.count);for(let O=x,k=A;O<k;O+=3){const N=O,D=O+1,U=O+2;l=kC(this,s,e,I1,h,d,m,_,v,N,D,U),l&&(l.faceIndex=Math.floor(O/3),t.push(l))}}}}function Xpe(n,e,t,i,s,o,l,u){let h;if(e.side===zc?h=i.intersectTriangle(l,o,s,!0,u):h=i.intersectTriangle(s,o,l,e.side!==ep,u),h===null)return null;RC.copy(u),RC.applyMatrix4(n.matrixWorld);const d=t.ray.origin.distanceTo(RC);return d<t.near||d>t.far?null:{distance:d,point:RC.clone(),object:n}}function kC(n,e,t,i,s,o,l,u,h,d,m,_){U_.fromBufferAttribute(s,d),z_.fromBufferAttribute(s,m),H_.fromBufferAttribute(s,_);const v=n.morphTargetInfluences;if(o&&v){wC.set(0,0,0),xC.set(0,0,0),CC.set(0,0,0);for(let w=0,x=o.length;w<x;w++){const A=v[w],O=o[w];A!==0&&(j2.fromBufferAttribute(O,d),X2.fromBufferAttribute(O,m),Y2.fromBufferAttribute(O,_),l?(wC.addScaledVector(j2,A),xC.addScaledVector(X2,A),CC.addScaledVector(Y2,A)):(wC.addScaledVector(j2.sub(U_),A),xC.addScaledVector(X2.sub(z_),A),CC.addScaledVector(Y2.sub(H_),A)))}U_.add(wC),z_.add(xC),H_.add(CC)}n.isSkinnedMesh&&(n.boneTransform(d,U_),n.boneTransform(m,z_),n.boneTransform(_,H_));const E=Xpe(n,e,t,i,U_,z_,H_,K2);if(E){u&&(MC.fromBufferAttribute(u,d),AC.fromBufferAttribute(u,m),IC.fromBufferAttribute(u,_),E.uv=yf.getUV(K2,U_,z_,H_,MC,AC,IC,new Lt)),h&&(MC.fromBufferAttribute(h,d),AC.fromBufferAttribute(h,m),IC.fromBufferAttribute(h,_),E.uv2=yf.getUV(K2,U_,z_,H_,MC,AC,IC,new Lt));const w={a:d,b:m,c:_,normal:new Te,materialIndex:0};yf.getNormal(U_,z_,H_,w.normal),E.face=w}return E}class Na extends kr{constructor(e=1,t=1,i=1,s=1,o=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:l};const u=this;s=Math.floor(s),o=Math.floor(o),l=Math.floor(l);const h=[],d=[],m=[],_=[];let v=0,E=0;w("z","y","x",-1,-1,i,t,e,l,o,0),w("z","y","x",1,-1,i,t,-e,l,o,1),w("x","z","y",1,1,e,i,t,s,l,2),w("x","z","y",1,-1,e,i,-t,s,l,3),w("x","y","z",1,-1,e,t,i,s,o,4),w("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(h),this.setAttribute("position",new Pn(d,3)),this.setAttribute("normal",new Pn(m,3)),this.setAttribute("uv",new Pn(_,2));function w(x,A,O,k,N,D,U,F,H,z,J){const te=D/H,re=U/z,ie=D/2,de=U/2,oe=F/2,ue=H+1,ge=z+1;let Ae=0,j=0;const Z=new Te;for(let ne=0;ne<ge;ne++){const le=ne*re-de;for(let _e=0;_e<ue;_e++){const Oe=_e*te-ie;Z[x]=Oe*k,Z[A]=le*N,Z[O]=oe,d.push(Z.x,Z.y,Z.z),Z[x]=0,Z[A]=0,Z[O]=F>0?1:-1,m.push(Z.x,Z.y,Z.z),_.push(_e/H),_.push(1-ne/z),Ae+=1}}for(let ne=0;ne<z;ne++)for(let le=0;le<H;le++){const _e=v+le+ue*ne,Oe=v+le+ue*(ne+1),xe=v+(le+1)+ue*(ne+1),Xe=v+(le+1)+ue*ne;h.push(_e,Oe,Xe),h.push(Oe,xe,Xe),j+=6}u.addGroup(E,j,J),E+=j,v+=Ae}}static fromJSON(e){return new Na(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function BT(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function $d(n){const e={};for(let t=0;t<n.length;t++){const i=BT(n[t]);for(const s in i)e[s]=i[s]}return e}function Ype(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const Dw={clone:BT,merge:$d};var Kpe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Jpe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ph extends Hc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Kpe,this.fragmentShader=Jpe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=BT(e.uniforms),this.uniformsGroups=Ype(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class uE extends ss{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Mr,this.projectionMatrix=new Mr,this.projectionMatrixInverse=new Mr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Io extends uE{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=tw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Yy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return tw*2*Math.atan(Math.tan(Yy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,s,o,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Yy*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const l=this.view;if(this.view!==null&&this.view.enabled){const h=l.fullWidth,d=l.fullHeight;o+=l.offsetX*s/h,t-=l.offsetY*i/d,s*=l.width/h,i*=l.height/d}const u=this.filmOffset;u!==0&&(o+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const R1=90,k1=1;class d7 extends ss{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const s=new Io(R1,k1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Te(1,0,0)),this.add(s);const o=new Io(R1,k1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Te(-1,0,0)),this.add(o);const l=new Io(R1,k1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new Te(0,1,0)),this.add(l);const u=new Io(R1,k1,e,t);u.layers=this.layers,u.up.set(0,0,-1),u.lookAt(new Te(0,-1,0)),this.add(u);const h=new Io(R1,k1,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Te(0,0,1)),this.add(h);const d=new Io(R1,k1,e,t);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Te(0,0,-1)),this.add(d)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[s,o,l,u,h,d]=this.children,m=e.getRenderTarget(),_=e.toneMapping,v=e.xr.enabled;e.toneMapping=hg,e.xr.enabled=!1;const E=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,s),e.setRenderTarget(i,1),e.render(t,o),e.setRenderTarget(i,2),e.render(t,l),e.setRenderTarget(i,3),e.render(t,u),e.setRenderTarget(i,4),e.render(t,h),i.texture.generateMipmaps=E,e.setRenderTarget(i,5),e.render(t,d),e.setRenderTarget(m),e.toneMapping=_,e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Nw extends Bl{constructor(e,t,i,s,o,l,u,h,d,m){e=e!==void 0?e:[],t=t!==void 0?t:yv,super(e,t,i,s,o,l,u,h,d,m),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class p7 extends lu{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new Nw(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Vo}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new Na(5,5,5),o=new ph({name:"CubemapFromEquirect",uniforms:BT(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:zc,blending:sp});o.uniforms.tEquirect.value=t;const l=new bn(s,o),u=t.minFilter;return t.minFilter===bb&&(t.minFilter=Vo),new d7(1,10,this).update(e,l),t.minFilter=u,l.geometry.dispose(),l.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,s);e.setRenderTarget(o)}}const J2=new Te,Qpe=new Te,qpe=new tp;class F0{constructor(e=new Te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=J2.subVectors(i,t).cross(Qpe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(J2),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(i).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||qpe.getNormalMatrix(e),s=this.coplanarPoint(J2).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const O1=new s0,OC=new Te;class fR{constructor(e=new F0,t=new F0,i=new F0,s=new F0,o=new F0,l=new F0){this.planes=[e,t,i,s,o,l]}set(e,t,i,s,o,l){const u=this.planes;return u[0].copy(e),u[1].copy(t),u[2].copy(i),u[3].copy(s),u[4].copy(o),u[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],h=i[4],d=i[5],m=i[6],_=i[7],v=i[8],E=i[9],w=i[10],x=i[11],A=i[12],O=i[13],k=i[14],N=i[15];return t[0].setComponents(u-s,_-h,x-v,N-A).normalize(),t[1].setComponents(u+s,_+h,x+v,N+A).normalize(),t[2].setComponents(u+o,_+d,x+E,N+O).normalize(),t[3].setComponents(u-o,_-d,x-E,N-O).normalize(),t[4].setComponents(u-l,_-m,x-w,N-k).normalize(),t[5].setComponents(u+l,_+m,x+w,N+k).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),O1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(O1)}intersectsSprite(e){return O1.center.set(0,0,0),O1.radius=.7071067811865476,O1.applyMatrix4(e.matrixWorld),this.intersectsSphere(O1)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(OC.x=s.normal.x>0?e.max.x:e.min.x,OC.y=s.normal.y>0?e.max.y:e.min.y,OC.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(OC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function f7(){let n=null,e=!1,t=null,i=null;function s(o,l){t(o,l),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function Zpe(n,e){const t=e.isWebGL2,i=new WeakMap;function s(d,m){const _=d.array,v=d.usage,E=n.createBuffer();n.bindBuffer(m,E),n.bufferData(m,_,v),d.onUploadCallback();let w;if(_ instanceof Float32Array)w=5126;else if(_ instanceof Uint16Array)if(d.isFloat16BufferAttribute)if(t)w=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=5123;else if(_ instanceof Int16Array)w=5122;else if(_ instanceof Uint32Array)w=5125;else if(_ instanceof Int32Array)w=5124;else if(_ instanceof Int8Array)w=5120;else if(_ instanceof Uint8Array)w=5121;else if(_ instanceof Uint8ClampedArray)w=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_);return{buffer:E,type:w,bytesPerElement:_.BYTES_PER_ELEMENT,version:d.version}}function o(d,m,_){const v=m.array,E=m.updateRange;n.bindBuffer(_,d),E.count===-1?n.bufferSubData(_,0,v):(t?n.bufferSubData(_,E.offset*v.BYTES_PER_ELEMENT,v,E.offset,E.count):n.bufferSubData(_,E.offset*v.BYTES_PER_ELEMENT,v.subarray(E.offset,E.offset+E.count)),E.count=-1)}function l(d){return d.isInterleavedBufferAttribute&&(d=d.data),i.get(d)}function u(d){d.isInterleavedBufferAttribute&&(d=d.data);const m=i.get(d);m&&(n.deleteBuffer(m.buffer),i.delete(d))}function h(d,m){if(d.isGLBufferAttribute){const v=i.get(d);(!v||v.version<d.version)&&i.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version});return}d.isInterleavedBufferAttribute&&(d=d.data);const _=i.get(d);_===void 0?i.set(d,s(d,m)):_.version<d.version&&(o(_.buffer,d,m),_.version=d.version)}return{get:l,remove:u,update:h}}class pg extends kr{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,l=t/2,u=Math.floor(i),h=Math.floor(s),d=u+1,m=h+1,_=e/u,v=t/h,E=[],w=[],x=[],A=[];for(let O=0;O<m;O++){const k=O*v-l;for(let N=0;N<d;N++){const D=N*_-o;w.push(D,-k,0),x.push(0,0,1),A.push(N/u),A.push(1-O/h)}}for(let O=0;O<h;O++)for(let k=0;k<u;k++){const N=k+d*O,D=k+d*(O+1),U=k+1+d*(O+1),F=k+1+d*O;E.push(N,D,F),E.push(D,U,F)}this.setIndex(E),this.setAttribute("position",new Pn(w,3)),this.setAttribute("normal",new Pn(x,3)),this.setAttribute("uv",new Pn(A,2))}static fromJSON(e){return new pg(e.width,e.height,e.widthSegments,e.heightSegments)}}var efe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,tfe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nfe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,rfe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ife=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sfe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ofe="vec3 transformed = vec3( position );",afe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lfe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,ufe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cfe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,hfe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pfe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ffe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mfe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gfe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,_fe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,vfe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,yfe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,bfe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Tfe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Efe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$fe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Sfe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wfe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xfe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Cfe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Mfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Afe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ife=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Rfe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kfe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ofe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Lfe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Dfe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Nfe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Bfe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Pfe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Ffe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Ufe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,zfe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Hfe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Gfe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wfe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Vfe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,jfe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Xfe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Yfe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Kfe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Jfe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Qfe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,qfe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Zfe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eme=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,tme=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,nme=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rme=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ime=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,sme=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ome=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ame=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,lme=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,ume=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cme=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,hme=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,dme=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,pme=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fme=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mme=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gme=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_me=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,vme=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yme=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,bme=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Tme=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Eme=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$me=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Sme=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,wme=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,xme=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Cme=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Mme=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Ame=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Ime=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Rme=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kme=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Ome=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Lme=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Dme=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Nme=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Bme=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Pme=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Fme=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Ume=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,zme=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Hme=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Gme=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Wme=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Vme=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,jme=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Xme=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Yme=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Kme=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Jme=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Qme=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,qme=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Zme=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ege=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tge=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nge=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,rge=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ige=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sge=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,oge=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,age=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lge=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uge=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,cge=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hge=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dge=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pge=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fge=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mge=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gge=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,_ge=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vge=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yge=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bge=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tge=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ege=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ge=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Sge=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wge=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xge=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Cge=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Mge=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bi={alphamap_fragment:efe,alphamap_pars_fragment:tfe,alphatest_fragment:nfe,alphatest_pars_fragment:rfe,aomap_fragment:ife,aomap_pars_fragment:sfe,begin_vertex:ofe,beginnormal_vertex:afe,bsdfs:lfe,iridescence_fragment:ufe,bumpmap_pars_fragment:cfe,clipping_planes_fragment:hfe,clipping_planes_pars_fragment:dfe,clipping_planes_pars_vertex:pfe,clipping_planes_vertex:ffe,color_fragment:mfe,color_pars_fragment:gfe,color_pars_vertex:_fe,color_vertex:vfe,common:yfe,cube_uv_reflection_fragment:bfe,defaultnormal_vertex:Tfe,displacementmap_pars_vertex:Efe,displacementmap_vertex:$fe,emissivemap_fragment:Sfe,emissivemap_pars_fragment:wfe,encodings_fragment:xfe,encodings_pars_fragment:Cfe,envmap_fragment:Mfe,envmap_common_pars_fragment:Afe,envmap_pars_fragment:Ife,envmap_pars_vertex:Rfe,envmap_physical_pars_fragment:Hfe,envmap_vertex:kfe,fog_vertex:Ofe,fog_pars_vertex:Lfe,fog_fragment:Dfe,fog_pars_fragment:Nfe,gradientmap_pars_fragment:Bfe,lightmap_fragment:Pfe,lightmap_pars_fragment:Ffe,lights_lambert_vertex:Ufe,lights_pars_begin:zfe,lights_toon_fragment:Gfe,lights_toon_pars_fragment:Wfe,lights_phong_fragment:Vfe,lights_phong_pars_fragment:jfe,lights_physical_fragment:Xfe,lights_physical_pars_fragment:Yfe,lights_fragment_begin:Kfe,lights_fragment_maps:Jfe,lights_fragment_end:Qfe,logdepthbuf_fragment:qfe,logdepthbuf_pars_fragment:Zfe,logdepthbuf_pars_vertex:eme,logdepthbuf_vertex:tme,map_fragment:nme,map_pars_fragment:rme,map_particle_fragment:ime,map_particle_pars_fragment:sme,metalnessmap_fragment:ome,metalnessmap_pars_fragment:ame,morphcolor_vertex:lme,morphnormal_vertex:ume,morphtarget_pars_vertex:cme,morphtarget_vertex:hme,normal_fragment_begin:dme,normal_fragment_maps:pme,normal_pars_fragment:fme,normal_pars_vertex:mme,normal_vertex:gme,normalmap_pars_fragment:_me,clearcoat_normal_fragment_begin:vme,clearcoat_normal_fragment_maps:yme,clearcoat_pars_fragment:bme,iridescence_pars_fragment:Tme,output_fragment:Eme,packing:$me,premultiplied_alpha_fragment:Sme,project_vertex:wme,dithering_fragment:xme,dithering_pars_fragment:Cme,roughnessmap_fragment:Mme,roughnessmap_pars_fragment:Ame,shadowmap_pars_fragment:Ime,shadowmap_pars_vertex:Rme,shadowmap_vertex:kme,shadowmask_pars_fragment:Ome,skinbase_vertex:Lme,skinning_pars_vertex:Dme,skinning_vertex:Nme,skinnormal_vertex:Bme,specularmap_fragment:Pme,specularmap_pars_fragment:Fme,tonemapping_fragment:Ume,tonemapping_pars_fragment:zme,transmission_fragment:Hme,transmission_pars_fragment:Gme,uv_pars_fragment:Wme,uv_pars_vertex:Vme,uv_vertex:jme,uv2_pars_fragment:Xme,uv2_pars_vertex:Yme,uv2_vertex:Kme,worldpos_vertex:Jme,background_vert:Qme,background_frag:qme,cube_vert:Zme,cube_frag:ege,depth_vert:tge,depth_frag:nge,distanceRGBA_vert:rge,distanceRGBA_frag:ige,equirect_vert:sge,equirect_frag:oge,linedashed_vert:age,linedashed_frag:lge,meshbasic_vert:uge,meshbasic_frag:cge,meshlambert_vert:hge,meshlambert_frag:dge,meshmatcap_vert:pge,meshmatcap_frag:fge,meshnormal_vert:mge,meshnormal_frag:gge,meshphong_vert:_ge,meshphong_frag:vge,meshphysical_vert:yge,meshphysical_frag:bge,meshtoon_vert:Tge,meshtoon_frag:Ege,points_vert:$ge,points_frag:Sge,shadow_vert:wge,shadow_frag:xge,sprite_vert:Cge,sprite_frag:Mge},Sn={common:{diffuse:{value:new _n(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new tp},uv2Transform:{value:new tp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _n(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tp}},sprite:{diffuse:{value:new _n(16777215)},opacity:{value:1},center:{value:new Lt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new tp}}},qd={basic:{uniforms:$d([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.fog]),vertexShader:bi.meshbasic_vert,fragmentShader:bi.meshbasic_frag},lambert:{uniforms:$d([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)}}]),vertexShader:bi.meshlambert_vert,fragmentShader:bi.meshlambert_frag},phong:{uniforms:$d([Sn.common,Sn.specularmap,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)},specular:{value:new _n(1118481)},shininess:{value:30}}]),vertexShader:bi.meshphong_vert,fragmentShader:bi.meshphong_frag},standard:{uniforms:$d([Sn.common,Sn.envmap,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.roughnessmap,Sn.metalnessmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag},toon:{uniforms:$d([Sn.common,Sn.aomap,Sn.lightmap,Sn.emissivemap,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.gradientmap,Sn.fog,Sn.lights,{emissive:{value:new _n(0)}}]),vertexShader:bi.meshtoon_vert,fragmentShader:bi.meshtoon_frag},matcap:{uniforms:$d([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,Sn.fog,{matcap:{value:null}}]),vertexShader:bi.meshmatcap_vert,fragmentShader:bi.meshmatcap_frag},points:{uniforms:$d([Sn.points,Sn.fog]),vertexShader:bi.points_vert,fragmentShader:bi.points_frag},dashed:{uniforms:$d([Sn.common,Sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bi.linedashed_vert,fragmentShader:bi.linedashed_frag},depth:{uniforms:$d([Sn.common,Sn.displacementmap]),vertexShader:bi.depth_vert,fragmentShader:bi.depth_frag},normal:{uniforms:$d([Sn.common,Sn.bumpmap,Sn.normalmap,Sn.displacementmap,{opacity:{value:1}}]),vertexShader:bi.meshnormal_vert,fragmentShader:bi.meshnormal_frag},sprite:{uniforms:$d([Sn.sprite,Sn.fog]),vertexShader:bi.sprite_vert,fragmentShader:bi.sprite_frag},background:{uniforms:{uvTransform:{value:new tp},t2D:{value:null}},vertexShader:bi.background_vert,fragmentShader:bi.background_frag},cube:{uniforms:$d([Sn.envmap,{opacity:{value:1}}]),vertexShader:bi.cube_vert,fragmentShader:bi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bi.equirect_vert,fragmentShader:bi.equirect_frag},distanceRGBA:{uniforms:$d([Sn.common,Sn.displacementmap,{referencePosition:{value:new Te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bi.distanceRGBA_vert,fragmentShader:bi.distanceRGBA_frag},shadow:{uniforms:$d([Sn.lights,Sn.fog,{color:{value:new _n(0)},opacity:{value:1}}]),vertexShader:bi.shadow_vert,fragmentShader:bi.shadow_frag}};qd.physical={uniforms:$d([qd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Lt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _n(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _n(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _n(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag};function Age(n,e,t,i,s,o){const l=new _n(0);let u=s===!0?0:1,h,d,m=null,_=0,v=null;function E(x,A){let O=!1,k=A.isScene===!0?A.background:null;k&&k.isTexture&&(k=e.get(k));const N=n.xr,D=N.getSession&&N.getSession();D&&D.environmentBlendMode==="additive"&&(k=null),k===null?w(l,u):k&&k.isColor&&(w(k,1),O=!0),(n.autoClear||O)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),k&&(k.isCubeTexture||k.mapping===lE)?(d===void 0&&(d=new bn(new Na(1,1,1),new ph({name:"BackgroundCubeMaterial",uniforms:BT(qd.cube.uniforms),vertexShader:qd.cube.vertexShader,fragmentShader:qd.cube.fragmentShader,side:zc,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(U,F,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=k,d.material.uniforms.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,(m!==k||_!==k.version||v!==n.toneMapping)&&(d.material.needsUpdate=!0,m=k,_=k.version,v=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):k&&k.isTexture&&(h===void 0&&(h=new bn(new pg(2,2),new ph({name:"BackgroundMaterial",uniforms:BT(qd.background.uniforms),vertexShader:qd.background.vertexShader,fragmentShader:qd.background.fragmentShader,side:e0,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=k,k.matrixAutoUpdate===!0&&k.updateMatrix(),h.material.uniforms.uvTransform.value.copy(k.matrix),(m!==k||_!==k.version||v!==n.toneMapping)&&(h.material.needsUpdate=!0,m=k,_=k.version,v=n.toneMapping),h.layers.enableAll(),x.unshift(h,h.geometry,h.material,0,0,null))}function w(x,A){t.buffers.color.setClear(x.r,x.g,x.b,A,o)}return{getClearColor:function(){return l},setClearColor:function(x,A=1){l.set(x),u=A,w(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(x){u=x,w(l,u)},render:E}}function Ige(n,e,t,i){const s=n.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),l=i.isWebGL2||o!==null,u={},h=A(null);let d=h,m=!1;function _(oe,ue,ge,Ae,j){let Z=!1;if(l){const ne=x(Ae,ge,ue);d!==ne&&(d=ne,E(d.object)),Z=O(oe,Ae,ge,j),Z&&k(oe,Ae,ge,j)}else{const ne=ue.wireframe===!0;(d.geometry!==Ae.id||d.program!==ge.id||d.wireframe!==ne)&&(d.geometry=Ae.id,d.program=ge.id,d.wireframe=ne,Z=!0)}j!==null&&t.update(j,34963),(Z||m)&&(m=!1,z(oe,ue,ge,Ae),j!==null&&n.bindBuffer(34963,t.get(j).buffer))}function v(){return i.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function E(oe){return i.isWebGL2?n.bindVertexArray(oe):o.bindVertexArrayOES(oe)}function w(oe){return i.isWebGL2?n.deleteVertexArray(oe):o.deleteVertexArrayOES(oe)}function x(oe,ue,ge){const Ae=ge.wireframe===!0;let j=u[oe.id];j===void 0&&(j={},u[oe.id]=j);let Z=j[ue.id];Z===void 0&&(Z={},j[ue.id]=Z);let ne=Z[Ae];return ne===void 0&&(ne=A(v()),Z[Ae]=ne),ne}function A(oe){const ue=[],ge=[],Ae=[];for(let j=0;j<s;j++)ue[j]=0,ge[j]=0,Ae[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ue,enabledAttributes:ge,attributeDivisors:Ae,object:oe,attributes:{},index:null}}function O(oe,ue,ge,Ae){const j=d.attributes,Z=ue.attributes;let ne=0;const le=ge.getAttributes();for(const _e in le)if(le[_e].location>=0){const Oe=j[_e];let xe=Z[_e];if(xe===void 0&&(_e==="instanceMatrix"&&oe.instanceMatrix&&(xe=oe.instanceMatrix),_e==="instanceColor"&&oe.instanceColor&&(xe=oe.instanceColor)),Oe===void 0||Oe.attribute!==xe||xe&&Oe.data!==xe.data)return!0;ne++}return d.attributesNum!==ne||d.index!==Ae}function k(oe,ue,ge,Ae){const j={},Z=ue.attributes;let ne=0;const le=ge.getAttributes();for(const _e in le)if(le[_e].location>=0){let Oe=Z[_e];Oe===void 0&&(_e==="instanceMatrix"&&oe.instanceMatrix&&(Oe=oe.instanceMatrix),_e==="instanceColor"&&oe.instanceColor&&(Oe=oe.instanceColor));const xe={};xe.attribute=Oe,Oe&&Oe.data&&(xe.data=Oe.data),j[_e]=xe,ne++}d.attributes=j,d.attributesNum=ne,d.index=Ae}function N(){const oe=d.newAttributes;for(let ue=0,ge=oe.length;ue<ge;ue++)oe[ue]=0}function D(oe){U(oe,0)}function U(oe,ue){const ge=d.newAttributes,Ae=d.enabledAttributes,j=d.attributeDivisors;ge[oe]=1,Ae[oe]===0&&(n.enableVertexAttribArray(oe),Ae[oe]=1),j[oe]!==ue&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](oe,ue),j[oe]=ue)}function F(){const oe=d.newAttributes,ue=d.enabledAttributes;for(let ge=0,Ae=ue.length;ge<Ae;ge++)ue[ge]!==oe[ge]&&(n.disableVertexAttribArray(ge),ue[ge]=0)}function H(oe,ue,ge,Ae,j,Z){i.isWebGL2===!0&&(ge===5124||ge===5125)?n.vertexAttribIPointer(oe,ue,ge,j,Z):n.vertexAttribPointer(oe,ue,ge,Ae,j,Z)}function z(oe,ue,ge,Ae){if(i.isWebGL2===!1&&(oe.isInstancedMesh||Ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;N();const j=Ae.attributes,Z=ge.getAttributes(),ne=ue.defaultAttributeValues;for(const le in Z){const _e=Z[le];if(_e.location>=0){let Oe=j[le];if(Oe===void 0&&(le==="instanceMatrix"&&oe.instanceMatrix&&(Oe=oe.instanceMatrix),le==="instanceColor"&&oe.instanceColor&&(Oe=oe.instanceColor)),Oe!==void 0){const xe=Oe.normalized,Xe=Oe.itemSize,Re=t.get(Oe);if(Re===void 0)continue;const Je=Re.buffer,et=Re.type,at=Re.bytesPerElement;if(Oe.isInterleavedBufferAttribute){const Qe=Oe.data,De=Qe.stride,Se=Oe.offset;if(Qe.isInstancedInterleavedBuffer){for(let Pe=0;Pe<_e.locationSize;Pe++)U(_e.location+Pe,Qe.meshPerAttribute);oe.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=Qe.meshPerAttribute*Qe.count)}else for(let Pe=0;Pe<_e.locationSize;Pe++)D(_e.location+Pe);n.bindBuffer(34962,Je);for(let Pe=0;Pe<_e.locationSize;Pe++)H(_e.location+Pe,Xe/_e.locationSize,et,xe,De*at,(Se+Xe/_e.locationSize*Pe)*at)}else{if(Oe.isInstancedBufferAttribute){for(let Qe=0;Qe<_e.locationSize;Qe++)U(_e.location+Qe,Oe.meshPerAttribute);oe.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let Qe=0;Qe<_e.locationSize;Qe++)D(_e.location+Qe);n.bindBuffer(34962,Je);for(let Qe=0;Qe<_e.locationSize;Qe++)H(_e.location+Qe,Xe/_e.locationSize,et,xe,Xe*at,Xe/_e.locationSize*Qe*at)}}else if(ne!==void 0){const xe=ne[le];if(xe!==void 0)switch(xe.length){case 2:n.vertexAttrib2fv(_e.location,xe);break;case 3:n.vertexAttrib3fv(_e.location,xe);break;case 4:n.vertexAttrib4fv(_e.location,xe);break;default:n.vertexAttrib1fv(_e.location,xe)}}}}F()}function J(){ie();for(const oe in u){const ue=u[oe];for(const ge in ue){const Ae=ue[ge];for(const j in Ae)w(Ae[j].object),delete Ae[j];delete ue[ge]}delete u[oe]}}function te(oe){if(u[oe.id]===void 0)return;const ue=u[oe.id];for(const ge in ue){const Ae=ue[ge];for(const j in Ae)w(Ae[j].object),delete Ae[j];delete ue[ge]}delete u[oe.id]}function re(oe){for(const ue in u){const ge=u[ue];if(ge[oe.id]===void 0)continue;const Ae=ge[oe.id];for(const j in Ae)w(Ae[j].object),delete Ae[j];delete ge[oe.id]}}function ie(){de(),m=!0,d!==h&&(d=h,E(d.object))}function de(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:_,reset:ie,resetDefaultState:de,dispose:J,releaseStatesOfGeometry:te,releaseStatesOfProgram:re,initAttributes:N,enableAttribute:D,disableUnusedAttributes:F}}function Rge(n,e,t,i){const s=i.isWebGL2;let o;function l(d){o=d}function u(d,m){n.drawArrays(o,d,m),t.update(m,o,1)}function h(d,m,_){if(_===0)return;let v,E;if(s)v=n,E="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),E="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[E](o,d,m,_),t.update(m,o,_)}this.setMode=l,this.render=u,this.renderInstances=h}function kge(n,e,t){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const H=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(H){if(H==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const l=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let u=t.precision!==void 0?t.precision:"highp";const h=o(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=l||e.has("WEBGL_draw_buffers"),m=t.logarithmicDepthBuffer===!0,_=n.getParameter(34930),v=n.getParameter(35660),E=n.getParameter(3379),w=n.getParameter(34076),x=n.getParameter(34921),A=n.getParameter(36347),O=n.getParameter(36348),k=n.getParameter(36349),N=v>0,D=l||e.has("OES_texture_float"),U=N&&D,F=l?n.getParameter(36183):0;return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:s,getMaxPrecision:o,precision:u,logarithmicDepthBuffer:m,maxTextures:_,maxVertexTextures:v,maxTextureSize:E,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:A,maxVaryings:O,maxFragmentUniforms:k,vertexTextures:N,floatFragmentTextures:D,floatVertexTextures:U,maxSamples:F}}function Oge(n){const e=this;let t=null,i=0,s=!1,o=!1;const l=new F0,u=new tp,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(_,v,E){const w=_.length!==0||v||i!==0||s;return s=v,t=m(_,E,0),i=_.length,w},this.beginShadows=function(){o=!0,m(null)},this.endShadows=function(){o=!1,d()},this.setState=function(_,v,E){const w=_.clippingPlanes,x=_.clipIntersection,A=_.clipShadows,O=n.get(_);if(!s||w===null||w.length===0||o&&!A)o?m(null):d();else{const k=o?0:i,N=k*4;let D=O.clippingState||null;h.value=D,D=m(w,v,N,E);for(let U=0;U!==N;++U)D[U]=t[U];O.clippingState=D,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=k}};function d(){h.value!==t&&(h.value=t,h.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function m(_,v,E,w){const x=_!==null?_.length:0;let A=null;if(x!==0){if(A=h.value,w!==!0||A===null){const O=E+x*4,k=v.matrixWorldInverse;u.getNormalMatrix(k),(A===null||A.length<O)&&(A=new Float32Array(O));for(let N=0,D=E;N!==x;++N,D+=4)l.copy(_[N]).applyMatrix4(k,u),l.normal.toArray(A,D),A[D+3]=l.constant}h.value=A,h.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,A}}function Lge(n){let e=new WeakMap;function t(l,u){return u===YS?l.mapping=yv:u===KS&&(l.mapping=bv),l}function i(l){if(l&&l.isTexture&&l.isRenderTargetTexture===!1){const u=l.mapping;if(u===YS||u===KS)if(e.has(l)){const h=e.get(l).texture;return t(h,l.mapping)}else{const h=l.image;if(h&&h.height>0){const d=new p7(h.height/2);return d.fromEquirectangularTexture(n,l),e.set(l,d),l.addEventListener("dispose",s),t(d.texture,l.mapping)}else return null}}return l}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class Jg extends uE{constructor(e=-1,t=1,i=1,s=-1,o=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,l=i+e,u=s+t,h=s-t;if(this.view!==null&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,l=o+d*this.view.width,u-=m*this.view.offsetY,h=u-m*this.view.height}this.projectionMatrix.makeOrthographic(o,l,u,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const sT=4,wz=[.125,.215,.35,.446,.526,.582],My=20,Q2=new Jg,xz=new _n;let q2=null;const Sy=(1+Math.sqrt(5))/2,L1=1/Sy,Cz=[new Te(1,1,1),new Te(-1,1,1),new Te(1,1,-1),new Te(-1,1,-1),new Te(0,Sy,L1),new Te(0,Sy,-L1),new Te(L1,0,Sy),new Te(-L1,0,Sy),new Te(Sy,L1,0),new Te(-Sy,L1,0)];class PD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){q2=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Iz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Az(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(q2),e.scissorTest=!1,LC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===yv||e.mapping===bv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),q2=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Vo,minFilter:Vo,generateMipmaps:!1,type:ub,format:Bp,encoding:Tm,depthBuffer:!1},s=Mz(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mz(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Dge(o)),this._blurMaterial=Nge(o,e,t)}return s}_compileMaterial(e){const t=new bn(this._lodPlanes[0],e);this._renderer.compile(t,Q2)}_sceneToCubeUV(e,t,i,s){const o=new Io(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,m=h.toneMapping;h.getClearColor(xz),h.toneMapping=hg,h.autoClear=!1;const _=new gg({name:"PMREM.Background",side:zc,depthWrite:!1,depthTest:!1}),v=new bn(new Na,_);let E=!1;const w=e.background;w?w.isColor&&(_.color.copy(w),e.background=null,E=!0):(_.color.copy(xz),E=!0);for(let x=0;x<6;x++){const A=x%3;A===0?(o.up.set(0,l[x],0),o.lookAt(u[x],0,0)):A===1?(o.up.set(0,0,l[x]),o.lookAt(0,u[x],0)):(o.up.set(0,l[x],0),o.lookAt(0,0,u[x]));const O=this._cubeSize;LC(s,A*O,x>2?O:0,O,O),h.setRenderTarget(s),E&&h.render(v,o),h.render(e,o)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=m,h.autoClear=d,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===yv||e.mapping===bv;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Iz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Az());const o=s?this._cubemapMaterial:this._equirectMaterial,l=new bn(this._lodPlanes[0],o),u=o.uniforms;u.envMap.value=e;const h=this._cubeSize;LC(t,0,0,3*h,2*h),i.setRenderTarget(t),i.render(l,Q2)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Cz[(s-1)%Cz.length];this._blur(e,s-1,s,o,l)}t.autoClear=i}_blur(e,t,i,s,o){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,s,"latitudinal",o),this._halfBlur(l,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,l,u){const h=this._renderer,d=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const m=3,_=new bn(this._lodPlanes[s],d),v=d.uniforms,E=this._sizeLods[i]-1,w=isFinite(o)?Math.PI/(2*E):2*Math.PI/(2*My-1),x=o/w,A=isFinite(o)?1+Math.floor(m*x):My;A>My&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${My}`);const O=[];let k=0;for(let H=0;H<My;++H){const z=H/x,J=Math.exp(-z*z/2);O.push(J),H===0?k+=J:H<A&&(k+=2*J)}for(let H=0;H<O.length;H++)O[H]=O[H]/k;v.envMap.value=e.texture,v.samples.value=A,v.weights.value=O,v.latitudinal.value=l==="latitudinal",u&&(v.poleAxis.value=u);const{_lodMax:N}=this;v.dTheta.value=w,v.mipInt.value=N-i;const D=this._sizeLods[s],U=3*D*(s>N-sT?s-N+sT:0),F=4*(this._cubeSize-D);LC(t,U,F,3*D,2*D),h.setRenderTarget(t),h.render(_,Q2)}}function Dge(n){const e=[],t=[],i=[];let s=n;const o=n-sT+1+wz.length;for(let l=0;l<o;l++){const u=Math.pow(2,s);t.push(u);let h=1/u;l>n-sT?h=wz[l-n+sT-1]:l===0&&(h=0),i.push(h);const d=1/(u-2),m=-d,_=1+d,v=[m,m,_,m,_,_,m,m,_,_,m,_],E=6,w=6,x=3,A=2,O=1,k=new Float32Array(x*w*E),N=new Float32Array(A*w*E),D=new Float32Array(O*w*E);for(let F=0;F<E;F++){const H=F%3*2/3-1,z=F>2?0:-1,J=[H,z,0,H+2/3,z,0,H+2/3,z+1,0,H,z,0,H+2/3,z+1,0,H,z+1,0];k.set(J,x*w*F),N.set(v,A*w*F);const te=[F,F,F,F,F,F];D.set(te,O*w*F)}const U=new kr;U.setAttribute("position",new Ms(k,x)),U.setAttribute("uv",new Ms(N,A)),U.setAttribute("faceIndex",new Ms(D,O)),e.push(U),s>sT&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Mz(n,e,t){const i=new lu(n,e,t);return i.texture.mapping=lE,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function LC(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function Nge(n,e,t){const i=new Float32Array(My),s=new Te(0,1,0);return new ph({name:"SphericalGaussianBlur",defines:{n:My,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:gP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sp,depthTest:!1,depthWrite:!1})}function Az(){return new ph({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sp,depthTest:!1,depthWrite:!1})}function Iz(){return new ph({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sp,depthTest:!1,depthWrite:!1})}function gP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Bge(n){let e=new WeakMap,t=null;function i(u){if(u&&u.isTexture){const h=u.mapping,d=h===YS||h===KS,m=h===yv||h===bv;if(d||m)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let _=e.get(u);return t===null&&(t=new PD(n)),_=d?t.fromEquirectangular(u,_):t.fromCubemap(u,_),e.set(u,_),_.texture}else{if(e.has(u))return e.get(u).texture;{const _=u.image;if(d&&_&&_.height>0||m&&_&&s(_)){t===null&&(t=new PD(n));const v=d?t.fromEquirectangular(u):t.fromCubemap(u);return e.set(u,v),u.addEventListener("dispose",o),v.texture}else return null}}}return u}function s(u){let h=0;const d=6;for(let m=0;m<d;m++)u[m]!==void 0&&h++;return h===d}function o(u){const h=u.target;h.removeEventListener("dispose",o);const d=e.get(h);d!==void 0&&(e.delete(h),d.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function Pge(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const s=t(i);return s===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function Fge(n,e,t,i){const s={},o=new WeakMap;function l(_){const v=_.target;v.index!==null&&e.remove(v.index);for(const w in v.attributes)e.remove(v.attributes[w]);v.removeEventListener("dispose",l),delete s[v.id];const E=o.get(v);E&&(e.remove(E),o.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function u(_,v){return s[v.id]===!0||(v.addEventListener("dispose",l),s[v.id]=!0,t.memory.geometries++),v}function h(_){const v=_.attributes;for(const w in v)e.update(v[w],34962);const E=_.morphAttributes;for(const w in E){const x=E[w];for(let A=0,O=x.length;A<O;A++)e.update(x[A],34962)}}function d(_){const v=[],E=_.index,w=_.attributes.position;let x=0;if(E!==null){const k=E.array;x=E.version;for(let N=0,D=k.length;N<D;N+=3){const U=k[N+0],F=k[N+1],H=k[N+2];v.push(U,F,F,H,H,U)}}else{const k=w.array;x=w.version;for(let N=0,D=k.length/3-1;N<D;N+=3){const U=N+0,F=N+1,H=N+2;v.push(U,F,F,H,H,U)}}const A=new(c7(v)?mP:fP)(v,1);A.version=x;const O=o.get(_);O&&e.remove(O),o.set(_,A)}function m(_){const v=o.get(_);if(v){const E=_.index;E!==null&&v.version<E.version&&d(_)}else d(_);return o.get(_)}return{get:u,update:h,getWireframeAttribute:m}}function Uge(n,e,t,i){const s=i.isWebGL2;let o;function l(v){o=v}let u,h;function d(v){u=v.type,h=v.bytesPerElement}function m(v,E){n.drawElements(o,E,u,v*h),t.update(E,o,1)}function _(v,E,w){if(w===0)return;let x,A;if(s)x=n,A="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),A="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[A](o,E,u,v*h,w),t.update(E,o,w)}this.setMode=l,this.setIndex=d,this.render=m,this.renderInstances=_}function zge(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,l,u){switch(t.calls++,l){case 4:t.triangles+=u*(o/3);break;case 1:t.lines+=u*(o/2);break;case 3:t.lines+=u*(o-1);break;case 2:t.lines+=u*o;break;case 0:t.points+=u*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",l);break}}function s(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function Hge(n,e){return n[0]-e[0]}function Gge(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Z2(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function Wge(n,e,t){const i={},s=new Float32Array(8),o=new WeakMap,l=new Mi,u=[];for(let d=0;d<8;d++)u[d]=[d,0];function h(d,m,_,v){const E=d.morphTargetInfluences;if(e.isWebGL2===!0){const w=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,x=w!==void 0?w.length:0;let A=o.get(m);if(A===void 0||A.count!==x){let N=function(){oe.dispose(),o.delete(m),m.removeEventListener("dispose",N)};A!==void 0&&A.texture.dispose();const D=m.morphAttributes.position!==void 0,U=m.morphAttributes.normal!==void 0,F=m.morphAttributes.color!==void 0,H=m.morphAttributes.position||[],z=m.morphAttributes.normal||[],J=m.morphAttributes.color||[];let te=0;D===!0&&(te=1),U===!0&&(te=2),F===!0&&(te=3);let re=m.attributes.position.count*te,ie=1;re>e.maxTextureSize&&(ie=Math.ceil(re/e.maxTextureSize),re=e.maxTextureSize);const de=new Float32Array(re*ie*4*x),oe=new Ow(de,re,ie,x);oe.type=jg,oe.needsUpdate=!0;const ue=te*4;for(let ge=0;ge<x;ge++){const Ae=H[ge],j=z[ge],Z=J[ge],ne=re*ie*4*ge;for(let le=0;le<Ae.count;le++){const _e=le*ue;D===!0&&(l.fromBufferAttribute(Ae,le),Ae.normalized===!0&&Z2(l,Ae),de[ne+_e+0]=l.x,de[ne+_e+1]=l.y,de[ne+_e+2]=l.z,de[ne+_e+3]=0),U===!0&&(l.fromBufferAttribute(j,le),j.normalized===!0&&Z2(l,j),de[ne+_e+4]=l.x,de[ne+_e+5]=l.y,de[ne+_e+6]=l.z,de[ne+_e+7]=0),F===!0&&(l.fromBufferAttribute(Z,le),Z.normalized===!0&&Z2(l,Z),de[ne+_e+8]=l.x,de[ne+_e+9]=l.y,de[ne+_e+10]=l.z,de[ne+_e+11]=Z.itemSize===4?l.w:1)}}A={count:x,texture:oe,size:new Lt(re,ie)},o.set(m,A),m.addEventListener("dispose",N)}let O=0;for(let N=0;N<E.length;N++)O+=E[N];const k=m.morphTargetsRelative?1:1-O;v.getUniforms().setValue(n,"morphTargetBaseInfluence",k),v.getUniforms().setValue(n,"morphTargetInfluences",E),v.getUniforms().setValue(n,"morphTargetsTexture",A.texture,t),v.getUniforms().setValue(n,"morphTargetsTextureSize",A.size)}else{const w=E===void 0?0:E.length;let x=i[m.id];if(x===void 0||x.length!==w){x=[];for(let D=0;D<w;D++)x[D]=[D,0];i[m.id]=x}for(let D=0;D<w;D++){const U=x[D];U[0]=D,U[1]=E[D]}x.sort(Gge);for(let D=0;D<8;D++)D<w&&x[D][1]?(u[D][0]=x[D][0],u[D][1]=x[D][1]):(u[D][0]=Number.MAX_SAFE_INTEGER,u[D][1]=0);u.sort(Hge);const A=m.morphAttributes.position,O=m.morphAttributes.normal;let k=0;for(let D=0;D<8;D++){const U=u[D],F=U[0],H=U[1];F!==Number.MAX_SAFE_INTEGER&&H?(A&&m.getAttribute("morphTarget"+D)!==A[F]&&m.setAttribute("morphTarget"+D,A[F]),O&&m.getAttribute("morphNormal"+D)!==O[F]&&m.setAttribute("morphNormal"+D,O[F]),s[D]=H,k+=H):(A&&m.hasAttribute("morphTarget"+D)===!0&&m.deleteAttribute("morphTarget"+D),O&&m.hasAttribute("morphNormal"+D)===!0&&m.deleteAttribute("morphNormal"+D),s[D]=0)}const N=m.morphTargetsRelative?1:1-k;v.getUniforms().setValue(n,"morphTargetBaseInfluence",N),v.getUniforms().setValue(n,"morphTargetInfluences",s)}}return{update:h}}function Vge(n,e,t,i){let s=new WeakMap;function o(h){const d=i.render.frame,m=h.geometry,_=e.get(h,m);return s.get(_)!==d&&(e.update(_),s.set(_,d)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),t.update(h.instanceMatrix,34962),h.instanceColor!==null&&t.update(h.instanceColor,34962)),_}function l(){s=new WeakMap}function u(h){const d=h.target;d.removeEventListener("dispose",u),t.remove(d.instanceMatrix),d.instanceColor!==null&&t.remove(d.instanceColor)}return{update:o,dispose:l}}const m7=new Bl,g7=new Ow,_7=new pR,v7=new Nw,Rz=[],kz=[],Oz=new Float32Array(16),Lz=new Float32Array(9),Dz=new Float32Array(4);function cE(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let o=Rz[s];if(o===void 0&&(o=new Float32Array(s),Rz[s]=o),e!==0){i.toArray(o,0);for(let l=1,u=0;l!==e;++l)u+=t,n[l].toArray(o,u)}return o}function ap(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function lp(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function mR(n,e){let t=kz[e];t===void 0&&(t=new Int32Array(e),kz[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function jge(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Xge(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ap(t,e))return;n.uniform2fv(this.addr,e),lp(t,e)}}function Yge(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ap(t,e))return;n.uniform3fv(this.addr,e),lp(t,e)}}function Kge(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ap(t,e))return;n.uniform4fv(this.addr,e),lp(t,e)}}function Jge(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ap(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),lp(t,e)}else{if(ap(t,i))return;Dz.set(i),n.uniformMatrix2fv(this.addr,!1,Dz),lp(t,i)}}function Qge(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ap(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),lp(t,e)}else{if(ap(t,i))return;Lz.set(i),n.uniformMatrix3fv(this.addr,!1,Lz),lp(t,i)}}function qge(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ap(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),lp(t,e)}else{if(ap(t,i))return;Oz.set(i),n.uniformMatrix4fv(this.addr,!1,Oz),lp(t,i)}}function Zge(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function e0e(n,e){const t=this.cache;ap(t,e)||(n.uniform2iv(this.addr,e),lp(t,e))}function t0e(n,e){const t=this.cache;ap(t,e)||(n.uniform3iv(this.addr,e),lp(t,e))}function n0e(n,e){const t=this.cache;ap(t,e)||(n.uniform4iv(this.addr,e),lp(t,e))}function r0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function i0e(n,e){const t=this.cache;ap(t,e)||(n.uniform2uiv(this.addr,e),lp(t,e))}function s0e(n,e){const t=this.cache;ap(t,e)||(n.uniform3uiv(this.addr,e),lp(t,e))}function o0e(n,e){const t=this.cache;ap(t,e)||(n.uniform4uiv(this.addr,e),lp(t,e))}function a0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2D(e||m7,s)}function l0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||_7,s)}function u0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||v7,s)}function c0e(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||g7,s)}function h0e(n){switch(n){case 5126:return jge;case 35664:return Xge;case 35665:return Yge;case 35666:return Kge;case 35674:return Jge;case 35675:return Qge;case 35676:return qge;case 5124:case 35670:return Zge;case 35667:case 35671:return e0e;case 35668:case 35672:return t0e;case 35669:case 35673:return n0e;case 5125:return r0e;case 36294:return i0e;case 36295:return s0e;case 36296:return o0e;case 35678:case 36198:case 36298:case 36306:case 35682:return a0e;case 35679:case 36299:case 36307:return l0e;case 35680:case 36300:case 36308:case 36293:return u0e;case 36289:case 36303:case 36311:case 36292:return c0e}}function d0e(n,e){n.uniform1fv(this.addr,e)}function p0e(n,e){const t=cE(e,this.size,2);n.uniform2fv(this.addr,t)}function f0e(n,e){const t=cE(e,this.size,3);n.uniform3fv(this.addr,t)}function m0e(n,e){const t=cE(e,this.size,4);n.uniform4fv(this.addr,t)}function g0e(n,e){const t=cE(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function _0e(n,e){const t=cE(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function v0e(n,e){const t=cE(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function y0e(n,e){n.uniform1iv(this.addr,e)}function b0e(n,e){n.uniform2iv(this.addr,e)}function T0e(n,e){n.uniform3iv(this.addr,e)}function E0e(n,e){n.uniform4iv(this.addr,e)}function $0e(n,e){n.uniform1uiv(this.addr,e)}function S0e(n,e){n.uniform2uiv(this.addr,e)}function w0e(n,e){n.uniform3uiv(this.addr,e)}function x0e(n,e){n.uniform4uiv(this.addr,e)}function C0e(n,e,t){const i=e.length,s=mR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2D(e[o]||m7,s[o])}function M0e(n,e,t){const i=e.length,s=mR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture3D(e[o]||_7,s[o])}function A0e(n,e,t){const i=e.length,s=mR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTextureCube(e[o]||v7,s[o])}function I0e(n,e,t){const i=e.length,s=mR(t,i);n.uniform1iv(this.addr,s);for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||g7,s[o])}function R0e(n){switch(n){case 5126:return d0e;case 35664:return p0e;case 35665:return f0e;case 35666:return m0e;case 35674:return g0e;case 35675:return _0e;case 35676:return v0e;case 5124:case 35670:return y0e;case 35667:case 35671:return b0e;case 35668:case 35672:return T0e;case 35669:case 35673:return E0e;case 5125:return $0e;case 36294:return S0e;case 36295:return w0e;case 36296:return x0e;case 35678:case 36198:case 36298:case 36306:case 35682:return C0e;case 35679:case 36299:case 36307:return M0e;case 35680:case 36300:case 36308:case 36293:return A0e;case 36289:case 36303:case 36311:case 36292:return I0e}}class k0e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=h0e(t.type)}}class O0e{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=R0e(t.type)}}class L0e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,l=s.length;o!==l;++o){const u=s[o];u.setValue(e,t[u.id],i)}}}const eO=/(\w+)(\])?(\[|\.)?/g;function Nz(n,e){n.seq.push(e),n.map[e.id]=e}function D0e(n,e,t){const i=n.name,s=i.length;for(eO.lastIndex=0;;){const o=eO.exec(i),l=eO.lastIndex;let u=o[1];const h=o[2]==="]",d=o[3];if(h&&(u=u|0),d===void 0||d==="["&&l+2===s){Nz(t,d===void 0?new k0e(u,n,e):new O0e(u,n,e));break}else{let m=t.map[u];m===void 0&&(m=new L0e(u),Nz(t,m)),t=m}}}class VM{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);D0e(o,l,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,l=t.length;o!==l;++o){const u=t[o],h=i[u.id];h.needsUpdate!==!1&&u.setValue(e,h.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const l=e[s];l.id in t&&i.push(l)}return i}}function Bz(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let N0e=0;function B0e(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let l=s;l<o;l++){const u=l+1;i.push(`${u===e?">":" "} ${u}: ${t[l]}`)}return i.join(`
`)}function P0e(n){switch(n){case Tm:return["Linear","( value )"];case Ti:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function Pz(n,e,t){const i=n.getShaderParameter(e,35713),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const l=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+B0e(n.getShaderSource(e),l)}else return s}function F0e(n,e){const t=P0e(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function U0e(n,e){let t;switch(e){case P9:t="Linear";break;case F9:t="Reinhard";break;case U9:t="OptimizedCineon";break;case lP:t="ACESFilmic";break;case z9:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function z0e(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(K$).join(`
`)}function H0e(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function G0e(n,e){const t={},i=n.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=n.getActiveAttrib(e,s),l=o.name;let u=1;o.type===35674&&(u=2),o.type===35675&&(u=3),o.type===35676&&(u=4),t[l]={type:o.type,location:n.getAttribLocation(e,l),locationSize:u}}return t}function K$(n){return n!==""}function Fz(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Uz(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const W0e=/^[ \t]*#include +<([\w\d./]+)>/gm;function FD(n){return n.replace(W0e,V0e)}function V0e(n,e){const t=bi[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return FD(t)}const j0e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,X0e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zz(n){return n.replace(X0e,y7).replace(j0e,Y0e)}function Y0e(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),y7(n,e,t,i)}function y7(n,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function Hz(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function K0e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===lR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===pS?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===By&&(e="SHADOWMAP_TYPE_VSM"),e}function J0e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case yv:case bv:e="ENVMAP_TYPE_CUBE";break;case lE:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Q0e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case bv:e="ENVMAP_MODE_REFRACTION";break}return e}function q0e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case kw:e="ENVMAP_BLENDING_MULTIPLY";break;case N9:e="ENVMAP_BLENDING_MIX";break;case B9:e="ENVMAP_BLENDING_ADD";break}return e}function Z0e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function e_e(n,e,t,i){const s=n.getContext(),o=t.defines;let l=t.vertexShader,u=t.fragmentShader;const h=K0e(t),d=J0e(t),m=Q0e(t),_=q0e(t),v=Z0e(t),E=t.isWebGL2?"":z0e(t),w=H0e(o),x=s.createProgram();let A,O,k=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=[w].filter(K$).join(`
`),A.length>0&&(A+=`
`),O=[E,w].filter(K$).join(`
`),O.length>0&&(O+=`
`)):(A=[Hz(t),"#define SHADER_NAME "+t.shaderName,w,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+m:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(K$).join(`
`),O=[E,Hz(t),"#define SHADER_NAME "+t.shaderName,w,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+m:"",t.envMap?"#define "+_:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+h:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==hg?"#define TONE_MAPPING":"",t.toneMapping!==hg?bi.tonemapping_pars_fragment:"",t.toneMapping!==hg?U0e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",bi.encodings_pars_fragment,F0e("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(K$).join(`
`)),l=FD(l),l=Fz(l,t),l=Uz(l,t),u=FD(u),u=Fz(u,t),u=Uz(u,t),l=zz(l),u=zz(u),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(k=`#version 300 es
`,A=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,O=["#define varying in",t.glslVersion===ND?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===ND?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+O);const N=k+A+l,D=k+O+u,U=Bz(s,35633,N),F=Bz(s,35632,D);if(s.attachShader(x,U),s.attachShader(x,F),t.index0AttributeName!==void 0?s.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x),n.debug.checkShaderErrors){const J=s.getProgramInfoLog(x).trim(),te=s.getShaderInfoLog(U).trim(),re=s.getShaderInfoLog(F).trim();let ie=!0,de=!0;if(s.getProgramParameter(x,35714)===!1){ie=!1;const oe=Pz(s,U,"vertex"),ue=Pz(s,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(x,35715)+`

Program Info Log: `+J+`
`+oe+`
`+ue)}else J!==""?console.warn("THREE.WebGLProgram: Program Info Log:",J):(te===""||re==="")&&(de=!1);de&&(this.diagnostics={runnable:ie,programLog:J,vertexShader:{log:te,prefix:A},fragmentShader:{log:re,prefix:O}})}s.deleteShader(U),s.deleteShader(F);let H;this.getUniforms=function(){return H===void 0&&(H=new VM(s,x)),H};let z;return this.getAttributes=function(){return z===void 0&&(z=G0e(s,x)),z},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(x),this.program=void 0},this.name=t.shaderName,this.id=N0e++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=U,this.fragmentShader=F,this}let t_e=0;class n_e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(s)===!1&&(l.add(s),s.usedTimes++),l.has(o)===!1&&(l.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new r_e(e);t.set(e,i)}return t.get(e)}}class r_e{constructor(e){this.id=t_e++,this.code=e,this.usedTimes=0}}function i_e(n,e,t,i,s,o,l){const u=new Jy,h=new n_e,d=[],m=s.isWebGL2,_=s.logarithmicDepthBuffer,v=s.vertexTextures;let E=s.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(z,J,te,re,ie){const de=re.fog,oe=ie.geometry,ue=z.isMeshStandardMaterial?re.environment:null,ge=(z.isMeshStandardMaterial?t:e).get(z.envMap||ue),Ae=ge&&ge.mapping===lE?ge.image.height:null,j=w[z.type];z.precision!==null&&(E=s.getMaxPrecision(z.precision),E!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",E,"instead."));const Z=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,ne=Z!==void 0?Z.length:0;let le=0;oe.morphAttributes.position!==void 0&&(le=1),oe.morphAttributes.normal!==void 0&&(le=2),oe.morphAttributes.color!==void 0&&(le=3);let _e,Oe,xe,Xe;if(j){const Qe=qd[j];_e=Qe.vertexShader,Oe=Qe.fragmentShader}else _e=z.vertexShader,Oe=z.fragmentShader,h.update(z),xe=h.getVertexShaderID(z),Xe=h.getFragmentShaderID(z);const Re=n.getRenderTarget(),Je=z.alphaTest>0,et=z.clearcoat>0,at=z.iridescence>0;return{isWebGL2:m,shaderID:j,shaderName:z.type,vertexShader:_e,fragmentShader:Oe,defines:z.defines,customVertexShaderID:xe,customFragmentShaderID:Xe,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:E,instancing:ie.isInstancedMesh===!0,instancingColor:ie.isInstancedMesh===!0&&ie.instanceColor!==null,supportsVertexTextures:v,outputEncoding:Re===null?n.outputEncoding:Re.isXRRenderTarget===!0?Re.texture.encoding:Tm,map:!!z.map,matcap:!!z.matcap,envMap:!!ge,envMapMode:ge&&ge.mapping,envMapCubeUVHeight:Ae,lightMap:!!z.lightMap,aoMap:!!z.aoMap,emissiveMap:!!z.emissiveMap,bumpMap:!!z.bumpMap,normalMap:!!z.normalMap,objectSpaceNormalMap:z.normalMapType===o7,tangentSpaceNormalMap:z.normalMapType===Tb,decodeVideoTexture:!!z.map&&z.map.isVideoTexture===!0&&z.map.encoding===Ti,clearcoat:et,clearcoatMap:et&&!!z.clearcoatMap,clearcoatRoughnessMap:et&&!!z.clearcoatRoughnessMap,clearcoatNormalMap:et&&!!z.clearcoatNormalMap,iridescence:at,iridescenceMap:at&&!!z.iridescenceMap,iridescenceThicknessMap:at&&!!z.iridescenceThicknessMap,displacementMap:!!z.displacementMap,roughnessMap:!!z.roughnessMap,metalnessMap:!!z.metalnessMap,specularMap:!!z.specularMap,specularIntensityMap:!!z.specularIntensityMap,specularColorMap:!!z.specularColorMap,opaque:z.transparent===!1&&z.blending===K0,alphaMap:!!z.alphaMap,alphaTest:Je,gradientMap:!!z.gradientMap,sheen:z.sheen>0,sheenColorMap:!!z.sheenColorMap,sheenRoughnessMap:!!z.sheenRoughnessMap,transmission:z.transmission>0,transmissionMap:!!z.transmissionMap,thicknessMap:!!z.thicknessMap,combine:z.combine,vertexTangents:!!z.normalMap&&!!oe.attributes.tangent,vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,vertexUvs:!!z.map||!!z.bumpMap||!!z.normalMap||!!z.specularMap||!!z.alphaMap||!!z.emissiveMap||!!z.roughnessMap||!!z.metalnessMap||!!z.clearcoatMap||!!z.clearcoatRoughnessMap||!!z.clearcoatNormalMap||!!z.iridescenceMap||!!z.iridescenceThicknessMap||!!z.displacementMap||!!z.transmissionMap||!!z.thicknessMap||!!z.specularIntensityMap||!!z.specularColorMap||!!z.sheenColorMap||!!z.sheenRoughnessMap,uvsVertexOnly:!(z.map||z.bumpMap||z.normalMap||z.specularMap||z.alphaMap||z.emissiveMap||z.roughnessMap||z.metalnessMap||z.clearcoatNormalMap||z.iridescenceMap||z.iridescenceThicknessMap||z.transmission>0||z.transmissionMap||z.thicknessMap||z.specularIntensityMap||z.specularColorMap||z.sheen>0||z.sheenColorMap||z.sheenRoughnessMap)&&!!z.displacementMap,fog:!!de,useFog:z.fog===!0,fogExp2:de&&de.isFogExp2,flatShading:!!z.flatShading,sizeAttenuation:z.sizeAttenuation,logarithmicDepthBuffer:_,skinning:ie.isSkinnedMesh===!0,morphTargets:oe.morphAttributes.position!==void 0,morphNormals:oe.morphAttributes.normal!==void 0,morphColors:oe.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:le,numDirLights:J.directional.length,numPointLights:J.point.length,numSpotLights:J.spot.length,numRectAreaLights:J.rectArea.length,numHemiLights:J.hemi.length,numDirLightShadows:J.directionalShadowMap.length,numPointLightShadows:J.pointShadowMap.length,numSpotLightShadows:J.spotShadowMap.length,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:z.dithering,shadowMapEnabled:n.shadowMap.enabled&&te.length>0,shadowMapType:n.shadowMap.type,toneMapping:z.toneMapped?n.toneMapping:hg,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===ep,flipSided:z.side===zc,useDepthPacking:!!z.depthPacking,depthPacking:z.depthPacking||0,index0AttributeName:z.index0AttributeName,extensionDerivatives:z.extensions&&z.extensions.derivatives,extensionFragDepth:z.extensions&&z.extensions.fragDepth,extensionDrawBuffers:z.extensions&&z.extensions.drawBuffers,extensionShaderTextureLOD:z.extensions&&z.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||i.has("EXT_shader_texture_lod"),customProgramCacheKey:z.customProgramCacheKey()}}function A(z){const J=[];if(z.shaderID?J.push(z.shaderID):(J.push(z.customVertexShaderID),J.push(z.customFragmentShaderID)),z.defines!==void 0)for(const te in z.defines)J.push(te),J.push(z.defines[te]);return z.isRawShaderMaterial===!1&&(O(J,z),k(J,z),J.push(n.outputEncoding)),J.push(z.customProgramCacheKey),J.join()}function O(z,J){z.push(J.precision),z.push(J.outputEncoding),z.push(J.envMapMode),z.push(J.envMapCubeUVHeight),z.push(J.combine),z.push(J.vertexUvs),z.push(J.fogExp2),z.push(J.sizeAttenuation),z.push(J.morphTargetsCount),z.push(J.morphAttributeCount),z.push(J.numDirLights),z.push(J.numPointLights),z.push(J.numSpotLights),z.push(J.numHemiLights),z.push(J.numRectAreaLights),z.push(J.numDirLightShadows),z.push(J.numPointLightShadows),z.push(J.numSpotLightShadows),z.push(J.shadowMapType),z.push(J.toneMapping),z.push(J.numClippingPlanes),z.push(J.numClipIntersection),z.push(J.depthPacking)}function k(z,J){u.disableAll(),J.isWebGL2&&u.enable(0),J.supportsVertexTextures&&u.enable(1),J.instancing&&u.enable(2),J.instancingColor&&u.enable(3),J.map&&u.enable(4),J.matcap&&u.enable(5),J.envMap&&u.enable(6),J.lightMap&&u.enable(7),J.aoMap&&u.enable(8),J.emissiveMap&&u.enable(9),J.bumpMap&&u.enable(10),J.normalMap&&u.enable(11),J.objectSpaceNormalMap&&u.enable(12),J.tangentSpaceNormalMap&&u.enable(13),J.clearcoat&&u.enable(14),J.clearcoatMap&&u.enable(15),J.clearcoatRoughnessMap&&u.enable(16),J.clearcoatNormalMap&&u.enable(17),J.iridescence&&u.enable(18),J.iridescenceMap&&u.enable(19),J.iridescenceThicknessMap&&u.enable(20),J.displacementMap&&u.enable(21),J.specularMap&&u.enable(22),J.roughnessMap&&u.enable(23),J.metalnessMap&&u.enable(24),J.gradientMap&&u.enable(25),J.alphaMap&&u.enable(26),J.alphaTest&&u.enable(27),J.vertexColors&&u.enable(28),J.vertexAlphas&&u.enable(29),J.vertexUvs&&u.enable(30),J.vertexTangents&&u.enable(31),J.uvsVertexOnly&&u.enable(32),J.fog&&u.enable(33),z.push(u.mask),u.disableAll(),J.useFog&&u.enable(0),J.flatShading&&u.enable(1),J.logarithmicDepthBuffer&&u.enable(2),J.skinning&&u.enable(3),J.morphTargets&&u.enable(4),J.morphNormals&&u.enable(5),J.morphColors&&u.enable(6),J.premultipliedAlpha&&u.enable(7),J.shadowMapEnabled&&u.enable(8),J.physicallyCorrectLights&&u.enable(9),J.doubleSided&&u.enable(10),J.flipSided&&u.enable(11),J.useDepthPacking&&u.enable(12),J.dithering&&u.enable(13),J.specularIntensityMap&&u.enable(14),J.specularColorMap&&u.enable(15),J.transmission&&u.enable(16),J.transmissionMap&&u.enable(17),J.thicknessMap&&u.enable(18),J.sheen&&u.enable(19),J.sheenColorMap&&u.enable(20),J.sheenRoughnessMap&&u.enable(21),J.decodeVideoTexture&&u.enable(22),J.opaque&&u.enable(23),z.push(u.mask)}function N(z){const J=w[z.type];let te;if(J){const re=qd[J];te=Dw.clone(re.uniforms)}else te=z.uniforms;return te}function D(z,J){let te;for(let re=0,ie=d.length;re<ie;re++){const de=d[re];if(de.cacheKey===J){te=de,++te.usedTimes;break}}return te===void 0&&(te=new e_e(n,J,z,o),d.push(te)),te}function U(z){if(--z.usedTimes===0){const J=d.indexOf(z);d[J]=d[d.length-1],d.pop(),z.destroy()}}function F(z){h.remove(z)}function H(){h.dispose()}return{getParameters:x,getProgramCacheKey:A,getUniforms:N,acquireProgram:D,releaseProgram:U,releaseShaderCache:F,programs:d,dispose:H}}function s_e(){let n=new WeakMap;function e(o){let l=n.get(o);return l===void 0&&(l={},n.set(o,l)),l}function t(o){n.delete(o)}function i(o,l,u){n.get(o)[l]=u}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function o_e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Gz(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Wz(){const n=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function l(_,v,E,w,x,A){let O=n[e];return O===void 0?(O={id:_.id,object:_,geometry:v,material:E,groupOrder:w,renderOrder:_.renderOrder,z:x,group:A},n[e]=O):(O.id=_.id,O.object=_,O.geometry=v,O.material=E,O.groupOrder=w,O.renderOrder=_.renderOrder,O.z=x,O.group=A),e++,O}function u(_,v,E,w,x,A){const O=l(_,v,E,w,x,A);E.transmission>0?i.push(O):E.transparent===!0?s.push(O):t.push(O)}function h(_,v,E,w,x,A){const O=l(_,v,E,w,x,A);E.transmission>0?i.unshift(O):E.transparent===!0?s.unshift(O):t.unshift(O)}function d(_,v){t.length>1&&t.sort(_||o_e),i.length>1&&i.sort(v||Gz),s.length>1&&s.sort(v||Gz)}function m(){for(let _=e,v=n.length;_<v;_++){const E=n[_];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:u,unshift:h,finish:m,sort:d}}function a_e(){let n=new WeakMap;function e(i,s){let o;return n.has(i)===!1?(o=new Wz,n.set(i,[o])):s>=n.get(i).length?(o=new Wz,n.get(i).push(o)):o=n.get(i)[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function l_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Te,color:new _n};break;case"SpotLight":t={position:new Te,direction:new Te,color:new _n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Te,color:new _n,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Te,skyColor:new _n,groundColor:new _n};break;case"RectAreaLight":t={color:new _n,position:new Te,halfWidth:new Te,halfHeight:new Te};break}return n[e.id]=t,t}}}function u_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let c_e=0;function h_e(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function d_e(n,e){const t=new l_e,i=u_e(),s={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let m=0;m<9;m++)s.probe.push(new Te);const o=new Te,l=new Mr,u=new Mr;function h(m,_){let v=0,E=0,w=0;for(let J=0;J<9;J++)s.probe[J].set(0,0,0);let x=0,A=0,O=0,k=0,N=0,D=0,U=0,F=0;m.sort(h_e);const H=_!==!0?Math.PI:1;for(let J=0,te=m.length;J<te;J++){const re=m[J],ie=re.color,de=re.intensity,oe=re.distance,ue=re.shadow&&re.shadow.map?re.shadow.map.texture:null;if(re.isAmbientLight)v+=ie.r*de*H,E+=ie.g*de*H,w+=ie.b*de*H;else if(re.isLightProbe)for(let ge=0;ge<9;ge++)s.probe[ge].addScaledVector(re.sh.coefficients[ge],de);else if(re.isDirectionalLight){const ge=t.get(re);if(ge.color.copy(re.color).multiplyScalar(re.intensity*H),re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,s.directionalShadow[x]=j,s.directionalShadowMap[x]=ue,s.directionalShadowMatrix[x]=re.shadow.matrix,D++}s.directional[x]=ge,x++}else if(re.isSpotLight){const ge=t.get(re);if(ge.position.setFromMatrixPosition(re.matrixWorld),ge.color.copy(ie).multiplyScalar(de*H),ge.distance=oe,ge.coneCos=Math.cos(re.angle),ge.penumbraCos=Math.cos(re.angle*(1-re.penumbra)),ge.decay=re.decay,re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,s.spotShadow[O]=j,s.spotShadowMap[O]=ue,s.spotShadowMatrix[O]=re.shadow.matrix,F++}s.spot[O]=ge,O++}else if(re.isRectAreaLight){const ge=t.get(re);ge.color.copy(ie).multiplyScalar(de),ge.halfWidth.set(re.width*.5,0,0),ge.halfHeight.set(0,re.height*.5,0),s.rectArea[k]=ge,k++}else if(re.isPointLight){const ge=t.get(re);if(ge.color.copy(re.color).multiplyScalar(re.intensity*H),ge.distance=re.distance,ge.decay=re.decay,re.castShadow){const Ae=re.shadow,j=i.get(re);j.shadowBias=Ae.bias,j.shadowNormalBias=Ae.normalBias,j.shadowRadius=Ae.radius,j.shadowMapSize=Ae.mapSize,j.shadowCameraNear=Ae.camera.near,j.shadowCameraFar=Ae.camera.far,s.pointShadow[A]=j,s.pointShadowMap[A]=ue,s.pointShadowMatrix[A]=re.shadow.matrix,U++}s.point[A]=ge,A++}else if(re.isHemisphereLight){const ge=t.get(re);ge.skyColor.copy(re.color).multiplyScalar(de*H),ge.groundColor.copy(re.groundColor).multiplyScalar(de*H),s.hemi[N]=ge,N++}}k>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(s.rectAreaLTC1=Sn.LTC_FLOAT_1,s.rectAreaLTC2=Sn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(s.rectAreaLTC1=Sn.LTC_HALF_1,s.rectAreaLTC2=Sn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),s.ambient[0]=v,s.ambient[1]=E,s.ambient[2]=w;const z=s.hash;(z.directionalLength!==x||z.pointLength!==A||z.spotLength!==O||z.rectAreaLength!==k||z.hemiLength!==N||z.numDirectionalShadows!==D||z.numPointShadows!==U||z.numSpotShadows!==F)&&(s.directional.length=x,s.spot.length=O,s.rectArea.length=k,s.point.length=A,s.hemi.length=N,s.directionalShadow.length=D,s.directionalShadowMap.length=D,s.pointShadow.length=U,s.pointShadowMap.length=U,s.spotShadow.length=F,s.spotShadowMap.length=F,s.directionalShadowMatrix.length=D,s.pointShadowMatrix.length=U,s.spotShadowMatrix.length=F,z.directionalLength=x,z.pointLength=A,z.spotLength=O,z.rectAreaLength=k,z.hemiLength=N,z.numDirectionalShadows=D,z.numPointShadows=U,z.numSpotShadows=F,s.version=c_e++)}function d(m,_){let v=0,E=0,w=0,x=0,A=0;const O=_.matrixWorldInverse;for(let k=0,N=m.length;k<N;k++){const D=m[k];if(D.isDirectionalLight){const U=s.directional[v];U.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(o),U.direction.transformDirection(O),v++}else if(D.isSpotLight){const U=s.spot[w];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(O),U.direction.setFromMatrixPosition(D.matrixWorld),o.setFromMatrixPosition(D.target.matrixWorld),U.direction.sub(o),U.direction.transformDirection(O),w++}else if(D.isRectAreaLight){const U=s.rectArea[x];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(O),u.identity(),l.copy(D.matrixWorld),l.premultiply(O),u.extractRotation(l),U.halfWidth.set(D.width*.5,0,0),U.halfHeight.set(0,D.height*.5,0),U.halfWidth.applyMatrix4(u),U.halfHeight.applyMatrix4(u),x++}else if(D.isPointLight){const U=s.point[E];U.position.setFromMatrixPosition(D.matrixWorld),U.position.applyMatrix4(O),E++}else if(D.isHemisphereLight){const U=s.hemi[A];U.direction.setFromMatrixPosition(D.matrixWorld),U.direction.transformDirection(O),A++}}}return{setup:h,setupView:d,state:s}}function Vz(n,e){const t=new d_e(n,e),i=[],s=[];function o(){i.length=0,s.length=0}function l(m){i.push(m)}function u(m){s.push(m)}function h(m){t.setup(i,m)}function d(m){t.setupView(i,m)}return{init:o,state:{lightsArray:i,shadowsArray:s,lights:t},setupLights:h,setupLightsView:d,pushLight:l,pushShadow:u}}function p_e(n,e){let t=new WeakMap;function i(o,l=0){let u;return t.has(o)===!1?(u=new Vz(n,e),t.set(o,[u])):l>=t.get(o).length?(u=new Vz(n,e),t.get(o).push(u)):u=t.get(o)[l],u}function s(){t=new WeakMap}return{get:i,dispose:s}}class Bw extends Hc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Iv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class gR extends Hc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const f_e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,m_e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function g_e(n,e,t){let i=new fR;const s=new Lt,o=new Lt,l=new Mi,u=new Bw({depthPacking:NT}),h=new gR,d={},m=t.maxTextureSize,_={0:zc,1:e0,2:ep},v=new ph({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Lt},radius:{value:4}},vertexShader:f_e,fragmentShader:m_e}),E=v.clone();E.defines.HORIZONTAL_PASS=1;const w=new kr;w.setAttribute("position",new Ms(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new bn(w,v),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lR,this.render=function(D,U,F){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||D.length===0)return;const H=n.getRenderTarget(),z=n.getActiveCubeFace(),J=n.getActiveMipmapLevel(),te=n.state;te.setBlending(sp),te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);for(let re=0,ie=D.length;re<ie;re++){const de=D[re],oe=de.shadow;if(oe===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(oe.autoUpdate===!1&&oe.needsUpdate===!1)continue;s.copy(oe.mapSize);const ue=oe.getFrameExtents();if(s.multiply(ue),o.copy(oe.mapSize),(s.x>m||s.y>m)&&(s.x>m&&(o.x=Math.floor(m/ue.x),s.x=o.x*ue.x,oe.mapSize.x=o.x),s.y>m&&(o.y=Math.floor(m/ue.y),s.y=o.y*ue.y,oe.mapSize.y=o.y)),oe.map===null){const Ae=this.type!==By?{minFilter:da,magFilter:da}:{};oe.map=new lu(s.x,s.y,Ae),oe.map.texture.name=de.name+".shadowMap",oe.camera.updateProjectionMatrix()}n.setRenderTarget(oe.map),n.clear();const ge=oe.getViewportCount();for(let Ae=0;Ae<ge;Ae++){const j=oe.getViewport(Ae);l.set(o.x*j.x,o.y*j.y,o.x*j.z,o.y*j.w),te.viewport(l),oe.updateMatrices(de,Ae),i=oe.getFrustum(),N(U,F,oe.camera,de,this.type)}oe.isPointLightShadow!==!0&&this.type===By&&O(oe,F),oe.needsUpdate=!1}A.needsUpdate=!1,n.setRenderTarget(H,z,J)};function O(D,U){const F=e.update(x);v.defines.VSM_SAMPLES!==D.blurSamples&&(v.defines.VSM_SAMPLES=D.blurSamples,E.defines.VSM_SAMPLES=D.blurSamples,v.needsUpdate=!0,E.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new lu(s.x,s.y)),v.uniforms.shadow_pass.value=D.map.texture,v.uniforms.resolution.value=D.mapSize,v.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(U,null,F,v,x,null),E.uniforms.shadow_pass.value=D.mapPass.texture,E.uniforms.resolution.value=D.mapSize,E.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(U,null,F,E,x,null)}function k(D,U,F,H,z,J){let te=null;const re=F.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(re!==void 0?te=re:te=F.isPointLight===!0?h:u,n.localClippingEnabled&&U.clipShadows===!0&&Array.isArray(U.clippingPlanes)&&U.clippingPlanes.length!==0||U.displacementMap&&U.displacementScale!==0||U.alphaMap&&U.alphaTest>0){const ie=te.uuid,de=U.uuid;let oe=d[ie];oe===void 0&&(oe={},d[ie]=oe);let ue=oe[de];ue===void 0&&(ue=te.clone(),oe[de]=ue),te=ue}return te.visible=U.visible,te.wireframe=U.wireframe,J===By?te.side=U.shadowSide!==null?U.shadowSide:U.side:te.side=U.shadowSide!==null?U.shadowSide:_[U.side],te.alphaMap=U.alphaMap,te.alphaTest=U.alphaTest,te.clipShadows=U.clipShadows,te.clippingPlanes=U.clippingPlanes,te.clipIntersection=U.clipIntersection,te.displacementMap=U.displacementMap,te.displacementScale=U.displacementScale,te.displacementBias=U.displacementBias,te.wireframeLinewidth=U.wireframeLinewidth,te.linewidth=U.linewidth,F.isPointLight===!0&&te.isMeshDistanceMaterial===!0&&(te.referencePosition.setFromMatrixPosition(F.matrixWorld),te.nearDistance=H,te.farDistance=z),te}function N(D,U,F,H,z){if(D.visible===!1)return;if(D.layers.test(U.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&z===By)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,D.matrixWorld);const te=e.update(D),re=D.material;if(Array.isArray(re)){const ie=te.groups;for(let de=0,oe=ie.length;de<oe;de++){const ue=ie[de],ge=re[ue.materialIndex];if(ge&&ge.visible){const Ae=k(D,ge,H,F.near,F.far,z);n.renderBufferDirect(F,null,te,Ae,D,ue)}}}else if(re.visible){const ie=k(D,re,H,F.near,F.far,z);n.renderBufferDirect(F,null,te,ie,D,null)}}const J=D.children;for(let te=0,re=J.length;te<re;te++)N(J[te],U,F,H,z)}}function __e(n,e,t){const i=t.isWebGL2;function s(){let Fe=!1;const Wt=new Mi;let lt=null;const Ut=new Mi(0,0,0,0);return{setMask:function(Ft){lt!==Ft&&!Fe&&(n.colorMask(Ft,Ft,Ft,Ft),lt=Ft)},setLocked:function(Ft){Fe=Ft},setClear:function(Ft,Tn,Er,cr,Gr){Gr===!0&&(Ft*=cr,Tn*=cr,Er*=cr),Wt.set(Ft,Tn,Er,cr),Ut.equals(Wt)===!1&&(n.clearColor(Ft,Tn,Er,cr),Ut.copy(Wt))},reset:function(){Fe=!1,lt=null,Ut.set(-1,0,0,0)}}}function o(){let Fe=!1,Wt=null,lt=null,Ut=null;return{setTest:function(Ft){Ft?Je(2929):et(2929)},setMask:function(Ft){Wt!==Ft&&!Fe&&(n.depthMask(Ft),Wt=Ft)},setFunc:function(Ft){if(lt!==Ft){if(Ft)switch(Ft){case A9:n.depthFunc(512);break;case I9:n.depthFunc(519);break;case R9:n.depthFunc(513);break;case BA:n.depthFunc(515);break;case k9:n.depthFunc(514);break;case O9:n.depthFunc(518);break;case L9:n.depthFunc(516);break;case D9:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);lt=Ft}},setLocked:function(Ft){Fe=Ft},setClear:function(Ft){Ut!==Ft&&(n.clearDepth(Ft),Ut=Ft)},reset:function(){Fe=!1,Wt=null,lt=null,Ut=null}}}function l(){let Fe=!1,Wt=null,lt=null,Ut=null,Ft=null,Tn=null,Er=null,cr=null,Gr=null;return{setTest:function(sr){Fe||(sr?Je(2960):et(2960))},setMask:function(sr){Wt!==sr&&!Fe&&(n.stencilMask(sr),Wt=sr)},setFunc:function(sr,Xn,q){(lt!==sr||Ut!==Xn||Ft!==q)&&(n.stencilFunc(sr,Xn,q),lt=sr,Ut=Xn,Ft=q)},setOp:function(sr,Xn,q){(Tn!==sr||Er!==Xn||cr!==q)&&(n.stencilOp(sr,Xn,q),Tn=sr,Er=Xn,cr=q)},setLocked:function(sr){Fe=sr},setClear:function(sr){Gr!==sr&&(n.clearStencil(sr),Gr=sr)},reset:function(){Fe=!1,Wt=null,lt=null,Ut=null,Ft=null,Tn=null,Er=null,cr=null,Gr=null}}}const u=new s,h=new o,d=new l,m=new WeakMap,_=new WeakMap;let v={},E={},w=new WeakMap,x=[],A=null,O=!1,k=null,N=null,D=null,U=null,F=null,H=null,z=null,J=!1,te=null,re=null,ie=null,de=null,oe=null;const ue=n.getParameter(35661);let ge=!1,Ae=0;const j=n.getParameter(7938);j.indexOf("WebGL")!==-1?(Ae=parseFloat(/^WebGL (\d)/.exec(j)[1]),ge=Ae>=1):j.indexOf("OpenGL ES")!==-1&&(Ae=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),ge=Ae>=2);let Z=null,ne={};const le=n.getParameter(3088),_e=n.getParameter(2978),Oe=new Mi().fromArray(le),xe=new Mi().fromArray(_e);function Xe(Fe,Wt,lt){const Ut=new Uint8Array(4),Ft=n.createTexture();n.bindTexture(Fe,Ft),n.texParameteri(Fe,10241,9728),n.texParameteri(Fe,10240,9728);for(let Tn=0;Tn<lt;Tn++)n.texImage2D(Wt+Tn,0,6408,1,1,0,6408,5121,Ut);return Ft}const Re={};Re[3553]=Xe(3553,3553,1),Re[34067]=Xe(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),Je(2929),h.setFunc(BA),wt(!1),xt(cD),Je(2884),rt(sp);function Je(Fe){v[Fe]!==!0&&(n.enable(Fe),v[Fe]=!0)}function et(Fe){v[Fe]!==!1&&(n.disable(Fe),v[Fe]=!1)}function at(Fe,Wt){return E[Fe]!==Wt?(n.bindFramebuffer(Fe,Wt),E[Fe]=Wt,i&&(Fe===36009&&(E[36160]=Wt),Fe===36160&&(E[36009]=Wt)),!0):!1}function Qe(Fe,Wt){let lt=x,Ut=!1;if(Fe)if(lt=w.get(Wt),lt===void 0&&(lt=[],w.set(Wt,lt)),Fe.isWebGLMultipleRenderTargets){const Ft=Fe.texture;if(lt.length!==Ft.length||lt[0]!==36064){for(let Tn=0,Er=Ft.length;Tn<Er;Tn++)lt[Tn]=36064+Tn;lt.length=Ft.length,Ut=!0}}else lt[0]!==36064&&(lt[0]=36064,Ut=!0);else lt[0]!==1029&&(lt[0]=1029,Ut=!0);Ut&&(t.isWebGL2?n.drawBuffers(lt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(lt))}function De(Fe){return A!==Fe?(n.useProgram(Fe),A=Fe,!0):!1}const Se={[Cy]:32774,[y9]:32778,[aP]:32779};if(i)Se[pD]=32775,Se[fD]=32776;else{const Fe=e.get("EXT_blend_minmax");Fe!==null&&(Se[pD]=Fe.MIN_EXT,Se[fD]=Fe.MAX_EXT)}const Pe={[b9]:0,[T9]:1,[E9]:768,[uR]:770,[M9]:776,[x9]:774,[S9]:772,[$9]:769,[cR]:771,[C9]:775,[w9]:773};function rt(Fe,Wt,lt,Ut,Ft,Tn,Er,cr){if(Fe===sp){O===!0&&(et(3042),O=!1);return}if(O===!1&&(Je(3042),O=!0),Fe!==v9){if(Fe!==k||cr!==J){if((N!==Cy||F!==Cy)&&(n.blendEquation(32774),N=Cy,F=Cy),cr)switch(Fe){case K0:n.blendFuncSeparate(1,771,1,771);break;case NA:n.blendFunc(1,1);break;case hD:n.blendFuncSeparate(0,769,0,1);break;case dD:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}else switch(Fe){case K0:n.blendFuncSeparate(770,771,1,771);break;case NA:n.blendFunc(770,1);break;case hD:n.blendFuncSeparate(0,769,0,1);break;case dD:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Fe);break}D=null,U=null,H=null,z=null,k=Fe,J=cr}return}Ft=Ft||Wt,Tn=Tn||lt,Er=Er||Ut,(Wt!==N||Ft!==F)&&(n.blendEquationSeparate(Se[Wt],Se[Ft]),N=Wt,F=Ft),(lt!==D||Ut!==U||Tn!==H||Er!==z)&&(n.blendFuncSeparate(Pe[lt],Pe[Ut],Pe[Tn],Pe[Er]),D=lt,U=Ut,H=Tn,z=Er),k=Fe,J=null}function We(Fe,Wt){Fe.side===ep?et(2884):Je(2884);let lt=Fe.side===zc;Wt&&(lt=!lt),wt(lt),Fe.blending===K0&&Fe.transparent===!1?rt(sp):rt(Fe.blending,Fe.blendEquation,Fe.blendSrc,Fe.blendDst,Fe.blendEquationAlpha,Fe.blendSrcAlpha,Fe.blendDstAlpha,Fe.premultipliedAlpha),h.setFunc(Fe.depthFunc),h.setTest(Fe.depthTest),h.setMask(Fe.depthWrite),u.setMask(Fe.colorWrite);const Ut=Fe.stencilWrite;d.setTest(Ut),Ut&&(d.setMask(Fe.stencilWriteMask),d.setFunc(Fe.stencilFunc,Fe.stencilRef,Fe.stencilFuncMask),d.setOp(Fe.stencilFail,Fe.stencilZFail,Fe.stencilZPass)),St(Fe.polygonOffset,Fe.polygonOffsetFactor,Fe.polygonOffsetUnits),Fe.alphaToCoverage===!0?Je(32926):et(32926)}function wt(Fe){te!==Fe&&(Fe?n.frontFace(2304):n.frontFace(2305),te=Fe)}function xt(Fe){Fe!==f9?(Je(2884),Fe!==re&&(Fe===cD?n.cullFace(1029):Fe===m9?n.cullFace(1028):n.cullFace(1032))):et(2884),re=Fe}function ht(Fe){Fe!==ie&&(ge&&n.lineWidth(Fe),ie=Fe)}function St(Fe,Wt,lt){Fe?(Je(32823),(de!==Wt||oe!==lt)&&(n.polygonOffset(Wt,lt),de=Wt,oe=lt)):et(32823)}function It(Fe){Fe?Je(3089):et(3089)}function mt(Fe){Fe===void 0&&(Fe=33984+ue-1),Z!==Fe&&(n.activeTexture(Fe),Z=Fe)}function ve(Fe,Wt){Z===null&&mt();let lt=ne[Z];lt===void 0&&(lt={type:void 0,texture:void 0},ne[Z]=lt),(lt.type!==Fe||lt.texture!==Wt)&&(n.bindTexture(Fe,Wt||Re[Fe]),lt.type=Fe,lt.texture=Wt)}function ee(){const Fe=ne[Z];Fe!==void 0&&Fe.type!==void 0&&(n.bindTexture(Fe.type,null),Fe.type=void 0,Fe.texture=void 0)}function ke(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function ot(){try{n.texSubImage2D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function dt(){try{n.texSubImage3D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function $t(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function ct(){try{n.texStorage2D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Me(){try{n.texImage2D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function X(){try{n.texImage3D.apply(n,arguments)}catch(Fe){console.error("THREE.WebGLState:",Fe)}}function Q(Fe){Oe.equals(Fe)===!1&&(n.scissor(Fe.x,Fe.y,Fe.z,Fe.w),Oe.copy(Fe))}function ae(Fe){xe.equals(Fe)===!1&&(n.viewport(Fe.x,Fe.y,Fe.z,Fe.w),xe.copy(Fe))}function $e(Fe,Wt){let lt=_.get(Wt);lt===void 0&&(lt=new WeakMap,_.set(Wt,lt));let Ut=lt.get(Fe);Ut===void 0&&(Ut=n.getUniformBlockIndex(Wt,Fe.name),lt.set(Fe,Ut))}function Ve(Fe,Wt){const lt=_.get(Wt).get(Fe);m.get(Fe)!==lt&&(n.uniformBlockBinding(Wt,lt,Fe.__bindingPointIndex),m.set(Fe,lt))}function Pt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},Z=null,ne={},E={},w=new WeakMap,x=[],A=null,O=!1,k=null,N=null,D=null,U=null,F=null,H=null,z=null,J=!1,te=null,re=null,ie=null,de=null,oe=null,Oe.set(0,0,n.canvas.width,n.canvas.height),xe.set(0,0,n.canvas.width,n.canvas.height),u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:Je,disable:et,bindFramebuffer:at,drawBuffers:Qe,useProgram:De,setBlending:rt,setMaterial:We,setFlipSided:wt,setCullFace:xt,setLineWidth:ht,setPolygonOffset:St,setScissorTest:It,activeTexture:mt,bindTexture:ve,unbindTexture:ee,compressedTexImage2D:ke,texImage2D:Me,texImage3D:X,updateUBOMapping:$e,uniformBlockBinding:Ve,texStorage2D:ct,texStorage3D:Ge,texSubImage2D:ot,texSubImage3D:dt,compressedTexSubImage2D:$t,scissor:Q,viewport:ae,reset:Pt}}function v_e(n,e,t,i,s,o,l){const u=s.isWebGL2,h=s.maxTextures,d=s.maxCubemapSize,m=s.maxTextureSize,_=s.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=/OculusBrowser/g.test(navigator.userAgent),w=new WeakMap;let x;const A=new WeakMap;let O=!1;try{O=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function k(ve,ee){return O?new OffscreenCanvas(ve,ee):nw("canvas")}function N(ve,ee,ke,ot){let dt=1;if((ve.width>ot||ve.height>ot)&&(dt=ot/Math.max(ve.width,ve.height)),dt<1||ee===!0)if(typeof HTMLImageElement<"u"&&ve instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ve instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ve instanceof ImageBitmap){const $t=ee?zA:Math.floor,ct=$t(dt*ve.width),Ge=$t(dt*ve.height);x===void 0&&(x=k(ct,Ge));const Me=ke?k(ct,Ge):x;return Me.width=ct,Me.height=Ge,Me.getContext("2d").drawImage(ve,0,0,ct,Ge),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+ct+"x"+Ge+")."),Me}else return"data"in ve&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),ve;return ve}function D(ve){return BD(ve.width)&&BD(ve.height)}function U(ve){return u?!1:ve.wrapS!==Zd||ve.wrapT!==Zd||ve.minFilter!==da&&ve.minFilter!==Vo}function F(ve,ee){return ve.generateMipmaps&&ee&&ve.minFilter!==da&&ve.minFilter!==Vo}function H(ve){n.generateMipmap(ve)}function z(ve,ee,ke,ot,dt=!1){if(u===!1)return ee;if(ve!==null){if(n[ve]!==void 0)return n[ve];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ve+"'")}let $t=ee;return ee===6403&&(ke===5126&&($t=33326),ke===5131&&($t=33325),ke===5121&&($t=33321)),ee===33319&&(ke===5126&&($t=33328),ke===5131&&($t=33327),ke===5121&&($t=33323)),ee===6408&&(ke===5126&&($t=34836),ke===5131&&($t=34842),ke===5121&&($t=ot===Ti&&dt===!1?35907:32856),ke===32819&&($t=32854),ke===32820&&($t=32855)),($t===33325||$t===33326||$t===33327||$t===33328||$t===34842||$t===34836)&&e.get("EXT_color_buffer_float"),$t}function J(ve,ee,ke){return F(ve,ke)===!0||ve.isFramebufferTexture&&ve.minFilter!==da&&ve.minFilter!==Vo?Math.log2(Math.max(ee.width,ee.height))+1:ve.mipmaps!==void 0&&ve.mipmaps.length>0?ve.mipmaps.length:ve.isCompressedTexture&&Array.isArray(ve.image)?ee.mipmaps.length:1}function te(ve){return ve===da||ve===PA||ve===FA?9728:9729}function re(ve){const ee=ve.target;ee.removeEventListener("dispose",re),de(ee),ee.isVideoTexture&&w.delete(ee)}function ie(ve){const ee=ve.target;ee.removeEventListener("dispose",ie),ue(ee)}function de(ve){const ee=i.get(ve);if(ee.__webglInit===void 0)return;const ke=ve.source,ot=A.get(ke);if(ot){const dt=ot[ee.__cacheKey];dt.usedTimes--,dt.usedTimes===0&&oe(ve),Object.keys(ot).length===0&&A.delete(ke)}i.remove(ve)}function oe(ve){const ee=i.get(ve);n.deleteTexture(ee.__webglTexture);const ke=ve.source,ot=A.get(ke);delete ot[ee.__cacheKey],l.memory.textures--}function ue(ve){const ee=ve.texture,ke=i.get(ve),ot=i.get(ee);if(ot.__webglTexture!==void 0&&(n.deleteTexture(ot.__webglTexture),l.memory.textures--),ve.depthTexture&&ve.depthTexture.dispose(),ve.isWebGLCubeRenderTarget)for(let dt=0;dt<6;dt++)n.deleteFramebuffer(ke.__webglFramebuffer[dt]),ke.__webglDepthbuffer&&n.deleteRenderbuffer(ke.__webglDepthbuffer[dt]);else{if(n.deleteFramebuffer(ke.__webglFramebuffer),ke.__webglDepthbuffer&&n.deleteRenderbuffer(ke.__webglDepthbuffer),ke.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ke.__webglMultisampledFramebuffer),ke.__webglColorRenderbuffer)for(let dt=0;dt<ke.__webglColorRenderbuffer.length;dt++)ke.__webglColorRenderbuffer[dt]&&n.deleteRenderbuffer(ke.__webglColorRenderbuffer[dt]);ke.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ke.__webglDepthRenderbuffer)}if(ve.isWebGLMultipleRenderTargets)for(let dt=0,$t=ee.length;dt<$t;dt++){const ct=i.get(ee[dt]);ct.__webglTexture&&(n.deleteTexture(ct.__webglTexture),l.memory.textures--),i.remove(ee[dt])}i.remove(ee),i.remove(ve)}let ge=0;function Ae(){ge=0}function j(){const ve=ge;return ve>=h&&console.warn("THREE.WebGLTextures: Trying to use "+ve+" texture units while this GPU supports only "+h),ge+=1,ve}function Z(ve){const ee=[];return ee.push(ve.wrapS),ee.push(ve.wrapT),ee.push(ve.magFilter),ee.push(ve.minFilter),ee.push(ve.anisotropy),ee.push(ve.internalFormat),ee.push(ve.format),ee.push(ve.type),ee.push(ve.generateMipmaps),ee.push(ve.premultiplyAlpha),ee.push(ve.flipY),ee.push(ve.unpackAlignment),ee.push(ve.encoding),ee.join()}function ne(ve,ee){const ke=i.get(ve);if(ve.isVideoTexture&&It(ve),ve.isRenderTargetTexture===!1&&ve.version>0&&ke.__version!==ve.version){const ot=ve.image;if(ot===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ot.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{et(ke,ve,ee);return}}t.activeTexture(33984+ee),t.bindTexture(3553,ke.__webglTexture)}function le(ve,ee){const ke=i.get(ve);if(ve.version>0&&ke.__version!==ve.version){et(ke,ve,ee);return}t.activeTexture(33984+ee),t.bindTexture(35866,ke.__webglTexture)}function _e(ve,ee){const ke=i.get(ve);if(ve.version>0&&ke.__version!==ve.version){et(ke,ve,ee);return}t.activeTexture(33984+ee),t.bindTexture(32879,ke.__webglTexture)}function Oe(ve,ee){const ke=i.get(ve);if(ve.version>0&&ke.__version!==ve.version){at(ke,ve,ee);return}t.activeTexture(33984+ee),t.bindTexture(34067,ke.__webglTexture)}const xe={[DT]:10497,[Zd]:33071,[JS]:33648},Xe={[da]:9728,[PA]:9984,[FA]:9986,[Vo]:9729,[uP]:9985,[bb]:9987};function Re(ve,ee,ke){if(ke?(n.texParameteri(ve,10242,xe[ee.wrapS]),n.texParameteri(ve,10243,xe[ee.wrapT]),(ve===32879||ve===35866)&&n.texParameteri(ve,32882,xe[ee.wrapR]),n.texParameteri(ve,10240,Xe[ee.magFilter]),n.texParameteri(ve,10241,Xe[ee.minFilter])):(n.texParameteri(ve,10242,33071),n.texParameteri(ve,10243,33071),(ve===32879||ve===35866)&&n.texParameteri(ve,32882,33071),(ee.wrapS!==Zd||ee.wrapT!==Zd)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ve,10240,te(ee.magFilter)),n.texParameteri(ve,10241,te(ee.minFilter)),ee.minFilter!==da&&ee.minFilter!==Vo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ot=e.get("EXT_texture_filter_anisotropic");if(ee.type===jg&&e.has("OES_texture_float_linear")===!1||u===!1&&ee.type===ub&&e.has("OES_texture_half_float_linear")===!1)return;(ee.anisotropy>1||i.get(ee).__currentAnisotropy)&&(n.texParameterf(ve,ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,s.getMaxAnisotropy())),i.get(ee).__currentAnisotropy=ee.anisotropy)}}function Je(ve,ee){let ke=!1;ve.__webglInit===void 0&&(ve.__webglInit=!0,ee.addEventListener("dispose",re));const ot=ee.source;let dt=A.get(ot);dt===void 0&&(dt={},A.set(ot,dt));const $t=Z(ee);if($t!==ve.__cacheKey){dt[$t]===void 0&&(dt[$t]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,ke=!0),dt[$t].usedTimes++;const ct=dt[ve.__cacheKey];ct!==void 0&&(dt[ve.__cacheKey].usedTimes--,ct.usedTimes===0&&oe(ee)),ve.__cacheKey=$t,ve.__webglTexture=dt[$t].texture}return ke}function et(ve,ee,ke){let ot=3553;ee.isDataArrayTexture&&(ot=35866),ee.isData3DTexture&&(ot=32879);const dt=Je(ve,ee),$t=ee.source;if(t.activeTexture(33984+ke),t.bindTexture(ot,ve.__webglTexture),$t.version!==$t.__currentVersion||dt===!0){n.pixelStorei(37440,ee.flipY),n.pixelStorei(37441,ee.premultiplyAlpha),n.pixelStorei(3317,ee.unpackAlignment),n.pixelStorei(37443,0);const ct=U(ee)&&D(ee.image)===!1;let Ge=N(ee.image,ct,!1,m);Ge=mt(ee,Ge);const Me=D(Ge)||u,X=o.convert(ee.format,ee.encoding);let Q=o.convert(ee.type),ae=z(ee.internalFormat,X,Q,ee.encoding,ee.isVideoTexture);Re(ot,ee,Me);let $e;const Ve=ee.mipmaps,Pt=u&&ee.isVideoTexture!==!0,Fe=$t.__currentVersion===void 0||dt===!0,Wt=J(ee,Ge,Me);if(ee.isDepthTexture)ae=6402,u?ee.type===jg?ae=36012:ee.type===j0?ae=33190:ee.type===pv?ae=35056:ae=33189:ee.type===jg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===fv&&ae===6402&&ee.type!==cP&&ee.type!==j0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=j0,Q=o.convert(ee.type)),ee.format===Tv&&ae===6402&&(ae=34041,ee.type!==pv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=pv,Q=o.convert(ee.type))),Fe&&(Pt?t.texStorage2D(3553,1,ae,Ge.width,Ge.height):t.texImage2D(3553,0,ae,Ge.width,Ge.height,0,X,Q,null));else if(ee.isDataTexture)if(Ve.length>0&&Me){Pt&&Fe&&t.texStorage2D(3553,Wt,ae,Ve[0].width,Ve[0].height);for(let lt=0,Ut=Ve.length;lt<Ut;lt++)$e=Ve[lt],Pt?t.texSubImage2D(3553,lt,0,0,$e.width,$e.height,X,Q,$e.data):t.texImage2D(3553,lt,ae,$e.width,$e.height,0,X,Q,$e.data);ee.generateMipmaps=!1}else Pt?(Fe&&t.texStorage2D(3553,Wt,ae,Ge.width,Ge.height),t.texSubImage2D(3553,0,0,0,Ge.width,Ge.height,X,Q,Ge.data)):t.texImage2D(3553,0,ae,Ge.width,Ge.height,0,X,Q,Ge.data);else if(ee.isCompressedTexture){Pt&&Fe&&t.texStorage2D(3553,Wt,ae,Ve[0].width,Ve[0].height);for(let lt=0,Ut=Ve.length;lt<Ut;lt++)$e=Ve[lt],ee.format!==Bp?X!==null?Pt?t.compressedTexSubImage2D(3553,lt,0,0,$e.width,$e.height,X,$e.data):t.compressedTexImage2D(3553,lt,ae,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pt?t.texSubImage2D(3553,lt,0,0,$e.width,$e.height,X,Q,$e.data):t.texImage2D(3553,lt,ae,$e.width,$e.height,0,X,Q,$e.data)}else if(ee.isDataArrayTexture)Pt?(Fe&&t.texStorage3D(35866,Wt,ae,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(35866,0,0,0,0,Ge.width,Ge.height,Ge.depth,X,Q,Ge.data)):t.texImage3D(35866,0,ae,Ge.width,Ge.height,Ge.depth,0,X,Q,Ge.data);else if(ee.isData3DTexture)Pt?(Fe&&t.texStorage3D(32879,Wt,ae,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(32879,0,0,0,0,Ge.width,Ge.height,Ge.depth,X,Q,Ge.data)):t.texImage3D(32879,0,ae,Ge.width,Ge.height,Ge.depth,0,X,Q,Ge.data);else if(ee.isFramebufferTexture){if(Fe)if(Pt)t.texStorage2D(3553,Wt,ae,Ge.width,Ge.height);else{let lt=Ge.width,Ut=Ge.height;for(let Ft=0;Ft<Wt;Ft++)t.texImage2D(3553,Ft,ae,lt,Ut,0,X,Q,null),lt>>=1,Ut>>=1}}else if(Ve.length>0&&Me){Pt&&Fe&&t.texStorage2D(3553,Wt,ae,Ve[0].width,Ve[0].height);for(let lt=0,Ut=Ve.length;lt<Ut;lt++)$e=Ve[lt],Pt?t.texSubImage2D(3553,lt,0,0,X,Q,$e):t.texImage2D(3553,lt,ae,X,Q,$e);ee.generateMipmaps=!1}else Pt?(Fe&&t.texStorage2D(3553,Wt,ae,Ge.width,Ge.height),t.texSubImage2D(3553,0,0,0,X,Q,Ge)):t.texImage2D(3553,0,ae,X,Q,Ge);F(ee,Me)&&H(ot),$t.__currentVersion=$t.version,ee.onUpdate&&ee.onUpdate(ee)}ve.__version=ee.version}function at(ve,ee,ke){if(ee.image.length!==6)return;const ot=Je(ve,ee),dt=ee.source;if(t.activeTexture(33984+ke),t.bindTexture(34067,ve.__webglTexture),dt.version!==dt.__currentVersion||ot===!0){n.pixelStorei(37440,ee.flipY),n.pixelStorei(37441,ee.premultiplyAlpha),n.pixelStorei(3317,ee.unpackAlignment),n.pixelStorei(37443,0);const $t=ee.isCompressedTexture||ee.image[0].isCompressedTexture,ct=ee.image[0]&&ee.image[0].isDataTexture,Ge=[];for(let lt=0;lt<6;lt++)!$t&&!ct?Ge[lt]=N(ee.image[lt],!1,!0,d):Ge[lt]=ct?ee.image[lt].image:ee.image[lt],Ge[lt]=mt(ee,Ge[lt]);const Me=Ge[0],X=D(Me)||u,Q=o.convert(ee.format,ee.encoding),ae=o.convert(ee.type),$e=z(ee.internalFormat,Q,ae,ee.encoding),Ve=u&&ee.isVideoTexture!==!0,Pt=dt.__currentVersion===void 0||ot===!0;let Fe=J(ee,Me,X);Re(34067,ee,X);let Wt;if($t){Ve&&Pt&&t.texStorage2D(34067,Fe,$e,Me.width,Me.height);for(let lt=0;lt<6;lt++){Wt=Ge[lt].mipmaps;for(let Ut=0;Ut<Wt.length;Ut++){const Ft=Wt[Ut];ee.format!==Bp?Q!==null?Ve?t.compressedTexSubImage2D(34069+lt,Ut,0,0,Ft.width,Ft.height,Q,Ft.data):t.compressedTexImage2D(34069+lt,Ut,$e,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ve?t.texSubImage2D(34069+lt,Ut,0,0,Ft.width,Ft.height,Q,ae,Ft.data):t.texImage2D(34069+lt,Ut,$e,Ft.width,Ft.height,0,Q,ae,Ft.data)}}}else{Wt=ee.mipmaps,Ve&&Pt&&(Wt.length>0&&Fe++,t.texStorage2D(34067,Fe,$e,Ge[0].width,Ge[0].height));for(let lt=0;lt<6;lt++)if(ct){Ve?t.texSubImage2D(34069+lt,0,0,0,Ge[lt].width,Ge[lt].height,Q,ae,Ge[lt].data):t.texImage2D(34069+lt,0,$e,Ge[lt].width,Ge[lt].height,0,Q,ae,Ge[lt].data);for(let Ut=0;Ut<Wt.length;Ut++){const Ft=Wt[Ut].image[lt].image;Ve?t.texSubImage2D(34069+lt,Ut+1,0,0,Ft.width,Ft.height,Q,ae,Ft.data):t.texImage2D(34069+lt,Ut+1,$e,Ft.width,Ft.height,0,Q,ae,Ft.data)}}else{Ve?t.texSubImage2D(34069+lt,0,0,0,Q,ae,Ge[lt]):t.texImage2D(34069+lt,0,$e,Q,ae,Ge[lt]);for(let Ut=0;Ut<Wt.length;Ut++){const Ft=Wt[Ut];Ve?t.texSubImage2D(34069+lt,Ut+1,0,0,Q,ae,Ft.image[lt]):t.texImage2D(34069+lt,Ut+1,$e,Q,ae,Ft.image[lt])}}}F(ee,X)&&H(34067),dt.__currentVersion=dt.version,ee.onUpdate&&ee.onUpdate(ee)}ve.__version=ee.version}function Qe(ve,ee,ke,ot,dt){const $t=o.convert(ke.format,ke.encoding),ct=o.convert(ke.type),Ge=z(ke.internalFormat,$t,ct,ke.encoding);i.get(ee).__hasExternalTextures||(dt===32879||dt===35866?t.texImage3D(dt,0,Ge,ee.width,ee.height,ee.depth,0,$t,ct,null):t.texImage2D(dt,0,Ge,ee.width,ee.height,0,$t,ct,null)),t.bindFramebuffer(36160,ve),St(ee)?v.framebufferTexture2DMultisampleEXT(36160,ot,dt,i.get(ke).__webglTexture,0,ht(ee)):n.framebufferTexture2D(36160,ot,dt,i.get(ke).__webglTexture,0),t.bindFramebuffer(36160,null)}function De(ve,ee,ke){if(n.bindRenderbuffer(36161,ve),ee.depthBuffer&&!ee.stencilBuffer){let ot=33189;if(ke||St(ee)){const dt=ee.depthTexture;dt&&dt.isDepthTexture&&(dt.type===jg?ot=36012:dt.type===j0&&(ot=33190));const $t=ht(ee);St(ee)?v.renderbufferStorageMultisampleEXT(36161,$t,ot,ee.width,ee.height):n.renderbufferStorageMultisample(36161,$t,ot,ee.width,ee.height)}else n.renderbufferStorage(36161,ot,ee.width,ee.height);n.framebufferRenderbuffer(36160,36096,36161,ve)}else if(ee.depthBuffer&&ee.stencilBuffer){const ot=ht(ee);ke&&St(ee)===!1?n.renderbufferStorageMultisample(36161,ot,35056,ee.width,ee.height):St(ee)?v.renderbufferStorageMultisampleEXT(36161,ot,35056,ee.width,ee.height):n.renderbufferStorage(36161,34041,ee.width,ee.height),n.framebufferRenderbuffer(36160,33306,36161,ve)}else{const ot=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let dt=0;dt<ot.length;dt++){const $t=ot[dt],ct=o.convert($t.format,$t.encoding),Ge=o.convert($t.type),Me=z($t.internalFormat,ct,Ge,$t.encoding),X=ht(ee);ke&&St(ee)===!1?n.renderbufferStorageMultisample(36161,X,Me,ee.width,ee.height):St(ee)?v.renderbufferStorageMultisampleEXT(36161,X,Me,ee.width,ee.height):n.renderbufferStorage(36161,Me,ee.width,ee.height)}}n.bindRenderbuffer(36161,null)}function Se(ve,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,ve),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),ne(ee.depthTexture,0);const ke=i.get(ee.depthTexture).__webglTexture,ot=ht(ee);if(ee.depthTexture.format===fv)St(ee)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,ke,0,ot):n.framebufferTexture2D(36160,36096,3553,ke,0);else if(ee.depthTexture.format===Tv)St(ee)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,ke,0,ot):n.framebufferTexture2D(36160,33306,3553,ke,0);else throw new Error("Unknown depthTexture format")}function Pe(ve){const ee=i.get(ve),ke=ve.isWebGLCubeRenderTarget===!0;if(ve.depthTexture&&!ee.__autoAllocateDepthBuffer){if(ke)throw new Error("target.depthTexture not supported in Cube render targets");Se(ee.__webglFramebuffer,ve)}else if(ke){ee.__webglDepthbuffer=[];for(let ot=0;ot<6;ot++)t.bindFramebuffer(36160,ee.__webglFramebuffer[ot]),ee.__webglDepthbuffer[ot]=n.createRenderbuffer(),De(ee.__webglDepthbuffer[ot],ve,!1)}else t.bindFramebuffer(36160,ee.__webglFramebuffer),ee.__webglDepthbuffer=n.createRenderbuffer(),De(ee.__webglDepthbuffer,ve,!1);t.bindFramebuffer(36160,null)}function rt(ve,ee,ke){const ot=i.get(ve);ee!==void 0&&Qe(ot.__webglFramebuffer,ve,ve.texture,36064,3553),ke!==void 0&&Pe(ve)}function We(ve){const ee=ve.texture,ke=i.get(ve),ot=i.get(ee);ve.addEventListener("dispose",ie),ve.isWebGLMultipleRenderTargets!==!0&&(ot.__webglTexture===void 0&&(ot.__webglTexture=n.createTexture()),ot.__version=ee.version,l.memory.textures++);const dt=ve.isWebGLCubeRenderTarget===!0,$t=ve.isWebGLMultipleRenderTargets===!0,ct=D(ve)||u;if(dt){ke.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)ke.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(ke.__webglFramebuffer=n.createFramebuffer(),$t)if(s.drawBuffers){const Ge=ve.texture;for(let Me=0,X=Ge.length;Me<X;Me++){const Q=i.get(Ge[Me]);Q.__webglTexture===void 0&&(Q.__webglTexture=n.createTexture(),l.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&ve.samples>0&&St(ve)===!1){const Ge=$t?ee:[ee];ke.__webglMultisampledFramebuffer=n.createFramebuffer(),ke.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ke.__webglMultisampledFramebuffer);for(let Me=0;Me<Ge.length;Me++){const X=Ge[Me];ke.__webglColorRenderbuffer[Me]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ke.__webglColorRenderbuffer[Me]);const Q=o.convert(X.format,X.encoding),ae=o.convert(X.type),$e=z(X.internalFormat,Q,ae,X.encoding),Ve=ht(ve);n.renderbufferStorageMultisample(36161,Ve,$e,ve.width,ve.height),n.framebufferRenderbuffer(36160,36064+Me,36161,ke.__webglColorRenderbuffer[Me])}n.bindRenderbuffer(36161,null),ve.depthBuffer&&(ke.__webglDepthRenderbuffer=n.createRenderbuffer(),De(ke.__webglDepthRenderbuffer,ve,!0)),t.bindFramebuffer(36160,null)}}if(dt){t.bindTexture(34067,ot.__webglTexture),Re(34067,ee,ct);for(let Ge=0;Ge<6;Ge++)Qe(ke.__webglFramebuffer[Ge],ve,ee,36064,34069+Ge);F(ee,ct)&&H(34067),t.unbindTexture()}else if($t){const Ge=ve.texture;for(let Me=0,X=Ge.length;Me<X;Me++){const Q=Ge[Me],ae=i.get(Q);t.bindTexture(3553,ae.__webglTexture),Re(3553,Q,ct),Qe(ke.__webglFramebuffer,ve,Q,36064+Me,3553),F(Q,ct)&&H(3553)}t.unbindTexture()}else{let Ge=3553;(ve.isWebGL3DRenderTarget||ve.isWebGLArrayRenderTarget)&&(u?Ge=ve.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ge,ot.__webglTexture),Re(Ge,ee,ct),Qe(ke.__webglFramebuffer,ve,ee,36064,Ge),F(ee,ct)&&H(Ge),t.unbindTexture()}ve.depthBuffer&&Pe(ve)}function wt(ve){const ee=D(ve)||u,ke=ve.isWebGLMultipleRenderTargets===!0?ve.texture:[ve.texture];for(let ot=0,dt=ke.length;ot<dt;ot++){const $t=ke[ot];if(F($t,ee)){const ct=ve.isWebGLCubeRenderTarget?34067:3553,Ge=i.get($t).__webglTexture;t.bindTexture(ct,Ge),H(ct),t.unbindTexture()}}}function xt(ve){if(u&&ve.samples>0&&St(ve)===!1){const ee=ve.isWebGLMultipleRenderTargets?ve.texture:[ve.texture],ke=ve.width,ot=ve.height;let dt=16384;const $t=[],ct=ve.stencilBuffer?33306:36096,Ge=i.get(ve),Me=ve.isWebGLMultipleRenderTargets===!0;if(Me)for(let X=0;X<ee.length;X++)t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+X,36161,null),t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+X,3553,null,0);t.bindFramebuffer(36008,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ge.__webglFramebuffer);for(let X=0;X<ee.length;X++){$t.push(36064+X),ve.depthBuffer&&$t.push(ct);const Q=Ge.__ignoreDepthValues!==void 0?Ge.__ignoreDepthValues:!1;if(Q===!1&&(ve.depthBuffer&&(dt|=256),ve.stencilBuffer&&(dt|=1024)),Me&&n.framebufferRenderbuffer(36008,36064,36161,Ge.__webglColorRenderbuffer[X]),Q===!0&&(n.invalidateFramebuffer(36008,[ct]),n.invalidateFramebuffer(36009,[ct])),Me){const ae=i.get(ee[X]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,ae,0)}n.blitFramebuffer(0,0,ke,ot,0,0,ke,ot,dt,9728),E&&n.invalidateFramebuffer(36008,$t)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Me)for(let X=0;X<ee.length;X++){t.bindFramebuffer(36160,Ge.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+X,36161,Ge.__webglColorRenderbuffer[X]);const Q=i.get(ee[X]).__webglTexture;t.bindFramebuffer(36160,Ge.__webglFramebuffer),n.framebufferTexture2D(36009,36064+X,3553,Q,0)}t.bindFramebuffer(36009,Ge.__webglMultisampledFramebuffer)}}function ht(ve){return Math.min(_,ve.samples)}function St(ve){const ee=i.get(ve);return u&&ve.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function It(ve){const ee=l.render.frame;w.get(ve)!==ee&&(w.set(ve,ee),ve.update())}function mt(ve,ee){const ke=ve.encoding,ot=ve.format,dt=ve.type;return ve.isCompressedTexture===!0||ve.isVideoTexture===!0||ve.format===UA||ke!==Tm&&(ke===Ti?u===!1?e.has("EXT_sRGB")===!0&&ot===Bp?(ve.format=UA,ve.minFilter=Vo,ve.generateMipmaps=!1):ee=pP.sRGBToLinear(ee):(ot!==Bp||dt!==jh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ke)),ee}this.allocateTextureUnit=j,this.resetTextureUnits=Ae,this.setTexture2D=ne,this.setTexture2DArray=le,this.setTexture3D=_e,this.setTextureCube=Oe,this.rebindTextures=rt,this.setupRenderTarget=We,this.updateRenderTargetMipmap=wt,this.updateMultisampleRenderTarget=xt,this.setupDepthRenderbuffer=Pe,this.setupFrameBufferTexture=Qe,this.useMultisampledRTT=St}function b7(n,e,t){const i=t.isWebGL2;function s(o,l=null){let u;if(o===jh)return 5121;if(o===V9)return 32819;if(o===j9)return 32820;if(o===H9)return 5120;if(o===G9)return 5122;if(o===cP)return 5123;if(o===W9)return 5124;if(o===j0)return 5125;if(o===jg)return 5126;if(o===ub)return i?5131:(u=e.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(o===X9)return 6406;if(o===Bp)return 6408;if(o===K9)return 6409;if(o===J9)return 6410;if(o===fv)return 6402;if(o===Tv)return 34041;if(o===Q9)return 6403;if(o===Y9)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(o===UA)return u=e.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(o===q9)return 36244;if(o===Z9)return 33319;if(o===e7)return 33320;if(o===t7)return 36249;if(o===PM||o===FM||o===UM||o===zM)if(l===Ti)if(u=e.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(o===PM)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===FM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===UM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===zM)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=e.get("WEBGL_compressed_texture_s3tc"),u!==null){if(o===PM)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===FM)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===UM)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===zM)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===mD||o===gD||o===_D||o===vD)if(u=e.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(o===mD)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===gD)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===_D)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===vD)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===n7)return u=e.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===yD||o===bD)if(u=e.get("WEBGL_compressed_texture_etc"),u!==null){if(o===yD)return l===Ti?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(o===bD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===TD||o===ED||o===$D||o===SD||o===wD||o===xD||o===CD||o===MD||o===AD||o===ID||o===RD||o===kD||o===OD||o===LD)if(u=e.get("WEBGL_compressed_texture_astc"),u!==null){if(o===TD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===ED)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===$D)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===SD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===wD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===xD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===CD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===MD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===AD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===ID)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===RD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===kD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===OD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===LD)return l===Ti?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===DD)if(u=e.get("EXT_texture_compression_bptc"),u!==null){if(o===DD)return l===Ti?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return o===pv?i?34042:(u=e.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:s}}class T7 extends Io{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class oT extends ss{constructor(){super(),this.isGroup=!0,this.type="Group"}}const y_e={type:"move"};class tO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new oT,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new oT,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new oT,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,l=null;const u=this._targetRay,h=this._grip,d=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(d&&e.hand){l=!0;for(const x of e.hand.values()){const A=t.getJointPose(x,i);if(d.joints[x.jointName]===void 0){const k=new oT;k.matrixAutoUpdate=!1,k.visible=!1,d.joints[x.jointName]=k,d.add(k)}const O=d.joints[x.jointName];A!==null&&(O.matrix.fromArray(A.transform.matrix),O.matrix.decompose(O.position,O.rotation,O.scale),O.jointRadius=A.radius),O.visible=A!==null}const m=d.joints["index-finger-tip"],_=d.joints["thumb-tip"],v=m.position.distanceTo(_.position),E=.02,w=.005;d.inputState.pinching&&v>E+w?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&v<=E-w&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else h!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1));u!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(y_e)))}return u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),d!==null&&(d.visible=l!==null),this}}class _P extends Bl{constructor(e,t,i,s,o,l,u,h,d,m){if(m=m!==void 0?m:fv,m!==fv&&m!==Tv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&m===fv&&(i=j0),i===void 0&&m===Tv&&(i=pv),super(null,s,o,l,u,h,m,i,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=u!==void 0?u:da,this.minFilter=h!==void 0?h:da,this.flipY=!1,this.generateMipmaps=!1}}class b_e extends Lf{constructor(e,t){super();const i=this;let s=null,o=1,l=null,u="local-floor",h=null,d=null,m=null,_=null,v=null,E=null;const w=t.getContextAttributes();let x=null,A=null;const O=[],k=[],N=new Io;N.layers.enable(1),N.viewport=new Mi;const D=new Io;D.layers.enable(2),D.viewport=new Mi;const U=[N,D],F=new T7;F.layers.enable(1),F.layers.enable(2);let H=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ne=O[Z];return ne===void 0&&(ne=new tO,O[Z]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(Z){let ne=O[Z];return ne===void 0&&(ne=new tO,O[Z]=ne),ne.getGripSpace()},this.getHand=function(Z){let ne=O[Z];return ne===void 0&&(ne=new tO,O[Z]=ne),ne.getHandSpace()};function J(Z){const ne=k.indexOf(Z.inputSource);if(ne===-1)return;const le=O[ne];le!==void 0&&le.dispatchEvent({type:Z.type,data:Z.inputSource})}function te(){s.removeEventListener("select",J),s.removeEventListener("selectstart",J),s.removeEventListener("selectend",J),s.removeEventListener("squeeze",J),s.removeEventListener("squeezestart",J),s.removeEventListener("squeezeend",J),s.removeEventListener("end",te),s.removeEventListener("inputsourceschange",re);for(let Z=0;Z<O.length;Z++){const ne=k[Z];ne!==null&&(k[Z]=null,O[Z].disconnect(ne))}H=null,z=null,e.setRenderTarget(x),v=null,_=null,m=null,s=null,A=null,j.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){u=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||l},this.setReferenceSpace=function(Z){h=Z},this.getBaseLayer=function(){return _!==null?_:v},this.getBinding=function(){return m},this.getFrame=function(){return E},this.getSession=function(){return s},this.setSession=async function(Z){if(s=Z,s!==null){if(x=e.getRenderTarget(),s.addEventListener("select",J),s.addEventListener("selectstart",J),s.addEventListener("selectend",J),s.addEventListener("squeeze",J),s.addEventListener("squeezestart",J),s.addEventListener("squeezeend",J),s.addEventListener("end",te),s.addEventListener("inputsourceschange",re),w.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ne={antialias:s.renderState.layers===void 0?w.antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};v=new XRWebGLLayer(s,t,ne),s.updateRenderState({baseLayer:v}),A=new lu(v.framebufferWidth,v.framebufferHeight,{format:Bp,type:jh,encoding:e.outputEncoding})}else{let ne=null,le=null,_e=null;w.depth&&(_e=w.stencil?35056:33190,ne=w.stencil?Tv:fv,le=w.stencil?pv:j0);const Oe={colorFormat:32856,depthFormat:_e,scaleFactor:o};m=new XRWebGLBinding(s,t),_=m.createProjectionLayer(Oe),s.updateRenderState({layers:[_]}),A=new lu(_.textureWidth,_.textureHeight,{format:Bp,type:jh,depthTexture:new _P(_.textureWidth,_.textureHeight,le,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:w.stencil,encoding:e.outputEncoding,samples:w.antialias?4:0});const xe=e.properties.get(A);xe.__ignoreDepthValues=_.ignoreDepthValues}A.isXRRenderTarget=!0,this.setFoveation(1),h=null,l=await s.requestReferenceSpace(u),j.setContext(s),j.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function re(Z){for(let ne=0;ne<Z.removed.length;ne++){const le=Z.removed[ne],_e=k.indexOf(le);_e>=0&&(k[_e]=null,O[_e].dispatchEvent({type:"disconnected",data:le}))}for(let ne=0;ne<Z.added.length;ne++){const le=Z.added[ne];let _e=k.indexOf(le);if(_e===-1){for(let xe=0;xe<O.length;xe++)if(xe>=k.length){k.push(le),_e=xe;break}else if(k[xe]===null){k[xe]=le,_e=xe;break}if(_e===-1)break}const Oe=O[_e];Oe&&Oe.dispatchEvent({type:"connected",data:le})}}const ie=new Te,de=new Te;function oe(Z,ne,le){ie.setFromMatrixPosition(ne.matrixWorld),de.setFromMatrixPosition(le.matrixWorld);const _e=ie.distanceTo(de),Oe=ne.projectionMatrix.elements,xe=le.projectionMatrix.elements,Xe=Oe[14]/(Oe[10]-1),Re=Oe[14]/(Oe[10]+1),Je=(Oe[9]+1)/Oe[5],et=(Oe[9]-1)/Oe[5],at=(Oe[8]-1)/Oe[0],Qe=(xe[8]+1)/xe[0],De=Xe*at,Se=Xe*Qe,Pe=_e/(-at+Qe),rt=Pe*-at;ne.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(rt),Z.translateZ(Pe),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert();const We=Xe+Pe,wt=Re+Pe,xt=De-rt,ht=Se+(_e-rt),St=Je*Re/wt*We,It=et*Re/wt*We;Z.projectionMatrix.makePerspective(xt,ht,St,It,We,wt)}function ue(Z,ne){ne===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ne.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(s===null)return;F.near=D.near=N.near=Z.near,F.far=D.far=N.far=Z.far,(H!==F.near||z!==F.far)&&(s.updateRenderState({depthNear:F.near,depthFar:F.far}),H=F.near,z=F.far);const ne=Z.parent,le=F.cameras;ue(F,ne);for(let Oe=0;Oe<le.length;Oe++)ue(le[Oe],ne);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),Z.position.copy(F.position),Z.quaternion.copy(F.quaternion),Z.scale.copy(F.scale),Z.matrix.copy(F.matrix),Z.matrixWorld.copy(F.matrixWorld);const _e=Z.children;for(let Oe=0,xe=_e.length;Oe<xe;Oe++)_e[Oe].updateMatrixWorld(!0);le.length===2?oe(F,N,D):F.projectionMatrix.copy(N.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){if(_!==null)return _.fixedFoveation;if(v!==null)return v.fixedFoveation},this.setFoveation=function(Z){_!==null&&(_.fixedFoveation=Z),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Z)};let ge=null;function Ae(Z,ne){if(d=ne.getViewerPose(h||l),E=ne,d!==null){const le=d.views;v!==null&&(e.setRenderTargetFramebuffer(A,v.framebuffer),e.setRenderTarget(A));let _e=!1;le.length!==F.cameras.length&&(F.cameras.length=0,_e=!0);for(let Oe=0;Oe<le.length;Oe++){const xe=le[Oe];let Xe=null;if(v!==null)Xe=v.getViewport(xe);else{const Je=m.getViewSubImage(_,xe);Xe=Je.viewport,Oe===0&&(e.setRenderTargetTextures(A,Je.colorTexture,_.ignoreDepthValues?void 0:Je.depthStencilTexture),e.setRenderTarget(A))}let Re=U[Oe];Re===void 0&&(Re=new Io,Re.layers.enable(Oe),Re.viewport=new Mi,U[Oe]=Re),Re.matrix.fromArray(xe.transform.matrix),Re.projectionMatrix.fromArray(xe.projectionMatrix),Re.viewport.set(Xe.x,Xe.y,Xe.width,Xe.height),Oe===0&&F.matrix.copy(Re.matrix),_e===!0&&F.cameras.push(Re)}}for(let le=0;le<O.length;le++){const _e=k[le],Oe=O[le];_e!==null&&Oe!==void 0&&Oe.update(_e,ne,h||l)}ge&&ge(Z,ne),E=null}const j=new f7;j.setAnimationLoop(Ae),this.setAnimationLoop=function(Z){ge=Z},this.dispose=function(){}}}function T_e(n,e){function t(x,A){x.fogColor.value.copy(A.color),A.isFog?(x.fogNear.value=A.near,x.fogFar.value=A.far):A.isFogExp2&&(x.fogDensity.value=A.density)}function i(x,A,O,k,N){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(x,A):A.isMeshToonMaterial?(s(x,A),m(x,A)):A.isMeshPhongMaterial?(s(x,A),d(x,A)):A.isMeshStandardMaterial?(s(x,A),_(x,A),A.isMeshPhysicalMaterial&&v(x,A,N)):A.isMeshMatcapMaterial?(s(x,A),E(x,A)):A.isMeshDepthMaterial?s(x,A):A.isMeshDistanceMaterial?(s(x,A),w(x,A)):A.isMeshNormalMaterial?s(x,A):A.isLineBasicMaterial?(o(x,A),A.isLineDashedMaterial&&l(x,A)):A.isPointsMaterial?u(x,A,O,k):A.isSpriteMaterial?h(x,A):A.isShadowMaterial?(x.color.value.copy(A.color),x.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(x,A){x.opacity.value=A.opacity,A.color&&x.diffuse.value.copy(A.color),A.emissive&&x.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.bumpMap&&(x.bumpMap.value=A.bumpMap,x.bumpScale.value=A.bumpScale,A.side===zc&&(x.bumpScale.value*=-1)),A.displacementMap&&(x.displacementMap.value=A.displacementMap,x.displacementScale.value=A.displacementScale,x.displacementBias.value=A.displacementBias),A.emissiveMap&&(x.emissiveMap.value=A.emissiveMap),A.normalMap&&(x.normalMap.value=A.normalMap,x.normalScale.value.copy(A.normalScale),A.side===zc&&x.normalScale.value.negate()),A.specularMap&&(x.specularMap.value=A.specularMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);const O=e.get(A).envMap;if(O&&(x.envMap.value=O,x.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=A.reflectivity,x.ior.value=A.ior,x.refractionRatio.value=A.refractionRatio),A.lightMap){x.lightMap.value=A.lightMap;const D=n.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=A.lightMapIntensity*D}A.aoMap&&(x.aoMap.value=A.aoMap,x.aoMapIntensity.value=A.aoMapIntensity);let k;A.map?k=A.map:A.specularMap?k=A.specularMap:A.displacementMap?k=A.displacementMap:A.normalMap?k=A.normalMap:A.bumpMap?k=A.bumpMap:A.roughnessMap?k=A.roughnessMap:A.metalnessMap?k=A.metalnessMap:A.alphaMap?k=A.alphaMap:A.emissiveMap?k=A.emissiveMap:A.clearcoatMap?k=A.clearcoatMap:A.clearcoatNormalMap?k=A.clearcoatNormalMap:A.clearcoatRoughnessMap?k=A.clearcoatRoughnessMap:A.iridescenceMap?k=A.iridescenceMap:A.iridescenceThicknessMap?k=A.iridescenceThicknessMap:A.specularIntensityMap?k=A.specularIntensityMap:A.specularColorMap?k=A.specularColorMap:A.transmissionMap?k=A.transmissionMap:A.thicknessMap?k=A.thicknessMap:A.sheenColorMap?k=A.sheenColorMap:A.sheenRoughnessMap&&(k=A.sheenRoughnessMap),k!==void 0&&(k.isWebGLRenderTarget&&(k=k.texture),k.matrixAutoUpdate===!0&&k.updateMatrix(),x.uvTransform.value.copy(k.matrix));let N;A.aoMap?N=A.aoMap:A.lightMap&&(N=A.lightMap),N!==void 0&&(N.isWebGLRenderTarget&&(N=N.texture),N.matrixAutoUpdate===!0&&N.updateMatrix(),x.uv2Transform.value.copy(N.matrix))}function o(x,A){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity}function l(x,A){x.dashSize.value=A.dashSize,x.totalSize.value=A.dashSize+A.gapSize,x.scale.value=A.scale}function u(x,A,O,k){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity,x.size.value=A.size*O,x.scale.value=k*.5,A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);let N;A.map?N=A.map:A.alphaMap&&(N=A.alphaMap),N!==void 0&&(N.matrixAutoUpdate===!0&&N.updateMatrix(),x.uvTransform.value.copy(N.matrix))}function h(x,A){x.diffuse.value.copy(A.color),x.opacity.value=A.opacity,x.rotation.value=A.rotation,A.map&&(x.map.value=A.map),A.alphaMap&&(x.alphaMap.value=A.alphaMap),A.alphaTest>0&&(x.alphaTest.value=A.alphaTest);let O;A.map?O=A.map:A.alphaMap&&(O=A.alphaMap),O!==void 0&&(O.matrixAutoUpdate===!0&&O.updateMatrix(),x.uvTransform.value.copy(O.matrix))}function d(x,A){x.specular.value.copy(A.specular),x.shininess.value=Math.max(A.shininess,1e-4)}function m(x,A){A.gradientMap&&(x.gradientMap.value=A.gradientMap)}function _(x,A){x.roughness.value=A.roughness,x.metalness.value=A.metalness,A.roughnessMap&&(x.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(x.metalnessMap.value=A.metalnessMap),e.get(A).envMap&&(x.envMapIntensity.value=A.envMapIntensity)}function v(x,A,O){x.ior.value=A.ior,A.sheen>0&&(x.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),x.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(x.sheenColorMap.value=A.sheenColorMap),A.sheenRoughnessMap&&(x.sheenRoughnessMap.value=A.sheenRoughnessMap)),A.clearcoat>0&&(x.clearcoat.value=A.clearcoat,x.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(x.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),x.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===zc&&x.clearcoatNormalScale.value.negate())),A.iridescence>0&&(x.iridescence.value=A.iridescence,x.iridescenceIOR.value=A.iridescenceIOR,x.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(x.iridescenceMap.value=A.iridescenceMap),A.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=A.iridescenceThicknessMap)),A.transmission>0&&(x.transmission.value=A.transmission,x.transmissionSamplerMap.value=O.texture,x.transmissionSamplerSize.value.set(O.width,O.height),A.transmissionMap&&(x.transmissionMap.value=A.transmissionMap),x.thickness.value=A.thickness,A.thicknessMap&&(x.thicknessMap.value=A.thicknessMap),x.attenuationDistance.value=A.attenuationDistance,x.attenuationColor.value.copy(A.attenuationColor)),x.specularIntensity.value=A.specularIntensity,x.specularColor.value.copy(A.specularColor),A.specularIntensityMap&&(x.specularIntensityMap.value=A.specularIntensityMap),A.specularColorMap&&(x.specularColorMap.value=A.specularColorMap)}function E(x,A){A.matcap&&(x.matcap.value=A.matcap)}function w(x,A){x.referencePosition.value.copy(A.referencePosition),x.nearDistance.value=A.nearDistance,x.farDistance.value=A.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function E_e(n,e,t,i){let s={},o={},l=[];const u=t.isWebGL2?n.getParameter(35375):0;function h(k,N){const D=N.program;i.uniformBlockBinding(k,D)}function d(k,N){let D=s[k.id];D===void 0&&(w(k),D=m(k),s[k.id]=D,k.addEventListener("dispose",A));const U=N.program;i.updateUBOMapping(k,U);const F=e.render.frame;o[k.id]!==F&&(v(k),o[k.id]=F)}function m(k){const N=_();k.__bindingPointIndex=N;const D=n.createBuffer(),U=k.__size,F=k.usage;return n.bindBuffer(35345,D),n.bufferData(35345,U,F),n.bindBuffer(35345,null),n.bindBufferBase(35345,N,D),D}function _(){for(let k=0;k<u;k++)if(l.indexOf(k)===-1)return l.push(k),k;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(k){const N=s[k.id],D=k.uniforms,U=k.__cache;n.bindBuffer(35345,N);for(let F=0,H=D.length;F<H;F++){const z=D[F];if(E(z,F,U)===!0){const J=z.value,te=z.__offset;typeof J=="number"?(z.__data[0]=J,n.bufferSubData(35345,te,z.__data)):(z.value.isMatrix3?(z.__data[0]=z.value.elements[0],z.__data[1]=z.value.elements[1],z.__data[2]=z.value.elements[2],z.__data[3]=z.value.elements[0],z.__data[4]=z.value.elements[3],z.__data[5]=z.value.elements[4],z.__data[6]=z.value.elements[5],z.__data[7]=z.value.elements[0],z.__data[8]=z.value.elements[6],z.__data[9]=z.value.elements[7],z.__data[10]=z.value.elements[8],z.__data[11]=z.value.elements[0]):J.toArray(z.__data),n.bufferSubData(35345,te,z.__data))}}n.bindBuffer(35345,null)}function E(k,N,D){const U=k.value;if(D[N]===void 0)return typeof U=="number"?D[N]=U:D[N]=U.clone(),!0;if(typeof U=="number"){if(D[N]!==U)return D[N]=U,!0}else{const F=D[N];if(F.equals(U)===!1)return F.copy(U),!0}return!1}function w(k){const N=k.uniforms;let D=0;const U=16;let F=0;for(let H=0,z=N.length;H<z;H++){const J=N[H],te=x(J);if(J.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=D,H>0){F=D%U;const re=U-F;F!==0&&re-te.boundary<0&&(D+=U-F,J.__offset=D)}D+=te.storage}return F=D%U,F>0&&(D+=U-F),k.__size=D,k.__cache={},this}function x(k){const N=k.value,D={boundary:0,storage:0};return typeof N=="number"?(D.boundary=4,D.storage=4):N.isVector2?(D.boundary=8,D.storage=8):N.isVector3||N.isColor?(D.boundary=16,D.storage=12):N.isVector4?(D.boundary=16,D.storage=16):N.isMatrix3?(D.boundary=48,D.storage=48):N.isMatrix4?(D.boundary=64,D.storage=64):N.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",N),D}function A(k){const N=k.target;N.removeEventListener("dispose",A);const D=l.indexOf(N.__bindingPointIndex);l.splice(D,1),n.deleteBuffer(s[N.id]),delete s[N.id],delete o[N.id]}function O(){for(const k in s)n.deleteBuffer(s[k]);l=[],s={},o={}}return{bind:h,update:d,dispose:O}}function $_e(){const n=nw("canvas");return n.style.display="block",n}function vP(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:$_e(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,u=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,h=n.powerPreference!==void 0?n.powerPreference:"default",d=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let m;t!==null?m=t.getContextAttributes().alpha:m=n.alpha!==void 0?n.alpha:!1;let _=null,v=null;const E=[],w=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Tm,this.physicallyCorrectLights=!1,this.toneMapping=hg,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const x=this;let A=!1,O=0,k=0,N=null,D=-1,U=null;const F=new Mi,H=new Mi;let z=null,J=e.width,te=e.height,re=1,ie=null,de=null;const oe=new Mi(0,0,J,te),ue=new Mi(0,0,J,te);let ge=!1;const Ae=new fR;let j=!1,Z=!1,ne=null;const le=new Mr,_e=new Lt,Oe=new Te,xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Xe(){return N===null?re:1}let Re=t;function Je(Ie,st){for(let Tt=0;Tt<Ie.length;Tt++){const pt=Ie[Tt],Bt=e.getContext(pt,st);if(Bt!==null)return Bt}return null}try{const Ie={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${aE}`),e.addEventListener("webglcontextlost",$e,!1),e.addEventListener("webglcontextrestored",Ve,!1),e.addEventListener("webglcontextcreationerror",Pt,!1),Re===null){const st=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&st.shift(),Re=Je(st,Ie),Re===null)throw Je(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Re.getShaderPrecisionFormat===void 0&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ie){throw console.error("THREE.WebGLRenderer: "+Ie.message),Ie}let et,at,Qe,De,Se,Pe,rt,We,wt,xt,ht,St,It,mt,ve,ee,ke,ot,dt,$t,ct,Ge,Me,X;function Q(){et=new Pge(Re),at=new kge(Re,et,n),et.init(at),Ge=new b7(Re,et,at),Qe=new __e(Re,et,at),De=new zge,Se=new s_e,Pe=new v_e(Re,et,Qe,Se,at,Ge,De),rt=new Lge(x),We=new Bge(x),wt=new Zpe(Re,at),Me=new Ige(Re,et,wt,at),xt=new Fge(Re,wt,De,Me),ht=new Vge(Re,xt,wt,De),dt=new Wge(Re,at,Pe),ee=new Oge(Se),St=new i_e(x,rt,We,et,at,Me,ee),It=new T_e(x,Se),mt=new a_e,ve=new p_e(et,at),ot=new Age(x,rt,Qe,ht,m,l),ke=new g_e(x,ht,at),X=new E_e(Re,De,at,Qe),$t=new Rge(Re,et,De,at),ct=new Uge(Re,et,De,at),De.programs=St.programs,x.capabilities=at,x.extensions=et,x.properties=Se,x.renderLists=mt,x.shadowMap=ke,x.state=Qe,x.info=De}Q();const ae=new b_e(x,Re);this.xr=ae,this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){const Ie=et.get("WEBGL_lose_context");Ie&&Ie.loseContext()},this.forceContextRestore=function(){const Ie=et.get("WEBGL_lose_context");Ie&&Ie.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(Ie){Ie!==void 0&&(re=Ie,this.setSize(J,te,!1))},this.getSize=function(Ie){return Ie.set(J,te)},this.setSize=function(Ie,st,Tt){if(ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=Ie,te=st,e.width=Math.floor(Ie*re),e.height=Math.floor(st*re),Tt!==!1&&(e.style.width=Ie+"px",e.style.height=st+"px"),this.setViewport(0,0,Ie,st)},this.getDrawingBufferSize=function(Ie){return Ie.set(J*re,te*re).floor()},this.setDrawingBufferSize=function(Ie,st,Tt){J=Ie,te=st,re=Tt,e.width=Math.floor(Ie*Tt),e.height=Math.floor(st*Tt),this.setViewport(0,0,Ie,st)},this.getCurrentViewport=function(Ie){return Ie.copy(F)},this.getViewport=function(Ie){return Ie.copy(oe)},this.setViewport=function(Ie,st,Tt,pt){Ie.isVector4?oe.set(Ie.x,Ie.y,Ie.z,Ie.w):oe.set(Ie,st,Tt,pt),Qe.viewport(F.copy(oe).multiplyScalar(re).floor())},this.getScissor=function(Ie){return Ie.copy(ue)},this.setScissor=function(Ie,st,Tt,pt){Ie.isVector4?ue.set(Ie.x,Ie.y,Ie.z,Ie.w):ue.set(Ie,st,Tt,pt),Qe.scissor(H.copy(ue).multiplyScalar(re).floor())},this.getScissorTest=function(){return ge},this.setScissorTest=function(Ie){Qe.setScissorTest(ge=Ie)},this.setOpaqueSort=function(Ie){ie=Ie},this.setTransparentSort=function(Ie){de=Ie},this.getClearColor=function(Ie){return Ie.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(Ie=!0,st=!0,Tt=!0){let pt=0;Ie&&(pt|=16384),st&&(pt|=256),Tt&&(pt|=1024),Re.clear(pt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",$e,!1),e.removeEventListener("webglcontextrestored",Ve,!1),e.removeEventListener("webglcontextcreationerror",Pt,!1),mt.dispose(),ve.dispose(),Se.dispose(),rt.dispose(),We.dispose(),ht.dispose(),Me.dispose(),X.dispose(),St.dispose(),ae.dispose(),ae.removeEventListener("sessionstart",Tn),ae.removeEventListener("sessionend",Er),ne&&(ne.dispose(),ne=null),cr.stop()};function $e(Ie){Ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const Ie=De.autoReset,st=ke.enabled,Tt=ke.autoUpdate,pt=ke.needsUpdate,Bt=ke.type;Q(),De.autoReset=Ie,ke.enabled=st,ke.autoUpdate=Tt,ke.needsUpdate=pt,ke.type=Bt}function Pt(Ie){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ie.statusMessage)}function Fe(Ie){const st=Ie.target;st.removeEventListener("dispose",Fe),Wt(st)}function Wt(Ie){lt(Ie),Se.remove(Ie)}function lt(Ie){const st=Se.get(Ie).programs;st!==void 0&&(st.forEach(function(Tt){St.releaseProgram(Tt)}),Ie.isShaderMaterial&&St.releaseShaderCache(Ie))}this.renderBufferDirect=function(Ie,st,Tt,pt,Bt,xn){st===null&&(st=xe);const Bn=Bt.isMesh&&Bt.matrixWorld.determinant()<0,nr=Rt(Ie,st,Tt,pt,Bt);Qe.setMaterial(pt,Bn);let vr=Tt.index;const ei=Tt.attributes.position;if(vr===null){if(ei===void 0||ei.count===0)return}else if(vr.count===0)return;let $r=1;pt.wireframe===!0&&(vr=xt.getWireframeAttribute(Tt),$r=2),Me.setup(Bt,pt,nr,Tt,vr);let Ar,Wi=$t;vr!==null&&(Ar=wt.get(vr),Wi=ct,Wi.setIndex(Ar));const jo=vr!==null?vr.count:ei.count,Ro=Tt.drawRange.start*$r,ll=Tt.drawRange.count*$r,Yt=xn!==null?xn.start*$r:0,hr=xn!==null?xn.count*$r:1/0,fa=Math.max(Ro,Yt),Xo=Math.min(jo,Ro+ll,Yt+hr)-1,ps=Math.max(0,Xo-fa+1);if(ps!==0){if(Bt.isMesh)pt.wireframe===!0?(Qe.setLineWidth(pt.wireframeLinewidth*Xe()),Wi.setMode(1)):Wi.setMode(4);else if(Bt.isLine){let fs=pt.linewidth;fs===void 0&&(fs=1),Qe.setLineWidth(fs*Xe()),Bt.isLineSegments?Wi.setMode(1):Bt.isLineLoop?Wi.setMode(2):Wi.setMode(3)}else Bt.isPoints?Wi.setMode(0):Bt.isSprite&&Wi.setMode(4);if(Bt.isInstancedMesh)Wi.renderInstances(fa,ps,Bt.count);else if(Tt.isInstancedBufferGeometry){const fs=Math.min(Tt.instanceCount,Tt._maxInstanceCount);Wi.renderInstances(fa,ps,fs)}else Wi.render(fa,ps)}},this.compile=function(Ie,st){v=ve.get(Ie),v.init(),w.push(v),Ie.traverseVisible(function(Tt){Tt.isLight&&Tt.layers.test(st.layers)&&(v.pushLight(Tt),Tt.castShadow&&v.pushShadow(Tt))}),v.setupLights(x.physicallyCorrectLights),Ie.traverse(function(Tt){const pt=Tt.material;if(pt)if(Array.isArray(pt))for(let Bt=0;Bt<pt.length;Bt++){const xn=pt[Bt];Ne(xn,Ie,Tt)}else Ne(pt,Ie,Tt)}),w.pop(),v=null};let Ut=null;function Ft(Ie){Ut&&Ut(Ie)}function Tn(){cr.stop()}function Er(){cr.start()}const cr=new f7;cr.setAnimationLoop(Ft),typeof self<"u"&&cr.setContext(self),this.setAnimationLoop=function(Ie){Ut=Ie,ae.setAnimationLoop(Ie),Ie===null?cr.stop():cr.start()},ae.addEventListener("sessionstart",Tn),ae.addEventListener("sessionend",Er),this.render=function(Ie,st){if(st!==void 0&&st.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;Ie.autoUpdate===!0&&Ie.updateMatrixWorld(),st.parent===null&&st.updateMatrixWorld(),ae.enabled===!0&&ae.isPresenting===!0&&(ae.cameraAutoUpdate===!0&&ae.updateCamera(st),st=ae.getCamera()),Ie.isScene===!0&&Ie.onBeforeRender(x,Ie,st,N),v=ve.get(Ie,w.length),v.init(),w.push(v),le.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),Ae.setFromProjectionMatrix(le),Z=this.localClippingEnabled,j=ee.init(this.clippingPlanes,Z,st),_=mt.get(Ie,E.length),_.init(),E.push(_),Gr(Ie,st,0,x.sortObjects),_.finish(),x.sortObjects===!0&&_.sort(ie,de),j===!0&&ee.beginShadows();const Tt=v.state.shadowsArray;if(ke.render(Tt,Ie,st),j===!0&&ee.endShadows(),this.info.autoReset===!0&&this.info.reset(),ot.render(_,Ie),v.setupLights(x.physicallyCorrectLights),st.isArrayCamera){const pt=st.cameras;for(let Bt=0,xn=pt.length;Bt<xn;Bt++){const Bn=pt[Bt];sr(_,Ie,Bn,Bn.viewport)}}else sr(_,Ie,st);N!==null&&(Pe.updateMultisampleRenderTarget(N),Pe.updateRenderTargetMipmap(N)),Ie.isScene===!0&&Ie.onAfterRender(x,Ie,st),Me.resetDefaultState(),D=-1,U=null,w.pop(),w.length>0?v=w[w.length-1]:v=null,E.pop(),E.length>0?_=E[E.length-1]:_=null};function Gr(Ie,st,Tt,pt){if(Ie.visible===!1)return;if(Ie.layers.test(st.layers)){if(Ie.isGroup)Tt=Ie.renderOrder;else if(Ie.isLOD)Ie.autoUpdate===!0&&Ie.update(st);else if(Ie.isLight)v.pushLight(Ie),Ie.castShadow&&v.pushShadow(Ie);else if(Ie.isSprite){if(!Ie.frustumCulled||Ae.intersectsSprite(Ie)){pt&&Oe.setFromMatrixPosition(Ie.matrixWorld).applyMatrix4(le);const xn=ht.update(Ie),Bn=Ie.material;Bn.visible&&_.push(Ie,xn,Bn,Tt,Oe.z,null)}}else if((Ie.isMesh||Ie.isLine||Ie.isPoints)&&(Ie.isSkinnedMesh&&Ie.skeleton.frame!==De.render.frame&&(Ie.skeleton.update(),Ie.skeleton.frame=De.render.frame),!Ie.frustumCulled||Ae.intersectsObject(Ie))){pt&&Oe.setFromMatrixPosition(Ie.matrixWorld).applyMatrix4(le);const xn=ht.update(Ie),Bn=Ie.material;if(Array.isArray(Bn)){const nr=xn.groups;for(let vr=0,ei=nr.length;vr<ei;vr++){const $r=nr[vr],Ar=Bn[$r.materialIndex];Ar&&Ar.visible&&_.push(Ie,xn,Ar,Tt,Oe.z,$r)}}else Bn.visible&&_.push(Ie,xn,Bn,Tt,Oe.z,null)}}const Bt=Ie.children;for(let xn=0,Bn=Bt.length;xn<Bn;xn++)Gr(Bt[xn],st,Tt,pt)}function sr(Ie,st,Tt,pt){const Bt=Ie.opaque,xn=Ie.transmissive,Bn=Ie.transparent;v.setupLightsView(Tt),xn.length>0&&Xn(Bt,st,Tt),pt&&Qe.viewport(F.copy(pt)),Bt.length>0&&q(Bt,st,Tt),xn.length>0&&q(xn,st,Tt),Bn.length>0&&q(Bn,st,Tt),Qe.buffers.depth.setTest(!0),Qe.buffers.depth.setMask(!0),Qe.buffers.color.setMask(!0),Qe.setPolygonOffset(!1)}function Xn(Ie,st,Tt){const pt=at.isWebGL2;ne===null&&(ne=new lu(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")?ub:jh,minFilter:bb,samples:pt&&o===!0?4:0})),x.getDrawingBufferSize(_e),pt?ne.setSize(_e.x,_e.y):ne.setSize(zA(_e.x),zA(_e.y));const Bt=x.getRenderTarget();x.setRenderTarget(ne),x.clear();const xn=x.toneMapping;x.toneMapping=hg,q(Ie,st,Tt),x.toneMapping=xn,Pe.updateMultisampleRenderTarget(ne),Pe.updateRenderTargetMipmap(ne),x.setRenderTarget(Bt)}function q(Ie,st,Tt){const pt=st.isScene===!0?st.overrideMaterial:null;for(let Bt=0,xn=Ie.length;Bt<xn;Bt++){const Bn=Ie[Bt],nr=Bn.object,vr=Bn.geometry,ei=pt===null?Bn.material:pt,$r=Bn.group;nr.layers.test(Tt.layers)&&me(nr,st,Tt,vr,ei,$r)}}function me(Ie,st,Tt,pt,Bt,xn){Ie.onBeforeRender(x,st,Tt,pt,Bt,xn),Ie.modelViewMatrix.multiplyMatrices(Tt.matrixWorldInverse,Ie.matrixWorld),Ie.normalMatrix.getNormalMatrix(Ie.modelViewMatrix),Bt.onBeforeRender(x,st,Tt,pt,Ie,xn),Bt.transparent===!0&&Bt.side===ep?(Bt.side=zc,Bt.needsUpdate=!0,x.renderBufferDirect(Tt,st,pt,Bt,Ie,xn),Bt.side=e0,Bt.needsUpdate=!0,x.renderBufferDirect(Tt,st,pt,Bt,Ie,xn),Bt.side=ep):x.renderBufferDirect(Tt,st,pt,Bt,Ie,xn),Ie.onAfterRender(x,st,Tt,pt,Bt,xn)}function Ne(Ie,st,Tt){st.isScene!==!0&&(st=xe);const pt=Se.get(Ie),Bt=v.state.lights,xn=v.state.shadowsArray,Bn=Bt.state.version,nr=St.getParameters(Ie,Bt.state,xn,st,Tt),vr=St.getProgramCacheKey(nr);let ei=pt.programs;pt.environment=Ie.isMeshStandardMaterial?st.environment:null,pt.fog=st.fog,pt.envMap=(Ie.isMeshStandardMaterial?We:rt).get(Ie.envMap||pt.environment),ei===void 0&&(Ie.addEventListener("dispose",Fe),ei=new Map,pt.programs=ei);let $r=ei.get(vr);if($r!==void 0){if(pt.currentProgram===$r&&pt.lightsStateVersion===Bn)return nt(Ie,nr),$r}else nr.uniforms=St.getUniforms(Ie),Ie.onBuild(Tt,nr,x),Ie.onBeforeCompile(nr,x),$r=St.acquireProgram(nr,vr),ei.set(vr,$r),pt.uniforms=nr.uniforms;const Ar=pt.uniforms;(!Ie.isShaderMaterial&&!Ie.isRawShaderMaterial||Ie.clipping===!0)&&(Ar.clippingPlanes=ee.uniform),nt(Ie,nr),pt.needsLights=gn(Ie),pt.lightsStateVersion=Bn,pt.needsLights&&(Ar.ambientLightColor.value=Bt.state.ambient,Ar.lightProbe.value=Bt.state.probe,Ar.directionalLights.value=Bt.state.directional,Ar.directionalLightShadows.value=Bt.state.directionalShadow,Ar.spotLights.value=Bt.state.spot,Ar.spotLightShadows.value=Bt.state.spotShadow,Ar.rectAreaLights.value=Bt.state.rectArea,Ar.ltc_1.value=Bt.state.rectAreaLTC1,Ar.ltc_2.value=Bt.state.rectAreaLTC2,Ar.pointLights.value=Bt.state.point,Ar.pointLightShadows.value=Bt.state.pointShadow,Ar.hemisphereLights.value=Bt.state.hemi,Ar.directionalShadowMap.value=Bt.state.directionalShadowMap,Ar.directionalShadowMatrix.value=Bt.state.directionalShadowMatrix,Ar.spotShadowMap.value=Bt.state.spotShadowMap,Ar.spotShadowMatrix.value=Bt.state.spotShadowMatrix,Ar.pointShadowMap.value=Bt.state.pointShadowMap,Ar.pointShadowMatrix.value=Bt.state.pointShadowMatrix);const Wi=$r.getUniforms(),jo=VM.seqWithValue(Wi.seq,Ar);return pt.currentProgram=$r,pt.uniformsList=jo,$r}function nt(Ie,st){const Tt=Se.get(Ie);Tt.outputEncoding=st.outputEncoding,Tt.instancing=st.instancing,Tt.skinning=st.skinning,Tt.morphTargets=st.morphTargets,Tt.morphNormals=st.morphNormals,Tt.morphColors=st.morphColors,Tt.morphTargetsCount=st.morphTargetsCount,Tt.numClippingPlanes=st.numClippingPlanes,Tt.numIntersection=st.numClipIntersection,Tt.vertexAlphas=st.vertexAlphas,Tt.vertexTangents=st.vertexTangents,Tt.toneMapping=st.toneMapping}function Rt(Ie,st,Tt,pt,Bt){st.isScene!==!0&&(st=xe),Pe.resetTextureUnits();const xn=st.fog,Bn=pt.isMeshStandardMaterial?st.environment:null,nr=N===null?x.outputEncoding:N.isXRRenderTarget===!0?N.texture.encoding:Tm,vr=(pt.isMeshStandardMaterial?We:rt).get(pt.envMap||Bn),ei=pt.vertexColors===!0&&!!Tt.attributes.color&&Tt.attributes.color.itemSize===4,$r=!!pt.normalMap&&!!Tt.attributes.tangent,Ar=!!Tt.morphAttributes.position,Wi=!!Tt.morphAttributes.normal,jo=!!Tt.morphAttributes.color,Ro=pt.toneMapped?x.toneMapping:hg,ll=Tt.morphAttributes.position||Tt.morphAttributes.normal||Tt.morphAttributes.color,Yt=ll!==void 0?ll.length:0,hr=Se.get(pt),fa=v.state.lights;if(j===!0&&(Z===!0||Ie!==U)){const er=Ie===U&&pt.id===D;ee.setState(pt,Ie,er)}let Xo=!1;pt.version===hr.__version?(hr.needsLights&&hr.lightsStateVersion!==fa.state.version||hr.outputEncoding!==nr||Bt.isInstancedMesh&&hr.instancing===!1||!Bt.isInstancedMesh&&hr.instancing===!0||Bt.isSkinnedMesh&&hr.skinning===!1||!Bt.isSkinnedMesh&&hr.skinning===!0||hr.envMap!==vr||pt.fog===!0&&hr.fog!==xn||hr.numClippingPlanes!==void 0&&(hr.numClippingPlanes!==ee.numPlanes||hr.numIntersection!==ee.numIntersection)||hr.vertexAlphas!==ei||hr.vertexTangents!==$r||hr.morphTargets!==Ar||hr.morphNormals!==Wi||hr.morphColors!==jo||hr.toneMapping!==Ro||at.isWebGL2===!0&&hr.morphTargetsCount!==Yt)&&(Xo=!0):(Xo=!0,hr.__version=pt.version);let ps=hr.currentProgram;Xo===!0&&(ps=Ne(pt,st,Bt));let fs=!1,ci=!1,dr=!1;const pn=ps.getUniforms(),ar=hr.uniforms;if(Qe.useProgram(ps.program)&&(fs=!0,ci=!0,dr=!0),pt.id!==D&&(D=pt.id,ci=!0),fs||U!==Ie){if(pn.setValue(Re,"projectionMatrix",Ie.projectionMatrix),at.logarithmicDepthBuffer&&pn.setValue(Re,"logDepthBufFC",2/(Math.log(Ie.far+1)/Math.LN2)),U!==Ie&&(U=Ie,ci=!0,dr=!0),pt.isShaderMaterial||pt.isMeshPhongMaterial||pt.isMeshToonMaterial||pt.isMeshStandardMaterial||pt.envMap){const er=pn.map.cameraPosition;er!==void 0&&er.setValue(Re,Oe.setFromMatrixPosition(Ie.matrixWorld))}(pt.isMeshPhongMaterial||pt.isMeshToonMaterial||pt.isMeshLambertMaterial||pt.isMeshBasicMaterial||pt.isMeshStandardMaterial||pt.isShaderMaterial)&&pn.setValue(Re,"isOrthographic",Ie.isOrthographicCamera===!0),(pt.isMeshPhongMaterial||pt.isMeshToonMaterial||pt.isMeshLambertMaterial||pt.isMeshBasicMaterial||pt.isMeshStandardMaterial||pt.isShaderMaterial||pt.isShadowMaterial||Bt.isSkinnedMesh)&&pn.setValue(Re,"viewMatrix",Ie.matrixWorldInverse)}if(Bt.isSkinnedMesh){pn.setOptional(Re,Bt,"bindMatrix"),pn.setOptional(Re,Bt,"bindMatrixInverse");const er=Bt.skeleton;er&&(at.floatVertexTextures?(er.boneTexture===null&&er.computeBoneTexture(),pn.setValue(Re,"boneTexture",er.boneTexture,Pe),pn.setValue(Re,"boneTextureSize",er.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const wr=Tt.morphAttributes;if((wr.position!==void 0||wr.normal!==void 0||wr.color!==void 0&&at.isWebGL2===!0)&&dt.update(Bt,Tt,pt,ps),(ci||hr.receiveShadow!==Bt.receiveShadow)&&(hr.receiveShadow=Bt.receiveShadow,pn.setValue(Re,"receiveShadow",Bt.receiveShadow)),ci&&(pn.setValue(Re,"toneMappingExposure",x.toneMappingExposure),hr.needsLights&&Qt(ar,dr),xn&&pt.fog===!0&&It.refreshFogUniforms(ar,xn),It.refreshMaterialUniforms(ar,pt,re,te,ne),VM.upload(Re,hr.uniformsList,ar,Pe)),pt.isShaderMaterial&&pt.uniformsNeedUpdate===!0&&(VM.upload(Re,hr.uniformsList,ar,Pe),pt.uniformsNeedUpdate=!1),pt.isSpriteMaterial&&pn.setValue(Re,"center",Bt.center),pn.setValue(Re,"modelViewMatrix",Bt.modelViewMatrix),pn.setValue(Re,"normalMatrix",Bt.normalMatrix),pn.setValue(Re,"modelMatrix",Bt.matrixWorld),pt.isShaderMaterial||pt.isRawShaderMaterial){const er=pt.uniformsGroups;for(let hi=0,Qi=er.length;hi<Qi;hi++)if(at.isWebGL2){const jr=er[hi];X.update(jr,ps),X.bind(jr,ps)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ps}function Qt(Ie,st){Ie.ambientLightColor.needsUpdate=st,Ie.lightProbe.needsUpdate=st,Ie.directionalLights.needsUpdate=st,Ie.directionalLightShadows.needsUpdate=st,Ie.pointLights.needsUpdate=st,Ie.pointLightShadows.needsUpdate=st,Ie.spotLights.needsUpdate=st,Ie.spotLightShadows.needsUpdate=st,Ie.rectAreaLights.needsUpdate=st,Ie.hemisphereLights.needsUpdate=st}function gn(Ie){return Ie.isMeshLambertMaterial||Ie.isMeshToonMaterial||Ie.isMeshPhongMaterial||Ie.isMeshStandardMaterial||Ie.isShadowMaterial||Ie.isShaderMaterial&&Ie.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(Ie,st,Tt){Se.get(Ie.texture).__webglTexture=st,Se.get(Ie.depthTexture).__webglTexture=Tt;const pt=Se.get(Ie);pt.__hasExternalTextures=!0,pt.__hasExternalTextures&&(pt.__autoAllocateDepthBuffer=Tt===void 0,pt.__autoAllocateDepthBuffer||et.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ie,st){const Tt=Se.get(Ie);Tt.__webglFramebuffer=st,Tt.__useDefaultFramebuffer=st===void 0},this.setRenderTarget=function(Ie,st=0,Tt=0){N=Ie,O=st,k=Tt;let pt=!0;if(Ie){const nr=Se.get(Ie);nr.__useDefaultFramebuffer!==void 0?(Qe.bindFramebuffer(36160,null),pt=!1):nr.__webglFramebuffer===void 0?Pe.setupRenderTarget(Ie):nr.__hasExternalTextures&&Pe.rebindTextures(Ie,Se.get(Ie.texture).__webglTexture,Se.get(Ie.depthTexture).__webglTexture)}let Bt=null,xn=!1,Bn=!1;if(Ie){const nr=Ie.texture;(nr.isData3DTexture||nr.isDataArrayTexture)&&(Bn=!0);const vr=Se.get(Ie).__webglFramebuffer;Ie.isWebGLCubeRenderTarget?(Bt=vr[st],xn=!0):at.isWebGL2&&Ie.samples>0&&Pe.useMultisampledRTT(Ie)===!1?Bt=Se.get(Ie).__webglMultisampledFramebuffer:Bt=vr,F.copy(Ie.viewport),H.copy(Ie.scissor),z=Ie.scissorTest}else F.copy(oe).multiplyScalar(re).floor(),H.copy(ue).multiplyScalar(re).floor(),z=ge;if(Qe.bindFramebuffer(36160,Bt)&&at.drawBuffers&&pt&&Qe.drawBuffers(Ie,Bt),Qe.viewport(F),Qe.scissor(H),Qe.setScissorTest(z),xn){const nr=Se.get(Ie.texture);Re.framebufferTexture2D(36160,36064,34069+st,nr.__webglTexture,Tt)}else if(Bn){const nr=Se.get(Ie.texture),vr=st||0;Re.framebufferTextureLayer(36160,36064,nr.__webglTexture,Tt||0,vr)}D=-1},this.readRenderTargetPixels=function(Ie,st,Tt,pt,Bt,xn,Bn){if(!(Ie&&Ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nr=Se.get(Ie).__webglFramebuffer;if(Ie.isWebGLCubeRenderTarget&&Bn!==void 0&&(nr=nr[Bn]),nr){Qe.bindFramebuffer(36160,nr);try{const vr=Ie.texture,ei=vr.format,$r=vr.type;if(ei!==Bp&&Ge.convert(ei)!==Re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ar=$r===ub&&(et.has("EXT_color_buffer_half_float")||at.isWebGL2&&et.has("EXT_color_buffer_float"));if($r!==jh&&Ge.convert($r)!==Re.getParameter(35738)&&!($r===jg&&(at.isWebGL2||et.has("OES_texture_float")||et.has("WEBGL_color_buffer_float")))&&!Ar){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}st>=0&&st<=Ie.width-pt&&Tt>=0&&Tt<=Ie.height-Bt&&Re.readPixels(st,Tt,pt,Bt,Ge.convert(ei),Ge.convert($r),xn)}finally{const vr=N!==null?Se.get(N).__webglFramebuffer:null;Qe.bindFramebuffer(36160,vr)}}},this.copyFramebufferToTexture=function(Ie,st,Tt=0){const pt=Math.pow(2,-Tt),Bt=Math.floor(st.image.width*pt),xn=Math.floor(st.image.height*pt);Pe.setTexture2D(st,0),Re.copyTexSubImage2D(3553,Tt,0,0,Ie.x,Ie.y,Bt,xn),Qe.unbindTexture()},this.copyTextureToTexture=function(Ie,st,Tt,pt=0){const Bt=st.image.width,xn=st.image.height,Bn=Ge.convert(Tt.format),nr=Ge.convert(Tt.type);Pe.setTexture2D(Tt,0),Re.pixelStorei(37440,Tt.flipY),Re.pixelStorei(37441,Tt.premultiplyAlpha),Re.pixelStorei(3317,Tt.unpackAlignment),st.isDataTexture?Re.texSubImage2D(3553,pt,Ie.x,Ie.y,Bt,xn,Bn,nr,st.image.data):st.isCompressedTexture?Re.compressedTexSubImage2D(3553,pt,Ie.x,Ie.y,st.mipmaps[0].width,st.mipmaps[0].height,Bn,st.mipmaps[0].data):Re.texSubImage2D(3553,pt,Ie.x,Ie.y,Bn,nr,st.image),pt===0&&Tt.generateMipmaps&&Re.generateMipmap(3553),Qe.unbindTexture()},this.copyTextureToTexture3D=function(Ie,st,Tt,pt,Bt=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xn=Ie.max.x-Ie.min.x+1,Bn=Ie.max.y-Ie.min.y+1,nr=Ie.max.z-Ie.min.z+1,vr=Ge.convert(pt.format),ei=Ge.convert(pt.type);let $r;if(pt.isData3DTexture)Pe.setTexture3D(pt,0),$r=32879;else if(pt.isDataArrayTexture)Pe.setTexture2DArray(pt,0),$r=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Re.pixelStorei(37440,pt.flipY),Re.pixelStorei(37441,pt.premultiplyAlpha),Re.pixelStorei(3317,pt.unpackAlignment);const Ar=Re.getParameter(3314),Wi=Re.getParameter(32878),jo=Re.getParameter(3316),Ro=Re.getParameter(3315),ll=Re.getParameter(32877),Yt=Tt.isCompressedTexture?Tt.mipmaps[0]:Tt.image;Re.pixelStorei(3314,Yt.width),Re.pixelStorei(32878,Yt.height),Re.pixelStorei(3316,Ie.min.x),Re.pixelStorei(3315,Ie.min.y),Re.pixelStorei(32877,Ie.min.z),Tt.isDataTexture||Tt.isData3DTexture?Re.texSubImage3D($r,Bt,st.x,st.y,st.z,xn,Bn,nr,vr,ei,Yt.data):Tt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Re.compressedTexSubImage3D($r,Bt,st.x,st.y,st.z,xn,Bn,nr,vr,Yt.data)):Re.texSubImage3D($r,Bt,st.x,st.y,st.z,xn,Bn,nr,vr,ei,Yt),Re.pixelStorei(3314,Ar),Re.pixelStorei(32878,Wi),Re.pixelStorei(3316,jo),Re.pixelStorei(3315,Ro),Re.pixelStorei(32877,ll),Bt===0&&pt.generateMipmaps&&Re.generateMipmap($r),Qe.unbindTexture()},this.initTexture=function(Ie){Ie.isCubeTexture?Pe.setTextureCube(Ie,0):Ie.isData3DTexture?Pe.setTexture3D(Ie,0):Ie.isDataArrayTexture?Pe.setTexture2DArray(Ie,0):Pe.setTexture2D(Ie,0),Qe.unbindTexture()},this.resetState=function(){O=0,k=0,N=null,Qe.reset(),Me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class E7 extends vP{}E7.prototype.isWebGL1Renderer=!0;class _R{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new _n(e),this.density=t}clone(){return new _R(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class vR{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new _n(e),this.near=t,this.far=i}clone(){return new vR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class rw extends ss{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}class yR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ew,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=xf()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xf()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Kd=new Te;class Tf{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.applyMatrix4(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.applyNormalMatrix(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kd.fromBufferAttribute(this,t),Kd.transformDirection(e),this.setXYZ(t,Kd.x,Kd.y,Kd.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new Ms(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Tf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class yP extends Hc{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let D1;const C$=new Te,N1=new Te,B1=new Te,P1=new Lt,M$=new Lt,$7=new Mr,DC=new Te,A$=new Te,NC=new Te,jz=new Lt,nO=new Lt,Xz=new Lt;class S7 extends ss{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",D1===void 0){D1=new kr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new yR(t,5);D1.setIndex([0,1,2,0,2,3]),D1.setAttribute("position",new Tf(i,3,0,!1)),D1.setAttribute("uv",new Tf(i,2,3,!1))}this.geometry=D1,this.material=e!==void 0?e:new yP,this.center=new Lt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),N1.setFromMatrixScale(this.matrixWorld),$7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),B1.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&N1.multiplyScalar(-B1.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const l=this.center;BC(DC.set(-.5,-.5,0),B1,l,N1,s,o),BC(A$.set(.5,-.5,0),B1,l,N1,s,o),BC(NC.set(.5,.5,0),B1,l,N1,s,o),jz.set(0,0),nO.set(1,0),Xz.set(1,1);let u=e.ray.intersectTriangle(DC,A$,NC,!1,C$);if(u===null&&(BC(A$.set(-.5,.5,0),B1,l,N1,s,o),nO.set(0,1),u=e.ray.intersectTriangle(DC,NC,A$,!1,C$),u===null))return;const h=e.ray.origin.distanceTo(C$);h<e.near||h>e.far||t.push({distance:h,point:C$.clone(),uv:yf.getUV(C$,DC,A$,NC,jz,nO,Xz,new Lt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function BC(n,e,t,i,s,o){P1.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(M$.x=o*P1.x-s*P1.y,M$.y=s*P1.x+o*P1.y):M$.copy(P1),n.copy(e),n.x+=M$.x,n.y+=M$.y,n.applyMatrix4($7)}const PC=new Te,Yz=new Te;class w7 extends ss{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){PC.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(PC);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){PC.setFromMatrixPosition(e.matrixWorld),Yz.setFromMatrixPosition(this.matrixWorld);const i=PC.distanceTo(Yz)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o&&i>=t[s].distance;s++)t[s-1].object.visible=!1,t[s].object.visible=!0;for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const l=i[s];t.object.levels.push({object:l.object.uuid,distance:l.distance})}return t}}const Kz=new Te,Jz=new Mi,Qz=new Mi,S_e=new Te,qz=new Mr;class x7 extends bn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Mr,this.bindMatrixInverse=new Mr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Mi,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,s=this.geometry;Jz.fromBufferAttribute(s.attributes.skinIndex,e),Qz.fromBufferAttribute(s.attributes.skinWeight,e),Kz.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const l=Qz.getComponent(o);if(l!==0){const u=Jz.getComponent(o);qz.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),t.addScaledVector(S_e.copy(Kz).applyMatrix4(qz),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class bP extends ss{constructor(){super(),this.isBone=!0,this.type="Bone"}}class bT extends Bl{constructor(e=null,t=1,i=1,s,o,l,u,h,d=da,m=da,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Zz=new Mr,w_e=new Mr;class bR{constructor(e=[],t=[]){this.uuid=xf(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new Mr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Mr;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,l=e.length;o<l;o++){const u=e[o]?e[o].matrixWorld:w_e;Zz.multiplyMatrices(u,t[o]),Zz.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new bR(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=l7(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new bT(t,e,e,Bp,jg);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let l=t[o];l===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),l=new bP),this.bones.push(l),this.boneInverses.push(new Mr().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const l=t[s];e.bones.push(l.uuid);const u=i[s];e.boneInverses.push(u.toArray())}return e}}class cb extends Ms{constructor(e,t,i,s=1){typeof i=="number"&&(s=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const eH=new Mr,tH=new Mr,FC=[],I$=new bn;class C7 extends bn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cb(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,s=this.count;if(I$.geometry=this.geometry,I$.material=this.material,I$.material!==void 0)for(let o=0;o<s;o++){this.getMatrixAt(o,eH),tH.multiplyMatrices(i,eH),I$.matrixWorld=tH,I$.raycast(e,FC);for(let l=0,u=FC.length;l<u;l++){const h=FC[l];h.instanceId=o,h.object=this,t.push(h)}FC.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cb(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Id extends Hc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _n(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const nH=new Te,rH=new Te,iH=new Mr,rO=new Lw,UC=new s0;class wd extends ss{constructor(e=new kr,t=new Id){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)nH.fromBufferAttribute(t,s-1),rH.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=nH.distanceTo(rH);e.setAttribute("lineDistance",new Pn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),UC.copy(i.boundingSphere),UC.applyMatrix4(s),UC.radius+=o,e.ray.intersectsSphere(UC)===!1)return;iH.copy(s).invert(),rO.copy(e.ray).applyMatrix4(iH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=new Te,m=new Te,_=new Te,v=new Te,E=this.isLineSegments?2:1,w=i.index,x=i.attributes.position;if(w!==null){const A=Math.max(0,l.start),O=Math.min(w.count,l.start+l.count);for(let k=A,N=O-1;k<N;k+=E){const D=w.getX(k),U=w.getX(k+1);if(d.fromBufferAttribute(x,D),m.fromBufferAttribute(x,U),rO.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const F=e.ray.origin.distanceTo(v);F<e.near||F>e.far||t.push({distance:F,point:_.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}else{const A=Math.max(0,l.start),O=Math.min(x.count,l.start+l.count);for(let k=A,N=O-1;k<N;k+=E){if(d.fromBufferAttribute(x,k),m.fromBufferAttribute(x,k+1),rO.distanceSqToSegment(d,m,v,_)>h)continue;v.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(v);D<e.near||D>e.far||t.push({distance:D,point:_.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const sH=new Te,oH=new Te;class o0 extends wd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)sH.fromBufferAttribute(t,s),oH.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+sH.distanceTo(oH);e.setAttribute("lineDistance",new Pn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class M7 extends wd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class TR extends Hc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const aH=new Mr,UD=new Lw,zC=new s0,HC=new Te;class A7 extends ss{constructor(e=new kr,t=new TR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),zC.copy(i.boundingSphere),zC.applyMatrix4(s),zC.radius+=o,e.ray.intersectsSphere(zC)===!1)return;aH.copy(s).invert(),UD.copy(e.ray).applyMatrix4(aH);const u=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=u*u,d=i.index,m=i.attributes.position;if(d!==null){const _=Math.max(0,l.start),v=Math.min(d.count,l.start+l.count);for(let E=_,w=v;E<w;E++){const x=d.getX(E);HC.fromBufferAttribute(m,x),lH(HC,x,h,s,e,t,this)}}else{const _=Math.max(0,l.start),v=Math.min(m.count,l.start+l.count);for(let E=_,w=v;E<w;E++)HC.fromBufferAttribute(m,E),lH(HC,E,h,s,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function lH(n,e,t,i,s,o,l){const u=UD.distanceSqToPoint(n);if(u<t){const h=new Te;UD.closestPointToPoint(n,h),h.applyMatrix4(i);const d=s.ray.origin.distanceTo(h);if(d<s.near||d>s.far)return;o.push({distance:d,distanceToRay:Math.sqrt(u),point:h,index:e,face:null,object:l})}}class x_e extends Bl{constructor(e,t,i,s,o,l,u,h,d){super(e,t,i,s,o,l,u,h,d),this.isVideoTexture=!0,this.minFilter=l!==void 0?l:Vo,this.magFilter=o!==void 0?o:Vo,this.generateMipmaps=!1;const m=this;function _(){m.needsUpdate=!0,e.requestVideoFrameCallback(_)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class C_e extends Bl{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=da,this.minFilter=da,this.generateMipmaps=!1,this.needsUpdate=!0}}class I7 extends Bl{constructor(e,t,i,s,o,l,u,h,d,m,_,v){super(null,l,u,h,d,m,s,o,_,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class M_e extends Bl{constructor(e,t,i,s,o,l,u,h,d){super(e,t,i,s,o,l,u,h,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _g{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let l;t?l=t:l=e*i[o-1];let u=0,h=o-1,d;for(;u<=h;)if(s=Math.floor(u+(h-u)/2),d=i[s]-l,d<0)u=s+1;else if(d>0)h=s-1;else{h=s;break}if(s=h,i[s]===l)return s/(o-1);const m=i[s],_=i[s+1]-m,v=(l-m)/_;return(s+v)/(o-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Lt:new Te);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Te,s=[],o=[],l=[],u=new Te,h=new Mr;for(let E=0;E<=e;E++){const w=E/e;s[E]=this.getTangentAt(w,new Te)}o[0]=new Te,l[0]=new Te;let d=Number.MAX_VALUE;const m=Math.abs(s[0].x),_=Math.abs(s[0].y),v=Math.abs(s[0].z);m<=d&&(d=m,i.set(1,0,0)),_<=d&&(d=_,i.set(0,1,0)),v<=d&&i.set(0,0,1),u.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]);for(let E=1;E<=e;E++){if(o[E]=o[E-1].clone(),l[E]=l[E-1].clone(),u.crossVectors(s[E-1],s[E]),u.length()>Number.EPSILON){u.normalize();const w=Math.acos(Uu(s[E-1].dot(s[E]),-1,1));o[E].applyMatrix4(h.makeRotationAxis(u,w))}l[E].crossVectors(s[E],o[E])}if(t===!0){let E=Math.acos(Uu(o[0].dot(o[e]),-1,1));E/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(E=-E);for(let w=1;w<=e;w++)o[w].applyMatrix4(h.makeRotationAxis(s[w],E*w)),l[w].crossVectors(s[w],o[w])}return{tangents:s,normals:o,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ER extends _g{constructor(e=0,t=0,i=1,s=1,o=0,l=Math.PI*2,u=!1,h=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=l,this.aClockwise=u,this.aRotation=h}getPoint(e,t){const i=t||new Lt,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const l=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(l?o=0:o=s),this.aClockwise===!0&&!l&&(o===s?o=-s:o=o-s);const u=this.aStartAngle+e*o;let h=this.aX+this.xRadius*Math.cos(u),d=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){const m=Math.cos(this.aRotation),_=Math.sin(this.aRotation),v=h-this.aX,E=d-this.aY;h=v*m-E*_+this.aX,d=v*_+E*m+this.aY}return i.set(h,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class R7 extends ER{constructor(e,t,i,s,o,l){super(e,t,i,i,s,o,l),this.isArcCurve=!0,this.type="ArcCurve"}}function TP(){let n=0,e=0,t=0,i=0;function s(o,l,u,h){n=o,e=u,t=-3*o+3*l-2*u-h,i=2*o-2*l+u+h}return{initCatmullRom:function(o,l,u,h,d){s(l,u,d*(u-o),d*(h-l))},initNonuniformCatmullRom:function(o,l,u,h,d,m,_){let v=(l-o)/d-(u-o)/(d+m)+(u-l)/m,E=(u-l)/m-(h-l)/(m+_)+(h-u)/_;v*=m,E*=m,s(l,u,v,E)},calc:function(o){const l=o*o,u=l*o;return n+e*o+t*l+i*u}}}const GC=new Te,iO=new TP,sO=new TP,oO=new TP;class k7 extends _g{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new Te){const i=t,s=this.points,o=s.length,l=(o-(this.closed?0:1))*e;let u=Math.floor(l),h=l-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:h===0&&u===o-1&&(u=o-2,h=1);let d,m;this.closed||u>0?d=s[(u-1)%o]:(GC.subVectors(s[0],s[1]).add(s[0]),d=GC);const _=s[u%o],v=s[(u+1)%o];if(this.closed||u+2<o?m=s[(u+2)%o]:(GC.subVectors(s[o-1],s[o-2]).add(s[o-1]),m=GC),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let w=Math.pow(d.distanceToSquared(_),E),x=Math.pow(_.distanceToSquared(v),E),A=Math.pow(v.distanceToSquared(m),E);x<1e-4&&(x=1),w<1e-4&&(w=x),A<1e-4&&(A=x),iO.initNonuniformCatmullRom(d.x,_.x,v.x,m.x,w,x,A),sO.initNonuniformCatmullRom(d.y,_.y,v.y,m.y,w,x,A),oO.initNonuniformCatmullRom(d.z,_.z,v.z,m.z,w,x,A)}else this.curveType==="catmullrom"&&(iO.initCatmullRom(d.x,_.x,v.x,m.x,this.tension),sO.initCatmullRom(d.y,_.y,v.y,m.y,this.tension),oO.initCatmullRom(d.z,_.z,v.z,m.z,this.tension));return i.set(iO.calc(h),sO.calc(h),oO.calc(h)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Te().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uH(n,e,t,i,s){const o=(i-e)*.5,l=(s-t)*.5,u=n*n,h=n*u;return(2*t-2*i+o+l)*h+(-3*t+3*i-2*o-l)*u+o*n+t}function A_e(n,e){const t=1-n;return t*t*e}function I_e(n,e){return 2*(1-n)*n*e}function R_e(n,e){return n*n*e}function mS(n,e,t,i){return A_e(n,e)+I_e(n,t)+R_e(n,i)}function k_e(n,e){const t=1-n;return t*t*t*e}function O_e(n,e){const t=1-n;return 3*t*t*n*e}function L_e(n,e){return 3*(1-n)*n*n*e}function D_e(n,e){return n*n*n*e}function gS(n,e,t,i,s){return k_e(n,e)+O_e(n,t)+L_e(n,i)+D_e(n,s)}class EP extends _g{constructor(e=new Lt,t=new Lt,i=new Lt,s=new Lt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Lt){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(gS(e,s.x,o.x,l.x,u.x),gS(e,s.y,o.y,l.y,u.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class O7 extends _g{constructor(e=new Te,t=new Te,i=new Te,s=new Te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new Te){const i=t,s=this.v0,o=this.v1,l=this.v2,u=this.v3;return i.set(gS(e,s.x,o.x,l.x,u.x),gS(e,s.y,o.y,l.y,u.y),gS(e,s.z,o.z,l.z,u.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $R extends _g{constructor(e=new Lt,t=new Lt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Lt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new Lt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L7 extends _g{constructor(e=new Te,t=new Te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Te){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $P extends _g{constructor(e=new Lt,t=new Lt,i=new Lt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Lt){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(mS(e,s.x,o.x,l.x),mS(e,s.y,o.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SP extends _g{constructor(e=new Te,t=new Te,i=new Te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Te){const i=t,s=this.v0,o=this.v1,l=this.v2;return i.set(mS(e,s.x,o.x,l.x),mS(e,s.y,o.y,l.y),mS(e,s.z,o.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wP extends _g{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Lt){const i=t,s=this.points,o=(s.length-1)*e,l=Math.floor(o),u=o-l,h=s[l===0?l:l-1],d=s[l],m=s[l>s.length-2?s.length-1:l+1],_=s[l>s.length-3?s.length-1:l+2];return i.set(uH(u,h.x,d.x,m.x,_.x),uH(u,h.y,d.y,m.y,_.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new Lt().fromArray(s))}return this}}var xP=Object.freeze({__proto__:null,ArcCurve:R7,CatmullRomCurve3:k7,CubicBezierCurve:EP,CubicBezierCurve3:O7,EllipseCurve:ER,LineCurve:$R,LineCurve3:L7,QuadraticBezierCurve:$P,QuadraticBezierCurve3:SP,SplineCurve:wP});class D7 extends _g{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new $R(t,e))}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const l=s[o]-i,u=this.curves[o],h=u.getLength(),d=h===0?0:1-l/h;return u.getPointAt(d,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const l=o[s],u=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(u);for(let d=0;d<h.length;d++){const m=h[d];i&&i.equals(m)||(t.push(m),i=m)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new xP[s.type]().fromJSON(s))}return this}}class iw extends D7{constructor(e){super(),this.type="Path",this.currentPoint=new Lt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new $R(this.currentPoint.clone(),new Lt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new $P(this.currentPoint.clone(),new Lt(e,t),new Lt(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,l){const u=new EP(this.currentPoint.clone(),new Lt(e,t),new Lt(i,s),new Lt(o,l));return this.curves.push(u),this.currentPoint.set(o,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new wP(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(e+u,t+h,i,s,o,l),this}absarc(e,t,i,s,o,l){return this.absellipse(e,t,i,i,s,o,l),this}ellipse(e,t,i,s,o,l,u,h){const d=this.currentPoint.x,m=this.currentPoint.y;return this.absellipse(e+d,t+m,i,s,o,l,u,h),this}absellipse(e,t,i,s,o,l,u,h){const d=new ER(e,t,i,s,o,l,u,h);if(this.curves.length>0){const _=d.getPoint(0);_.equals(this.currentPoint)||this.lineTo(_.x,_.y)}this.curves.push(d);const m=d.getPoint(1);return this.currentPoint.copy(m),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class hb extends kr{constructor(e=[new Lt(0,-.5),new Lt(.5,0),new Lt(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Uu(s,0,Math.PI*2);const o=[],l=[],u=[],h=[],d=[],m=1/t,_=new Te,v=new Lt,E=new Te,w=new Te,x=new Te;let A=0,O=0;for(let k=0;k<=e.length-1;k++)switch(k){case 0:A=e[k+1].x-e[k].x,O=e[k+1].y-e[k].y,E.x=O*1,E.y=-A,E.z=O*0,x.copy(E),E.normalize(),h.push(E.x,E.y,E.z);break;case e.length-1:h.push(x.x,x.y,x.z);break;default:A=e[k+1].x-e[k].x,O=e[k+1].y-e[k].y,E.x=O*1,E.y=-A,E.z=O*0,w.copy(E),E.x+=x.x,E.y+=x.y,E.z+=x.z,E.normalize(),h.push(E.x,E.y,E.z),x.copy(w)}for(let k=0;k<=t;k++){const N=i+k*m*s,D=Math.sin(N),U=Math.cos(N);for(let F=0;F<=e.length-1;F++){_.x=e[F].x*D,_.y=e[F].y,_.z=e[F].x*U,l.push(_.x,_.y,_.z),v.x=k/t,v.y=F/(e.length-1),u.push(v.x,v.y);const H=h[3*F+0]*D,z=h[3*F+1],J=h[3*F+0]*U;d.push(H,z,J)}}for(let k=0;k<t;k++)for(let N=0;N<e.length-1;N++){const D=N+k*e.length,U=D,F=D+e.length,H=D+e.length+1,z=D+1;o.push(U,F,z),o.push(H,z,F)}this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("uv",new Pn(u,2)),this.setAttribute("normal",new Pn(d,3))}static fromJSON(e){return new hb(e.points,e.segments,e.phiStart,e.phiLength)}}class PT extends hb{constructor(e=1,t=1,i=4,s=8){const o=new iw;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new PT(e.radius,e.length,e.capSegments,e.radialSegments)}}class FT extends kr{constructor(e=1,t=8,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],l=[],u=[],h=[],d=new Te,m=new Lt;l.push(0,0,0),u.push(0,0,1),h.push(.5,.5);for(let _=0,v=3;_<=t;_++,v+=3){const E=i+_/t*s;d.x=e*Math.cos(E),d.y=e*Math.sin(E),l.push(d.x,d.y,d.z),u.push(0,0,1),m.x=(l[v]/e+1)/2,m.y=(l[v+1]/e+1)/2,h.push(m.x,m.y)}for(let _=1;_<=t;_++)o.push(_,_+1,0);this.setIndex(o),this.setAttribute("position",new Pn(l,3)),this.setAttribute("normal",new Pn(u,3)),this.setAttribute("uv",new Pn(h,2))}static fromJSON(e){return new FT(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ha extends kr{constructor(e=1,t=1,i=1,s=8,o=1,l=!1,u=0,h=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:l,thetaStart:u,thetaLength:h};const d=this;s=Math.floor(s),o=Math.floor(o);const m=[],_=[],v=[],E=[];let w=0;const x=[],A=i/2;let O=0;k(),l===!1&&(e>0&&N(!0),t>0&&N(!1)),this.setIndex(m),this.setAttribute("position",new Pn(_,3)),this.setAttribute("normal",new Pn(v,3)),this.setAttribute("uv",new Pn(E,2));function k(){const D=new Te,U=new Te;let F=0;const H=(t-e)/i;for(let z=0;z<=o;z++){const J=[],te=z/o,re=te*(t-e)+e;for(let ie=0;ie<=s;ie++){const de=ie/s,oe=de*h+u,ue=Math.sin(oe),ge=Math.cos(oe);U.x=re*ue,U.y=-te*i+A,U.z=re*ge,_.push(U.x,U.y,U.z),D.set(ue,H,ge).normalize(),v.push(D.x,D.y,D.z),E.push(de,1-te),J.push(w++)}x.push(J)}for(let z=0;z<s;z++)for(let J=0;J<o;J++){const te=x[J][z],re=x[J+1][z],ie=x[J+1][z+1],de=x[J][z+1];m.push(te,re,de),m.push(re,ie,de),F+=6}d.addGroup(O,F,0),O+=F}function N(D){const U=w,F=new Lt,H=new Te;let z=0;const J=D===!0?e:t,te=D===!0?1:-1;for(let ie=1;ie<=s;ie++)_.push(0,A*te,0),v.push(0,te,0),E.push(.5,.5),w++;const re=w;for(let ie=0;ie<=s;ie++){const de=ie/s*h+u,oe=Math.cos(de),ue=Math.sin(de);H.x=J*ue,H.y=A*te,H.z=J*oe,_.push(H.x,H.y,H.z),v.push(0,te,0),F.x=oe*.5+.5,F.y=ue*.5*te+.5,E.push(F.x,F.y),w++}for(let ie=0;ie<s;ie++){const de=U+ie,oe=re+ie;D===!0?m.push(oe,oe+1,de):m.push(oe+1,oe,de),z+=3}d.addGroup(O,z,D===!0?1:2),O+=z}}static fromJSON(e){return new ha(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class UT extends ha{constructor(e=1,t=1,i=8,s=1,o=!1,l=0,u=Math.PI*2){super(0,e,t,i,s,o,l,u),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u}}static fromJSON(e){return new UT(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class t0 extends kr{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],l=[];u(s),d(i),m(),this.setAttribute("position",new Pn(o,3)),this.setAttribute("normal",new Pn(o.slice(),3)),this.setAttribute("uv",new Pn(l,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function u(k){const N=new Te,D=new Te,U=new Te;for(let F=0;F<t.length;F+=3)E(t[F+0],N),E(t[F+1],D),E(t[F+2],U),h(N,D,U,k)}function h(k,N,D,U){const F=U+1,H=[];for(let z=0;z<=F;z++){H[z]=[];const J=k.clone().lerp(D,z/F),te=N.clone().lerp(D,z/F),re=F-z;for(let ie=0;ie<=re;ie++)ie===0&&z===F?H[z][ie]=J:H[z][ie]=J.clone().lerp(te,ie/re)}for(let z=0;z<F;z++)for(let J=0;J<2*(F-z)-1;J++){const te=Math.floor(J/2);J%2===0?(v(H[z][te+1]),v(H[z+1][te]),v(H[z][te])):(v(H[z][te+1]),v(H[z+1][te+1]),v(H[z+1][te]))}}function d(k){const N=new Te;for(let D=0;D<o.length;D+=3)N.x=o[D+0],N.y=o[D+1],N.z=o[D+2],N.normalize().multiplyScalar(k),o[D+0]=N.x,o[D+1]=N.y,o[D+2]=N.z}function m(){const k=new Te;for(let N=0;N<o.length;N+=3){k.x=o[N+0],k.y=o[N+1],k.z=o[N+2];const D=A(k)/2/Math.PI+.5,U=O(k)/Math.PI+.5;l.push(D,1-U)}w(),_()}function _(){for(let k=0;k<l.length;k+=6){const N=l[k+0],D=l[k+2],U=l[k+4],F=Math.max(N,D,U),H=Math.min(N,D,U);F>.9&&H<.1&&(N<.2&&(l[k+0]+=1),D<.2&&(l[k+2]+=1),U<.2&&(l[k+4]+=1))}}function v(k){o.push(k.x,k.y,k.z)}function E(k,N){const D=k*3;N.x=e[D+0],N.y=e[D+1],N.z=e[D+2]}function w(){const k=new Te,N=new Te,D=new Te,U=new Te,F=new Lt,H=new Lt,z=new Lt;for(let J=0,te=0;J<o.length;J+=9,te+=6){k.set(o[J+0],o[J+1],o[J+2]),N.set(o[J+3],o[J+4],o[J+5]),D.set(o[J+6],o[J+7],o[J+8]),F.set(l[te+0],l[te+1]),H.set(l[te+2],l[te+3]),z.set(l[te+4],l[te+5]),U.copy(k).add(N).add(D).divideScalar(3);const re=A(U);x(F,te+0,k,re),x(H,te+2,N,re),x(z,te+4,D,re)}}function x(k,N,D,U){U<0&&k.x===1&&(l[N]=k.x-1),D.x===0&&D.z===0&&(l[N]=U/2/Math.PI+.5)}function A(k){return Math.atan2(k.z,-k.x)}function O(k){return Math.atan2(-k.y,Math.sqrt(k.x*k.x+k.z*k.z))}}static fromJSON(e){return new t0(e.vertices,e.indices,e.radius,e.details)}}class zT extends t0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zT(e.radius,e.detail)}}const WC=new Te,VC=new Te,aO=new Te,jC=new yf;class N7 extends kr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Yy*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],d=["a","b","c"],m=new Array(3),_={},v=[];for(let E=0;E<u;E+=3){o?(h[0]=o.getX(E),h[1]=o.getX(E+1),h[2]=o.getX(E+2)):(h[0]=E,h[1]=E+1,h[2]=E+2);const{a:w,b:x,c:A}=jC;if(w.fromBufferAttribute(l,h[0]),x.fromBufferAttribute(l,h[1]),A.fromBufferAttribute(l,h[2]),jC.getNormal(aO),m[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,m[2]=`${Math.round(A.x*i)},${Math.round(A.y*i)},${Math.round(A.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let O=0;O<3;O++){const k=(O+1)%3,N=m[O],D=m[k],U=jC[d[O]],F=jC[d[k]],H=`${N}_${D}`,z=`${D}_${N}`;z in _&&_[z]?(aO.dot(_[z].normal)<=s&&(v.push(U.x,U.y,U.z),v.push(F.x,F.y,F.z)),_[z]=null):H in _||(_[H]={index0:h[O],index1:h[k],normal:aO.clone()})}}for(const E in _)if(_[E]){const{index0:w,index1:x}=_[E];WC.fromBufferAttribute(l,w),VC.fromBufferAttribute(l,x),v.push(WC.x,WC.y,WC.z),v.push(VC.x,VC.y,VC.z)}this.setAttribute("position",new Pn(v,3))}}}class Qy extends iw{constructor(e){super(e),this.uuid=xf(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new iw().fromJSON(s))}return this}}const N_e={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let o=B7(n,0,s,t,!0);const l=[];if(!o||o.next===o.prev)return l;let u,h,d,m,_,v,E;if(i&&(o=z_e(n,e,o,t)),n.length>80*t){u=d=n[0],h=m=n[1];for(let w=t;w<s;w+=t)_=n[w],v=n[w+1],_<u&&(u=_),v<h&&(h=v),_>d&&(d=_),v>m&&(m=v);E=Math.max(d-u,m-h),E=E!==0?1/E:0}return sw(o,l,t,u,h,E),l}};function B7(n,e,t,i,s){let o,l;if(s===q_e(n,e,t,i)>0)for(o=e;o<t;o+=i)l=cH(o,n[o],n[o+1],l);else for(o=t-i;o>=e;o-=i)l=cH(o,n[o],n[o+1],l);return l&&SR(l,l.next)&&(aw(l),l=l.next),l}function Ev(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(SR(t,t.next)||Ol(t.prev,t,t.next)===0)){if(aw(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function sw(n,e,t,i,s,o,l){if(!n)return;!l&&o&&j_e(n,i,s,o);let u=n,h,d;for(;n.prev!==n.next;){if(h=n.prev,d=n.next,o?P_e(n,i,s,o):B_e(n)){e.push(h.i/t),e.push(n.i/t),e.push(d.i/t),aw(n),n=d.next,u=d.next;continue}if(n=d,n===u){l?l===1?(n=F_e(Ev(n),e,t),sw(n,e,t,i,s,o,2)):l===2&&U_e(n,e,t,i,s,o):sw(Ev(n),e,t,i,s,o,1);break}}}function B_e(n){const e=n.prev,t=n,i=n.next;if(Ol(e,t,i)>=0)return!1;let s=n.next.next;for(;s!==n.prev;){if(aT(e.x,e.y,t.x,t.y,i.x,i.y,s.x,s.y)&&Ol(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function P_e(n,e,t,i){const s=n.prev,o=n,l=n.next;if(Ol(s,o,l)>=0)return!1;const u=s.x<o.x?s.x<l.x?s.x:l.x:o.x<l.x?o.x:l.x,h=s.y<o.y?s.y<l.y?s.y:l.y:o.y<l.y?o.y:l.y,d=s.x>o.x?s.x>l.x?s.x:l.x:o.x>l.x?o.x:l.x,m=s.y>o.y?s.y>l.y?s.y:l.y:o.y>l.y?o.y:l.y,_=zD(u,h,e,t,i),v=zD(d,m,e,t,i);let E=n.prevZ,w=n.nextZ;for(;E&&E.z>=_&&w&&w.z<=v;){if(E!==n.prev&&E!==n.next&&aT(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&Ol(E.prev,E,E.next)>=0||(E=E.prevZ,w!==n.prev&&w!==n.next&&aT(s.x,s.y,o.x,o.y,l.x,l.y,w.x,w.y)&&Ol(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;E&&E.z>=_;){if(E!==n.prev&&E!==n.next&&aT(s.x,s.y,o.x,o.y,l.x,l.y,E.x,E.y)&&Ol(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=v;){if(w!==n.prev&&w!==n.next&&aT(s.x,s.y,o.x,o.y,l.x,l.y,w.x,w.y)&&Ol(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function F_e(n,e,t){let i=n;do{const s=i.prev,o=i.next.next;!SR(s,o)&&P7(s,i,i.next,o)&&ow(s,o)&&ow(o,s)&&(e.push(s.i/t),e.push(i.i/t),e.push(o.i/t),aw(i),aw(i.next),i=n=o),i=i.next}while(i!==n);return Ev(i)}function U_e(n,e,t,i,s,o){let l=n;do{let u=l.next.next;for(;u!==l.prev;){if(l.i!==u.i&&K_e(l,u)){let h=F7(l,u);l=Ev(l,l.next),h=Ev(h,h.next),sw(l,e,t,i,s,o),sw(h,e,t,i,s,o);return}u=u.next}l=l.next}while(l!==n)}function z_e(n,e,t,i){const s=[];let o,l,u,h,d;for(o=0,l=e.length;o<l;o++)u=e[o]*i,h=o<l-1?e[o+1]*i:n.length,d=B7(n,u,h,i,!1),d===d.next&&(d.steiner=!0),s.push(Y_e(d));for(s.sort(H_e),o=0;o<s.length;o++)G_e(s[o],t),t=Ev(t,t.next);return t}function H_e(n,e){return n.x-e.x}function G_e(n,e){if(e=W_e(n,e),e){const t=F7(e,n);Ev(e,e.next),Ev(t,t.next)}}function W_e(n,e){let t=e;const i=n.x,s=n.y;let o=-1/0,l;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const v=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>o){if(o=v,v===i){if(s===t.y)return t;if(s===t.next.y)return t.next}l=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!l)return null;if(i===o)return l;const u=l,h=l.x,d=l.y;let m=1/0,_;t=l;do i>=t.x&&t.x>=h&&i!==t.x&&aT(s<d?i:o,s,h,d,s<d?o:i,s,t.x,t.y)&&(_=Math.abs(s-t.y)/(i-t.x),ow(t,n)&&(_<m||_===m&&(t.x>l.x||t.x===l.x&&V_e(l,t)))&&(l=t,m=_)),t=t.next;while(t!==u);return l}function V_e(n,e){return Ol(n.prev,n,e.prev)<0&&Ol(e.next,n,n.next)<0}function j_e(n,e,t,i){let s=n;do s.z===null&&(s.z=zD(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,X_e(s)}function X_e(n){let e,t,i,s,o,l,u,h,d=1;do{for(t=n,n=null,o=null,l=0;t;){for(l++,i=t,u=0,e=0;e<d&&(u++,i=i.nextZ,!!i);e++);for(h=d;u>0||h>0&&i;)u!==0&&(h===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,u--):(s=i,i=i.nextZ,h--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=i}o.nextZ=null,d*=2}while(l>1);return n}function zD(n,e,t,i,s){return n=32767*(n-t)*s,e=32767*(e-i)*s,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Y_e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function aT(n,e,t,i,s,o,l,u){return(s-l)*(e-u)-(n-l)*(o-u)>=0&&(n-l)*(i-u)-(t-l)*(e-u)>=0&&(t-l)*(o-u)-(s-l)*(i-u)>=0}function K_e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!J_e(n,e)&&(ow(n,e)&&ow(e,n)&&Q_e(n,e)&&(Ol(n.prev,n,e.prev)||Ol(n,e.prev,e))||SR(n,e)&&Ol(n.prev,n,n.next)>0&&Ol(e.prev,e,e.next)>0)}function Ol(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function SR(n,e){return n.x===e.x&&n.y===e.y}function P7(n,e,t,i){const s=YC(Ol(n,e,t)),o=YC(Ol(n,e,i)),l=YC(Ol(t,i,n)),u=YC(Ol(t,i,e));return!!(s!==o&&l!==u||s===0&&XC(n,t,e)||o===0&&XC(n,i,e)||l===0&&XC(t,n,i)||u===0&&XC(t,e,i))}function XC(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function YC(n){return n>0?1:n<0?-1:0}function J_e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&P7(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ow(n,e){return Ol(n.prev,n,n.next)<0?Ol(n,e,n.next)>=0&&Ol(n,n.prev,e)>=0:Ol(n,e,n.prev)<0||Ol(n,n.next,e)<0}function Q_e(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function F7(n,e){const t=new HD(n.i,n.x,n.y),i=new HD(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function cH(n,e,t,i){const s=new HD(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function aw(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function HD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function q_e(n,e,t,i){let s=0;for(let o=e,l=t-i;o<t;o+=i)s+=(n[l]-n[o])*(n[o+1]+n[l+1]),l=o;return s}class Qg{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return Qg.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];hH(e),dH(i,e);let l=e.length;t.forEach(hH);for(let h=0;h<t.length;h++)s.push(l),l+=t[h].length,dH(i,t[h]);const u=N_e.triangulate(i,s);for(let h=0;h<u.length;h+=3)o.push(u.slice(h,h+3));return o}}function hH(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function dH(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class HT extends kr{constructor(e=new Qy([new Lt(.5,.5),new Lt(-.5,.5),new Lt(-.5,-.5),new Lt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];l(d)}this.setAttribute("position",new Pn(s,3)),this.setAttribute("uv",new Pn(o,2)),this.computeVertexNormals();function l(u){const h=[],d=t.curveSegments!==void 0?t.curveSegments:12,m=t.steps!==void 0?t.steps:1,_=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,E=t.bevelThickness!==void 0?t.bevelThickness:.2,w=t.bevelSize!==void 0?t.bevelSize:E-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,A=t.bevelSegments!==void 0?t.bevelSegments:3;const O=t.extrudePath,k=t.UVGenerator!==void 0?t.UVGenerator:Z_e;let N,D=!1,U,F,H,z;O&&(N=O.getSpacedPoints(m),D=!0,v=!1,U=O.computeFrenetFrames(m,!1),F=new Te,H=new Te,z=new Te),v||(A=0,E=0,w=0,x=0);const J=u.extractPoints(d);let te=J.shape;const re=J.holes;if(!Qg.isClockWise(te)){te=te.reverse();for(let De=0,Se=re.length;De<Se;De++){const Pe=re[De];Qg.isClockWise(Pe)&&(re[De]=Pe.reverse())}}const ie=Qg.triangulateShape(te,re),de=te;for(let De=0,Se=re.length;De<Se;De++){const Pe=re[De];te=te.concat(Pe)}function oe(De,Se,Pe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Se.clone().multiplyScalar(Pe).add(De)}const ue=te.length,ge=ie.length;function Ae(De,Se,Pe){let rt,We,wt;const xt=De.x-Se.x,ht=De.y-Se.y,St=Pe.x-De.x,It=Pe.y-De.y,mt=xt*xt+ht*ht,ve=xt*It-ht*St;if(Math.abs(ve)>Number.EPSILON){const ee=Math.sqrt(mt),ke=Math.sqrt(St*St+It*It),ot=Se.x-ht/ee,dt=Se.y+xt/ee,$t=Pe.x-It/ke,ct=Pe.y+St/ke,Ge=(($t-ot)*It-(ct-dt)*St)/(xt*It-ht*St);rt=ot+xt*Ge-De.x,We=dt+ht*Ge-De.y;const Me=rt*rt+We*We;if(Me<=2)return new Lt(rt,We);wt=Math.sqrt(Me/2)}else{let ee=!1;xt>Number.EPSILON?St>Number.EPSILON&&(ee=!0):xt<-Number.EPSILON?St<-Number.EPSILON&&(ee=!0):Math.sign(ht)===Math.sign(It)&&(ee=!0),ee?(rt=-ht,We=xt,wt=Math.sqrt(mt)):(rt=xt,We=ht,wt=Math.sqrt(mt/2))}return new Lt(rt/wt,We/wt)}const j=[];for(let De=0,Se=de.length,Pe=Se-1,rt=De+1;De<Se;De++,Pe++,rt++)Pe===Se&&(Pe=0),rt===Se&&(rt=0),j[De]=Ae(de[De],de[Pe],de[rt]);const Z=[];let ne,le=j.concat();for(let De=0,Se=re.length;De<Se;De++){const Pe=re[De];ne=[];for(let rt=0,We=Pe.length,wt=We-1,xt=rt+1;rt<We;rt++,wt++,xt++)wt===We&&(wt=0),xt===We&&(xt=0),ne[rt]=Ae(Pe[rt],Pe[wt],Pe[xt]);Z.push(ne),le=le.concat(ne)}for(let De=0;De<A;De++){const Se=De/A,Pe=E*Math.cos(Se*Math.PI/2),rt=w*Math.sin(Se*Math.PI/2)+x;for(let We=0,wt=de.length;We<wt;We++){const xt=oe(de[We],j[We],rt);Re(xt.x,xt.y,-Pe)}for(let We=0,wt=re.length;We<wt;We++){const xt=re[We];ne=Z[We];for(let ht=0,St=xt.length;ht<St;ht++){const It=oe(xt[ht],ne[ht],rt);Re(It.x,It.y,-Pe)}}}const _e=w+x;for(let De=0;De<ue;De++){const Se=v?oe(te[De],le[De],_e):te[De];D?(H.copy(U.normals[0]).multiplyScalar(Se.x),F.copy(U.binormals[0]).multiplyScalar(Se.y),z.copy(N[0]).add(H).add(F),Re(z.x,z.y,z.z)):Re(Se.x,Se.y,0)}for(let De=1;De<=m;De++)for(let Se=0;Se<ue;Se++){const Pe=v?oe(te[Se],le[Se],_e):te[Se];D?(H.copy(U.normals[De]).multiplyScalar(Pe.x),F.copy(U.binormals[De]).multiplyScalar(Pe.y),z.copy(N[De]).add(H).add(F),Re(z.x,z.y,z.z)):Re(Pe.x,Pe.y,_/m*De)}for(let De=A-1;De>=0;De--){const Se=De/A,Pe=E*Math.cos(Se*Math.PI/2),rt=w*Math.sin(Se*Math.PI/2)+x;for(let We=0,wt=de.length;We<wt;We++){const xt=oe(de[We],j[We],rt);Re(xt.x,xt.y,_+Pe)}for(let We=0,wt=re.length;We<wt;We++){const xt=re[We];ne=Z[We];for(let ht=0,St=xt.length;ht<St;ht++){const It=oe(xt[ht],ne[ht],rt);D?Re(It.x,It.y+N[m-1].y,N[m-1].x+Pe):Re(It.x,It.y,_+Pe)}}}Oe(),xe();function Oe(){const De=s.length/3;if(v){let Se=0,Pe=ue*Se;for(let rt=0;rt<ge;rt++){const We=ie[rt];Je(We[2]+Pe,We[1]+Pe,We[0]+Pe)}Se=m+A*2,Pe=ue*Se;for(let rt=0;rt<ge;rt++){const We=ie[rt];Je(We[0]+Pe,We[1]+Pe,We[2]+Pe)}}else{for(let Se=0;Se<ge;Se++){const Pe=ie[Se];Je(Pe[2],Pe[1],Pe[0])}for(let Se=0;Se<ge;Se++){const Pe=ie[Se];Je(Pe[0]+ue*m,Pe[1]+ue*m,Pe[2]+ue*m)}}i.addGroup(De,s.length/3-De,0)}function xe(){const De=s.length/3;let Se=0;Xe(de,Se),Se+=de.length;for(let Pe=0,rt=re.length;Pe<rt;Pe++){const We=re[Pe];Xe(We,Se),Se+=We.length}i.addGroup(De,s.length/3-De,1)}function Xe(De,Se){let Pe=De.length;for(;--Pe>=0;){const rt=Pe;let We=Pe-1;We<0&&(We=De.length-1);for(let wt=0,xt=m+A*2;wt<xt;wt++){const ht=ue*wt,St=ue*(wt+1),It=Se+rt+ht,mt=Se+We+ht,ve=Se+We+St,ee=Se+rt+St;et(It,mt,ve,ee)}}}function Re(De,Se,Pe){h.push(De),h.push(Se),h.push(Pe)}function Je(De,Se,Pe){at(De),at(Se),at(Pe);const rt=s.length/3,We=k.generateTopUV(i,s,rt-3,rt-2,rt-1);Qe(We[0]),Qe(We[1]),Qe(We[2])}function et(De,Se,Pe,rt){at(De),at(Se),at(rt),at(Se),at(Pe),at(rt);const We=s.length/3,wt=k.generateSideWallUV(i,s,We-6,We-3,We-2,We-1);Qe(wt[0]),Qe(wt[1]),Qe(wt[3]),Qe(wt[1]),Qe(wt[2]),Qe(wt[3])}function at(De){s.push(h[De*3+0]),s.push(h[De*3+1]),s.push(h[De*3+2])}function Qe(De){o.push(De.x),o.push(De.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return eve(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const u=t[e.shapes[o]];i.push(u)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new xP[s.type]().fromJSON(s)),new HT(i,e.options)}}const Z_e={generateTopUV:function(n,e,t,i,s){const o=e[t*3],l=e[t*3+1],u=e[i*3],h=e[i*3+1],d=e[s*3],m=e[s*3+1];return[new Lt(o,l),new Lt(u,h),new Lt(d,m)]},generateSideWallUV:function(n,e,t,i,s,o){const l=e[t*3],u=e[t*3+1],h=e[t*3+2],d=e[i*3],m=e[i*3+1],_=e[i*3+2],v=e[s*3],E=e[s*3+1],w=e[s*3+2],x=e[o*3],A=e[o*3+1],O=e[o*3+2];return Math.abs(u-m)<Math.abs(l-d)?[new Lt(l,1-h),new Lt(d,1-_),new Lt(v,1-w),new Lt(x,1-O)]:[new Lt(u,1-h),new Lt(m,1-_),new Lt(E,1-w),new Lt(A,1-O)]}};function eve(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class GT extends t0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new GT(e.radius,e.detail)}}class ag extends t0{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ag(e.radius,e.detail)}}class WT extends kr{constructor(e=.5,t=1,i=8,s=1,o=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:l},i=Math.max(3,i),s=Math.max(1,s);const u=[],h=[],d=[],m=[];let _=e;const v=(t-e)/s,E=new Te,w=new Lt;for(let x=0;x<=s;x++){for(let A=0;A<=i;A++){const O=o+A/i*l;E.x=_*Math.cos(O),E.y=_*Math.sin(O),h.push(E.x,E.y,E.z),d.push(0,0,1),w.x=(E.x/t+1)/2,w.y=(E.y/t+1)/2,m.push(w.x,w.y)}_+=v}for(let x=0;x<s;x++){const A=x*(i+1);for(let O=0;O<i;O++){const k=O+A,N=k,D=k+i+1,U=k+i+2,F=k+1;u.push(N,D,F),u.push(D,U,F)}}this.setIndex(u),this.setAttribute("position",new Pn(h,3)),this.setAttribute("normal",new Pn(d,3)),this.setAttribute("uv",new Pn(m,2))}static fromJSON(e){return new WT(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class VT extends kr{constructor(e=new Qy([new Lt(0,.5),new Lt(-.5,-.5),new Lt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],l=[];let u=0,h=0;if(Array.isArray(e)===!1)d(e);else for(let m=0;m<e.length;m++)d(e[m]),this.addGroup(u,h,m),u+=h,h=0;this.setIndex(i),this.setAttribute("position",new Pn(s,3)),this.setAttribute("normal",new Pn(o,3)),this.setAttribute("uv",new Pn(l,2));function d(m){const _=s.length/3,v=m.extractPoints(t);let E=v.shape;const w=v.holes;Qg.isClockWise(E)===!1&&(E=E.reverse());for(let A=0,O=w.length;A<O;A++){const k=w[A];Qg.isClockWise(k)===!0&&(w[A]=k.reverse())}const x=Qg.triangulateShape(E,w);for(let A=0,O=w.length;A<O;A++){const k=w[A];E=E.concat(k)}for(let A=0,O=E.length;A<O;A++){const k=E[A];s.push(k.x,k.y,0),o.push(0,0,1),l.push(k.x,k.y)}for(let A=0,O=x.length;A<O;A++){const k=x[A],N=k[0]+_,D=k[1]+_,U=k[2]+_;i.push(N,D,U),h+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return tve(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];i.push(l)}return new VT(i,e.curveSegments)}}function tve(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class fg extends kr{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,l=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const h=Math.min(l+u,Math.PI);let d=0;const m=[],_=new Te,v=new Te,E=[],w=[],x=[],A=[];for(let O=0;O<=i;O++){const k=[],N=O/i;let D=0;O==0&&l==0?D=.5/t:O==i&&h==Math.PI&&(D=-.5/t);for(let U=0;U<=t;U++){const F=U/t;_.x=-e*Math.cos(s+F*o)*Math.sin(l+N*u),_.y=e*Math.cos(l+N*u),_.z=e*Math.sin(s+F*o)*Math.sin(l+N*u),w.push(_.x,_.y,_.z),v.copy(_).normalize(),x.push(v.x,v.y,v.z),A.push(F+D,1-N),k.push(d++)}m.push(k)}for(let O=0;O<i;O++)for(let k=0;k<t;k++){const N=m[O][k+1],D=m[O][k],U=m[O+1][k],F=m[O+1][k+1];(O!==0||l>0)&&E.push(N,D,F),(O!==i-1||h<Math.PI)&&E.push(D,U,F)}this.setIndex(E),this.setAttribute("position",new Pn(w,3)),this.setAttribute("normal",new Pn(x,3)),this.setAttribute("uv",new Pn(A,2))}static fromJSON(e){return new fg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class jT extends t0{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jT(e.radius,e.detail)}}class sg extends kr{constructor(e=1,t=.4,i=8,s=6,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const l=[],u=[],h=[],d=[],m=new Te,_=new Te,v=new Te;for(let E=0;E<=i;E++)for(let w=0;w<=s;w++){const x=w/s*o,A=E/i*Math.PI*2;_.x=(e+t*Math.cos(A))*Math.cos(x),_.y=(e+t*Math.cos(A))*Math.sin(x),_.z=t*Math.sin(A),u.push(_.x,_.y,_.z),m.x=e*Math.cos(x),m.y=e*Math.sin(x),v.subVectors(_,m).normalize(),h.push(v.x,v.y,v.z),d.push(w/s),d.push(E/i)}for(let E=1;E<=i;E++)for(let w=1;w<=s;w++){const x=(s+1)*E+w-1,A=(s+1)*(E-1)+w-1,O=(s+1)*(E-1)+w,k=(s+1)*E+w;l.push(x,A,k),l.push(A,O,k)}this.setIndex(l),this.setAttribute("position",new Pn(u,3)),this.setAttribute("normal",new Pn(h,3)),this.setAttribute("uv",new Pn(d,2))}static fromJSON(e){return new sg(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class XT extends kr{constructor(e=1,t=.4,i=64,s=8,o=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:l},i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],m=[],_=new Te,v=new Te,E=new Te,w=new Te,x=new Te,A=new Te,O=new Te;for(let N=0;N<=i;++N){const D=N/i*o*Math.PI*2;k(D,o,l,e,E),k(D+.01,o,l,e,w),A.subVectors(w,E),O.addVectors(w,E),x.crossVectors(A,O),O.crossVectors(x,A),x.normalize(),O.normalize();for(let U=0;U<=s;++U){const F=U/s*Math.PI*2,H=-t*Math.cos(F),z=t*Math.sin(F);_.x=E.x+(H*O.x+z*x.x),_.y=E.y+(H*O.y+z*x.y),_.z=E.z+(H*O.z+z*x.z),h.push(_.x,_.y,_.z),v.subVectors(_,E).normalize(),d.push(v.x,v.y,v.z),m.push(N/i),m.push(U/s)}}for(let N=1;N<=i;N++)for(let D=1;D<=s;D++){const U=(s+1)*(N-1)+(D-1),F=(s+1)*N+(D-1),H=(s+1)*N+D,z=(s+1)*(N-1)+D;u.push(U,F,z),u.push(F,H,z)}this.setIndex(u),this.setAttribute("position",new Pn(h,3)),this.setAttribute("normal",new Pn(d,3)),this.setAttribute("uv",new Pn(m,2));function k(N,D,U,F,H){const z=Math.cos(N),J=Math.sin(N),te=U/D*N,re=Math.cos(te);H.x=F*(2+re)*.5*z,H.y=F*(2+re)*J*.5,H.z=F*Math.sin(te)*.5}}static fromJSON(e){return new XT(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class YT extends kr{constructor(e=new SP(new Te(-1,-1,0),new Te(-1,1,0),new Te(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const l=e.computeFrenetFrames(t,o);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const u=new Te,h=new Te,d=new Lt;let m=new Te;const _=[],v=[],E=[],w=[];x(),this.setIndex(w),this.setAttribute("position",new Pn(_,3)),this.setAttribute("normal",new Pn(v,3)),this.setAttribute("uv",new Pn(E,2));function x(){for(let N=0;N<t;N++)A(N);A(o===!1?t:0),k(),O()}function A(N){m=e.getPointAt(N/t,m);const D=l.normals[N],U=l.binormals[N];for(let F=0;F<=s;F++){const H=F/s*Math.PI*2,z=Math.sin(H),J=-Math.cos(H);h.x=J*D.x+z*U.x,h.y=J*D.y+z*U.y,h.z=J*D.z+z*U.z,h.normalize(),v.push(h.x,h.y,h.z),u.x=m.x+i*h.x,u.y=m.y+i*h.y,u.z=m.z+i*h.z,_.push(u.x,u.y,u.z)}}function O(){for(let N=1;N<=t;N++)for(let D=1;D<=s;D++){const U=(s+1)*(N-1)+(D-1),F=(s+1)*N+(D-1),H=(s+1)*N+D,z=(s+1)*(N-1)+D;w.push(U,F,z),w.push(F,H,z)}}function k(){for(let N=0;N<=t;N++)for(let D=0;D<=s;D++)d.x=N/t,d.y=D/s,E.push(d.x,d.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new YT(new xP[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class CP extends kr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new Te,o=new Te;if(e.index!==null){const l=e.attributes.position,u=e.index;let h=e.groups;h.length===0&&(h=[{start:0,count:u.count,materialIndex:0}]);for(let d=0,m=h.length;d<m;++d){const _=h[d],v=_.start,E=_.count;for(let w=v,x=v+E;w<x;w+=3)for(let A=0;A<3;A++){const O=u.getX(w+A),k=u.getX(w+(A+1)%3);s.fromBufferAttribute(l,O),o.fromBufferAttribute(l,k),pH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const l=e.attributes.position;for(let u=0,h=l.count/3;u<h;u++)for(let d=0;d<3;d++){const m=3*u+d,_=3*u+(d+1)%3;s.fromBufferAttribute(l,m),o.fromBufferAttribute(l,_),pH(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new Pn(t,3))}}}function pH(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var fH=Object.freeze({__proto__:null,BoxGeometry:Na,BoxBufferGeometry:Na,CapsuleGeometry:PT,CapsuleBufferGeometry:PT,CircleGeometry:FT,CircleBufferGeometry:FT,ConeGeometry:UT,ConeBufferGeometry:UT,CylinderGeometry:ha,CylinderBufferGeometry:ha,DodecahedronGeometry:zT,DodecahedronBufferGeometry:zT,EdgesGeometry:N7,ExtrudeGeometry:HT,ExtrudeBufferGeometry:HT,IcosahedronGeometry:GT,IcosahedronBufferGeometry:GT,LatheGeometry:hb,LatheBufferGeometry:hb,OctahedronGeometry:ag,OctahedronBufferGeometry:ag,PlaneGeometry:pg,PlaneBufferGeometry:pg,PolyhedronGeometry:t0,PolyhedronBufferGeometry:t0,RingGeometry:WT,RingBufferGeometry:WT,ShapeGeometry:VT,ShapeBufferGeometry:VT,SphereGeometry:fg,SphereBufferGeometry:fg,TetrahedronGeometry:jT,TetrahedronBufferGeometry:jT,TorusGeometry:sg,TorusBufferGeometry:sg,TorusKnotGeometry:XT,TorusKnotBufferGeometry:XT,TubeGeometry:YT,TubeBufferGeometry:YT,WireframeGeometry:CP});class U7 extends Hc{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new _n(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class z7 extends ph{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class lw extends Hc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _n(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tb,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class H7 extends lw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Uu(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _n(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new _n(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _n(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class G7 extends Hc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _n(16777215),this.specular=new _n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tb,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W7 extends Hc{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _n(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tb,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MP extends Hc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tb,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class V7 extends Hc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kw,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class j7 extends Hc{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _n(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Tb,this.normalScale=new Lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X7 extends Id{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function um(n,e,t){return AP(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function zy(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function AP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Y7(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function GD(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,l=0;l!==i;++o){const u=t[o]*e;for(let h=0;h!==e;++h)s[l++]=n[u+h]}return s}function IP(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let l=o[i];if(l!==void 0)if(Array.isArray(l))do l=o[i],l!==void 0&&(e.push(o.time),t.push.apply(t,l)),o=n[s++];while(o!==void 0);else if(l.toArray!==void 0)do l=o[i],l!==void 0&&(e.push(o.time),l.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do l=o[i],l!==void 0&&(e.push(o.time),t.push(l)),o=n[s++];while(o!==void 0)}function nve(n,e,t,i,s=30){const o=n.clone();o.name=e;const l=[];for(let h=0;h<o.tracks.length;++h){const d=o.tracks[h],m=d.getValueSize(),_=[],v=[];for(let E=0;E<d.times.length;++E){const w=d.times[E]*s;if(!(w<t||w>=i)){_.push(d.times[E]);for(let x=0;x<m;++x)v.push(d.values[E*m+x])}}_.length!==0&&(d.times=zy(_,d.times.constructor),d.values=zy(v,d.values.constructor),l.push(d))}o.tracks=l;let u=1/0;for(let h=0;h<o.tracks.length;++h)u>o.tracks[h].times[0]&&(u=o.tracks[h].times[0]);for(let h=0;h<o.tracks.length;++h)o.tracks[h].shift(-1*u);return o.resetDuration(),o}function rve(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let l=0;l<s;++l){const u=t.tracks[l],h=u.ValueTypeName;if(h==="bool"||h==="string")continue;const d=n.tracks.find(function(O){return O.name===u.name&&O.ValueTypeName===h});if(d===void 0)continue;let m=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=_/3);let v=0;const E=d.getValueSize();d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=E/3);const w=u.times.length-1;let x;if(o<=u.times[0]){const O=m,k=_-m;x=um(u.values,O,k)}else if(o>=u.times[w]){const O=w*_+m,k=O+_-m;x=um(u.values,O,k)}else{const O=u.createInterpolant(),k=m,N=_-m;O.evaluate(o),x=um(O.resultBuffer,k,N)}h==="quaternion"&&new Wo().fromArray(x).normalize().conjugate().toArray(x);const A=d.times.length;for(let O=0;O<A;++O){const k=O*E+v;if(h==="quaternion")Wo.multiplyQuaternionsFlat(d.values,k,x,0,d.values,k);else{const N=E-v*2;for(let D=0;D<N;++D)d.values[k+D]-=x[D]}}}return n.blendMode=hP,n}var ive=Object.freeze({__proto__:null,arraySlice:um,convertArray:zy,isTypedArray:AP,getKeyframeOrder:Y7,sortedArray:GD,flattenJSON:IP,subclip:nve,makeClipAdditive:rve});class Pw{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let l;n:{r:if(!(e<s)){for(let u=i+2;;){if(s===void 0){if(e<o)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(o=s,s=t[++i],e<s)break t}l=t.length;break n}if(!(e>=o)){const u=t[1];e<u&&(i=2,o=u);for(let h=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(s=o,o=t[--i-1],e>=o)break t}l=i,i=0;break n}break e}for(;i<l;){const u=i+l>>>1;e<t[u]?l=u:i=u+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let l=0;l!==s;++l)t[l]=i[o+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class K7 extends Pw{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Py,endingEnd:Py}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,l=e+1,u=s[o],h=s[l];if(u===void 0)switch(this.getSettings_().endingStart){case Fy:o=e,u=2*t-i;break;case ZS:o=s.length-2,u=t+s[o]-s[o+1];break;default:o=e,u=i}if(h===void 0)switch(this.getSettings_().endingEnd){case Fy:l=e,h=2*i-t;break;case ZS:l=1,h=i+s[1]-s[0];break;default:l=e-1,h=t}const d=(i-t)*.5,m=this.valueSize;this._weightPrev=d/(t-u),this._weightNext=d/(h-i),this._offsetPrev=o*m,this._offsetNext=l*m}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=this._offsetPrev,_=this._offsetNext,v=this._weightPrev,E=this._weightNext,w=(i-t)/(s-t),x=w*w,A=x*w,O=-v*A+2*v*x-v*w,k=(1+v)*A+(-1.5-2*v)*x+(-.5+v)*w+1,N=(-1-E)*A+(1.5+E)*x+.5*w,D=E*A-E*x;for(let U=0;U!==u;++U)o[U]=O*l[m+U]+k*l[d+U]+N*l[h+U]+D*l[_+U];return o}}class RP extends Pw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=e*u,d=h-u,m=(i-t)/(s-t),_=1-m;for(let v=0;v!==u;++v)o[v]=l[d+v]*_+l[h+v]*m;return o}}class J7 extends Pw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class vg{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zy(t,this.TimeBufferType),this.values=zy(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:zy(e.times,Array),values:zy(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new J7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new RP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new K7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case QS:t=this.InterpolantFactoryMethodDiscrete;break;case qS:t=this.InterpolantFactoryMethodLinear;break;case HM:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return QS;case this.InterpolantFactoryMethodLinear:return qS;case this.InterpolantFactoryMethodSmooth:return HM}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,l=s-1;for(;o!==s&&i[o]<e;)++o;for(;l!==-1&&i[l]>t;)--l;if(++l,o!==0||l!==s){o>=l&&(l=Math.max(l,1),o=l-1);const u=this.getValueSize();this.times=um(i,o,l),this.values=um(this.values,o*u,l*u)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let u=0;u!==o;u++){const h=i[u];if(typeof h=="number"&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,u,h),e=!1;break}if(l!==null&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,u,h,l),e=!1;break}l=h}if(s!==void 0&&AP(s))for(let u=0,h=s.length;u!==h;++u){const d=s[u];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,d),e=!1;break}}return e}optimize(){const e=um(this.times),t=um(this.values),i=this.getValueSize(),s=this.getInterpolation()===HM,o=e.length-1;let l=1;for(let u=1;u<o;++u){let h=!1;const d=e[u],m=e[u+1];if(d!==m&&(u!==1||d!==e[0]))if(s)h=!0;else{const _=u*i,v=_-i,E=_+i;for(let w=0;w!==i;++w){const x=t[_+w];if(x!==t[v+w]||x!==t[E+w]){h=!0;break}}}if(h){if(u!==l){e[l]=e[u];const _=u*i,v=l*i;for(let E=0;E!==i;++E)t[v+E]=t[_+E]}++l}}if(o>0){e[l]=e[o];for(let u=o*i,h=l*i,d=0;d!==i;++d)t[h+d]=t[u+d];++l}return l!==e.length?(this.times=um(e,0,l),this.values=um(t,0,l*i)):(this.times=e,this.values=t),this}clone(){const e=um(this.times,0),t=um(this.values,0),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}vg.prototype.TimeBufferType=Float32Array;vg.prototype.ValueBufferType=Float32Array;vg.prototype.DefaultInterpolation=qS;class $b extends vg{}$b.prototype.ValueTypeName="bool";$b.prototype.ValueBufferType=Array;$b.prototype.DefaultInterpolation=QS;$b.prototype.InterpolantFactoryMethodLinear=void 0;$b.prototype.InterpolantFactoryMethodSmooth=void 0;class kP extends vg{}kP.prototype.ValueTypeName="color";class uw extends vg{}uw.prototype.ValueTypeName="number";class Q7 extends Pw{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,l=this.sampleValues,u=this.valueSize,h=(i-t)/(s-t);let d=e*u;for(let m=d+u;d!==m;d+=4)Wo.slerpFlat(o,0,l,d-u,l,d,h);return o}}class hE extends vg{InterpolantFactoryMethodLinear(e){return new Q7(this.times,this.values,this.getValueSize(),e)}}hE.prototype.ValueTypeName="quaternion";hE.prototype.DefaultInterpolation=qS;hE.prototype.InterpolantFactoryMethodSmooth=void 0;class Sb extends vg{}Sb.prototype.ValueTypeName="string";Sb.prototype.ValueBufferType=Array;Sb.prototype.DefaultInterpolation=QS;Sb.prototype.InterpolantFactoryMethodLinear=void 0;Sb.prototype.InterpolantFactoryMethodSmooth=void 0;class cw extends vg{}cw.prototype.ValueTypeName="vector";class hw{constructor(e,t=-1,i,s=dR){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=xf(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let l=0,u=i.length;l!==u;++l)t.push(ove(i[l]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,l=i.length;o!==l;++o)t.push(vg.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,l=[];for(let u=0;u<o;u++){let h=[],d=[];h.push((u+o-1)%o,u,(u+1)%o),d.push(0,1,0);const m=Y7(h);h=GD(h,1,m),d=GD(d,1,m),!s&&h[0]===0&&(h.push(o),d.push(d[0])),l.push(new uw(".morphTargetInfluences["+t[u].name+"]",h,d).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let u=0,h=e.length;u<h;u++){const d=e[u],m=d.name.match(o);if(m&&m.length>1){const _=m[1];let v=s[_];v||(s[_]=v=[]),v.push(d)}}const l=[];for(const u in s)l.push(this.CreateFromMorphTargetSequence(u,s[u],t,i));return l}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(m,_,v,E,w){if(v.length!==0){const x=[],A=[];IP(v,x,A,E),x.length!==0&&w.push(new m(_,x,A))}},s=[],o=e.name||"default",l=e.fps||30,u=e.blendMode;let h=e.length||-1;const d=e.hierarchy||[];for(let m=0;m<d.length;m++){const _=d[m].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const v={};let E;for(E=0;E<_.length;E++)if(_[E].morphTargets)for(let w=0;w<_[E].morphTargets.length;w++)v[_[E].morphTargets[w]]=-1;for(const w in v){const x=[],A=[];for(let O=0;O!==_[E].morphTargets.length;++O){const k=_[E];x.push(k.time),A.push(k.morphTarget===w?1:0)}s.push(new uw(".morphTargetInfluence["+w+"]",x,A))}h=v.length*l}else{const v=".bones["+t[m].name+"]";i(cw,v+".position",_,"pos",s),i(hE,v+".quaternion",_,"rot",s),i(cw,v+".scale",_,"scl",s)}}return s.length===0?null:new this(o,h,s,u)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sve(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return uw;case"vector":case"vector2":case"vector3":case"vector4":return cw;case"color":return kP;case"quaternion":return hE;case"bool":case"boolean":return $b;case"string":return Sb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ove(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=sve(n.type);if(n.times===void 0){const t=[],i=[];IP(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const db={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class OP{constructor(e,t,i){const s=this;let o=!1,l=0,u=0,h;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(m){u++,o===!1&&s.onStart!==void 0&&s.onStart(m,l,u),o=!0},this.itemEnd=function(m){l++,s.onProgress!==void 0&&s.onProgress(m,l,u),l===u&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(m){s.onError!==void 0&&s.onError(m)},this.resolveURL=function(m){return h?h(m):m},this.setURLModifier=function(m){return h=m,this},this.addHandler=function(m,_){return d.push(m,_),this},this.removeHandler=function(m){const _=d.indexOf(m);return _!==-1&&d.splice(_,2),this},this.getHandler=function(m){for(let _=0,v=d.length;_<v;_+=2){const E=d[_],w=d[_+1];if(E.global&&(E.lastIndex=0),E.test(m))return w}return null}}}const q7=new OP;class Df{constructor(e){this.manager=e!==void 0?e:q7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const D0={};class ave extends Error{constructor(e,t){super(e),this.response=t}}class e_ extends Df{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=db.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(D0[e]!==void 0){D0[e].push({onLoad:t,onProgress:i,onError:s});return}D0[e]=[],D0[e].push({onLoad:t,onProgress:i,onError:s});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),u=this.mimeType,h=this.responseType;fetch(l).then(d=>{if(d.status===200||d.status===0){if(d.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||d.body===void 0||d.body.getReader===void 0)return d;const m=D0[e],_=d.body.getReader(),v=d.headers.get("Content-Length"),E=v?parseInt(v):0,w=E!==0;let x=0;const A=new ReadableStream({start(O){k();function k(){_.read().then(({done:N,value:D})=>{if(N)O.close();else{x+=D.byteLength;const U=new ProgressEvent("progress",{lengthComputable:w,loaded:x,total:E});for(let F=0,H=m.length;F<H;F++){const z=m[F];z.onProgress&&z.onProgress(U)}O.enqueue(D),k()}})}}});return new Response(A)}else throw new ave(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(h){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(m=>new DOMParser().parseFromString(m,u));case"json":return d.json();default:if(u===void 0)return d.text();{const m=/charset="?([^;"\s]*)"?/i.exec(u),_=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(_);return d.arrayBuffer().then(E=>v.decode(E))}}}).then(d=>{db.add(e,d);const m=D0[e];delete D0[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onLoad&&E.onLoad(d)}}).catch(d=>{const m=D0[e];if(m===void 0)throw this.manager.itemError(e),d;delete D0[e];for(let _=0,v=m.length;_<v;_++){const E=m[_];E.onError&&E.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new e_(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=hw.parse(e[i]);t.push(s)}return t}}class uve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=[],u=new I7,h=new e_(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(o.withCredentials);let d=0;function m(_){h.load(e[_],function(v){const E=o.parse(v,!0);l[_]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},d+=1,d===6&&(E.mipmapCount===1&&(u.minFilter=Vo),u.image=l,u.format=E.format,u.needsUpdate=!0,t&&t(u))},i,s)}if(Array.isArray(e))for(let _=0,v=e.length;_<v;++_)m(_);else h.load(e,function(_){const v=o.parse(_,!0);if(v.isCubemap){const E=v.mipmaps.length/v.mipmapCount;for(let w=0;w<E;w++){l[w]={mipmaps:[]};for(let x=0;x<v.mipmapCount;x++)l[w].mipmaps.push(v.mipmaps[w*v.mipmapCount+x]),l[w].format=v.format,l[w].width=v.width,l[w].height=v.height}u.image=l}else u.image.width=v.width,u.image.height=v.height,u.mipmaps=v.mipmaps;v.mipmapCount===1&&(u.minFilter=Vo),u.format=v.format,u.needsUpdate=!0,t&&t(u)},i,s);return u}}class dw extends Df{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=db.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u=nw("img");function h(){m(),db.add(e,this),t&&t(this),o.manager.itemEnd(e)}function d(_){m(),s&&s(_),o.manager.itemError(e),o.manager.itemEnd(e)}function m(){u.removeEventListener("load",h,!1),u.removeEventListener("error",d,!1)}return u.addEventListener("load",h,!1),u.addEventListener("error",d,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(e),u.src=e,u}}class cve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=new Nw,l=new dw(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let u=0;function h(d){l.load(e[d],function(m){o.images[d]=m,u++,u===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let d=0;d<e.length;++d)h(d);return o}}class hve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new bT,u=new e_(this.manager);return u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(o.withCredentials),u.load(e,function(h){const d=o.parse(h);!d||(d.image!==void 0?l.image=d.image:d.data!==void 0&&(l.image.width=d.width,l.image.height=d.height,l.image.data=d.data),l.wrapS=d.wrapS!==void 0?d.wrapS:Zd,l.wrapT=d.wrapT!==void 0?d.wrapT:Zd,l.magFilter=d.magFilter!==void 0?d.magFilter:Vo,l.minFilter=d.minFilter!==void 0?d.minFilter:Vo,l.anisotropy=d.anisotropy!==void 0?d.anisotropy:1,d.encoding!==void 0&&(l.encoding=d.encoding),d.flipY!==void 0&&(l.flipY=d.flipY),d.format!==void 0&&(l.format=d.format),d.type!==void 0&&(l.type=d.type),d.mipmaps!==void 0&&(l.mipmaps=d.mipmaps,l.minFilter=bb),d.mipmapCount===1&&(l.minFilter=Vo),d.generateMipmaps!==void 0&&(l.generateMipmaps=d.generateMipmaps),l.needsUpdate=!0,t&&t(l,d))},i,s),l}}class dve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=new Bl,l=new dw(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(u){o.image=u,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class Rv extends ss{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new _n(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Z7 extends Rv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ss.DefaultUp),this.updateMatrix(),this.groundColor=new _n(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const mH=new Mr,gH=new Te,_H=new Te;class LP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Lt(512,512),this.map=null,this.mapPass=null,this.matrix=new Mr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fR,this._frameExtents=new Lt(1,1),this._viewportCount=1,this._viewports=[new Mi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;gH.setFromMatrixPosition(e.matrixWorld),t.position.copy(gH),_H.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(_H),t.updateMatrixWorld(),mH.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mH),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pve extends LP{constructor(){super(new Io(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=tw*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class ej extends Rv{constructor(e,t,i=0,s=Math.PI/3,o=0,l=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ss.DefaultUp),this.updateMatrix(),this.target=new ss,this.distance=i,this.angle=s,this.penumbra=o,this.decay=l,this.shadow=new pve}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vH=new Mr,R$=new Te,lO=new Te;class fve extends LP{constructor(){super(new Io(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Lt(4,2),this._viewportCount=6,this._viewports=[new Mi(2,1,1,1),new Mi(0,1,1,1),new Mi(3,1,1,1),new Mi(1,1,1,1),new Mi(3,0,1,1),new Mi(1,0,1,1)],this._cubeDirections=[new Te(1,0,0),new Te(-1,0,0),new Te(0,0,1),new Te(0,0,-1),new Te(0,1,0),new Te(0,-1,0)],this._cubeUps=[new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,0,1),new Te(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),R$.setFromMatrixPosition(e.matrixWorld),i.position.copy(R$),lO.copy(i.position),lO.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(lO),i.updateMatrixWorld(),s.makeTranslation(-R$.x,-R$.y,-R$.z),vH.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vH)}}class tj extends Rv{constructor(e,t,i=0,s=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new fve}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mve extends LP{constructor(){super(new Jg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nj extends Rv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ss.DefaultUp),this.updateMatrix(),this.target=new ss,this.shadow=new mve}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rj extends Rv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ij extends Rv{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class sj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*s),t.addScaledVector(l[2],.488603*o),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*s)),t.addScaledVector(l[5],1.092548*(s*o)),t.addScaledVector(l[6],.315392*(3*o*o-1)),t.addScaledVector(l[7],1.092548*(i*o)),t.addScaledVector(l[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*s),t.addScaledVector(l[2],2*.511664*o),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*s),t.addScaledVector(l[5],2*.429043*s*o),t.addScaledVector(l[6],.743125*o*o-.247708),t.addScaledVector(l[7],2*.429043*i*o),t.addScaledVector(l[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class wR extends Rv{constructor(e=new sj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xR extends Df{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,l=new e_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=xR.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new _n().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==1&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const l=e.uniforms[o];switch(s.uniforms[o]={},l.type){case"t":s.uniforms[o].value=i(l.value);break;case"c":s.uniforms[o].value=new _n().setHex(l.value);break;case"v2":s.uniforms[o].value=new Lt().fromArray(l.value);break;case"v3":s.uniforms[o].value=new Te().fromArray(l.value);break;case"v4":s.uniforms[o].value=new Mi().fromArray(l.value);break;case"m3":s.uniforms[o].value=new tp().fromArray(l.value);break;case"m4":s.uniforms[o].value=new Mr().fromArray(l.value);break;default:s.uniforms[o].value=l.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.shading!==void 0&&(s.flatShading=e.shading===1),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new Lt().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new Lt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:U7,SpriteMaterial:yP,RawShaderMaterial:z7,ShaderMaterial:ph,PointsMaterial:TR,MeshPhysicalMaterial:H7,MeshStandardMaterial:lw,MeshPhongMaterial:G7,MeshToonMaterial:W7,MeshNormalMaterial:MP,MeshLambertMaterial:V7,MeshDepthMaterial:Bw,MeshDistanceMaterial:gR,MeshBasicMaterial:gg,MeshMatcapMaterial:j7,LineDashedMaterial:X7,LineBasicMaterial:Id,Material:Hc};return new t[e]}}class WD{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class CR extends kr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class oj extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new e_(o.manager);l.setPath(o.path),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(u){try{t(o.parse(JSON.parse(u)))}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(v,E){if(t[E]!==void 0)return t[E];const w=v.interleavedBuffers[E],x=o(v,w.buffer),A=iT(w.type,x),O=new yR(A,w.stride);return O.uuid=w.uuid,t[E]=O,O}function o(v,E){if(i[E]!==void 0)return i[E];const w=v.arrayBuffers[E],x=new Uint32Array(w).buffer;return i[E]=x,x}const l=e.isInstancedBufferGeometry?new CR:new kr,u=e.data.index;if(u!==void 0){const v=iT(u.type,u.array);l.setIndex(new Ms(v,1))}const h=e.data.attributes;for(const v in h){const E=h[v];let w;if(E.isInterleavedBufferAttribute){const x=s(e.data,E.data);w=new Tf(x,E.itemSize,E.offset,E.normalized)}else{const x=iT(E.type,E.array),A=E.isInstancedBufferAttribute?cb:Ms;w=new A(x,E.itemSize,E.normalized)}E.name!==void 0&&(w.name=E.name),E.usage!==void 0&&w.setUsage(E.usage),E.updateRange!==void 0&&(w.updateRange.offset=E.updateRange.offset,w.updateRange.count=E.updateRange.count),l.setAttribute(v,w)}const d=e.data.morphAttributes;if(d)for(const v in d){const E=d[v],w=[];for(let x=0,A=E.length;x<A;x++){const O=E[x];let k;if(O.isInterleavedBufferAttribute){const N=s(e.data,O.data);k=new Tf(N,O.itemSize,O.offset,O.normalized)}else{const N=iT(O.type,O.array);k=new Ms(N,O.itemSize,O.normalized)}O.name!==void 0&&(k.name=O.name),w.push(k)}l.morphAttributes[v]=w}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,E=m.length;v!==E;++v){const w=m[v];l.addGroup(w.start,w.count,w.materialIndex)}const _=e.data.boundingSphere;if(_!==void 0){const v=new Te;_.center!==void 0&&v.fromArray(_.center),l.boundingSphere=new s0(v,_.radius)}return e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class gve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=this.path===""?WD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const u=new e_(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){let d=null;try{d=JSON.parse(h)}catch(_){s!==void 0&&s(_),console.error("THREE:ObjectLoader: Can't parse "+e+".",_.message);return}const m=d.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(d,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?WD.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new e_(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const l=await o.loadAsync(e,t),u=JSON.parse(l),h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(u)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),l=this.parseImages(e.images,function(){t!==void 0&&t(d)}),u=this.parseTextures(e.textures,l),h=this.parseMaterials(e.materials,u),d=this.parseObject(e.object,o,h,u,i),m=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,m),t!==void 0){let _=!1;for(const v in l)if(l[v].data instanceof HTMLImageElement){_=!0;break}_===!1&&t(d)}return d}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,t),d=this.parseSkeletons(e.skeletons,h);return this.bindSkeletons(h,d),h}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new Qy().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=new bR().fromJSON(e[o],s);i[u.uuid]=u}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new oj;for(let o=0,l=e.length;o<l;o++){let u;const h=e[o];switch(h.type){case"BufferGeometry":case"InstancedBufferGeometry":u=s.parse(h);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:h.type in fH?u=fH[h.type].fromJSON(h,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${h.type}"`)}u.uuid=h.uuid,h.name!==void 0&&(u.name=h.name),u.isBufferGeometry===!0&&h.userData!==void 0&&(u.userData=h.userData),i[h.uuid]=u}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new xR;o.setTextures(t);for(let l=0,u=e.length;l<u;l++){const h=e[l];if(h.type==="MultiMaterial"){const d=[];for(let m=0;m<h.materials.length;m++){const _=h.materials[m];i[_.uuid]===void 0&&(i[_.uuid]=o.parse(_)),d.push(i[_.uuid])}s[h.uuid]=d}else i[h.uuid]===void 0&&(i[h.uuid]=o.parse(h)),s[h.uuid]=i[h.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=hw.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function l(h){return i.manager.itemStart(h),o.load(h,function(){i.manager.itemEnd(h)},void 0,function(){i.manager.itemError(h),i.manager.itemEnd(h)})}function u(h){if(typeof h=="string"){const d=h,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:i.resourcePath+d;return l(m)}else return h.data?{data:iT(h.type,h.data),width:h.width,height:h.height}:null}if(e!==void 0&&e.length>0){const h=new OP(t);o=new dw(h),o.setCrossOrigin(this.crossOrigin);for(let d=0,m=e.length;d<m;d++){const _=e[d],v=_.url;if(Array.isArray(v)){const E=[];for(let w=0,x=v.length;w<x;w++){const A=v[w],O=u(A);O!==null&&(O instanceof HTMLImageElement?E.push(O):E.push(new bT(O.data,O.width,O.height)))}s[_.uuid]=new Uy(E)}else{const E=u(_.url);s[_.uuid]=new Uy(E)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:t.resourcePath+u;return await s.loadAsync(h)}else return l.data?{data:iT(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){s=new dw(this.manager),s.setCrossOrigin(this.crossOrigin);for(let l=0,u=e.length;l<u;l++){const h=e[l],d=h.url;if(Array.isArray(d)){const m=[];for(let _=0,v=d.length;_<v;_++){const E=d[_],w=await o(E);w!==null&&(w instanceof HTMLImageElement?m.push(w):m.push(new bT(w.data,w.width,w.height)))}i[h.uuid]=new Uy(m)}else{const m=await o(h.url);i[h.uuid]=new Uy(m)}}}return i}parseTextures(e,t){function i(o,l){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),l[o])}const s={};if(e!==void 0)for(let o=0,l=e.length;o<l;o++){const u=e[o];u.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),t[u.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",u.image);const h=t[u.image],d=h.data;let m;Array.isArray(d)?(m=new Nw,d.length===6&&(m.needsUpdate=!0)):(d&&d.data?m=new bT:m=new Bl,d&&(m.needsUpdate=!0)),m.source=h,m.uuid=u.uuid,u.name!==void 0&&(m.name=u.name),u.mapping!==void 0&&(m.mapping=i(u.mapping,_ve)),u.offset!==void 0&&m.offset.fromArray(u.offset),u.repeat!==void 0&&m.repeat.fromArray(u.repeat),u.center!==void 0&&m.center.fromArray(u.center),u.rotation!==void 0&&(m.rotation=u.rotation),u.wrap!==void 0&&(m.wrapS=i(u.wrap[0],yH),m.wrapT=i(u.wrap[1],yH)),u.format!==void 0&&(m.format=u.format),u.type!==void 0&&(m.type=u.type),u.encoding!==void 0&&(m.encoding=u.encoding),u.minFilter!==void 0&&(m.minFilter=i(u.minFilter,bH)),u.magFilter!==void 0&&(m.magFilter=i(u.magFilter,bH)),u.anisotropy!==void 0&&(m.anisotropy=u.anisotropy),u.flipY!==void 0&&(m.flipY=u.flipY),u.premultiplyAlpha!==void 0&&(m.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&&(m.unpackAlignment=u.unpackAlignment),u.userData!==void 0&&(m.userData=u.userData),s[u.uuid]=m}return s}parseObject(e,t,i,s,o){let l;function u(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function h(v){if(v!==void 0){if(Array.isArray(v)){const E=[];for(let w=0,x=v.length;w<x;w++){const A=v[w];i[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),E.push(i[A])}return E}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function d(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let m,_;switch(e.type){case"Scene":l=new rw,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new _n(e.background):l.background=d(e.background)),e.environment!==void 0&&(l.environment=d(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new vR(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new _R(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":l=new Io(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Jg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new rj(e.color,e.intensity);break;case"DirectionalLight":l=new nj(e.color,e.intensity);break;case"PointLight":l=new tj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new ij(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new ej(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":l=new Z7(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new wR().fromJSON(e);break;case"SkinnedMesh":m=u(e.geometry),_=h(e.material),l=new x7(m,_),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":m=u(e.geometry),_=h(e.material),l=new bn(m,_);break;case"InstancedMesh":m=u(e.geometry),_=h(e.material);const v=e.count,E=e.instanceMatrix,w=e.instanceColor;l=new C7(m,_,v),l.instanceMatrix=new cb(new Float32Array(E.array),16),w!==void 0&&(l.instanceColor=new cb(new Float32Array(w.array),w.itemSize));break;case"LOD":l=new w7;break;case"Line":l=new wd(u(e.geometry),h(e.material));break;case"LineLoop":l=new M7(u(e.geometry),h(e.material));break;case"LineSegments":l=new o0(u(e.geometry),h(e.material));break;case"PointCloud":case"Points":l=new A7(u(e.geometry),h(e.material));break;case"Sprite":l=new S7(h(e.material));break;case"Group":l=new oT;break;case"Bone":l=new bP;break;default:l=new ss}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let E=0;E<v.length;E++)l.add(this.parseObject(v[E],t,i,s,o))}if(e.animations!==void 0){const v=e.animations;for(let E=0;E<v.length;E++){const w=v[E];l.animations.push(o[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const v=e.levels;for(let E=0;E<v.length;E++){const w=v[E],x=l.getObjectByProperty("uuid",w.object);x!==void 0&&l.addLevel(x,w.distance)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}}const _ve={UVMapping:hR,CubeReflectionMapping:yv,CubeRefractionMapping:bv,EquirectangularReflectionMapping:YS,EquirectangularRefractionMapping:KS,CubeUVReflectionMapping:lE},yH={RepeatWrapping:DT,ClampToEdgeWrapping:Zd,MirroredRepeatWrapping:JS},bH={NearestFilter:da,NearestMipmapNearestFilter:PA,NearestMipmapLinearFilter:FA,LinearFilter:Vo,LinearMipmapNearestFilter:uP,LinearMipmapLinearFilter:bb};class vve extends Df{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,l=db.get(e);if(l!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(l),o.manager.itemEnd(e)},0),l;const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,fetch(e,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(h){db.add(e,h),t&&t(h),o.manager.itemEnd(e)}).catch(function(h){s&&s(h),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let KC;const DP={getContext:function(){return KC===void 0&&(KC=new(window.AudioContext||window.webkitAudioContext)),KC},setContext:function(n){KC=n}};class yve extends Df{constructor(e){super(e)}load(e,t,i,s){const o=this,l=new e_(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{const h=u.slice(0);DP.getContext().decodeAudioData(h,function(d){t(d)})}catch(h){s?s(h):console.error(h),o.manager.itemError(e)}},i,s)}}class bve extends wR{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const s=new _n().set(e),o=new _n().set(t),l=new Te(s.r,s.g,s.b),u=new Te(o.r,o.g,o.b),h=Math.sqrt(Math.PI),d=h*Math.sqrt(.75);this.sh.coefficients[0].copy(l).add(u).multiplyScalar(h),this.sh.coefficients[1].copy(l).sub(u).multiplyScalar(d)}}class Tve extends wR{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new _n().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const TH=new Mr,EH=new Mr,ly=new Mr;class Eve{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Io,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Io,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ly.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Yy*t.fov*.5)/t.zoom;let l,u;EH.elements[12]=-i,TH.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,ly.elements[0]=2*t.near/(u-l),ly.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(ly),l=-o*t.aspect-s,u=o*t.aspect-s,ly.elements[0]=2*t.near/(u-l),ly.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(ly)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(EH),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(TH)}}class NP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$H(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=$H();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function $H(){return(typeof performance>"u"?Date:performance).now()}const uy=new Te,SH=new Wo,$ve=new Te,cy=new Te;class Sve extends ss{constructor(){super(),this.type="AudioListener",this.context=DP.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new NP}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uy,SH,$ve),cy.set(0,0,-1).applyQuaternion(SH),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(uy.x,s),t.positionY.linearRampToValueAtTime(uy.y,s),t.positionZ.linearRampToValueAtTime(uy.z,s),t.forwardX.linearRampToValueAtTime(cy.x,s),t.forwardY.linearRampToValueAtTime(cy.y,s),t.forwardZ.linearRampToValueAtTime(cy.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(uy.x,uy.y,uy.z),t.setOrientation(cy.x,cy.y,cy.z,i.x,i.y,i.z)}}class aj extends ss{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const hy=new Te,wH=new Wo,wve=new Te,dy=new Te;class xve extends aj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(hy,wH,wve),dy.set(0,0,1).applyQuaternion(wH);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hy.x,i),t.positionY.linearRampToValueAtTime(hy.y,i),t.positionZ.linearRampToValueAtTime(hy.z,i),t.orientationX.linearRampToValueAtTime(dy.x,i),t.orientationY.linearRampToValueAtTime(dy.y,i),t.orientationZ.linearRampToValueAtTime(dy.z,i)}else t.setPosition(hy.x,hy.y,hy.z),t.setOrientation(dy.x,dy.y,dy.z)}}class Cve{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class lj{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,l;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let l=this.cumulativeWeight;if(l===0){for(let u=0;u!==s;++u)i[o+u]=i[u];l=t}else{l+=t;const u=t/l;this._mixBufferRegion(i,o,0,u,s)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const h=t*this._origIndex;this._mixBufferRegion(i,s,h,1-o,t)}l>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let h=t,d=t+t;h!==d;++h)if(i[h]!==i[h+t]){u.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,l=s;o!==l;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let l=0;l!==o;++l)e[t+l]=e[i+l]}_slerp(e,t,i,s){Wo.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const l=this._workIndex*o;Wo.multiplyQuaternionsFlat(e,l,e,t,e,i),Wo.slerpFlat(e,t,e,t,e,l,s)}_lerp(e,t,i,s,o){const l=1-s;for(let u=0;u!==o;++u){const h=t+u;e[h]=e[h]*l+e[i+u]*s}}_lerpAdditive(e,t,i,s,o){for(let l=0;l!==o;++l){const u=t+l;e[u]=e[u]+e[i+l]*s}}}const BP="\\[\\]\\.:\\/",Mve=new RegExp("["+BP+"]","g"),PP="[^"+BP+"]",Ave="[^"+BP.replace("\\.","")+"]",Ive=/((?:WC+[\/:])*)/.source.replace("WC",PP),Rve=/(WCOD+)?/.source.replace("WCOD",Ave),kve=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PP),Ove=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PP),Lve=new RegExp("^"+Ive+Rve+kve+Ove+"$"),Dve=["material","materials","bones"];class Nve{constructor(e,t,i){const s=i||cs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class cs{constructor(e,t,i){this.path=t,this.parsedPath=i||cs.parseTrackName(t),this.node=cs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new cs.Composite(e,t,i):new cs(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mve,"")}static parseTrackName(e){const t=Lve.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);Dve.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===t||u.uuid===t)return u;const h=i(u.children);if(h)return h}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=cs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let d=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let m=0;m<e.length;m++)if(e[m].name===d){d=m;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(d!==void 0){if(e[d]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}const l=e[s];if(l===void 0){const d=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+d+"."+s+" but it wasn't found.",e);return}let u=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?u=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}h=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else l.fromArray!==void 0&&l.toArray!==void 0?(h=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(h=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}cs.Composite=Nve;cs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};cs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};cs.prototype.GetterByBindingType=[cs.prototype._getValue_direct,cs.prototype._getValue_array,cs.prototype._getValue_arrayElement,cs.prototype._getValue_toArray];cs.prototype.SetterByBindingTypeAndVersioning=[[cs.prototype._setValue_direct,cs.prototype._setValue_direct_setNeedsUpdate,cs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cs.prototype._setValue_array,cs.prototype._setValue_array_setNeedsUpdate,cs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cs.prototype._setValue_arrayElement,cs.prototype._setValue_arrayElement_setNeedsUpdate,cs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cs.prototype._setValue_fromArray,cs.prototype._setValue_fromArray_setNeedsUpdate,cs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Bve{constructor(){this.isAnimationObjectGroup=!0,this.uuid=xf(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length;let u,h=e.length,d=this.nCachedObjects_;for(let m=0,_=arguments.length;m!==_;++m){const v=arguments[m],E=v.uuid;let w=t[E];if(w===void 0){w=h++,t[E]=w,e.push(v);for(let x=0,A=l;x!==A;++x)o[x].push(new cs(v,i[x],s[x]))}else if(w<d){u=e[w];const x=--d,A=e[x];t[A.uuid]=w,e[w]=A,t[E]=x,e[x]=v;for(let O=0,k=l;O!==k;++O){const N=o[O],D=N[x];let U=N[w];N[w]=D,U===void 0&&(U=new cs(v,i[O],s[O])),N[x]=U}}else e[w]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],d=h.uuid,m=t[d];if(m!==void 0&&m>=o){const _=o++,v=e[_];t[v.uuid]=m,e[m]=v,t[d]=_,e[_]=h;for(let E=0,w=s;E!==w;++E){const x=i[E],A=x[_],O=x[m];x[m]=A,x[_]=O}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,l=e.length;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],m=d.uuid,_=t[m];if(_!==void 0)if(delete t[m],_<o){const v=--o,E=e[v],w=--l,x=e[w];t[E.uuid]=_,e[_]=E,t[x.uuid]=v,e[v]=x,e.pop();for(let A=0,O=s;A!==O;++A){const k=i[A],N=k[v],D=k[w];k[_]=N,k[v]=D,k.pop()}}else{const v=--l,E=e[v];v>0&&(t[E.uuid]=_),e[_]=E,e.pop();for(let w=0,x=s;w!==x;++w){const A=i[w];A[_]=A[v],A.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const l=this._paths,u=this._parsedPaths,h=this._objects,d=h.length,m=this.nCachedObjects_,_=new Array(d);s=o.length,i[e]=s,l.push(e),u.push(t),o.push(_);for(let v=m,E=h.length;v!==E;++v){const w=h[v];_[v]=new cs(w,e,t)}return _}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,l=this._bindings,u=l.length-1,h=l[u],d=e[u];t[d]=i,l[i]=h,l.pop(),o[i]=o[u],o.pop(),s[i]=s[u],s.pop()}}}class Pve{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,l=o.length,u=new Array(l),h={endingStart:Py,endingEnd:Py};for(let d=0;d!==l;++d){const m=o[d].createInterpolant(null);u[d]=m,m.settings=h}this._interpolantSettings=h,this._interpolants=u,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=i7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,l=o/s,u=s/o;e.warp(1,l,t),this.warp(u,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,l=this.timeScale;let u=this._timeScaleInterpolant;u===null&&(u=s._lendControlInterpolant(),this._timeScaleInterpolant=u);const h=u.parameterPositions,d=u.sampleValues;return h[0]=o,h[1]=o+i,d[0]=e/l,d[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const h=(e-o)*i;if(h<0||i===0)return;this._startTime=null,t=i*h}t*=this._updateTimeScale(e);const l=this._updateTime(t),u=this._updateWeight(e);if(u>0){const h=this._interpolants,d=this._propertyBindings;switch(this.blendMode){case hP:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),d[m].accumulateAdditive(u);break;case dR:default:for(let m=0,_=h.length;m!==_;++m)h[m].evaluate(l),d[m].accumulate(s,u)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;i!==null&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const l=i===s7;if(e===0)return o===-1?s:l&&(o&1)===1?t-s:s;if(i===r7){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),s>=t||s<0){const u=Math.floor(s/t);s-=t*u,o+=Math.abs(u);const h=this.repetitions-o;if(h<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(h===1){const d=e<0;this._setEndings(d,!d,l)}else this._setEndings(!1,!1,l);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:u})}}else this.time=s;if(l&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=Fy,s.endingEnd=Fy):(e?s.endingStart=this.zeroSlopeAtStart?Fy:Py:s.endingStart=ZS,t?s.endingEnd=this.zeroSlopeAtEnd?Fy:Py:s.endingEnd=ZS)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let l=this._weightInterpolant;l===null&&(l=s._lendControlInterpolant(),this._weightInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=o,h[0]=t,u[1]=o+e,h[1]=i,this}}const Fve=new Float32Array(1);class Uve extends Lf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,l=e._propertyBindings,u=e._interpolants,h=i.uuid,d=this._bindingsByRootAndName;let m=d[h];m===void 0&&(m={},d[h]=m);for(let _=0;_!==o;++_){const v=s[_],E=v.name;let w=m[E];if(w!==void 0)++w.referenceCount,l[_]=w;else{if(w=l[_],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,h,E));continue}const x=t&&t._propertyBindings[_].binding.parsedPath;w=new lj(cs.create(i,E,x),v.ValueTypeName,v.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,h,E),l[_]=w}u[_].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let l=o[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=l;else{const u=l.knownActions;e._byClipCacheIndex=u.length,u.push(e)}e._cacheIndex=s.length,s.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,l=this._actionsByClip,u=l[o],h=u.knownActions,d=h[h.length-1],m=e._byClipCacheIndex;d._byClipCacheIndex=m,h[m]=d,h.pop(),e._byClipCacheIndex=null;const _=u.actionByRoot,v=(e._localRoot||this._root).uuid;delete _[v],h.length===0&&delete l[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let l=s[t];l===void 0&&(l={},s[t]=l),l[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,l=this._bindingsByRootAndName,u=l[s],h=t[t.length-1],d=e._cacheIndex;h._cacheIndex=d,t[d]=h,t.pop(),delete u[o],Object.keys(u).length===0&&delete l[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new RP(new Float32Array(2),new Float32Array(2),1,Fve),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let l=typeof e=="string"?hw.findByName(s,e):e;const u=l!==null?l.uuid:e,h=this._actionsByClip[u];let d=null;if(i===void 0&&(l!==null?i=l.blendMode:i=dR),h!==void 0){const _=h.actionByRoot[o];if(_!==void 0&&_.blendMode===i)return _;d=h.knownActions[0],l===null&&(l=d._clip)}if(l===null)return null;const m=new Pve(this,l,t,i);return this._bindAction(m,d),this._addInactiveAction(m,u,o),m}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?hw.findByName(i,e):e,l=o?o.uuid:e,u=this._actionsByClip[l];return u!==void 0&&u.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),l=this._accuIndex^=1;for(let d=0;d!==i;++d)t[d]._update(s,e,o,l);const u=this._bindings,h=this._nActiveBindings;for(let d=0;d!==h;++d)u[d].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const l=o.knownActions;for(let u=0,h=l.length;u!==h;++u){const d=l[u];this._deactivateAction(d);const m=d._cacheIndex,_=t[t.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,_._cacheIndex=m,t[m]=_,t.pop(),this._removeInactiveBindingsForAction(d)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const u=i[l].actionByRoot,h=u[t];h!==void 0&&(this._deactivateAction(h),this._removeInactiveAction(h))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const l in o){const u=o[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class is{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new is(this.value.clone===void 0?this.value:this.value.clone())}}let zve=0;class Hve extends Lf{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zve++}),this.name="",this.usage=ew,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class HA extends yR{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gve{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class FP{constructor(e,t,i=0,s=1/0){this.ray=new Lw(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Jy,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return VD(e,this,i,t),i.sort(xH),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)VD(e[s],this,i,t);return i.sort(xH),i}}function xH(n,e){return n.distance-e.distance}function VD(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const s=n.children;for(let o=0,l=s.length;o<l;o++)VD(s[o],e,t,!0)}}class jD{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Uu(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Wve{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const CH=new Lt;class Vve{constructor(e=new Lt(1/0,1/0),t=new Lt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=CH.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return CH.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const MH=new Te,JC=new Te;class UP{constructor(e=new Te,t=new Te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){MH.subVectors(e,this.start),JC.subVectors(this.end,this.start);const i=JC.dot(JC);let s=JC.dot(MH)/i;return t&&(s=Uu(s,0,1)),s}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const AH=new Te;class jve extends ss{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const i=new kr,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,u=1,h=32;l<h;l++,u++){const d=l/h*Math.PI*2,m=u/h*Math.PI*2;s.push(Math.cos(d),Math.sin(d),1,Math.cos(m),Math.sin(m),1)}i.setAttribute("position",new Pn(s,3));const o=new Id({fog:!1,toneMapped:!1});this.cone=new o0(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),AH.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(AH),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const G_=new Te,QC=new Mr,uO=new Mr;class Xve extends o0{constructor(e){const t=uj(e),i=new kr,s=[],o=[],l=new _n(0,0,1),u=new _n(0,1,0);for(let d=0;d<t.length;d++){const m=t[d];m.parent&&m.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(l.r,l.g,l.b),o.push(u.r,u.g,u.b))}i.setAttribute("position",new Pn(s,3)),i.setAttribute("color",new Pn(o,3));const h=new Id({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,h),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");uO.copy(this.root.matrixWorld).invert();for(let o=0,l=0;o<t.length;o++){const u=t[o];u.parent&&u.parent.isBone&&(QC.multiplyMatrices(uO,u.matrixWorld),G_.setFromMatrixPosition(QC),s.setXYZ(l,G_.x,G_.y,G_.z),QC.multiplyMatrices(uO,u.parent.matrixWorld),G_.setFromMatrixPosition(QC),s.setXYZ(l+1,G_.x,G_.y,G_.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function uj(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,uj(n.children[t]));return e}class Yve extends bn{constructor(e,t,i){const s=new fg(t,4,2),o=new gg({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Kve=new Te,IH=new _n,RH=new _n;class Jve extends ss{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const s=new ag(t);s.rotateY(Math.PI*.5),this.material=new gg({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),l=new Float32Array(o.count*3);s.setAttribute("color",new Ms(l,3)),this.add(new bn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");IH.copy(this.light.color),RH.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?IH:RH;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}e.lookAt(Kve.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Qve extends o0{constructor(e=10,t=10,i=4473924,s=8947848){i=new _n(i),s=new _n(s);const o=t/2,l=e/t,u=e/2,h=[],d=[];for(let v=0,E=0,w=-u;v<=t;v++,w+=l){h.push(-u,0,w,u,0,w),h.push(w,0,-u,w,0,u);const x=v===o?i:s;x.toArray(d,E),E+=3,x.toArray(d,E),E+=3,x.toArray(d,E),E+=3,x.toArray(d,E),E+=3}const m=new kr;m.setAttribute("position",new Pn(h,3)),m.setAttribute("color",new Pn(d,3));const _=new Id({vertexColors:!0,toneMapped:!1});super(m,_),this.type="GridHelper"}}class qve extends o0{constructor(e=10,t=16,i=8,s=64,o=4473924,l=8947848){o=new _n(o),l=new _n(l);const u=[],h=[];for(let _=0;_<=t;_++){const v=_/t*(Math.PI*2),E=Math.sin(v)*e,w=Math.cos(v)*e;u.push(0,0,0),u.push(E,0,w);const x=_&1?o:l;h.push(x.r,x.g,x.b),h.push(x.r,x.g,x.b)}for(let _=0;_<=i;_++){const v=_&1?o:l,E=e-e/i*_;for(let w=0;w<s;w++){let x=w/s*(Math.PI*2),A=Math.sin(x)*E,O=Math.cos(x)*E;u.push(A,0,O),h.push(v.r,v.g,v.b),x=(w+1)/s*(Math.PI*2),A=Math.sin(x)*E,O=Math.cos(x)*E,u.push(A,0,O),h.push(v.r,v.g,v.b)}}const d=new kr;d.setAttribute("position",new Pn(u,3)),d.setAttribute("color",new Pn(h,3));const m=new Id({vertexColors:!0,toneMapped:!1});super(d,m),this.type="PolarGridHelper"}}const kH=new Te,qC=new Te,OH=new Te;class Zve extends ss{constructor(e,t,i){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,t===void 0&&(t=1);let s=new kr;s.setAttribute("position",new Pn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Id({fog:!1,toneMapped:!1});this.lightPlane=new wd(s,o),this.add(this.lightPlane),s=new kr,s.setAttribute("position",new Pn([0,0,0,0,0,1],3)),this.targetLine=new wd(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){kH.setFromMatrixPosition(this.light.matrixWorld),qC.setFromMatrixPosition(this.light.target.matrixWorld),OH.subVectors(qC,kH),this.lightPlane.lookAt(qC),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(qC),this.targetLine.scale.z=OH.length()}}const ZC=new Te,iu=new uE;class eye extends o0{constructor(e){const t=new kr,i=new Id({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],l={};u("n1","n2"),u("n2","n4"),u("n4","n3"),u("n3","n1"),u("f1","f2"),u("f2","f4"),u("f4","f3"),u("f3","f1"),u("n1","f1"),u("n2","f2"),u("n3","f3"),u("n4","f4"),u("p","n1"),u("p","n2"),u("p","n3"),u("p","n4"),u("u1","u2"),u("u2","u3"),u("u3","u1"),u("c","t"),u("p","c"),u("cn1","cn2"),u("cn3","cn4"),u("cf1","cf2"),u("cf3","cf4");function u(w,x){h(w),h(x)}function h(w){s.push(0,0,0),o.push(0,0,0),l[w]===void 0&&(l[w]=[]),l[w].push(s.length/3-1)}t.setAttribute("position",new Pn(s,3)),t.setAttribute("color",new Pn(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const d=new _n(16755200),m=new _n(16711680),_=new _n(43775),v=new _n(16777215),E=new _n(3355443);this.setColors(d,m,_,v,E)}setColors(e,t,i,s,o){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,o.r,o.g,o.b),l.setXYZ(41,o.r,o.g,o.b),l.setXYZ(42,o.r,o.g,o.b),l.setXYZ(43,o.r,o.g,o.b),l.setXYZ(44,o.r,o.g,o.b),l.setXYZ(45,o.r,o.g,o.b),l.setXYZ(46,o.r,o.g,o.b),l.setXYZ(47,o.r,o.g,o.b),l.setXYZ(48,o.r,o.g,o.b),l.setXYZ(49,o.r,o.g,o.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;iu.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pu("c",t,e,iu,0,0,-1),Pu("t",t,e,iu,0,0,1),Pu("n1",t,e,iu,-i,-s,-1),Pu("n2",t,e,iu,i,-s,-1),Pu("n3",t,e,iu,-i,s,-1),Pu("n4",t,e,iu,i,s,-1),Pu("f1",t,e,iu,-i,-s,1),Pu("f2",t,e,iu,i,-s,1),Pu("f3",t,e,iu,-i,s,1),Pu("f4",t,e,iu,i,s,1),Pu("u1",t,e,iu,i*.7,s*1.1,-1),Pu("u2",t,e,iu,-i*.7,s*1.1,-1),Pu("u3",t,e,iu,0,s*2,-1),Pu("cf1",t,e,iu,-i,0,1),Pu("cf2",t,e,iu,i,0,1),Pu("cf3",t,e,iu,0,-s,1),Pu("cf4",t,e,iu,0,s,1),Pu("cn1",t,e,iu,-i,0,-1),Pu("cn2",t,e,iu,i,0,-1),Pu("cn3",t,e,iu,0,-s,-1),Pu("cn4",t,e,iu,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pu(n,e,t,i,s,o,l){ZC.set(s,o,l).unproject(i);const u=e[n];if(u!==void 0){const h=t.getAttribute("position");for(let d=0,m=u.length;d<m;d++)h.setXYZ(u[d],ZC.x,ZC.y,ZC.z)}}const eM=new mg;class tye extends o0{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new kr;o.setIndex(new Ms(i,1)),o.setAttribute("position",new Ms(s,3)),super(o,new Id({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&eM.setFromObject(this.object),eM.isEmpty())return;const t=eM.min,i=eM.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}}class nye extends o0{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new kr;o.setIndex(new Ms(i,1)),o.setAttribute("position",new Pn(s,3)),super(o,new Id({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class rye extends wd{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new kr;l.setAttribute("position",new Pn(o,3)),l.computeBoundingSphere(),super(l,new Id({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],h=new kr;h.setAttribute("position",new Pn(u,3)),h.computeBoundingSphere(),this.add(new bn(h,new gg({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}}const LH=new Te;let tM,cO;class iye extends ss{constructor(e=new Te(0,0,1),t=new Te(0,0,0),i=1,s=16776960,o=i*.2,l=o*.2){super(),this.type="ArrowHelper",tM===void 0&&(tM=new kr,tM.setAttribute("position",new Pn([0,0,0,0,1,0],3)),cO=new ha(0,.5,1,5,1),cO.translate(0,-.5,0)),this.position.copy(t),this.line=new wd(tM,new Id({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bn(cO,new gg({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{LH.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(LH,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class sye extends o0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new kr;s.setAttribute("position",new Pn(t,3)),s.setAttribute("color",new Pn(i,3));const o=new Id({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new _n,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oye{constructor(){this.type="ShapePath",this.color=new _n,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new iw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,l){return this.currentPath.bezierCurveTo(e,t,i,s,o,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function i(k){const N=[];for(let D=0,U=k.length;D<U;D++){const F=k[D],H=new Qy;H.curves=F.curves,N.push(H)}return N}function s(k,N){const D=N.length;let U=!1;for(let F=D-1,H=0;H<D;F=H++){let z=N[F],J=N[H],te=J.x-z.x,re=J.y-z.y;if(Math.abs(re)>Number.EPSILON){if(re<0&&(z=N[H],te=-te,J=N[F],re=-re),k.y<z.y||k.y>J.y)continue;if(k.y===z.y){if(k.x===z.x)return!0}else{const ie=re*(k.x-z.x)-te*(k.y-z.y);if(ie===0)return!0;if(ie<0)continue;U=!U}}else{if(k.y!==z.y)continue;if(J.x<=k.x&&k.x<=z.x||z.x<=k.x&&k.x<=J.x)return!0}}return U}const o=Qg.isClockWise,l=this.subPaths;if(l.length===0)return[];if(t===!0)return i(l);let u,h,d;const m=[];if(l.length===1)return h=l[0],d=new Qy,d.curves=h.curves,m.push(d),m;let _=!o(l[0].getPoints());_=e?!_:_;const v=[],E=[];let w=[],x=0,A;E[x]=void 0,w[x]=[];for(let k=0,N=l.length;k<N;k++)h=l[k],A=h.getPoints(),u=o(A),u=e?!u:u,u?(!_&&E[x]&&x++,E[x]={s:new Qy,p:A},E[x].s.curves=h.curves,_&&x++,w[x]=[]):w[x].push({h,p:A[0]});if(!E[0])return i(l);if(E.length>1){let k=!1,N=0;for(let D=0,U=E.length;D<U;D++)v[D]=[];for(let D=0,U=E.length;D<U;D++){const F=w[D];for(let H=0;H<F.length;H++){const z=F[H];let J=!0;for(let te=0;te<E.length;te++)s(z.p,E[te].p)&&(D!==te&&N++,J?(J=!1,v[te].push(z)):k=!0);J&&v[D].push(z)}}N>0&&k===!1&&(w=v)}let O;for(let k=0,N=E.length;k<N;k++){d=E[k].s,m.push(d),O=w[k];for(let D=0,U=O.length;D<U;D++)d.holes.push(O[D].h)}return m}}const z0=aye();function aye(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let h=0;h<256;++h){const d=h-127;d<-27?(i[h]=0,i[h|256]=32768,s[h]=24,s[h|256]=24):d<-14?(i[h]=1024>>-d-14,i[h|256]=1024>>-d-14|32768,s[h]=-d-1,s[h|256]=-d-1):d<=15?(i[h]=d+15<<10,i[h|256]=d+15<<10|32768,s[h]=13,s[h|256]=13):d<128?(i[h]=31744,i[h|256]=64512,s[h]=24,s[h|256]=24):(i[h]=31744,i[h|256]=64512,s[h]=13,s[h|256]=13)}const o=new Uint32Array(2048),l=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let d=h<<13,m=0;for(;!(d&8388608);)d<<=1,m-=8388608;d&=-8388609,m+=947912704,o[h]=d|m}for(let h=1024;h<2048;++h)o[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)l[h]=h<<23;l[31]=1199570944,l[32]=2147483648;for(let h=33;h<63;++h)l[h]=2147483648+(h-32<<23);l[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:l,offsetTable:u}}function lye(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Uu(n,-65504,65504),z0.floatView[0]=n;const e=z0.uint32View[0],t=e>>23&511;return z0.baseTable[t]+((e&8388607)>>z0.shiftTable[t])}function uye(n){const e=n>>10;return z0.uint32View[0]=z0.mantissaTable[z0.offsetTable[e]+(n&1023)]+z0.exponentTable[e],z0.floatView[0]}var cye=Object.freeze({__proto__:null,toHalfFloat:lye,fromHalfFloat:uye});class hye extends kr{constructor(){console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),super()}}class dye extends kr{constructor(){console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),super()}}function pye(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function fye(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function mye(){console.error("THREE.ImmediateRenderObject has been removed.")}class gye extends lu{constructor(e,t,i){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,i),this.samples=4}}class _ye extends Ow{constructor(e,t,i,s){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,i,s)}}class vye extends pR{constructor(e,t,i,s){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:aE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=aE);const yye=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:lP,AddEquation:Cy,AddOperation:B9,AdditiveAnimationBlendMode:hP,AdditiveBlending:NA,AlphaFormat:X9,AlwaysDepth:I9,AlwaysStencilFunc:a7,AmbientLight:rj,AmbientLightProbe:Tve,AnimationClip:hw,AnimationLoader:lve,AnimationMixer:Uve,AnimationObjectGroup:Bve,AnimationUtils:ive,ArcCurve:R7,ArrayCamera:T7,ArrowHelper:iye,Audio:aj,AudioAnalyser:Cve,AudioContext:DP,AudioListener:Sve,AudioLoader:yve,AxesHelper:sye,BackSide:zc,BasicDepthPacking:Iv,BasicShadowMap:g9,Bone:bP,BooleanKeyframeTrack:$b,Box2:Vve,Box3:mg,Box3Helper:nye,BoxBufferGeometry:Na,BoxGeometry:Na,BoxHelper:tye,BufferAttribute:Ms,BufferGeometry:kr,BufferGeometryLoader:oj,ByteType:H9,Cache:db,Camera:uE,CameraHelper:eye,CanvasTexture:M_e,CapsuleBufferGeometry:PT,CapsuleGeometry:PT,CatmullRomCurve3:k7,CineonToneMapping:U9,CircleBufferGeometry:FT,CircleGeometry:FT,ClampToEdgeWrapping:Zd,Clock:NP,Color:_n,ColorKeyframeTrack:kP,ColorManagement:om,CompressedTexture:I7,CompressedTextureLoader:uve,ConeBufferGeometry:UT,ConeGeometry:UT,CubeCamera:d7,CubeReflectionMapping:yv,CubeRefractionMapping:bv,CubeTexture:Nw,CubeTextureLoader:cve,CubeUVReflectionMapping:lE,CubicBezierCurve:EP,CubicBezierCurve3:O7,CubicInterpolant:K7,CullFaceBack:cD,CullFaceFront:m9,CullFaceFrontBack:Ode,CullFaceNone:f9,Curve:_g,CurvePath:D7,CustomBlending:v9,CustomToneMapping:z9,CylinderBufferGeometry:ha,CylinderGeometry:ha,Cylindrical:Wve,Data3DTexture:pR,DataArrayTexture:Ow,DataTexture:bT,DataTexture2DArray:_ye,DataTexture3D:vye,DataTextureLoader:hve,DataUtils:cye,DecrementStencilOp:jde,DecrementWrapStencilOp:Yde,DefaultLoadingManager:q7,DepthFormat:fv,DepthStencilFormat:Tv,DepthTexture:_P,DirectionalLight:nj,DirectionalLightHelper:Zve,DiscreteInterpolant:J7,DodecahedronBufferGeometry:zT,DodecahedronGeometry:zT,DoubleSide:ep,DstAlphaFactor:S9,DstColorFactor:x9,DynamicCopyUsage:lpe,DynamicDrawUsage:Xy,DynamicReadUsage:spe,EdgesGeometry:N7,EllipseCurve:ER,EqualDepth:k9,EqualStencilFunc:qde,EquirectangularReflectionMapping:YS,EquirectangularRefractionMapping:KS,Euler:Eb,EventDispatcher:Lf,ExtrudeBufferGeometry:HT,ExtrudeGeometry:HT,FileLoader:e_,FlatShading:_9,Float16BufferAttribute:Wpe,Float32BufferAttribute:Pn,Float64BufferAttribute:Vpe,FloatType:jg,Fog:vR,FogExp2:_R,Font:fye,FontLoader:pye,FramebufferTexture:C_e,FrontSide:e0,Frustum:fR,GLBufferAttribute:Gve,GLSL1:cpe,GLSL3:ND,GreaterDepth:L9,GreaterEqualDepth:O9,GreaterEqualStencilFunc:npe,GreaterStencilFunc:epe,GridHelper:Qve,Group:oT,HalfFloatType:ub,HemisphereLight:Z7,HemisphereLightHelper:Jve,HemisphereLightProbe:bve,IcosahedronBufferGeometry:GT,IcosahedronGeometry:GT,ImageBitmapLoader:vve,ImageLoader:dw,ImageUtils:pP,ImmediateRenderObject:mye,IncrementStencilOp:Vde,IncrementWrapStencilOp:Xde,InstancedBufferAttribute:cb,InstancedBufferGeometry:CR,InstancedInterleavedBuffer:HA,InstancedMesh:C7,Int16BufferAttribute:Hpe,Int32BufferAttribute:Gpe,Int8BufferAttribute:Fpe,IntType:W9,InterleavedBuffer:yR,InterleavedBufferAttribute:Tf,Interpolant:Pw,InterpolateDiscrete:QS,InterpolateLinear:qS,InterpolateSmooth:HM,InvertStencilOp:Kde,KeepStencilOp:GM,KeyframeTrack:vg,LOD:w7,LatheBufferGeometry:hb,LatheGeometry:hb,Layers:Jy,LessDepth:R9,LessEqualDepth:BA,LessEqualStencilFunc:Zde,LessStencilFunc:Qde,Light:Rv,LightProbe:wR,Line:wd,Line3:UP,LineBasicMaterial:Id,LineCurve:$R,LineCurve3:L7,LineDashedMaterial:X7,LineLoop:M7,LineSegments:o0,LinearEncoding:Tm,LinearFilter:Vo,LinearInterpolant:RP,LinearMipMapLinearFilter:Pde,LinearMipMapNearestFilter:Bde,LinearMipmapLinearFilter:bb,LinearMipmapNearestFilter:uP,LinearSRGBColorSpace:rv,LinearToneMapping:P9,Loader:Df,LoaderUtils:WD,LoadingManager:OP,LoopOnce:r7,LoopPingPong:s7,LoopRepeat:i7,LuminanceAlphaFormat:J9,LuminanceFormat:K9,MOUSE:Ey,Material:Hc,MaterialLoader:xR,MathUtils:u7,Matrix3:tp,Matrix4:Mr,MaxEquation:fD,Mesh:bn,MeshBasicMaterial:gg,MeshDepthMaterial:Bw,MeshDistanceMaterial:gR,MeshLambertMaterial:V7,MeshMatcapMaterial:j7,MeshNormalMaterial:MP,MeshPhongMaterial:G7,MeshPhysicalMaterial:H7,MeshStandardMaterial:lw,MeshToonMaterial:W7,MinEquation:pD,MirroredRepeatWrapping:JS,MixOperation:N9,MultiplyBlending:dD,MultiplyOperation:kw,NearestFilter:da,NearestMipMapLinearFilter:Nde,NearestMipMapNearestFilter:Dde,NearestMipmapLinearFilter:FA,NearestMipmapNearestFilter:PA,NeverDepth:A9,NeverStencilFunc:Jde,NoBlending:sp,NoColorSpace:Hde,NoToneMapping:hg,NormalAnimationBlendMode:dR,NormalBlending:K0,NotEqualDepth:D9,NotEqualStencilFunc:tpe,NumberKeyframeTrack:uw,Object3D:ss,ObjectLoader:gve,ObjectSpaceNormalMap:o7,OctahedronBufferGeometry:ag,OctahedronGeometry:ag,OneFactor:T9,OneMinusDstAlphaFactor:w9,OneMinusDstColorFactor:C9,OneMinusSrcAlphaFactor:cR,OneMinusSrcColorFactor:$9,OrthographicCamera:Jg,PCFShadowMap:lR,PCFSoftShadowMap:pS,PMREMGenerator:PD,ParametricGeometry:hye,Path:iw,PerspectiveCamera:Io,Plane:F0,PlaneBufferGeometry:pg,PlaneGeometry:pg,PlaneHelper:rye,PointLight:tj,PointLightHelper:Yve,Points:A7,PointsMaterial:TR,PolarGridHelper:qve,PolyhedronBufferGeometry:t0,PolyhedronGeometry:t0,PositionalAudio:xve,PropertyBinding:cs,PropertyMixer:lj,QuadraticBezierCurve:$P,QuadraticBezierCurve3:SP,Quaternion:Wo,QuaternionKeyframeTrack:hE,QuaternionLinearInterpolant:Q7,REVISION:aE,RGBADepthPacking:NT,RGBAFormat:Bp,RGBAIntegerFormat:t7,RGBA_ASTC_10x10_Format:kD,RGBA_ASTC_10x5_Format:AD,RGBA_ASTC_10x6_Format:ID,RGBA_ASTC_10x8_Format:RD,RGBA_ASTC_12x10_Format:OD,RGBA_ASTC_12x12_Format:LD,RGBA_ASTC_4x4_Format:TD,RGBA_ASTC_5x4_Format:ED,RGBA_ASTC_5x5_Format:$D,RGBA_ASTC_6x5_Format:SD,RGBA_ASTC_6x6_Format:wD,RGBA_ASTC_8x5_Format:xD,RGBA_ASTC_8x6_Format:CD,RGBA_ASTC_8x8_Format:MD,RGBA_BPTC_Format:DD,RGBA_ETC2_EAC_Format:bD,RGBA_PVRTC_2BPPV1_Format:vD,RGBA_PVRTC_4BPPV1_Format:_D,RGBA_S3TC_DXT1_Format:FM,RGBA_S3TC_DXT3_Format:UM,RGBA_S3TC_DXT5_Format:zM,RGBFormat:Y9,RGB_ETC1_Format:n7,RGB_ETC2_Format:yD,RGB_PVRTC_2BPPV1_Format:gD,RGB_PVRTC_4BPPV1_Format:mD,RGB_S3TC_DXT1_Format:PM,RGFormat:Z9,RGIntegerFormat:e7,RawShaderMaterial:z7,Ray:Lw,Raycaster:FP,RectAreaLight:ij,RedFormat:Q9,RedIntegerFormat:q9,ReinhardToneMapping:F9,RepeatWrapping:DT,ReplaceStencilOp:Wde,ReverseSubtractEquation:aP,RingBufferGeometry:WT,RingGeometry:WT,SRGBColorSpace:Ug,Scene:rw,ShaderChunk:bi,ShaderLib:qd,ShaderMaterial:ph,ShadowMaterial:U7,Shape:Qy,ShapeBufferGeometry:VT,ShapeGeometry:VT,ShapePath:oye,ShapeUtils:Qg,ShortType:G9,Skeleton:bR,SkeletonHelper:Xve,SkinnedMesh:x7,SmoothShading:Lde,Source:Uy,Sphere:s0,SphereBufferGeometry:fg,SphereGeometry:fg,Spherical:jD,SphericalHarmonics3:sj,SplineCurve:wP,SpotLight:ej,SpotLightHelper:jve,Sprite:S7,SpriteMaterial:yP,SrcAlphaFactor:uR,SrcAlphaSaturateFactor:M9,SrcColorFactor:E9,StaticCopyUsage:ape,StaticDrawUsage:ew,StaticReadUsage:ipe,StereoCamera:Eve,StreamCopyUsage:upe,StreamDrawUsage:rpe,StreamReadUsage:ope,StringKeyframeTrack:Sb,SubtractEquation:y9,SubtractiveBlending:hD,TOUCH:$y,TangentSpaceNormalMap:Tb,TetrahedronBufferGeometry:jT,TetrahedronGeometry:jT,TextGeometry:dye,Texture:Bl,TextureLoader:dve,TorusBufferGeometry:sg,TorusGeometry:sg,TorusKnotBufferGeometry:XT,TorusKnotGeometry:XT,Triangle:yf,TriangleFanDrawMode:zde,TriangleStripDrawMode:Ude,TrianglesDrawMode:Fde,TubeBufferGeometry:YT,TubeGeometry:YT,UVMapping:hR,Uint16BufferAttribute:fP,Uint32BufferAttribute:mP,Uint8BufferAttribute:Upe,Uint8ClampedBufferAttribute:zpe,Uniform:is,UniformsGroup:Hve,UniformsLib:Sn,UniformsUtils:Dw,UnsignedByteType:jh,UnsignedInt248Type:pv,UnsignedIntType:j0,UnsignedShort4444Type:V9,UnsignedShort5551Type:j9,UnsignedShortType:cP,VSMShadowMap:By,Vector2:Lt,Vector3:Te,Vector4:Mi,VectorKeyframeTrack:cw,VideoTexture:x_e,WebGL1Renderer:E7,WebGL3DRenderTarget:Ape,WebGLArrayRenderTarget:Mpe,WebGLCubeRenderTarget:p7,WebGLMultipleRenderTargets:Ipe,WebGLMultisampleRenderTarget:gye,WebGLRenderTarget:lu,WebGLRenderer:vP,WebGLUtils:b7,WireframeGeometry:CP,WrapAroundEnding:ZS,ZeroCurvatureEnding:Py,ZeroFactor:b9,ZeroSlopeEnding:Fy,ZeroStencilOp:Gde,_SRGBAFormat:UA,sRGBEncoding:Ti},Symbol.toStringTag,{value:"Module"}));var H0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hy={exports:{}},py={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DH;function bye(){return DH||(DH=1,py.ConcurrentRoot=1,py.ContinuousEventPriority=4,py.DefaultEventPriority=16,py.DiscreteEventPriority=1,py.IdleEventPriority=536870912,py.LegacyRoot=0),py}(function(n){n.exports=bye()})(Hy);function Tye(n){let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const m=e;e=h?d:Object.assign({},e,d),t.forEach(_=>_(e,m))}},s=()=>e,o=(u,h=s,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=h(e);function _(){const v=h(e);if(!d(m,v)){const E=m;u(m=v,E)}}return t.add(_),()=>t.delete(_)},l={setState:i,getState:s,subscribe:(u,h,d)=>h||d?o(u,h,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,s,l),l}const Eye=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NH=Eye?he.useEffect:he.useLayoutEffect;function $ye(n){const e=typeof n=="function"?Tye(n):n,t=(i=e.getState,s=Object.is)=>{const[,o]=he.useReducer(A=>A+1,0),l=e.getState(),u=he.useRef(l),h=he.useRef(i),d=he.useRef(s),m=he.useRef(!1),_=he.useRef();_.current===void 0&&(_.current=i(l));let v,E=!1;(u.current!==l||h.current!==i||d.current!==s||m.current)&&(v=i(l),E=!s(_.current,v)),NH(()=>{E&&(_.current=v),u.current=l,h.current=i,d.current=s,m.current=!1});const w=he.useRef(l);NH(()=>{const A=()=>{try{const k=e.getState(),N=h.current(k);d.current(_.current,N)||(u.current=k,_.current=N,o())}catch{m.current=!0,o()}},O=e.subscribe(A);return e.getState()!==w.current&&A(),O},[]);const x=E?v:_.current;return he.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var hj={exports:{}},GA={exports:{}},BH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PH;function Sye(){return PH||(PH=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var le=ne-1>>>1,_e=j[le];if(0<s(_e,Z))j[le]=Z,j[ne]=_e,ne=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var le=0,_e=j.length,Oe=_e>>>1;le<Oe;){var xe=2*(le+1)-1,Xe=j[xe],Re=xe+1,Je=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(Je,Xe)?(j[le]=Je,j[Re]=ne,le=Re):(j[le]=Xe,j[xe]=ne,le=xe);else if(Re<_e&&0>s(Je,ne))j[le]=Je,j[Re]=ne,le=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function D(j){if(x=!1,N(j),!w)if(t(h)!==null)w=!0,ge(U);else{var Z=t(d);Z!==null&&Ae(D,Z.startTime-j)}}function U(j,Z){w=!1,x&&(x=!1,O(z),z=-1),E=!0;var ne=v;try{for(N(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),N(Z)}else i(h);_=t(h)}if(_!==null)var Oe=!0;else{var xe=t(d);xe!==null&&Ae(D,xe.startTime-Z),Oe=!1}return Oe}finally{_=null,v=ne,E=!1}}var F=!1,H=null,z=-1,J=5,te=-1;function re(){return!(n.unstable_now()-te<J)}function ie(){if(H!==null){var j=n.unstable_now();te=j;var Z=!0;try{Z=H(!0,j)}finally{Z?de():(F=!1,H=null)}}else F=!1}var de;if(typeof k=="function")de=function(){k(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=ie,de=function(){ue.postMessage(null)}}else de=function(){A(ie,0)};function ge(j){H=j,F||(F=!0,de())}function Ae(j,Z){z=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){w||E||(w=!0,ge(U))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var le=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>le?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(x?(O(z),z=-1):x=!0,Ae(D,ne-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(U))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(BH)),BH}(function(n){n.exports=Sye()})(GA);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FH,UH;function wye(){return UH||(UH=1,FH=function(n){var e={},t=Tr,i=GA.exports,s=Object.assign;function o($){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+$,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+$+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),D=Symbol.iterator;function U($){return $===null||typeof $!="object"?null:($=D&&$[D]||$["@@iterator"],typeof $=="function"?$:null)}function F($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case d:return"Fragment";case h:return"Portal";case _:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case A:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case E:return($.displayName||"Context")+".Consumer";case v:return($._context.displayName||"Context")+".Provider";case w:var c=$.render;return $=$.displayName,$||($=c.displayName||c.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case O:return c=$.displayName||null,c!==null?c:F($.type)||"Memo";case k:c=$._payload,$=$._init;try{return F($(c))}catch{}}return null}function H($){var c=$.type;switch($.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=c.render,$=$.displayName||$.name||"",c.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(c);case 8:return c===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function z($){var c=$,f=$;if($.alternate)for(;c.return;)c=c.return;else{$=c;do c=$,c.flags&4098&&(f=c.return),$=c.return;while($)}return c.tag===3?f:null}function J($){if(z($)!==$)throw Error(o(188))}function te($){var c=$.alternate;if(!c){if(c=z($),c===null)throw Error(o(188));return c!==$?null:$}for(var f=$,S=c;;){var M=f.return;if(M===null)break;var L=M.alternate;if(L===null){if(S=M.return,S!==null){f=S;continue}break}if(M.child===L.child){for(L=M.child;L;){if(L===f)return J(M),$;if(L===S)return J(M),c;L=L.sibling}throw Error(o(188))}if(f.return!==S.return)f=M,S=L;else{for(var G=!1,se=M.child;se;){if(se===f){G=!0,f=M,S=L;break}if(se===S){G=!0,S=M,f=L;break}se=se.sibling}if(!G){for(se=L.child;se;){if(se===f){G=!0,f=L,S=M;break}if(se===S){G=!0,S=L,f=M;break}se=se.sibling}if(!G)throw Error(o(189))}}if(f.alternate!==S)throw Error(o(190))}if(f.tag!==3)throw Error(o(188));return f.stateNode.current===f?$:c}function re($){return $=te($),$!==null?ie($):null}function ie($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var c=ie($);if(c!==null)return c;$=$.sibling}return null}function de($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){if($.tag!==4){var c=de($);if(c!==null)return c}$=$.sibling}return null}var oe=Array.isArray,ue=n.getPublicInstance,ge=n.getRootHostContext,Ae=n.getChildHostContext,j=n.prepareForCommit,Z=n.resetAfterCommit,ne=n.createInstance,le=n.appendInitialChild,_e=n.finalizeInitialChildren,Oe=n.prepareUpdate,xe=n.shouldSetTextContent,Xe=n.createTextInstance,Re=n.scheduleTimeout,Je=n.cancelTimeout,et=n.noTimeout,at=n.isPrimaryRenderer,Qe=n.supportsMutation,De=n.supportsPersistence,Se=n.supportsHydration,Pe=n.getInstanceFromNode,rt=n.preparePortalMount,We=n.getCurrentEventPriority,wt=n.detachDeletedInstance,xt=n.supportsMicrotasks,ht=n.scheduleMicrotask,St=n.supportsTestSelectors,It=n.findFiberRoot,mt=n.getBoundingRect,ve=n.getTextContent,ee=n.isHiddenSubtree,ke=n.matchAccessibilityRole,ot=n.setFocusIfFocusable,dt=n.setupIntersectionObserver,$t=n.appendChild,ct=n.appendChildToContainer,Ge=n.commitTextUpdate,Me=n.commitMount,X=n.commitUpdate,Q=n.insertBefore,ae=n.insertInContainerBefore,$e=n.removeChild,Ve=n.removeChildFromContainer,Pt=n.resetTextContent,Fe=n.hideInstance,Wt=n.hideTextInstance,lt=n.unhideInstance,Ut=n.unhideTextInstance,Ft=n.clearContainer,Tn=n.cloneInstance,Er=n.createContainerChildSet,cr=n.appendChildToContainerChildSet,Gr=n.finalizeContainerChildren,sr=n.replaceContainerChildren,Xn=n.cloneHiddenInstance,q=n.cloneHiddenTextInstance,me=n.canHydrateInstance,Ne=n.canHydrateTextInstance,nt=n.canHydrateSuspenseInstance,Rt=n.isSuspenseInstancePending,Qt=n.isSuspenseInstanceFallback,gn=n.registerSuspenseInstanceRetry,Ie=n.getNextHydratableSibling,st=n.getFirstHydratableChild,Tt=n.getFirstHydratableChildWithinContainer,pt=n.getFirstHydratableChildWithinSuspenseInstance,Bt=n.hydrateInstance,xn=n.hydrateTextInstance,Bn=n.hydrateSuspenseInstance,nr=n.getNextHydratableInstanceAfterSuspenseInstance,vr=n.commitHydratedContainer,ei=n.commitHydratedSuspenseInstance,$r=n.clearSuspenseBoundary,Ar=n.clearSuspenseBoundaryFromContainer,Wi=n.shouldDeleteUnhydratedTailInstances,jo=n.didNotMatchHydratedContainerTextInstance,Ro=n.didNotMatchHydratedTextInstance,ll;function Yt($){if(ll===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ll=c&&c[1]||""}return`
`+ll+$}var hr=!1;function fa($,c){if(!$||hr)return"";hr=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(je){var S=je}Reflect.construct($,[],c)}else{try{c.call()}catch(je){S=je}$.call(c.prototype)}else{try{throw Error()}catch(je){S=je}$()}}catch(je){if(je&&S&&typeof je.stack=="string"){for(var M=je.stack.split(`
`),L=S.stack.split(`
`),G=M.length-1,se=L.length-1;1<=G&&0<=se&&M[G]!==L[se];)se--;for(;1<=G&&0<=se;G--,se--)if(M[G]!==L[se]){if(G!==1||se!==1)do if(G--,se--,0>se||M[G]!==L[se]){var we=`
`+M[G].replace(" at new "," at ");return $.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",$.displayName)),we}while(1<=G&&0<=se);break}}}finally{hr=!1,Error.prepareStackTrace=f}return($=$?$.displayName||$.name:"")?Yt($):""}var Xo=Object.prototype.hasOwnProperty,ps=[],fs=-1;function ci($){return{current:$}}function dr($){0>fs||($.current=ps[fs],ps[fs]=null,fs--)}function pn($,c){fs++,ps[fs]=$.current,$.current=c}var ar={},wr=ci(ar),er=ci(!1),hi=ar;function Qi($,c){var f=$.type.contextTypes;if(!f)return ar;var S=$.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===c)return S.__reactInternalMemoizedMaskedChildContext;var M={},L;for(L in f)M[L]=c[L];return S&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=c,$.__reactInternalMemoizedMaskedChildContext=M),M}function jr($){return $=$.childContextTypes,$!=null}function Bi(){dr(er),dr(wr)}function Pa($,c,f){if(wr.current!==ar)throw Error(o(168));pn(wr,c),pn(er,f)}function ul($,c,f){var S=$.stateNode;if(c=c.childContextTypes,typeof S.getChildContext!="function")return f;S=S.getChildContext();for(var M in S)if(!(M in c))throw Error(o(108,H($)||"Unknown",M));return s({},f,S)}function gc($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||ar,hi=wr.current,pn(wr,$),pn(er,er.current),!0}function Vu($,c,f){var S=$.stateNode;if(!S)throw Error(o(169));f?($=ul($,c,hi),S.__reactInternalMemoizedMergedChildContext=$,dr(er),dr(wr),pn(wr,$)):dr(er),pn(er,f)}var Rs=Math.clz32?Math.clz32:Pl,ko=Math.log,uu=Math.LN2;function Pl($){return $>>>=0,$===0?32:31-(ko($)/uu|0)|0}var mh=64,Yo=4194304;function tr($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function Pi($,c){var f=$.pendingLanes;if(f===0)return 0;var S=0,M=$.suspendedLanes,L=$.pingedLanes,G=f&268435455;if(G!==0){var se=G&~M;se!==0?S=tr(se):(L&=G,L!==0&&(S=tr(L)))}else G=f&~M,G!==0?S=tr(G):L!==0&&(S=tr(L));if(S===0)return 0;if(c!==0&&c!==S&&!(c&M)&&(M=S&-S,L=c&-c,M>=L||M===16&&(L&4194240)!==0))return c;if(S&4&&(S|=f&16),c=$.entangledLanes,c!==0)for($=$.entanglements,c&=S;0<c;)f=31-Rs(c),M=1<<f,S|=$[f],c&=~M;return S}function Gc($,c){switch($){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gh($,c){for(var f=$.suspendedLanes,S=$.pingedLanes,M=$.expirationTimes,L=$.pendingLanes;0<L;){var G=31-Rs(L),se=1<<G,we=M[G];we===-1?(!(se&f)||se&S)&&(M[G]=Gc(se,c)):we<=c&&($.expiredLanes|=se),L&=~se}}function _c($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function cl($){for(var c=[],f=0;31>f;f++)c.push($);return c}function cu($,c,f){$.pendingLanes|=c,c!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,c=31-Rs(c),$[c]=f}function hl($,c){var f=$.pendingLanes&~c;$.pendingLanes=c,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=c,$.mutableReadLanes&=c,$.entangledLanes&=c,c=$.entanglements;var S=$.eventTimes;for($=$.expirationTimes;0<f;){var M=31-Rs(f),L=1<<M;c[M]=0,S[M]=-1,$[M]=-1,f&=~L}}function dl($,c){var f=$.entangledLanes|=c;for($=$.entanglements;f;){var S=31-Rs(f),M=1<<S;M&c|$[S]&c&&($[S]|=c),f&=~M}}var Jn=0;function Qn($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var pl=i.unstable_scheduleCallback,Fa=i.unstable_cancelCallback,ma=i.unstable_shouldYield,Fl=i.unstable_requestPaint,Ei=i.unstable_now,Fi=i.unstable_ImmediatePriority,fl=i.unstable_UserBlockingPriority,Rd=i.unstable_NormalPriority,ks=i.unstable_IdlePriority,hu=null,Oo=null;function Ul($){if(Oo&&typeof Oo.onCommitFiberRoot=="function")try{Oo.onCommitFiberRoot(hu,$,void 0,($.current.flags&128)===128)}catch{}}function Xr($,c){return $===c&&($!==0||1/$===1/c)||$!==$&&c!==c}var pr=typeof Object.is=="function"?Object.is:Xr,Vi=null,Os=!1,du=!1;function zl($){Vi===null?Vi=[$]:Vi.push($)}function Wc($){Os=!0,zl($)}function Ko(){if(!du&&Vi!==null){du=!0;var $=0,c=Jn;try{var f=Vi;for(Jn=1;$<f.length;$++){var S=f[$];do S=S(!0);while(S!==null)}Vi=null,Os=!1}catch(M){throw Vi!==null&&(Vi=Vi.slice($+1)),pl(Fi,Ko),M}finally{Jn=c,du=!1}}return null}var Jo=l.ReactCurrentBatchConfig;function pu($,c){if(pr($,c))return!0;if(typeof $!="object"||$===null||typeof c!="object"||c===null)return!1;var f=Object.keys($),S=Object.keys(c);if(f.length!==S.length)return!1;for(S=0;S<f.length;S++){var M=f[S];if(!Xo.call(c,M)||!pr($[M],c[M]))return!1}return!0}function Yr($){switch($.tag){case 5:return Yt($.type);case 16:return Yt("Lazy");case 13:return Yt("Suspense");case 19:return Yt("SuspenseList");case 0:case 2:case 15:return $=fa($.type,!1),$;case 11:return $=fa($.type.render,!1),$;case 1:return $=fa($.type,!0),$;default:return""}}function ms($,c){if($&&$.defaultProps){c=s({},c),$=$.defaultProps;for(var f in $)c[f]===void 0&&(c[f]=$[f]);return c}return c}var Ai=ci(null),ti=null,ga=null,Ui=null;function fu(){Ui=ga=ti=null}function ro($,c,f){at?(pn(Ai,c._currentValue),c._currentValue=f):(pn(Ai,c._currentValue2),c._currentValue2=f)}function mu($){var c=Ai.current;dr(Ai),at?$._currentValue=c:$._currentValue2=c}function Ua($,c,f){for(;$!==null;){var S=$.alternate;if(($.childLanes&c)!==c?($.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),$===f)break;$=$.return}}function di($,c){ti=$,Ui=ga=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&c&&(ba=!0),$.firstContext=null)}function ni($){var c=at?$._currentValue:$._currentValue2;if(Ui!==$)if($={context:$,memoizedValue:c,next:null},ga===null){if(ti===null)throw Error(o(308));ga=$,ti.dependencies={lanes:0,firstContext:$}}else ga=ga.next=$;return c}var Un=null,Kr=!1;function $i($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xh($,c){$=$.updateQueue,c.updateQueue===$&&(c.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function gu($,c){return{eventTime:$,lane:c,tag:0,payload:null,callback:null,next:null}}function gs($,c){var f=$.updateQueue;f!==null&&(f=f.shared,On!==null&&$.mode&1&&!(wn&2)?($=f.interleaved,$===null?(c.next=c,Un===null?Un=[f]:Un.push(f)):(c.next=$.next,$.next=c),f.interleaved=c):($=f.pending,$===null?c.next=c:(c.next=$.next,$.next=c),f.pending=c))}function ml($,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var S=c.lanes;S&=$.pendingLanes,f|=S,c.lanes=f,dl($,f)}}function Yh($,c){var f=$.updateQueue,S=$.alternate;if(S!==null&&(S=S.updateQueue,f===S)){var M=null,L=null;if(f=f.firstBaseUpdate,f!==null){do{var G={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};L===null?M=L=G:L=L.next=G,f=f.next}while(f!==null);L===null?M=L=c:L=L.next=c}else M=L=c;f={baseState:S.baseState,firstBaseUpdate:M,lastBaseUpdate:L,shared:S.shared,effects:S.effects},$.updateQueue=f;return}$=f.lastBaseUpdate,$===null?f.firstBaseUpdate=c:$.next=c,f.lastBaseUpdate=c}function pi($,c,f,S){var M=$.updateQueue;Kr=!1;var L=M.firstBaseUpdate,G=M.lastBaseUpdate,se=M.shared.pending;if(se!==null){M.shared.pending=null;var we=se,je=we.next;we.next=null,G===null?L=je:G.next=je,G=we;var _t=$.alternate;_t!==null&&(_t=_t.updateQueue,se=_t.lastBaseUpdate,se!==G&&(se===null?_t.firstBaseUpdate=je:se.next=je,_t.lastBaseUpdate=we))}if(L!==null){var zt=M.baseState;G=0,_t=je=we=null,se=L;do{var Zt=se.lane,hn=se.eventTime;if((S&Zt)===Zt){_t!==null&&(_t=_t.next={eventTime:hn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var an=$,nn=se;switch(Zt=c,hn=f,nn.tag){case 1:if(an=nn.payload,typeof an=="function"){zt=an.call(hn,zt,Zt);break e}zt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=nn.payload,Zt=typeof an=="function"?an.call(hn,zt,Zt):an,Zt==null)break e;zt=s({},zt,Zt);break e;case 2:Kr=!0}}se.callback!==null&&se.lane!==0&&($.flags|=64,Zt=M.effects,Zt===null?M.effects=[se]:Zt.push(se))}else hn={eventTime:hn,lane:Zt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},_t===null?(je=_t=hn,we=zt):_t=_t.next=hn,G|=Zt;if(se=se.next,se===null){if(se=M.shared.pending,se===null)break;Zt=se,se=Zt.next,Zt.next=null,M.lastBaseUpdate=Zt,M.shared.pending=null}}while(!0);if(_t===null&&(we=zt),M.baseState=we,M.firstBaseUpdate=je,M.lastBaseUpdate=_t,c=M.shared.interleaved,c!==null){M=c;do G|=M.lane,M=M.next;while(M!==c)}else L===null&&(M.shared.lanes=0);Xl|=G,$.lanes=G,$.memoizedState=zt}}function _u($,c,f){if($=c.effects,c.effects=null,$!==null)for(c=0;c<$.length;c++){var S=$[c],M=S.callback;if(M!==null){if(S.callback=null,S=f,typeof M!="function")throw Error(o(191,M));M.call(S)}}}var hp=new t.Component().refs;function dp($,c,f,S){c=$.memoizedState,f=f(S,c),f=f==null?c:s({},c,f),$.memoizedState=f,$.lanes===0&&($.updateQueue.baseState=f)}var _h={isMounted:function($){return($=$._reactInternals)?z($)===$:!1},enqueueSetState:function($,c,f){$=$._reactInternals;var S=Sr(),M=Xi($),L=gu(S,M);L.payload=c,f!=null&&(L.callback=f),gs($,L),c=Ts($,M,S),c!==null&&ml(c,$,M)},enqueueReplaceState:function($,c,f){$=$._reactInternals;var S=Sr(),M=Xi($),L=gu(S,M);L.tag=1,L.payload=c,f!=null&&(L.callback=f),gs($,L),c=Ts($,M,S),c!==null&&ml(c,$,M)},enqueueForceUpdate:function($,c){$=$._reactInternals;var f=Sr(),S=Xi($),M=gu(f,S);M.tag=2,c!=null&&(M.callback=c),gs($,M),c=Ts($,S,f),c!==null&&ml(c,$,S)}};function pp($,c,f,S,M,L,G){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(S,L,G):c.prototype&&c.prototype.isPureReactComponent?!pu(f,S)||!pu(M,L):!0}function Wp($,c,f){var S=!1,M=ar,L=c.contextType;return typeof L=="object"&&L!==null?L=ni(L):(M=jr(c)?hi:wr.current,S=c.contextTypes,L=(S=S!=null)?Qi($,M):ar),c=new c(f,L),$.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=_h,$.stateNode=c,c._reactInternals=$,S&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=M,$.__reactInternalMemoizedMaskedChildContext=L),c}function Pf($,c,f,S){$=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,S),c.state!==$&&_h.enqueueReplaceState(c,c.state,null)}function fp($,c,f,S){var M=$.stateNode;M.props=f,M.state=$.memoizedState,M.refs=hp,$i($);var L=c.contextType;typeof L=="object"&&L!==null?M.context=ni(L):(L=jr(c)?hi:wr.current,M.context=Qi($,L)),M.state=$.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(dp($,c,L,f),M.state=$.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(c=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),c!==M.state&&_h.enqueueReplaceState(M,M.state,null),pi($,f,M,S),M.state=$.memoizedState),typeof M.componentDidMount=="function"&&($.flags|=4194308)}var ju=[],io=0,vu=null,vh=0,_a=[],Wr=0,lr=null,Vs=1,Qo="";function Lo($,c){ju[io++]=vh,ju[io++]=vu,vu=$,vh=c}function yu($,c,f){_a[Wr++]=Vs,_a[Wr++]=Qo,_a[Wr++]=lr,lr=$;var S=Vs;$=Qo;var M=32-Rs(S)-1;S&=~(1<<M),f+=1;var L=32-Rs(c)+M;if(30<L){var G=M-M%5;L=(S&(1<<G)-1).toString(32),S>>=G,M-=G,Vs=1<<32-Rs(c)+M|f<<M|S,Qo=L+$}else Vs=1<<L|f<<M|S,Qo=$}function gl($){$.return!==null&&(Lo($,1),yu($,1,0))}function Kh($){for(;$===vu;)vu=ju[--io],ju[io]=null,vh=ju[--io],ju[io]=null;for(;$===lr;)lr=_a[--Wr],_a[Wr]=null,Qo=_a[--Wr],_a[Wr]=null,Vs=_a[--Wr],_a[Wr]=null}var Si=null,fi=null,ur=!1,wi=!1,qo=null;function Hl($,c){var f=uo(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=$,c=$.deletions,c===null?($.deletions=[f],$.flags|=16):c.push(f)}function mp($,c){switch($.tag){case 5:return c=me(c,$.type,$.pendingProps),c!==null?($.stateNode=c,Si=$,fi=st(c),!0):!1;case 6:return c=Ne(c,$.pendingProps),c!==null?($.stateNode=c,Si=$,fi=null,!0):!1;case 13:if(c=nt(c),c!==null){var f=lr!==null?{id:Vs,overflow:Qo}:null;return $.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=uo(18,null,null,0),f.stateNode=c,f.return=$,$.child=f,Si=$,fi=null,!0}return!1;default:return!1}}function gp($){return($.mode&1)!==0&&($.flags&128)===0}function Jh($){if(ur){var c=fi;if(c){var f=c;if(!mp($,c)){if(gp($))throw Error(o(418));c=Ie(f);var S=Si;c&&mp($,c)?Hl(S,f):($.flags=$.flags&-4097|2,ur=!1,Si=$)}}else{if(gp($))throw Error(o(418));$.flags=$.flags&-4097|2,ur=!1,Si=$}}}function bu($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;Si=$}function Xu($){if(!Se||$!==Si)return!1;if(!ur)return bu($),ur=!0,!1;if($.tag!==3&&($.tag!==5||Wi($.type)&&!xe($.type,$.memoizedProps))){var c=fi;if(c){if(gp($)){for($=fi;$;)$=Ie($);throw Error(o(418))}for(;c;)Hl($,c),c=Ie(c)}}if(bu($),$.tag===13){if(!Se)throw Error(o(316));if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(o(317));fi=nr($)}else fi=Si?Ie($.stateNode):null;return!0}function vc(){Se&&(fi=Si=null,wi=ur=!1)}function yh($){qo===null?qo=[$]:qo.push($)}function yc($,c,f){if($=f.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(o(309));var S=f.stateNode}if(!S)throw Error(o(147,$));var M=S,L=""+$;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(G){var se=M.refs;se===hp&&(se=M.refs={}),G===null?delete se[L]:se[L]=G},c._stringRef=L,c)}if(typeof $!="string")throw Error(o(284));if(!f._owner)throw Error(o(290,$))}return $}function Gl($,c){throw $=Object.prototype.toString.call(c),Error(o(31,$==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":$))}function Zo($){var c=$._init;return c($._payload)}function Yu($){function c(ft,Ee){if($){var Ce=ft.deletions;Ce===null?(ft.deletions=[Ee],ft.flags|=16):Ce.push(Ee)}}function f(ft,Ee){if(!$)return null;for(;Ee!==null;)c(ft,Ee),Ee=Ee.sibling;return null}function S(ft,Ee){for(ft=new Map;Ee!==null;)Ee.key!==null?ft.set(Ee.key,Ee):ft.set(Ee.index,Ee),Ee=Ee.sibling;return ft}function M(ft,Ee){return ft=Cl(ft,Ee),ft.index=0,ft.sibling=null,ft}function L(ft,Ee,Ce){return ft.index=Ce,$?(Ce=ft.alternate,Ce!==null?(Ce=Ce.index,Ce<Ee?(ft.flags|=2,Ee):Ce):(ft.flags|=2,Ee)):(ft.flags|=1048576,Ee)}function G(ft){return $&&ft.alternate===null&&(ft.flags|=2),ft}function se(ft,Ee,Ce,Ke){return Ee===null||Ee.tag!==6?(Ee=Kl(Ce,ft.mode,Ke),Ee.return=ft,Ee):(Ee=M(Ee,Ce),Ee.return=ft,Ee)}function we(ft,Ee,Ce,Ke){var Ot=Ce.type;return Ot===d?_t(ft,Ee,Ce.props.children,Ke,Ce.key):Ee!==null&&(Ee.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===k&&Zo(Ot)===Ee.type)?(Ke=M(Ee,Ce.props),Ke.ref=yc(ft,Ee,Ce),Ke.return=ft,Ke):(Ke=eo(Ce.type,Ce.key,Ce.props,null,ft.mode,Ke),Ke.ref=yc(ft,Ee,Ce),Ke.return=ft,Ke)}function je(ft,Ee,Ce,Ke){return Ee===null||Ee.tag!==4||Ee.stateNode.containerInfo!==Ce.containerInfo||Ee.stateNode.implementation!==Ce.implementation?(Ee=ns(Ce,ft.mode,Ke),Ee.return=ft,Ee):(Ee=M(Ee,Ce.children||[]),Ee.return=ft,Ee)}function _t(ft,Ee,Ce,Ke,Ot){return Ee===null||Ee.tag!==7?(Ee=Ja(Ce,ft.mode,Ke,Ot),Ee.return=ft,Ee):(Ee=M(Ee,Ce),Ee.return=ft,Ee)}function zt(ft,Ee,Ce){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return Ee=Kl(""+Ee,ft.mode,Ce),Ee.return=ft,Ee;if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case u:return Ce=eo(Ee.type,Ee.key,Ee.props,null,ft.mode,Ce),Ce.ref=yc(ft,null,Ee),Ce.return=ft,Ce;case h:return Ee=ns(Ee,ft.mode,Ce),Ee.return=ft,Ee;case k:var Ke=Ee._init;return zt(ft,Ke(Ee._payload),Ce)}if(oe(Ee)||U(Ee))return Ee=Ja(Ee,ft.mode,Ce,null),Ee.return=ft,Ee;Gl(ft,Ee)}return null}function Zt(ft,Ee,Ce,Ke){var Ot=Ee!==null?Ee.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Ot!==null?null:se(ft,Ee,""+Ce,Ke);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case u:return Ce.key===Ot?we(ft,Ee,Ce,Ke):null;case h:return Ce.key===Ot?je(ft,Ee,Ce,Ke):null;case k:return Ot=Ce._init,Zt(ft,Ee,Ot(Ce._payload),Ke)}if(oe(Ce)||U(Ce))return Ot!==null?null:_t(ft,Ee,Ce,Ke,null);Gl(ft,Ce)}return null}function hn(ft,Ee,Ce,Ke,Ot){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return ft=ft.get(Ce)||null,se(Ee,ft,""+Ke,Ot);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case u:return ft=ft.get(Ke.key===null?Ce:Ke.key)||null,we(Ee,ft,Ke,Ot);case h:return ft=ft.get(Ke.key===null?Ce:Ke.key)||null,je(Ee,ft,Ke,Ot);case k:var Kt=Ke._init;return hn(ft,Ee,Ce,Kt(Ke._payload),Ot)}if(oe(Ke)||U(Ke))return ft=ft.get(Ce)||null,_t(Ee,ft,Ke,Ot,null);Gl(Ee,Ke)}return null}function an(ft,Ee,Ce,Ke){for(var Ot=null,Kt=null,ln=Ee,fn=Ee=0,kn=null;ln!==null&&fn<Ce.length;fn++){ln.index>fn?(kn=ln,ln=null):kn=ln.sibling;var Wn=Zt(ft,ln,Ce[fn],Ke);if(Wn===null){ln===null&&(ln=kn);break}$&&ln&&Wn.alternate===null&&c(ft,ln),Ee=L(Wn,Ee,fn),Kt===null?Ot=Wn:Kt.sibling=Wn,Kt=Wn,ln=kn}if(fn===Ce.length)return f(ft,ln),ur&&Lo(ft,fn),Ot;if(ln===null){for(;fn<Ce.length;fn++)ln=zt(ft,Ce[fn],Ke),ln!==null&&(Ee=L(ln,Ee,fn),Kt===null?Ot=ln:Kt.sibling=ln,Kt=ln);return ur&&Lo(ft,fn),Ot}for(ln=S(ft,ln);fn<Ce.length;fn++)kn=hn(ln,ft,fn,Ce[fn],Ke),kn!==null&&($&&kn.alternate!==null&&ln.delete(kn.key===null?fn:kn.key),Ee=L(kn,Ee,fn),Kt===null?Ot=kn:Kt.sibling=kn,Kt=kn);return $&&ln.forEach(function(fr){return c(ft,fr)}),ur&&Lo(ft,fn),Ot}function nn(ft,Ee,Ce,Ke){var Ot=U(Ce);if(typeof Ot!="function")throw Error(o(150));if(Ce=Ot.call(Ce),Ce==null)throw Error(o(151));for(var Kt=Ot=null,ln=Ee,fn=Ee=0,kn=null,Wn=Ce.next();ln!==null&&!Wn.done;fn++,Wn=Ce.next()){ln.index>fn?(kn=ln,ln=null):kn=ln.sibling;var fr=Zt(ft,ln,Wn.value,Ke);if(fr===null){ln===null&&(ln=kn);break}$&&ln&&fr.alternate===null&&c(ft,ln),Ee=L(fr,Ee,fn),Kt===null?Ot=fr:Kt.sibling=fr,Kt=fr,ln=kn}if(Wn.done)return f(ft,ln),ur&&Lo(ft,fn),Ot;if(ln===null){for(;!Wn.done;fn++,Wn=Ce.next())Wn=zt(ft,Wn.value,Ke),Wn!==null&&(Ee=L(Wn,Ee,fn),Kt===null?Ot=Wn:Kt.sibling=Wn,Kt=Wn);return ur&&Lo(ft,fn),Ot}for(ln=S(ft,ln);!Wn.done;fn++,Wn=Ce.next())Wn=hn(ln,ft,fn,Wn.value,Ke),Wn!==null&&($&&Wn.alternate!==null&&ln.delete(Wn.key===null?fn:Wn.key),Ee=L(Wn,Ee,fn),Kt===null?Ot=Wn:Kt.sibling=Wn,Kt=Wn);return $&&ln.forEach(function(Ql){return c(ft,Ql)}),ur&&Lo(ft,fn),Ot}function br(ft,Ee,Ce,Ke){if(typeof Ce=="object"&&Ce!==null&&Ce.type===d&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case u:e:{for(var Ot=Ce.key,Kt=Ee;Kt!==null;){if(Kt.key===Ot){if(Ot=Ce.type,Ot===d){if(Kt.tag===7){f(ft,Kt.sibling),Ee=M(Kt,Ce.props.children),Ee.return=ft,ft=Ee;break e}}else if(Kt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===k&&Zo(Ot)===Kt.type){f(ft,Kt.sibling),Ee=M(Kt,Ce.props),Ee.ref=yc(ft,Kt,Ce),Ee.return=ft,ft=Ee;break e}f(ft,Kt);break}else c(ft,Kt);Kt=Kt.sibling}Ce.type===d?(Ee=Ja(Ce.props.children,ft.mode,Ke,Ce.key),Ee.return=ft,ft=Ee):(Ke=eo(Ce.type,Ce.key,Ce.props,null,ft.mode,Ke),Ke.ref=yc(ft,Ee,Ce),Ke.return=ft,ft=Ke)}return G(ft);case h:e:{for(Kt=Ce.key;Ee!==null;){if(Ee.key===Kt)if(Ee.tag===4&&Ee.stateNode.containerInfo===Ce.containerInfo&&Ee.stateNode.implementation===Ce.implementation){f(ft,Ee.sibling),Ee=M(Ee,Ce.children||[]),Ee.return=ft,ft=Ee;break e}else{f(ft,Ee);break}else c(ft,Ee);Ee=Ee.sibling}Ee=ns(Ce,ft.mode,Ke),Ee.return=ft,ft=Ee}return G(ft);case k:return Kt=Ce._init,br(ft,Ee,Kt(Ce._payload),Ke)}if(oe(Ce))return an(ft,Ee,Ce,Ke);if(U(Ce))return nn(ft,Ee,Ce,Ke);Gl(ft,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,Ee!==null&&Ee.tag===6?(f(ft,Ee.sibling),Ee=M(Ee,Ce),Ee.return=ft,ft=Ee):(f(ft,Ee),Ee=Kl(Ce,ft.mode,Ke),Ee.return=ft,ft=Ee),G(ft)):f(ft,Ee)}return br}var bh=Yu(!0),bc=Yu(!1),Tc={},_s=ci(Tc),Jr=ci(Tc),_l=ci(Tc);function ea($){if($===Tc)throw Error(o(174));return $}function vl($,c){pn(_l,c),pn(Jr,$),pn(_s,Tc),$=ge(c),dr(_s),pn(_s,$)}function Wl(){dr(_s),dr(Jr),dr(_l)}function Vc($){var c=ea(_l.current),f=ea(_s.current);c=Ae(f,$.type,c),f!==c&&(pn(Jr,$),pn(_s,c))}function kd($){Jr.current===$&&(dr(_s),dr(Jr))}var mi=ci(0);function Ye($){for(var c=$;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Rt(f)||Qt(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===$)break;for(;c.sibling===null;){if(c.return===null||c.return===$)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var kt=[];function bt(){for(var $=0;$<kt.length;$++){var c=kt[$];at?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}kt.length=0}var mn=l.ReactCurrentDispatcher,Dn=l.ReactCurrentBatchConfig,qn=0,rr=null,An=null,Ir=null,Ls=!1,vs=!1,vo=0,va=0;function ji(){throw Error(o(321))}function os($,c){if(c===null)return!1;for(var f=0;f<c.length&&f<$.length;f++)if(!pr($[f],c[f]))return!1;return!0}function Ec($,c,f,S,M,L){if(qn=L,rr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,mn.current=$===null||$.memoizedState===null?Sc:xh,$=f(S,M),vs){L=0;do{if(vs=!1,vo=0,25<=L)throw Error(o(301));L+=1,Ir=An=null,c.updateQueue=null,mn.current=td,$=f(S,M)}while(vs)}if(mn.current=El,c=An!==null&&An.next!==null,qn=0,Ir=An=rr=null,Ls=!1,c)throw Error(o(300));return $}function Br(){var $=vo!==0;return vo=0,$}function Do(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ir===null?rr.memoizedState=Ir=$:Ir=Ir.next=$,Ir}function Ds(){if(An===null){var $=rr.alternate;$=$!==null?$.memoizedState:null}else $=An.next;var c=Ir===null?rr.memoizedState:Ir.next;if(c!==null)Ir=c,An=$;else{if($===null)throw Error(o(310));An=$,$={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},Ir===null?rr.memoizedState=Ir=$:Ir=Ir.next=$}return Ir}function js($,c){return typeof c=="function"?c($):c}function ta($){var c=Ds(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=$;var S=An,M=S.baseQueue,L=f.pending;if(L!==null){if(M!==null){var G=M.next;M.next=L.next,L.next=G}S.baseQueue=M=L,f.pending=null}if(M!==null){L=M.next,S=S.baseState;var se=G=null,we=null,je=L;do{var _t=je.lane;if((qn&_t)===_t)we!==null&&(we=we.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),S=je.hasEagerState?je.eagerState:$(S,je.action);else{var zt={lane:_t,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};we===null?(se=we=zt,G=S):we=we.next=zt,rr.lanes|=_t,Xl|=_t}je=je.next}while(je!==null&&je!==L);we===null?G=S:we.next=se,pr(S,c.memoizedState)||(ba=!0),c.memoizedState=S,c.baseState=G,c.baseQueue=we,f.lastRenderedState=S}if($=f.interleaved,$!==null){M=$;do L=M.lane,rr.lanes|=L,Xl|=L,M=M.next;while(M!==$)}else M===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Th($){var c=Ds(),f=c.queue;if(f===null)throw Error(o(311));f.lastRenderedReducer=$;var S=f.dispatch,M=f.pending,L=c.memoizedState;if(M!==null){f.pending=null;var G=M=M.next;do L=$(L,G.action),G=G.next;while(G!==M);pr(L,c.memoizedState)||(ba=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),f.lastRenderedState=L}return[L,S]}function jc(){}function Eh($,c){var f=rr,S=Ds(),M=c(),L=!pr(S.memoizedState,M);if(L&&(S.memoizedState=M,ba=!0),S=S.queue,Eu(qh.bind(null,f,S,$),[$]),S.getSnapshot!==c||L||Ir!==null&&Ir.memoizedState.tag&1){if(f.flags|=2048,$c(9,Qh.bind(null,f,S,M,c),void 0,null),On===null)throw Error(o(349));qn&30||Tu(f,c,M)}return M}function Tu($,c,f){$.flags|=16384,$={getSnapshot:c,value:f},c=rr.updateQueue,c===null?(c={lastEffect:null,stores:null},rr.updateQueue=c,c.stores=[$]):(f=c.stores,f===null?c.stores=[$]:f.push($))}function Qh($,c,f,S){c.value=f,c.getSnapshot=S,yl(c)&&Ts($,1,-1)}function qh($,c,f){return f(function(){yl(c)&&Ts($,1,-1)})}function yl($){var c=$.getSnapshot;$=$.value;try{var f=c();return!pr($,f)}catch{return!0}}function Zh($){var c=Do();return typeof $=="function"&&($=$()),c.memoizedState=c.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:$},c.queue=$,$=$.dispatch=so.bind(null,rr,$),[c.memoizedState,$]}function $c($,c,f,S){return $={tag:$,create:c,destroy:f,deps:S,next:null},c=rr.updateQueue,c===null?(c={lastEffect:null,stores:null},rr.updateQueue=c,c.lastEffect=$.next=$):(f=c.lastEffect,f===null?c.lastEffect=$.next=$:(S=f.next,f.next=$,$.next=S,c.lastEffect=$)),$}function Xc(){return Ds().memoizedState}function Od($,c,f,S){var M=Do();rr.flags|=$,M.memoizedState=$c(1|c,f,void 0,S===void 0?null:S)}function za($,c,f,S){var M=Ds();S=S===void 0?null:S;var L=void 0;if(An!==null){var G=An.memoizedState;if(L=G.destroy,S!==null&&os(S,G.deps)){M.memoizedState=$c(c,f,L,S);return}}rr.flags|=$,M.memoizedState=$c(1|c,f,L,S)}function ya($,c){return Od(8390656,8,$,c)}function Eu($,c){return za(2048,8,$,c)}function $h($,c){return za(4,2,$,c)}function ri($,c){return za(4,4,$,c)}function ed($,c){if(typeof c=="function")return $=$(),c($),function(){c(null)};if(c!=null)return $=$(),c.current=$,function(){c.current=null}}function Yc($,c,f){return f=f!=null?f.concat([$]):null,za(4,4,ed.bind(null,c,$),f)}function Ku(){}function Sh($,c){var f=Ds();c=c===void 0?null:c;var S=f.memoizedState;return S!==null&&c!==null&&os(c,S[1])?S[0]:(f.memoizedState=[$,c],$)}function Ld($,c){var f=Ds();c=c===void 0?null:c;var S=f.memoizedState;return S!==null&&c!==null&&os(c,S[1])?S[0]:($=$(),f.memoizedState=[$,c],$)}function bl($,c){var f=Jn;Jn=f!==0&&4>f?f:4,$(!0);var S=Dn.transition;Dn.transition={};try{$(!1),c()}finally{Jn=f,Dn.transition=S}}function Dd(){return Ds().memoizedState}function wh($,c,f){var S=Xi($);f={lane:S,action:f,hasEagerState:!1,eagerState:null,next:null},na($)?Ff(c,f):(Vp($,c,f),f=Sr(),$=Ts($,S,f),$!==null&&Tl($,c,S))}function so($,c,f){var S=Xi($),M={lane:S,action:f,hasEagerState:!1,eagerState:null,next:null};if(na($))Ff(c,M);else{Vp($,c,M);var L=$.alternate;if($.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var G=c.lastRenderedState,se=L(G,f);if(M.hasEagerState=!0,M.eagerState=se,pr(se,G))return}catch{}finally{}f=Sr(),$=Ts($,S,f),$!==null&&Tl($,c,S)}}function na($){var c=$.alternate;return $===rr||c!==null&&c===rr}function Ff($,c){vs=Ls=!0;var f=$.pending;f===null?c.next=c:(c.next=f.next,f.next=c),$.pending=c}function Vp($,c,f){On!==null&&$.mode&1&&!(wn&2)?($=c.interleaved,$===null?(f.next=f,Un===null?Un=[c]:Un.push(c)):(f.next=$.next,$.next=f),c.interleaved=f):($=c.pending,$===null?f.next=f:(f.next=$.next,$.next=f),c.pending=f)}function Tl($,c,f){if(f&4194240){var S=c.lanes;S&=$.pendingLanes,f|=S,c.lanes=f,dl($,f)}}var El={readContext:ni,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useInsertionEffect:ji,useLayoutEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useMutableSource:ji,useSyncExternalStore:ji,useId:ji,unstable_isNewReconciler:!1},Sc={readContext:ni,useCallback:function($,c){return Do().memoizedState=[$,c===void 0?null:c],$},useContext:ni,useEffect:ya,useImperativeHandle:function($,c,f){return f=f!=null?f.concat([$]):null,Od(4194308,4,ed.bind(null,c,$),f)},useLayoutEffect:function($,c){return Od(4194308,4,$,c)},useInsertionEffect:function($,c){return Od(4,2,$,c)},useMemo:function($,c){var f=Do();return c=c===void 0?null:c,$=$(),f.memoizedState=[$,c],$},useReducer:function($,c,f){var S=Do();return c=f!==void 0?f(c):c,S.memoizedState=S.baseState=c,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:c},S.queue=$,$=$.dispatch=wh.bind(null,rr,$),[S.memoizedState,$]},useRef:function($){var c=Do();return $={current:$},c.memoizedState=$},useState:Zh,useDebugValue:Ku,useDeferredValue:function($){var c=Zh($),f=c[0],S=c[1];return ya(function(){var M=Dn.transition;Dn.transition={};try{S($)}finally{Dn.transition=M}},[$]),f},useTransition:function(){var $=Zh(!1),c=$[0];return $=bl.bind(null,$[1]),Do().memoizedState=$,[c,$]},useMutableSource:function(){},useSyncExternalStore:function($,c,f){var S=rr,M=Do();if(ur){if(f===void 0)throw Error(o(407));f=f()}else{if(f=c(),On===null)throw Error(o(349));qn&30||Tu(S,c,f)}M.memoizedState=f;var L={value:f,getSnapshot:c};return M.queue=L,ya(qh.bind(null,S,L,$),[$]),S.flags|=2048,$c(9,Qh.bind(null,S,L,f,c),void 0,null),f},useId:function(){var $=Do(),c=On.identifierPrefix;if(ur){var f=Qo,S=Vs;f=(S&~(1<<32-Rs(S)-1)).toString(32)+f,c=":"+c+"R"+f,f=vo++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=va++,c=":"+c+"r"+f.toString(32)+":";return $.memoizedState=c},unstable_isNewReconciler:!1},xh={readContext:ni,useCallback:Sh,useContext:ni,useEffect:Eu,useImperativeHandle:Yc,useInsertionEffect:$h,useLayoutEffect:ri,useMemo:Ld,useReducer:ta,useRef:Xc,useState:function(){return ta(js)},useDebugValue:Ku,useDeferredValue:function($){var c=ta(js),f=c[0],S=c[1];return Eu(function(){var M=Dn.transition;Dn.transition={};try{S($)}finally{Dn.transition=M}},[$]),f},useTransition:function(){var $=ta(js)[0],c=Ds().memoizedState;return[$,c]},useMutableSource:jc,useSyncExternalStore:Eh,useId:Dd,unstable_isNewReconciler:!1},td={readContext:ni,useCallback:Sh,useContext:ni,useEffect:Eu,useImperativeHandle:Yc,useInsertionEffect:$h,useLayoutEffect:ri,useMemo:Ld,useReducer:Th,useRef:Xc,useState:function(){return Th(js)},useDebugValue:Ku,useDeferredValue:function($){var c=Th(js),f=c[0],S=c[1];return Eu(function(){var M=Dn.transition;Dn.transition={};try{S($)}finally{Dn.transition=M}},[$]),f},useTransition:function(){var $=Th(js)[0],c=Ds().memoizedState;return[$,c]},useMutableSource:jc,useSyncExternalStore:Eh,useId:Dd,unstable_isNewReconciler:!1};function Ju($,c){try{var f="",S=c;do f+=Yr(S),S=S.return;while(S);var M=f}catch(L){M=`
Error generating stack: `+L.message+`
`+L.stack}return{value:$,source:c,stack:M}}function Ha($,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var Qu=typeof WeakMap=="function"?WeakMap:Map;function nd($,c,f){f=gu(-1,f),f.tag=3,f.payload={element:null};var S=c.value;return f.callback=function(){Au||(Au=!0,Iu=S),Ha($,c)},f}function wc($,c,f){f=gu(-1,f),f.tag=3;var S=$.type.getDerivedStateFromError;if(typeof S=="function"){var M=c.value;f.payload=function(){return S(M)},f.callback=function(){Ha($,c)}}var L=$.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(f.callback=function(){Ha($,c),typeof S!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var G=c.stack;this.componentDidCatch(c.value,{componentStack:G!==null?G:""})}),f}function xc($,c,f){var S=$.pingCache;if(S===null){S=$.pingCache=new Qu;var M=new Set;S.set(c,M)}else M=S.get(c),M===void 0&&(M=new Set,S.set(c,M));M.has(f)||(M.add(f),$=Zs.bind(null,$,c,f),c.then($,$))}function qu($){do{var c;if((c=$.tag===13)&&(c=$.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return $;$=$.return}while($!==null);return null}function Nd($,c,f,S,M){return $.mode&1?($.flags|=65536,$.lanes=M,$):($===c?$.flags|=65536:($.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=gu(-1,1),c.tag=2,gs(f,c))),f.lanes|=1),$)}function ra($){$.flags|=4}function xr($,c){if($!==null&&$.child===c.child)return!0;if(c.flags&16)return!1;for($=c.child;$!==null;){if($.flags&12854||$.subtreeFlags&12854)return!1;$=$.sibling}return!0}var Vl,qi,ia,ye;if(Qe)Vl=function($,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)le($,f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},qi=function(){},ia=function($,c,f,S,M){if($=$.memoizedProps,$!==S){var L=c.stateNode,G=ea(_s.current);f=Oe(L,f,$,S,M,G),(c.updateQueue=f)&&ra(c)}},ye=function($,c,f,S){f!==S&&ra(c)};else if(De){Vl=function($,c,f,S){for(var M=c.child;M!==null;){if(M.tag===5){var L=M.stateNode;f&&S&&(L=Xn(L,M.type,M.memoizedProps,M)),le($,L)}else if(M.tag===6)L=M.stateNode,f&&S&&(L=q(L,M.memoizedProps,M)),le($,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),Vl($,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};var Xs=function($,c,f,S){for(var M=c.child;M!==null;){if(M.tag===5){var L=M.stateNode;f&&S&&(L=Xn(L,M.type,M.memoizedProps,M)),cr($,L)}else if(M.tag===6)L=M.stateNode,f&&S&&(L=q(L,M.memoizedProps,M)),cr($,L);else if(M.tag!==4){if(M.tag===22&&M.memoizedState!==null)L=M.child,L!==null&&(L.return=M),Xs($,M,!0,!0);else if(M.child!==null){M.child.return=M,M=M.child;continue}}if(M===c)break;for(;M.sibling===null;){if(M.return===null||M.return===c)return;M=M.return}M.sibling.return=M.return,M=M.sibling}};qi=function($,c){var f=c.stateNode;if(!xr($,c)){$=f.containerInfo;var S=Er($);Xs(S,c,!1,!1),f.pendingChildren=S,ra(c),Gr($,S)}},ia=function($,c,f,S,M){var L=$.stateNode,G=$.memoizedProps;if(($=xr($,c))&&G===S)c.stateNode=L;else{var se=c.stateNode,we=ea(_s.current),je=null;G!==S&&(je=Oe(se,f,G,S,M,we)),$&&je===null?c.stateNode=L:(L=Tn(L,je,f,G,S,c,$,se),_e(L,f,S,M,we)&&ra(c),c.stateNode=L,$?ra(c):Vl(L,c,!1,!1))}},ye=function($,c,f,S){f!==S?($=ea(_l.current),f=ea(_s.current),c.stateNode=Xe(S,$,f,c),ra(c)):c.stateNode=$.stateNode}}else qi=function(){},ia=function(){},ye=function(){};function Ga($,c){if(!ur)switch($.tailMode){case"hidden":c=$.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?$.tail=null:f.sibling=null;break;case"collapsed":f=$.tail;for(var S=null;f!==null;)f.alternate!==null&&(S=f),f=f.sibling;S===null?c||$.tail===null?$.tail=null:$.tail.sibling=null:S.sibling=null}}function Ur($){var c=$.alternate!==null&&$.alternate.child===$.child,f=0,S=0;if(c)for(var M=$.child;M!==null;)f|=M.lanes|M.childLanes,S|=M.subtreeFlags&14680064,S|=M.flags&14680064,M.return=$,M=M.sibling;else for(M=$.child;M!==null;)f|=M.lanes|M.childLanes,S|=M.subtreeFlags,S|=M.flags,M.return=$,M=M.sibling;return $.subtreeFlags|=S,$.childLanes=f,c}function zn($,c,f){var S=c.pendingProps;switch(Kh(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ur(c),null;case 1:return jr(c.type)&&Bi(),Ur(c),null;case 3:return S=c.stateNode,Wl(),dr(er),dr(wr),bt(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),($===null||$.child===null)&&(Xu(c)?ra(c):$===null||$.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,qo!==null&&(on(qo),qo=null))),qi($,c),Ur(c),null;case 5:kd(c),f=ea(_l.current);var M=c.type;if($!==null&&c.stateNode!=null)ia($,c,M,S,f),$.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!S){if(c.stateNode===null)throw Error(o(166));return Ur(c),null}if($=ea(_s.current),Xu(c)){if(!Se)throw Error(o(175));$=Bt(c.stateNode,c.type,c.memoizedProps,f,$,c,!wi),c.updateQueue=$,$!==null&&ra(c)}else{var L=ne(M,S,f,$,c);Vl(L,c,!1,!1),c.stateNode=L,_e(L,M,S,f,$)&&ra(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ur(c),null;case 6:if($&&c.stateNode!=null)ye($,c,$.memoizedProps,S);else{if(typeof S!="string"&&c.stateNode===null)throw Error(o(166));if($=ea(_l.current),f=ea(_s.current),Xu(c)){if(!Se)throw Error(o(176));if($=c.stateNode,S=c.memoizedProps,(f=xn($,S,c,!wi))&&(M=Si,M!==null))switch(L=(M.mode&1)!==0,M.tag){case 3:jo(M.stateNode.containerInfo,$,S,L);break;case 5:Ro(M.type,M.memoizedProps,M.stateNode,$,S,L)}f&&ra(c)}else c.stateNode=Xe(S,$,f,c)}return Ur(c),null;case 13:if(dr(mi),S=c.memoizedState,ur&&fi!==null&&(c.mode&1)!==0&&(c.flags&128)===0){for($=fi;$;)$=Ie($);return vc(),c.flags|=98560,c}if(S!==null&&S.dehydrated!==null){if(S=Xu(c),$===null){if(!S)throw Error(o(318));if(!Se)throw Error(o(344));if($=c.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(o(317));Bn($,c)}else vc(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Ur(c),null}return qo!==null&&(on(qo),qo=null),c.flags&128?(c.lanes=f,c):(S=S!==null,f=!1,$===null?Xu(c):f=$.memoizedState!==null,S&&!f&&(c.child.flags|=8192,c.mode&1&&($===null||mi.current&1?Ri===0&&(Ri=3):od())),c.updateQueue!==null&&(c.flags|=4),Ur(c),null);case 4:return Wl(),qi($,c),$===null&&rt(c.stateNode.containerInfo),Ur(c),null;case 10:return mu(c.type._context),Ur(c),null;case 17:return jr(c.type)&&Bi(),Ur(c),null;case 19:if(dr(mi),M=c.memoizedState,M===null)return Ur(c),null;if(S=(c.flags&128)!==0,L=M.rendering,L===null)if(S)Ga(M,!1);else{if(Ri!==0||$!==null&&$.flags&128)for($=c.child;$!==null;){if(L=Ye($),L!==null){for(c.flags|=128,Ga(M,!1),$=L.updateQueue,$!==null&&(c.updateQueue=$,c.flags|=4),c.subtreeFlags=0,$=f,S=c.child;S!==null;)f=S,M=$,f.flags&=14680066,L=f.alternate,L===null?(f.childLanes=0,f.lanes=M,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=L.childLanes,f.lanes=L.lanes,f.child=L.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=L.memoizedProps,f.memoizedState=L.memoizedState,f.updateQueue=L.updateQueue,f.type=L.type,M=L.dependencies,f.dependencies=M===null?null:{lanes:M.lanes,firstContext:M.firstContext}),S=S.sibling;return pn(mi,mi.current&1|2),c.child}$=$.sibling}M.tail!==null&&Ei()>sd&&(c.flags|=128,S=!0,Ga(M,!1),c.lanes=4194304)}else{if(!S)if($=Ye(L),$!==null){if(c.flags|=128,S=!0,$=$.updateQueue,$!==null&&(c.updateQueue=$,c.flags|=4),Ga(M,!0),M.tail===null&&M.tailMode==="hidden"&&!L.alternate&&!ur)return Ur(c),null}else 2*Ei()-M.renderingStartTime>sd&&f!==1073741824&&(c.flags|=128,S=!0,Ga(M,!1),c.lanes=4194304);M.isBackwards?(L.sibling=c.child,c.child=L):($=M.last,$!==null?$.sibling=L:c.child=L,M.last=L)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=Ei(),c.sibling=null,$=mi.current,pn(mi,S?$&1|2:$&1),c):(Ur(c),null);case 22:case 23:return Dt(),S=c.memoizedState!==null,$!==null&&$.memoizedState!==null!==S&&(c.flags|=8192),S&&c.mode&1?Hr&1073741824&&(Ur(c),Qe&&c.subtreeFlags&6&&(c.flags|=8192)):Ur(c),null;case 24:return null;case 25:return null}throw Error(o(156,c.tag))}var jp=l.ReactCurrentOwner,ba=!1;function Qr($,c,f,S){c.child=$===null?bc(c,null,f,S):bh(c,$.child,f,S)}function gi($,c,f,S,M){f=f.render;var L=c.ref;return di(c,M),S=Ec($,c,f,S,L,M),f=Br(),$!==null&&!ba?(c.updateQueue=$.updateQueue,c.flags&=-2053,$.lanes&=~M,zr($,c,M)):(ur&&f&&gl(c),c.flags|=1,Qr($,c,S,M),c.child)}function xi($,c,f,S,M){if($===null){var L=f.type;return typeof L=="function"&&!Fs(L)&&L.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=L,Ii($,c,L,S,M)):($=eo(f.type,null,S,c,c.mode,M),$.ref=c.ref,$.return=c,c.child=$)}if(L=$.child,($.lanes&M)===0){var G=L.memoizedProps;if(f=f.compare,f=f!==null?f:pu,f(G,S)&&$.ref===c.ref)return zr($,c,M)}return c.flags|=1,$=Cl(L,S),$.ref=c.ref,$.return=c,c.child=$}function Ii($,c,f,S,M){if($!==null&&pu($.memoizedProps,S)&&$.ref===c.ref)if(ba=!1,($.lanes&M)!==0)$.flags&131072&&(ba=!0);else return c.lanes=$.lanes,zr($,c,M);return Bo($,c,f,S,M)}function Cc($,c,f){var S=c.pendingProps,M=S.children,L=$!==null?$.memoizedState:null;if(S.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},pn(Js,Hr),Hr|=f;else if(f&1073741824)c.memoizedState={baseLanes:0,cachePool:null},S=L!==null?L.baseLanes:f,pn(Js,Hr),Hr|=S;else return $=L!==null?L.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:$,cachePool:null},c.updateQueue=null,pn(Js,Hr),Hr|=$,null;else L!==null?(S=L.baseLanes|f,c.memoizedState=null):S=f,pn(Js,Hr),Hr|=S;return Qr($,c,M,f),c.child}function No($,c){var f=c.ref;($===null&&f!==null||$!==null&&$.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Bo($,c,f,S,M){var L=jr(f)?hi:wr.current;return L=Qi(c,L),di(c,M),f=Ec($,c,f,S,L,M),S=Br(),$!==null&&!ba?(c.updateQueue=$.updateQueue,c.flags&=-2053,$.lanes&=~M,zr($,c,M)):(ur&&S&&gl(c),c.flags|=1,Qr($,c,f,M),c.child)}function oo($,c,f,S,M){if(jr(f)){var L=!0;gc(c)}else L=!1;if(di(c,M),c.stateNode===null)$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),Wp(c,f,S),fp(c,f,S,M),S=!0;else if($===null){var G=c.stateNode,se=c.memoizedProps;G.props=se;var we=G.context,je=f.contextType;typeof je=="object"&&je!==null?je=ni(je):(je=jr(f)?hi:wr.current,je=Qi(c,je));var _t=f.getDerivedStateFromProps,zt=typeof _t=="function"||typeof G.getSnapshotBeforeUpdate=="function";zt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==S||we!==je)&&Pf(c,G,S,je),Kr=!1;var Zt=c.memoizedState;G.state=Zt,pi(c,S,G,M),we=c.memoizedState,se!==S||Zt!==we||er.current||Kr?(typeof _t=="function"&&(dp(c,f,_t,S),we=c.memoizedState),(se=Kr||pp(c,f,se,S,Zt,we,je))?(zt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(c.flags|=4194308)):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=we),G.props=S,G.state=we,G.context=je,S=se):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{G=c.stateNode,Xh($,c),se=c.memoizedProps,je=c.type===c.elementType?se:ms(c.type,se),G.props=je,zt=c.pendingProps,Zt=G.context,we=f.contextType,typeof we=="object"&&we!==null?we=ni(we):(we=jr(f)?hi:wr.current,we=Qi(c,we));var hn=f.getDerivedStateFromProps;(_t=typeof hn=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==zt||Zt!==we)&&Pf(c,G,S,we),Kr=!1,Zt=c.memoizedState,G.state=Zt,pi(c,S,G,M);var an=c.memoizedState;se!==zt||Zt!==an||er.current||Kr?(typeof hn=="function"&&(dp(c,f,hn,S),an=c.memoizedState),(je=Kr||pp(c,f,je,S,Zt,an,we)||!1)?(_t||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(S,an,we),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(S,an,we)),typeof G.componentDidUpdate=="function"&&(c.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof G.componentDidUpdate!="function"||se===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=an),G.props=S,G.state=an,G.context=we,S=je):(typeof G.componentDidUpdate!="function"||se===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===$.memoizedProps&&Zt===$.memoizedState||(c.flags|=1024),S=!1)}return Mc($,c,f,S,L,M)}function Mc($,c,f,S,M,L){No($,c);var G=(c.flags&128)!==0;if(!S&&!G)return M&&Vu(c,f,!1),zr($,c,L);S=c.stateNode,jp.current=c;var se=G&&typeof f.getDerivedStateFromError!="function"?null:S.render();return c.flags|=1,$!==null&&G?(c.child=bh(c,$.child,null,L),c.child=bh(c,null,se,L)):Qr($,c,se,L),c.memoizedState=S.state,M&&Vu(c,f,!0),c.child}function yo($){var c=$.stateNode;c.pendingContext?Pa($,c.pendingContext,c.pendingContext!==c.context):c.context&&Pa($,c.context,!1),vl($,c.containerInfo)}function Bd($,c,f,S,M){return vc(),yh(M),c.flags|=256,Qr($,c,f,S),c.child}var Pd={dehydrated:null,treeContext:null,retryLane:0};function Ch($){return{baseLanes:$,cachePool:null}}function Ta($,c,f){var S=c.pendingProps,M=mi.current,L=!1,G=(c.flags&128)!==0,se;if((se=G)||(se=$!==null&&$.memoizedState===null?!1:(M&2)!==0),se?(L=!0,c.flags&=-129):($===null||$.memoizedState!==null)&&(M|=1),pn(mi,M&1),$===null)return Jh(c),$=c.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(c.mode&1?Qt($)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(M=S.children,$=S.fallback,L?(S=c.mode,L=c.child,M={mode:"hidden",children:M},!(S&1)&&L!==null?(L.childLanes=0,L.pendingProps=M):L=Ca(M,S,0,null),$=Ja($,S,f,null),L.return=c,$.return=c,L.sibling=$,c.child=L,c.child.memoizedState=Ch(f),c.memoizedState=Pd,$):Cn(c,M));if(M=$.memoizedState,M!==null){if(se=M.dehydrated,se!==null){if(G)return c.flags&256?(c.flags&=-257,ii($,c,f,Error(o(422)))):c.memoizedState!==null?(c.child=$.child,c.flags|=128,null):(L=S.fallback,M=c.mode,S=Ca({mode:"visible",children:S.children},M,0,null),L=Ja(L,M,f,null),L.flags|=2,S.return=c,L.return=c,S.sibling=L,c.child=S,c.mode&1&&bh(c,$.child,null,f),c.child.memoizedState=Ch(f),c.memoizedState=Pd,L);if(!(c.mode&1))c=ii($,c,f,null);else if(Qt(se))c=ii($,c,f,Error(o(419)));else if(S=(f&$.childLanes)!==0,ba||S){if(S=On,S!==null){switch(f&-f){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}S=L&(S.suspendedLanes|f)?0:L,S!==0&&S!==M.retryLane&&(M.retryLane=S,Ts($,S,-1))}od(),c=ii($,c,f,Error(o(421)))}else Rt(se)?(c.flags|=128,c.child=$.child,c=rh.bind(null,$),gn(se,c),c=null):(f=M.treeContext,Se&&(fi=pt(se),Si=c,ur=!0,qo=null,wi=!1,f!==null&&(_a[Wr++]=Vs,_a[Wr++]=Qo,_a[Wr++]=lr,Vs=f.id,Qo=f.overflow,lr=c)),c=Cn(c,c.pendingProps.children),c.flags|=4096);return c}return L?(S=ys($,c,S.children,S.fallback,f),L=c.child,M=$.child.memoizedState,L.memoizedState=M===null?Ch(f):{baseLanes:M.baseLanes|f,cachePool:null},L.childLanes=$.childLanes&~f,c.memoizedState=Pd,S):(f=as($,c,S.children,f),c.memoizedState=null,f)}return L?(S=ys($,c,S.children,S.fallback,f),L=c.child,M=$.child.memoizedState,L.memoizedState=M===null?Ch(f):{baseLanes:M.baseLanes|f,cachePool:null},L.childLanes=$.childLanes&~f,c.memoizedState=Pd,S):(f=as($,c,S.children,f),c.memoizedState=null,f)}function Cn($,c){return c=Ca({mode:"visible",children:c},$.mode,0,null),c.return=$,$.child=c}function as($,c,f,S){var M=$.child;return $=M.sibling,f=Cl(M,{mode:"visible",children:f}),!(c.mode&1)&&(f.lanes=S),f.return=c,f.sibling=null,$!==null&&(S=c.deletions,S===null?(c.deletions=[$],c.flags|=16):S.push($)),c.child=f}function ys($,c,f,S,M){var L=c.mode;$=$.child;var G=$.sibling,se={mode:"hidden",children:f};return!(L&1)&&c.child!==$?(f=c.child,f.childLanes=0,f.pendingProps=se,c.deletions=null):(f=Cl($,se),f.subtreeFlags=$.subtreeFlags&14680064),G!==null?S=Cl(G,S):(S=Ja(S,L,M,null),S.flags|=2),S.return=c,f.return=c,f.sibling=S,c.child=f,S}function ii($,c,f,S){return S!==null&&yh(S),bh(c,$.child,null,f),$=Cn(c,c.pendingProps.children),$.flags|=2,c.memoizedState=null,$}function $l($,c,f){$.lanes|=c;var S=$.alternate;S!==null&&(S.lanes|=c),Ua($.return,c,f)}function Sl($,c,f,S,M){var L=$.memoizedState;L===null?$.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:f,tailMode:M}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=f,L.tailMode=M)}function cn($,c,f){var S=c.pendingProps,M=S.revealOrder,L=S.tail;if(Qr($,c,S.children,f),S=mi.current,(S&2)!==0)S=S&1|2,c.flags|=128;else{if($!==null&&$.flags&128)e:for($=c.child;$!==null;){if($.tag===13)$.memoizedState!==null&&$l($,f,c);else if($.tag===19)$l($,f,c);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===c)break e;for(;$.sibling===null;){if($.return===null||$.return===c)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}S&=1}if(pn(mi,S),(c.mode&1)===0)c.memoizedState=null;else switch(M){case"forwards":for(f=c.child,M=null;f!==null;)$=f.alternate,$!==null&&Ye($)===null&&(M=f),f=f.sibling;f=M,f===null?(M=c.child,c.child=null):(M=f.sibling,f.sibling=null),Sl(c,!1,M,f,L);break;case"backwards":for(f=null,M=c.child,c.child=null;M!==null;){if($=M.alternate,$!==null&&Ye($)===null){c.child=M;break}$=M.sibling,M.sibling=f,f=M,M=$}Sl(c,!0,f,null,L);break;case"together":Sl(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function zr($,c,f){if($!==null&&(c.dependencies=$.dependencies),Xl|=c.lanes,(f&c.childLanes)===0)return null;if($!==null&&c.child!==$.child)throw Error(o(153));if(c.child!==null){for($=c.child,f=Cl($,$.pendingProps),c.child=f,f.return=c;$.sibling!==null;)$=$.sibling,f=f.sibling=Cl($,$.pendingProps),f.return=c;f.sibling=null}return c.child}function Zi($,c,f){switch(c.tag){case 3:yo(c),vc();break;case 5:Vc(c);break;case 1:jr(c.type)&&gc(c);break;case 4:vl(c,c.stateNode.containerInfo);break;case 10:ro(c,c.type._context,c.memoizedProps.value);break;case 13:var S=c.memoizedState;if(S!==null)return S.dehydrated!==null?(pn(mi,mi.current&1),c.flags|=128,null):f&c.child.childLanes?Ta($,c,f):(pn(mi,mi.current&1),$=zr($,c,f),$!==null?$.sibling:null);pn(mi,mi.current&1);break;case 19:if(S=(f&c.childLanes)!==0,($.flags&128)!==0){if(S)return cn($,c,f);c.flags|=128}var M=c.memoizedState;if(M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),pn(mi,mi.current),S)break;return null;case 22:case 23:return c.lanes=0,Cc($,c,f)}return zr($,c,f)}function Xp($,c){switch(Kh(c),c.tag){case 1:return jr(c.type)&&Bi(),$=c.flags,$&65536?(c.flags=$&-65537|128,c):null;case 3:return Wl(),dr(er),dr(wr),bt(),$=c.flags,$&65536&&!($&128)?(c.flags=$&-65537|128,c):null;case 5:return kd(c),null;case 13:if(dr(mi),$=c.memoizedState,$!==null&&$.dehydrated!==null){if(c.alternate===null)throw Error(o(340));vc()}return $=c.flags,$&65536?(c.flags=$&-65537|128,c):null;case 19:return dr(mi),null;case 4:return Wl(),null;case 10:return mu(c.type._context),null;case 22:case 23:return Dt(),null;case 24:return null;default:return null}}var Kc=!1,Ns=!1,Po=typeof WeakSet=="function"?WeakSet:Set,dn=null;function rn($,c){var f=$.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(S){$o($,c,S)}else f.current=null}function Wa($,c,f){try{f()}catch(S){$o($,c,S)}}var Zu=!1;function Uf($,c){for(j($.containerInfo),dn=c;dn!==null;)if($=dn,c=$.child,($.subtreeFlags&1028)!==0&&c!==null)c.return=$,dn=c;else for(;dn!==null;){$=dn;try{var f=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var S=f.memoizedProps,M=f.memoizedState,L=$.stateNode,G=L.getSnapshotBeforeUpdate($.elementType===$.type?S:ms($.type,S),M);L.__reactInternalSnapshotBeforeUpdate=G}break;case 3:Qe&&Ft($.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){$o($,$.return,se)}if(c=$.sibling,c!==null){c.return=$.return,dn=c;break}dn=$.return}return f=Zu,Zu=!1,f}function $u($,c,f){var S=c.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var M=S=S.next;do{if((M.tag&$)===$){var L=M.destroy;M.destroy=void 0,L!==void 0&&Wa(c,f,L)}M=M.next}while(M!==S)}}function sa($,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&$)===$){var S=f.create;f.destroy=S()}f=f.next}while(f!==c)}}function ls($){var c=$.ref;if(c!==null){var f=$.stateNode;switch($.tag){case 5:$=ue(f);break;default:$=f}typeof c=="function"?c($):c.current=$}}function Ea($,c,f){if(Oo&&typeof Oo.onCommitFiberUnmount=="function")try{Oo.onCommitFiberUnmount(hu,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if($=c.updateQueue,$!==null&&($=$.lastEffect,$!==null)){var S=$=$.next;do{var M=S,L=M.destroy;M=M.tag,L!==void 0&&(M&2||M&4)&&Wa(c,f,L),S=S.next}while(S!==$)}break;case 1:if(rn(c,f),$=c.stateNode,typeof $.componentWillUnmount=="function")try{$.props=c.memoizedProps,$.state=c.memoizedState,$.componentWillUnmount()}catch(G){$o(c,f,G)}break;case 5:rn(c,f);break;case 4:Qe?Jc($,c,f):De&&De&&(c=c.stateNode.containerInfo,f=Er(c),sr(c,f))}}function zi($,c,f){for(var S=c;;)if(Ea($,S,f),S.child===null||Qe&&S.tag===4){if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function $a($){var c=$.alternate;c!==null&&($.alternate=null,$a(c)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(c=$.stateNode,c!==null&&wt(c)),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Su($){return $.tag===5||$.tag===3||$.tag===4}function Fd($){e:for(;;){for(;$.sibling===null;){if($.return===null||Su($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function ec($){if(Qe){e:{for(var c=$.return;c!==null;){if(Su(c))break e;c=c.return}throw Error(o(160))}var f=c;switch(f.tag){case 5:c=f.stateNode,f.flags&32&&(Pt(c),f.flags&=-33),f=Fd($),Ud($,f,c);break;case 3:case 4:c=f.stateNode.containerInfo,f=Fd($),Ys($,f,c);break;default:throw Error(o(161))}}}function Ys($,c,f){var S=$.tag;if(S===5||S===6)$=$.stateNode,c?ae(f,$,c):ct(f,$);else if(S!==4&&($=$.child,$!==null))for(Ys($,c,f),$=$.sibling;$!==null;)Ys($,c,f),$=$.sibling}function Ud($,c,f){var S=$.tag;if(S===5||S===6)$=$.stateNode,c?Q(f,$,c):$t(f,$);else if(S!==4&&($=$.child,$!==null))for(Ud($,c,f),$=$.sibling;$!==null;)Ud($,c,f),$=$.sibling}function Jc($,c,f){for(var S=c,M=!1,L,G;;){if(!M){M=S.return;e:for(;;){if(M===null)throw Error(o(160));switch(L=M.stateNode,M.tag){case 5:G=!1;break e;case 3:L=L.containerInfo,G=!0;break e;case 4:L=L.containerInfo,G=!0;break e}M=M.return}M=!0}if(S.tag===5||S.tag===6)zi($,S,f),G?Ve(L,S.stateNode):$e(L,S.stateNode);else if(S.tag===18)G?Ar(L,S.stateNode):$r(L,S.stateNode);else if(S.tag===4){if(S.child!==null){L=S.stateNode.containerInfo,G=!0,S.child.return=S,S=S.child;continue}}else if(Ea($,S,f),S.child!==null){S.child.return=S,S=S.child;continue}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return,S.tag===4&&(M=!1)}S.sibling.return=S.return,S=S.sibling}}function rd($,c){if(Qe){switch(c.tag){case 0:case 11:case 14:case 15:$u(3,c,c.return),sa(3,c),$u(5,c,c.return);return;case 1:return;case 5:var f=c.stateNode;if(f!=null){var S=c.memoizedProps;$=$!==null?$.memoizedProps:S;var M=c.type,L=c.updateQueue;c.updateQueue=null,L!==null&&X(f,L,M,$,S,c)}return;case 6:if(c.stateNode===null)throw Error(o(162));f=c.memoizedProps,Ge(c.stateNode,$!==null?$.memoizedProps:f,f);return;case 3:Se&&$!==null&&$.memoizedState.isDehydrated&&vr(c.stateNode.containerInfo);return;case 12:return;case 13:Sa(c);return;case 19:Sa(c);return;case 17:return}throw Error(o(163))}switch(c.tag){case 0:case 11:case 14:case 15:$u(3,c,c.return),sa(3,c),$u(5,c,c.return);return;case 12:return;case 13:Sa(c);return;case 19:Sa(c);return;case 3:Se&&$!==null&&$.memoizedState.isDehydrated&&vr(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(De){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,sr(c.containerInfo,c.pendingChildren);break e}throw Error(o(163))}}function Sa($){var c=$.updateQueue;if(c!==null){$.updateQueue=null;var f=$.stateNode;f===null&&(f=$.stateNode=new Po),c.forEach(function(S){var M=Ka.bind(null,$,S);f.has(S)||(f.add(S),S.then(M,M))})}}function wl($,c){for(dn=c;dn!==null;){c=dn;var f=c.deletions;if(f!==null)for(var S=0;S<f.length;S++){var M=f[S];try{var L=$;Qe?Jc(L,M,c):zi(L,M,c);var G=M.alternate;G!==null&&(G.return=null),M.return=null}catch(Ot){$o(M,c,Ot)}}if(f=c.child,(c.subtreeFlags&12854)!==0&&f!==null)f.return=c,dn=f;else for(;dn!==null;){c=dn;try{var se=c.flags;if(se&32&&Qe&&Pt(c.stateNode),se&512){var we=c.alternate;if(we!==null){var je=we.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(se&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var _t=c.alternate;(_t===null||_t.memoizedState===null)&&(lo=Ei())}break;case 22:var zt=c.memoizedState!==null,Zt=c.alternate,hn=Zt!==null&&Zt.memoizedState!==null;if(f=c,Qe){e:if(S=f,M=zt,L=null,Qe)for(var an=S;;){if(an.tag===5){if(L===null){L=an;var nn=an.stateNode;M?Fe(nn):lt(an.stateNode,an.memoizedProps)}}else if(an.tag===6){if(L===null){var br=an.stateNode;M?Wt(br):Ut(br,an.memoizedProps)}}else if((an.tag!==22&&an.tag!==23||an.memoizedState===null||an===S)&&an.child!==null){an.child.return=an,an=an.child;continue}if(an===S)break;for(;an.sibling===null;){if(an.return===null||an.return===S)break e;L===an&&(L=null),an=an.return}L===an&&(L=null),an.sibling.return=an.return,an=an.sibling}}if(zt&&!hn&&f.mode&1){dn=f;for(var ft=f.child;ft!==null;){for(f=dn=ft;dn!==null;){S=dn;var Ee=S.child;switch(S.tag){case 0:case 11:case 14:case 15:$u(4,S,S.return);break;case 1:rn(S,S.return);var Ce=S.stateNode;if(typeof Ce.componentWillUnmount=="function"){var Ke=S.return;try{Ce.props=S.memoizedProps,Ce.state=S.memoizedState,Ce.componentWillUnmount()}catch(Ot){$o(S,Ke,Ot)}}break;case 5:rn(S,S.return);break;case 22:if(S.memoizedState!==null){id(f);continue}}Ee!==null?(Ee.return=S,dn=Ee):id(f)}ft=ft.sibling}}}switch(se&4102){case 2:ec(c),c.flags&=-3;break;case 6:ec(c),c.flags&=-3,rd(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,rd(c.alternate,c);break;case 4:rd(c.alternate,c)}}catch(Ot){$o(c,c.return,Ot)}if(f=c.sibling,f!==null){f.return=c.return,dn=f;break}dn=c.return}}}function Yp($,c,f){dn=$,jl($)}function jl($,c,f){for(var S=($.mode&1)!==0;dn!==null;){var M=dn,L=M.child;if(M.tag===22&&S){var G=M.memoizedState!==null||Kc;if(!G){var se=M.alternate,we=se!==null&&se.memoizedState!==null||Ns;se=Kc;var je=Ns;if(Kc=G,(Ns=we)&&!je)for(dn=M;dn!==null;)G=dn,we=G.child,G.tag===22&&G.memoizedState!==null?Ac(M):we!==null?(we.return=G,dn=we):Ac(M);for(;L!==null;)dn=L,jl(L),L=L.sibling;dn=M,Kc=se,Ns=je}wu($)}else M.subtreeFlags&8772&&L!==null?(L.return=M,dn=L):wu($)}}function wu($){for(;dn!==null;){var c=dn;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Ns||sa(5,c);break;case 1:var S=c.stateNode;if(c.flags&4&&!Ns)if(f===null)S.componentDidMount();else{var M=c.elementType===c.type?f.memoizedProps:ms(c.type,f.memoizedProps);S.componentDidUpdate(M,f.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&_u(c,L,S);break;case 3:var G=c.updateQueue;if(G!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=ue(c.child.stateNode);break;case 1:f=c.child.stateNode}_u(c,G,f)}break;case 5:var se=c.stateNode;f===null&&c.flags&4&&Me(se,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&c.memoizedState===null){var we=c.alternate;if(we!==null){var je=we.memoizedState;if(je!==null){var _t=je.dehydrated;_t!==null&&ei(_t)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ns||c.flags&512&&ls(c)}catch(zt){$o(c,c.return,zt)}}if(c===$){dn=null;break}if(f=c.sibling,f!==null){f.return=c.return,dn=f;break}dn=c.return}}function id($){for(;dn!==null;){var c=dn;if(c===$){dn=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dn=f;break}dn=c.return}}function Ac($){for(;dn!==null;){var c=dn;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{sa(4,c)}catch(we){$o(c,f,we)}break;case 1:var S=c.stateNode;if(typeof S.componentDidMount=="function"){var M=c.return;try{S.componentDidMount()}catch(we){$o(c,M,we)}}var L=c.return;try{ls(c)}catch(we){$o(c,L,we)}break;case 5:var G=c.return;try{ls(c)}catch(we){$o(c,G,we)}}}catch(we){$o(c,c.return,we)}if(c===$){dn=null;break}var se=c.sibling;if(se!==null){se.return=c.return,dn=se;break}dn=c.return}}var us=0,xu=1,tc=2,bo=3,Va=4;if(typeof Symbol=="function"&&Symbol.for){var bs=Symbol.for;us=bs("selector.component"),xu=bs("selector.has_pseudo_class"),tc=bs("selector.role"),bo=bs("selector.test_id"),Va=bs("selector.text")}function ao($){var c=Pe($);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(o(364));return c}if($=It($),$===null)throw Error(o(362));return $.stateNode.current}function Qc($,c){switch(c.$$typeof){case us:if($.type===c.value)return!0;break;case xu:e:{c=c.value,$=[$,0];for(var f=0;f<$.length;){var S=$[f++],M=$[f++],L=c[M];if(S.tag!==5||!ee(S)){for(;L!=null&&Qc(S,L);)M++,L=c[M];if(M===c.length){c=!0;break e}else for(S=S.child;S!==null;)$.push(S,M),S=S.sibling}}c=!1}return c;case tc:if($.tag===5&&ke($.stateNode,c.value))return!0;break;case Va:if(($.tag===5||$.tag===6)&&($=ve($),$!==null&&0<=$.indexOf(c.value)))return!0;break;case bo:if($.tag===5&&($=$.memoizedProps["data-testname"],typeof $=="string"&&$.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ks($){switch($.$$typeof){case us:return"<"+(F($.value)||"Unknown")+">";case xu:return":has("+(Ks($)||"")+")";case tc:return'[role="'+$.value+'"]';case Va:return'"'+$.value+'"';case bo:return'[data-testname="'+$.value+'"]';default:throw Error(o(365))}}function ja($,c){var f=[];$=[$,0];for(var S=0;S<$.length;){var M=$[S++],L=$[S++],G=c[L];if(M.tag!==5||!ee(M)){for(;G!=null&&Qc(M,G);)L++,G=c[L];if(L===c.length)f.push(M);else for(M=M.child;M!==null;)$.push(M,L),M=M.sibling}}return f}function nc($,c){if(!St)throw Error(o(363));$=ao($),$=ja($,c),c=[],$=Array.from($);for(var f=0;f<$.length;){var S=$[f++];if(S.tag===5)ee(S)||c.push(S.stateNode);else for(S=S.child;S!==null;)$.push(S),S=S.sibling}return c}var _p=Math.ceil,qc=l.ReactCurrentDispatcher,oa=l.ReactCurrentOwner,_i=l.ReactCurrentBatchConfig,wn=0,On=null,yr=null,Or=0,Hr=0,Js=ci(0),Ri=0,Hi=null,Xl=0,Cu=0,rc=0,Mu=null,Bs=null,lo=0,sd=1/0;function wa(){sd=Ei()+500}var Au=!1,Iu=null,Qs=null,To=!1,Xa=null,Eo=0,ic=0,Ru=null,Mh=-1,Zc=0;function Sr(){return wn&6?Ei():Mh!==-1?Mh:Mh=Ei()}function Xi($){return $.mode&1?wn&2&&Or!==0?Or&-Or:Jo.transition!==null?(Zc===0&&($=mh,mh<<=1,!(mh&4194240)&&(mh=64),Zc=$),Zc):($=Jn,$!==0?$:We()):1}function Ts($,c,f){if(50<ic)throw ic=0,Ru=null,Error(o(185));var S=aa($,c);return S===null?null:(cu(S,c,f),(!(wn&2)||S!==On)&&(S===On&&(!(wn&2)&&(Cu|=c),Ri===4&&es(S,Or)),Ps(S,f),c===1&&wn===0&&!($.mode&1)&&(wa(),Os&&Ko())),S)}function aa($,c){$.lanes|=c;var f=$.alternate;for(f!==null&&(f.lanes|=c),f=$,$=$.return;$!==null;)$.childLanes|=c,f=$.alternate,f!==null&&(f.childLanes|=c),f=$,$=$.return;return f.tag===3?f.stateNode:null}function Ps($,c){var f=$.callbackNode;gh($,c);var S=Pi($,$===On?Or:0);if(S===0)f!==null&&Fa(f),$.callbackNode=null,$.callbackPriority=0;else if(c=S&-S,$.callbackPriority!==c){if(f!=null&&Fa(f),c===1)$.tag===0?Wc(xl.bind(null,$)):zl(xl.bind(null,$)),xt?ht(function(){wn===0&&Ko()}):pl(Fi,Ko),f=null;else{switch(Qn(S)){case 1:f=Fi;break;case 4:f=fl;break;case 16:f=Rd;break;case 536870912:f=ks;break;default:f=Rd}f=ih(f,Gn.bind(null,$))}$.callbackPriority=c,$.callbackNode=f}}function Gn($,c){if(Mh=-1,Zc=0,(wn&6)!==0)throw Error(o(327));var f=$.callbackNode;if(nh()&&$.callbackNode!==f)return null;var S=Pi($,$===On?Or:0);if(S===0)return null;if(S&30||S&$.expiredLanes||c)c=eh($,S);else{c=S;var M=wn;wn|=2;var L=Rc();(On!==$||Or!==c)&&(wa(),xa($,c));do try{Es();break}catch(se){Lr($,se)}while(!0);fu(),qc.current=L,wn=M,yr!==null?c=0:(On=null,Or=0,c=Ri)}if(c!==0){if(c===2&&(M=_c($),M!==0&&(S=M,c=Ic($,M))),c===1)throw f=Hi,xa($,0),es($,S),Ps($,Ei()),f;if(c===6)es($,S);else{if(M=$.current.alternate,(S&30)===0&&!si(M)&&(c=eh($,S),c===2&&(L=_c($),L!==0&&(S=L,c=Ic($,L))),c===1))throw f=Hi,xa($,0),es($,S),Ps($,Ei()),f;switch($.finishedWork=M,$.finishedLanes=S,c){case 0:case 1:throw Error(o(345));case 2:Yl($,Bs);break;case 3:if(es($,S),(S&130023424)===S&&(c=lo+500-Ei(),10<c)){if(Pi($,0)!==0)break;if(M=$.suspendedLanes,(M&S)!==S){Sr(),$.pingedLanes|=$.suspendedLanes&M;break}$.timeoutHandle=Re(Yl.bind(null,$,Bs),c);break}Yl($,Bs);break;case 4:if(es($,S),(S&4194240)===S)break;for(c=$.eventTimes,M=-1;0<S;){var G=31-Rs(S);L=1<<G,G=c[G],G>M&&(M=G),S&=~L}if(S=M,S=Ei()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*_p(S/1960))-S,10<S){$.timeoutHandle=Re(Yl.bind(null,$,Bs),S);break}Yl($,Bs);break;case 5:Yl($,Bs);break;default:throw Error(o(329))}}}return Ps($,Ei()),$.callbackNode===f?Gn.bind(null,$):null}function Ic($,c){var f=Mu;return $.current.memoizedState.isDehydrated&&(xa($,c).flags|=256),$=eh($,c),$!==2&&(c=Bs,Bs=f,c!==null&&on(c)),$}function on($){Bs===null?Bs=$:Bs.push.apply(Bs,$)}function si($){for(var c=$;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var S=0;S<f.length;S++){var M=f[S],L=M.getSnapshot;M=M.value;try{if(!pr(L(),M))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===$)break;for(;c.sibling===null;){if(c.return===null||c.return===$)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function es($,c){for(c&=~rc,c&=~Cu,$.suspendedLanes|=c,$.pingedLanes&=~c,$=$.expirationTimes;0<c;){var f=31-Rs(c),S=1<<f;$[f]=-1,c&=~S}}function xl($){if(wn&6)throw Error(o(327));nh();var c=Pi($,0);if(!(c&1))return Ps($,Ei()),null;var f=eh($,c);if($.tag!==0&&f===2){var S=_c($);S!==0&&(c=S,f=Ic($,S))}if(f===1)throw f=Hi,xa($,0),es($,c),Ps($,Ei()),f;if(f===6)throw Error(o(345));return $.finishedWork=$.current.alternate,$.finishedLanes=c,Yl($,Bs),Ps($,Ei()),null}function Ya($){Xa!==null&&Xa.tag===0&&!(wn&6)&&nh();var c=wn;wn|=1;var f=_i.transition,S=Jn;try{if(_i.transition=null,Jn=1,$)return $()}finally{Jn=S,_i.transition=f,wn=c,!(wn&6)&&Ko()}}function Dt(){Hr=Js.current,dr(Js)}function xa($,c){$.finishedWork=null,$.finishedLanes=0;var f=$.timeoutHandle;if(f!==et&&($.timeoutHandle=et,Je(f)),yr!==null)for(f=yr.return;f!==null;){var S=f;switch(Kh(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Bi();break;case 3:Wl(),dr(er),dr(wr),bt();break;case 5:kd(S);break;case 4:Wl();break;case 13:dr(mi);break;case 19:dr(mi);break;case 10:mu(S.type._context);break;case 22:case 23:Dt()}f=f.return}if(On=$,yr=$=Cl($.current,null),Or=Hr=c,Ri=0,Hi=null,rc=Cu=Xl=0,Bs=Mu=null,Un!==null){for(c=0;c<Un.length;c++)if(f=Un[c],S=f.interleaved,S!==null){f.interleaved=null;var M=S.next,L=f.pending;if(L!==null){var G=L.next;L.next=M,S.next=G}f.pending=S}Un=null}return $}function Lr($,c){do{var f=yr;try{if(fu(),mn.current=El,Ls){for(var S=rr.memoizedState;S!==null;){var M=S.queue;M!==null&&(M.pending=null),S=S.next}Ls=!1}if(qn=0,Ir=An=rr=null,vs=!1,vo=0,oa.current=null,f===null||f.return===null){Ri=1,Hi=c,yr=null;break}e:{var L=$,G=f.return,se=f,we=c;if(c=Or,se.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var je=we,_t=se,zt=_t.tag;if(!(_t.mode&1)&&(zt===0||zt===11||zt===15)){var Zt=_t.alternate;Zt?(_t.updateQueue=Zt.updateQueue,_t.memoizedState=Zt.memoizedState,_t.lanes=Zt.lanes):(_t.updateQueue=null,_t.memoizedState=null)}var hn=qu(G);if(hn!==null){hn.flags&=-257,Nd(hn,G,se,L,c),hn.mode&1&&xc(L,je,c),c=hn,we=je;var an=c.updateQueue;if(an===null){var nn=new Set;nn.add(we),c.updateQueue=nn}else an.add(we);break e}else{if(!(c&1)){xc(L,je,c),od();break e}we=Error(o(426))}}else if(ur&&se.mode&1){var br=qu(G);if(br!==null){!(br.flags&65536)&&(br.flags|=256),Nd(br,G,se,L,c),yh(we);break e}}L=we,Ri!==4&&(Ri=2),Mu===null?Mu=[L]:Mu.push(L),we=Ju(we,se),se=G;do{switch(se.tag){case 3:se.flags|=65536,c&=-c,se.lanes|=c;var ft=nd(se,we,c);Yh(se,ft);break e;case 1:L=we;var Ee=se.type,Ce=se.stateNode;if(!(se.flags&128)&&(typeof Ee.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(Qs===null||!Qs.has(Ce)))){se.flags|=65536,c&=-c,se.lanes|=c;var Ke=wc(se,L,c);Yh(se,Ke);break e}}se=se.return}while(se!==null)}qs(f)}catch(Ot){c=Ot,yr===f&&f!==null&&(yr=f=f.return);continue}break}while(!0)}function Rc(){var $=qc.current;return qc.current=El,$===null?El:$}function od(){(Ri===0||Ri===3||Ri===2)&&(Ri=4),On===null||!(Xl&268435455)&&!(Cu&268435455)||es(On,Or)}function eh($,c){var f=wn;wn|=2;var S=Rc();On===$&&Or===c||xa($,c);do try{ts();break}catch(M){Lr($,M)}while(!0);if(fu(),wn=f,qc.current=S,yr!==null)throw Error(o(261));return On=null,Or=0,Ri}function ts(){for(;yr!==null;)Ah(yr)}function Es(){for(;yr!==null&&!ma();)Ah(yr)}function Ah($){var c=Ou($.alternate,$,Hr);$.memoizedProps=$.pendingProps,c===null?qs($):yr=c,oa.current=null}function qs($){var c=$;do{var f=c.alternate;if($=c.return,(c.flags&32768)===0){if(f=zn(f,c,Hr),f!==null){yr=f;return}}else{if(f=Xp(f,c),f!==null){f.flags&=32767,yr=f;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{Ri=6,yr=null;return}}if(c=c.sibling,c!==null){yr=c;return}yr=c=$}while(c!==null);Ri===0&&(Ri=5)}function Yl($,c){var f=Jn,S=_i.transition;try{_i.transition=null,Jn=1,th($,c,f)}finally{_i.transition=S,Jn=f}return null}function th($,c,f){do nh();while(Xa!==null);if(wn&6)throw Error(o(327));var S=$.finishedWork,M=$.finishedLanes;if(S===null)return null;if($.finishedWork=null,$.finishedLanes=0,S===$.current)throw Error(o(177));$.callbackNode=null,$.callbackPriority=0;var L=S.lanes|S.childLanes;if(hl($,L),$===On&&(yr=On=null,Or=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||To||(To=!0,ih(Rd,function(){return nh(),null})),L=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||L){L=_i.transition,_i.transition=null;var G=Jn;Jn=1;var se=wn;wn|=4,oa.current=null,Uf($,S),wl($,S),Z($.containerInfo),$.current=S,Yp(S),Fl(),wn=se,Jn=G,_i.transition=L}else $.current=S;if(To&&(To=!1,Xa=$,Eo=M),L=$.pendingLanes,L===0&&(Qs=null),Ul(S.stateNode),Ps($,Ei()),c!==null)for(f=$.onRecoverableError,S=0;S<c.length;S++)f(c[S]);if(Au)throw Au=!1,$=Iu,Iu=null,$;return Eo&1&&$.tag!==0&&nh(),L=$.pendingLanes,L&1?$===Ru?ic++:(ic=0,Ru=$):ic=0,Ko(),null}function nh(){if(Xa!==null){var $=Qn(Eo),c=_i.transition,f=Jn;try{if(_i.transition=null,Jn=16>$?16:$,Xa===null)var S=!1;else{if($=Xa,Xa=null,Eo=0,(wn&6)!==0)throw Error(o(331));var M=wn;for(wn|=4,dn=$.current;dn!==null;){var L=dn,G=L.child;if(dn.flags&16){var se=L.deletions;if(se!==null){for(var we=0;we<se.length;we++){var je=se[we];for(dn=je;dn!==null;){var _t=dn;switch(_t.tag){case 0:case 11:case 15:$u(8,_t,L)}var zt=_t.child;if(zt!==null)zt.return=_t,dn=zt;else for(;dn!==null;){_t=dn;var Zt=_t.sibling,hn=_t.return;if($a(_t),_t===je){dn=null;break}if(Zt!==null){Zt.return=hn,dn=Zt;break}dn=hn}}}var an=L.alternate;if(an!==null){var nn=an.child;if(nn!==null){an.child=null;do{var br=nn.sibling;nn.sibling=null,nn=br}while(nn!==null)}}dn=L}}if(L.subtreeFlags&2064&&G!==null)G.return=L,dn=G;else e:for(;dn!==null;){if(L=dn,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:$u(9,L,L.return)}var ft=L.sibling;if(ft!==null){ft.return=L.return,dn=ft;break e}dn=L.return}}var Ee=$.current;for(dn=Ee;dn!==null;){G=dn;var Ce=G.child;if(G.subtreeFlags&2064&&Ce!==null)Ce.return=G,dn=Ce;else e:for(G=Ee;dn!==null;){if(se=dn,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:sa(9,se)}}catch(Ot){$o(se,se.return,Ot)}if(se===G){dn=null;break e}var Ke=se.sibling;if(Ke!==null){Ke.return=se.return,dn=Ke;break e}dn=se.return}}if(wn=M,Ko(),Oo&&typeof Oo.onPostCommitFiberRoot=="function")try{Oo.onPostCommitFiberRoot(hu,$)}catch{}S=!0}return S}finally{Jn=f,_i.transition=c}}return!1}function sc($,c,f){c=Ju(f,c),c=nd($,c,1),gs($,c),c=Sr(),$=aa($,1),$!==null&&(cu($,1,c),Ps($,c))}function $o($,c,f){if($.tag===3)sc($,$,f);else for(;c!==null;){if(c.tag===3){sc(c,$,f);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Qs===null||!Qs.has(S))){$=Ju(f,$),$=wc(c,$,1),gs(c,$),$=Sr(),c=aa(c,1),c!==null&&(cu(c,1,$),Ps(c,$));break}}c=c.return}}function Zs($,c,f){var S=$.pingCache;S!==null&&S.delete(c),c=Sr(),$.pingedLanes|=$.suspendedLanes&f,On===$&&(Or&f)===f&&(Ri===4||Ri===3&&(Or&130023424)===Or&&500>Ei()-lo?xa($,0):rc|=f),Ps($,c)}function ku($,c){c===0&&($.mode&1?(c=Yo,Yo<<=1,!(Yo&130023424)&&(Yo=4194304)):c=1);var f=Sr();$=aa($,c),$!==null&&(cu($,c,f),Ps($,f))}function rh($){var c=$.memoizedState,f=0;c!==null&&(f=c.retryLane),ku($,f)}function Ka($,c){var f=0;switch($.tag){case 13:var S=$.stateNode,M=$.memoizedState;M!==null&&(f=M.retryLane);break;case 19:S=$.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(c),ku($,f)}var Ou;Ou=function($,c,f){if($!==null)if($.memoizedProps!==c.pendingProps||er.current)ba=!0;else{if(!($.lanes&f)&&!(c.flags&128))return ba=!1,Zi($,c,f);ba=($.flags&131072)!==0}else ba=!1,ur&&c.flags&1048576&&yu(c,vh,c.index);switch(c.lanes=0,c.tag){case 2:var S=c.type;$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),$=c.pendingProps;var M=Qi(c,wr.current);di(c,f),M=Ec(null,c,S,$,M,f);var L=Br();return c.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,jr(S)?(L=!0,gc(c)):L=!1,c.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,$i(c),M.updater=_h,c.stateNode=M,M._reactInternals=c,fp(c,S,$,f),c=Mc(null,c,S,!0,L,f)):(c.tag=0,ur&&L&&gl(c),Qr(null,c,M,f),c=c.child),c;case 16:S=c.elementType;e:{switch($!==null&&($.alternate=null,c.alternate=null,c.flags|=2),$=c.pendingProps,M=S._init,S=M(S._payload),c.type=S,M=c.tag=Lu(S),$=ms(S,$),M){case 0:c=Bo(null,c,S,$,f);break e;case 1:c=oo(null,c,S,$,f);break e;case 11:c=gi(null,c,S,$,f);break e;case 14:c=xi(null,c,S,ms(S.type,$),f);break e}throw Error(o(306,S,""))}return c;case 0:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ms(S,M),Bo($,c,S,M,f);case 1:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ms(S,M),oo($,c,S,M,f);case 3:e:{if(yo(c),$===null)throw Error(o(387));S=c.pendingProps,L=c.memoizedState,M=L.element,Xh($,c),pi(c,S,null,f);var G=c.memoizedState;if(S=G.element,Se&&L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:G.cache,transitions:G.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){M=Error(o(423)),c=Bd($,c,S,f,M);break e}else if(S!==M){M=Error(o(424)),c=Bd($,c,S,f,M);break e}else for(Se&&(fi=Tt(c.stateNode.containerInfo),Si=c,ur=!0,qo=null,wi=!1),f=bc(c,null,S,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(vc(),S===M){c=zr($,c,f);break e}Qr($,c,S,f)}c=c.child}return c;case 5:return Vc(c),$===null&&Jh(c),S=c.type,M=c.pendingProps,L=$!==null?$.memoizedProps:null,G=M.children,xe(S,M)?G=null:L!==null&&xe(S,L)&&(c.flags|=32),No($,c),Qr($,c,G,f),c.child;case 6:return $===null&&Jh(c),null;case 13:return Ta($,c,f);case 4:return vl(c,c.stateNode.containerInfo),S=c.pendingProps,$===null?c.child=bh(c,null,S,f):Qr($,c,S,f),c.child;case 11:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ms(S,M),gi($,c,S,M,f);case 7:return Qr($,c,c.pendingProps,f),c.child;case 8:return Qr($,c,c.pendingProps.children,f),c.child;case 12:return Qr($,c,c.pendingProps.children,f),c.child;case 10:e:{if(S=c.type._context,M=c.pendingProps,L=c.memoizedProps,G=M.value,ro(c,S,G),L!==null)if(pr(L.value,G)){if(L.children===M.children&&!er.current){c=zr($,c,f);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var se=L.dependencies;if(se!==null){G=L.child;for(var we=se.firstContext;we!==null;){if(we.context===S){if(L.tag===1){we=gu(-1,f&-f),we.tag=2;var je=L.updateQueue;if(je!==null){je=je.shared;var _t=je.pending;_t===null?we.next=we:(we.next=_t.next,_t.next=we),je.pending=we}}L.lanes|=f,we=L.alternate,we!==null&&(we.lanes|=f),Ua(L.return,f,c),se.lanes|=f;break}we=we.next}}else if(L.tag===10)G=L.type===c.type?null:L.child;else if(L.tag===18){if(G=L.return,G===null)throw Error(o(341));G.lanes|=f,se=G.alternate,se!==null&&(se.lanes|=f),Ua(G,f,c),G=L.sibling}else G=L.child;if(G!==null)G.return=L;else for(G=L;G!==null;){if(G===c){G=null;break}if(L=G.sibling,L!==null){L.return=G.return,G=L;break}G=G.return}L=G}Qr($,c,M.children,f),c=c.child}return c;case 9:return M=c.type,S=c.pendingProps.children,di(c,f),M=ni(M),S=S(M),c.flags|=1,Qr($,c,S,f),c.child;case 14:return S=c.type,M=ms(S,c.pendingProps),M=ms(S.type,M),xi($,c,S,M,f);case 15:return Ii($,c,c.type,c.pendingProps,f);case 17:return S=c.type,M=c.pendingProps,M=c.elementType===S?M:ms(S,M),$!==null&&($.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,jr(S)?($=!0,gc(c)):$=!1,di(c,f),Wp(c,S,M),fp(c,S,M,f),Mc(null,c,S,!0,$,f);case 19:return cn($,c,f);case 22:return Cc($,c,f)}throw Error(o(156,c.tag))};function ih($,c){return pl($,c)}function sh($,c,f,S){this.tag=$,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo($,c,f,S){return new sh($,c,f,S)}function Fs($){return $=$.prototype,!(!$||!$.isReactComponent)}function Lu($){if(typeof $=="function")return Fs($)?1:0;if($!=null){if($=$.$$typeof,$===w)return 11;if($===O)return 14}return 2}function Cl($,c){var f=$.alternate;return f===null?(f=uo($.tag,c,$.key,$.mode),f.elementType=$.elementType,f.type=$.type,f.stateNode=$.stateNode,f.alternate=$,$.alternate=f):(f.pendingProps=c,f.type=$.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=$.flags&14680064,f.childLanes=$.childLanes,f.lanes=$.lanes,f.child=$.child,f.memoizedProps=$.memoizedProps,f.memoizedState=$.memoizedState,f.updateQueue=$.updateQueue,c=$.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=$.sibling,f.index=$.index,f.ref=$.ref,f}function eo($,c,f,S,M,L){var G=2;if(S=$,typeof $=="function")Fs($)&&(G=1);else if(typeof $=="string")G=5;else e:switch($){case d:return Ja(f.children,M,L,c);case m:G=8,M|=8;break;case _:return $=uo(12,f,c,M|2),$.elementType=_,$.lanes=L,$;case x:return $=uo(13,f,c,M),$.elementType=x,$.lanes=L,$;case A:return $=uo(19,f,c,M),$.elementType=A,$.lanes=L,$;case N:return Ca(f,M,L,c);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case v:G=10;break e;case E:G=9;break e;case w:G=11;break e;case O:G=14;break e;case k:G=16,S=null;break e}throw Error(o(130,$==null?$:typeof $,""))}return c=uo(G,f,c,M),c.elementType=$,c.type=S,c.lanes=L,c}function Ja($,c,f,S){return $=uo(7,$,S,c),$.lanes=f,$}function Ca($,c,f,S){return $=uo(22,$,S,c),$.elementType=N,$.lanes=f,$.stateNode={},$}function Kl($,c,f){return $=uo(6,$,null,c),$.lanes=f,$}function ns($,c,f){return c=uo(4,$.children!==null?$.children:[],$.key,c),c.lanes=f,c.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},c}function So($,c,f,S,M){this.tag=c,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=et,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=S,this.onRecoverableError=M,Se&&(this.mutableSourceEagerHydrationData=null)}function Ih($,c,f,S,M,L,G,se,we){return $=new So($,c,f,se,we),c===1?(c=1,L===!0&&(c|=8)):c=0,L=uo(3,null,null,c),$.current=L,L.stateNode=$,L.memoizedState={element:S,isDehydrated:f,cache:null,transitions:null},$i(L),$}function ad($){if(!$)return ar;$=$._reactInternals;e:{if(z($)!==$||$.tag!==1)throw Error(o(170));var c=$;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(jr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(o(171))}if($.tag===1){var f=$.type;if(jr(f))return ul($,f,c)}return c}function Qa($){var c=$._reactInternals;if(c===void 0)throw typeof $.render=="function"?Error(o(188)):($=Object.keys($).join(","),Error(o(268,$)));return $=re(c),$===null?null:$.stateNode}function Jl($,c){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var f=$.retryLane;$.retryLane=f!==0&&f<c?f:c}}function ld($,c){Jl($,c),($=$.alternate)&&Jl($,c)}function kc($){return $=re($),$===null?null:$.stateNode}function Kp(){return null}return e.attemptContinuousHydration=function($){if($.tag===13){var c=Sr();Ts($,134217728,c),ld($,134217728)}},e.attemptHydrationAtCurrentPriority=function($){if($.tag===13){var c=Sr(),f=Xi($);Ts($,f,c),ld($,f)}},e.attemptSynchronousHydration=function($){switch($.tag){case 3:var c=$.stateNode;if(c.current.memoizedState.isDehydrated){var f=tr(c.pendingLanes);f!==0&&(dl(c,f|1),Ps(c,Ei()),!(wn&6)&&(wa(),Ko()))}break;case 13:var S=Sr();Ya(function(){return Ts($,1,S)}),ld($,1)}},e.batchedUpdates=function($,c){var f=wn;wn|=1;try{return $(c)}finally{wn=f,wn===0&&(wa(),Os&&Ko())}},e.createComponentSelector=function($){return{$$typeof:us,value:$}},e.createContainer=function($,c,f,S,M,L,G){return Ih($,c,!1,null,f,S,M,L,G)},e.createHasPseudoClassSelector=function($){return{$$typeof:xu,value:$}},e.createHydrationContainer=function($,c,f,S,M,L,G,se,we){return $=Ih(f,S,!0,$,M,L,G,se,we),$.context=ad(null),f=$.current,S=Sr(),M=Xi(f),L=gu(S,M),L.callback=c??null,gs(f,L),$.current.lanes=M,cu($,M,S),Ps($,S),$},e.createPortal=function($,c,f){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:S==null?null:""+S,children:$,containerInfo:c,implementation:f}},e.createRoleSelector=function($){return{$$typeof:tc,value:$}},e.createTestNameSelector=function($){return{$$typeof:bo,value:$}},e.createTextSelector=function($){return{$$typeof:Va,value:$}},e.deferredUpdates=function($){var c=Jn,f=_i.transition;try{return _i.transition=null,Jn=16,$()}finally{Jn=c,_i.transition=f}},e.discreteUpdates=function($,c,f,S,M){var L=Jn,G=_i.transition;try{return _i.transition=null,Jn=1,$(c,f,S,M)}finally{Jn=L,_i.transition=G,wn===0&&wa()}},e.findAllNodes=nc,e.findBoundingRects=function($,c){if(!St)throw Error(o(363));c=nc($,c),$=[];for(var f=0;f<c.length;f++)$.push(mt(c[f]));for(c=$.length-1;0<c;c--){f=$[c];for(var S=f.x,M=S+f.width,L=f.y,G=L+f.height,se=c-1;0<=se;se--)if(c!==se){var we=$[se],je=we.x,_t=je+we.width,zt=we.y,Zt=zt+we.height;if(S>=je&&L>=zt&&M<=_t&&G<=Zt){$.splice(c,1);break}else if(S!==je||f.width!==we.width||Zt<L||zt>G){if(!(L!==zt||f.height!==we.height||_t<S||je>M)){je>S&&(we.width+=je-S,we.x=S),_t<M&&(we.width=M-je),$.splice(c,1);break}}else{zt>L&&(we.height+=zt-L,we.y=L),Zt<G&&(we.height=G-zt),$.splice(c,1);break}}}return $},e.findHostInstance=Qa,e.findHostInstanceWithNoPortals=function($){return $=te($),$=$!==null?de($):null,$===null?null:$.stateNode},e.findHostInstanceWithWarning=function($){return Qa($)},e.flushControlled=function($){var c=wn;wn|=1;var f=_i.transition,S=Jn;try{_i.transition=null,Jn=1,$()}finally{Jn=S,_i.transition=f,wn=c,wn===0&&(wa(),Ko())}},e.flushPassiveEffects=nh,e.flushSync=Ya,e.focusWithin=function($,c){if(!St)throw Error(o(363));for($=ao($),c=ja($,c),c=Array.from(c),$=0;$<c.length;){var f=c[$++];if(!ee(f)){if(f.tag===5&&ot(f.stateNode))return!0;for(f=f.child;f!==null;)c.push(f),f=f.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Jn},e.getFindAllNodesFailureDescription=function($,c){if(!St)throw Error(o(363));var f=0,S=[];$=[ao($),0];for(var M=0;M<$.length;){var L=$[M++],G=$[M++],se=c[G];if((L.tag!==5||!ee(L))&&(Qc(L,se)&&(S.push(Ks(se)),G++,G>f&&(f=G)),G<c.length))for(L=L.child;L!==null;)$.push(L,G),L=L.sibling}if(f<c.length){for($=[];f<c.length;f++)$.push(Ks(c[f]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+$.join(" > ")}return null},e.getPublicRootInstance=function($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return ue($.child.stateNode);default:return $.child.stateNode}},e.injectIntoDevTools=function($){if($={bundleType:$.bundleType,version:$.version,rendererPackageName:$.rendererPackageName,rendererConfig:$.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:kc,findFiberByHostInstance:$.findFiberByHostInstance||Kp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")$=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)$=!0;else{try{hu=c.inject($),Oo=c}catch{}$=!!c.checkDCE}}return $},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function($,c,f,S){if(!St)throw Error(o(363));$=nc($,c);var M=dt($,f,S).disconnect;return{disconnect:function(){M()}}},e.registerMutableSourceForHydration=function($,c){var f=c._getVersion;f=f(c._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[c,f]:$.mutableSourceEagerHydrationData.push(c,f)},e.runWithPriority=function($,c){var f=Jn;try{return Jn=$,c()}finally{Jn=f}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function($,c,f,S){var M=c.current,L=Sr(),G=Xi(M);return f=ad(f),c.context===null?c.context=f:c.pendingContext=f,c=gu(L,G),c.payload={element:$},S=S===void 0?null:S,S!==null&&(c.callback=S),gs(M,c),$=Ts(M,G,L),$!==null&&ml($,M,G),G},e}),FH}(function(n){n.exports=wye()})(hj);const xye=cj(hj.exports);function Cye(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}const nM=[];function Mye(n,e,t=!1,i={}){for(const o of nM)if(Cye(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,promise:n(...e).then(o=>s.response=o).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const o=nM.indexOf(s);o!==-1&&nM.splice(o,1)},i.lifespan)}).catch(o=>s.error=o)};if(nM.push(s),!t)throw s.promise}const Aye=(n,e,t)=>Mye(n,e,!1,t);var MR={exports:{}},k$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zH;function Iye(){if(zH)return k$;zH=1;var n=Tr,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,d){var m,_={},v=null,E=null;d!==void 0&&(v=""+d),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(E=h.ref);for(m in h)i.call(h,m)&&!o.hasOwnProperty(m)&&(_[m]=h[m]);if(u&&u.defaultProps)for(m in h=u.defaultProps,h)_[m]===void 0&&(_[m]=h[m]);return{$$typeof:e,type:u,key:v,ref:E,props:_,_owner:s.current}}return k$.Fragment=t,k$.jsx=l,k$.jsxs=l,k$}(function(n){n.exports=Iye()})(MR);const Fw=MR.exports.Fragment,Xt=MR.exports.jsx,mc=MR.exports.jsxs,zP={},Rye=n=>void Object.assign(zP,n);function kye(n,e){function t(d,{args:m=[],attach:_,...v},E){let w=`${d[0].toUpperCase()}${d.slice(1)}`,x;if(d==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const A=v.object;x=G1(A,{type:d,root:E,attach:_,primitive:!0})}else{const A=zP[w];if(!A)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");x=G1(new A(...m),{type:d,root:E,attach:_,memoizedProps:{args:m}})}return x.__r3f.attach===void 0&&(x instanceof kr?x.__r3f.attach="geometry":x instanceof Hc&&(x.__r3f.attach="material")),w!=="inject"&&dO(x,v),x}function i(d,m){let _=!1;if(m){var v,E;(v=m.__r3f)!=null&&v.attach?hO(d,m,m.__r3f.attach):m.isObject3D&&d.isObject3D&&(d.add(m),_=!0),_||(E=d.__r3f)==null||E.objects.push(m),m.__r3f||G1(m,{}),m.__r3f.parent=d,YD(m),W1(m)}}function s(d,m,_){let v=!1;if(m){var E,w;if((E=m.__r3f)!=null&&E.attach)hO(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){m.parent=d,m.dispatchEvent({type:"added"});const x=d.children.filter(O=>O!==m),A=x.indexOf(_);d.children=[...x.slice(0,A),m,...x.slice(A)],v=!0}v||(w=d.__r3f)==null||w.objects.push(m),m.__r3f||G1(m,{}),m.__r3f.parent=d,YD(m),W1(m)}}function o(d,m,_=!1){d&&[...d].forEach(v=>l(m,v,_))}function l(d,m,_){if(m){var v,E,w;if(m.__r3f&&(m.__r3f.parent=null),(v=d.__r3f)!=null&&v.objects&&(d.__r3f.objects=d.__r3f.objects.filter(N=>N!==m)),(E=m.__r3f)!=null&&E.attach)jH(d,m,m.__r3f.attach);else if(m.isObject3D&&d.isObject3D){var x;d.remove(m),(x=m.__r3f)!=null&&x.root&&Fye(m.__r3f.root,m)}const O=(w=m.__r3f)==null?void 0:w.primitive,k=_===void 0?m.dispose!==null&&!O:_;if(!O){var A;o((A=m.__r3f)==null?void 0:A.objects,m,k),o(m.children,m,k)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,O||delete m.__r3f),k&&m.dispose&&m.type!=="Scene"&&GA.exports.unstable_scheduleCallback(GA.exports.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),W1(d)}}function u(d,m,_,v){var E;const w=(E=d.__r3f)==null?void 0:E.parent;if(!w)return;const x=t(m,_,d.__r3f.root);if(d.children){for(const A of d.children)A.__r3f&&i(x,A);d.children=d.children.filter(A=>!A.__r3f)}d.__r3f.objects.forEach(A=>i(x,A)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||l(w,d),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(w,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[v,v.alternate].forEach(A=>{A!==null&&(A.stateNode=x,A.ref&&(typeof A.ref=="function"?A.ref(x):A.ref.current=x))})}const h=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:xye({createInstance:t,removeChild:l,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,m)=>{if(!m)return;const _=d.getState().scene;!_.__r3f||(_.__r3f.root=d,i(_,m))},removeChildFromContainer:(d,m)=>{!m||l(d.getState().scene,m)},insertInContainerBefore:(d,m,_)=>{if(!m||!_)return;const v=d.getState().scene;!v.__r3f||s(v,m,_)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var m;return!!((m=d==null?void 0:d.__r3f)!=null?m:{}).handlers},prepareUpdate(d,m,_,v){if(d.__r3f.primitive&&v.object&&v.object!==d)return[!0];{const{args:E=[],children:w,...x}=v,{args:A=[],children:O,...k}=_;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((D,U)=>D!==A[U]))return[!0];const N=vj(d,x,k,!0);return N.changes.length?[!1,N]:null}},commitUpdate(d,[m,_],v,E,w,x){m?u(d,v,w,x):dO(d,_)},commitMount(d,m,_,v){var E;const w=(E=d.__r3f)!=null?E:{};d.raycast&&w.handlers&&w.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>G1(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var m;const{attach:_,parent:v}=(m=d.__r3f)!=null?m:{};_&&v&&jH(v,d,_),d.isObject3D&&(d.visible=!1),W1(d)},unhideInstance(d,m){var _;const{attach:v,parent:E}=(_=d.__r3f)!=null?_:{};v&&E&&hO(E,d,v),(d.isObject3D&&m.visible==null||m.visible)&&(d.visible=!0),W1(d)},createTextInstance:h,hideTextInstance:h,unhideTextInstance:h,getCurrentEventPriority:()=>e?e():Hy.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ol.fun(performance.now)?performance.now:ol.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ol.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ol.fun(clearTimeout)?clearTimeout:void 0}),applyProps:dO}}var HH,GH;const dj=()=>{var n;return(n=zP.ColorManagement)!=null?n:null},pj=n=>n&&n.isOrthographicCamera,Oye=n=>n&&n.hasOwnProperty("current"),Uw=typeof window<"u"&&((HH=window.document)!=null&&HH.createElement||((GH=window.navigator)==null?void 0:GH.product)==="ReactNative")?he.useLayoutEffect:he.useEffect;function fj(n){const e=he.useRef(n);return Uw(()=>void(e.current=n),[n]),e}function Lye({set:n}){return Uw(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class mj extends he.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}mj.getDerivedStateFromError=()=>({error:!0});const gj="__default",WH=new Map,Dye=n=>n&&!!n.memoized&&!!n.changes;function _j(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const O$=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},ol={obj:n=>n===Object(n)&&!ol.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ol.str(n)||ol.num(n))return n===e;const o=ol.obj(n);if(o&&i==="reference")return n===e;const l=ol.arr(n);if(l&&t==="reference")return n===e;if((l||o)&&n===e)return!0;let u;for(u in n)if(!(u in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(u in s?e:n)if(!ol.equ(n[u],e[u],{strict:s,objects:"reference"}))return!1}else for(u in s?e:n)if(n[u]!==e[u])return!1;if(ol.und(u)){if(l&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Nye(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function G1(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function XD(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,l)=>o[l],n),{target:t,key:s}}else return{target:t,key:e}}const VH=/-\d+$/;function hO(n,e,t){if(ol.str(t)){if(VH.test(t)){const o=t.replace(VH,""),{target:l,key:u}=XD(n,o);Array.isArray(l[u])||(l[u]=[])}const{target:i,key:s}=XD(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function jH(n,e,t){var i,s;if(ol.str(t)){const{target:o,key:l}=XD(n,t),u=e.__r3f.previousAttach;u===void 0?delete o[l]:o[l]=u}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function vj(n,{children:e,key:t,ref:i,...s},{children:o,key:l,ref:u,...h}={},d=!1){var m;const _=(m=n==null?void 0:n.__r3f)!=null?m:{},v=Object.entries(s),E=[];if(d){const x=Object.keys(h);for(let A=0;A<x.length;A++)s.hasOwnProperty(x[A])||v.unshift([x[A],gj+"remove"])}v.forEach(([x,A])=>{var O;if((O=n.__r3f)!=null&&O.primitive&&x==="object"||ol.equ(A,h[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return E.push([x,A,!0,[]]);let k=[];x.includes("-")&&(k=x.split("-")),E.push([x,A,!1,k]);for(const N in s){const D=s[N];N.startsWith(`${x}-`)&&E.push([N,D,!1,N.split("-")])}});const w={...s};return _.memoizedProps&&_.memoizedProps.args&&(w.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(w.attach=_.memoizedProps.attach),{memoized:w,changes:E}}function dO(n,e){var t,i,s;const o=(t=n.__r3f)!=null?t:{},l=o.root,u=(i=l==null||l.getState==null?void 0:l.getState())!=null?i:{},{memoized:h,changes:d}=Dye(e)?e:vj(n,e),m=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=h);for(let _=0;_<d.length;_++){let[v,E,w,x]=d[_],A=n,O=A[v];if(x.length&&(O=x.reduce((k,N)=>k[N],n),!(O&&O.set))){const[k,...N]=x.reverse();A=N.reverse().reduce((D,U)=>D[U],n),v=k}if(E===gj+"remove")if(A.constructor){let k=WH.get(A.constructor);k||(k=new A.constructor,WH.set(A.constructor,k)),E=k[v]}else E=0;if(w)E?o.handlers[v]=E:delete o.handlers[v],o.eventCount=Object.keys(o.handlers).length;else if(O&&O.set&&(O.copy||O instanceof Jy)){if(Array.isArray(E))O.fromArray?O.fromArray(E):O.set(...E);else if(O.copy&&E&&E.constructor&&O.constructor===E.constructor)O.copy(E);else if(E!==void 0){const k=O instanceof _n;!k&&O.setScalar?O.setScalar(E):O instanceof Jy&&E instanceof Jy?O.mask=E.mask:O.set(E),!dj()&&!u.linear&&k&&O.convertSRGBToLinear()}}else A[v]=E,!u.linear&&A[v]instanceof Bl&&A[v].format===Bp&&A[v].type===jh&&(A[v].encoding=Ti);W1(n)}if(o.parent&&u.internal&&n.raycast&&m!==o.eventCount){const _=u.internal.interaction.indexOf(n);_>-1&&u.internal.interaction.splice(_,1),o.eventCount&&u.internal.interaction.push(n)}return!(d.length===1&&d[0][0]==="onUpdate")&&d.length&&(s=n.__r3f)!=null&&s.parent&&YD(n),n}function W1(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function YD(n){n.onUpdate==null||n.onUpdate(n)}function Bye(n,e){n.manual||(pj(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function rM(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Pye(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Hy.exports.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hy.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hy.exports.ContinuousEventPriority;default:return Hy.exports.DefaultEventPriority}}function yj(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function Fye(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{yj(t.capturedMap,e,i,s)})}function Uye(n){function e(h){const{internal:d}=n.getState(),m=h.offsetX-d.initialClick[0],_=h.offsetY-d.initialClick[1];return Math.round(Math.sqrt(m*m+_*_))}function t(h){return h.filter(d=>["Move","Over","Enter","Out","Leave"].some(m=>{var _;return(_=d.__r3f)==null?void 0:_.handlers["onPointer"+m]}))}function i(h,d){const m=n.getState(),_=new Set,v=[],E=d?d(m.internal.interaction):m.internal.interaction;for(let O=0;O<E.length;O++){const k=O$(E[O]);k&&(k.raycaster.camera=void 0)}m.previousRoot||m.events.compute==null||m.events.compute(h,m);function w(O){const k=O$(O);if(!k||!k.events.enabled||k.raycaster.camera===null)return[];if(k.raycaster.camera===void 0){var N;k.events.compute==null||k.events.compute(h,k,(N=k.previousRoot)==null?void 0:N.getState()),k.raycaster.camera===void 0&&(k.raycaster.camera=null)}return k.raycaster.camera?k.raycaster.intersectObject(O,!0):[]}let x=E.flatMap(w).sort((O,k)=>{const N=O$(O.object),D=O$(k.object);return!N||!D?O.distance-k.distance:D.events.priority-N.events.priority||O.distance-k.distance}).filter(O=>{const k=rM(O);return _.has(k)?!1:(_.add(k),!0)});m.events.filter&&(x=m.events.filter(x,m));for(const O of x){let k=O.object;for(;k;){var A;(A=k.__r3f)!=null&&A.eventCount&&v.push({...O,eventObject:k}),k=k.parent}}if("pointerId"in h&&m.internal.capturedMap.has(h.pointerId))for(let O of m.internal.capturedMap.get(h.pointerId).values())_.has(rM(O.intersection))||v.push(O.intersection);return v}function s(h,d,m,_){const v=n.getState();if(h.length){const E={stopped:!1};for(const w of h){const x=O$(w.object)||v,{raycaster:A,pointer:O,camera:k,internal:N}=x,D=new Te(O.x,O.y,0).unproject(k),U=te=>{var re,ie;return(re=(ie=N.capturedMap.get(te))==null?void 0:ie.has(w.eventObject))!=null?re:!1},F=te=>{const re={intersection:w,target:d.target};N.capturedMap.has(te)?N.capturedMap.get(te).set(w.eventObject,re):N.capturedMap.set(te,new Map([[w.eventObject,re]])),d.target.setPointerCapture(te)},H=te=>{const re=N.capturedMap.get(te);re&&yj(N.capturedMap,w.eventObject,re,te)};let z={};for(let te in d){let re=d[te];typeof re!="function"&&(z[te]=re)}let J={...w,...z,pointer:O,intersections:h,stopped:E.stopped,delta:m,unprojectedPoint:D,ray:A.ray,camera:k,stopPropagation(){const te="pointerId"in d&&N.capturedMap.get(d.pointerId);if((!te||te.has(w.eventObject))&&(J.stopped=E.stopped=!0,N.hovered.size&&Array.from(N.hovered.values()).find(re=>re.eventObject===w.eventObject))){const re=h.slice(0,h.indexOf(w));o([...re,w])}},target:{hasPointerCapture:U,setPointerCapture:F,releasePointerCapture:H},currentTarget:{hasPointerCapture:U,setPointerCapture:F,releasePointerCapture:H},nativeEvent:d};if(_(J),E.stopped===!0)break}}return h}function o(h){const{internal:d}=n.getState();for(const m of d.hovered.values())if(!h.length||!h.find(_=>_.object===m.object&&_.index===m.index&&_.instanceId===m.instanceId)){const _=m.eventObject.__r3f,v=_==null?void 0:_.handlers;if(d.hovered.delete(rM(m)),_!=null&&_.eventCount){const E={...m,intersections:h};v.onPointerOut==null||v.onPointerOut(E),v.onPointerLeave==null||v.onPointerLeave(E)}}}function l(h,d){for(let m=0;m<d.length;m++){const _=d[m].__r3f;_==null||_.handlers.onPointerMissed==null||_.handlers.onPointerMissed(h)}}function u(h){switch(h){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return d=>{const{internal:m}=n.getState();"pointerId"in d&&m.capturedMap.has(d.pointerId)&&requestAnimationFrame(()=>{m.capturedMap.has(d.pointerId)&&(m.capturedMap.delete(d.pointerId),o([]))})}}return function(d){const{onPointerMissed:m,internal:_}=n.getState();_.lastEvent.current=d;const v=h==="onPointerMove",E=h==="onClick"||h==="onContextMenu"||h==="onDoubleClick",w=i(d,v?t:void 0),x=E?e(d):0;h==="onPointerDown"&&(_.initialClick=[d.offsetX,d.offsetY],_.initialHits=w.map(O=>O.eventObject)),E&&!w.length&&x<=2&&(l(d,_.interaction),m&&m(d)),v&&o(w);function A(O){const k=O.eventObject,N=k.__r3f,D=N==null?void 0:N.handlers;if(N!=null&&N.eventCount)if(v){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const U=rM(O),F=_.hovered.get(U);F?F.stopped&&O.stopPropagation():(_.hovered.set(U,O),D.onPointerOver==null||D.onPointerOver(O),D.onPointerEnter==null||D.onPointerEnter(O))}D.onPointerMove==null||D.onPointerMove(O)}else{const U=D[h];U?(!E||_.initialHits.includes(k))&&(l(d,_.interaction.filter(F=>!_.initialHits.includes(F))),U(O)):E&&_.initialHits.includes(k)&&l(d,_.interaction.filter(F=>!_.initialHits.includes(F)))}}s(w,d,x,A)}}return{handlePointer:u}}const bj=n=>!!(n!=null&&n.render),Tj=he.createContext(null),zye=(n,e)=>{const t=$ye((u,h)=>{const d=new Te,m=new Te,_=new Te;function v(A=h().camera,O=m,k=h().size){const{width:N,height:D,top:U,left:F}=k,H=N/D;O instanceof Te?_.copy(O):_.set(...O);const z=A.getWorldPosition(d).distanceTo(_);if(pj(A))return{width:N/A.zoom,height:D/A.zoom,top:U,left:F,factor:1,distance:z,aspect:H};{const J=A.fov*Math.PI/180,te=2*Math.tan(J/2)*z,re=te*(N/D);return{width:re,height:te,top:U,left:F,factor:N/re,distance:z,aspect:H}}}let E;const w=A=>u(O=>({performance:{...O.performance,current:A}})),x=new Lt;return{set:u,get:h,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(A=1)=>n(h(),A),advance:(A,O)=>e(A,O,h()),legacy:!1,linear:!1,flat:!1,scene:G1(new rw),controls:null,clock:new NP,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const A=h();E&&clearTimeout(E),A.performance.current!==A.performance.min&&w(A.performance.min),E=setTimeout(()=>w(h().performance.max),A.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:A=>u(O=>({...O,events:{...O.events,...A}})),setSize:(A,O,k,N,D)=>{const U=h().camera,F={width:A,height:O,top:N||0,left:D||0,updateStyle:k};u(H=>({size:F,viewport:{...H.viewport,...v(U,m,F)}}))},setDpr:A=>u(O=>{const k=_j(A);return{viewport:{...O.viewport,dpr:k,initialDpr:O.viewport.initialDpr||k}}}),setFrameloop:(A="always")=>{const O=h().clock;O.stop(),O.elapsedTime=0,A!=="never"&&(O.start(),O.elapsedTime=0),u(()=>({frameloop:A}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:he.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(A,O,k)=>{const N=h().internal;return N.priority=N.priority+(O>0?1:0),N.subscribers.push({ref:A,priority:O,store:k}),N.subscribers=N.subscribers.sort((D,U)=>D.priority-U.priority),()=>{const D=h().internal;D!=null&&D.subscribers&&(D.priority=D.priority-(O>0?1:0),D.subscribers=D.subscribers.filter(U=>U.ref!==A))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:u,size:h,viewport:d,gl:m,set:_}=t.getState();if(h!==s||d.dpr!==o){var v;s=h,o=d.dpr,Bye(u,h),m.setPixelRatio(d.dpr);const E=(v=h.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&m.domElement instanceof HTMLCanvasElement;m.setSize(h.width,h.height,E)}u!==l&&(l=u,_(E=>({viewport:{...E.viewport,...E.viewport.getCurrentViewport(u)}})))}),t.subscribe(u=>n(u)),t};let iM,Hye=new Set,Gye=new Set,Wye=new Set;function pO(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function L$(n,e){switch(n){case"before":return pO(Hye,e);case"after":return pO(Gye,e);case"tail":return pO(Wye,e)}}let fO,mO;function gO(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),fO=e.internal.subscribers,iM=0;iM<fO.length;iM++)mO=fO[iM],mO.ref.current(mO.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Vye(n){let e=!1,t,i,s;function o(h){i=requestAnimationFrame(o),e=!0,t=0,L$("before",h);for(const m of n.values()){var d;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(t+=gO(h,s))}if(L$("after",h),t===0)return L$("tail",h),e=!1,cancelAnimationFrame(i)}function l(h,d=1){var m;if(!h)return n.forEach(_=>l(_.store.getState()),d);(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(h.internal.frames=Math.min(60,h.internal.frames+d),e||(e=!0,requestAnimationFrame(o)))}function u(h,d=!0,m,_){if(d&&L$("before",h),m)gO(h,m,_);else for(const v of n.values())gO(h,v.store.getState());d&&L$("after",h)}return{loop:o,invalidate:l,advance:u}}function Ej(){const n=he.useContext(Tj);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Hh(n=t=>t,e){return Ej()(n,e)}function Nf(n,e=0){const t=Ej(),i=t.getState().internal.subscribe,s=fj(n);return Uw(()=>i(s,e,t),[e,i,t]),null}const KT=new Map,{invalidate:XH,advance:YH}=Vye(KT),{reconciler:WA,applyProps:sM}=kye(KT,Pye),F1={objects:"shallow",strict:!1},jye=(n,e)=>{const t=typeof n=="function"?n(e):n;return bj(t)?t:new vP({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Xye(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:s,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Yye(n){const e=KT.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||zye(XH,YH),l=t||WA.createContainer(o,Hy.exports.ConcurrentRoot,null,!1,null,"",s,null);e||KT.set(n,{fiber:l,store:o});let u,h=!1,d;return{configure(m={}){let{gl:_,size:v,events:E,onCreated:w,shadows:x=!1,linear:A=!1,flat:O=!1,legacy:k=!1,orthographic:N=!1,frameloop:D="always",dpr:U=[1,2],performance:F,raycaster:H,camera:z,onPointerMissed:J}=m,te=o.getState(),re=te.gl;te.gl||te.set({gl:re=jye(_,n)});let ie=te.raycaster;ie||te.set({raycaster:ie=new FP});const{params:de,...oe}=H||{};if(ol.equ(oe,ie,F1)||sM(ie,{...oe}),ol.equ(de,ie.params,F1)||sM(ie,{params:{...ie.params,...de}}),!te.camera||te.camera===d&&!ol.equ(d,z,F1)){d=z;const ne=z instanceof uE,le=ne?z:N?new Jg(0,0,0,0,.1,1e3):new Io(75,0,.1,1e3);ne||(le.position.z=5,z&&sM(le,z),!te.camera&&!(z!=null&&z.rotation)&&le.lookAt(0,0,0)),te.set({camera:le})}if(!te.xr){const ne=(Oe,xe)=>{const Xe=o.getState();Xe.frameloop!=="never"&&YH(Oe,!0,Xe,xe)},le=()=>{const Oe=o.getState();Oe.gl.xr.enabled=Oe.gl.xr.isPresenting,Oe.gl.xr.setAnimationLoop(Oe.gl.xr.isPresenting?ne:null),Oe.gl.xr.isPresenting||XH(Oe)},_e={connect(){const Oe=o.getState().gl;Oe.xr.addEventListener("sessionstart",le),Oe.xr.addEventListener("sessionend",le)},disconnect(){const Oe=o.getState().gl;Oe.xr.removeEventListener("sessionstart",le),Oe.xr.removeEventListener("sessionend",le)}};re.xr&&_e.connect(),te.set({xr:_e})}if(re.shadowMap){const ne=re.shadowMap.enabled,le=re.shadowMap.type;if(re.shadowMap.enabled=!!x,ol.boo(x))re.shadowMap.type=pS;else if(ol.str(x)){var ue;const _e={basic:g9,percentage:lR,soft:pS,variance:By};re.shadowMap.type=(ue=_e[x])!=null?ue:pS}else ol.obj(x)&&Object.assign(re.shadowMap,x);(ne!==re.shadowMap.enabled||le!==re.shadowMap.type)&&(re.shadowMap.needsUpdate=!0)}const ge=dj();ge&&("enabled"in ge?ge.enabled=!k:"legacyMode"in ge&&(ge.legacyMode=k));const Ae=A?Tm:Ti,j=O?hg:lP;re.outputEncoding!==Ae&&(re.outputEncoding=Ae),re.toneMapping!==j&&(re.toneMapping=j),te.legacy!==k&&te.set(()=>({legacy:k})),te.linear!==A&&te.set(()=>({linear:A})),te.flat!==O&&te.set(()=>({flat:O})),_&&!ol.fun(_)&&!bj(_)&&!ol.equ(_,re,F1)&&sM(re,_),E&&!te.events.handlers&&te.set({events:E(o)});const Z=Xye(n,v);return ol.equ(Z,te.size,F1)||te.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),U&&te.viewport.dpr!==_j(U)&&te.setDpr(U),te.frameloop!==D&&te.setFrameloop(D),te.onPointerMissed||te.set({onPointerMissed:J}),F&&!ol.equ(F,te.performance,F1)&&te.set(ne=>({performance:{...ne.performance,...F}})),u=w,h=!0,this},render(m){return h||this.configure(),WA.updateContainer(Xt(Kye,{store:o,children:m,onCreated:u,rootElement:n}),l,null,()=>{}),o},unmount(){$j(n)}}}function Kye({store:n,children:e,onCreated:t,rootElement:i}){return Uw(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),he.createElement(Tj.Provider,{value:n},e)}function $j(n,e){const t=KT.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),WA.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,l,u,h;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(l=o.renderLists)==null||l.dispose==null||l.dispose(),(u=s.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(h=s.gl)!=null&&h.xr&&s.xr.disconnect(),Nye(s),KT.delete(n),e&&e(n)}catch{}},500)})}}WA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:he.version});function KD(){return KD=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},KD.apply(this,arguments)}function JD(n,e,t){var i,s,o,l,u;e==null&&(e=100);function h(){var m=Date.now()-l;m<e&&m>=0?i=setTimeout(h,e-m):(i=null,t||(u=n.apply(o,s),o=s=null))}var d=function(){o=this,s=arguments,l=Date.now();var m=t&&!i;return i||(i=setTimeout(h,e)),m&&(u=n.apply(o,s),o=s=null),u};return d.clear=function(){i&&(clearTimeout(i),i=null)},d.flush=function(){i&&(u=n.apply(o,s),o=s=null,clearTimeout(i),i=null)},d}JD.debounce=JD;var KH=JD;function Jye(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[l,u]=he.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=he.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),d=e?typeof e=="number"?e:e.scroll:null,m=e?typeof e=="number"?e:e.resize:null,_=he.useRef(!1);he.useEffect(()=>(_.current=!0,()=>void(_.current=!1)));const[v,E,w]=he.useMemo(()=>{const k=()=>{if(!h.current.element)return;const{left:N,top:D,width:U,height:F,bottom:H,right:z,x:J,y:te}=h.current.element.getBoundingClientRect(),re={left:N,top:D,width:U,height:F,bottom:H,right:z,x:J,y:te};h.current.element instanceof HTMLElement&&s&&(re.height=h.current.element.offsetHeight,re.width=h.current.element.offsetWidth),Object.freeze(re),_.current&&!ebe(h.current.lastBounds,re)&&u(h.current.lastBounds=re)};return[k,m?KH(k,m):k,d?KH(k,d):k]},[u,s,d,m]);function x(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(k=>k.removeEventListener("scroll",w,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function A(){!h.current.element||(h.current.resizeObserver=new o(w),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(k=>k.addEventListener("scroll",w,{capture:!0,passive:!0})))}const O=k=>{!k||k===h.current.element||(x(),h.current.element=k,h.current.scrollContainers=Sj(k),A())};return qye(w,!!t),Qye(E),he.useEffect(()=>{x(),A()},[t,w,E]),he.useEffect(()=>x,[]),[O,l,v]}function Qye(n){he.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function qye(n,e){he.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Sj(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...Sj(n.parentElement)]}const Zye=["x","y","top","bottom","left","right","width","height"],ebe=(n,e)=>Zye.every(t=>n[t]===e[t]);var tbe=Object.defineProperty,nbe=Object.defineProperties,rbe=Object.getOwnPropertyDescriptors,JH=Object.getOwnPropertySymbols,ibe=Object.prototype.hasOwnProperty,sbe=Object.prototype.propertyIsEnumerable,QH=(n,e,t)=>e in n?tbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qH=(n,e)=>{for(var t in e||(e={}))ibe.call(e,t)&&QH(n,t,e[t]);if(JH)for(var t of JH(e))sbe.call(e,t)&&QH(n,t,e[t]);return n},obe=(n,e)=>nbe(n,rbe(e)),ZH;function wj(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const s=wj(i,e,t);if(s)return s;i=e?null:i.sibling}}function xj(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const HP=xj(he.createContext(null));class Cj extends he.Component{render(){return Xt(HP.Provider,{value:this._reactInternals,children:this.props.children})}}const{ReactCurrentOwner:e5,ReactCurrentDispatcher:t5}=(ZH=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)!=null?ZH:{};function abe(){const n=he.useContext(HP),e=he.useId();return he.useMemo(()=>{var t;return(t=e5==null?void 0:e5.current)!=null?t:wj(n,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function lbe(){var n,e;const t=abe(),[i]=he.useState(()=>new Map);i.clear();let s=t;for(;s;){const o=(n=s.type)==null?void 0:n._context;o&&o!==HP&&!i.has(o)&&i.set(o,(e=t5==null?void 0:t5.current)==null?void 0:e.readContext(xj(o))),s=s.return}return he.useMemo(()=>Array.from(i.keys()).reduce((o,l)=>u=>he.createElement(o,null,he.createElement(l.Provider,obe(qH({},u),{value:i.get(l)}))),o=>Xt(Cj,{...qH({},o)})),[i])}const _O={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function ube(n){const{handlePointer:e}=Uye(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_O).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:{...l.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([l,u])=>{const[h,d]=_O[l];t.addEventListener(h,u,{passive:d})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[u]=_O[o];i.connected.removeEventListener(u,l)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const cbe=he.forwardRef(function({children:n,fallback:e,resize:t,style:i,gl:s,events:o=ube,eventSource:l,eventPrefix:u,shadows:h,linear:d,flat:m,legacy:_,orthographic:v,frameloop:E,dpr:w,performance:x,raycaster:A,camera:O,onPointerMissed:k,onCreated:N,...D},U){he.useMemo(()=>Rye(yye),[]);const F=lbe(),[H,z]=Jye({scroll:!0,debounce:{scroll:50,resize:0},...t}),J=he.useRef(null),te=he.useRef(null);he.useImperativeHandle(U,()=>J.current);const re=fj(k),[ie,de]=he.useState(!1),[oe,ue]=he.useState(!1);if(ie)throw ie;if(oe)throw oe;const ge=he.useRef(null);return Uw(()=>{const Ae=J.current;z.width>0&&z.height>0&&Ae&&(ge.current||(ge.current=Yye(Ae)),ge.current.configure({gl:s,events:o,shadows:h,linear:d,flat:m,legacy:_,orthographic:v,frameloop:E,dpr:w,performance:x,raycaster:A,camera:O,size:z,onPointerMissed:(...j)=>re.current==null?void 0:re.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(l?Oye(l)?l.current:l:te.current),u&&j.setEvents({compute:(Z,ne)=>{const le=Z[u+"X"],_e=Z[u+"Y"];ne.pointer.set(le/ne.size.width*2-1,-(_e/ne.size.height)*2+1),ne.raycaster.setFromCamera(ne.pointer,ne.camera)}}),N==null||N(j)}}),ge.current.render(Xt(F,{children:Xt(mj,{set:ue,children:Xt(he.Suspense,{fallback:Xt(Lye,{set:de}),children:n})})})))}),he.useEffect(()=>{const Ae=J.current;if(Ae)return()=>$j(Ae)},[]),Xt("div",{ref:te,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:l?"none":"auto",...i},...D,children:Xt("div",{ref:H,style:{width:"100%",height:"100%"},children:Xt("canvas",{ref:J,style:{display:"block"},children:e})})})}),hbe=he.forwardRef(function(n,e){return Xt(Cj,{children:Xt(cbe,{...n,ref:e})})});var Mj={exports:{}},Rp={},n5={exports:{}},r5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5;function dbe(){return i5||(i5=1,function(n){function e(j,Z){var ne=j.length;j.push(Z);e:for(;0<ne;){var le=ne-1>>>1,_e=j[le];if(0<s(_e,Z))j[le]=Z,j[ne]=_e,ne=le;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var Z=j[0],ne=j.pop();if(ne!==Z){j[0]=ne;e:for(var le=0,_e=j.length,Oe=_e>>>1;le<Oe;){var xe=2*(le+1)-1,Xe=j[xe],Re=xe+1,Je=j[Re];if(0>s(Xe,ne))Re<_e&&0>s(Je,Xe)?(j[le]=Je,j[Re]=ne,le=Re):(j[le]=Xe,j[xe]=ne,le=xe);else if(Re<_e&&0>s(Je,ne))j[le]=Je,j[Re]=ne,le=Re;else break e}}return Z}function s(j,Z){var ne=j.sortIndex-Z.sortIndex;return ne!==0?ne:j.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],d=[],m=1,_=null,v=3,E=!1,w=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(j){for(var Z=t(d);Z!==null;){if(Z.callback===null)i(d);else if(Z.startTime<=j)i(d),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(d)}}function D(j){if(x=!1,N(j),!w)if(t(h)!==null)w=!0,ge(U);else{var Z=t(d);Z!==null&&Ae(D,Z.startTime-j)}}function U(j,Z){w=!1,x&&(x=!1,O(z),z=-1),E=!0;var ne=v;try{for(N(Z),_=t(h);_!==null&&(!(_.expirationTime>Z)||j&&!re());){var le=_.callback;if(typeof le=="function"){_.callback=null,v=_.priorityLevel;var _e=le(_.expirationTime<=Z);Z=n.unstable_now(),typeof _e=="function"?_.callback=_e:_===t(h)&&i(h),N(Z)}else i(h);_=t(h)}if(_!==null)var Oe=!0;else{var xe=t(d);xe!==null&&Ae(D,xe.startTime-Z),Oe=!1}return Oe}finally{_=null,v=ne,E=!1}}var F=!1,H=null,z=-1,J=5,te=-1;function re(){return!(n.unstable_now()-te<J)}function ie(){if(H!==null){var j=n.unstable_now();te=j;var Z=!0;try{Z=H(!0,j)}finally{Z?de():(F=!1,H=null)}}else F=!1}var de;if(typeof k=="function")de=function(){k(ie)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,ue=oe.port2;oe.port1.onmessage=ie,de=function(){ue.postMessage(null)}}else de=function(){A(ie,0)};function ge(j){H=j,F||(F=!0,de())}function Ae(j,Z){z=A(function(){j(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){w||E||(w=!0,ge(U))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(j){switch(v){case 1:case 2:case 3:var Z=3;break;default:Z=v}var ne=v;v=Z;try{return j()}finally{v=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=v;v=j;try{return Z()}finally{v=ne}},n.unstable_scheduleCallback=function(j,Z,ne){var le=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?le+ne:le):ne=le,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ne+_e,j={id:m++,callback:Z,priorityLevel:j,startTime:ne,expirationTime:_e,sortIndex:-1},ne>le?(j.sortIndex=ne,e(d,j),t(h)===null&&j===t(d)&&(x?(O(z),z=-1):x=!0,Ae(D,ne-le))):(j.sortIndex=_e,e(h,j),w||E||(w=!0,ge(U))),j},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(j){var Z=v;return function(){var ne=v;v=Z;try{return j.apply(this,arguments)}finally{v=ne}}}}(r5)),r5}var s5;function pbe(){return s5||(s5=1,function(n){n.exports=dbe()}(n5)),n5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o5;function fbe(){if(o5)return Rp;o5=1;var n=Tr,e=pbe();function t(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)y+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function o(g,y){l(g,y),l(g+"Capture",y)}function l(g,y){for(s[g]=y,g=0;g<y.length;g++)i.add(y[g])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function v(g){return h.call(_,g)?!0:h.call(m,g)?!1:d.test(g)?_[g]=!0:(m[g]=!0,!1)}function E(g,y,I,B){if(I!==null&&I.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return B?!1:I!==null?!I.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function w(g,y,I,B){if(y===null||typeof y>"u"||E(g,y,I,B))return!0;if(B)return!1;if(I!==null)switch(I.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function x(g,y,I,B,V,K,fe){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=B,this.attributeNamespace=V,this.mustUseProperty=I,this.propertyName=g,this.type=y,this.sanitizeURL=K,this.removeEmptyString=fe}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){A[g]=new x(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var y=g[0];A[y]=new x(y,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){A[g]=new x(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){A[g]=new x(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){A[g]=new x(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){A[g]=new x(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){A[g]=new x(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){A[g]=new x(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){A[g]=new x(g,5,!1,g.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function k(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var y=g.replace(O,k);A[y]=new x(y,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){A[g]=new x(g,1,!1,g.toLowerCase(),null,!1,!1)}),A.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){A[g]=new x(g,1,!1,g.toLowerCase(),null,!0,!0)});function N(g,y,I,B){var V=A.hasOwnProperty(y)?A[y]:null;(V!==null?V.type!==0:B||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(w(y,I,V,B)&&(I=null),B||V===null?v(y)&&(I===null?g.removeAttribute(y):g.setAttribute(y,""+I)):V.mustUseProperty?g[V.propertyName]=I===null?V.type===3?!1:"":I:(y=V.attributeName,B=V.attributeNamespace,I===null?g.removeAttribute(y):(V=V.type,I=V===3||V===4&&I===!0?"":""+I,B?g.setAttributeNS(B,y,I):g.setAttribute(y,I))))}var D=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),re=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),j=Symbol.iterator;function Z(g){return g===null||typeof g!="object"?null:(g=j&&g[j]||g["@@iterator"],typeof g=="function"?g:null)}var ne=Object.assign,le;function _e(g){if(le===void 0)try{throw Error()}catch(I){var y=I.stack.trim().match(/\n( *(at )?)/);le=y&&y[1]||""}return`
`+le+g}var Oe=!1;function xe(g,y){if(!g||Oe)return"";Oe=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Ct){var B=Ct}Reflect.construct(g,[],y)}else{try{y.call()}catch(Ct){B=Ct}g.call(y.prototype)}else{try{throw Error()}catch(Ct){B=Ct}g()}}catch(Ct){if(Ct&&B&&typeof Ct.stack=="string"){for(var V=Ct.stack.split(`
`),K=B.stack.split(`
`),fe=V.length-1,Ue=K.length-1;1<=fe&&0<=Ue&&V[fe]!==K[Ue];)Ue--;for(;1<=fe&&0<=Ue;fe--,Ue--)if(V[fe]!==K[Ue]){if(fe!==1||Ue!==1)do if(fe--,Ue--,0>Ue||V[fe]!==K[Ue]){var Ze=`
`+V[fe].replace(" at new "," at ");return g.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",g.displayName)),Ze}while(1<=fe&&0<=Ue);break}}}finally{Oe=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?_e(g):""}function Xe(g){switch(g.tag){case 5:return _e(g.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 2:case 15:return g=xe(g.type,!1),g;case 11:return g=xe(g.type.render,!1),g;case 1:return g=xe(g.type,!0),g;default:return""}}function Re(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case H:return"Fragment";case F:return"Portal";case J:return"Profiler";case z:return"StrictMode";case de:return"Suspense";case oe:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case re:return(g.displayName||"Context")+".Consumer";case te:return(g._context.displayName||"Context")+".Provider";case ie:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case ue:return y=g.displayName||null,y!==null?y:Re(g.type)||"Memo";case ge:y=g._payload,g=g._init;try{return Re(g(y))}catch{}}return null}function Je(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(y);case 8:return y===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function et(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function at(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function Qe(g){var y=at(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,y),B=""+g[y];if(!g.hasOwnProperty(y)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var V=I.get,K=I.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return V.call(this)},set:function(fe){B=""+fe,K.call(this,fe)}}),Object.defineProperty(g,y,{enumerable:I.enumerable}),{getValue:function(){return B},setValue:function(fe){B=""+fe},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function De(g){g._valueTracker||(g._valueTracker=Qe(g))}function Se(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var I=y.getValue(),B="";return g&&(B=at(g)?g.checked?"true":"false":g.value),g=B,g!==I?(y.setValue(g),!0):!1}function Pe(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function rt(g,y){var I=y.checked;return ne({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??g._wrapperState.initialChecked})}function We(g,y){var I=y.defaultValue==null?"":y.defaultValue,B=y.checked!=null?y.checked:y.defaultChecked;I=et(y.value!=null?y.value:I),g._wrapperState={initialChecked:B,initialValue:I,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function wt(g,y){y=y.checked,y!=null&&N(g,"checked",y,!1)}function xt(g,y){wt(g,y);var I=et(y.value),B=y.type;if(I!=null)B==="number"?(I===0&&g.value===""||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if(B==="submit"||B==="reset"){g.removeAttribute("value");return}y.hasOwnProperty("value")?St(g,y.type,I):y.hasOwnProperty("defaultValue")&&St(g,y.type,et(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(g.defaultChecked=!!y.defaultChecked)}function ht(g,y,I){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var B=y.type;if(!(B!=="submit"&&B!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+g._wrapperState.initialValue,I||y===g.value||(g.value=y),g.defaultValue=y}I=g.name,I!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,I!==""&&(g.name=I)}function St(g,y,I){(y!=="number"||Pe(g.ownerDocument)!==g)&&(I==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var It=Array.isArray;function mt(g,y,I,B){if(g=g.options,y){y={};for(var V=0;V<I.length;V++)y["$"+I[V]]=!0;for(I=0;I<g.length;I++)V=y.hasOwnProperty("$"+g[I].value),g[I].selected!==V&&(g[I].selected=V),V&&B&&(g[I].defaultSelected=!0)}else{for(I=""+et(I),y=null,V=0;V<g.length;V++){if(g[V].value===I){g[V].selected=!0,B&&(g[V].defaultSelected=!0);return}y!==null||g[V].disabled||(y=g[V])}y!==null&&(y.selected=!0)}}function ve(g,y){if(y.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},y,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function ee(g,y){var I=y.value;if(I==null){if(I=y.children,y=y.defaultValue,I!=null){if(y!=null)throw Error(t(92));if(It(I)){if(1<I.length)throw Error(t(93));I=I[0]}y=I}y==null&&(y=""),I=y}g._wrapperState={initialValue:et(I)}}function ke(g,y){var I=et(y.value),B=et(y.defaultValue);I!=null&&(I=""+I,I!==g.value&&(g.value=I),y.defaultValue==null&&g.defaultValue!==I&&(g.defaultValue=I)),B!=null&&(g.defaultValue=""+B)}function ot(g){var y=g.textContent;y===g._wrapperState.initialValue&&y!==""&&y!==null&&(g.value=y)}function dt(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $t(g,y){return g==null||g==="http://www.w3.org/1999/xhtml"?dt(y):g==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var ct,Ge=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,I,B,V){MSApp.execUnsafeLocalFunction(function(){return g(y,I,B,V)})}:g}(function(g,y){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=y;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=ct.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)g.appendChild(y.firstChild)}});function Me(g,y){if(y){var I=g.firstChild;if(I&&I===g.lastChild&&I.nodeType===3){I.nodeValue=y;return}}g.textContent=y}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(g){Q.forEach(function(y){y=y+g.charAt(0).toUpperCase()+g.substring(1),X[y]=X[g]})});function ae(g,y,I){return y==null||typeof y=="boolean"||y===""?"":I||typeof y!="number"||y===0||X.hasOwnProperty(g)&&X[g]?(""+y).trim():y+"px"}function $e(g,y){g=g.style;for(var I in y)if(y.hasOwnProperty(I)){var B=I.indexOf("--")===0,V=ae(I,y[I],B);I==="float"&&(I="cssFloat"),B?g.setProperty(I,V):g[I]=V}}var Ve=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(g,y){if(y){if(Ve[g]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(t(137,g));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(t(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(t(61))}if(y.style!=null&&typeof y.style!="object")throw Error(t(62))}}function Fe(g,y){if(g.indexOf("-")===-1)return typeof y.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function lt(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ut=null,Ft=null,Tn=null;function Er(g){if(g=Ur(g)){if(typeof Ut!="function")throw Error(t(280));var y=g.stateNode;y&&(y=jp(y),Ut(g.stateNode,g.type,y))}}function cr(g){Ft?Tn?Tn.push(g):Tn=[g]:Ft=g}function Gr(){if(Ft){var g=Ft,y=Tn;if(Tn=Ft=null,Er(g),y)for(g=0;g<y.length;g++)Er(y[g])}}function sr(g,y){return g(y)}function Xn(){}var q=!1;function me(g,y,I){if(q)return g(y,I);q=!0;try{return sr(g,y,I)}finally{q=!1,(Ft!==null||Tn!==null)&&(Xn(),Gr())}}function Ne(g,y){var I=g.stateNode;if(I===null)return null;var B=jp(I);if(B===null)return null;I=B[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(g=g.type,B=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!B;break e;default:g=!1}if(g)return null;if(I&&typeof I!="function")throw Error(t(231,y,typeof I));return I}var nt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){nt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{nt=!1}function Qt(g,y,I,B,V,K,fe,Ue,Ze){var Ct=Array.prototype.slice.call(arguments,3);try{y.apply(I,Ct)}catch(jt){this.onError(jt)}}var gn=!1,Ie=null,st=!1,Tt=null,pt={onError:function(g){gn=!0,Ie=g}};function Bt(g,y,I,B,V,K,fe,Ue,Ze){gn=!1,Ie=null,Qt.apply(pt,arguments)}function xn(g,y,I,B,V,K,fe,Ue,Ze){if(Bt.apply(this,arguments),gn){if(gn){var Ct=Ie;gn=!1,Ie=null}else throw Error(t(198));st||(st=!0,Tt=Ct)}}function Bn(g){var y=g,I=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(I=y.return),g=y.return;while(g)}return y.tag===3?I:null}function nr(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function vr(g){if(Bn(g)!==g)throw Error(t(188))}function ei(g){var y=g.alternate;if(!y){if(y=Bn(g),y===null)throw Error(t(188));return y!==g?null:g}for(var I=g,B=y;;){var V=I.return;if(V===null)break;var K=V.alternate;if(K===null){if(B=V.return,B!==null){I=B;continue}break}if(V.child===K.child){for(K=V.child;K;){if(K===I)return vr(V),g;if(K===B)return vr(V),y;K=K.sibling}throw Error(t(188))}if(I.return!==B.return)I=V,B=K;else{for(var fe=!1,Ue=V.child;Ue;){if(Ue===I){fe=!0,I=V,B=K;break}if(Ue===B){fe=!0,B=V,I=K;break}Ue=Ue.sibling}if(!fe){for(Ue=K.child;Ue;){if(Ue===I){fe=!0,I=K,B=V;break}if(Ue===B){fe=!0,B=K,I=V;break}Ue=Ue.sibling}if(!fe)throw Error(t(189))}}if(I.alternate!==B)throw Error(t(190))}if(I.tag!==3)throw Error(t(188));return I.stateNode.current===I?g:y}function $r(g){return g=ei(g),g!==null?Ar(g):null}function Ar(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=Ar(g);if(y!==null)return y;g=g.sibling}return null}var Wi=e.unstable_scheduleCallback,jo=e.unstable_cancelCallback,Ro=e.unstable_shouldYield,ll=e.unstable_requestPaint,Yt=e.unstable_now,hr=e.unstable_getCurrentPriorityLevel,fa=e.unstable_ImmediatePriority,Xo=e.unstable_UserBlockingPriority,ps=e.unstable_NormalPriority,fs=e.unstable_LowPriority,ci=e.unstable_IdlePriority,dr=null,pn=null;function ar(g){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(dr,g,void 0,(g.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:Qi,er=Math.log,hi=Math.LN2;function Qi(g){return g>>>=0,g===0?32:31-(er(g)/hi|0)|0}var jr=64,Bi=4194304;function Pa(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function ul(g,y){var I=g.pendingLanes;if(I===0)return 0;var B=0,V=g.suspendedLanes,K=g.pingedLanes,fe=I&268435455;if(fe!==0){var Ue=fe&~V;Ue!==0?B=Pa(Ue):(K&=fe,K!==0&&(B=Pa(K)))}else fe=I&~V,fe!==0?B=Pa(fe):K!==0&&(B=Pa(K));if(B===0)return 0;if(y!==0&&y!==B&&!(y&V)&&(V=B&-B,K=y&-y,V>=K||V===16&&(K&4194240)!==0))return y;if(B&4&&(B|=I&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=B;0<y;)I=31-wr(y),V=1<<I,B|=g[I],y&=~V;return B}function gc(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(g,y){for(var I=g.suspendedLanes,B=g.pingedLanes,V=g.expirationTimes,K=g.pendingLanes;0<K;){var fe=31-wr(K),Ue=1<<fe,Ze=V[fe];Ze===-1?(!(Ue&I)||Ue&B)&&(V[fe]=gc(Ue,y)):Ze<=y&&(g.expiredLanes|=Ue),K&=~Ue}}function Rs(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function ko(){var g=jr;return jr<<=1,!(jr&4194240)&&(jr=64),g}function uu(g){for(var y=[],I=0;31>I;I++)y.push(g);return y}function Pl(g,y,I){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-wr(y),g[y]=I}function mh(g,y){var I=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var B=g.eventTimes;for(g=g.expirationTimes;0<I;){var V=31-wr(I),K=1<<V;y[V]=0,B[V]=-1,g[V]=-1,I&=~K}}function Yo(g,y){var I=g.entangledLanes|=y;for(g=g.entanglements;I;){var B=31-wr(I),V=1<<B;V&y|g[B]&y&&(g[B]|=y),I&=~V}}var tr=0;function Pi(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Gc,gh,_c,cl,cu,hl=!1,dl=[],Jn=null,Qn=null,pl=null,Fa=new Map,ma=new Map,Fl=[],Ei="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fi(g,y){switch(g){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":Fa.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(y.pointerId)}}function fl(g,y,I,B,V,K){return g===null||g.nativeEvent!==K?(g={blockedOn:y,domEventName:I,eventSystemFlags:B,nativeEvent:K,targetContainers:[V]},y!==null&&(y=Ur(y),y!==null&&gh(y)),g):(g.eventSystemFlags|=B,y=g.targetContainers,V!==null&&y.indexOf(V)===-1&&y.push(V),g)}function Rd(g,y,I,B,V){switch(y){case"focusin":return Jn=fl(Jn,g,y,I,B,V),!0;case"dragenter":return Qn=fl(Qn,g,y,I,B,V),!0;case"mouseover":return pl=fl(pl,g,y,I,B,V),!0;case"pointerover":var K=V.pointerId;return Fa.set(K,fl(Fa.get(K)||null,g,y,I,B,V)),!0;case"gotpointercapture":return K=V.pointerId,ma.set(K,fl(ma.get(K)||null,g,y,I,B,V)),!0}return!1}function ks(g){var y=Ga(g.target);if(y!==null){var I=Bn(y);if(I!==null){if(y=I.tag,y===13){if(y=nr(I),y!==null){g.blockedOn=y,cu(g.priority,function(){_c(I)});return}}else if(y===3&&I.stateNode.current.memoizedState.isDehydrated){g.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}g.blockedOn=null}function hu(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var I=Jo(g.domEventName,g.eventSystemFlags,y[0],g.nativeEvent);if(I===null){I=g.nativeEvent;var B=new I.constructor(I.type,I);Wt=B,I.target.dispatchEvent(B),Wt=null}else return y=Ur(I),y!==null&&gh(y),g.blockedOn=I,!1;y.shift()}return!0}function Oo(g,y,I){hu(g)&&I.delete(y)}function Ul(){hl=!1,Jn!==null&&hu(Jn)&&(Jn=null),Qn!==null&&hu(Qn)&&(Qn=null),pl!==null&&hu(pl)&&(pl=null),Fa.forEach(Oo),ma.forEach(Oo)}function Xr(g,y){g.blockedOn===y&&(g.blockedOn=null,hl||(hl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ul)))}function pr(g){function y(V){return Xr(V,g)}if(0<dl.length){Xr(dl[0],g);for(var I=1;I<dl.length;I++){var B=dl[I];B.blockedOn===g&&(B.blockedOn=null)}}for(Jn!==null&&Xr(Jn,g),Qn!==null&&Xr(Qn,g),pl!==null&&Xr(pl,g),Fa.forEach(y),ma.forEach(y),I=0;I<Fl.length;I++)B=Fl[I],B.blockedOn===g&&(B.blockedOn=null);for(;0<Fl.length&&(I=Fl[0],I.blockedOn===null);)ks(I),I.blockedOn===null&&Fl.shift()}var Vi=D.ReactCurrentBatchConfig,Os=!0;function du(g,y,I,B){var V=tr,K=Vi.transition;Vi.transition=null;try{tr=1,Wc(g,y,I,B)}finally{tr=V,Vi.transition=K}}function zl(g,y,I,B){var V=tr,K=Vi.transition;Vi.transition=null;try{tr=4,Wc(g,y,I,B)}finally{tr=V,Vi.transition=K}}function Wc(g,y,I,B){if(Os){var V=Jo(g,y,I,B);if(V===null)Ld(g,y,B,Ko,I),Fi(g,B);else if(Rd(V,g,y,I,B))B.stopPropagation();else if(Fi(g,B),y&4&&-1<Ei.indexOf(g)){for(;V!==null;){var K=Ur(V);if(K!==null&&Gc(K),K=Jo(g,y,I,B),K===null&&Ld(g,y,B,Ko,I),K===V)break;V=K}V!==null&&B.stopPropagation()}else Ld(g,y,B,null,I)}}var Ko=null;function Jo(g,y,I,B){if(Ko=null,g=lt(B),g=Ga(g),g!==null)if(y=Bn(g),y===null)g=null;else if(I=y.tag,I===13){if(g=nr(y),g!==null)return g;g=null}else if(I===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null);return Ko=g,null}function pu(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hr()){case fa:return 1;case Xo:return 4;case ps:case fs:return 16;case ci:return 536870912;default:return 16}default:return 16}}var Yr=null,ms=null,Ai=null;function ti(){if(Ai)return Ai;var g,y=ms,I=y.length,B,V="value"in Yr?Yr.value:Yr.textContent,K=V.length;for(g=0;g<I&&y[g]===V[g];g++);var fe=I-g;for(B=1;B<=fe&&y[I-B]===V[K-B];B++);return Ai=V.slice(g,1<B?1-B:void 0)}function ga(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function Ui(){return!0}function fu(){return!1}function ro(g){function y(I,B,V,K,fe){this._reactName=I,this._targetInst=V,this.type=B,this.nativeEvent=K,this.target=fe,this.currentTarget=null;for(var Ue in g)g.hasOwnProperty(Ue)&&(I=g[Ue],this[Ue]=I?I(K):K[Ue]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Ui:fu,this.isPropagationStopped=fu,this}return ne(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),y}var mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=ro(mu),di=ne({},mu,{view:0,detail:0}),ni=ro(di),Un,Kr,$i,Xh=ne({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==$i&&($i&&g.type==="mousemove"?(Un=g.screenX-$i.screenX,Kr=g.screenY-$i.screenY):Kr=Un=0,$i=g),Un)},movementY:function(g){return"movementY"in g?g.movementY:Kr}}),gu=ro(Xh),gs=ne({},Xh,{dataTransfer:0}),ml=ro(gs),Yh=ne({},di,{relatedTarget:0}),pi=ro(Yh),_u=ne({},mu,{animationName:0,elapsedTime:0,pseudoElement:0}),hp=ro(_u),dp=ne({},mu,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),_h=ro(dp),pp=ne({},mu,{data:0}),Wp=ro(pp),Pf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function io(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=ju[g])?!!y[g]:!1}function vu(){return io}var vh=ne({},di,{key:function(g){if(g.key){var y=Pf[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=ga(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?fp[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(g){return g.type==="keypress"?ga(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?ga(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),_a=ro(vh),Wr=ne({},Xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lr=ro(Wr),Vs=ne({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Qo=ro(Vs),Lo=ne({},mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),yu=ro(Lo),gl=ne({},Xh,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Kh=ro(gl),Si=[9,13,27,32],fi=u&&"CompositionEvent"in window,ur=null;u&&"documentMode"in document&&(ur=document.documentMode);var wi=u&&"TextEvent"in window&&!ur,qo=u&&(!fi||ur&&8<ur&&11>=ur),Hl=" ",mp=!1;function gp(g,y){switch(g){case"keyup":return Si.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var bu=!1;function Xu(g,y){switch(g){case"compositionend":return Jh(y);case"keypress":return y.which!==32?null:(mp=!0,Hl);case"textInput":return g=y.data,g===Hl&&mp?null:g;default:return null}}function vc(g,y){if(bu)return g==="compositionend"||!fi&&gp(g,y)?(g=ti(),Ai=ms=Yr=null,bu=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return qo&&y.locale!=="ko"?null:y.data;default:return null}}var yh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yc(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!yh[g.type]:y==="textarea"}function Gl(g,y,I,B){cr(B),y=Dd(y,"onChange"),0<y.length&&(I=new Ua("onChange","change",null,I,B),g.push({event:I,listeners:y}))}var Zo=null,Yu=null;function bh(g){$h(g,0)}function bc(g){var y=zn(g);if(Se(y))return g}function Tc(g,y){if(g==="change")return y}var _s=!1;if(u){var Jr;if(u){var _l="oninput"in document;if(!_l){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),_l=typeof ea.oninput=="function"}Jr=_l}else Jr=!1;_s=Jr&&(!document.documentMode||9<document.documentMode)}function vl(){Zo&&(Zo.detachEvent("onpropertychange",Wl),Yu=Zo=null)}function Wl(g){if(g.propertyName==="value"&&bc(Yu)){var y=[];Gl(y,Yu,g,lt(g)),me(bh,y)}}function Vc(g,y,I){g==="focusin"?(vl(),Zo=y,Yu=I,Zo.attachEvent("onpropertychange",Wl)):g==="focusout"&&vl()}function kd(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return bc(Yu)}function mi(g,y){if(g==="click")return bc(y)}function Ye(g,y){if(g==="input"||g==="change")return bc(y)}function kt(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var bt=typeof Object.is=="function"?Object.is:kt;function mn(g,y){if(bt(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var I=Object.keys(g),B=Object.keys(y);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var V=I[B];if(!h.call(y,V)||!bt(g[V],y[V]))return!1}return!0}function Dn(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function qn(g,y){var I=Dn(g);g=0;for(var B;I;){if(I.nodeType===3){if(B=g+I.textContent.length,g<=y&&B>=y)return{node:I,offset:y-g};g=B}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=Dn(I)}}function rr(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?rr(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function An(){for(var g=window,y=Pe();y instanceof g.HTMLIFrameElement;){try{var I=typeof y.contentWindow.location.href=="string"}catch{I=!1}if(I)g=y.contentWindow;else break;y=Pe(g.document)}return y}function Ir(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}function Ls(g){var y=An(),I=g.focusedElem,B=g.selectionRange;if(y!==I&&I&&I.ownerDocument&&rr(I.ownerDocument.documentElement,I)){if(B!==null&&Ir(I)){if(y=B.start,g=B.end,g===void 0&&(g=y),"selectionStart"in I)I.selectionStart=y,I.selectionEnd=Math.min(g,I.value.length);else if(g=(y=I.ownerDocument||document)&&y.defaultView||window,g.getSelection){g=g.getSelection();var V=I.textContent.length,K=Math.min(B.start,V);B=B.end===void 0?K:Math.min(B.end,V),!g.extend&&K>B&&(V=B,B=K,K=V),V=qn(I,K);var fe=qn(I,B);V&&fe&&(g.rangeCount!==1||g.anchorNode!==V.node||g.anchorOffset!==V.offset||g.focusNode!==fe.node||g.focusOffset!==fe.offset)&&(y=y.createRange(),y.setStart(V.node,V.offset),g.removeAllRanges(),K>B?(g.addRange(y),g.extend(fe.node,fe.offset)):(y.setEnd(fe.node,fe.offset),g.addRange(y)))}}for(y=[],g=I;g=g.parentNode;)g.nodeType===1&&y.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<y.length;I++)g=y[I],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var vs=u&&"documentMode"in document&&11>=document.documentMode,vo=null,va=null,ji=null,os=!1;function Ec(g,y,I){var B=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;os||vo==null||vo!==Pe(B)||(B=vo,"selectionStart"in B&&Ir(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),ji&&mn(ji,B)||(ji=B,B=Dd(va,"onSelect"),0<B.length&&(y=new Ua("onSelect","select",null,y,I),g.push({event:y,listeners:B}),y.target=vo)))}function Br(g,y){var I={};return I[g.toLowerCase()]=y.toLowerCase(),I["Webkit"+g]="webkit"+y,I["Moz"+g]="moz"+y,I}var Do={animationend:Br("Animation","AnimationEnd"),animationiteration:Br("Animation","AnimationIteration"),animationstart:Br("Animation","AnimationStart"),transitionend:Br("Transition","TransitionEnd")},Ds={},js={};u&&(js=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function ta(g){if(Ds[g])return Ds[g];if(!Do[g])return g;var y=Do[g],I;for(I in y)if(y.hasOwnProperty(I)&&I in js)return Ds[g]=y[I];return g}var Th=ta("animationend"),jc=ta("animationiteration"),Eh=ta("animationstart"),Tu=ta("transitionend"),Qh=new Map,qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(g,y){Qh.set(g,y),o(y,[g])}for(var Zh=0;Zh<qh.length;Zh++){var $c=qh[Zh],Xc=$c.toLowerCase(),Od=$c[0].toUpperCase()+$c.slice(1);yl(Xc,"on"+Od)}yl(Th,"onAnimationEnd"),yl(jc,"onAnimationIteration"),yl(Eh,"onAnimationStart"),yl("dblclick","onDoubleClick"),yl("focusin","onFocus"),yl("focusout","onBlur"),yl(Tu,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ya=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function Eu(g,y,I){var B=g.type||"unknown-event";g.currentTarget=I,xn(B,y,void 0,g),g.currentTarget=null}function $h(g,y){y=(y&4)!==0;for(var I=0;I<g.length;I++){var B=g[I],V=B.event;B=B.listeners;e:{var K=void 0;if(y)for(var fe=B.length-1;0<=fe;fe--){var Ue=B[fe],Ze=Ue.instance,Ct=Ue.currentTarget;if(Ue=Ue.listener,Ze!==K&&V.isPropagationStopped())break e;Eu(V,Ue,Ct),K=Ze}else for(fe=0;fe<B.length;fe++){if(Ue=B[fe],Ze=Ue.instance,Ct=Ue.currentTarget,Ue=Ue.listener,Ze!==K&&V.isPropagationStopped())break e;Eu(V,Ue,Ct),K=Ze}}}if(st)throw g=Tt,st=!1,Tt=null,g}function ri(g,y){var I=y[ia];I===void 0&&(I=y[ia]=new Set);var B=g+"__bubble";I.has(B)||(Sh(y,g,2,!1),I.add(B))}function ed(g,y,I){var B=0;y&&(B|=4),Sh(I,g,B,y)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function Ku(g){if(!g[Yc]){g[Yc]=!0,i.forEach(function(I){I!=="selectionchange"&&(ya.has(I)||ed(I,!1,g),ed(I,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[Yc]||(y[Yc]=!0,ed("selectionchange",!1,y))}}function Sh(g,y,I,B){switch(pu(y)){case 1:var V=du;break;case 4:V=zl;break;default:V=Wc}I=V.bind(null,y,I,g),V=void 0,!nt||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(V=!0),B?V!==void 0?g.addEventListener(y,I,{capture:!0,passive:V}):g.addEventListener(y,I,!0):V!==void 0?g.addEventListener(y,I,{passive:V}):g.addEventListener(y,I,!1)}function Ld(g,y,I,B,V){var K=B;if(!(y&1)&&!(y&2)&&B!==null)e:for(;;){if(B===null)return;var fe=B.tag;if(fe===3||fe===4){var Ue=B.stateNode.containerInfo;if(Ue===V||Ue.nodeType===8&&Ue.parentNode===V)break;if(fe===4)for(fe=B.return;fe!==null;){var Ze=fe.tag;if((Ze===3||Ze===4)&&(Ze=fe.stateNode.containerInfo,Ze===V||Ze.nodeType===8&&Ze.parentNode===V))return;fe=fe.return}for(;Ue!==null;){if(fe=Ga(Ue),fe===null)return;if(Ze=fe.tag,Ze===5||Ze===6){B=K=fe;continue e}Ue=Ue.parentNode}}B=B.return}me(function(){var Ct=K,jt=lt(I),en=[];e:{var Jt=Qh.get(g);if(Jt!==void 0){var vn=Ua,In=g;switch(g){case"keypress":if(ga(I)===0)break e;case"keydown":case"keyup":vn=_a;break;case"focusin":In="focus",vn=pi;break;case"focusout":In="blur",vn=pi;break;case"beforeblur":case"afterblur":vn=pi;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":vn=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":vn=ml;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":vn=Qo;break;case Th:case jc:case Eh:vn=hp;break;case Tu:vn=yu;break;case"scroll":vn=ni;break;case"wheel":vn=Kh;break;case"copy":case"cut":case"paste":vn=_h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":vn=lr}var Ln=(y&4)!==0,to=!Ln&&g==="scroll",vt=Ln?Jt!==null?Jt+"Capture":null:Jt;Ln=[];for(var it=Ct,yt;it!==null;){yt=it;var sn=yt.stateNode;if(yt.tag===5&&sn!==null&&(yt=sn,vt!==null&&(sn=Ne(it,vt),sn!=null&&Ln.push(bl(it,sn,yt)))),to)break;it=it.return}0<Ln.length&&(Jt=new vn(Jt,In,null,I,jt),en.push({event:Jt,listeners:Ln}))}}if(!(y&7)){e:{if(Jt=g==="mouseover"||g==="pointerover",vn=g==="mouseout"||g==="pointerout",Jt&&I!==Wt&&(In=I.relatedTarget||I.fromElement)&&(Ga(In)||In[qi]))break e;if((vn||Jt)&&(Jt=jt.window===jt?jt:(Jt=jt.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,vn?(In=I.relatedTarget||I.toElement,vn=Ct,In=In?Ga(In):null,In!==null&&(to=Bn(In),In!==to||In.tag!==5&&In.tag!==6)&&(In=null)):(vn=null,In=Ct),vn!==In)){if(Ln=gu,sn="onMouseLeave",vt="onMouseEnter",it="mouse",(g==="pointerout"||g==="pointerover")&&(Ln=lr,sn="onPointerLeave",vt="onPointerEnter",it="pointer"),to=vn==null?Jt:zn(vn),yt=In==null?Jt:zn(In),Jt=new Ln(sn,it+"leave",vn,I,jt),Jt.target=to,Jt.relatedTarget=yt,sn=null,Ga(jt)===Ct&&(Ln=new Ln(vt,it+"enter",In,I,jt),Ln.target=yt,Ln.relatedTarget=to,sn=Ln),to=sn,vn&&In)t:{for(Ln=vn,vt=In,it=0,yt=Ln;yt;yt=wh(yt))it++;for(yt=0,sn=vt;sn;sn=wh(sn))yt++;for(;0<it-yt;)Ln=wh(Ln),it--;for(;0<yt-it;)vt=wh(vt),yt--;for(;it--;){if(Ln===vt||vt!==null&&Ln===vt.alternate)break t;Ln=wh(Ln),vt=wh(vt)}Ln=null}else Ln=null;vn!==null&&so(en,Jt,vn,Ln,!1),In!==null&&to!==null&&so(en,to,In,Ln,!0)}}e:{if(Jt=Ct?zn(Ct):window,vn=Jt.nodeName&&Jt.nodeName.toLowerCase(),vn==="select"||vn==="input"&&Jt.type==="file")var Hn=Tc;else if(yc(Jt))if(_s)Hn=Ye;else{Hn=kd;var Nn=Vc}else(vn=Jt.nodeName)&&vn.toLowerCase()==="input"&&(Jt.type==="checkbox"||Jt.type==="radio")&&(Hn=mi);if(Hn&&(Hn=Hn(g,Ct))){Gl(en,Hn,I,jt);break e}Nn&&Nn(g,Jt,Ct),g==="focusout"&&(Nn=Jt._wrapperState)&&Nn.controlled&&Jt.type==="number"&&St(Jt,"number",Jt.value)}switch(Nn=Ct?zn(Ct):window,g){case"focusin":(yc(Nn)||Nn.contentEditable==="true")&&(vo=Nn,va=Ct,ji=null);break;case"focusout":ji=va=vo=null;break;case"mousedown":os=!0;break;case"contextmenu":case"mouseup":case"dragend":os=!1,Ec(en,I,jt);break;case"selectionchange":if(vs)break;case"keydown":case"keyup":Ec(en,I,jt)}var Vn;if(fi)e:{switch(g){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else bu?gp(g,I)&&(mr="onCompositionEnd"):g==="keydown"&&I.keyCode===229&&(mr="onCompositionStart");mr&&(qo&&I.locale!=="ko"&&(bu||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&bu&&(Vn=ti()):(Yr=jt,ms="value"in Yr?Yr.value:Yr.textContent,bu=!0)),Nn=Dd(Ct,mr),0<Nn.length&&(mr=new Wp(mr,g,null,I,jt),en.push({event:mr,listeners:Nn}),Vn?mr.data=Vn:(Vn=Jh(I),Vn!==null&&(mr.data=Vn)))),(Vn=wi?Xu(g,I):vc(g,I))&&(Ct=Dd(Ct,"onBeforeInput"),0<Ct.length&&(jt=new Wp("onBeforeInput","beforeinput",null,I,jt),en.push({event:jt,listeners:Ct}),jt.data=Vn))}$h(en,y)})}function bl(g,y,I){return{instance:g,listener:y,currentTarget:I}}function Dd(g,y){for(var I=y+"Capture",B=[];g!==null;){var V=g,K=V.stateNode;V.tag===5&&K!==null&&(V=K,K=Ne(g,I),K!=null&&B.unshift(bl(g,K,V)),K=Ne(g,y),K!=null&&B.push(bl(g,K,V))),g=g.return}return B}function wh(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function so(g,y,I,B,V){for(var K=y._reactName,fe=[];I!==null&&I!==B;){var Ue=I,Ze=Ue.alternate,Ct=Ue.stateNode;if(Ze!==null&&Ze===B)break;Ue.tag===5&&Ct!==null&&(Ue=Ct,V?(Ze=Ne(I,K),Ze!=null&&fe.unshift(bl(I,Ze,Ue))):V||(Ze=Ne(I,K),Ze!=null&&fe.push(bl(I,Ze,Ue)))),I=I.return}fe.length!==0&&g.push({event:y,listeners:fe})}var na=/\r\n?/g,Ff=/\u0000|\uFFFD/g;function Vp(g){return(typeof g=="string"?g:""+g).replace(na,`
`).replace(Ff,"")}function Tl(g,y,I){if(y=Vp(y),Vp(g)!==y&&I)throw Error(t(425))}function El(){}var Sc=null,xh=null;function td(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Ju=typeof setTimeout=="function"?setTimeout:void 0,Ha=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,nd=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(g){return Qu.resolve(null).then(g).catch(wc)}:Ju;function wc(g){setTimeout(function(){throw g})}function xc(g,y){var I=y,B=0;do{var V=I.nextSibling;if(g.removeChild(I),V&&V.nodeType===8)if(I=V.data,I==="/$"){if(B===0){g.removeChild(V),pr(y);return}B--}else I!=="$"&&I!=="$?"&&I!=="$!"||B++;I=V}while(I);pr(y)}function qu(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return g}function Nd(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="$"||I==="$!"||I==="$?"){if(y===0)return g;y--}else I==="/$"&&y++}g=g.previousSibling}return null}var ra=Math.random().toString(36).slice(2),xr="__reactFiber$"+ra,Vl="__reactProps$"+ra,qi="__reactContainer$"+ra,ia="__reactEvents$"+ra,ye="__reactListeners$"+ra,Xs="__reactHandles$"+ra;function Ga(g){var y=g[xr];if(y)return y;for(var I=g.parentNode;I;){if(y=I[qi]||I[xr]){if(I=y.alternate,y.child!==null||I!==null&&I.child!==null)for(g=Nd(g);g!==null;){if(I=g[xr])return I;g=Nd(g)}return y}g=I,I=g.parentNode}return null}function Ur(g){return g=g[xr]||g[qi],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function zn(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(t(33))}function jp(g){return g[Vl]||null}var ba=[],Qr=-1;function gi(g){return{current:g}}function xi(g){0>Qr||(g.current=ba[Qr],ba[Qr]=null,Qr--)}function Ii(g,y){Qr++,ba[Qr]=g.current,g.current=y}var Cc={},No=gi(Cc),Bo=gi(!1),oo=Cc;function Mc(g,y){var I=g.type.contextTypes;if(!I)return Cc;var B=g.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===y)return B.__reactInternalMemoizedMaskedChildContext;var V={},K;for(K in I)V[K]=y[K];return B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=V),V}function yo(g){return g=g.childContextTypes,g!=null}function Bd(){xi(Bo),xi(No)}function Pd(g,y,I){if(No.current!==Cc)throw Error(t(168));Ii(No,y),Ii(Bo,I)}function Ch(g,y,I){var B=g.stateNode;if(y=y.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var V in B)if(!(V in y))throw Error(t(108,Je(g)||"Unknown",V));return ne({},I,B)}function Ta(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Cc,oo=No.current,Ii(No,g),Ii(Bo,Bo.current),!0}function Cn(g,y,I){var B=g.stateNode;if(!B)throw Error(t(169));I?(g=Ch(g,y,oo),B.__reactInternalMemoizedMergedChildContext=g,xi(Bo),xi(No),Ii(No,g)):xi(Bo),Ii(Bo,I)}var as=null,ys=!1,ii=!1;function $l(g){as===null?as=[g]:as.push(g)}function Sl(g){ys=!0,$l(g)}function cn(){if(!ii&&as!==null){ii=!0;var g=0,y=tr;try{var I=as;for(tr=1;g<I.length;g++){var B=I[g];do B=B(!0);while(B!==null)}as=null,ys=!1}catch(V){throw as!==null&&(as=as.slice(g+1)),Wi(fa,cn),V}finally{tr=y,ii=!1}}return null}var zr=[],Zi=0,Xp=null,Kc=0,Ns=[],Po=0,dn=null,rn=1,Wa="";function Zu(g,y){zr[Zi++]=Kc,zr[Zi++]=Xp,Xp=g,Kc=y}function Uf(g,y,I){Ns[Po++]=rn,Ns[Po++]=Wa,Ns[Po++]=dn,dn=g;var B=rn;g=Wa;var V=32-wr(B)-1;B&=~(1<<V),I+=1;var K=32-wr(y)+V;if(30<K){var fe=V-V%5;K=(B&(1<<fe)-1).toString(32),B>>=fe,V-=fe,rn=1<<32-wr(y)+V|I<<V|B,Wa=K+g}else rn=1<<K|I<<V|B,Wa=g}function $u(g){g.return!==null&&(Zu(g,1),Uf(g,1,0))}function sa(g){for(;g===Xp;)Xp=zr[--Zi],zr[Zi]=null,Kc=zr[--Zi],zr[Zi]=null;for(;g===dn;)dn=Ns[--Po],Ns[Po]=null,Wa=Ns[--Po],Ns[Po]=null,rn=Ns[--Po],Ns[Po]=null}var ls=null,Ea=null,zi=!1,$a=null;function Su(g,y){var I=Bu(5,null,null,0);I.elementType="DELETED",I.stateNode=y,I.return=g,y=g.deletions,y===null?(g.deletions=[I],g.flags|=16):y.push(I)}function Fd(g,y){switch(g.tag){case 5:var I=g.type;return y=y.nodeType!==1||I.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(g.stateNode=y,ls=g,Ea=qu(y.firstChild),!0):!1;case 6:return y=g.pendingProps===""||y.nodeType!==3?null:y,y!==null?(g.stateNode=y,ls=g,Ea=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(I=dn!==null?{id:rn,overflow:Wa}:null,g.memoizedState={dehydrated:y,treeContext:I,retryLane:1073741824},I=Bu(18,null,null,0),I.stateNode=y,I.return=g,g.child=I,ls=g,Ea=null,!0):!1;default:return!1}}function ec(g){return(g.mode&1)!==0&&(g.flags&128)===0}function Ys(g){if(zi){var y=Ea;if(y){var I=y;if(!Fd(g,y)){if(ec(g))throw Error(t(418));y=qu(I.nextSibling);var B=ls;y&&Fd(g,y)?Su(B,I):(g.flags=g.flags&-4097|2,zi=!1,ls=g)}}else{if(ec(g))throw Error(t(418));g.flags=g.flags&-4097|2,zi=!1,ls=g}}}function Ud(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;ls=g}function Jc(g){if(g!==ls)return!1;if(!zi)return Ud(g),zi=!0,!1;var y;if((y=g.tag!==3)&&!(y=g.tag!==5)&&(y=g.type,y=y!=="head"&&y!=="body"&&!td(g.type,g.memoizedProps)),y&&(y=Ea)){if(ec(g))throw rd(),Error(t(418));for(;y;)Su(g,y),y=qu(y.nextSibling)}if(Ud(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));e:{for(g=g.nextSibling,y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="/$"){if(y===0){Ea=qu(g.nextSibling);break e}y--}else I!=="$"&&I!=="$!"&&I!=="$?"||y++}g=g.nextSibling}Ea=null}}else Ea=ls?qu(g.stateNode.nextSibling):null;return!0}function rd(){for(var g=Ea;g;)g=qu(g.nextSibling)}function Sa(){Ea=ls=null,zi=!1}function wl(g){$a===null?$a=[g]:$a.push(g)}var Yp=D.ReactCurrentBatchConfig;function jl(g,y){if(g&&g.defaultProps){y=ne({},y),g=g.defaultProps;for(var I in g)y[I]===void 0&&(y[I]=g[I]);return y}return y}var wu=gi(null),id=null,Ac=null,us=null;function xu(){us=Ac=id=null}function tc(g){var y=wu.current;xi(wu),g._currentValue=y}function bo(g,y,I){for(;g!==null;){var B=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,B!==null&&(B.childLanes|=y)):B!==null&&(B.childLanes&y)!==y&&(B.childLanes|=y),g===I)break;g=g.return}}function Va(g,y){id=g,us=Ac=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(nn=!0),g.firstContext=null)}function bs(g){var y=g._currentValue;if(us!==g)if(g={context:g,memoizedValue:y,next:null},Ac===null){if(id===null)throw Error(t(308));Ac=g,id.dependencies={lanes:0,firstContext:g}}else Ac=Ac.next=g;return y}var ao=null;function Qc(g){ao===null?ao=[g]:ao.push(g)}function Ks(g,y,I,B){var V=y.interleaved;return V===null?(I.next=I,Qc(y)):(I.next=V.next,V.next=I),y.interleaved=I,ja(g,B)}function ja(g,y){g.lanes|=y;var I=g.alternate;for(I!==null&&(I.lanes|=y),I=g,g=g.return;g!==null;)g.childLanes|=y,I=g.alternate,I!==null&&(I.childLanes|=y),I=g,g=g.return;return I.tag===3?I.stateNode:null}var nc=!1;function _p(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qc(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function oa(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function _i(g,y,I){var B=g.updateQueue;if(B===null)return null;if(B=B.shared,(Ci&2)!==0){var V=B.pending;return V===null?y.next=y:(y.next=V.next,V.next=y),B.pending=y,ja(g,I)}return V=B.interleaved,V===null?(y.next=y,Qc(B)):(y.next=V.next,V.next=y),B.interleaved=y,ja(g,I)}function wn(g,y,I){if(y=y.updateQueue,y!==null&&(y=y.shared,(I&4194240)!==0)){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,Yo(g,I)}}function On(g,y){var I=g.updateQueue,B=g.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var V=null,K=null;if(I=I.firstBaseUpdate,I!==null){do{var fe={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};K===null?V=K=fe:K=K.next=fe,I=I.next}while(I!==null);K===null?V=K=y:K=K.next=y}else V=K=y;I={baseState:B.baseState,firstBaseUpdate:V,lastBaseUpdate:K,shared:B.shared,effects:B.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=y:g.next=y,I.lastBaseUpdate=y}function yr(g,y,I,B){var V=g.updateQueue;nc=!1;var K=V.firstBaseUpdate,fe=V.lastBaseUpdate,Ue=V.shared.pending;if(Ue!==null){V.shared.pending=null;var Ze=Ue,Ct=Ze.next;Ze.next=null,fe===null?K=Ct:fe.next=Ct,fe=Ze;var jt=g.alternate;jt!==null&&(jt=jt.updateQueue,Ue=jt.lastBaseUpdate,Ue!==fe&&(Ue===null?jt.firstBaseUpdate=Ct:Ue.next=Ct,jt.lastBaseUpdate=Ze))}if(K!==null){var en=V.baseState;fe=0,jt=Ct=Ze=null,Ue=K;do{var Jt=Ue.lane,vn=Ue.eventTime;if((B&Jt)===Jt){jt!==null&&(jt=jt.next={eventTime:vn,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var In=g,Ln=Ue;switch(Jt=y,vn=I,Ln.tag){case 1:if(In=Ln.payload,typeof In=="function"){en=In.call(vn,en,Jt);break e}en=In;break e;case 3:In.flags=In.flags&-65537|128;case 0:if(In=Ln.payload,Jt=typeof In=="function"?In.call(vn,en,Jt):In,Jt==null)break e;en=ne({},en,Jt);break e;case 2:nc=!0}}Ue.callback!==null&&Ue.lane!==0&&(g.flags|=64,Jt=V.effects,Jt===null?V.effects=[Ue]:Jt.push(Ue))}else vn={eventTime:vn,lane:Jt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},jt===null?(Ct=jt=vn,Ze=en):jt=jt.next=vn,fe|=Jt;if(Ue=Ue.next,Ue===null){if(Ue=V.shared.pending,Ue===null)break;Jt=Ue,Ue=Jt.next,Jt.next=null,V.lastBaseUpdate=Jt,V.shared.pending=null}}while(!0);if(jt===null&&(Ze=en),V.baseState=Ze,V.firstBaseUpdate=Ct,V.lastBaseUpdate=jt,y=V.shared.interleaved,y!==null){V=y;do fe|=V.lane,V=V.next;while(V!==y)}else K===null&&(V.shared.lanes=0);Tp|=fe,g.lanes=fe,g.memoizedState=en}}function Or(g,y,I){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var B=g[y],V=B.callback;if(V!==null){if(B.callback=null,B=I,typeof V!="function")throw Error(t(191,V));V.call(B)}}}var Hr=new n.Component().refs;function Js(g,y,I,B){y=g.memoizedState,I=I(B,y),I=I==null?y:ne({},y,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var Ri={isMounted:function(g){return(g=g._reactInternals)?Bn(g)===g:!1},enqueueSetState:function(g,y,I){g=g._reactInternals;var B=ac(),V=Gd(g),K=oa(B,V);K.payload=y,I!=null&&(K.callback=I),y=_i(g,K,V),y!==null&&(wo(y,g,V,B),wn(y,g,V))},enqueueReplaceState:function(g,y,I){g=g._reactInternals;var B=ac(),V=Gd(g),K=oa(B,V);K.tag=1,K.payload=y,I!=null&&(K.callback=I),y=_i(g,K,V),y!==null&&(wo(y,g,V,B),wn(y,g,V))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var I=ac(),B=Gd(g),V=oa(I,B);V.tag=2,y!=null&&(V.callback=y),y=_i(g,V,B),y!==null&&(wo(y,g,B,I),wn(y,g,B))}};function Hi(g,y,I,B,V,K,fe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(B,K,fe):y.prototype&&y.prototype.isPureReactComponent?!mn(I,B)||!mn(V,K):!0}function Xl(g,y,I){var B=!1,V=Cc,K=y.contextType;return typeof K=="object"&&K!==null?K=bs(K):(V=yo(y)?oo:No.current,B=y.contextTypes,K=(B=B!=null)?Mc(g,V):Cc),y=new y(I,K),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ri,g.stateNode=y,y._reactInternals=g,B&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=V,g.__reactInternalMemoizedMaskedChildContext=K),y}function Cu(g,y,I,B){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(I,B),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(I,B),y.state!==g&&Ri.enqueueReplaceState(y,y.state,null)}function rc(g,y,I,B){var V=g.stateNode;V.props=I,V.state=g.memoizedState,V.refs=Hr,_p(g);var K=y.contextType;typeof K=="object"&&K!==null?V.context=bs(K):(K=yo(y)?oo:No.current,V.context=Mc(g,K)),V.state=g.memoizedState,K=y.getDerivedStateFromProps,typeof K=="function"&&(Js(g,y,K,I),V.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(y=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),y!==V.state&&Ri.enqueueReplaceState(V,V.state,null),yr(g,I,V,B),V.state=g.memoizedState),typeof V.componentDidMount=="function"&&(g.flags|=4194308)}function Mu(g,y,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(t(309));var B=I.stateNode}if(!B)throw Error(t(147,g));var V=B,K=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===K?y.ref:(y=function(fe){var Ue=V.refs;Ue===Hr&&(Ue=V.refs={}),fe===null?delete Ue[K]:Ue[K]=fe},y._stringRef=K,y)}if(typeof g!="string")throw Error(t(284));if(!I._owner)throw Error(t(290,g))}return g}function Bs(g,y){throw g=Object.prototype.toString.call(y),Error(t(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function lo(g){var y=g._init;return y(g._payload)}function sd(g){function y(vt,it){if(g){var yt=vt.deletions;yt===null?(vt.deletions=[it],vt.flags|=16):yt.push(it)}}function I(vt,it){if(!g)return null;for(;it!==null;)y(vt,it),it=it.sibling;return null}function B(vt,it){for(vt=new Map;it!==null;)it.key!==null?vt.set(it.key,it):vt.set(it.index,it),it=it.sibling;return vt}function V(vt,it){return vt=kh(vt,it),vt.index=0,vt.sibling=null,vt}function K(vt,it,yt){return vt.index=yt,g?(yt=vt.alternate,yt!==null?(yt=yt.index,yt<it?(vt.flags|=2,it):yt):(vt.flags|=2,it)):(vt.flags|=1048576,it)}function fe(vt){return g&&vt.alternate===null&&(vt.flags|=2),vt}function Ue(vt,it,yt,sn){return it===null||it.tag!==6?(it=Xf(yt,vt.mode,sn),it.return=vt,it):(it=V(it,yt),it.return=vt,it)}function Ze(vt,it,yt,sn){var Hn=yt.type;return Hn===H?jt(vt,it,yt.props.children,sn,yt.key):it!==null&&(it.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===ge&&lo(Hn)===it.type)?(sn=V(it,yt.props),sn.ref=Mu(vt,it,yt),sn.return=vt,sn):(sn=Nm(yt.type,yt.key,yt.props,null,vt.mode,sn),sn.ref=Mu(vt,it,yt),sn.return=vt,sn)}function Ct(vt,it,yt,sn){return it===null||it.tag!==4||it.stateNode.containerInfo!==yt.containerInfo||it.stateNode.implementation!==yt.implementation?(it=dd(yt,vt.mode,sn),it.return=vt,it):(it=V(it,yt.children||[]),it.return=vt,it)}function jt(vt,it,yt,sn,Hn){return it===null||it.tag!==7?(it=nf(yt,vt.mode,sn,Hn),it.return=vt,it):(it=V(it,yt),it.return=vt,it)}function en(vt,it,yt){if(typeof it=="string"&&it!==""||typeof it=="number")return it=Xf(""+it,vt.mode,yt),it.return=vt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case U:return yt=Nm(it.type,it.key,it.props,null,vt.mode,yt),yt.ref=Mu(vt,null,it),yt.return=vt,yt;case F:return it=dd(it,vt.mode,yt),it.return=vt,it;case ge:var sn=it._init;return en(vt,sn(it._payload),yt)}if(It(it)||Z(it))return it=nf(it,vt.mode,yt,null),it.return=vt,it;Bs(vt,it)}return null}function Jt(vt,it,yt,sn){var Hn=it!==null?it.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return Hn!==null?null:Ue(vt,it,""+yt,sn);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case U:return yt.key===Hn?Ze(vt,it,yt,sn):null;case F:return yt.key===Hn?Ct(vt,it,yt,sn):null;case ge:return Hn=yt._init,Jt(vt,it,Hn(yt._payload),sn)}if(It(yt)||Z(yt))return Hn!==null?null:jt(vt,it,yt,sn,null);Bs(vt,yt)}return null}function vn(vt,it,yt,sn,Hn){if(typeof sn=="string"&&sn!==""||typeof sn=="number")return vt=vt.get(yt)||null,Ue(it,vt,""+sn,Hn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case U:return vt=vt.get(sn.key===null?yt:sn.key)||null,Ze(it,vt,sn,Hn);case F:return vt=vt.get(sn.key===null?yt:sn.key)||null,Ct(it,vt,sn,Hn);case ge:var Nn=sn._init;return vn(vt,it,yt,Nn(sn._payload),Hn)}if(It(sn)||Z(sn))return vt=vt.get(yt)||null,jt(it,vt,sn,Hn,null);Bs(it,sn)}return null}function In(vt,it,yt,sn){for(var Hn=null,Nn=null,Vn=it,mr=it=0,tl=null;Vn!==null&&mr<yt.length;mr++){Vn.index>mr?(tl=Vn,Vn=null):tl=Vn.sibling;var Oi=Jt(vt,Vn,yt[mr],sn);if(Oi===null){Vn===null&&(Vn=tl);break}g&&Vn&&Oi.alternate===null&&y(vt,Vn),it=K(Oi,it,mr),Nn===null?Hn=Oi:Nn.sibling=Oi,Nn=Oi,Vn=tl}if(mr===yt.length)return I(vt,Vn),zi&&Zu(vt,mr),Hn;if(Vn===null){for(;mr<yt.length;mr++)Vn=en(vt,yt[mr],sn),Vn!==null&&(it=K(Vn,it,mr),Nn===null?Hn=Vn:Nn.sibling=Vn,Nn=Vn);return zi&&Zu(vt,mr),Hn}for(Vn=B(vt,Vn);mr<yt.length;mr++)tl=vn(Vn,vt,mr,yt[mr],sn),tl!==null&&(g&&tl.alternate!==null&&Vn.delete(tl.key===null?mr:tl.key),it=K(tl,it,mr),Nn===null?Hn=tl:Nn.sibling=tl,Nn=tl);return g&&Vn.forEach(function(lf){return y(vt,lf)}),zi&&Zu(vt,mr),Hn}function Ln(vt,it,yt,sn){var Hn=Z(yt);if(typeof Hn!="function")throw Error(t(150));if(yt=Hn.call(yt),yt==null)throw Error(t(151));for(var Nn=Hn=null,Vn=it,mr=it=0,tl=null,Oi=yt.next();Vn!==null&&!Oi.done;mr++,Oi=yt.next()){Vn.index>mr?(tl=Vn,Vn=null):tl=Vn.sibling;var lf=Jt(vt,Vn,Oi.value,sn);if(lf===null){Vn===null&&(Vn=tl);break}g&&Vn&&lf.alternate===null&&y(vt,Vn),it=K(lf,it,mr),Nn===null?Hn=lf:Nn.sibling=lf,Nn=lf,Vn=tl}if(Oi.done)return I(vt,Vn),zi&&Zu(vt,mr),Hn;if(Vn===null){for(;!Oi.done;mr++,Oi=yt.next())Oi=en(vt,Oi.value,sn),Oi!==null&&(it=K(Oi,it,mr),Nn===null?Hn=Oi:Nn.sibling=Oi,Nn=Oi);return zi&&Zu(vt,mr),Hn}for(Vn=B(vt,Vn);!Oi.done;mr++,Oi=yt.next())Oi=vn(Vn,vt,mr,Oi.value,sn),Oi!==null&&(g&&Oi.alternate!==null&&Vn.delete(Oi.key===null?mr:Oi.key),it=K(Oi,it,mr),Nn===null?Hn=Oi:Nn.sibling=Oi,Nn=Oi);return g&&Vn.forEach(function(__){return y(vt,__)}),zi&&Zu(vt,mr),Hn}function to(vt,it,yt,sn){if(typeof yt=="object"&&yt!==null&&yt.type===H&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case U:e:{for(var Hn=yt.key,Nn=it;Nn!==null;){if(Nn.key===Hn){if(Hn=yt.type,Hn===H){if(Nn.tag===7){I(vt,Nn.sibling),it=V(Nn,yt.props.children),it.return=vt,vt=it;break e}}else if(Nn.elementType===Hn||typeof Hn=="object"&&Hn!==null&&Hn.$$typeof===ge&&lo(Hn)===Nn.type){I(vt,Nn.sibling),it=V(Nn,yt.props),it.ref=Mu(vt,Nn,yt),it.return=vt,vt=it;break e}I(vt,Nn);break}else y(vt,Nn);Nn=Nn.sibling}yt.type===H?(it=nf(yt.props.children,vt.mode,sn,yt.key),it.return=vt,vt=it):(sn=Nm(yt.type,yt.key,yt.props,null,vt.mode,sn),sn.ref=Mu(vt,it,yt),sn.return=vt,vt=sn)}return fe(vt);case F:e:{for(Nn=yt.key;it!==null;){if(it.key===Nn)if(it.tag===4&&it.stateNode.containerInfo===yt.containerInfo&&it.stateNode.implementation===yt.implementation){I(vt,it.sibling),it=V(it,yt.children||[]),it.return=vt,vt=it;break e}else{I(vt,it);break}else y(vt,it);it=it.sibling}it=dd(yt,vt.mode,sn),it.return=vt,vt=it}return fe(vt);case ge:return Nn=yt._init,to(vt,it,Nn(yt._payload),sn)}if(It(yt))return In(vt,it,yt,sn);if(Z(yt))return Ln(vt,it,yt,sn);Bs(vt,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,it!==null&&it.tag===6?(I(vt,it.sibling),it=V(it,yt),it.return=vt,vt=it):(I(vt,it),it=Xf(yt,vt.mode,sn),it.return=vt,vt=it),fe(vt)):I(vt,it)}return to}var wa=sd(!0),Au=sd(!1),Iu={},Qs=gi(Iu),To=gi(Iu),Xa=gi(Iu);function Eo(g){if(g===Iu)throw Error(t(174));return g}function ic(g,y){switch(Ii(Xa,y),Ii(To,g),Ii(Qs,Iu),g=y.nodeType,g){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:$t(null,"");break;default:g=g===8?y.parentNode:y,y=g.namespaceURI||null,g=g.tagName,y=$t(y,g)}xi(Qs),Ii(Qs,y)}function Ru(){xi(Qs),xi(To),xi(Xa)}function Mh(g){Eo(Xa.current);var y=Eo(Qs.current),I=$t(y,g.type);y!==I&&(Ii(To,g),Ii(Qs,I))}function Zc(g){To.current===g&&(xi(Qs),xi(To))}var Sr=gi(0);function Xi(g){for(var y=g;y!==null;){if(y.tag===13){var I=y.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var Ts=[];function aa(){for(var g=0;g<Ts.length;g++)Ts[g]._workInProgressVersionPrimary=null;Ts.length=0}var Ps=D.ReactCurrentDispatcher,Gn=D.ReactCurrentBatchConfig,Ic=0,on=null,si=null,es=null,xl=!1,Ya=!1,Dt=0,xa=0;function Lr(){throw Error(t(321))}function Rc(g,y){if(y===null)return!1;for(var I=0;I<y.length&&I<g.length;I++)if(!bt(g[I],y[I]))return!1;return!0}function od(g,y,I,B,V,K){if(Ic=K,on=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Ps.current=g===null||g.memoizedState===null?f:S,g=I(B,V),Ya){K=0;do{if(Ya=!1,Dt=0,25<=K)throw Error(t(301));K+=1,es=si=null,y.updateQueue=null,Ps.current=M,g=I(B,V)}while(Ya)}if(Ps.current=c,y=si!==null&&si.next!==null,Ic=0,es=si=on=null,xl=!1,y)throw Error(t(300));return g}function eh(){var g=Dt!==0;return Dt=0,g}function ts(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?on.memoizedState=es=g:es=es.next=g,es}function Es(){if(si===null){var g=on.alternate;g=g!==null?g.memoizedState:null}else g=si.next;var y=es===null?on.memoizedState:es.next;if(y!==null)es=y,si=g;else{if(g===null)throw Error(t(310));si=g,g={memoizedState:si.memoizedState,baseState:si.baseState,baseQueue:si.baseQueue,queue:si.queue,next:null},es===null?on.memoizedState=es=g:es=es.next=g}return es}function Ah(g,y){return typeof y=="function"?y(g):y}function qs(g){var y=Es(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=si,V=B.baseQueue,K=I.pending;if(K!==null){if(V!==null){var fe=V.next;V.next=K.next,K.next=fe}B.baseQueue=V=K,I.pending=null}if(V!==null){K=V.next,B=B.baseState;var Ue=fe=null,Ze=null,Ct=K;do{var jt=Ct.lane;if((Ic&jt)===jt)Ze!==null&&(Ze=Ze.next={lane:0,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),B=Ct.hasEagerState?Ct.eagerState:g(B,Ct.action);else{var en={lane:jt,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null};Ze===null?(Ue=Ze=en,fe=B):Ze=Ze.next=en,on.lanes|=jt,Tp|=jt}Ct=Ct.next}while(Ct!==null&&Ct!==K);Ze===null?fe=B:Ze.next=Ue,bt(B,y.memoizedState)||(nn=!0),y.memoizedState=B,y.baseState=fe,y.baseQueue=Ze,I.lastRenderedState=B}if(g=I.interleaved,g!==null){V=g;do K=V.lane,on.lanes|=K,Tp|=K,V=V.next;while(V!==g)}else V===null&&(I.lanes=0);return[y.memoizedState,I.dispatch]}function Yl(g){var y=Es(),I=y.queue;if(I===null)throw Error(t(311));I.lastRenderedReducer=g;var B=I.dispatch,V=I.pending,K=y.memoizedState;if(V!==null){I.pending=null;var fe=V=V.next;do K=g(K,fe.action),fe=fe.next;while(fe!==V);bt(K,y.memoizedState)||(nn=!0),y.memoizedState=K,y.baseQueue===null&&(y.baseState=K),I.lastRenderedState=K}return[K,B]}function th(){}function nh(g,y){var I=on,B=Es(),V=y(),K=!bt(B.memoizedState,V);if(K&&(B.memoizedState=V,nn=!0),B=B.queue,Lu(Zs.bind(null,I,B,g),[g]),B.getSnapshot!==y||K||es!==null&&es.memoizedState.tag&1){if(I.flags|=2048,Ou(9,$o.bind(null,I,B,V,y),void 0,null),Ml===null)throw Error(t(349));Ic&30||sc(I,y,V)}return V}function sc(g,y,I){g.flags|=16384,g={getSnapshot:y,value:I},y=on.updateQueue,y===null?(y={lastEffect:null,stores:null},on.updateQueue=y,y.stores=[g]):(I=y.stores,I===null?y.stores=[g]:I.push(g))}function $o(g,y,I,B){y.value=I,y.getSnapshot=B,ku(y)&&rh(g)}function Zs(g,y,I){return I(function(){ku(y)&&rh(g)})}function ku(g){var y=g.getSnapshot;g=g.value;try{var I=y();return!bt(g,I)}catch{return!0}}function rh(g){var y=ja(g,1);y!==null&&wo(y,g,1,-1)}function Ka(g){var y=ts();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:g},y.queue=g,g=g.dispatch=ld.bind(null,on,g),[y.memoizedState,g]}function Ou(g,y,I,B){return g={tag:g,create:y,destroy:I,deps:B,next:null},y=on.updateQueue,y===null?(y={lastEffect:null,stores:null},on.updateQueue=y,y.lastEffect=g.next=g):(I=y.lastEffect,I===null?y.lastEffect=g.next=g:(B=I.next,I.next=g,g.next=B,y.lastEffect=g)),g}function ih(){return Es().memoizedState}function sh(g,y,I,B){var V=ts();on.flags|=g,V.memoizedState=Ou(1|y,I,void 0,B===void 0?null:B)}function uo(g,y,I,B){var V=Es();B=B===void 0?null:B;var K=void 0;if(si!==null){var fe=si.memoizedState;if(K=fe.destroy,B!==null&&Rc(B,fe.deps)){V.memoizedState=Ou(y,I,K,B);return}}on.flags|=g,V.memoizedState=Ou(1|y,I,K,B)}function Fs(g,y){return sh(8390656,8,g,y)}function Lu(g,y){return uo(2048,8,g,y)}function Cl(g,y){return uo(4,2,g,y)}function eo(g,y){return uo(4,4,g,y)}function Ja(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function Ca(g,y,I){return I=I!=null?I.concat([g]):null,uo(4,4,Ja.bind(null,y,g),I)}function Kl(){}function ns(g,y){var I=Es();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&Rc(y,B[1])?B[0]:(I.memoizedState=[g,y],g)}function So(g,y){var I=Es();y=y===void 0?null:y;var B=I.memoizedState;return B!==null&&y!==null&&Rc(y,B[1])?B[0]:(g=g(),I.memoizedState=[g,y],g)}function Ih(g,y,I){return Ic&21?(bt(I,y)||(I=ko(),on.lanes|=I,Tp|=I,g.baseState=!0),y):(g.baseState&&(g.baseState=!1,nn=!0),g.memoizedState=I)}function ad(g,y){var I=tr;tr=I!==0&&4>I?I:4,g(!0);var B=Gn.transition;Gn.transition={};try{g(!1),y()}finally{tr=I,Gn.transition=B}}function Qa(){return Es().memoizedState}function Jl(g,y,I){var B=Gd(g);if(I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},kc(g))Kp(y,I);else if(I=Ks(g,y,I,B),I!==null){var V=ac();wo(I,g,B,V),$(I,y,B)}}function ld(g,y,I){var B=Gd(g),V={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(kc(g))Kp(y,V);else{var K=g.alternate;if(g.lanes===0&&(K===null||K.lanes===0)&&(K=y.lastRenderedReducer,K!==null))try{var fe=y.lastRenderedState,Ue=K(fe,I);if(V.hasEagerState=!0,V.eagerState=Ue,bt(Ue,fe)){var Ze=y.interleaved;Ze===null?(V.next=V,Qc(y)):(V.next=Ze.next,Ze.next=V),y.interleaved=V;return}}catch{}finally{}I=Ks(g,y,V,B),I!==null&&(V=ac(),wo(I,g,B,V),$(I,y,B))}}function kc(g){var y=g.alternate;return g===on||y!==null&&y===on}function Kp(g,y){Ya=xl=!0;var I=g.pending;I===null?y.next=y:(y.next=I.next,I.next=y),g.pending=y}function $(g,y,I){if(I&4194240){var B=y.lanes;B&=g.pendingLanes,I|=B,y.lanes=I,Yo(g,I)}}var c={readContext:bs,useCallback:Lr,useContext:Lr,useEffect:Lr,useImperativeHandle:Lr,useInsertionEffect:Lr,useLayoutEffect:Lr,useMemo:Lr,useReducer:Lr,useRef:Lr,useState:Lr,useDebugValue:Lr,useDeferredValue:Lr,useTransition:Lr,useMutableSource:Lr,useSyncExternalStore:Lr,useId:Lr,unstable_isNewReconciler:!1},f={readContext:bs,useCallback:function(g,y){return ts().memoizedState=[g,y===void 0?null:y],g},useContext:bs,useEffect:Fs,useImperativeHandle:function(g,y,I){return I=I!=null?I.concat([g]):null,sh(4194308,4,Ja.bind(null,y,g),I)},useLayoutEffect:function(g,y){return sh(4194308,4,g,y)},useInsertionEffect:function(g,y){return sh(4,2,g,y)},useMemo:function(g,y){var I=ts();return y=y===void 0?null:y,g=g(),I.memoizedState=[g,y],g},useReducer:function(g,y,I){var B=ts();return y=I!==void 0?I(y):y,B.memoizedState=B.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},B.queue=g,g=g.dispatch=Jl.bind(null,on,g),[B.memoizedState,g]},useRef:function(g){var y=ts();return g={current:g},y.memoizedState=g},useState:Ka,useDebugValue:Kl,useDeferredValue:function(g){return ts().memoizedState=g},useTransition:function(){var g=Ka(!1),y=g[0];return g=ad.bind(null,g[1]),ts().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,I){var B=on,V=ts();if(zi){if(I===void 0)throw Error(t(407));I=I()}else{if(I=y(),Ml===null)throw Error(t(349));Ic&30||sc(B,y,I)}V.memoizedState=I;var K={value:I,getSnapshot:y};return V.queue=K,Fs(Zs.bind(null,B,K,g),[g]),B.flags|=2048,Ou(9,$o.bind(null,B,K,I,y),void 0,null),I},useId:function(){var g=ts(),y=Ml.identifierPrefix;if(zi){var I=Wa,B=rn;I=(B&~(1<<32-wr(B)-1)).toString(32)+I,y=":"+y+"R"+I,I=Dt++,0<I&&(y+="H"+I.toString(32)),y+=":"}else I=xa++,y=":"+y+"r"+I.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},S={readContext:bs,useCallback:ns,useContext:bs,useEffect:Lu,useImperativeHandle:Ca,useInsertionEffect:Cl,useLayoutEffect:eo,useMemo:So,useReducer:qs,useRef:ih,useState:function(){return qs(Ah)},useDebugValue:Kl,useDeferredValue:function(g){var y=Es();return Ih(y,si.memoizedState,g)},useTransition:function(){var g=qs(Ah)[0],y=Es().memoizedState;return[g,y]},useMutableSource:th,useSyncExternalStore:nh,useId:Qa,unstable_isNewReconciler:!1},M={readContext:bs,useCallback:ns,useContext:bs,useEffect:Lu,useImperativeHandle:Ca,useInsertionEffect:Cl,useLayoutEffect:eo,useMemo:So,useReducer:Yl,useRef:ih,useState:function(){return Yl(Ah)},useDebugValue:Kl,useDeferredValue:function(g){var y=Es();return si===null?y.memoizedState=g:Ih(y,si.memoizedState,g)},useTransition:function(){var g=Yl(Ah)[0],y=Es().memoizedState;return[g,y]},useMutableSource:th,useSyncExternalStore:nh,useId:Qa,unstable_isNewReconciler:!1};function L(g,y){try{var I="",B=y;do I+=Xe(B),B=B.return;while(B);var V=I}catch(K){V=`
Error generating stack: `+K.message+`
`+K.stack}return{value:g,source:y,stack:V,digest:null}}function G(g,y,I){return{value:g,source:null,stack:I??null,digest:y??null}}function se(g,y){try{console.error(y.value)}catch(I){setTimeout(function(){throw I})}}var we=typeof WeakMap=="function"?WeakMap:Map;function je(g,y,I){I=oa(-1,I),I.tag=3,I.payload={element:null};var B=y.value;return I.callback=function(){$g||($g=!0,Sg=B),se(g,y)},I}function _t(g,y,I){I=oa(-1,I),I.tag=3;var B=g.type.getDerivedStateFromError;if(typeof B=="function"){var V=y.value;I.payload=function(){return B(V)},I.callback=function(){se(g,y)}}var K=g.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(I.callback=function(){se(g,y),typeof B!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var fe=y.stack;this.componentDidCatch(y.value,{componentStack:fe!==null?fe:""})}),I}function zt(g,y,I){var B=g.pingCache;if(B===null){B=g.pingCache=new we;var V=new Set;B.set(y,V)}else V=B.get(y),V===void 0&&(V=new Set,B.set(y,V));V.has(I)||(V.add(I),g=Pv.bind(null,g,y,I),y.then(g,g))}function Zt(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function hn(g,y,I,B,V){return g.mode&1?(g.flags|=65536,g.lanes=V,g):(g===y?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(y=oa(-1,1),y.tag=2,_i(I,y,1))),I.lanes|=1),g)}var an=D.ReactCurrentOwner,nn=!1;function br(g,y,I,B){y.child=g===null?Au(y,null,I,B):wa(y,g.child,I,B)}function ft(g,y,I,B,V){I=I.render;var K=y.ref;return Va(y,V),B=od(g,y,I,B,K,V),I=eh(),g!==null&&!nn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~V,cd(g,y,V)):(zi&&I&&$u(y),y.flags|=1,br(g,y,B,V),y.child)}function Ee(g,y,I,B,V){if(g===null){var K=I.type;return typeof K=="function"&&!h0(K)&&K.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(y.tag=15,y.type=K,Ce(g,y,K,B,V)):(g=Nm(I.type,null,B,y,y.mode,V),g.ref=y.ref,g.return=y,y.child=g)}if(K=g.child,(g.lanes&V)===0){var fe=K.memoizedProps;if(I=I.compare,I=I!==null?I:mn,I(fe,B)&&g.ref===y.ref)return cd(g,y,V)}return y.flags|=1,g=kh(K,B),g.ref=y.ref,g.return=y,y.child=g}function Ce(g,y,I,B,V){if(g!==null){var K=g.memoizedProps;if(mn(K,B)&&g.ref===y.ref)if(nn=!1,y.pendingProps=B=K,(g.lanes&V)!==0)g.flags&131072&&(nn=!0);else return y.lanes=g.lanes,cd(g,y,V)}return Kt(g,y,I,B,V)}function Ke(g,y,I){var B=y.pendingProps,V=B.children,K=g!==null?g.memoizedState:null;if(B.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Gf,Al),Al|=I;else{if(!(I&1073741824))return g=K!==null?K.baseLanes|I:I,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null,transitions:null},y.updateQueue=null,Ii(Gf,Al),Al|=g,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=K!==null?K.baseLanes:I,Ii(Gf,Al),Al|=B}else K!==null?(B=K.baseLanes|I,y.memoizedState=null):B=I,Ii(Gf,Al),Al|=B;return br(g,y,V,I),y.child}function Ot(g,y){var I=y.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(y.flags|=512,y.flags|=2097152)}function Kt(g,y,I,B,V){var K=yo(I)?oo:No.current;return K=Mc(y,K),Va(y,V),I=od(g,y,I,B,K,V),B=eh(),g!==null&&!nn?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~V,cd(g,y,V)):(zi&&B&&$u(y),y.flags|=1,br(g,y,I,V),y.child)}function ln(g,y,I,B,V){if(yo(I)){var K=!0;Ta(y)}else K=!1;if(Va(y,V),y.stateNode===null)zf(g,y),Xl(y,I,B),rc(y,I,B,V),B=!0;else if(g===null){var fe=y.stateNode,Ue=y.memoizedProps;fe.props=Ue;var Ze=fe.context,Ct=I.contextType;typeof Ct=="object"&&Ct!==null?Ct=bs(Ct):(Ct=yo(I)?oo:No.current,Ct=Mc(y,Ct));var jt=I.getDerivedStateFromProps,en=typeof jt=="function"||typeof fe.getSnapshotBeforeUpdate=="function";en||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ue!==B||Ze!==Ct)&&Cu(y,fe,B,Ct),nc=!1;var Jt=y.memoizedState;fe.state=Jt,yr(y,B,fe,V),Ze=y.memoizedState,Ue!==B||Jt!==Ze||Bo.current||nc?(typeof jt=="function"&&(Js(y,I,jt,B),Ze=y.memoizedState),(Ue=nc||Hi(y,I,Ue,B,Jt,Ze,Ct))?(en||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(y.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=B,y.memoizedState=Ze),fe.props=B,fe.state=Ze,fe.context=Ct,B=Ue):(typeof fe.componentDidMount=="function"&&(y.flags|=4194308),B=!1)}else{fe=y.stateNode,qc(g,y),Ue=y.memoizedProps,Ct=y.type===y.elementType?Ue:jl(y.type,Ue),fe.props=Ct,en=y.pendingProps,Jt=fe.context,Ze=I.contextType,typeof Ze=="object"&&Ze!==null?Ze=bs(Ze):(Ze=yo(I)?oo:No.current,Ze=Mc(y,Ze));var vn=I.getDerivedStateFromProps;(jt=typeof vn=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(Ue!==en||Jt!==Ze)&&Cu(y,fe,B,Ze),nc=!1,Jt=y.memoizedState,fe.state=Jt,yr(y,B,fe,V);var In=y.memoizedState;Ue!==en||Jt!==In||Bo.current||nc?(typeof vn=="function"&&(Js(y,I,vn,B),In=y.memoizedState),(Ct=nc||Hi(y,I,Ct,B,Jt,In,Ze)||!1)?(jt||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(B,In,Ze),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(B,In,Ze)),typeof fe.componentDidUpdate=="function"&&(y.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof fe.componentDidUpdate!="function"||Ue===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ue===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=1024),y.memoizedProps=B,y.memoizedState=In),fe.props=B,fe.state=In,fe.context=Ze,B=Ct):(typeof fe.componentDidUpdate!="function"||Ue===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||Ue===g.memoizedProps&&Jt===g.memoizedState||(y.flags|=1024),B=!1)}return fn(g,y,I,B,K,V)}function fn(g,y,I,B,V,K){Ot(g,y);var fe=(y.flags&128)!==0;if(!B&&!fe)return V&&Cn(y,I,!1),cd(g,y,K);B=y.stateNode,an.current=y;var Ue=fe&&typeof I.getDerivedStateFromError!="function"?null:B.render();return y.flags|=1,g!==null&&fe?(y.child=wa(y,g.child,null,K),y.child=wa(y,null,Ue,K)):br(g,y,Ue,K),y.memoizedState=B.state,V&&Cn(y,I,!0),y.child}function kn(g){var y=g.stateNode;y.pendingContext?Pd(g,y.pendingContext,y.pendingContext!==y.context):y.context&&Pd(g,y.context,!1),ic(g,y.containerInfo)}function Wn(g,y,I,B,V){return Sa(),wl(V),y.flags|=256,br(g,y,I,B),y.child}var fr={dehydrated:null,treeContext:null,retryLane:0};function Ql(g){return{baseLanes:g,cachePool:null,transitions:null}}function Sm(g,y,I){var B=y.pendingProps,V=Sr.current,K=!1,fe=(y.flags&128)!==0,Ue;if((Ue=fe)||(Ue=g!==null&&g.memoizedState===null?!1:(V&2)!==0),Ue?(K=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(V|=1),Ii(Sr,V&1),g===null)return Ys(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?g.data==="$!"?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(fe=B.children,g=B.fallback,K?(B=y.mode,K=y.child,fe={mode:"hidden",children:fe},!(B&1)&&K!==null?(K.childLanes=0,K.pendingProps=fe):K=rf(fe,B,0,null),g=nf(g,B,I,null),K.return=y,g.return=y,K.sibling=g,y.child=K,y.child.memoizedState=Ql(I),y.memoizedState=fr,g):Jp(y,fe));if(V=g.memoizedState,V!==null&&(Ue=V.dehydrated,Ue!==null))return ud(g,y,fe,B,Ue,V,I);if(K){K=B.fallback,fe=y.mode,V=g.child,Ue=V.sibling;var Ze={mode:"hidden",children:B.children};return!(fe&1)&&y.child!==V?(B=y.child,B.childLanes=0,B.pendingProps=Ze,y.deletions=null):(B=kh(V,Ze),B.subtreeFlags=V.subtreeFlags&14680064),Ue!==null?K=kh(Ue,K):(K=nf(K,fe,I,null),K.flags|=2),K.return=y,B.return=y,B.sibling=K,y.child=B,B=K,K=y.child,fe=g.child.memoizedState,fe=fe===null?Ql(I):{baseLanes:fe.baseLanes|I,cachePool:null,transitions:fe.transitions},K.memoizedState=fe,K.childLanes=g.childLanes&~I,y.memoizedState=fr,B}return K=g.child,g=K.sibling,B=kh(K,{mode:"visible",children:B.children}),!(y.mode&1)&&(B.lanes=I),B.return=y,B.sibling=null,g!==null&&(I=y.deletions,I===null?(y.deletions=[g],y.flags|=16):I.push(g)),y.child=B,y.memoizedState=null,B}function Jp(g,y){return y=rf({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function Yn(g,y,I,B){return B!==null&&wl(B),wa(y,g.child,null,I),g=Jp(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function ud(g,y,I,B,V,K,fe){if(I)return y.flags&256?(y.flags&=-257,B=G(Error(t(422))),Yn(g,y,fe,B)):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(K=B.fallback,V=y.mode,B=rf({mode:"visible",children:B.children},V,0,null),K=nf(K,V,fe,null),K.flags|=2,B.return=y,K.return=y,B.sibling=K,y.child=B,y.mode&1&&wa(y,g.child,null,fe),y.child.memoizedState=Ql(fe),y.memoizedState=fr,K);if(!(y.mode&1))return Yn(g,y,fe,null);if(V.data==="$!"){if(B=V.nextSibling&&V.nextSibling.dataset,B)var Ue=B.dgst;return B=Ue,K=Error(t(419)),B=G(K,B,void 0),Yn(g,y,fe,B)}if(Ue=(fe&g.childLanes)!==0,nn||Ue){if(B=Ml,B!==null){switch(fe&-fe){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=V&(B.suspendedLanes|fe)?0:V,V!==0&&V!==K.retryLane&&(K.retryLane=V,ja(g,V),wo(B,g,V,-1))}return Om(),B=G(Error(t(421))),Yn(g,y,fe,B)}return V.data==="$?"?(y.flags|=128,y.child=g.child,y=Dm.bind(null,g),V._reactRetry=y,null):(g=K.treeContext,Ea=qu(V.nextSibling),ls=y,zi=!0,$a=null,g!==null&&(Ns[Po++]=rn,Ns[Po++]=Wa,Ns[Po++]=dn,rn=g.id,Wa=g.overflow,dn=y),y=Jp(y,B.children),y.flags|=4096,y)}function a0(g,y,I){g.lanes|=y;var B=g.alternate;B!==null&&(B.lanes|=y),bo(g.return,y,I)}function Du(g,y,I,B,V){var K=g.memoizedState;K===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:V}:(K.isBackwards=y,K.rendering=null,K.renderingStartTime=0,K.last=B,K.tail=I,K.tailMode=V)}function Ma(g,y,I){var B=y.pendingProps,V=B.revealOrder,K=B.tail;if(br(g,y,B.children,I),B=Sr.current,(B&2)!==0)B=B&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&a0(g,I,y);else if(g.tag===19)a0(g,I,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}B&=1}if(Ii(Sr,B),(y.mode&1)===0)y.memoizedState=null;else switch(V){case"forwards":for(I=y.child,V=null;I!==null;)g=I.alternate,g!==null&&Xi(g)===null&&(V=I),I=I.sibling;I=V,I===null?(V=y.child,y.child=null):(V=I.sibling,I.sibling=null),Du(y,!1,V,I,K);break;case"backwards":for(I=null,V=y.child,y.child=null;V!==null;){if(g=V.alternate,g!==null&&Xi(g)===null){y.child=V;break}g=V.sibling,V.sibling=I,I=V,V=g}Du(y,!0,I,null,K);break;case"together":Du(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function zf(g,y){!(y.mode&1)&&g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2)}function cd(g,y,I){if(g!==null&&(y.dependencies=g.dependencies),Tp|=y.lanes,(I&y.childLanes)===0)return null;if(g!==null&&y.child!==g.child)throw Error(t(153));if(y.child!==null){for(g=y.child,I=kh(g,g.pendingProps),y.child=I,I.return=y;g.sibling!==null;)g=g.sibling,I=I.sibling=kh(g,g.pendingProps),I.return=y;I.sibling=null}return y.child}function ql(g,y,I){switch(y.tag){case 3:kn(y),Sa();break;case 5:Mh(y);break;case 1:yo(y.type)&&Ta(y);break;case 4:ic(y,y.stateNode.containerInfo);break;case 10:var B=y.type._context,V=y.memoizedProps.value;Ii(wu,B._currentValue),B._currentValue=V;break;case 13:if(B=y.memoizedState,B!==null)return B.dehydrated!==null?(Ii(Sr,Sr.current&1),y.flags|=128,null):I&y.child.childLanes?Sm(g,y,I):(Ii(Sr,Sr.current&1),g=cd(g,y,I),g!==null?g.sibling:null);Ii(Sr,Sr.current&1);break;case 19:if(B=(I&y.childLanes)!==0,(g.flags&128)!==0){if(B)return Ma(g,y,I);y.flags|=128}if(V=y.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Ii(Sr,Sr.current),B)break;return null;case 22:case 23:return y.lanes=0,Ke(g,y,I)}return cd(g,y,I)}var tn,o_,a_,yg;tn=function(g,y){for(var I=y.child;I!==null;){if(I.tag===5||I.tag===6)g.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===y)break;for(;I.sibling===null;){if(I.return===null||I.return===y)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},o_=function(){},a_=function(g,y,I,B){var V=g.memoizedProps;if(V!==B){g=y.stateNode,Eo(Qs.current);var K=null;switch(I){case"input":V=rt(g,V),B=rt(g,B),K=[];break;case"select":V=ne({},V,{value:void 0}),B=ne({},B,{value:void 0}),K=[];break;case"textarea":V=ve(g,V),B=ve(g,B),K=[];break;default:typeof V.onClick!="function"&&typeof B.onClick=="function"&&(g.onclick=El)}Pt(I,B);var fe;I=null;for(Ct in V)if(!B.hasOwnProperty(Ct)&&V.hasOwnProperty(Ct)&&V[Ct]!=null)if(Ct==="style"){var Ue=V[Ct];for(fe in Ue)Ue.hasOwnProperty(fe)&&(I||(I={}),I[fe]="")}else Ct!=="dangerouslySetInnerHTML"&&Ct!=="children"&&Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&Ct!=="autoFocus"&&(s.hasOwnProperty(Ct)?K||(K=[]):(K=K||[]).push(Ct,null));for(Ct in B){var Ze=B[Ct];if(Ue=V!=null?V[Ct]:void 0,B.hasOwnProperty(Ct)&&Ze!==Ue&&(Ze!=null||Ue!=null))if(Ct==="style")if(Ue){for(fe in Ue)!Ue.hasOwnProperty(fe)||Ze&&Ze.hasOwnProperty(fe)||(I||(I={}),I[fe]="");for(fe in Ze)Ze.hasOwnProperty(fe)&&Ue[fe]!==Ze[fe]&&(I||(I={}),I[fe]=Ze[fe])}else I||(K||(K=[]),K.push(Ct,I)),I=Ze;else Ct==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,Ue=Ue?Ue.__html:void 0,Ze!=null&&Ue!==Ze&&(K=K||[]).push(Ct,Ze)):Ct==="children"?typeof Ze!="string"&&typeof Ze!="number"||(K=K||[]).push(Ct,""+Ze):Ct!=="suppressContentEditableWarning"&&Ct!=="suppressHydrationWarning"&&(s.hasOwnProperty(Ct)?(Ze!=null&&Ct==="onScroll"&&ri("scroll",g),K||Ue===Ze||(K=[])):(K=K||[]).push(Ct,Ze))}I&&(K=K||[]).push("style",I);var Ct=K;(y.updateQueue=Ct)&&(y.flags|=4)}},yg=function(g,y,I,B){I!==B&&(y.flags|=4)};function Oc(g,y){if(!zi)switch(g.tailMode){case"hidden":y=g.tail;for(var I=null;y!==null;)y.alternate!==null&&(I=y),y=y.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:B.sibling=null}}function $s(g){var y=g.alternate!==null&&g.alternate.child===g.child,I=0,B=0;if(y)for(var V=g.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags&14680064,B|=V.flags&14680064,V.return=g,V=V.sibling;else for(V=g.child;V!==null;)I|=V.lanes|V.childLanes,B|=V.subtreeFlags,B|=V.flags,V.return=g,V=V.sibling;return g.subtreeFlags|=B,g.childLanes=I,y}function Qp(g,y,I){var B=y.pendingProps;switch(sa(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(y),null;case 1:return yo(y.type)&&Bd(),$s(y),null;case 3:return B=y.stateNode,Ru(),xi(Bo),xi(No),aa(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(g===null||g.child===null)&&(Jc(y)?y.flags|=4:g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,$a!==null&&(c_($a),$a=null))),o_(g,y),$s(y),null;case 5:Zc(y);var V=Eo(Xa.current);if(I=y.type,g!==null&&y.stateNode!=null)a_(g,y,I,B,V),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!B){if(y.stateNode===null)throw Error(t(166));return $s(y),null}if(g=Eo(Qs.current),Jc(y)){B=y.stateNode,I=y.type;var K=y.memoizedProps;switch(B[xr]=y,B[Vl]=K,g=(y.mode&1)!==0,I){case"dialog":ri("cancel",B),ri("close",B);break;case"iframe":case"object":case"embed":ri("load",B);break;case"video":case"audio":for(V=0;V<za.length;V++)ri(za[V],B);break;case"source":ri("error",B);break;case"img":case"image":case"link":ri("error",B),ri("load",B);break;case"details":ri("toggle",B);break;case"input":We(B,K),ri("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!K.multiple},ri("invalid",B);break;case"textarea":ee(B,K),ri("invalid",B)}Pt(I,K),V=null;for(var fe in K)if(K.hasOwnProperty(fe)){var Ue=K[fe];fe==="children"?typeof Ue=="string"?B.textContent!==Ue&&(K.suppressHydrationWarning!==!0&&Tl(B.textContent,Ue,g),V=["children",Ue]):typeof Ue=="number"&&B.textContent!==""+Ue&&(K.suppressHydrationWarning!==!0&&Tl(B.textContent,Ue,g),V=["children",""+Ue]):s.hasOwnProperty(fe)&&Ue!=null&&fe==="onScroll"&&ri("scroll",B)}switch(I){case"input":De(B),ht(B,K,!0);break;case"textarea":De(B),ot(B);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(B.onclick=El)}B=V,y.updateQueue=B,B!==null&&(y.flags|=4)}else{fe=V.nodeType===9?V:V.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=dt(I)),g==="http://www.w3.org/1999/xhtml"?I==="script"?(g=fe.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof B.is=="string"?g=fe.createElement(I,{is:B.is}):(g=fe.createElement(I),I==="select"&&(fe=g,B.multiple?fe.multiple=!0:B.size&&(fe.size=B.size))):g=fe.createElementNS(g,I),g[xr]=y,g[Vl]=B,tn(g,y,!1,!1),y.stateNode=g;e:{switch(fe=Fe(I,B),I){case"dialog":ri("cancel",g),ri("close",g),V=B;break;case"iframe":case"object":case"embed":ri("load",g),V=B;break;case"video":case"audio":for(V=0;V<za.length;V++)ri(za[V],g);V=B;break;case"source":ri("error",g),V=B;break;case"img":case"image":case"link":ri("error",g),ri("load",g),V=B;break;case"details":ri("toggle",g),V=B;break;case"input":We(g,B),V=rt(g,B),ri("invalid",g);break;case"option":V=B;break;case"select":g._wrapperState={wasMultiple:!!B.multiple},V=ne({},B,{value:void 0}),ri("invalid",g);break;case"textarea":ee(g,B),V=ve(g,B),ri("invalid",g);break;default:V=B}Pt(I,V),Ue=V;for(K in Ue)if(Ue.hasOwnProperty(K)){var Ze=Ue[K];K==="style"?$e(g,Ze):K==="dangerouslySetInnerHTML"?(Ze=Ze?Ze.__html:void 0,Ze!=null&&Ge(g,Ze)):K==="children"?typeof Ze=="string"?(I!=="textarea"||Ze!=="")&&Me(g,Ze):typeof Ze=="number"&&Me(g,""+Ze):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(s.hasOwnProperty(K)?Ze!=null&&K==="onScroll"&&ri("scroll",g):Ze!=null&&N(g,K,Ze,fe))}switch(I){case"input":De(g),ht(g,B,!1);break;case"textarea":De(g),ot(g);break;case"option":B.value!=null&&g.setAttribute("value",""+et(B.value));break;case"select":g.multiple=!!B.multiple,K=B.value,K!=null?mt(g,!!B.multiple,K,!1):B.defaultValue!=null&&mt(g,!!B.multiple,B.defaultValue,!0);break;default:typeof V.onClick=="function"&&(g.onclick=El)}switch(I){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return $s(y),null;case 6:if(g&&y.stateNode!=null)yg(g,y,g.memoizedProps,B);else{if(typeof B!="string"&&y.stateNode===null)throw Error(t(166));if(I=Eo(Xa.current),Eo(Qs.current),Jc(y)){if(B=y.stateNode,I=y.memoizedProps,B[xr]=y,(K=B.nodeValue!==I)&&(g=ls,g!==null))switch(g.tag){case 3:Tl(B.nodeValue,I,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&Tl(B.nodeValue,I,(g.mode&1)!==0)}K&&(y.flags|=4)}else B=(I.nodeType===9?I:I.ownerDocument).createTextNode(B),B[xr]=y,y.stateNode=B}return $s(y),null;case 13:if(xi(Sr),B=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(zi&&Ea!==null&&y.mode&1&&!(y.flags&128))rd(),Sa(),y.flags|=98560,K=!1;else if(K=Jc(y),B!==null&&B.dehydrated!==null){if(g===null){if(!K)throw Error(t(318));if(K=y.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(t(317));K[xr]=y}else Sa(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;$s(y),K=!1}else $a!==null&&(c_($a),$a=null),K=!0;if(!K)return y.flags&65536?y:null}return y.flags&128?(y.lanes=I,y):(B=B!==null,B!==(g!==null&&g.memoizedState!==null)&&B&&(y.child.flags|=8192,y.mode&1&&(g===null||Sr.current&1?qa===0&&(qa=3):Om())),y.updateQueue!==null&&(y.flags|=4),$s(y),null);case 4:return Ru(),o_(g,y),g===null&&Ku(y.stateNode.containerInfo),$s(y),null;case 10:return tc(y.type._context),$s(y),null;case 17:return yo(y.type)&&Bd(),$s(y),null;case 19:if(xi(Sr),K=y.memoizedState,K===null)return $s(y),null;if(B=(y.flags&128)!==0,fe=K.rendering,fe===null)if(B)Oc(K,!1);else{if(qa!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if(fe=Xi(g),fe!==null){for(y.flags|=128,Oc(K,!1),B=fe.updateQueue,B!==null&&(y.updateQueue=B,y.flags|=4),y.subtreeFlags=0,B=I,I=y.child;I!==null;)K=I,g=B,K.flags&=14680066,fe=K.alternate,fe===null?(K.childLanes=0,K.lanes=g,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=fe.childLanes,K.lanes=fe.lanes,K.child=fe.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=fe.memoizedProps,K.memoizedState=fe.memoizedState,K.updateQueue=fe.updateQueue,K.type=fe.type,g=fe.dependencies,K.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return Ii(Sr,Sr.current&1|2),y.child}g=g.sibling}K.tail!==null&&Yt()>Dc&&(y.flags|=128,B=!0,Oc(K,!1),y.lanes=4194304)}else{if(!B)if(g=Xi(fe),g!==null){if(y.flags|=128,B=!0,I=g.updateQueue,I!==null&&(y.updateQueue=I,y.flags|=4),Oc(K,!0),K.tail===null&&K.tailMode==="hidden"&&!fe.alternate&&!zi)return $s(y),null}else 2*Yt()-K.renderingStartTime>Dc&&I!==1073741824&&(y.flags|=128,B=!0,Oc(K,!1),y.lanes=4194304);K.isBackwards?(fe.sibling=y.child,y.child=fe):(I=K.last,I!==null?I.sibling=fe:y.child=fe,K.last=fe)}return K.tail!==null?(y=K.tail,K.rendering=y,K.tail=y.sibling,K.renderingStartTime=Yt(),y.sibling=null,I=Sr.current,Ii(Sr,B?I&1|2:I&1),y):($s(y),null);case 22:case 23:return d_(),B=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==B&&(y.flags|=8192),B&&y.mode&1?Al&1073741824&&($s(y),y.subtreeFlags&6&&(y.flags|=8192)):$s(y),null;case 24:return null;case 25:return null}throw Error(t(156,y.tag))}function zd(g,y){switch(sa(y),y.tag){case 1:return yo(y.type)&&Bd(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return Ru(),xi(Bo),xi(No),aa(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return Zc(y),null;case 13:if(xi(Sr),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(t(340));Sa()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return xi(Sr),null;case 4:return Ru(),null;case 10:return tc(y.type._context),null;case 22:case 23:return d_(),null;case 24:return null;default:return null}}var oh=!1,ki=!1,Aa=typeof WeakSet=="function"?WeakSet:Set,Be=null;function vi(g,y){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){xo(g,y,B)}else I.current=null}function Ss(g,y,I){try{I()}catch(B){xo(g,y,B)}}var kv=!1;function hd(g,y){if(Sc=Os,g=An(),Ir(g)){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else e:{I=(I=g.ownerDocument)&&I.defaultView||window;var B=I.getSelection&&I.getSelection();if(B&&B.rangeCount!==0){I=B.anchorNode;var V=B.anchorOffset,K=B.focusNode;B=B.focusOffset;try{I.nodeType,K.nodeType}catch{I=null;break e}var fe=0,Ue=-1,Ze=-1,Ct=0,jt=0,en=g,Jt=null;t:for(;;){for(var vn;en!==I||V!==0&&en.nodeType!==3||(Ue=fe+V),en!==K||B!==0&&en.nodeType!==3||(Ze=fe+B),en.nodeType===3&&(fe+=en.nodeValue.length),(vn=en.firstChild)!==null;)Jt=en,en=vn;for(;;){if(en===g)break t;if(Jt===I&&++Ct===V&&(Ue=fe),Jt===K&&++jt===B&&(Ze=fe),(vn=en.nextSibling)!==null)break;en=Jt,Jt=en.parentNode}en=vn}I=Ue===-1||Ze===-1?null:{start:Ue,end:Ze}}else I=null}I=I||{start:0,end:0}}else I=null;for(xh={focusedElem:g,selectionRange:I},Os=!1,Be=y;Be!==null;)if(y=Be,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,Be=g;else for(;Be!==null;){y=Be;try{var In=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(In!==null){var Ln=In.memoizedProps,to=In.memoizedState,vt=y.stateNode,it=vt.getSnapshotBeforeUpdate(y.elementType===y.type?Ln:jl(y.type,Ln),to);vt.__reactInternalSnapshotBeforeUpdate=it}break;case 3:var yt=y.stateNode.containerInfo;yt.nodeType===1?yt.textContent="":yt.nodeType===9&&yt.documentElement&&yt.removeChild(yt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(sn){xo(y,y.return,sn)}if(g=y.sibling,g!==null){g.return=y.return,Be=g;break}Be=y.return}return In=kv,kv=!1,In}function wm(g,y,I){var B=y.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var V=B=B.next;do{if((V.tag&g)===g){var K=V.destroy;V.destroy=void 0,K!==void 0&&Ss(y,I,K)}V=V.next}while(V!==B)}}function bg(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var I=y=y.next;do{if((I.tag&g)===g){var B=I.create;I.destroy=B()}I=I.next}while(I!==y)}}function Ov(g){var y=g.ref;if(y!==null){var I=g.stateNode;switch(g.tag){case 5:g=I;break;default:g=I}typeof y=="function"?y(g):y.current=g}}function Hf(g){var y=g.alternate;y!==null&&(g.alternate=null,Hf(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&(delete y[xr],delete y[Vl],delete y[ia],delete y[ye],delete y[Xs])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function Fo(g){return g.tag===5||g.tag===3||g.tag===4}function l0(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||Fo(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Tg(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.nodeType===8?I.parentNode.insertBefore(g,y):I.insertBefore(g,y):(I.nodeType===8?(y=I.parentNode,y.insertBefore(g,I)):(y=I,y.appendChild(g)),I=I._reactRootContainer,I!=null||y.onclick!==null||(y.onclick=El));else if(B!==4&&(g=g.child,g!==null))for(Tg(g,y,I),g=g.sibling;g!==null;)Tg(g,y,I),g=g.sibling}function xm(g,y,I){var B=g.tag;if(B===5||B===6)g=g.stateNode,y?I.insertBefore(g,y):I.appendChild(g);else if(B!==4&&(g=g.child,g!==null))for(xm(g,y,I),g=g.sibling;g!==null;)xm(g,y,I),g=g.sibling}var Ia=null,Nu=!1;function vp(g,y,I){for(I=I.child;I!==null;)Eg(g,y,I),I=I.sibling}function Eg(g,y,I){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(dr,I)}catch{}switch(I.tag){case 5:ki||vi(I,y);case 6:var B=Ia,V=Nu;Ia=null,vp(g,y,I),Ia=B,Nu=V,Ia!==null&&(Nu?(g=Ia,I=I.stateNode,g.nodeType===8?g.parentNode.removeChild(I):g.removeChild(I)):Ia.removeChild(I.stateNode));break;case 18:Ia!==null&&(Nu?(g=Ia,I=I.stateNode,g.nodeType===8?xc(g.parentNode,I):g.nodeType===1&&xc(g,I),pr(g)):xc(Ia,I.stateNode));break;case 4:B=Ia,V=Nu,Ia=I.stateNode.containerInfo,Nu=!0,vp(g,y,I),Ia=B,Nu=V;break;case 0:case 11:case 14:case 15:if(!ki&&(B=I.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){V=B=B.next;do{var K=V,fe=K.destroy;K=K.tag,fe!==void 0&&(K&2||K&4)&&Ss(I,y,fe),V=V.next}while(V!==B)}vp(g,y,I);break;case 1:if(!ki&&(vi(I,y),B=I.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=I.memoizedProps,B.state=I.memoizedState,B.componentWillUnmount()}catch(Ue){xo(I,y,Ue)}vp(g,y,I);break;case 21:vp(g,y,I);break;case 22:I.mode&1?(ki=(B=ki)||I.memoizedState!==null,vp(g,y,I),ki=B):vp(g,y,I);break;default:vp(g,y,I)}}function qp(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new Aa),y.forEach(function(B){var V=mE.bind(null,g,B);I.has(B)||(I.add(B),B.then(V,V))})}}function ah(g,y){var I=y.deletions;if(I!==null)for(var B=0;B<I.length;B++){var V=I[B];try{var K=g,fe=y,Ue=fe;e:for(;Ue!==null;){switch(Ue.tag){case 5:Ia=Ue.stateNode,Nu=!1;break e;case 3:Ia=Ue.stateNode.containerInfo,Nu=!0;break e;case 4:Ia=Ue.stateNode.containerInfo,Nu=!0;break e}Ue=Ue.return}if(Ia===null)throw Error(t(160));Eg(K,fe,V),Ia=null,Nu=!1;var Ze=V.alternate;Ze!==null&&(Ze.return=null),V.return=null}catch(Ct){xo(V,y,Ct)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)l_(y,g),y=y.sibling}function l_(g,y){var I=g.alternate,B=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(ah(y,g),Kn(g),B&4){try{wm(3,g,g.return),bg(3,g)}catch(Ln){xo(g,g.return,Ln)}try{wm(5,g,g.return)}catch(Ln){xo(g,g.return,Ln)}}break;case 1:ah(y,g),Kn(g),B&512&&I!==null&&vi(I,I.return);break;case 5:if(ah(y,g),Kn(g),B&512&&I!==null&&vi(I,I.return),g.flags&32){var V=g.stateNode;try{Me(V,"")}catch(Ln){xo(g,g.return,Ln)}}if(B&4&&(V=g.stateNode,V!=null)){var K=g.memoizedProps,fe=I!==null?I.memoizedProps:K,Ue=g.type,Ze=g.updateQueue;if(g.updateQueue=null,Ze!==null)try{Ue==="input"&&K.type==="radio"&&K.name!=null&&wt(V,K),Fe(Ue,fe);var Ct=Fe(Ue,K);for(fe=0;fe<Ze.length;fe+=2){var jt=Ze[fe],en=Ze[fe+1];jt==="style"?$e(V,en):jt==="dangerouslySetInnerHTML"?Ge(V,en):jt==="children"?Me(V,en):N(V,jt,en,Ct)}switch(Ue){case"input":xt(V,K);break;case"textarea":ke(V,K);break;case"select":var Jt=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!K.multiple;var vn=K.value;vn!=null?mt(V,!!K.multiple,vn,!1):Jt!==!!K.multiple&&(K.defaultValue!=null?mt(V,!!K.multiple,K.defaultValue,!0):mt(V,!!K.multiple,K.multiple?[]:"",!1))}V[Vl]=K}catch(Ln){xo(g,g.return,Ln)}}break;case 6:if(ah(y,g),Kn(g),B&4){if(g.stateNode===null)throw Error(t(162));V=g.stateNode,K=g.memoizedProps;try{V.nodeValue=K}catch(Ln){xo(g,g.return,Ln)}}break;case 3:if(ah(y,g),Kn(g),B&4&&I!==null&&I.memoizedState.isDehydrated)try{pr(y.containerInfo)}catch(Ln){xo(g,g.return,Ln)}break;case 4:ah(y,g),Kn(g);break;case 13:ah(y,g),Kn(g),V=g.child,V.flags&8192&&(K=V.memoizedState!==null,V.stateNode.isHidden=K,!K||V.alternate!==null&&V.alternate.memoizedState!==null||(Za=Yt())),B&4&&qp(g);break;case 22:if(jt=I!==null&&I.memoizedState!==null,g.mode&1?(ki=(Ct=ki)||jt,ah(y,g),ki=Ct):ah(y,g),Kn(g),B&8192){if(Ct=g.memoizedState!==null,(g.stateNode.isHidden=Ct)&&!jt&&(g.mode&1)!==0)for(Be=g,jt=g.child;jt!==null;){for(en=Be=jt;Be!==null;){switch(Jt=Be,vn=Jt.child,Jt.tag){case 0:case 11:case 14:case 15:wm(4,Jt,Jt.return);break;case 1:vi(Jt,Jt.return);var In=Jt.stateNode;if(typeof In.componentWillUnmount=="function"){B=Jt,I=Jt.return;try{y=B,In.props=y.memoizedProps,In.state=y.memoizedState,In.componentWillUnmount()}catch(Ln){xo(B,I,Ln)}}break;case 5:vi(Jt,Jt.return);break;case 22:if(Jt.memoizedState!==null){Cm(en);continue}}vn!==null?(vn.return=Jt,Be=vn):Cm(en)}jt=jt.sibling}e:for(jt=null,en=g;;){if(en.tag===5){if(jt===null){jt=en;try{V=en.stateNode,Ct?(K=V.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(Ue=en.stateNode,Ze=en.memoizedProps.style,fe=Ze!=null&&Ze.hasOwnProperty("display")?Ze.display:null,Ue.style.display=ae("display",fe))}catch(Ln){xo(g,g.return,Ln)}}}else if(en.tag===6){if(jt===null)try{en.stateNode.nodeValue=Ct?"":en.memoizedProps}catch(Ln){xo(g,g.return,Ln)}}else if((en.tag!==22&&en.tag!==23||en.memoizedState===null||en===g)&&en.child!==null){en.child.return=en,en=en.child;continue}if(en===g)break e;for(;en.sibling===null;){if(en.return===null||en.return===g)break e;jt===en&&(jt=null),en=en.return}jt===en&&(jt=null),en.sibling.return=en.return,en=en.sibling}}break;case 19:ah(y,g),Kn(g),B&4&&qp(g);break;case 21:break;default:ah(y,g),Kn(g)}}function Kn(g){var y=g.flags;if(y&2){try{e:{for(var I=g.return;I!==null;){if(Fo(I)){var B=I;break e}I=I.return}throw Error(t(160))}switch(B.tag){case 5:var V=B.stateNode;B.flags&32&&(Me(V,""),B.flags&=-33);var K=l0(g);xm(g,K,V);break;case 3:case 4:var fe=B.stateNode.containerInfo,Ue=l0(g);Tg(g,Ue,fe);break;default:throw Error(t(161))}}catch(Ze){xo(g,g.return,Ze)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function Lv(g,y,I){Be=g,Zl(g)}function Zl(g,y,I){for(var B=(g.mode&1)!==0;Be!==null;){var V=Be,K=V.child;if(V.tag===22&&B){var fe=V.memoizedState!==null||oh;if(!fe){var Ue=V.alternate,Ze=Ue!==null&&Ue.memoizedState!==null||ki;Ue=oh;var Ct=ki;if(oh=fe,(ki=Ze)&&!Ct)for(Be=V;Be!==null;)fe=Be,Ze=fe.child,fe.tag===22&&fe.memoizedState!==null?yp(V):Ze!==null?(Ze.return=fe,Be=Ze):yp(V);for(;K!==null;)Be=K,Zl(K),K=K.sibling;Be=V,oh=Ue,ki=Ct}oc(g)}else V.subtreeFlags&8772&&K!==null?(K.return=V,Be=K):oc(g)}}function oc(g){for(;Be!==null;){var y=Be;if(y.flags&8772){var I=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:ki||bg(5,y);break;case 1:var B=y.stateNode;if(y.flags&4&&!ki)if(I===null)B.componentDidMount();else{var V=y.elementType===y.type?I.memoizedProps:jl(y.type,I.memoizedProps);B.componentDidUpdate(V,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var K=y.updateQueue;K!==null&&Or(y,K,B);break;case 3:var fe=y.updateQueue;if(fe!==null){if(I=null,y.child!==null)switch(y.child.tag){case 5:I=y.child.stateNode;break;case 1:I=y.child.stateNode}Or(y,fe,I)}break;case 5:var Ue=y.stateNode;if(I===null&&y.flags&4){I=Ue;var Ze=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":Ze.autoFocus&&I.focus();break;case"img":Ze.src&&(I.src=Ze.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Ct=y.alternate;if(Ct!==null){var jt=Ct.memoizedState;if(jt!==null){var en=jt.dehydrated;en!==null&&pr(en)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||y.flags&512&&Ov(y)}catch(Jt){xo(y,y.return,Jt)}}if(y===g){Be=null;break}if(I=y.sibling,I!==null){I.return=y.return,Be=I;break}Be=y.return}}function Cm(g){for(;Be!==null;){var y=Be;if(y===g){Be=null;break}var I=y.sibling;if(I!==null){I.return=y.return,Be=I;break}Be=y.return}}function yp(g){for(;Be!==null;){var y=Be;try{switch(y.tag){case 0:case 11:case 15:var I=y.return;try{bg(4,y)}catch(Ze){xo(y,I,Ze)}break;case 1:var B=y.stateNode;if(typeof B.componentDidMount=="function"){var V=y.return;try{B.componentDidMount()}catch(Ze){xo(y,V,Ze)}}var K=y.return;try{Ov(y)}catch(Ze){xo(y,K,Ze)}break;case 5:var fe=y.return;try{Ov(y)}catch(Ze){xo(y,fe,Ze)}}}catch(Ze){xo(y,y.return,Ze)}if(y===g){Be=null;break}var Ue=y.sibling;if(Ue!==null){Ue.return=y.return,Be=Ue;break}Be=y.return}}var Mm=Math.ceil,eu=D.ReactCurrentDispatcher,u_=D.ReactCurrentOwner,co=D.ReactCurrentBatchConfig,Ci=0,Ml=null,Ra=null,tu=0,Al=0,Gf=gi(0),qa=0,bp=null,Tp=0,Zp=0,u0=0,Am=null,Lc=null,Za=0,Dc=1/0,Hd=null,$g=!1,Sg=null,Us=null,Im=!1,Il=null,el=0,Wf=0,c0=null,Ep=-1,wg=0;function ac(){return Ci&6?Yt():Ep!==-1?Ep:Ep=Yt()}function Gd(g){return g.mode&1?Ci&2&&tu!==0?tu&-tu:Yp.transition!==null?(wg===0&&(wg=ko()),wg):(g=tr,g!==0||(g=window.event,g=g===void 0?16:pu(g.type)),g):1}function wo(g,y,I,B){if(50<Wf)throw Wf=0,c0=null,Error(t(185));Pl(g,I,B),(!(Ci&2)||g!==Ml)&&(g===Ml&&(!(Ci&2)&&(Zp|=I),qa===4&&ef(g,tu)),ka(g,B),I===1&&Ci===0&&!(y.mode&1)&&(Dc=Yt()+500,ys&&cn()))}function ka(g,y){var I=g.callbackNode;Vu(g,y);var B=ul(g,g===Ml?tu:0);if(B===0)I!==null&&jo(I),g.callbackNode=null,g.callbackPriority=0;else if(y=B&-B,g.callbackPriority!==y){if(I!=null&&jo(I),y===1)g.tag===0?Sl(Vf.bind(null,g)):$l(Vf.bind(null,g)),nd(function(){!(Ci&6)&&cn()}),I=null;else{switch(Pi(B)){case 1:I=fa;break;case 4:I=Xo;break;case 16:I=ps;break;case 536870912:I=ci;break;default:I=ps}I=Nc(I,Dv.bind(null,g))}g.callbackPriority=y,g.callbackNode=I}}function Dv(g,y){if(Ep=-1,wg=0,(Ci&6)!==0)throw Error(t(327));var I=g.callbackNode;if(Rh()&&g.callbackNode!==I)return null;var B=ul(g,g===Ml?tu:0);if(B===0)return null;if(B&30||B&g.expiredLanes||y)y=$p(g,B);else{y=B;var V=Ci;Ci|=2;var K=Nv();(Ml!==g||tu!==y)&&(Hd=null,Dc=Yt()+500,km(g,y));do try{fE();break}catch(Ue){p_(g,Ue)}while(!0);xu(),eu.current=K,Ci=V,Ra!==null?y=0:(Ml=null,tu=0,y=qa)}if(y!==0){if(y===2&&(V=Rs(g),V!==0&&(B=V,y=Rm(g,V))),y===1)throw I=bp,km(g,0),ef(g,B),ka(g,Yt()),I;if(y===6)ef(g,B);else{if(V=g.current.alternate,(B&30)===0&&!wb(V)&&(y=$p(g,B),y===2&&(K=Rs(g),K!==0&&(B=K,y=Rm(g,K))),y===1))throw I=bp,km(g,0),ef(g,B),ka(g,Yt()),I;switch(g.finishedWork=V,g.finishedLanes=B,y){case 0:case 1:throw Error(t(345));case 2:tf(g,Lc,Hd);break;case 3:if(ef(g,B),(B&130023424)===B&&(y=Za+500-Yt(),10<y)){if(ul(g,0)!==0)break;if(V=g.suspendedLanes,(V&B)!==B){ac(),g.pingedLanes|=g.suspendedLanes&V;break}g.timeoutHandle=Ju(tf.bind(null,g,Lc,Hd),y);break}tf(g,Lc,Hd);break;case 4:if(ef(g,B),(B&4194240)===B)break;for(y=g.eventTimes,V=-1;0<B;){var fe=31-wr(B);K=1<<fe,fe=y[fe],fe>V&&(V=fe),B&=~K}if(B=V,B=Yt()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Mm(B/1960))-B,10<B){g.timeoutHandle=Ju(tf.bind(null,g,Lc,Hd),B);break}tf(g,Lc,Hd);break;case 5:tf(g,Lc,Hd);break;default:throw Error(t(329))}}}return ka(g,Yt()),g.callbackNode===I?Dv.bind(null,g):null}function Rm(g,y){var I=Am;return g.current.memoizedState.isDehydrated&&(km(g,y).flags|=256),g=$p(g,y),g!==2&&(y=Lc,Lc=I,y!==null&&c_(y)),g}function c_(g){Lc===null?Lc=g:Lc.push.apply(Lc,g)}function wb(g){for(var y=g;;){if(y.flags&16384){var I=y.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var V=I[B],K=V.getSnapshot;V=V.value;try{if(!bt(K(),V))return!1}catch{return!1}}}if(I=y.child,y.subtreeFlags&16384&&I!==null)I.return=y,y=I;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function ef(g,y){for(y&=~u0,y&=~Zp,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var I=31-wr(y),B=1<<I;g[I]=-1,y&=~B}}function Vf(g){if(Ci&6)throw Error(t(327));Rh();var y=ul(g,0);if(!(y&1))return ka(g,Yt()),null;var I=$p(g,y);if(g.tag!==0&&I===2){var B=Rs(g);B!==0&&(y=B,I=Rm(g,B))}if(I===1)throw I=bp,km(g,0),ef(g,y),ka(g,Yt()),I;if(I===6)throw Error(t(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,tf(g,Lc,Hd),ka(g,Yt()),null}function h_(g,y){var I=Ci;Ci|=1;try{return g(y)}finally{Ci=I,Ci===0&&(Dc=Yt()+500,ys&&cn())}}function jf(g){Il!==null&&Il.tag===0&&!(Ci&6)&&Rh();var y=Ci;Ci|=1;var I=co.transition,B=tr;try{if(co.transition=null,tr=1,g)return g()}finally{tr=B,co.transition=I,Ci=y,!(Ci&6)&&cn()}}function d_(){Al=Gf.current,xi(Gf)}function km(g,y){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==-1&&(g.timeoutHandle=-1,Ha(I)),Ra!==null)for(I=Ra.return;I!==null;){var B=I;switch(sa(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Bd();break;case 3:Ru(),xi(Bo),xi(No),aa();break;case 5:Zc(B);break;case 4:Ru();break;case 13:xi(Sr);break;case 19:xi(Sr);break;case 10:tc(B.type._context);break;case 22:case 23:d_()}I=I.return}if(Ml=g,Ra=g=kh(g.current,null),tu=Al=y,qa=0,bp=null,u0=Zp=Tp=0,Lc=Am=null,ao!==null){for(y=0;y<ao.length;y++)if(I=ao[y],B=I.interleaved,B!==null){I.interleaved=null;var V=B.next,K=I.pending;if(K!==null){var fe=K.next;K.next=V,B.next=fe}I.pending=B}ao=null}return g}function p_(g,y){do{var I=Ra;try{if(xu(),Ps.current=c,xl){for(var B=on.memoizedState;B!==null;){var V=B.queue;V!==null&&(V.pending=null),B=B.next}xl=!1}if(Ic=0,es=si=on=null,Ya=!1,Dt=0,u_.current=null,I===null||I.return===null){qa=1,bp=y,Ra=null;break}e:{var K=g,fe=I.return,Ue=I,Ze=y;if(y=tu,Ue.flags|=32768,Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Ct=Ze,jt=Ue,en=jt.tag;if(!(jt.mode&1)&&(en===0||en===11||en===15)){var Jt=jt.alternate;Jt?(jt.updateQueue=Jt.updateQueue,jt.memoizedState=Jt.memoizedState,jt.lanes=Jt.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var vn=Zt(fe);if(vn!==null){vn.flags&=-257,hn(vn,fe,Ue,K,y),vn.mode&1&&zt(K,Ct,y),y=vn,Ze=Ct;var In=y.updateQueue;if(In===null){var Ln=new Set;Ln.add(Ze),y.updateQueue=Ln}else In.add(Ze);break e}else{if(!(y&1)){zt(K,Ct,y),Om();break e}Ze=Error(t(426))}}else if(zi&&Ue.mode&1){var to=Zt(fe);if(to!==null){!(to.flags&65536)&&(to.flags|=256),hn(to,fe,Ue,K,y),wl(L(Ze,Ue));break e}}K=Ze=L(Ze,Ue),qa!==4&&(qa=2),Am===null?Am=[K]:Am.push(K),K=fe;do{switch(K.tag){case 3:K.flags|=65536,y&=-y,K.lanes|=y;var vt=je(K,Ze,y);On(K,vt);break e;case 1:Ue=Ze;var it=K.type,yt=K.stateNode;if(!(K.flags&128)&&(typeof it.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(Us===null||!Us.has(yt)))){K.flags|=65536,y&=-y,K.lanes|=y;var sn=_t(K,Ue,y);On(K,sn);break e}}K=K.return}while(K!==null)}m_(I)}catch(Hn){y=Hn,Ra===I&&I!==null&&(Ra=I=I.return);continue}break}while(!0)}function Nv(){var g=eu.current;return eu.current=c,g===null?c:g}function Om(){(qa===0||qa===3||qa===2)&&(qa=4),Ml===null||!(Tp&268435455)&&!(Zp&268435455)||ef(Ml,tu)}function $p(g,y){var I=Ci;Ci|=2;var B=Nv();(Ml!==g||tu!==y)&&(Hd=null,km(g,y));do try{Bv();break}catch(V){p_(g,V)}while(!0);if(xu(),Ci=I,eu.current=B,Ra!==null)throw Error(t(261));return Ml=null,tu=0,qa}function Bv(){for(;Ra!==null;)f_(Ra)}function fE(){for(;Ra!==null&&!Ro();)f_(Ra)}function f_(g){var y=xb(g.alternate,g,Al);g.memoizedProps=g.pendingProps,y===null?m_(g):Ra=y,u_.current=null}function m_(g){var y=g;do{var I=y.alternate;if(g=y.return,(y.flags&32768)===0){if(I=Qp(I,y,Al),I!==null){Ra=I;return}}else{if(I=zd(I,y),I!==null){I.flags&=32767,Ra=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{qa=6,Ra=null;return}}if(y=y.sibling,y!==null){Ra=y;return}Ra=y=g}while(y!==null);qa===0&&(qa=5)}function tf(g,y,I){var B=tr,V=co.transition;try{co.transition=null,tr=1,En(g,y,I,B)}finally{co.transition=V,tr=B}return null}function En(g,y,I,B){do Rh();while(Il!==null);if(Ci&6)throw Error(t(327));I=g.finishedWork;var V=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(t(177));g.callbackNode=null,g.callbackPriority=0;var K=I.lanes|I.childLanes;if(mh(g,K),g===Ml&&(Ra=Ml=null,tu=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Im||(Im=!0,Nc(ps,function(){return Rh(),null})),K=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||K){K=co.transition,co.transition=null;var fe=tr;tr=1;var Ue=Ci;Ci|=4,u_.current=null,hd(g,I),l_(I,g),Ls(xh),Os=!!Sc,xh=Sc=null,g.current=I,Lv(I),ll(),Ci=Ue,tr=fe,co.transition=K}else g.current=I;if(Im&&(Im=!1,Il=g,el=V),K=g.pendingLanes,K===0&&(Us=null),ar(I.stateNode),ka(g,Yt()),y!==null)for(B=g.onRecoverableError,I=0;I<y.length;I++)V=y[I],B(V.value,{componentStack:V.stack,digest:V.digest});if($g)throw $g=!1,g=Sg,Sg=null,g;return el&1&&g.tag!==0&&Rh(),K=g.pendingLanes,K&1?g===c0?Wf++:(Wf=0,c0=g):Wf=0,cn(),null}function Rh(){if(Il!==null){var g=Pi(el),y=co.transition,I=tr;try{if(co.transition=null,tr=16>g?16:g,Il===null)var B=!1;else{if(g=Il,Il=null,el=0,(Ci&6)!==0)throw Error(t(331));var V=Ci;for(Ci|=4,Be=g.current;Be!==null;){var K=Be,fe=K.child;if(Be.flags&16){var Ue=K.deletions;if(Ue!==null){for(var Ze=0;Ze<Ue.length;Ze++){var Ct=Ue[Ze];for(Be=Ct;Be!==null;){var jt=Be;switch(jt.tag){case 0:case 11:case 15:wm(8,jt,K)}var en=jt.child;if(en!==null)en.return=jt,Be=en;else for(;Be!==null;){jt=Be;var Jt=jt.sibling,vn=jt.return;if(Hf(jt),jt===Ct){Be=null;break}if(Jt!==null){Jt.return=vn,Be=Jt;break}Be=vn}}}var In=K.alternate;if(In!==null){var Ln=In.child;if(Ln!==null){In.child=null;do{var to=Ln.sibling;Ln.sibling=null,Ln=to}while(Ln!==null)}}Be=K}}if(K.subtreeFlags&2064&&fe!==null)fe.return=K,Be=fe;else e:for(;Be!==null;){if(K=Be,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:wm(9,K,K.return)}var vt=K.sibling;if(vt!==null){vt.return=K.return,Be=vt;break e}Be=K.return}}var it=g.current;for(Be=it;Be!==null;){fe=Be;var yt=fe.child;if(fe.subtreeFlags&2064&&yt!==null)yt.return=fe,Be=yt;else e:for(fe=it;Be!==null;){if(Ue=Be,(Ue.flags&2048)!==0)try{switch(Ue.tag){case 0:case 11:case 15:bg(9,Ue)}}catch(Hn){xo(Ue,Ue.return,Hn)}if(Ue===fe){Be=null;break e}var sn=Ue.sibling;if(sn!==null){sn.return=Ue.return,Be=sn;break e}Be=Ue.return}}if(Ci=V,cn(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(dr,g)}catch{}B=!0}return B}finally{tr=I,co.transition=y}}return!1}function Lm(g,y,I){y=L(I,y),y=je(g,y,1),g=_i(g,y,1),y=ac(),g!==null&&(Pl(g,1,y),ka(g,y))}function xo(g,y,I){if(g.tag===3)Lm(g,g,I);else for(;y!==null;){if(y.tag===3){Lm(y,g,I);break}else if(y.tag===1){var B=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Us===null||!Us.has(B))){g=L(I,g),g=_t(y,g,1),y=_i(y,g,1),g=ac(),y!==null&&(Pl(y,1,g),ka(y,g));break}}y=y.return}}function Pv(g,y,I){var B=g.pingCache;B!==null&&B.delete(y),y=ac(),g.pingedLanes|=g.suspendedLanes&I,Ml===g&&(tu&I)===I&&(qa===4||qa===3&&(tu&130023424)===tu&&500>Yt()-Za?km(g,0):u0|=I),ka(g,y)}function g_(g,y){y===0&&(g.mode&1?(y=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):y=1);var I=ac();g=ja(g,y),g!==null&&(Pl(g,y,I),ka(g,I))}function Dm(g){var y=g.memoizedState,I=0;y!==null&&(I=y.retryLane),g_(g,I)}function mE(g,y){var I=0;switch(g.tag){case 13:var B=g.stateNode,V=g.memoizedState;V!==null&&(I=V.retryLane);break;case 19:B=g.stateNode;break;default:throw Error(t(314))}B!==null&&B.delete(y),g_(g,I)}var xb;xb=function(g,y,I){if(g!==null)if(g.memoizedProps!==y.pendingProps||Bo.current)nn=!0;else{if(!(g.lanes&I)&&!(y.flags&128))return nn=!1,ql(g,y,I);nn=(g.flags&131072)!==0}else nn=!1,zi&&y.flags&1048576&&Uf(y,Kc,y.index);switch(y.lanes=0,y.tag){case 2:var B=y.type;zf(g,y),g=y.pendingProps;var V=Mc(y,No.current);Va(y,I),V=od(null,y,B,g,V,I);var K=eh();return y.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,yo(B)?(K=!0,Ta(y)):K=!1,y.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,_p(y),V.updater=Ri,y.stateNode=V,V._reactInternals=y,rc(y,B,g,I),y=fn(null,y,B,!0,K,I)):(y.tag=0,zi&&K&&$u(y),br(null,y,V,I),y=y.child),y;case 16:B=y.elementType;e:{switch(zf(g,y),g=y.pendingProps,V=B._init,B=V(B._payload),y.type=B,V=y.tag=xg(B),g=jl(B,g),V){case 0:y=Kt(null,y,B,g,I);break e;case 1:y=ln(null,y,B,g,I);break e;case 11:y=ft(null,y,B,g,I);break e;case 14:y=Ee(null,y,B,jl(B.type,g),I);break e}throw Error(t(306,B,""))}return y;case 0:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:jl(B,V),Kt(g,y,B,V,I);case 1:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:jl(B,V),ln(g,y,B,V,I);case 3:e:{if(kn(y),g===null)throw Error(t(387));B=y.pendingProps,K=y.memoizedState,V=K.element,qc(g,y),yr(y,B,null,I);var fe=y.memoizedState;if(B=fe.element,K.isDehydrated)if(K={element:B,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},y.updateQueue.baseState=K,y.memoizedState=K,y.flags&256){V=L(Error(t(423)),y),y=Wn(g,y,B,I,V);break e}else if(B!==V){V=L(Error(t(424)),y),y=Wn(g,y,B,I,V);break e}else for(Ea=qu(y.stateNode.containerInfo.firstChild),ls=y,zi=!0,$a=null,I=Au(y,null,B,I),y.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(Sa(),B===V){y=cd(g,y,I);break e}br(g,y,B,I)}y=y.child}return y;case 5:return Mh(y),g===null&&Ys(y),B=y.type,V=y.pendingProps,K=g!==null?g.memoizedProps:null,fe=V.children,td(B,V)?fe=null:K!==null&&td(B,K)&&(y.flags|=32),Ot(g,y),br(g,y,fe,I),y.child;case 6:return g===null&&Ys(y),null;case 13:return Sm(g,y,I);case 4:return ic(y,y.stateNode.containerInfo),B=y.pendingProps,g===null?y.child=wa(y,null,B,I):br(g,y,B,I),y.child;case 11:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:jl(B,V),ft(g,y,B,V,I);case 7:return br(g,y,y.pendingProps,I),y.child;case 8:return br(g,y,y.pendingProps.children,I),y.child;case 12:return br(g,y,y.pendingProps.children,I),y.child;case 10:e:{if(B=y.type._context,V=y.pendingProps,K=y.memoizedProps,fe=V.value,Ii(wu,B._currentValue),B._currentValue=fe,K!==null)if(bt(K.value,fe)){if(K.children===V.children&&!Bo.current){y=cd(g,y,I);break e}}else for(K=y.child,K!==null&&(K.return=y);K!==null;){var Ue=K.dependencies;if(Ue!==null){fe=K.child;for(var Ze=Ue.firstContext;Ze!==null;){if(Ze.context===B){if(K.tag===1){Ze=oa(-1,I&-I),Ze.tag=2;var Ct=K.updateQueue;if(Ct!==null){Ct=Ct.shared;var jt=Ct.pending;jt===null?Ze.next=Ze:(Ze.next=jt.next,jt.next=Ze),Ct.pending=Ze}}K.lanes|=I,Ze=K.alternate,Ze!==null&&(Ze.lanes|=I),bo(K.return,I,y),Ue.lanes|=I;break}Ze=Ze.next}}else if(K.tag===10)fe=K.type===y.type?null:K.child;else if(K.tag===18){if(fe=K.return,fe===null)throw Error(t(341));fe.lanes|=I,Ue=fe.alternate,Ue!==null&&(Ue.lanes|=I),bo(fe,I,y),fe=K.sibling}else fe=K.child;if(fe!==null)fe.return=K;else for(fe=K;fe!==null;){if(fe===y){fe=null;break}if(K=fe.sibling,K!==null){K.return=fe.return,fe=K;break}fe=fe.return}K=fe}br(g,y,V.children,I),y=y.child}return y;case 9:return V=y.type,B=y.pendingProps.children,Va(y,I),V=bs(V),B=B(V),y.flags|=1,br(g,y,B,I),y.child;case 14:return B=y.type,V=jl(B,y.pendingProps),V=jl(B.type,V),Ee(g,y,B,V,I);case 15:return Ce(g,y,y.type,y.pendingProps,I);case 17:return B=y.type,V=y.pendingProps,V=y.elementType===B?V:jl(B,V),zf(g,y),y.tag=1,yo(B)?(g=!0,Ta(y)):g=!1,Va(y,I),Xl(y,B,V),rc(y,B,V,I),fn(null,y,B,!0,g,I);case 19:return Ma(g,y,I);case 22:return Ke(g,y,I)}throw Error(t(156,y.tag))};function Nc(g,y){return Wi(g,y)}function zs(g,y,I,B){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bu(g,y,I,B){return new zs(g,y,I,B)}function h0(g){return g=g.prototype,!(!g||!g.isReactComponent)}function xg(g){if(typeof g=="function")return h0(g)?1:0;if(g!=null){if(g=g.$$typeof,g===ie)return 11;if(g===ue)return 14}return 2}function kh(g,y){var I=g.alternate;return I===null?(I=Bu(g.tag,y,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=y,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,y=g.dependencies,I.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function Nm(g,y,I,B,V,K){var fe=2;if(B=g,typeof g=="function")h0(g)&&(fe=1);else if(typeof g=="string")fe=5;else e:switch(g){case H:return nf(I.children,V,K,y);case z:fe=8,V|=8;break;case J:return g=Bu(12,I,y,V|2),g.elementType=J,g.lanes=K,g;case de:return g=Bu(13,I,y,V),g.elementType=de,g.lanes=K,g;case oe:return g=Bu(19,I,y,V),g.elementType=oe,g.lanes=K,g;case Ae:return rf(I,V,K,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case te:fe=10;break e;case re:fe=9;break e;case ie:fe=11;break e;case ue:fe=14;break e;case ge:fe=16,B=null;break e}throw Error(t(130,g==null?g:typeof g,""))}return y=Bu(fe,I,y,V),y.elementType=g,y.type=B,y.lanes=K,y}function nf(g,y,I,B){return g=Bu(7,g,B,y),g.lanes=I,g}function rf(g,y,I,B){return g=Bu(22,g,B,y),g.elementType=Ae,g.lanes=I,g.stateNode={isHidden:!1},g}function Xf(g,y,I){return g=Bu(6,g,null,y),g.lanes=I,g}function dd(g,y,I){return y=Bu(4,g.children!==null?g.children:[],g.key,y),y.lanes=I,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function Sp(g,y,I,B,V){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uu(0),this.expirationTimes=uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uu(0),this.identifierPrefix=B,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function Cg(g,y,I,B,V,K,fe,Ue,Ze){return g=new Sp(g,y,I,Ue,Ze),y===1?(y=1,K===!0&&(y|=8)):y=0,K=Bu(3,null,null,y),g.current=K,K.stateNode=g,K.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},_p(K),g}function Cb(g,y,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:B==null?null:""+B,children:g,containerInfo:y,implementation:I}}function d0(g){if(!g)return Cc;g=g._reactInternals;e:{if(Bn(g)!==g||g.tag!==1)throw Error(t(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(yo(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(t(171))}if(g.tag===1){var I=g.type;if(yo(I))return Ch(g,I,y)}return y}function Wd(g,y,I,B,V,K,fe,Ue,Ze){return g=Cg(I,B,!0,g,V,K,fe,Ue,Ze),g.context=d0(null),I=g.current,B=ac(),V=Gd(I),K=oa(B,V),K.callback=y??null,_i(I,K,V),g.current.lanes=V,Pl(g,V,B),ka(g,B),g}function qr(g,y,I,B){var V=y.current,K=ac(),fe=Gd(V);return I=d0(I),y.context===null?y.context=I:y.pendingContext=I,y=oa(K,fe),y.payload={element:g},B=B===void 0?null:B,B!==null&&(y.callback=B),g=_i(V,y,fe),g!==null&&(wo(g,V,fe,K),wn(g,V,fe)),fe}function Bm(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function Mg(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<y?I:y}}function p0(g,y){Mg(g,y),(g=g.alternate)&&Mg(g,y)}function Mb(){return null}var f0=typeof reportError=="function"?reportError:function(g){console.error(g)};function Pm(g){this._internalRoot=g}Ag.prototype.render=Pm.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(t(409));qr(g,y,null,null)},Ag.prototype.unmount=Pm.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;jf(function(){qr(null,g,null,null)}),y[qi]=null}};function Ag(g){this._internalRoot=g}Ag.prototype.unstable_scheduleHydration=function(g){if(g){var y=cl();g={blockedOn:null,target:g,priority:y};for(var I=0;I<Fl.length&&y!==0&&y<Fl[I].priority;I++);Fl.splice(I,0,g),I===0&&ks(g)}};function sf(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function of(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function Fm(){}function oi(g,y,I,B,V){if(V){if(typeof B=="function"){var K=B;B=function(){var Ct=Bm(fe);K.call(Ct)}}var fe=Wd(y,B,g,0,null,!1,!1,"",Fm);return g._reactRootContainer=fe,g[qi]=fe.current,Ku(g.nodeType===8?g.parentNode:g),jf(),fe}for(;V=g.lastChild;)g.removeChild(V);if(typeof B=="function"){var Ue=B;B=function(){var Ct=Bm(Ze);Ue.call(Ct)}}var Ze=Cg(g,0,!1,null,null,!1,!1,"",Fm);return g._reactRootContainer=Ze,g[qi]=Ze.current,Ku(g.nodeType===8?g.parentNode:g),jf(function(){qr(y,Ze,I,B)}),Ze}function af(g,y,I,B,V){var K=I._reactRootContainer;if(K){var fe=K;if(typeof V=="function"){var Ue=V;V=function(){var Ze=Bm(fe);Ue.call(Ze)}}qr(y,fe,g,V)}else fe=oi(I,y,g,V,B);return Bm(fe)}Gc=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var I=Pa(y.pendingLanes);I!==0&&(Yo(y,I|1),ka(y,Yt()),!(Ci&6)&&(Dc=Yt()+500,cn()))}break;case 13:jf(function(){var B=ja(g,1);if(B!==null){var V=ac();wo(B,g,1,V)}}),p0(g,1)}},gh=function(g){if(g.tag===13){var y=ja(g,134217728);if(y!==null){var I=ac();wo(y,g,134217728,I)}p0(g,134217728)}},_c=function(g){if(g.tag===13){var y=Gd(g),I=ja(g,y);if(I!==null){var B=ac();wo(I,g,y,B)}p0(g,y)}},cl=function(){return tr},cu=function(g,y){var I=tr;try{return tr=g,y()}finally{tr=I}},Ut=function(g,y,I){switch(y){case"input":if(xt(g,I),y=I.name,I.type==="radio"&&y!=null){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<I.length;y++){var B=I[y];if(B!==g&&B.form===g.form){var V=jp(B);if(!V)throw Error(t(90));Se(B),xt(B,V)}}}break;case"textarea":ke(g,I);break;case"select":y=I.value,y!=null&&mt(g,!!I.multiple,y,!1)}},sr=h_,Xn=jf;var Um={usingClientEntryPoint:!1,Events:[Ur,zn,jp,cr,Gr,h_]},zm={findFiberByHostInstance:Ga,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yf={bundleType:zm.bundleType,version:zm.version,rendererPackageName:zm.rendererPackageName,rendererConfig:zm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=$r(g),g===null?null:g.stateNode},findFiberByHostInstance:zm.findFiberByHostInstance||Mb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var m0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!m0.isDisabled&&m0.supportsFiber)try{dr=m0.inject(Yf),pn=m0}catch{}}return Rp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Um,Rp.createPortal=function(g,y){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sf(y))throw Error(t(200));return Cb(g,y,null,I)},Rp.createRoot=function(g,y){if(!sf(g))throw Error(t(299));var I=!1,B="",V=f0;return y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(B=y.identifierPrefix),y.onRecoverableError!==void 0&&(V=y.onRecoverableError)),y=Cg(g,1,!1,null,null,I,!1,B,V),g[qi]=y.current,Ku(g.nodeType===8?g.parentNode:g),new Pm(y)},Rp.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(t(188)):(g=Object.keys(g).join(","),Error(t(268,g)));return g=$r(y),g=g===null?null:g.stateNode,g},Rp.flushSync=function(g){return jf(g)},Rp.hydrate=function(g,y,I){if(!of(y))throw Error(t(200));return af(null,g,y,!0,I)},Rp.hydrateRoot=function(g,y,I){if(!sf(g))throw Error(t(405));var B=I!=null&&I.hydratedSources||null,V=!1,K="",fe=f0;if(I!=null&&(I.unstable_strictMode===!0&&(V=!0),I.identifierPrefix!==void 0&&(K=I.identifierPrefix),I.onRecoverableError!==void 0&&(fe=I.onRecoverableError)),y=Wd(y,null,g,1,I??null,V,!1,K,fe),g[qi]=y.current,Ku(g),B)for(g=0;g<B.length;g++)I=B[g],V=I._getVersion,V=V(I._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[I,V]:y.mutableSourceEagerHydrationData.push(I,V);return new Ag(y)},Rp.render=function(g,y,I){if(!of(y))throw Error(t(200));return af(null,g,y,!1,I)},Rp.unmountComponentAtNode=function(g){if(!of(g))throw Error(t(40));return g._reactRootContainer?(jf(function(){af(null,null,g,!1,function(){g._reactRootContainer=null,g[qi]=null})}),!0):!1},Rp.unstable_batchedUpdates=h_,Rp.unstable_renderSubtreeIntoContainer=function(g,y,I,B){if(!of(I))throw Error(t(200));if(g==null||g._reactInternals===void 0)throw Error(t(38));return af(g,y,I,!1,B)},Rp.version="18.2.0-next-9e3b772b8-20220608",Rp}(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=fbe()})(Mj);var Aj,a5=Mj.exports;Aj=a5.createRoot,a5.hydrateRoot;const zw=new Te,GP=new Te,mbe=new Te;function gbe(n,e,t){const i=zw.setFromMatrixPosition(n.matrixWorld);i.project(e);const s=t.width/2,o=t.height/2;return[i.x*s+s,-(i.y*o)+o]}function _be(n,e){const t=zw.setFromMatrixPosition(n.matrixWorld),i=GP.setFromMatrixPosition(e.matrixWorld),s=t.sub(i),o=e.getWorldDirection(mbe);return s.angleTo(o)>Math.PI/2}function vbe(n,e,t,i){const s=zw.setFromMatrixPosition(n.matrixWorld),o=s.clone();o.project(e),t.setFromCamera(o,e);const l=t.intersectObjects(i,!0);if(l.length){const u=l[0].distance;return s.distanceTo(t.ray.origin)<u}return!0}function ybe(n,e){if(e instanceof Jg)return e.zoom;if(e instanceof Io){const t=zw.setFromMatrixPosition(n.matrixWorld),i=GP.setFromMatrixPosition(e.matrixWorld),s=e.fov*Math.PI/180,o=t.distanceTo(i);return 1/(2*Math.tan(s/2)*o)}else return 1}function bbe(n,e,t){if(e instanceof Io||e instanceof Jg){const i=zw.setFromMatrixPosition(n.matrixWorld),s=GP.setFromMatrixPosition(e.matrixWorld),o=i.distanceTo(s),l=(t[1]-t[0])/(e.far-e.near),u=t[1]-l*e.far;return Math.round(l*o+u)}}const QD=n=>Math.abs(n)<1e-10?0:n;function Ij(n,e,t=""){let i="matrix3d(";for(let s=0;s!==16;s++)i+=QD(e[s]*n.elements[s])+(s!==15?",":")");return t+i}const Tbe=(n=>e=>Ij(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Ebe=(n=>(e,t)=>Ij(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function $be(n){return n&&typeof n=="object"&&"current"in n}const Rj=he.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:s,center:o,fullscreen:l,portal:u,distanceFactor:h,sprite:d=!1,transform:m=!1,occlude:_,onOcclude:v,castShadow:E,receiveShadow:w,material:x,geometry:A,zIndexRange:O=[16777271,0],calculatePosition:k=gbe,as:N="div",wrapperClass:D,pointerEvents:U="auto",...F},H)=>{const{gl:z,camera:J,scene:te,size:re,raycaster:ie,events:de,viewport:oe}=Hh(),[ue]=he.useState(()=>document.createElement(N)),ge=he.useRef(),Ae=he.useRef(null),j=he.useRef(0),Z=he.useRef([0,0]),ne=he.useRef(null),le=he.useRef(null),_e=(u==null?void 0:u.current)||de.connected||z.domElement.parentNode,Oe=he.useRef(null),xe=he.useRef(!1),Xe=he.useMemo(()=>_&&_!=="blending"||Array.isArray(_)&&_.length&&$be(_[0]),[_]);he.useLayoutEffect(()=>{const Qe=z.domElement;_&&_==="blending"?(Qe.style.zIndex=`${Math.floor(O[0]/2)}`,Qe.style.position="absolute",Qe.style.pointerEvents="none"):(Qe.style.zIndex=null,Qe.style.position=null,Qe.style.pointerEvents=null)},[_]),he.useLayoutEffect(()=>{if(Ae.current){const Qe=ge.current=Aj(ue);if(te.updateMatrixWorld(),m)ue.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const De=k(Ae.current,J,re);ue.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${De[0]}px,${De[1]}px,0);transform-origin:0 0;`}return _e&&(s?_e.prepend(ue):_e.appendChild(ue)),()=>{_e&&_e.removeChild(ue),Qe.unmount()}}},[_e,m]),he.useLayoutEffect(()=>{D&&(ue.className=D)},[D]);const Re=he.useMemo(()=>m?{position:"absolute",top:0,left:0,width:re.width,height:re.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...l&&{top:-re.height/2,left:-re.width/2,width:re.width,height:re.height},...t},[t,o,l,re,m]),Je=he.useMemo(()=>({position:"absolute",pointerEvents:U}),[U]);he.useLayoutEffect(()=>{if(xe.current=!1,m){var Qe;(Qe=ge.current)==null||Qe.render(Xt("div",{ref:ne,style:Re,children:Xt("div",{ref:le,style:Je,children:Xt("div",{ref:H,className:i,style:t,children:n})})}))}else{var De;(De=ge.current)==null||De.render(Xt("div",{ref:H,style:Re,className:i,children:n}))}});const et=he.useRef(!0);Nf(Qe=>{if(Ae.current){J.updateMatrixWorld(),Ae.current.updateWorldMatrix(!0,!1);const De=m?Z.current:k(Ae.current,J,re);if(m||Math.abs(j.current-J.zoom)>e||Math.abs(Z.current[0]-De[0])>e||Math.abs(Z.current[1]-De[1])>e){const Se=_be(Ae.current,J);let Pe=!1;Xe&&(_!=="blending"?Pe=[te]:Array.isArray(_)&&(Pe=_.map(xt=>xt.current)));const rt=et.current;if(Pe){const xt=vbe(Ae.current,J,ie,Pe);et.current=xt&&!Se}else et.current=!Se;rt!==et.current&&(v?v(!et.current):ue.style.display=et.current?"block":"none");const We=Math.floor(O[0]/2),wt=_?Xe?[O[0],We]:[We-1,0]:O;if(ue.style.zIndex=`${bbe(Ae.current,J,wt)}`,m){const[xt,ht]=[re.width/2,re.height/2],St=J.projectionMatrix.elements[5]*ht,{isOrthographicCamera:It,top:mt,left:ve,bottom:ee,right:ke}=J,ot=Tbe(J.matrixWorldInverse),dt=It?`scale(${St})translate(${QD(-(ke+ve)/2)}px,${QD((mt+ee)/2)}px)`:`translateZ(${St}px)`;let $t=Ae.current.matrixWorld;d&&($t=J.matrixWorldInverse.clone().transpose().copyPosition($t).scale(Ae.current.scale),$t.elements[3]=$t.elements[7]=$t.elements[11]=0,$t.elements[15]=1),ue.style.width=re.width+"px",ue.style.height=re.height+"px",ue.style.perspective=It?"":`${St}px`,ne.current&&le.current&&(ne.current.style.transform=`${dt}${ot}translate(${xt}px,${ht}px)`,le.current.style.transform=Ebe($t,1/((h||10)/400)))}else{const xt=h===void 0?1:ybe(Ae.current,J)*h;ue.style.transform=`translate3d(${De[0]}px,${De[1]}px,0) scale(${xt})`}Z.current=De,j.current=J.zoom}}if(!Xe&&Oe.current&&!xe.current)if(m){if(ne.current){const De=ne.current.children[0];if(De!=null&&De.clientWidth&&De!=null&&De.clientHeight){const{isOrthographicCamera:Se}=J;if(Se||A)F.scale&&(Array.isArray(F.scale)?F.scale instanceof Te?Oe.current.scale.copy(F.scale.clone().divideScalar(1)):Oe.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):Oe.current.scale.setScalar(1/F.scale));else{const Pe=(h||10)/400,rt=De.clientWidth*Pe,We=De.clientHeight*Pe;Oe.current.scale.set(rt,We,1)}xe.current=!0}}}else{const De=ue.children[0];if(De!=null&&De.clientWidth&&De!=null&&De.clientHeight){const Se=1/oe.factor,Pe=De.clientWidth*Se,rt=De.clientHeight*Se;Oe.current.scale.set(Pe,rt,1),xe.current=!0}Oe.current.lookAt(Qe.camera.position)}});const at=he.useMemo(()=>({vertexShader:m?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[m]);return Xt("group",{...F,ref:Ae,children:_&&!Xe&&mc("mesh",{castShadow:E,receiveShadow:w,ref:Oe,children:[A||Xt("planeGeometry",{}),x||Xt("shaderMaterial",{side:ep,vertexShader:at.vertexShader,fragmentShader:at.fragmentShader})]})})});function WP(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const jM=0,Sbe=1,wbe=new Te,l5=new UP,vO=new F0,u5=new Te,oM=new yf;class c5{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new h5,this.unassigned=new h5,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.vertices.push(new xbe(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(i){const s=i.geometry;if(s!==void 0){if(s.isGeometry){console.error("THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.");return}else if(s.isBufferGeometry){const o=s.attributes.position;if(o!==void 0)for(let l=0,u=o.count;l<u;l++){const h=new Te;h.fromBufferAttribute(o,l).applyMatrix4(i.matrixWorld),t.push(h)}}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let i=0,s=t.length;i<s;i++)if(t[i].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const i=this.faces;let s=-1/0,o=1/0;for(let l=0,u=i.length;l<u;l++){const h=i[l],d=h.distanceToPoint(e.origin),m=h.normal.dot(e.direction);if(d>0&&m>=0)return null;const _=m!==0?-d/m:0;if(!(_<=0)&&(m>0?o=Math.min(_,o):s=Math.max(_,s),s>o))return null}return s!==-1/0?e.at(s,t):e.at(o,t),t}intersectsRay(e){return this.intersectRay(e,wbe)!==null}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,t.outside===null?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(e.next!==null&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(e.outside!==null){const t=e.outside;let i=e.outside;for(;i.next!==null&&i.next.face===e;)i=i.next;return this.assigned.removeSubList(t,i),t.prev=i.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const i=this.removeAllVerticesFromFace(e);if(i!==void 0)if(t===void 0)this.unassigned.appendChain(i);else{let s=i;do{const o=s.next;t.distanceToPoint(s.point)>this.tolerance?this.addVertexToFace(s,t):this.unassigned.append(s),s=o}while(s!==null)}return this}resolveUnassignedPoints(e){if(this.unassigned.isEmpty()===!1){let t=this.unassigned.first();do{const i=t.next;let s=this.tolerance,o=null;for(let l=0;l<e.length;l++){const u=e[l];if(u.mark===jM){const h=u.distanceToPoint(t.point);if(h>s&&(s=h,o=u),s>1e3*this.tolerance)break}}o!==null&&this.addVertexToFace(t,o),t=i}while(t!==null)}return this}computeExtremes(){const e=new Te,t=new Te,i=[],s=[];for(let o=0;o<3;o++)i[o]=s[o]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let o=0,l=this.vertices.length;o<l;o++){const u=this.vertices[o],h=u.point;for(let d=0;d<3;d++)h.getComponent(d)<e.getComponent(d)&&(e.setComponent(d,h.getComponent(d)),i[d]=u);for(let d=0;d<3;d++)h.getComponent(d)>t.getComponent(d)&&(t.setComponent(d,h.getComponent(d)),s[d]=u)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:i,max:s}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),i=t.min,s=t.max;let o=0,l=0;for(let v=0;v<3;v++){const E=s[v].point.getComponent(v)-i[v].point.getComponent(v);E>o&&(o=E,l=v)}const u=i[l],h=s[l];let d,m;o=0,l5.set(u.point,h.point);for(let v=0,E=this.vertices.length;v<E;v++){const w=e[v];if(w!==u&&w!==h){l5.closestPointToPoint(w.point,!0,u5);const x=u5.distanceToSquared(w.point);x>o&&(o=x,d=w)}}o=-1,vO.setFromCoplanarPoints(u.point,h.point,d.point);for(let v=0,E=this.vertices.length;v<E;v++){const w=e[v];if(w!==u&&w!==h&&w!==d){const x=Math.abs(vO.distanceToPoint(w.point));x>o&&(o=x,m=w)}}const _=[];if(vO.distanceToPoint(m.point)<0){_.push(eg.create(u,h,d),eg.create(m,h,u),eg.create(m,d,h),eg.create(m,u,d));for(let v=0;v<3;v++){const E=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge(E)),_[v+1].getEdge(1).setTwin(_[E+1].getEdge(0))}}else{_.push(eg.create(u,d,h),eg.create(m,u,h),eg.create(m,h,d),eg.create(m,d,u));for(let v=0;v<3;v++){const E=(v+1)%3;_[v+1].getEdge(2).setTwin(_[0].getEdge((3-v)%3)),_[v+1].getEdge(0).setTwin(_[E+1].getEdge(1))}}for(let v=0;v<4;v++)this.faces.push(_[v]);for(let v=0,E=e.length;v<E;v++){const w=e[v];if(w!==u&&w!==h&&w!==d&&w!==m){o=this.tolerance;let x=null;for(let A=0;A<4;A++){const O=this.faces[A].distanceToPoint(w.point);O>o&&(o=O,x=this.faces[A])}x!==null&&this.addVertexToFace(w,x)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const i=this.faces[t];i.mark===jM&&e.push(i)}return this.faces=e,this}nextVertexToAdd(){if(this.assigned.isEmpty()===!1){let e,t=0;const i=this.assigned.first().face;let s=i.outside;do{const o=i.distanceToPoint(s.point);o>t&&(t=o,e=s),s=s.next}while(s!==null&&s.face===i);return e}}computeHorizon(e,t,i,s){this.deleteFaceVertices(i),i.mark=Sbe;let o;t===null?o=t=i.getEdge(0):o=t.next;do{const l=o.twin,u=l.face;u.mark===jM&&(u.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,l,u,s):s.push(o)),o=o.next}while(o!==t);return this}addAdjoiningFace(e,t){const i=eg.create(e,t.tail(),t.head());return this.faces.push(i),i.getEdge(-1).setTwin(t.twin),i.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let i=null,s=null;for(let o=0;o<t.length;o++){const l=t[o],u=this.addAdjoiningFace(e,l);i===null?i=u:u.next.setTwin(s),this.newFaces.push(u.face),s=u}return i.next.setTwin(s),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();(e=this.nextVertexToAdd())!==void 0;)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class eg{constructor(){this.normal=new Te,this.midpoint=new Te,this.area=0,this.constant=0,this.outside=null,this.mark=jM,this.edge=null}static create(e,t,i){const s=new eg,o=new yO(e,s),l=new yO(t,s),u=new yO(i,s);return o.next=u.prev=l,l.next=o.prev=u,u.next=l.prev=o,s.edge=o,s.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),i=this.edge.next.head();return oM.set(e.point,t.point,i.point),oM.getNormal(this.normal),oM.getMidpoint(this.midpoint),this.area=oM.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class yO{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return t!==null?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class xbe{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class h5{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,t.prev===null?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,t.next===null?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(this.head===null?this.head=e:this.tail.next=e,e.prev=this.tail;e.next!==null;)e=e.next;return this.tail=e,this}remove(e){return e.prev===null?this.head=e.next:e.prev.next=e.next,e.next===null?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return e.prev===null?this.head=t.next:e.prev.next=t.next,t.next===null?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return this.head===null}}class d5 extends kr{constructor(e=[]){super();const t=[],i=[];c5===void 0&&console.error("THREE.ConvexGeometry: ConvexGeometry relies on ConvexHull");const s=new c5().setFromPoints(e).faces;for(let o=0;o<s.length;o++){const l=s[o];let u=l.edge;do{const h=u.head().point;t.push(h.x,h.y,h.z),i.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new Pn(t,3)),this.setAttribute("normal",new Pn(i,3))}}function Vr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const kj=(n,e)=>{const t=n[0].index!==null,i=new Set(Object.keys(n[0].attributes)),s=new Set(Object.keys(n[0].morphAttributes)),o={},l={},u=n[0].morphTargetsRelative,h=new kr;let d=0;if(n.forEach((m,_)=>{let v=0;if(t!==(m.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let E in m.attributes){if(!i.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+'. All geometries must have compatible attributes; make sure "'+E+'" attribute exists among all geometries, or in none of them.'),null;o[E]===void 0&&(o[E]=[]),o[E].push(m.attributes[E]),v++}if(v!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". Make sure all geometries have the same number of attributes."),null;if(u!==m.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let E in m.morphAttributes){if(!s.has(E))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+".  .morphAttributes must be consistent throughout all geometries."),null;l[E]===void 0&&(l[E]=[]),l[E].push(m.morphAttributes[E])}if(h.userData.mergedUserData=h.userData.mergedUserData||[],h.userData.mergedUserData.push(m.userData),e){let E;if(m.index)E=m.index.count;else if(m.attributes.position!==void 0)E=m.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_+". The geometry must have either an index or a position attribute"),null;h.addGroup(d,E,_),d+=E}}),t){let m=0;const _=[];n.forEach(v=>{const E=v.index;for(let w=0;w<E.count;++w)_.push(E.getX(w)+m);m+=v.attributes.position.count}),h.setIndex(_)}for(let m in o){const _=p5(o[m]);if(!_)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" attribute."),null;h.setAttribute(m,_)}for(let m in l){const _=l[m][0].length;if(_===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[m]=[];for(let v=0;v<_;++v){const E=[];for(let x=0;x<l[m].length;++x)E.push(l[m][x][v]);const w=p5(E);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" morphAttribute."),null;h.morphAttributes[m].push(w)}}return h},p5=n=>{let e,t,i,s=0;if(n.forEach(o=>{if(e===void 0&&(e=o.array.constructor),e!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=o.itemSize),t!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;s+=o.array.length}),e&&t){const o=new e(s);let l=0;return n.forEach(u=>{o.set(u.array,l),l+=u.array.length}),new Ms(o,t,i)}},f5=(n,e)=>(n%e+e)%e;class Cbe extends Lf{constructor(e,t){super(),Vr(this,"object",void 0),Vr(this,"domElement",void 0),Vr(this,"enabled",!0),Vr(this,"target",new Te),Vr(this,"minDistance",0),Vr(this,"maxDistance",1/0),Vr(this,"minZoom",0),Vr(this,"maxZoom",1/0),Vr(this,"minPolarAngle",0),Vr(this,"maxPolarAngle",Math.PI),Vr(this,"minAzimuthAngle",-1/0),Vr(this,"maxAzimuthAngle",1/0),Vr(this,"enableDamping",!1),Vr(this,"dampingFactor",.05),Vr(this,"enableZoom",!0),Vr(this,"zoomSpeed",1),Vr(this,"enableRotate",!0),Vr(this,"rotateSpeed",1),Vr(this,"enablePan",!0),Vr(this,"panSpeed",1),Vr(this,"screenSpacePanning",!0),Vr(this,"keyPanSpeed",7),Vr(this,"autoRotate",!1),Vr(this,"autoRotateSpeed",2),Vr(this,"reverseOrbit",!1),Vr(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Vr(this,"mouseButtons",{LEFT:Ey.ROTATE,MIDDLE:Ey.DOLLY,RIGHT:Ey.PAN}),Vr(this,"touches",{ONE:$y.ROTATE,TWO:$y.DOLLY_PAN}),Vr(this,"target0",void 0),Vr(this,"position0",void 0),Vr(this,"zoom0",void 0),Vr(this,"_domElementKeyEvents",null),Vr(this,"getPolarAngle",void 0),Vr(this,"getAzimuthalAngle",void 0),Vr(this,"setPolarAngle",void 0),Vr(this,"setAzimuthalAngle",void 0),Vr(this,"getDistance",void 0),Vr(this,"listenToKeyEvents",void 0),Vr(this,"saveState",void 0),Vr(this,"reset",void 0),Vr(this,"update",void 0),Vr(this,"connect",void 0),Vr(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof Io?this.object.zoom:1,this.getPolarAngle=()=>m.phi,this.getAzimuthalAngle=()=>m.theta,this.setPolarAngle=Q=>{let ae=f5(Q,2*Math.PI),$e=m.phi;$e<0&&($e+=2*Math.PI),ae<0&&(ae+=2*Math.PI);let Ve=Math.abs(ae-$e);2*Math.PI-Ve<Ve&&(ae<$e?ae+=2*Math.PI:$e+=2*Math.PI),_.phi=ae-$e,i.update()},this.setAzimuthalAngle=Q=>{let ae=f5(Q,2*Math.PI),$e=m.theta;$e<0&&($e+=2*Math.PI),ae<0&&(ae+=2*Math.PI);let Ve=Math.abs(ae-$e);2*Math.PI-Ve<Ve&&(ae<$e?ae+=2*Math.PI:$e+=2*Math.PI),_.theta=ae-$e,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=Q=>{Q.addEventListener("keydown",ke),this._domElementKeyEvents=Q},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object instanceof Io?i.object.zoom:1},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object instanceof Io&&(i.object.zoom=i.zoom0,i.object.updateProjectionMatrix()),i.dispatchEvent(s),i.update(),h=u.NONE},this.update=(()=>{const Q=new Te,ae=new Wo().setFromUnitVectors(e.up,new Te(0,1,0)),$e=ae.clone().invert(),Ve=new Te,Pt=new Wo,Fe=2*Math.PI;return function(){const Wt=i.object.position;Q.copy(Wt).sub(i.target),Q.applyQuaternion(ae),m.setFromVector3(Q),i.autoRotate&&h===u.NONE&&ie(te()),i.enableDamping?(m.theta+=_.theta*i.dampingFactor,m.phi+=_.phi*i.dampingFactor):(m.theta+=_.theta,m.phi+=_.phi);let lt=i.minAzimuthAngle,Ut=i.maxAzimuthAngle;return isFinite(lt)&&isFinite(Ut)&&(lt<-Math.PI?lt+=Fe:lt>Math.PI&&(lt-=Fe),Ut<-Math.PI?Ut+=Fe:Ut>Math.PI&&(Ut-=Fe),lt<=Ut?m.theta=Math.max(lt,Math.min(Ut,m.theta)):m.theta=m.theta>(lt+Ut)/2?Math.max(lt,m.theta):Math.min(Ut,m.theta)),m.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(i.minDistance,Math.min(i.maxDistance,m.radius)),i.enableDamping===!0?i.target.addScaledVector(E,i.dampingFactor):i.target.add(E),Q.setFromSpherical(m),Q.applyQuaternion($e),Wt.copy(i.target).add(Q),i.object.lookAt(i.target),i.enableDamping===!0?(_.theta*=1-i.dampingFactor,_.phi*=1-i.dampingFactor,E.multiplyScalar(1-i.dampingFactor)):(_.set(0,0,0),E.set(0,0,0)),v=1,w||Ve.distanceToSquared(i.object.position)>d||8*(1-Pt.dot(i.object.quaternion))>d?(i.dispatchEvent(s),Ve.copy(i.object.position),Pt.copy(i.object.quaternion),w=!1,!0):!1}})(),this.connect=Q=>{Q===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=Q,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",$t),i.domElement.addEventListener("pointerdown",xt),i.domElement.addEventListener("pointercancel",It),i.domElement.addEventListener("wheel",ee)},this.dispose=()=>{var Q,ae,$e,Ve,Pt,Fe;(Q=i.domElement)===null||Q===void 0||Q.removeEventListener("contextmenu",$t),(ae=i.domElement)===null||ae===void 0||ae.removeEventListener("pointerdown",xt),($e=i.domElement)===null||$e===void 0||$e.removeEventListener("pointercancel",It),(Ve=i.domElement)===null||Ve===void 0||Ve.removeEventListener("wheel",ee),(Pt=i.domElement)===null||Pt===void 0||Pt.ownerDocument.removeEventListener("pointermove",ht),(Fe=i.domElement)===null||Fe===void 0||Fe.ownerDocument.removeEventListener("pointerup",St),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ke)};const i=this,s={type:"change"},o={type:"start"},l={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,m=new jD,_=new jD;let v=1;const E=new Te;let w=!1;const x=new Lt,A=new Lt,O=new Lt,k=new Lt,N=new Lt,D=new Lt,U=new Lt,F=new Lt,H=new Lt,z=[],J={};function te(){return 2*Math.PI/60/60*i.autoRotateSpeed}function re(){return Math.pow(.95,i.zoomSpeed)}function ie(Q){i.reverseOrbit?_.theta+=Q:_.theta-=Q}function de(Q){i.reverseOrbit?_.phi+=Q:_.phi-=Q}const oe=(()=>{const Q=new Te;return function(ae,$e){Q.setFromMatrixColumn($e,0),Q.multiplyScalar(-ae),E.add(Q)}})(),ue=(()=>{const Q=new Te;return function(ae,$e){i.screenSpacePanning===!0?Q.setFromMatrixColumn($e,1):(Q.setFromMatrixColumn($e,0),Q.crossVectors(i.object.up,Q)),Q.multiplyScalar(ae),E.add(Q)}})(),ge=(()=>{const Q=new Te;return function(ae,$e){const Ve=i.domElement;if(Ve&&i.object instanceof Io&&i.object.isPerspectiveCamera){const Pt=i.object.position;Q.copy(Pt).sub(i.target);let Fe=Q.length();Fe*=Math.tan(i.object.fov/2*Math.PI/180),oe(2*ae*Fe/Ve.clientHeight,i.object.matrix),ue(2*$e*Fe/Ve.clientHeight,i.object.matrix)}else Ve&&i.object instanceof Jg&&i.object.isOrthographicCamera?(oe(ae*(i.object.right-i.object.left)/i.object.zoom/Ve.clientWidth,i.object.matrix),ue($e*(i.object.top-i.object.bottom)/i.object.zoom/Ve.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function Ae(Q){i.object instanceof Io&&i.object.isPerspectiveCamera?v/=Q:i.object instanceof Jg&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Q)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(Q){i.object instanceof Io&&i.object.isPerspectiveCamera?v*=Q:i.object instanceof Jg&&i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Q)),i.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Z(Q){x.set(Q.clientX,Q.clientY)}function ne(Q){U.set(Q.clientX,Q.clientY)}function le(Q){k.set(Q.clientX,Q.clientY)}function _e(Q){A.set(Q.clientX,Q.clientY),O.subVectors(A,x).multiplyScalar(i.rotateSpeed);const ae=i.domElement;ae&&(ie(2*Math.PI*O.x/ae.clientHeight),de(2*Math.PI*O.y/ae.clientHeight)),x.copy(A),i.update()}function Oe(Q){F.set(Q.clientX,Q.clientY),H.subVectors(F,U),H.y>0?Ae(re()):H.y<0&&j(re()),U.copy(F),i.update()}function xe(Q){N.set(Q.clientX,Q.clientY),D.subVectors(N,k).multiplyScalar(i.panSpeed),ge(D.x,D.y),k.copy(N),i.update()}function Xe(Q){Q.deltaY<0?j(re()):Q.deltaY>0&&Ae(re()),i.update()}function Re(Q){let ae=!1;switch(Q.code){case i.keys.UP:ge(0,i.keyPanSpeed),ae=!0;break;case i.keys.BOTTOM:ge(0,-i.keyPanSpeed),ae=!0;break;case i.keys.LEFT:ge(i.keyPanSpeed,0),ae=!0;break;case i.keys.RIGHT:ge(-i.keyPanSpeed,0),ae=!0;break}ae&&(Q.preventDefault(),i.update())}function Je(){if(z.length==1)x.set(z[0].pageX,z[0].pageY);else{const Q=.5*(z[0].pageX+z[1].pageX),ae=.5*(z[0].pageY+z[1].pageY);x.set(Q,ae)}}function et(){if(z.length==1)k.set(z[0].pageX,z[0].pageY);else{const Q=.5*(z[0].pageX+z[1].pageX),ae=.5*(z[0].pageY+z[1].pageY);k.set(Q,ae)}}function at(){const Q=z[0].pageX-z[1].pageX,ae=z[0].pageY-z[1].pageY,$e=Math.sqrt(Q*Q+ae*ae);U.set(0,$e)}function Qe(){i.enableZoom&&at(),i.enablePan&&et()}function De(){i.enableZoom&&at(),i.enableRotate&&Je()}function Se(Q){if(z.length==1)A.set(Q.pageX,Q.pageY);else{const $e=X(Q),Ve=.5*(Q.pageX+$e.x),Pt=.5*(Q.pageY+$e.y);A.set(Ve,Pt)}O.subVectors(A,x).multiplyScalar(i.rotateSpeed);const ae=i.domElement;ae&&(ie(2*Math.PI*O.x/ae.clientHeight),de(2*Math.PI*O.y/ae.clientHeight)),x.copy(A)}function Pe(Q){if(z.length==1)N.set(Q.pageX,Q.pageY);else{const ae=X(Q),$e=.5*(Q.pageX+ae.x),Ve=.5*(Q.pageY+ae.y);N.set($e,Ve)}D.subVectors(N,k).multiplyScalar(i.panSpeed),ge(D.x,D.y),k.copy(N)}function rt(Q){const ae=X(Q),$e=Q.pageX-ae.x,Ve=Q.pageY-ae.y,Pt=Math.sqrt($e*$e+Ve*Ve);F.set(0,Pt),H.set(0,Math.pow(F.y/U.y,i.zoomSpeed)),Ae(H.y),U.copy(F)}function We(Q){i.enableZoom&&rt(Q),i.enablePan&&Pe(Q)}function wt(Q){i.enableZoom&&rt(Q),i.enableRotate&&Se(Q)}function xt(Q){if(i.enabled!==!1){if(z.length===0){var ae,$e;(ae=i.domElement)===null||ae===void 0||ae.ownerDocument.addEventListener("pointermove",ht),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.addEventListener("pointerup",St)}ct(Q),Q.pointerType==="touch"?ot(Q):mt(Q)}}function ht(Q){i.enabled!==!1&&(Q.pointerType==="touch"?dt(Q):ve(Q))}function St(Q){if(Ge(Q),z.length===0){var ae,$e,Ve;(ae=i.domElement)===null||ae===void 0||ae.releasePointerCapture(Q.pointerId),($e=i.domElement)===null||$e===void 0||$e.ownerDocument.removeEventListener("pointermove",ht),(Ve=i.domElement)===null||Ve===void 0||Ve.ownerDocument.removeEventListener("pointerup",St)}i.dispatchEvent(l),h=u.NONE}function It(Q){Ge(Q)}function mt(Q){let ae;switch(Q.button){case 0:ae=i.mouseButtons.LEFT;break;case 1:ae=i.mouseButtons.MIDDLE;break;case 2:ae=i.mouseButtons.RIGHT;break;default:ae=-1}switch(ae){case Ey.DOLLY:if(i.enableZoom===!1)return;ne(Q),h=u.DOLLY;break;case Ey.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enablePan===!1)return;le(Q),h=u.PAN}else{if(i.enableRotate===!1)return;Z(Q),h=u.ROTATE}break;case Ey.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enableRotate===!1)return;Z(Q),h=u.ROTATE}else{if(i.enablePan===!1)return;le(Q),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function ve(Q){if(i.enabled!==!1)switch(h){case u.ROTATE:if(i.enableRotate===!1)return;_e(Q);break;case u.DOLLY:if(i.enableZoom===!1)return;Oe(Q);break;case u.PAN:if(i.enablePan===!1)return;xe(Q);break}}function ee(Q){i.enabled===!1||i.enableZoom===!1||h!==u.NONE&&h!==u.ROTATE||(Q.preventDefault(),i.dispatchEvent(o),Xe(Q),i.dispatchEvent(l))}function ke(Q){i.enabled===!1||i.enablePan===!1||Re(Q)}function ot(Q){switch(Me(Q),z.length){case 1:switch(i.touches.ONE){case $y.ROTATE:if(i.enableRotate===!1)return;Je(),h=u.TOUCH_ROTATE;break;case $y.PAN:if(i.enablePan===!1)return;et(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(i.touches.TWO){case $y.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Qe(),h=u.TOUCH_DOLLY_PAN;break;case $y.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;De(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&i.dispatchEvent(o)}function dt(Q){switch(Me(Q),h){case u.TOUCH_ROTATE:if(i.enableRotate===!1)return;Se(Q),i.update();break;case u.TOUCH_PAN:if(i.enablePan===!1)return;Pe(Q),i.update();break;case u.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;We(Q),i.update();break;case u.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;wt(Q),i.update();break;default:h=u.NONE}}function $t(Q){i.enabled!==!1&&Q.preventDefault()}function ct(Q){z.push(Q)}function Ge(Q){delete J[Q.pointerId];for(let ae=0;ae<z.length;ae++)if(z[ae].pointerId==Q.pointerId){z.splice(ae,1);return}}function Me(Q){let ae=J[Q.pointerId];ae===void 0&&(ae=new Lt,J[Q.pointerId]=ae),ae.set(Q.pageX,Q.pageY)}function X(Q){const ae=Q.pointerId===z[0].pointerId?z[1]:z[0];return J[ae.pointerId]}t!==void 0&&this.connect(t),this.update()}}const D$=new Te;function sm(n,e,t,i,s,o){const l=2*Math.PI*s/4,u=Math.max(o-2*s,0),h=Math.PI/4;D$.copy(e),D$[i]=0,D$.normalize();const d=.5*l/(l+u),m=1-D$.angleTo(n)/h;return Math.sign(D$[t])===1?m*d:u/(l+u)+d+d*(1-m)}class Mbe extends Na{constructor(e=1,t=1,i=1,s=2,o=.1){if(s=s*2+1,o=Math.min(e/2,t/2,i/2,o),super(1,1,1,s,s,s),s===1)return;const l=this.toNonIndexed();this.index=null,this.attributes.position=l.attributes.position,this.attributes.normal=l.attributes.normal,this.attributes.uv=l.attributes.uv;const u=new Te,h=new Te,d=new Te(e,t,i).divideScalar(2).subScalar(o),m=this.attributes.position.array,_=this.attributes.normal.array,v=this.attributes.uv.array,E=m.length/6,w=new Te,x=.5/s;for(let A=0,O=0;A<m.length;A+=3,O+=2)switch(u.fromArray(m,A),h.copy(u),h.x-=Math.sign(h.x)*x,h.y-=Math.sign(h.y)*x,h.z-=Math.sign(h.z)*x,h.normalize(),m[A+0]=d.x*Math.sign(u.x)+h.x*o,m[A+1]=d.y*Math.sign(u.y)+h.y*o,m[A+2]=d.z*Math.sign(u.z)+h.z*o,_[A+0]=h.x,_[A+1]=h.y,_[A+2]=h.z,Math.floor(A/E)){case 0:w.set(1,0,0),v[O+0]=sm(w,h,"z","y",o,i),v[O+1]=1-sm(w,h,"y","z",o,t);break;case 1:w.set(-1,0,0),v[O+0]=1-sm(w,h,"z","y",o,i),v[O+1]=1-sm(w,h,"y","z",o,t);break;case 2:w.set(0,1,0),v[O+0]=1-sm(w,h,"x","z",o,e),v[O+1]=sm(w,h,"z","x",o,i);break;case 3:w.set(0,-1,0),v[O+0]=1-sm(w,h,"x","z",o,e),v[O+1]=1-sm(w,h,"z","x",o,i);break;case 4:w.set(0,0,1),v[O+0]=1-sm(w,h,"x","y",o,e),v[O+1]=1-sm(w,h,"y","x",o,t);break;case 5:w.set(0,0,-1),v[O+0]=sm(w,h,"x","y",o,e),v[O+1]=1-sm(w,h,"y","x",o,t);break}}}const m5=new mg,aM=new Te;class VP extends CR{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Pn(e,3)),this.setAttribute("uv",new Pn(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new HA(t,6,1);return this.setAttribute("instanceStart",new Tf(i,3,0)),this.setAttribute("instanceEnd",new Tf(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new HA(t,6,1);return this.setAttribute("instanceColorStart",new Tf(i,3,0)),this.setAttribute("instanceColorEnd",new Tf(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new CP(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new mg);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),m5.setFromBufferAttribute(t),this.boundingBox.union(m5))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new s0),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let s=0;for(let o=0,l=e.count;o<l;o++)aM.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(aM)),aM.fromBufferAttribute(t,o),s=Math.max(s,i.distanceToSquared(aM));this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Oj extends VP{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let s=0;s<t;s+=3)i[2*s]=e[s],i[2*s+1]=e[s+1],i[2*s+2]=e[s+2],i[2*s+3]=e[s+3],i[2*s+4]=e[s+4],i[2*s+5]=e[s+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}Sn.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Lt(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};qd.line={uniforms:Dw.merge([Sn.common,Sn.fog,Sn.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class jP extends ph{constructor(e){super({type:"LineMaterial",uniforms:Dw.clone(qd.line.uniforms),vertexShader:qd.line.vertexShader,fragmentShader:qd.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const g5=new Te,_5=new Te,Bh=new Mi,Ph=new Mi,Ng=new Mi,bO=new Te,TO=new Mr,Sd=new UP,v5=new Te,lM=new mg,uM=new s0,Bg=new Mi;let Vg,qD,Lj,qy;function y5(n,e,t){return Bg.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Bg.multiplyScalar(1/Bg.w),Bg.x=qy/t.width,Bg.y=qy/t.height,Bg.applyMatrix4(n.projectionMatrixInverse),Bg.multiplyScalar(1/Bg.w),Math.abs(Math.max(Bg.x,Bg.y))}function Abe(n,e){for(let t=0,i=qD.count;t<i;t++){Sd.start.fromBufferAttribute(qD,t),Sd.end.fromBufferAttribute(Lj,t);const s=new Te,o=new Te;Vg.distanceSqToSegment(Sd.start,Sd.end,o,s),o.distanceTo(s)<qy*.5&&e.push({point:o,pointOnLine:s,distance:Vg.origin.distanceTo(o),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function Ibe(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,l=n.geometry,u=l.attributes.instanceStart,h=l.attributes.instanceEnd,d=-e.near;Vg.at(1,Ng),Ng.w=1,Ng.applyMatrix4(e.matrixWorldInverse),Ng.applyMatrix4(i),Ng.multiplyScalar(1/Ng.w),Ng.x*=s.x/2,Ng.y*=s.y/2,Ng.z=0,bO.copy(Ng),TO.multiplyMatrices(e.matrixWorldInverse,o);for(let m=0,_=u.count;m<_;m++){if(Bh.fromBufferAttribute(u,m),Ph.fromBufferAttribute(h,m),Bh.w=1,Ph.w=1,Bh.applyMatrix4(TO),Ph.applyMatrix4(TO),Bh.z>d&&Ph.z>d)continue;if(Bh.z>d){const A=Bh.z-Ph.z,O=(Bh.z-d)/A;Bh.lerp(Ph,O)}else if(Ph.z>d){const A=Ph.z-Bh.z,O=(Ph.z-d)/A;Ph.lerp(Bh,O)}Bh.applyMatrix4(i),Ph.applyMatrix4(i),Bh.multiplyScalar(1/Bh.w),Ph.multiplyScalar(1/Ph.w),Bh.x*=s.x/2,Bh.y*=s.y/2,Ph.x*=s.x/2,Ph.y*=s.y/2,Sd.start.copy(Bh),Sd.start.z=0,Sd.end.copy(Ph),Sd.end.z=0;const v=Sd.closestPointToPointParameter(bO,!0);Sd.at(v,v5);const E=u7.lerp(Bh.z,Ph.z,v),w=E>=-1&&E<=1,x=bO.distanceTo(v5)<qy*.5;if(w&&x){Sd.start.fromBufferAttribute(u,m),Sd.end.fromBufferAttribute(h,m),Sd.start.applyMatrix4(o),Sd.end.applyMatrix4(o);const A=new Te,O=new Te;Vg.distanceSqToSegment(Sd.start,Sd.end,O,A),t.push({point:O,pointOnLine:A,distance:Vg.origin.distanceTo(O),object:n,face:null,faceIndex:m,uv:null,uv2:null})}}}class Dj extends bn{constructor(e=new VP,t=new jP({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,s=new Float32Array(2*t.count);for(let l=0,u=0,h=t.count;l<h;l++,u+=2)g5.fromBufferAttribute(t,l),_5.fromBufferAttribute(i,l),s[u]=u===0?0:s[u-1],s[u+1]=s[u]+g5.distanceTo(_5);const o=new HA(s,2,1);return e.setAttribute("instanceDistanceStart",new Tf(o,1,0)),e.setAttribute("instanceDistanceEnd",new Tf(o,1,1)),this}raycast(e,t){const i=this.material.worldUnits,s=e.camera;s===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const o=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Vg=e.ray;const l=this.matrixWorld,u=this.geometry,h=this.material;qy=h.linewidth+o,qD=u.attributes.instanceStart,Lj=u.attributes.instanceEnd,u.boundingSphere===null&&u.computeBoundingSphere(),uM.copy(u.boundingSphere).applyMatrix4(l);let d;if(i)d=qy*.5;else{const _=Math.max(s.near,uM.distanceToPoint(Vg.origin));d=y5(s,_,h.resolution)}if(uM.radius+=d,Vg.intersectsSphere(uM)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),lM.copy(u.boundingBox).applyMatrix4(l);let m;if(i)m=qy*.5;else{const _=Math.max(s.near,lM.distanceToPoint(Vg.origin));m=y5(s,_,h.resolution)}lM.expandByScalar(m),Vg.intersectsBox(lM)!==!1&&(i?Abe(this,t):Ibe(this,s,t))}}class Rbe extends Dj{constructor(e=new Oj,t=new jP({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const kbe=he.forwardRef(function({follow:n=!0,lockX:e=!1,lockY:t=!1,lockZ:i=!1,...s},o){const l=he.useRef();return Nf(({camera:u})=>{if(!n||!l.current)return;const h=l.current.rotation.clone();u.getWorldQuaternion(l.current.quaternion),e&&(l.current.rotation.x=h.x),t&&(l.current.rotation.y=h.y),i&&(l.current.rotation.z=h.z)}),Xt("group",{ref:WP([l,o]),...s})}),Obe=he.forwardRef(function({points:n,color:e="black",vertexColors:t,linewidth:i,lineWidth:s,segments:o,dashed:l,...u},h){const d=Hh(E=>E.size),m=he.useMemo(()=>o?new Dj:new Rbe,[o]),[_]=he.useState(()=>new jP),v=he.useMemo(()=>{const E=o?new VP:new Oj,w=n.map(x=>{const A=Array.isArray(x);return x instanceof Te?[x.x,x.y,x.z]:x instanceof Lt?[x.x,x.y,0]:A&&x.length===3?[x[0],x[1],x[2]]:A&&x.length===2?[x[0],x[1],0]:x});if(E.setPositions(w.flat()),t){const x=t.map(A=>A instanceof _n?A.toArray():A);E.setColors(x.flat())}return E},[n,o,t]);return he.useLayoutEffect(()=>{m.computeLineDistances()},[n,m]),he.useLayoutEffect(()=>{l?_.defines.USE_DASH="":delete _.defines.USE_DASH,_.needsUpdate=!0},[l,_]),he.useEffect(()=>()=>v.dispose(),[v]),mc("primitive",{object:m,ref:h,...u,children:[Xt("primitive",{object:v,attach:"geometry"}),Xt("primitive",{object:_,attach:"material",color:e,vertexColors:!!t,resolution:[d.width,d.height],linewidth:i??s,dashed:l,...u})]})});function Lbe(){var n=Object.create(null);function e(s,o){var l=s.id,u=s.name,h=s.dependencies;h===void 0&&(h=[]);var d=s.init;d===void 0&&(d=function(){});var m=s.getTransferables;if(m===void 0&&(m=null),!n[l])try{h=h.map(function(v){return v&&v.isWorkerModule&&(e(v,function(E){if(E instanceof Error)throw E}),v=n[v.id].value),v}),d=i("<"+u+">.init",d),m&&(m=i("<"+u+">.getTransferables",m));var _=null;typeof d=="function"?_=d.apply(void 0,h):console.error("worker module init function failed to rehydrate"),n[l]={id:l,value:_,getTransferables:m},o(_)}catch(v){v&&v.noLog||console.error(v),o(v)}}function t(s,o){var l,u=s.id,h=s.args;(!n[u]||typeof n[u].value!="function")&&o(new Error("Worker module "+u+": not found or its 'init' did not return a function"));try{var d=(l=n[u]).value.apply(l,h);d&&typeof d.then=="function"?d.then(m,function(_){return o(_ instanceof Error?_:new Error(""+_))}):m(d)}catch(_){o(_)}function m(_){try{var v=n[u].getTransferables&&n[u].getTransferables(_);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),o(_,v)}catch(E){console.error(E),o(E)}}}function i(s,o){var l=void 0;self.troikaDefine=function(h){return l=h};var u=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+o+`
)`],{type:"application/javascript"}));try{importScripts(u)}catch(h){console.error(h)}return URL.revokeObjectURL(u),delete self.troikaDefine,l}self.addEventListener("message",function(s){var o=s.data,l=o.messageId,u=o.action,h=o.data;try{u==="registerModule"&&e(h,function(d){d instanceof Error?postMessage({messageId:l,success:!1,error:d.message}):postMessage({messageId:l,success:!0,result:{isCallable:typeof d=="function"}})}),u==="callModule"&&t(h,function(d,m){d instanceof Error?postMessage({messageId:l,success:!1,error:d.message}):postMessage({messageId:l,success:!0,result:d},m||void 0)})}catch(d){postMessage({messageId:l,success:!1,error:d.stack})}})}function Dbe(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(o){return o&&o._getInitResult?o._getInitResult():o}):[];var s=Promise.all(t).then(function(o){return i.apply(null,o)});return e._getInitResult=function(){return s},s},e}var Nj=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u"&&!1||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return Nj=function(){return n},n},Nbe=0,Bbe=0,EO=!1,_S=Object.create(null),vS=Object.create(null),ZD=Object.create(null);function Hw(n){if((!n||typeof n.init!="function")&&!EO)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,s=n.workerId;if(!Nj())return Dbe(n);s==null&&(s="#default");var o="workerModule"+ ++Nbe,l=n.name||o,u=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(EO=!0,d=Hw({workerId:s,name:"<"+l+"> function dependency: "+d.name,init:`function(){return (
`+XM(d)+`
)}`}),EO=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function h(){for(var d=[],m=arguments.length;m--;)d[m]=arguments[m];if(!u){u=b5(s,"registerModule",h.workerModuleData);var _=function(){u=null,vS[s].delete(_)};(vS[s]||(vS[s]=new Set)).add(_)}return u.then(function(v){var E=v.isCallable;if(E)return b5(s,"callModule",{id:o,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return h.workerModuleData={isWorkerModule:!0,id:o,name:l,dependencies:e,init:XM(t),getTransferables:i&&XM(i)},h}function Pbe(n){vS[n]&&vS[n].forEach(function(e){e()}),_S[n]&&(_S[n].terminate(),delete _S[n])}function XM(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function Fbe(n){var e=_S[n];if(!e){var t=XM(Lbe);e=_S[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var s=i.data,o=s.messageId,l=ZD[o];if(!l)throw new Error("WorkerModule response with empty or unknown messageId");delete ZD[o],l(s)}}return e}function b5(n,e,t){return new Promise(function(i,s){var o=++Bbe;ZD[o]=function(l){l.success?i(l.result):s(new Error("Error in worker "+e+" call: "+l.error))},Fbe(n).postMessage({messageId:o,action:e,data:t})})}function Bj(){var n=function(e){function t(Z,ne,le,_e,Oe,xe,Xe,Re){var Je=1-Xe;Re.x=Je*Je*Z+2*Je*Xe*le+Xe*Xe*Oe,Re.y=Je*Je*ne+2*Je*Xe*_e+Xe*Xe*xe}function i(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et){var at=1-Je;et.x=at*at*at*Z+3*at*at*Je*le+3*at*Je*Je*Oe+Je*Je*Je*Xe,et.y=at*at*at*ne+3*at*at*Je*_e+3*at*Je*Je*xe+Je*Je*Je*Re}function s(Z,ne){for(var le=/([MLQCZ])([^MLQCZ]*)/g,_e,Oe,xe,Xe,Re;_e=le.exec(Z);){var Je=_e[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(et){return parseFloat(et)});switch(_e[1]){case"M":Xe=Oe=Je[0],Re=xe=Je[1];break;case"L":(Je[0]!==Xe||Je[1]!==Re)&&ne("L",Xe,Re,Xe=Je[0],Re=Je[1]);break;case"Q":{ne("Q",Xe,Re,Xe=Je[2],Re=Je[3],Je[0],Je[1]);break}case"C":{ne("C",Xe,Re,Xe=Je[4],Re=Je[5],Je[0],Je[1],Je[2],Je[3]);break}case"Z":(Xe!==Oe||Re!==xe)&&ne("L",Xe,Re,Oe,xe);break}}}function o(Z,ne,le){le===void 0&&(le=16);var _e={x:0,y:0};s(Z,function(Oe,xe,Xe,Re,Je,et,at,Qe,De){switch(Oe){case"L":ne(xe,Xe,Re,Je);break;case"Q":{for(var Se=xe,Pe=Xe,rt=1;rt<le;rt++)t(xe,Xe,et,at,Re,Je,rt/(le-1),_e),ne(Se,Pe,_e.x,_e.y),Se=_e.x,Pe=_e.y;break}case"C":{for(var We=xe,wt=Xe,xt=1;xt<le;xt++)i(xe,Xe,et,at,Qe,De,Re,Je,xt/(le-1),_e),ne(We,wt,_e.x,_e.y),We=_e.x,wt=_e.y;break}}})}var l="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",u="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",h=new WeakMap,d={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function m(Z,ne){var le=Z.getContext?Z.getContext("webgl",d):Z,_e=h.get(le);if(!_e){let at=function(We){var wt=xe[We];if(!wt&&(wt=xe[We]=le.getExtension(We),!wt))throw new Error(We+" not supported");return wt},Qe=function(We,wt){var xt=le.createShader(wt);return le.shaderSource(xt,We),le.compileShader(xt),xt},De=function(We,wt,xt,ht){if(!Xe[We]){var St={},It={},mt=le.createProgram();le.attachShader(mt,Qe(wt,le.VERTEX_SHADER)),le.attachShader(mt,Qe(xt,le.FRAGMENT_SHADER)),le.linkProgram(mt),Xe[We]={program:mt,transaction:function(ve){le.useProgram(mt),ve({setUniform:function(ee,ke){for(var ot=[],dt=arguments.length-2;dt-- >0;)ot[dt]=arguments[dt+2];var $t=It[ke]||(It[ke]=le.getUniformLocation(mt,ke));le["uniform"+ee].apply(le,[$t].concat(ot))},setAttribute:function(ee,ke,ot,dt,$t){var ct=St[ee];ct||(ct=St[ee]={buf:le.createBuffer(),loc:le.getAttribLocation(mt,ee),data:null}),le.bindBuffer(le.ARRAY_BUFFER,ct.buf),le.vertexAttribPointer(ct.loc,ke,le.FLOAT,!1,0,0),le.enableVertexAttribArray(ct.loc),Oe?le.vertexAttribDivisor(ct.loc,dt):at("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(ct.loc,dt),$t!==ct.data&&(le.bufferData(le.ARRAY_BUFFER,$t,ot),ct.data=$t)}})}}}Xe[We].transaction(ht)},Se=function(We,wt){Je++;try{le.activeTexture(le.TEXTURE0+Je);var xt=Re[We];xt||(xt=Re[We]=le.createTexture(),le.bindTexture(le.TEXTURE_2D,xt),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.NEAREST),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.NEAREST)),le.bindTexture(le.TEXTURE_2D,xt),wt(xt,Je)}finally{Je--}},Pe=function(We,wt,xt){var ht=le.createFramebuffer();et.push(ht),le.bindFramebuffer(le.FRAMEBUFFER,ht),le.activeTexture(le.TEXTURE0+wt),le.bindTexture(le.TEXTURE_2D,We),le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,We,0);try{xt(ht)}finally{le.deleteFramebuffer(ht),le.bindFramebuffer(le.FRAMEBUFFER,et[--et.length-1]||null)}},rt=function(){xe={},Xe={},Re={},Je=-1,et.length=0};var Oe=typeof WebGL2RenderingContext<"u"&&le instanceof WebGL2RenderingContext,xe={},Xe={},Re={},Je=-1,et=[];le.canvas.addEventListener("webglcontextlost",function(We){rt(),We.preventDefault()},!1),h.set(le,_e={gl:le,isWebGL2:Oe,getExtension:at,withProgram:De,withTexture:Se,withTextureFramebuffer:Pe,handleContextLoss:rt})}ne(_e)}function _(Z,ne,le,_e,Oe,xe,Xe,Re){Xe===void 0&&(Xe=15),Re===void 0&&(Re=null),m(Z,function(Je){var et=Je.gl,at=Je.withProgram,Qe=Je.withTexture;Qe("copy",function(De,Se){et.texImage2D(et.TEXTURE_2D,0,et.RGBA,Oe,xe,0,et.RGBA,et.UNSIGNED_BYTE,ne),at("copy",l,u,function(Pe){var rt=Pe.setUniform,We=Pe.setAttribute;We("aUV",2,et.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),rt("1i","image",Se),et.bindFramebuffer(et.FRAMEBUFFER,Re||null),et.disable(et.BLEND),et.colorMask(Xe&8,Xe&4,Xe&2,Xe&1),et.viewport(le,_e,Oe,xe),et.scissor(le,_e,Oe,xe),et.drawArrays(et.TRIANGLES,0,3)})})})}function v(Z,ne,le){var _e=Z.width,Oe=Z.height;m(Z,function(xe){var Xe=xe.gl,Re=new Uint8Array(_e*Oe*4);Xe.readPixels(0,0,_e,Oe,Xe.RGBA,Xe.UNSIGNED_BYTE,Re),Z.width=ne,Z.height=le,_(Xe,Re,0,0,_e,Oe)})}var E=Object.freeze({__proto__:null,withWebGLContext:m,renderImageData:_,resizeWebGLCanvasWithoutClearing:v});function w(Z,ne,le,_e,Oe,xe){xe===void 0&&(xe=1);var Xe=new Uint8Array(Z*ne),Re=_e[2]-_e[0],Je=_e[3]-_e[1],et=[];o(le,function(We,wt,xt,ht){et.push({x1:We,y1:wt,x2:xt,y2:ht,minX:Math.min(We,xt),minY:Math.min(wt,ht),maxX:Math.max(We,xt),maxY:Math.max(wt,ht)})}),et.sort(function(We,wt){return We.maxX-wt.maxX});for(var at=0;at<Z;at++)for(var Qe=0;Qe<ne;Qe++){var De=Pe(_e[0]+Re*(at+.5)/Z,_e[1]+Je*(Qe+.5)/ne),Se=Math.pow(1-Math.abs(De)/Oe,xe)/2;De<0&&(Se=1-Se),Se=Math.max(0,Math.min(255,Math.round(Se*255))),Xe[Qe*Z+at]=Se}return Xe;function Pe(We,wt){for(var xt=1/0,ht=1/0,St=et.length;St--;){var It=et[St];if(It.maxX+ht<=We)break;if(We+ht>It.minX&&wt-ht<It.maxY&&wt+ht>It.minY){var mt=O(We,wt,It.x1,It.y1,It.x2,It.y2);mt<xt&&(xt=mt,ht=Math.sqrt(xt))}}return rt(We,wt)&&(ht=-ht),ht}function rt(We,wt){for(var xt=0,ht=et.length;ht--;){var St=et[ht];if(St.maxX<=We)break;var It=St.y1>wt!=St.y2>wt&&We<(St.x2-St.x1)*(wt-St.y1)/(St.y2-St.y1)+St.x1;It&&(xt+=St.y1<St.y2?1:-1)}return xt!==0}}function x(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et){xe===void 0&&(xe=1),Re===void 0&&(Re=0),Je===void 0&&(Je=0),et===void 0&&(et=0),A(Z,ne,le,_e,Oe,xe,Xe,null,Re,Je,et)}function A(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et,at){xe===void 0&&(xe=1),Je===void 0&&(Je=0),et===void 0&&(et=0),at===void 0&&(at=0);for(var Qe=w(Z,ne,le,_e,Oe,xe),De=new Uint8Array(Qe.length*4),Se=0;Se<Qe.length;Se++)De[Se*4+at]=Qe[Se];_(Xe,De,Je,et,Z,ne,1<<3-at,Re)}function O(Z,ne,le,_e,Oe,xe){var Xe=Oe-le,Re=xe-_e,Je=Xe*Xe+Re*Re,et=Je?Math.max(0,Math.min(1,((Z-le)*Xe+(ne-_e)*Re)/Je)):0,at=Z-(le+et*Xe),Qe=ne-(_e+et*Re);return at*at+Qe*Qe}var k=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:x,generateIntoFramebuffer:A}),N="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",D="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",U="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",F=new Float32Array([0,0,2,0,0,2]),H=null,z=!1,J={},te=new WeakMap;function re(Z){if(!z&&!ue(Z))throw new Error("WebGL generation not supported")}function ie(Z,ne,le,_e,Oe,xe,Xe){if(xe===void 0&&(xe=1),Xe===void 0&&(Xe=null),!Xe&&(Xe=H,!Xe)){var Re=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Re)throw new Error("OffscreenCanvas or DOM canvas not supported");Xe=H=Re.getContext("webgl",{depth:!1})}re(Xe);var Je=new Uint8Array(Z*ne*4);m(Xe,function(De){var Se=De.gl,Pe=De.withTexture,rt=De.withTextureFramebuffer;Pe("readable",function(We,wt){Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,Z,ne,0,Se.RGBA,Se.UNSIGNED_BYTE,null),rt(We,wt,function(xt){oe(Z,ne,le,_e,Oe,xe,Se,xt,0,0,0),Se.readPixels(0,0,Z,ne,Se.RGBA,Se.UNSIGNED_BYTE,Je)})})});for(var et=new Uint8Array(Z*ne),at=0,Qe=0;at<Je.length;at+=4)et[Qe++]=Je[at];return et}function de(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et){xe===void 0&&(xe=1),Re===void 0&&(Re=0),Je===void 0&&(Je=0),et===void 0&&(et=0),oe(Z,ne,le,_e,Oe,xe,Xe,null,Re,Je,et)}function oe(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et,at){xe===void 0&&(xe=1),Je===void 0&&(Je=0),et===void 0&&(et=0),at===void 0&&(at=0),re(Xe);var Qe=[];o(le,function(De,Se,Pe,rt){Qe.push(De,Se,Pe,rt)}),Qe=new Float32Array(Qe),m(Xe,function(De){var Se=De.gl,Pe=De.isWebGL2,rt=De.getExtension,We=De.withProgram,wt=De.withTexture,xt=De.withTextureFramebuffer,ht=De.handleContextLoss;if(wt("rawDistances",function(St,It){(Z!==St._lastWidth||ne!==St._lastHeight)&&Se.texImage2D(Se.TEXTURE_2D,0,Se.RGBA,St._lastWidth=Z,St._lastHeight=ne,0,Se.RGBA,Se.UNSIGNED_BYTE,null),We("main",N,D,function(mt){var ve=mt.setAttribute,ee=mt.setUniform,ke=!Pe&&rt("ANGLE_instanced_arrays"),ot=!Pe&&rt("EXT_blend_minmax");ve("aUV",2,Se.STATIC_DRAW,0,F),ve("aLineSegment",4,Se.DYNAMIC_DRAW,1,Qe),ee.apply(void 0,["4f","uGlyphBounds"].concat(_e)),ee("1f","uMaxDistance",Oe),ee("1f","uExponent",xe),xt(St,It,function(dt){Se.enable(Se.BLEND),Se.colorMask(!0,!0,!0,!0),Se.viewport(0,0,Z,ne),Se.scissor(0,0,Z,ne),Se.blendFunc(Se.ONE,Se.ONE),Se.blendEquationSeparate(Se.FUNC_ADD,Pe?Se.MAX:ot.MAX_EXT),Se.clear(Se.COLOR_BUFFER_BIT),Pe?Se.drawArraysInstanced(Se.TRIANGLES,0,3,Qe.length/4):ke.drawArraysInstancedANGLE(Se.TRIANGLES,0,3,Qe.length/4)})}),We("post",l,U,function(mt){mt.setAttribute("aUV",2,Se.STATIC_DRAW,0,F),mt.setUniform("1i","tex",It),Se.bindFramebuffer(Se.FRAMEBUFFER,Re),Se.disable(Se.BLEND),Se.colorMask(at===0,at===1,at===2,at===3),Se.viewport(Je,et,Z,ne),Se.scissor(Je,et,Z,ne),Se.drawArrays(Se.TRIANGLES,0,3)})}),Se.isContextLost())throw ht(),new Error("webgl context lost")})}function ue(Z){var ne=!Z||Z===H?J:Z.canvas||Z,le=te.get(ne);if(le===void 0){z=!0;var _e=null;try{var Oe=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],xe=ie(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Z);le=xe&&Oe.length===xe.length&&xe.every(function(Xe,Re){return Xe===Oe[Re]}),le||(_e="bad trial run results",console.info(Oe,xe))}catch(Xe){le=!1,_e=Xe.message}_e&&console.warn("WebGL SDF generation not supported:",_e),z=!1,te.set(ne,le)}return le}var ge=Object.freeze({__proto__:null,generate:ie,generateIntoCanvas:de,generateIntoFramebuffer:oe,isSupported:ue});function Ae(Z,ne,le,_e,Oe,xe){Oe===void 0&&(Oe=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),xe===void 0&&(xe=1);try{return ie.apply(ge,arguments)}catch(Xe){return console.info("WebGL SDF generation failed, falling back to JS",Xe),w.apply(k,arguments)}}function j(Z,ne,le,_e,Oe,xe,Xe,Re,Je,et){Oe===void 0&&(Oe=Math.max(_e[2]-_e[0],_e[3]-_e[1])/2),xe===void 0&&(xe=1),Re===void 0&&(Re=0),Je===void 0&&(Je=0),et===void 0&&(et=0);try{return de.apply(ge,arguments)}catch(at){return console.info("WebGL SDF generation failed, falling back to JS",at),x.apply(k,arguments)}}return e.forEachPathCommand=s,e.generate=Ae,e.generateIntoCanvas=j,e.javascript=k,e.pathToLineSegments=o,e.webgl=ge,e.webglUtils=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function Ube(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},s={};i.L=1,s[1]="L",Object.keys(t).forEach(function(ht,St){i[ht]=1<<St+1,s[i[ht]]=ht}),Object.freeze(i);var o=i.LRI|i.RLI|i.FSI,l=i.L|i.R|i.AL,u=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,h=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,d=i.S|i.WS|i.B|o|i.PDI|h,m=null;function _(){if(!m){m=new Map;var ht=function(It){if(t.hasOwnProperty(It)){var mt=0;t[It].split(",").forEach(function(ve){var ee=ve.split("+"),ke=ee[0],ot=ee[1];ke=parseInt(ke,36),ot=ot?parseInt(ot,36):0,m.set(mt+=ke,i[It]);for(var dt=0;dt<ot;dt++)m.set(++mt,i[It])})}};for(var St in t)ht(St)}}function v(ht){return _(),m.get(ht.codePointAt(0))||i.L}function E(ht){return s[v(ht)]}var w={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(ht,St){var It=36,mt=0,ve=new Map,ee=St&&new Map,ke;return ht.split(",").forEach(function ot(dt){if(dt.indexOf("+")!==-1)for(var $t=+dt;$t--;)ot(ke);else{ke=dt;var ct=dt.split(">"),Ge=ct[0],Me=ct[1];Ge=String.fromCodePoint(mt+=parseInt(Ge,It)),Me=String.fromCodePoint(mt+=parseInt(Me,It)),ve.set(Ge,Me),St&&ee.set(Me,Ge)}}),{map:ve,reverseMap:ee}}var A,O,k;function N(){if(!A){var ht=x(w.pairs,!0),St=ht.map,It=ht.reverseMap;A=St,O=It,k=x(w.canonical,!1).map}}function D(ht){return N(),A.get(ht)||null}function U(ht){return N(),O.get(ht)||null}function F(ht){return N(),k.get(ht)||null}var H=i.L,z=i.R,J=i.EN,te=i.ES,re=i.ET,ie=i.AN,de=i.CS,oe=i.B,ue=i.S,ge=i.ON,Ae=i.BN,j=i.NSM,Z=i.AL,ne=i.LRO,le=i.RLO,_e=i.LRE,Oe=i.RLE,xe=i.PDF,Xe=i.LRI,Re=i.RLI,Je=i.FSI,et=i.PDI;function at(ht,St){for(var It=125,mt=new Uint32Array(ht.length),ve=0;ve<ht.length;ve++)mt[ve]=v(ht[ve]);var ee=new Map;function ke(di,ni){var Un=mt[di];mt[di]=ni,ee.set(Un,ee.get(Un)-1),Un&u&&ee.set(u,ee.get(u)-1),ee.set(ni,(ee.get(ni)||0)+1),ni&u&&ee.set(u,(ee.get(u)||0)+1)}for(var ot=new Uint8Array(ht.length),dt=new Map,$t=[],ct=null,Ge=0;Ge<ht.length;Ge++)ct||$t.push(ct={start:Ge,end:ht.length-1,level:St==="rtl"?1:St==="ltr"?0:ro(Ge,!1)}),mt[Ge]&oe&&(ct.end=Ge,ct=null);for(var Me=Oe|_e|le|ne|o|et|xe|oe,X=function(di){return di+(di&1?1:2)},Q=function(di){return di+(di&1?2:1)},ae=0;ae<$t.length;ae++){ct=$t[ae];var $e=[{_level:ct.level,_override:0,_isolate:0}],Ve=void 0,Pt=0,Fe=0,Wt=0;ee.clear();for(var lt=ct.start;lt<=ct.end;lt++){var Ut=mt[lt];if(Ve=$e[$e.length-1],ee.set(Ut,(ee.get(Ut)||0)+1),Ut&u&&ee.set(u,(ee.get(u)||0)+1),Ut&Me)if(Ut&(Oe|_e)){ot[lt]=Ve._level;var Ft=(Ut===Oe?Q:X)(Ve._level);Ft<=It&&!Pt&&!Fe?$e.push({_level:Ft,_override:0,_isolate:0}):Pt||Fe++}else if(Ut&(le|ne)){ot[lt]=Ve._level;var Tn=(Ut===le?Q:X)(Ve._level);Tn<=It&&!Pt&&!Fe?$e.push({_level:Tn,_override:Ut&le?z:H,_isolate:0}):Pt||Fe++}else if(Ut&o){Ut&Je&&(Ut=ro(lt+1,!0)===1?Re:Xe),ot[lt]=Ve._level,Ve._override&&ke(lt,Ve._override);var Er=(Ut===Re?Q:X)(Ve._level);Er<=It&&Pt===0&&Fe===0?(Wt++,$e.push({_level:Er,_override:0,_isolate:1,_isolInitIndex:lt})):Pt++}else if(Ut&et){if(Pt>0)Pt--;else if(Wt>0){for(Fe=0;!$e[$e.length-1]._isolate;)$e.pop();var cr=$e[$e.length-1]._isolInitIndex;cr!=null&&(dt.set(cr,lt),dt.set(lt,cr)),$e.pop(),Wt--}Ve=$e[$e.length-1],ot[lt]=Ve._level,Ve._override&&ke(lt,Ve._override)}else Ut&xe?(Pt===0&&(Fe>0?Fe--:!Ve._isolate&&$e.length>1&&($e.pop(),Ve=$e[$e.length-1])),ot[lt]=Ve._level):Ut&oe&&(ot[lt]=ct.level);else ot[lt]=Ve._level,Ve._override&&Ut!==Ae&&ke(lt,Ve._override)}for(var Gr=[],sr=null,Xn=ct.start;Xn<=ct.end;Xn++){var q=mt[Xn];if(!(q&h)){var me=ot[Xn],Ne=q&o,nt=q===et;sr&&me===sr._level?(sr._end=Xn,sr._endsWithIsolInit=Ne):Gr.push(sr={_start:Xn,_end:Xn,_level:me,_startsWithPDI:nt,_endsWithIsolInit:Ne})}}for(var Rt=[],Qt=0;Qt<Gr.length;Qt++){var gn=Gr[Qt];if(!gn._startsWithPDI||gn._startsWithPDI&&!dt.has(gn._start)){for(var Ie=[sr=gn],st=void 0;sr&&sr._endsWithIsolInit&&(st=dt.get(sr._end))!=null;)for(var Tt=Qt+1;Tt<Gr.length;Tt++)if(Gr[Tt]._start===st){Ie.push(sr=Gr[Tt]);break}for(var pt=[],Bt=0;Bt<Ie.length;Bt++)for(var xn=Ie[Bt],Bn=xn._start;Bn<=xn._end;Bn++)pt.push(Bn);for(var nr=ot[pt[0]],vr=ct.level,ei=pt[0]-1;ei>=0;ei--)if(!(mt[ei]&h)){vr=ot[ei];break}var $r=pt[pt.length-1],Ar=ot[$r],Wi=ct.level;if(!(mt[$r]&o)){for(var jo=$r+1;jo<=ct.end;jo++)if(!(mt[jo]&h)){Wi=ot[jo];break}}Rt.push({_seqIndices:pt,_sosType:Math.max(vr,nr)%2?z:H,_eosType:Math.max(Wi,Ar)%2?z:H})}}for(var Ro=0;Ro<Rt.length;Ro++){var ll=Rt[Ro],Yt=ll._seqIndices,hr=ll._sosType,fa=ll._eosType;if(ee.get(j))for(var Xo=0;Xo<Yt.length;Xo++){var ps=Yt[Xo];if(mt[ps]&j){for(var fs=hr,ci=Xo-1;ci>=0;ci--)if(!(mt[Yt[ci]]&h)){fs=mt[Yt[ci]];break}ke(ps,fs&(o|et)?ge:fs)}}if(ee.get(J))for(var dr=0;dr<Yt.length;dr++){var pn=Yt[dr];if(mt[pn]&J)for(var ar=dr-1;ar>=-1;ar--){var wr=ar===-1?hr:mt[Yt[ar]];if(wr&l){wr===Z&&ke(pn,ie);break}}}if(ee.get(Z))for(var er=0;er<Yt.length;er++){var hi=Yt[er];mt[hi]&Z&&ke(hi,z)}if(ee.get(te)||ee.get(de))for(var Qi=1;Qi<Yt.length-1;Qi++){var jr=Yt[Qi];if(mt[jr]&(te|de)){for(var Bi=0,Pa=0,ul=Qi-1;ul>=0&&(Bi=mt[Yt[ul]],!!(Bi&h));ul--);for(var gc=Qi+1;gc<Yt.length&&(Pa=mt[Yt[gc]],!!(Pa&h));gc++);Bi===Pa&&(mt[jr]===te?Bi===J:Bi&(J|ie))&&ke(jr,Bi)}}if(ee.get(J))for(var Vu=0;Vu<Yt.length;Vu++){var Rs=Yt[Vu];if(mt[Rs]&J){for(var ko=Vu-1;ko>=0&&mt[Yt[ko]]&(re|h);ko--)ke(Yt[ko],J);for(var uu=Vu+1;uu<Yt.length&&mt[Yt[uu]]&(re|h);uu++)ke(Yt[uu],J)}}if(ee.get(re)||ee.get(te)||ee.get(de))for(var Pl=0;Pl<Yt.length;Pl++){var mh=Yt[Pl];if(mt[mh]&(re|te|de)){ke(mh,ge);for(var Yo=Pl-1;Yo>=0&&mt[Yt[Yo]]&h;Yo--)ke(Yt[Yo],ge);for(var tr=Pl+1;tr<Yt.length&&mt[Yt[tr]]&h;tr++)ke(Yt[tr],ge)}}if(ee.get(J))for(var Pi=0,Gc=hr;Pi<Yt.length;Pi++){var gh=Yt[Pi],_c=mt[gh];_c&J?Gc===H&&ke(gh,H):_c&l&&(Gc=_c)}if(ee.get(u)){var cl=z|J|ie,cu=cl|H,hl=[];{for(var dl=[],Jn=0;Jn<Yt.length;Jn++)if(mt[Yt[Jn]]&u){var Qn=ht[Yt[Jn]],pl=void 0;if(D(Qn)!==null)if(dl.length<63)dl.push({char:Qn,seqIndex:Jn});else break;else if((pl=U(Qn))!==null)for(var Fa=dl.length-1;Fa>=0;Fa--){var ma=dl[Fa].char;if(ma===pl||ma===U(F(Qn))||D(F(ma))===Qn){hl.push([dl[Fa].seqIndex,Jn]),dl.length=Fa;break}}}hl.sort(function(di,ni){return di[0]-ni[0]})}for(var Fl=0;Fl<hl.length;Fl++){for(var Ei=hl[Fl],Fi=Ei[0],fl=Ei[1],Rd=!1,ks=0,hu=Fi+1;hu<fl;hu++){var Oo=Yt[hu];if(mt[Oo]&cu){Rd=!0;var Ul=mt[Oo]&cl?z:H;if(Ul===Ua(Oo)){ks=Ul;break}}}if(Rd&&!ks){ks=hr;for(var Xr=Fi-1;Xr>=0;Xr--){var pr=Yt[Xr];if(mt[pr]&cu){var Vi=mt[pr]&cl?z:H;Vi!==Ua(pr)?ks=Vi:ks=Ua(pr);break}}}if(ks){if(mt[Yt[Fi]]=mt[Yt[fl]]=ks,ks!==Ua(Yt[Fi])){for(var Os=Fi+1;Os<Yt.length;Os++)if(!(mt[Yt[Os]]&h)){v(ht[Yt[Os]])&j&&(mt[Yt[Os]]=ks);break}}if(ks!==Ua(Yt[fl])){for(var du=fl+1;du<Yt.length;du++)if(!(mt[Yt[du]]&h)){v(ht[Yt[du]])&j&&(mt[Yt[du]]=ks);break}}}}for(var zl=0;zl<Yt.length;zl++)if(mt[Yt[zl]]&u){for(var Wc=zl,Ko=zl,Jo=hr,pu=zl-1;pu>=0;pu--)if(mt[Yt[pu]]&h)Wc=pu;else{Jo=mt[Yt[pu]]&cl?z:H;break}for(var Yr=fa,ms=zl+1;ms<Yt.length;ms++)if(mt[Yt[ms]]&(u|h))Ko=ms;else{Yr=mt[Yt[ms]]&cl?z:H;break}for(var Ai=Wc;Ai<=Ko;Ai++)mt[Yt[Ai]]=Jo===Yr?Jo:Ua(Yt[Ai]);zl=Ko}}}for(var ti=ct.start;ti<=ct.end;ti++){var ga=ot[ti],Ui=mt[ti];if(ga&1?Ui&(H|J|ie)&&ot[ti]++:Ui&z?ot[ti]++:Ui&(ie|J)&&(ot[ti]+=2),Ui&h&&(ot[ti]=ti===0?ct.level:ot[ti-1]),ti===ct.end||v(ht[ti])&(ue|oe))for(var fu=ti;fu>=0&&v(ht[fu])&d;fu--)ot[fu]=ct.level}}return{levels:ot,paragraphs:$t};function ro(di,ni){for(var Un=di;Un<ht.length;Un++){var Kr=mt[Un];if(Kr&(z|Z))return 1;if(Kr&(oe|H)||ni&&Kr===et)return 0;if(Kr&o){var $i=mu(Un);Un=$i===-1?ht.length:$i}}return 0}function mu(di){for(var ni=1,Un=di+1;Un<ht.length;Un++){var Kr=mt[Un];if(Kr&oe)break;if(Kr&et){if(--ni===0)return Un}else Kr&o&&ni++}return-1}function Ua(di){return ot[di]&1?z:H}}var Qe="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",De;function Se(){if(!De){var ht=x(Qe,!0),St=ht.map,It=ht.reverseMap;It.forEach(function(mt,ve){St.set(ve,mt)}),De=St}}function Pe(ht){return Se(),De.get(ht)||null}function rt(ht,St,It,mt){var ve=ht.length;It=Math.max(0,It==null?0:+It),mt=Math.min(ve-1,mt==null?ve-1:+mt);for(var ee=new Map,ke=It;ke<=mt;ke++)if(St[ke]&1){var ot=Pe(ht[ke]);ot!==null&&ee.set(ke,ot)}return ee}function We(ht,St,It,mt){var ve=ht.length;It=Math.max(0,It==null?0:+It),mt=Math.min(ve-1,mt==null?ve-1:+mt);var ee=[];return St.paragraphs.forEach(function(ke){var ot=Math.max(It,ke.start),dt=Math.min(mt,ke.end);if(ot<dt){for(var $t=St.levels.slice(ot,dt+1),ct=dt;ct>=ot&&v(ht[ct])&d;ct--)$t[ct]=ke.level;for(var Ge=ke.level,Me=1/0,X=0;X<$t.length;X++){var Q=$t[X];Q>Ge&&(Ge=Q),Q<Me&&(Me=Q|1)}for(var ae=Ge;ae>=Me;ae--)for(var $e=0;$e<$t.length;$e++)if($t[$e]>=ae){for(var Ve=$e;$e+1<$t.length&&$t[$e+1]>=ae;)$e++;$e>Ve&&ee.push([Ve+It,$e+It])}}}),ee}function wt(ht,St,It,mt){var ve=xt(ht,St,It,mt),ee=[].concat(ht);return ve.forEach(function(ke,ot){ee[ot]=(St.levels[ke]&1?Pe(ht[ke]):null)||ht[ke]}),ee.join("")}function xt(ht,St,It,mt){for(var ve=We(ht,St,It,mt),ee=[],ke=0;ke<ht.length;ke++)ee[ke]=ke;return ve.forEach(function(ot){for(var dt=ot[0],$t=ot[1],ct=ee.slice(dt,$t+1),Ge=ct.length;Ge--;)ee[$t-Ge]=ct[Ge]}),ee}return e.closingToOpeningBracket=U,e.getBidiCharType=v,e.getBidiCharTypeName=E,e.getCanonicalBracket=F,e.getEmbeddingLevels=at,e.getMirroredCharacter=Pe,e.getMirroredCharactersMap=rt,e.getReorderSegments=We,e.getReorderedIndices=xt,e.getReorderedString=wt,e.openingToClosingBracket=D,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const Pj=/\bvoid\s+main\s*\(\s*\)\s*{/g;function eN(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,s){let o=bi[s];return o?eN(o):i}return n.replace(e,t)}const Fh=[];for(let n=0;n<256;n++)Fh[n]=(n<16?"0":"")+n.toString(16);function zbe(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Fh[n&255]+Fh[n>>8&255]+Fh[n>>16&255]+Fh[n>>24&255]+"-"+Fh[e&255]+Fh[e>>8&255]+"-"+Fh[e>>16&15|64]+Fh[e>>24&255]+"-"+Fh[t&63|128]+Fh[t>>8&255]+"-"+Fh[t>>16&255]+Fh[t>>24&255]+Fh[i&255]+Fh[i>>8&255]+Fh[i>>16&255]+Fh[i>>24&255]).toUpperCase()}const fy=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let s in i)i.hasOwnProperty(s)&&(n[s]=i[s])}return n},Hbe=Date.now(),T5=new WeakMap,E5=new Map;let Gbe=1e10;function tN(n,e){const t=Xbe(e);let i=T5.get(n);if(i||T5.set(n,i=Object.create(null)),i[t])return new i[t];const s=`_onBeforeCompile${t}`,o=function(d){n.onBeforeCompile.call(this,d);const m=this.customProgramCacheKey()+"|"+d.vertexShader+"|"+d.fragmentShader;let _=E5[m];if(!_){const v=Wbe(d,e,t);_=E5[m]=v}d.vertexShader=_.vertexShader,d.fragmentShader=_.fragmentShader,fy(d.uniforms,this.uniforms),e.timeUniform&&(d.uniforms[e.timeUniform]={get value(){return Date.now()-Hbe}}),this[s]&&this[s](d)},l=function(){return u(e.chained?n:n.clone())},u=function(d){const m=Object.create(d,h);return Object.defineProperty(m,"baseMaterial",{value:n}),Object.defineProperty(m,"id",{value:Gbe++}),m.uuid=zbe(),m.uniforms=fy({},d.uniforms,e.uniforms),m.defines=fy({},d.defines,e.defines),m.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",m.extensions=fy({},d.extensions,e.extensions),m._listeners=void 0,m},h={constructor:{value:l},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return o},set(d){this[s]=d}},copy:{writable:!0,configurable:!0,value:function(d){return n.copy.call(this,d),!n.isShaderMaterial&&!n.isDerivedMaterial&&(fy(this.extensions,d.extensions),fy(this.defines,d.defines),fy(this.uniforms,Dw.clone(d.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const d=new n.constructor;return u(d).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let d=this._depthMaterial;return d||(d=this._depthMaterial=tN(n.isDerivedMaterial?n.getDepthMaterial():new Bw({depthPacking:NT}),e),d.defines.IS_DEPTH_MATERIAL="",d.uniforms=this.uniforms),d}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let d=this._distanceMaterial;return d||(d=this._distanceMaterial=tN(n.isDerivedMaterial?n.getDistanceMaterial():new gR,e),d.defines.IS_DISTANCE_MATERIAL="",d.uniforms=this.uniforms),d}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:d,_distanceMaterial:m}=this;d&&d.dispose(),m&&m.dispose(),n.dispose.call(this)}}};return i[t]=l,new l}function Wbe({vertexShader:n,fragmentShader:e},t,i){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:l,vertexTransform:u,fragmentDefs:h,fragmentMainIntro:d,fragmentMainOutro:m,fragmentColorTransform:_,customRewriter:v,timeUniform:E}=t;if(s=s||"",o=o||"",l=l||"",h=h||"",d=d||"",m=m||"",(u||v)&&(n=eN(n)),(_||v)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=eN(e)),v){let w=v({vertexShader:n,fragmentShader:e});n=w.vertexShader,e=w.fragmentShader}if(_){let w=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,x=>(w.push(x),"")),m=`${_}
${w.join(`
`)}
${m}`}if(E){const w=`
uniform float ${E};
`;s=w+s,h=w+h}return u&&(n=`vec3 troika_position_${i};
vec3 troika_normal_${i};
vec2 troika_uv_${i};
${n}
`,s=`${s}
void troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,o=`
troika_position_${i} = vec3(position);
troika_normal_${i} = vec3(normal);
troika_uv_${i} = vec2(uv);
troikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});
${o}
`,n=n.replace(/\b(position|normal|uv)\b/g,(w,x,A,O)=>/\battribute\s+vec[23]\s+$/.test(O.substr(0,A))?x:`troika_${x}_${i}`)),n=$5(n,i,s,o,l),e=$5(e,i,h,d,m),{vertexShader:n,fragmentShader:e}}function $5(n,e,t,i,s){return(i||s||t)&&(n=n.replace(Pj,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${s}
}`),n}function Vbe(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let jbe=0;const S5=new Map;function Xbe(n){const e=JSON.stringify(n,Vbe);let t=S5.get(e);return t==null&&S5.set(e,t=++jbe),t}function Ybe(n,e,t){const{defaultFontURL:i}=t,s=Object.create(null),o=1/0,l=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,u="[^\\S\\u00A0]",h=new RegExp(`${u}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function d(k,N){function D(){const U=F=>{console.error(`Failure loading font ${k}${k===i?"":"; trying fallback"}`,F),k!==i&&(k=i,D())};try{const F=new XMLHttpRequest;F.open("get",k,!0),F.responseType="arraybuffer",F.onload=function(){if(F.status>=400)U(new Error(F.statusText));else if(F.status>0)try{const H=n(F.response);N(H)}catch(H){U(H)}},F.onerror=U,F.send()}catch(F){U(F)}}D()}function m(k,N){k||(k=i);let D=s[k];D?D.pending?D.pending.push(N):N(D):(s[k]={pending:[N]},d(k,U=>{let F=s[k].pending;s[k]=U,F.forEach(H=>H(U))}))}function _({text:k="",font:N=i,sdfGlyphSize:D=64,fontSize:U=1,letterSpacing:F=0,lineHeight:H="normal",maxWidth:z=o,direction:J,textAlign:te="left",textIndent:re=0,whiteSpace:ie="normal",overflowWrap:de="normal",anchorX:oe=0,anchorY:ue=0,includeCaretPositions:ge=!1,chunkedBoundsSize:Ae=8192,colorRanges:j=null},Z,ne=!1){const le=x(),_e={fontLoad:0,typesetting:0};k.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),k=k.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),U=+U,F=+F,z=+z,H=H||"normal",re=+re,m(N,Oe=>{const xe=isFinite(z);let Xe=null,Re=null,Je=null,et=null,at=null,Qe=null,De=null,Se=0,Pe=0,rt=ie!=="nowrap";const{ascender:We,descender:wt,unitsPerEm:xt,lineGap:ht,capHeight:St,xHeight:It}=Oe;_e.fontLoad=x()-le;const mt=x(),ve=U/xt;H==="normal"&&(H=(We-wt+ht)/xt),H=H*U;const ee=(H-(We-wt)*ve)/2,ke=-(We*ve+ee),ot=Math.min(H,(We-wt)*ve),dt=(We+wt)/2*ve-ot/2;let $t=re,ct=new A;const Ge=[ct];Oe.forEachGlyph(k,U,F,(Q,ae,$e)=>{const Ve=k.charAt($e),Pt=Q.advanceWidth*ve,Fe=ct.count;let Wt;if("isEmpty"in Q||(Q.isWhitespace=!!Ve&&new RegExp(u).test(Ve),Q.canBreakAfter=!!Ve&&h.test(Ve),Q.isEmpty=Q.xMin===Q.xMax||Q.yMin===Q.yMax||l.test(Ve)),!Q.isWhitespace&&!Q.isEmpty&&Pe++,rt&&xe&&!Q.isWhitespace&&ae+Pt+$t>z&&Fe){if(ct.glyphAt(Fe-1).glyphObj.canBreakAfter)Wt=new A,$t=-ae;else for(let Ut=Fe;Ut--;)if(Ut===0&&de==="break-word"){Wt=new A,$t=-ae;break}else if(ct.glyphAt(Ut).glyphObj.canBreakAfter){Wt=ct.splitAt(Ut+1);const Ft=Wt.glyphAt(0).x;$t-=Ft;for(let Tn=Wt.count;Tn--;)Wt.glyphAt(Tn).x-=Ft;break}Wt&&(ct.isSoftWrapped=!0,ct=Wt,Ge.push(ct),Se=z)}let lt=ct.glyphAt(ct.count);lt.glyphObj=Q,lt.x=ae+$t,lt.width=Pt,lt.charIndex=$e,Ve===`
`&&(ct=new A,Ge.push(ct),$t=-(ae+Pt+F*U)+re)}),Ge.forEach(Q=>{for(let ae=Q.count;ae--;){let{glyphObj:$e,x:Ve,width:Pt}=Q.glyphAt(ae);if(!$e.isWhitespace){Q.width=Ve+Pt,Q.width>Se&&(Se=Q.width);return}}});let Me=0,X=0;if(oe&&(typeof oe=="number"?Me=-oe:typeof oe=="string"&&(Me=-Se*(oe==="left"?0:oe==="center"?.5:oe==="right"?1:E(oe)))),ue){if(typeof ue=="number")X=-ue;else if(typeof ue=="string"){let Q=Ge.length*H;X=ue==="top"?0:ue==="top-baseline"?-ke:ue==="top-cap"?-ke-St*ve:ue==="top-ex"?-ke-It*ve:ue==="middle"?Q/2:ue==="bottom"?Q:ue==="bottom-baseline"?Q-ee+wt*ve:E(ue)*Q}}if(!ne){const Q=e.getEmbeddingLevels(k,J);Xe=new Uint16Array(Pe),Re=new Float32Array(Pe*2),Je={},Qe=[o,o,-o,-o],De=[];let ae=ke;ge&&(at=new Float32Array(k.length*3)),j&&(et=new Uint8Array(Pe*3));let $e=0,Ve=-1,Pt=-1,Fe,Wt;if(Ge.forEach((lt,Ut)=>{let{count:Ft,width:Tn}=lt;if(Ft>0){let Er=0;for(let me=Ft;me--&&lt.glyphAt(me).glyphObj.isWhitespace;)Er++;let cr=0,Gr=0;if(te==="center")cr=(Se-Tn)/2;else if(te==="right")cr=Se-Tn;else if(te==="justify"&&lt.isSoftWrapped){let me=0;for(let Ne=Ft-Er;Ne--;)lt.glyphAt(Ne).glyphObj.isWhitespace&&me++;Gr=(Se-Tn)/me}if(Gr||cr){let me=0;for(let Ne=0;Ne<Ft;Ne++){let nt=lt.glyphAt(Ne);const Rt=nt.glyphObj;nt.x+=cr+me,Gr!==0&&Rt.isWhitespace&&Ne<Ft-Er&&(me+=Gr,nt.width+=Gr)}}const sr=e.getReorderSegments(k,Q,lt.glyphAt(0).charIndex,lt.glyphAt(lt.count-1).charIndex);for(let me=0;me<sr.length;me++){const[Ne,nt]=sr[me];let Rt=1/0,Qt=-1/0;for(let gn=0;gn<Ft;gn++)if(lt.glyphAt(gn).charIndex>=Ne){let Ie=gn,st=gn;for(;st<Ft;st++){let Tt=lt.glyphAt(st);if(Tt.charIndex>nt)break;st<Ft-Er&&(Rt=Math.min(Rt,Tt.x),Qt=Math.max(Qt,Tt.x+Tt.width))}for(let Tt=Ie;Tt<st;Tt++){const pt=lt.glyphAt(Tt);pt.x=Qt-(pt.x+pt.width-Rt)}break}}let Xn;const q=me=>Xn=me;for(let me=0;me<Ft;me++){let Ne=lt.glyphAt(me);Xn=Ne.glyphObj;const nt=Xn.index,Rt=Q.levels[Ne.charIndex]&1;if(Rt){const Qt=e.getMirroredCharacter(k[Ne.charIndex]);Qt&&Oe.forEachGlyph(Qt,0,0,q)}if(ge){const{charIndex:Qt}=Ne,gn=Ne.x+Me,Ie=Ne.x+Ne.width+Me;at[Qt*3]=Rt?Ie:gn,at[Qt*3+1]=Rt?gn:Ie,at[Qt*3+2]=ae+dt+X;const st=Qt-Ve;st>1&&w(at,Ve,st),Ve=Qt}if(j){const{charIndex:Qt}=Ne;for(;Qt>Pt;)Pt++,j.hasOwnProperty(Pt)&&(Wt=j[Pt])}if(!Xn.isWhitespace&&!Xn.isEmpty){const Qt=$e++;Je[nt]||(Je[nt]={path:Xn.path,pathBounds:[Xn.xMin,Xn.yMin,Xn.xMax,Xn.yMax]});const gn=Ne.x+Me,Ie=ae+X;Re[Qt*2]=gn,Re[Qt*2+1]=Ie;const st=gn+Xn.xMin*ve,Tt=Ie+Xn.yMin*ve,pt=gn+Xn.xMax*ve,Bt=Ie+Xn.yMax*ve;st<Qe[0]&&(Qe[0]=st),Tt<Qe[1]&&(Qe[1]=Tt),pt>Qe[2]&&(Qe[2]=pt),Bt>Qe[3]&&(Qe[3]=Bt),Qt%Ae===0&&(Fe={start:Qt,end:Qt,rect:[o,o,-o,-o]},De.push(Fe)),Fe.end++;const xn=Fe.rect;if(st<xn[0]&&(xn[0]=st),Tt<xn[1]&&(xn[1]=Tt),pt>xn[2]&&(xn[2]=pt),Bt>xn[3]&&(xn[3]=Bt),Xe[Qt]=nt,j){const Bn=Qt*3;et[Bn]=Wt>>16&255,et[Bn+1]=Wt>>8&255,et[Bn+2]=Wt&255}}}}ae-=H}),at){const lt=k.length-Ve;lt>1&&w(at,Ve,lt)}}_e.typesetting=x()-mt,Z({glyphIds:Xe,glyphPositions:Re,glyphData:Je,caretPositions:at,caretHeight:ot,glyphColors:et,chunkedBounds:De,fontSize:U,unitsPerEm:xt,ascender:We*ve,descender:wt*ve,capHeight:St*ve,xHeight:It*ve,lineHeight:H,topBaseline:ke,blockBounds:[Me,X-Ge.length*H,Me+Se,X],visibleBounds:Qe,timings:_e})})}function v(k,N){_(k,D=>{const[U,F,H,z]=D.blockBounds;N({width:H-U,height:z-F})},{metricsOnly:!0})}function E(k){let N=k.match(/^([\d.]+)%$/),D=N?parseFloat(N[1]):NaN;return isNaN(D)?0:D/100}function w(k,N,D){const U=k[N*3],F=k[N*3+1],H=k[N*3+2],z=(F-U)/D;for(let J=0;J<D;J++){const te=(N+J)*3;k[te]=U+z*J,k[te+1]=U+z*(J+1),k[te+2]=H}}function x(){return(self.performance||Date).now()}function A(){this.data=[]}const O=["glyphObj","x","width","charIndex"];return A.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/O.length)},glyphAt(k){let N=A.flyweight;return N.data=this.data,N.index=k,N},splitAt(k){let N=new A;return N.data=this.data.splice(k*O.length),N}},A.flyweight=O.reduce((k,N,D,U)=>(Object.defineProperty(k,N,{get(){return this.data[this.index*O.length+D]},set(F){this.data[this.index*O.length+D]=F}}),k),{data:null,index:0}),{typeset:_,measure:v,loadFont:m}}const Zy=()=>(self.performance||Date).now(),AR=Bj();let w5;function Kbe(n,e,t,i,s,o,l,u,h,d,m=!0){return m?Qbe(n,e,t,i,s,o,l,u,h,d).then(null,_=>(w5||(console.warn("WebGL SDF generation failed, falling back to JS",_),w5=!0),C5(n,e,t,i,s,o,l,u,h,d))):C5(n,e,t,i,s,o,l,u,h,d)}const YM=[],Jbe=5;let nN=0;function Fj(){const n=Zy();for(;YM.length&&Zy()-n<Jbe;)YM.shift()();nN=YM.length?setTimeout(Fj,0):0}const Qbe=(...n)=>new Promise((e,t)=>{YM.push(()=>{const i=Zy();try{AR.webgl.generateIntoCanvas(...n),e({timing:Zy()-i})}catch(s){t(s)}}),nN||(nN=setTimeout(Fj,0))}),qbe=4,Zbe=2e3,x5={};let e1e=0;function C5(n,e,t,i,s,o,l,u,h,d){const m="TroikaTextSDFGenerator_JS_"+e1e++%qbe;let _=x5[m];return _||(_=x5[m]={workerModule:Hw({name:m,workerId:m,dependencies:[Bj,Zy],init(v,E){const w=v().javascript.generate;return function(...x){const A=E();return{textureData:w(...x),timing:E()-A}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),_.requests++,clearTimeout(_.idleTimer),_.workerModule(n,e,t,i,s,o).then(({textureData:v,timing:E})=>{const w=Zy(),x=new Uint8Array(v.length*4);for(let A=0;A<v.length;A++)x[A*4+d]=v[A];return AR.webglUtils.renderImageData(l,x,u,h,n,e,1<<3-d),E+=Zy()-w,--_.requests===0&&(_.idleTimer=setTimeout(()=>{Pbe(m)},Zbe)),{timing:E}})}function t1e(n){n._warm||(AR.webgl.isSupported(n),n._warm=!0)}const n1e=AR.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function r1e(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(s){var o=e._bin,l=new Uint8Array(s);if(o.readASCII(l,0,4)=="ttcf"){var u=4;o.readUshort(l,u),u+=2,o.readUshort(l,u),u+=2;var h=o.readUint(l,u);u+=4;for(var d=[],m=0;m<h;m++){var _=o.readUint(l,u);u+=4,d.push(e._readFont(l,_))}return d}return[e._readFont(l,0)]},_readFont:function(s,o){var l=e._bin,u=o;l.readFixed(s,o),o+=4;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2;for(var d=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],m={_data:s,_offset:u},_={},v=0;v<h;v++){var E=l.readASCII(s,o,4);o+=4,l.readUint(s,o),o+=4;var w=l.readUint(s,o);o+=4;var x=l.readUint(s,o);o+=4,_[E]={offset:w,length:x}}for(v=0;v<d.length;v++){var A=d[v];_[A]&&(m[A.trim()]=e[A.trim()].parse(s,_[A].offset,_[A].length,m))}return m},_tabOffset:function(s,o,l){for(var u=e._bin,h=u.readUshort(s,l+4),d=l+12,m=0;m<h;m++){var _=u.readASCII(s,d,4);d+=4,u.readUint(s,d),d+=4;var v=u.readUint(s,d);if(d+=4,u.readUint(s,d),d+=4,_==o)return v}return 0}};e._bin={readFixed:function(s,o){return(s[o]<<8|s[o+1])+(s[o+2]<<8|s[o+3])/65540},readF2dot14:function(s,o){return e._bin.readShort(s,o)/16384},readInt:function(s,o){return e._bin._view(s).getInt32(o)},readInt8:function(s,o){return e._bin._view(s).getInt8(o)},readShort:function(s,o){return e._bin._view(s).getInt16(o)},readUshort:function(s,o){return e._bin._view(s).getUint16(o)},readUshorts:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(e._bin.readUshort(s,o+2*h));return u},readUint:function(s,o){return e._bin._view(s).getUint32(o)},readUint64:function(s,o){return 4294967296*e._bin.readUint(s,o)+e._bin.readUint(s,o+4)},readASCII:function(s,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(s[o+h]);return u},readUnicode:function(s,o,l){for(var u="",h=0;h<l;h++){var d=s[o++]<<8|s[o++];u+=String.fromCharCode(d)}return u},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,o,l){var u=e._bin._tdec;return u&&o==0&&l==s.length?u.decode(s):e._bin.readASCII(s,o,l)},readBytes:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(s[o+h]);return u},readASCIIArray:function(s,o,l){for(var u=[],h=0;h<l;h++)u.push(String.fromCharCode(s[o+h]));return u},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,o,l,u,h){var d=e._bin,m={},_=o;d.readFixed(s,o),o+=4;var v=d.readUshort(s,o);o+=2;var E=d.readUshort(s,o);o+=2;var w=d.readUshort(s,o);return o+=2,m.scriptList=e._lctf.readScriptList(s,_+v),m.featureList=e._lctf.readFeatureList(s,_+E),m.lookupList=e._lctf.readLookupList(s,_+w,h),m},e._lctf.readLookupList=function(s,o,l){var u=e._bin,h=o,d=[],m=u.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=u.readUshort(s,o);o+=2;var E=e._lctf.readLookupTable(s,h+v,l);d.push(E)}return d},e._lctf.readLookupTable=function(s,o,l){var u=e._bin,h=o,d={tabs:[]};d.ltype=u.readUshort(s,o),o+=2,d.flag=u.readUshort(s,o),o+=2;var m=u.readUshort(s,o);o+=2;for(var _=d.ltype,v=0;v<m;v++){var E=u.readUshort(s,o);o+=2;var w=l(s,_,h+E,d);d.tabs.push(w)}return d},e._lctf.numOfOnes=function(s){for(var o=0,l=0;l<32;l++)s>>>l&1&&o++;return o},e._lctf.readClassDef=function(s,o){var l=e._bin,u=[],h=l.readUshort(s,o);if(o+=2,h==1){var d=l.readUshort(s,o);o+=2;var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++)u.push(d+_),u.push(d+_),u.push(l.readUshort(s,o)),o+=2}if(h==2){var v=l.readUshort(s,o);for(o+=2,_=0;_<v;_++)u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2,u.push(l.readUshort(s,o)),o+=2}return u},e._lctf.getInterval=function(s,o){for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1];if(s[l+2],u<=o&&o<=h)return l}return-1},e._lctf.readCoverage=function(s,o){var l=e._bin,u={};u.fmt=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.fmt==1&&(u.tab=l.readUshorts(s,o,h)),u.fmt==2&&(u.tab=l.readUshorts(s,o,3*h)),u},e._lctf.coverageIndex=function(s,o){var l=s.tab;if(s.fmt==1)return l.indexOf(o);if(s.fmt==2){var u=e._lctf.getInterval(l,o);if(u!=-1)return l[u+2]+(o-l[u])}return-1},e._lctf.readFeatureList=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2;var E=e._lctf.readFeatureTable(s,u+v);E.tag=_.trim(),h.push(E)}return h},e._lctf.readFeatureTable=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2,d>0&&(h.featureParams=u+d);var m=l.readUshort(s,o);o+=2,h.tab=[];for(var _=0;_<m;_++)h.tab.push(l.readUshort(s,o+2*_));return h},e._lctf.readScriptList=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readASCII(s,o,4);o+=4;var v=l.readUshort(s,o);o+=2,h[_.trim()]=e._lctf.readScriptTable(s,u+v)}return h},e._lctf.readScriptTable=function(s,o){var l=e._bin,u=o,h={},d=l.readUshort(s,o);o+=2,h.default=e._lctf.readLangSysTable(s,u+d);var m=l.readUshort(s,o);o+=2;for(var _=0;_<m;_++){var v=l.readASCII(s,o,4);o+=4;var E=l.readUshort(s,o);o+=2,h[v.trim()]=e._lctf.readLangSysTable(s,u+E)}return h},e._lctf.readLangSysTable=function(s,o){var l=e._bin,u={};l.readUshort(s,o),o+=2,u.reqFeature=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);return o+=2,u.features=l.readUshorts(s,o,h),u},e.CFF={},e.CFF.parse=function(s,o,l){var u=e._bin;(s=new Uint8Array(s.buffer,o,l))[o=0],s[++o],s[++o],s[++o],o++;var h=[];o=e.CFF.readIndex(s,o,h);for(var d=[],m=0;m<h.length-1;m++)d.push(u.readASCII(s,o+h[m],h[m+1]-h[m]));o+=h[h.length-1];var _=[];o=e.CFF.readIndex(s,o,_);var v=[];for(m=0;m<_.length-1;m++)v.push(e.CFF.readDict(s,o+_[m],o+_[m+1]));o+=_[_.length-1];var E=v[0],w=[];o=e.CFF.readIndex(s,o,w);var x=[];for(m=0;m<w.length-1;m++)x.push(u.readASCII(s,o+w[m],w[m+1]-w[m]));if(o+=w[w.length-1],e.CFF.readSubrs(s,o,E),E.CharStrings){o=E.CharStrings,w=[],o=e.CFF.readIndex(s,o,w);var A=[];for(m=0;m<w.length-1;m++)A.push(u.readBytes(s,o+w[m],w[m+1]-w[m]));E.CharStrings=A}if(E.ROS){o=E.FDArray;var O=[];for(o=e.CFF.readIndex(s,o,O),E.FDArray=[],m=0;m<O.length-1;m++){var k=e.CFF.readDict(s,o+O[m],o+O[m+1]);e.CFF._readFDict(s,k,x),E.FDArray.push(k)}o+=O[O.length-1],o=E.FDSelect,E.FDSelect=[];var N=s[o];if(o++,N!=3)throw N;var D=u.readUshort(s,o);for(o+=2,m=0;m<D+1;m++)E.FDSelect.push(u.readUshort(s,o),s[o+2]),o+=3}return E.Encoding&&(E.Encoding=e.CFF.readEncoding(s,E.Encoding,E.CharStrings.length)),E.charset&&(E.charset=e.CFF.readCharset(s,E.charset,E.CharStrings.length)),e.CFF._readFDict(s,E,x),E},e.CFF._readFDict=function(s,o,l){var u;for(var h in o.Private&&(u=o.Private[1],o.Private=e.CFF.readDict(s,u,u+o.Private[0]),o.Private.Subrs&&e.CFF.readSubrs(s,u+o.Private.Subrs,o.Private)),o)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(h)!=-1&&(o[h]=l[o[h]-426+35])},e.CFF.readSubrs=function(s,o,l){var u=e._bin,h=[];o=e.CFF.readIndex(s,o,h);var d,m=h.length;d=m<1240?107:m<33900?1131:32768,l.Bias=d,l.Subrs=[];for(var _=0;_<h.length-1;_++)l.Subrs.push(u.readBytes(s,o+h[_],h[_+1]-h[_]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,o){for(var l=0;l<s.charset.length;l++)if(s.charset[l]==o)return l;return-1},e.CFF.glyphBySE=function(s,o){return o<0||o>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[o])},e.CFF.readEncoding=function(s,o,l){e._bin;var u=[".notdef"],h=s[o];if(o++,h!=0)throw"error: unknown encoding format: "+h;var d=s[o];o++;for(var m=0;m<d;m++)u.push(s[o+m]);return u},e.CFF.readCharset=function(s,o,l){var u=e._bin,h=[".notdef"],d=s[o];if(o++,d==0)for(var m=0;m<l;m++){var _=u.readUshort(s,o);o+=2,h.push(_)}else{if(d!=1&&d!=2)throw"error: format: "+d;for(;h.length<l;){_=u.readUshort(s,o),o+=2;var v=0;for(d==1?(v=s[o],o++):(v=u.readUshort(s,o),o+=2),m=0;m<=v;m++)h.push(_),_++}}return h},e.CFF.readIndex=function(s,o,l){var u=e._bin,h=u.readUshort(s,o)+1,d=s[o+=2];if(o++,d==1)for(var m=0;m<h;m++)l.push(s[o+m]);else if(d==2)for(m=0;m<h;m++)l.push(u.readUshort(s,o+2*m));else if(d==3)for(m=0;m<h;m++)l.push(16777215&u.readUint(s,o+3*m-1));else if(h!=1)throw"unsupported offset size: "+d+", count: "+h;return(o+=h*d)-1},e.CFF.getCharString=function(s,o,l){var u=e._bin,h=s[o],d=s[o+1];s[o+2],s[o+3],s[o+4];var m=1,_=null,v=null;h<=20&&(_=h,m=1),h==12&&(_=100*h+d,m=2),21<=h&&h<=27&&(_=h,m=1),h==28&&(v=u.readShort(s,o+1),m=3),29<=h&&h<=31&&(_=h,m=1),32<=h&&h<=246&&(v=h-139,m=1),247<=h&&h<=250&&(v=256*(h-247)+d+108,m=2),251<=h&&h<=254&&(v=256*-(h-251)-d-108,m=2),h==255&&(v=u.readInt(s,o+1)/65535,m=5),l.val=v??"o"+_,l.size=m},e.CFF.readCharString=function(s,o,l){for(var u=o+l,h=e._bin,d=[];o<u;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,E=null,w=null;m<=20&&(E=m,v=1),m==12&&(E=100*m+_,v=2),m!=19&&m!=20||(E=m,v=2),21<=m&&m<=27&&(E=m,v=1),m==28&&(w=h.readShort(s,o+1),v=3),29<=m&&m<=31&&(E=m,v=1),32<=m&&m<=246&&(w=m-139,v=1),247<=m&&m<=250&&(w=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(w=256*-(m-251)-_-108,v=2),m==255&&(w=h.readInt(s,o+1)/65535,v=5),d.push(w??"o"+E),o+=v}return d},e.CFF.readDict=function(s,o,l){for(var u=e._bin,h={},d=[];o<l;){var m=s[o],_=s[o+1];s[o+2],s[o+3],s[o+4];var v=1,E=null,w=null;if(m==28&&(w=u.readShort(s,o+1),v=3),m==29&&(w=u.readInt(s,o+1),v=5),32<=m&&m<=246&&(w=m-139,v=1),247<=m&&m<=250&&(w=256*(m-247)+_+108,v=2),251<=m&&m<=254&&(w=256*-(m-251)-_-108,v=2),m==255)throw w=u.readInt(s,o+1)/65535,v=5,"unknown number";if(m==30){var x=[];for(v=1;;){var A=s[o+v];v++;var O=A>>4,k=15&A;if(O!=15&&x.push(O),k!=15&&x.push(k),k==15)break}for(var N="",D=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],U=0;U<x.length;U++)N+=D[x[U]];w=parseFloat(N)}m<=21&&(E=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][m],v=1,m==12&&(E=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][_],v=2)),E!=null?(h[E]=d.length==1?d[0]:d,d=[]):d.push(w),o+=v}return h},e.cmap={},e.cmap.parse=function(s,o,l){s=new Uint8Array(s.buffer,o,l),o=0;var u=e._bin,h={};u.readUshort(s,o),o+=2;var d=u.readUshort(s,o);o+=2;var m=[];h.tables=[];for(var _=0;_<d;_++){var v=u.readUshort(s,o);o+=2;var E=u.readUshort(s,o);o+=2;var w=u.readUint(s,o);o+=4;var x="p"+v+"e"+E,A=m.indexOf(w);if(A==-1){var O;A=h.tables.length,m.push(w);var k=u.readUshort(s,w);k==0?O=e.cmap.parse0(s,w):k==4?O=e.cmap.parse4(s,w):k==6?O=e.cmap.parse6(s,w):k==12?O=e.cmap.parse12(s,w):console.debug("unknown format: "+k,v,E,w),h.tables.push(O)}if(h[x]!=null)throw"multiple tables for one platform+encoding";h[x]=A}return h},e.cmap.parse0=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2,u.map=[];for(var d=0;d<h-6;d++)u.map.push(s[o+d]);return u},e.cmap.parse4=function(s,o){var l=e._bin,u=o,h={};h.format=l.readUshort(s,o),o+=2;var d=l.readUshort(s,o);o+=2,l.readUshort(s,o),o+=2;var m=l.readUshort(s,o);o+=2;var _=m/2;h.searchRange=l.readUshort(s,o),o+=2,h.entrySelector=l.readUshort(s,o),o+=2,h.rangeShift=l.readUshort(s,o),o+=2,h.endCount=l.readUshorts(s,o,_),o+=2*_,o+=2,h.startCount=l.readUshorts(s,o,_),o+=2*_,h.idDelta=[];for(var v=0;v<_;v++)h.idDelta.push(l.readShort(s,o)),o+=2;for(h.idRangeOffset=l.readUshorts(s,o,_),o+=2*_,h.glyphIdArray=[];o<u+d;)h.glyphIdArray.push(l.readUshort(s,o)),o+=2;return h},e.cmap.parse6=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,l.readUshort(s,o),o+=2,u.firstCode=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2,u.glyphIdArray=[];for(var d=0;d<h;d++)u.glyphIdArray.push(l.readUshort(s,o)),o+=2;return u},e.cmap.parse12=function(s,o){var l=e._bin,u={};u.format=l.readUshort(s,o),o+=2,o+=2,l.readUint(s,o),o+=4,l.readUint(s,o),o+=4;var h=l.readUint(s,o);o+=4,u.groups=[];for(var d=0;d<h;d++){var m=o+12*d,_=l.readUint(s,m+0),v=l.readUint(s,m+4),E=l.readUint(s,m+8);u.groups.push([_,v,E])}return u},e.glyf={},e.glyf.parse=function(s,o,l,u){for(var h=[],d=0;d<u.maxp.numGlyphs;d++)h.push(null);return h},e.glyf._parseGlyf=function(s,o){var l=e._bin,u=s._data,h=e._tabOffset(u,"glyf",s._offset)+s.loca[o];if(s.loca[o]==s.loca[o+1])return null;var d={};if(d.noc=l.readShort(u,h),h+=2,d.xMin=l.readShort(u,h),h+=2,d.yMin=l.readShort(u,h),h+=2,d.xMax=l.readShort(u,h),h+=2,d.yMax=l.readShort(u,h),h+=2,d.xMin>=d.xMax||d.yMin>=d.yMax)return null;if(d.noc>0){d.endPts=[];for(var m=0;m<d.noc;m++)d.endPts.push(l.readUshort(u,h)),h+=2;var _=l.readUshort(u,h);if(h+=2,u.length-h<_)return null;d.instructions=l.readBytes(u,h,_),h+=_;var v=d.endPts[d.noc-1]+1;for(d.flags=[],m=0;m<v;m++){var E=u[h];if(h++,d.flags.push(E),(8&E)!=0){var w=u[h];h++;for(var x=0;x<w;x++)d.flags.push(E),m++}}for(d.xs=[],m=0;m<v;m++){var A=(2&d.flags[m])!=0,O=(16&d.flags[m])!=0;A?(d.xs.push(O?u[h]:-u[h]),h++):O?d.xs.push(0):(d.xs.push(l.readShort(u,h)),h+=2)}for(d.ys=[],m=0;m<v;m++)A=(4&d.flags[m])!=0,O=(32&d.flags[m])!=0,A?(d.ys.push(O?u[h]:-u[h]),h++):O?d.ys.push(0):(d.ys.push(l.readShort(u,h)),h+=2);var k=0,N=0;for(m=0;m<v;m++)k+=d.xs[m],N+=d.ys[m],d.xs[m]=k,d.ys[m]=N}else{var D;d.parts=[];do{D=l.readUshort(u,h),h+=2;var U={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(d.parts.push(U),U.glyphIndex=l.readUshort(u,h),h+=2,1&D){var F=l.readShort(u,h);h+=2;var H=l.readShort(u,h);h+=2}else F=l.readInt8(u,h),h++,H=l.readInt8(u,h),h++;2&D?(U.m.tx=F,U.m.ty=H):(U.p1=F,U.p2=H),8&D?(U.m.a=U.m.d=l.readF2dot14(u,h),h+=2):64&D?(U.m.a=l.readF2dot14(u,h),h+=2,U.m.d=l.readF2dot14(u,h),h+=2):128&D&&(U.m.a=l.readF2dot14(u,h),h+=2,U.m.b=l.readF2dot14(u,h),h+=2,U.m.c=l.readF2dot14(u,h),h+=2,U.m.d=l.readF2dot14(u,h),h+=2)}while(32&D);if(256&D){var z=l.readUshort(u,h);for(h+=2,d.instr=[],m=0;m<z;m++)d.instr.push(u[h]),h++}}return d},e.GPOS={},e.GPOS.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GPOS.subt)},e.GPOS.subt=function(s,o,l,u){var h=e._bin,d=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o==1||o==2||o==3||o==7||o==8&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,_+d)}if(o==1&&m.fmt==1){var v=h.readUshort(s,l);l+=2;var E=e._lctf.numOfOnes(v);v!=0&&(m.pos=e.GPOS.readValueRecord(s,l,v))}else if(o==2&&m.fmt>=1&&m.fmt<=2){v=h.readUshort(s,l),l+=2;var w=h.readUshort(s,l);l+=2,E=e._lctf.numOfOnes(v);var x=e._lctf.numOfOnes(w);if(m.fmt==1){m.pairsets=[];var A=h.readUshort(s,l);l+=2;for(var O=0;O<A;O++){var k=d+h.readUshort(s,l);l+=2;var N=h.readUshort(s,k);k+=2;for(var D=[],U=0;U<N;U++){var F=h.readUshort(s,k);k+=2,v!=0&&(ie=e.GPOS.readValueRecord(s,k,v),k+=2*E),w!=0&&(de=e.GPOS.readValueRecord(s,k,w),k+=2*x),D.push({gid2:F,val1:ie,val2:de})}m.pairsets.push(D)}}if(m.fmt==2){var H=h.readUshort(s,l);l+=2;var z=h.readUshort(s,l);l+=2;var J=h.readUshort(s,l);l+=2;var te=h.readUshort(s,l);for(l+=2,m.classDef1=e._lctf.readClassDef(s,d+H),m.classDef2=e._lctf.readClassDef(s,d+z),m.matrix=[],O=0;O<J;O++){var re=[];for(U=0;U<te;U++){var ie=null,de=null;v!=0&&(ie=e.GPOS.readValueRecord(s,l,v),l+=2*E),w!=0&&(de=e.GPOS.readValueRecord(s,l,w),l+=2*x),re.push({val1:ie,val2:de})}m.matrix.push(re)}}}else{if(o==9&&m.fmt==1){var oe=h.readUshort(s,l);l+=2;var ue=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=oe;else if(u.ltype!=oe)throw"invalid extension substitution";return e.GPOS.subt(s,u.ltype,d+ue)}console.debug("unsupported GPOS table LookupType",o,"format",m.fmt)}return m},e.GPOS.readValueRecord=function(s,o,l){var u=e._bin,h=[];return h.push(1&l?u.readShort(s,o):0),o+=1&l?2:0,h.push(2&l?u.readShort(s,o):0),o+=2&l?2:0,h.push(4&l?u.readShort(s,o):0),o+=4&l?2:0,h.push(8&l?u.readShort(s,o):0),o+=8&l?2:0,h},e.GSUB={},e.GSUB.parse=function(s,o,l,u){return e._lctf.parse(s,o,l,u,e.GSUB.subt)},e.GSUB.subt=function(s,o,l,u){var h=e._bin,d=l,m={};if(m.fmt=h.readUshort(s,l),l+=2,o!=1&&o!=4&&o!=5&&o!=6)return null;if(o==1||o==4||o==5&&m.fmt<=2||o==6&&m.fmt<=2){var _=h.readUshort(s,l);l+=2,m.coverage=e._lctf.readCoverage(s,d+_)}if(o==1&&m.fmt>=1&&m.fmt<=2){if(m.fmt==1)m.delta=h.readShort(s,l),l+=2;else if(m.fmt==2){var v=h.readUshort(s,l);l+=2,m.newg=h.readUshorts(s,l,v),l+=2*m.newg.length}}else if(o==4){m.vals=[],v=h.readUshort(s,l),l+=2;for(var E=0;E<v;E++){var w=h.readUshort(s,l);l+=2,m.vals.push(e.GSUB.readLigatureSet(s,d+w))}}else if(o==5&&m.fmt==2){if(m.fmt==2){var x=h.readUshort(s,l);l+=2,m.cDef=e._lctf.readClassDef(s,d+x),m.scset=[];var A=h.readUshort(s,l);for(l+=2,E=0;E<A;E++){var O=h.readUshort(s,l);l+=2,m.scset.push(O==0?null:e.GSUB.readSubClassSet(s,d+O))}}}else if(o==6&&m.fmt==3){if(m.fmt==3){for(E=0;E<3;E++){v=h.readUshort(s,l),l+=2;for(var k=[],N=0;N<v;N++)k.push(e._lctf.readCoverage(s,d+h.readUshort(s,l+2*N)));l+=2*v,E==0&&(m.backCvg=k),E==1&&(m.inptCvg=k),E==2&&(m.ahedCvg=k)}v=h.readUshort(s,l),l+=2,m.lookupRec=e.GSUB.readSubstLookupRecords(s,l,v)}}else{if(o==7&&m.fmt==1){var D=h.readUshort(s,l);l+=2;var U=h.readUint(s,l);if(l+=4,u.ltype==9)u.ltype=D;else if(u.ltype!=D)throw"invalid extension substitution";return e.GSUB.subt(s,u.ltype,d+U)}console.debug("unsupported GSUB table LookupType",o,"format",m.fmt)}return m},e.GSUB.readSubClassSet=function(s,o){var l=e._bin.readUshort,u=o,h=[],d=l(s,o);o+=2;for(var m=0;m<d;m++){var _=l(s,o);o+=2,h.push(e.GSUB.readSubClassRule(s,u+_))}return h},e.GSUB.readSubClassRule=function(s,o){var l=e._bin.readUshort,u={},h=l(s,o),d=l(s,o+=2);o+=2,u.input=[];for(var m=0;m<h-1;m++)u.input.push(l(s,o)),o+=2;return u.substLookupRecords=e.GSUB.readSubstLookupRecords(s,o,d),u},e.GSUB.readSubstLookupRecords=function(s,o,l){for(var u=e._bin.readUshort,h=[],d=0;d<l;d++)h.push(u(s,o),u(s,o+2)),o+=4;return h},e.GSUB.readChainSubClassSet=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readChainSubClassRule(s,u+_))}return h},e.GSUB.readChainSubClassRule=function(s,o){for(var l=e._bin,u={},h=["backtrack","input","lookahead"],d=0;d<h.length;d++){var m=l.readUshort(s,o);o+=2,d==1&&m--,u[h[d]]=l.readUshorts(s,o,m),o+=2*u[h[d]].length}return m=l.readUshort(s,o),o+=2,u.subst=l.readUshorts(s,o,2*m),o+=2*u.subst.length,u},e.GSUB.readLigatureSet=function(s,o){var l=e._bin,u=o,h=[],d=l.readUshort(s,o);o+=2;for(var m=0;m<d;m++){var _=l.readUshort(s,o);o+=2,h.push(e.GSUB.readLigature(s,u+_))}return h},e.GSUB.readLigature=function(s,o){var l=e._bin,u={chain:[]};u.nglyph=l.readUshort(s,o),o+=2;var h=l.readUshort(s,o);o+=2;for(var d=0;d<h-1;d++)u.chain.push(l.readUshort(s,o)),o+=2;return u},e.head={},e.head.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.fontRevision=u.readFixed(s,o),o+=4,u.readUint(s,o),o+=4,u.readUint(s,o),o+=4,h.flags=u.readUshort(s,o),o+=2,h.unitsPerEm=u.readUshort(s,o),o+=2,h.created=u.readUint64(s,o),o+=8,h.modified=u.readUint64(s,o),o+=8,h.xMin=u.readShort(s,o),o+=2,h.yMin=u.readShort(s,o),o+=2,h.xMax=u.readShort(s,o),o+=2,h.yMax=u.readShort(s,o),o+=2,h.macStyle=u.readUshort(s,o),o+=2,h.lowestRecPPEM=u.readUshort(s,o),o+=2,h.fontDirectionHint=u.readShort(s,o),o+=2,h.indexToLocFormat=u.readShort(s,o),o+=2,h.glyphDataFormat=u.readShort(s,o),o+=2,h},e.hhea={},e.hhea.parse=function(s,o,l){var u=e._bin,h={};return u.readFixed(s,o),o+=4,h.ascender=u.readShort(s,o),o+=2,h.descender=u.readShort(s,o),o+=2,h.lineGap=u.readShort(s,o),o+=2,h.advanceWidthMax=u.readUshort(s,o),o+=2,h.minLeftSideBearing=u.readShort(s,o),o+=2,h.minRightSideBearing=u.readShort(s,o),o+=2,h.xMaxExtent=u.readShort(s,o),o+=2,h.caretSlopeRise=u.readShort(s,o),o+=2,h.caretSlopeRun=u.readShort(s,o),o+=2,h.caretOffset=u.readShort(s,o),o+=2,o+=8,h.metricDataFormat=u.readShort(s,o),o+=2,h.numberOfHMetrics=u.readUshort(s,o),o+=2,h},e.hmtx={},e.hmtx.parse=function(s,o,l,u){for(var h=e._bin,d={aWidth:[],lsBearing:[]},m=0,_=0,v=0;v<u.maxp.numGlyphs;v++)v<u.hhea.numberOfHMetrics&&(m=h.readUshort(s,o),o+=2,_=h.readShort(s,o),o+=2),d.aWidth.push(m),d.lsBearing.push(_);return d},e.kern={},e.kern.parse=function(s,o,l,u){var h=e._bin,d=h.readUshort(s,o);if(o+=2,d==1)return e.kern.parseV1(s,o-2,l,u);var m=h.readUshort(s,o);o+=2;for(var _={glyph1:[],rval:[]},v=0;v<m;v++){o+=2,l=h.readUshort(s,o),o+=2;var E=h.readUshort(s,o);o+=2;var w=E>>>8;if((w&=15)!=0)throw"unknown kern table format: "+w;o=e.kern.readFormat0(s,o,_)}return _},e.kern.parseV1=function(s,o,l,u){var h=e._bin;h.readFixed(s,o),o+=4;var d=h.readUint(s,o);o+=4;for(var m={glyph1:[],rval:[]},_=0;_<d;_++){h.readUint(s,o),o+=4;var v=h.readUshort(s,o);o+=2,h.readUshort(s,o),o+=2;var E=v>>>8;if((E&=15)!=0)throw"unknown kern table format: "+E;o=e.kern.readFormat0(s,o,m)}return m},e.kern.readFormat0=function(s,o,l){var u=e._bin,h=-1,d=u.readUshort(s,o);o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2,u.readUshort(s,o),o+=2;for(var m=0;m<d;m++){var _=u.readUshort(s,o);o+=2;var v=u.readUshort(s,o);o+=2;var E=u.readShort(s,o);o+=2,_!=h&&(l.glyph1.push(_),l.rval.push({glyph2:[],vals:[]}));var w=l.rval[l.rval.length-1];w.glyph2.push(v),w.vals.push(E),h=_}return o},e.loca={},e.loca.parse=function(s,o,l,u){var h=e._bin,d=[],m=u.head.indexToLocFormat,_=u.maxp.numGlyphs+1;if(m==0)for(var v=0;v<_;v++)d.push(h.readUshort(s,o+(v<<1))<<1);if(m==1)for(v=0;v<_;v++)d.push(h.readUint(s,o+(v<<2)));return d},e.maxp={},e.maxp.parse=function(s,o,l){var u=e._bin,h={},d=u.readUint(s,o);return o+=4,h.numGlyphs=u.readUshort(s,o),o+=2,d==65536&&(h.maxPoints=u.readUshort(s,o),o+=2,h.maxContours=u.readUshort(s,o),o+=2,h.maxCompositePoints=u.readUshort(s,o),o+=2,h.maxCompositeContours=u.readUshort(s,o),o+=2,h.maxZones=u.readUshort(s,o),o+=2,h.maxTwilightPoints=u.readUshort(s,o),o+=2,h.maxStorage=u.readUshort(s,o),o+=2,h.maxFunctionDefs=u.readUshort(s,o),o+=2,h.maxInstructionDefs=u.readUshort(s,o),o+=2,h.maxStackElements=u.readUshort(s,o),o+=2,h.maxSizeOfInstructions=u.readUshort(s,o),o+=2,h.maxComponentElements=u.readUshort(s,o),o+=2,h.maxComponentDepth=u.readUshort(s,o),o+=2),h},e.name={},e.name.parse=function(s,o,l){var u=e._bin,h={};u.readUshort(s,o),o+=2;var d=u.readUshort(s,o);o+=2,u.readUshort(s,o);for(var m,_=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=o+=2,E=0;E<d;E++){var w=u.readUshort(s,o);o+=2;var x=u.readUshort(s,o);o+=2;var A=u.readUshort(s,o);o+=2;var O=u.readUshort(s,o);o+=2;var k=u.readUshort(s,o);o+=2;var N=u.readUshort(s,o);o+=2;var D,U=_[O],F=v+12*d+N;if(w==0)D=u.readUnicode(s,F,k/2);else if(w==3&&x==0)D=u.readUnicode(s,F,k/2);else if(x==0)D=u.readASCII(s,F,k);else if(x==1)D=u.readUnicode(s,F,k/2);else if(x==3)D=u.readUnicode(s,F,k/2);else{if(w!=1)throw"unknown encoding "+x+", platformID: "+w;D=u.readASCII(s,F,k),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var H="p"+w+","+A.toString(16);h[H]==null&&(h[H]={}),h[H][U!==void 0?U:O]=D,h[H]._lang=A}for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==1033)return h[z];for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==0)return h[z];for(var z in h)if(h[z].postScriptName!=null&&h[z]._lang==3084)return h[z];for(var z in h)if(h[z].postScriptName!=null)return h[z];for(var z in h){m=z;break}return console.debug("returning name table with languageID "+h[m]._lang),h[m]},e["OS/2"]={},e["OS/2"].parse=function(s,o,l){var u=e._bin.readUshort(s,o);o+=2;var h={};if(u==0)e["OS/2"].version0(s,o,h);else if(u==1)e["OS/2"].version1(s,o,h);else if(u==2||u==3||u==4)e["OS/2"].version2(s,o,h);else{if(u!=5)throw"unknown OS/2 table version: "+u;e["OS/2"].version5(s,o,h)}return h},e["OS/2"].version0=function(s,o,l){var u=e._bin;return l.xAvgCharWidth=u.readShort(s,o),o+=2,l.usWeightClass=u.readUshort(s,o),o+=2,l.usWidthClass=u.readUshort(s,o),o+=2,l.fsType=u.readUshort(s,o),o+=2,l.ySubscriptXSize=u.readShort(s,o),o+=2,l.ySubscriptYSize=u.readShort(s,o),o+=2,l.ySubscriptXOffset=u.readShort(s,o),o+=2,l.ySubscriptYOffset=u.readShort(s,o),o+=2,l.ySuperscriptXSize=u.readShort(s,o),o+=2,l.ySuperscriptYSize=u.readShort(s,o),o+=2,l.ySuperscriptXOffset=u.readShort(s,o),o+=2,l.ySuperscriptYOffset=u.readShort(s,o),o+=2,l.yStrikeoutSize=u.readShort(s,o),o+=2,l.yStrikeoutPosition=u.readShort(s,o),o+=2,l.sFamilyClass=u.readShort(s,o),o+=2,l.panose=u.readBytes(s,o,10),o+=10,l.ulUnicodeRange1=u.readUint(s,o),o+=4,l.ulUnicodeRange2=u.readUint(s,o),o+=4,l.ulUnicodeRange3=u.readUint(s,o),o+=4,l.ulUnicodeRange4=u.readUint(s,o),o+=4,l.achVendID=[u.readInt8(s,o),u.readInt8(s,o+1),u.readInt8(s,o+2),u.readInt8(s,o+3)],o+=4,l.fsSelection=u.readUshort(s,o),o+=2,l.usFirstCharIndex=u.readUshort(s,o),o+=2,l.usLastCharIndex=u.readUshort(s,o),o+=2,l.sTypoAscender=u.readShort(s,o),o+=2,l.sTypoDescender=u.readShort(s,o),o+=2,l.sTypoLineGap=u.readShort(s,o),o+=2,l.usWinAscent=u.readUshort(s,o),o+=2,l.usWinDescent=u.readUshort(s,o),o+=2},e["OS/2"].version1=function(s,o,l){var u=e._bin;return o=e["OS/2"].version0(s,o,l),l.ulCodePageRange1=u.readUint(s,o),o+=4,l.ulCodePageRange2=u.readUint(s,o),o+=4},e["OS/2"].version2=function(s,o,l){var u=e._bin;return o=e["OS/2"].version1(s,o,l),l.sxHeight=u.readShort(s,o),o+=2,l.sCapHeight=u.readShort(s,o),o+=2,l.usDefault=u.readUshort(s,o),o+=2,l.usBreak=u.readUshort(s,o),o+=2,l.usMaxContext=u.readUshort(s,o),o+=2},e["OS/2"].version5=function(s,o,l){var u=e._bin;return o=e["OS/2"].version2(s,o,l),l.usLowerOpticalPointSize=u.readUshort(s,o),o+=2,l.usUpperOpticalPointSize=u.readUshort(s,o),o+=2},e.post={},e.post.parse=function(s,o,l){var u=e._bin,h={};return h.version=u.readFixed(s,o),o+=4,h.italicAngle=u.readFixed(s,o),o+=4,h.underlinePosition=u.readShort(s,o),o+=2,h.underlineThickness=u.readShort(s,o),o+=2,h},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,o){var l=s.cmap,u=-1;if(l.p0e4!=null?u=l.p0e4:l.p3e1!=null?u=l.p3e1:l.p1e0!=null?u=l.p1e0:l.p0e3!=null&&(u=l.p0e3),u==-1)throw"no familiar platform and encoding!";var h=l.tables[u];if(h.format==0)return o>=h.map.length?0:h.map[o];if(h.format==4){for(var d=-1,m=0;m<h.endCount.length;m++)if(o<=h.endCount[m]){d=m;break}return d==-1||h.startCount[d]>o?0:65535&(h.idRangeOffset[d]!=0?h.glyphIdArray[o-h.startCount[d]+(h.idRangeOffset[d]>>1)-(h.idRangeOffset.length-d)]:o+h.idDelta[d])}if(h.format==12){if(o>h.groups[h.groups.length-1][1])return 0;for(m=0;m<h.groups.length;m++){var _=h.groups[m];if(_[0]<=o&&o<=_[1])return _[2]+(o-_[0])}return 0}throw"unknown cmap table format "+h.format},e.U.glyphToPath=function(s,o){var l={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[o]){var u=s.SVG.entries[o];return u==null?l:(typeof u=="string"&&(u=e.SVG.toPath(u),s.SVG.entries[o]=u),u)}if(s.CFF){var h={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},d=s.CFF,m=s.CFF.Private;if(d.ROS){for(var _=0;d.FDSelect[_+2]<=o;)_+=2;m=d.FDArray[d.FDSelect[_+1]].Private}e.U._drawCFF(s.CFF.CharStrings[o],h,d,m,l)}else s.glyf&&e.U._drawGlyf(o,s,l);return l},e.U._drawGlyf=function(s,o,l){var u=o.glyf[s];u==null&&(u=o.glyf[s]=e.glyf._parseGlyf(o,s)),u!=null&&(u.noc>-1?e.U._simpleGlyph(u,l):e.U._compoGlyph(u,o,l))},e.U._simpleGlyph=function(s,o){for(var l=0;l<s.noc;l++){for(var u=l==0?0:s.endPts[l-1]+1,h=s.endPts[l],d=u;d<=h;d++){var m=d==u?h:d-1,_=d==h?u:d+1,v=1&s.flags[d],E=1&s.flags[m],w=1&s.flags[_],x=s.xs[d],A=s.ys[d];if(d==u)if(v){if(!E){e.U.P.moveTo(o,x,A);continue}e.U.P.moveTo(o,s.xs[m],s.ys[m])}else E?e.U.P.moveTo(o,s.xs[m],s.ys[m]):e.U.P.moveTo(o,(s.xs[m]+x)/2,(s.ys[m]+A)/2);v?E&&e.U.P.lineTo(o,x,A):w?e.U.P.qcurveTo(o,x,A,s.xs[_],s.ys[_]):e.U.P.qcurveTo(o,x,A,(x+s.xs[_])/2,(A+s.ys[_])/2)}e.U.P.closePath(o)}},e.U._compoGlyph=function(s,o,l){for(var u=0;u<s.parts.length;u++){var h={cmds:[],crds:[]},d=s.parts[u];e.U._drawGlyf(d.glyphIndex,o,h);for(var m=d.m,_=0;_<h.crds.length;_+=2){var v=h.crds[_],E=h.crds[_+1];l.crds.push(v*m.a+E*m.b+m.tx),l.crds.push(v*m.c+E*m.d+m.ty)}for(_=0;_<h.cmds.length;_++)l.cmds.push(h.cmds[_])}},e.U._getGlyphClass=function(s,o){var l=e._lctf.getInterval(o,s);return l==-1?0:o[l+2]},e.U.getPairAdjustment=function(s,o,l){var u=!1;if(s.GPOS)for(var h=s.GPOS,d=h.lookupList,m=h.featureList,_=[],v=0;v<m.length;v++){var E=m[v];if(E.tag=="kern"){u=!0;for(var w=0;w<E.tab.length;w++)if(!_[E.tab[w]]){_[E.tab[w]]=!0;for(var x=d[E.tab[w]],A=0;A<x.tabs.length;A++)if(x.tabs[A]!=null){var O,k=x.tabs[A];if((!k.coverage||(O=e._lctf.coverageIndex(k.coverage,o))!=-1)&&x.ltype!=1&&x.ltype==2){var N=null;if(k.fmt==1){var D=k.pairsets[O];for(v=0;v<D.length;v++)D[v].gid2==l&&(N=D[v])}else if(k.fmt==2){var U=e.U._getGlyphClass(o,k.classDef1),F=e.U._getGlyphClass(l,k.classDef2);N=k.matrix[U][F]}if(N){var H=0;return N.val1&&N.val1[2]&&(H+=N.val1[2]),N.val2&&N.val2[0]&&(H+=N.val2[0]),H}}}}}}if(s.kern&&!u){var z=s.kern.glyph1.indexOf(o);if(z!=-1){var J=s.kern.rval[z].glyph2.indexOf(l);if(J!=-1)return s.kern.rval[z].vals[J]}}return 0},e.U._applySubs=function(s,o,l,u){for(var h=s.length-o-1,d=0;d<l.tabs.length;d++)if(l.tabs[d]!=null){var m,_=l.tabs[d];if(!_.coverage||(m=e._lctf.coverageIndex(_.coverage,s[o]))!=-1){if(l.ltype==1)s[o],_.fmt==1?s[o]=s[o]+_.delta:s[o]=_.newg[m];else if(l.ltype==4)for(var v=_.vals[m],E=0;E<v.length;E++){var w=v[E],x=w.chain.length;if(!(x>h)){for(var A=!0,O=0,k=0;k<x;k++){for(;s[o+O+(1+k)]==-1;)O++;w.chain[k]!=s[o+O+(1+k)]&&(A=!1)}if(A){for(s[o]=w.nglyph,k=0;k<x+O;k++)s[o+k+1]=-1;break}}}else if(l.ltype==5&&_.fmt==2)for(var N=e._lctf.getInterval(_.cDef,s[o]),D=_.cDef[N+2],U=_.scset[D],F=0;F<U.length;F++){var H=U[F],z=H.input;if(!(z.length>h)){for(A=!0,k=0;k<z.length;k++){var J=e._lctf.getInterval(_.cDef,s[o+1+k]);if(N==-1&&_.cDef[J+2]!=z[k]){A=!1;break}}if(A){var te=H.substLookupRecords;for(E=0;E<te.length;E+=2)te[E],te[E+1]}}}else if(l.ltype==6&&_.fmt==3){if(!e.U._glsCovered(s,_.backCvg,o-_.backCvg.length)||!e.U._glsCovered(s,_.inptCvg,o)||!e.U._glsCovered(s,_.ahedCvg,o+_.inptCvg.length))continue;var re=_.lookupRec;for(F=0;F<re.length;F+=2){N=re[F];var ie=u[re[F+1]];e.U._applySubs(s,o+N,ie,u)}}}}},e.U._glsCovered=function(s,o,l){for(var u=0;u<o.length;u++)if(e._lctf.coverageIndex(o[u],s[l+u])==-1)return!1;return!0},e.U.glyphsToPath=function(s,o,l){for(var u={cmds:[],crds:[]},h=0,d=0;d<o.length;d++){var m=o[d];if(m!=-1){for(var _=d<o.length-1&&o[d+1]!=-1?o[d+1]:0,v=e.U.glyphToPath(s,m),E=0;E<v.crds.length;E+=2)u.crds.push(v.crds[E]+h),u.crds.push(v.crds[E+1]);for(l&&u.cmds.push(l),E=0;E<v.cmds.length;E++)u.cmds.push(v.cmds[E]);l&&u.cmds.push("X"),h+=s.hmtx.aWidth[m],d<o.length-1&&(h+=e.U.getPairAdjustment(s,m,_))}}return u},e.U.P={},e.U.P.moveTo=function(s,o,l){s.cmds.push("M"),s.crds.push(o,l)},e.U.P.lineTo=function(s,o,l){s.cmds.push("L"),s.crds.push(o,l)},e.U.P.curveTo=function(s,o,l,u,h,d,m){s.cmds.push("C"),s.crds.push(o,l,u,h,d,m)},e.U.P.qcurveTo=function(s,o,l,u,h){s.cmds.push("Q"),s.crds.push(o,l,u,h)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,o,l,u,h){for(var d=o.stack,m=o.nStems,_=o.haveWidth,v=o.width,E=o.open,w=0,x=o.x,A=o.y,O=0,k=0,N=0,D=0,U=0,F=0,H=0,z=0,J=0,te=0,re={val:0,size:0};w<s.length;){e.CFF.getCharString(s,w,re);var ie=re.val;if(w+=re.size,ie=="o1"||ie=="o18")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0;else if(ie=="o3"||ie=="o23")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0;else if(ie=="o4")d.length>1&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),E&&e.U.P.closePath(h),A+=d.pop(),e.U.P.moveTo(h,x,A),E=!0;else if(ie=="o5")for(;d.length>0;)x+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,x,A);else if(ie=="o6"||ie=="o7")for(var de=d.length,oe=ie=="o6",ue=0;ue<de;ue++){var ge=d.shift();oe?x+=ge:A+=ge,oe=!oe,e.U.P.lineTo(h,x,A)}else if(ie=="o8"||ie=="o24"){de=d.length;for(var Ae=0;Ae+6<=de;)O=x+d.shift(),k=A+d.shift(),N=O+d.shift(),D=k+d.shift(),x=N+d.shift(),A=D+d.shift(),e.U.P.curveTo(h,O,k,N,D,x,A),Ae+=6;ie=="o24"&&(x+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,x,A))}else{if(ie=="o11")break;if(ie=="o1234"||ie=="o1235"||ie=="o1236"||ie=="o1237")ie=="o1234"&&(k=A,N=(O=x+d.shift())+d.shift(),te=D=k+d.shift(),F=D,z=A,x=(H=(U=(J=N+d.shift())+d.shift())+d.shift())+d.shift(),e.U.P.curveTo(h,O,k,N,D,J,te),e.U.P.curveTo(h,U,F,H,z,x,A)),ie=="o1235"&&(O=x+d.shift(),k=A+d.shift(),N=O+d.shift(),D=k+d.shift(),J=N+d.shift(),te=D+d.shift(),U=J+d.shift(),F=te+d.shift(),H=U+d.shift(),z=F+d.shift(),x=H+d.shift(),A=z+d.shift(),d.shift(),e.U.P.curveTo(h,O,k,N,D,J,te),e.U.P.curveTo(h,U,F,H,z,x,A)),ie=="o1236"&&(O=x+d.shift(),k=A+d.shift(),N=O+d.shift(),te=D=k+d.shift(),F=D,H=(U=(J=N+d.shift())+d.shift())+d.shift(),z=F+d.shift(),x=H+d.shift(),e.U.P.curveTo(h,O,k,N,D,J,te),e.U.P.curveTo(h,U,F,H,z,x,A)),ie=="o1237"&&(O=x+d.shift(),k=A+d.shift(),N=O+d.shift(),D=k+d.shift(),J=N+d.shift(),te=D+d.shift(),U=J+d.shift(),F=te+d.shift(),H=U+d.shift(),z=F+d.shift(),Math.abs(H-x)>Math.abs(z-A)?x=H+d.shift():A=z+d.shift(),e.U.P.curveTo(h,O,k,N,D,J,te),e.U.P.curveTo(h,U,F,H,z,x,A));else if(ie=="o14"){if(d.length>0&&!_&&(v=d.shift()+l.nominalWidthX,_=!0),d.length==4){var j=d.shift(),Z=d.shift(),ne=d.shift(),le=d.shift(),_e=e.CFF.glyphBySE(l,ne),Oe=e.CFF.glyphBySE(l,le);e.U._drawCFF(l.CharStrings[_e],o,l,u,h),o.x=j,o.y=Z,e.U._drawCFF(l.CharStrings[Oe],o,l,u,h)}E&&(e.U.P.closePath(h),E=!1)}else if(ie=="o19"||ie=="o20")d.length%2!=0&&!_&&(v=d.shift()+u.nominalWidthX),m+=d.length>>1,d.length=0,_=!0,w+=m+7>>3;else if(ie=="o21")d.length>2&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),A+=d.pop(),x+=d.pop(),E&&e.U.P.closePath(h),e.U.P.moveTo(h,x,A),E=!0;else if(ie=="o22")d.length>1&&!_&&(v=d.shift()+u.nominalWidthX,_=!0),x+=d.pop(),E&&e.U.P.closePath(h),e.U.P.moveTo(h,x,A),E=!0;else if(ie=="o25"){for(;d.length>6;)x+=d.shift(),A+=d.shift(),e.U.P.lineTo(h,x,A);O=x+d.shift(),k=A+d.shift(),N=O+d.shift(),D=k+d.shift(),x=N+d.shift(),A=D+d.shift(),e.U.P.curveTo(h,O,k,N,D,x,A)}else if(ie=="o26")for(d.length%2&&(x+=d.shift());d.length>0;)O=x,k=A+d.shift(),x=N=O+d.shift(),A=(D=k+d.shift())+d.shift(),e.U.P.curveTo(h,O,k,N,D,x,A);else if(ie=="o27")for(d.length%2&&(A+=d.shift());d.length>0;)k=A,N=(O=x+d.shift())+d.shift(),D=k+d.shift(),x=N+d.shift(),A=D,e.U.P.curveTo(h,O,k,N,D,x,A);else if(ie=="o10"||ie=="o29"){var xe=ie=="o10"?u:l;if(d.length==0)console.debug("error: empty stack");else{var Xe=d.pop(),Re=xe.Subrs[Xe+xe.Bias];o.x=x,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=E,e.U._drawCFF(Re,o,l,u,h),x=o.x,A=o.y,m=o.nStems,_=o.haveWidth,v=o.width,E=o.open}}else if(ie=="o30"||ie=="o31"){var Je=d.length,et=(Ae=0,ie=="o31");for(Ae+=Je-(de=-3&Je);Ae<de;)et?(k=A,N=(O=x+d.shift())+d.shift(),A=(D=k+d.shift())+d.shift(),de-Ae==5?(x=N+d.shift(),Ae++):x=N,et=!1):(O=x,k=A+d.shift(),N=O+d.shift(),D=k+d.shift(),x=N+d.shift(),de-Ae==5?(A=D+d.shift(),Ae++):A=D,et=!0),e.U.P.curveTo(h,O,k,N,D,x,A),Ae+=4}else{if((ie+"").charAt(0)=="o")throw console.debug("Unknown operation: "+ie,s),ie;d.push(ie)}}}o.x=x,o.y=A,o.nStems=m,o.haveWidth=_,o.width=v,o.open=E};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function i1e(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(ie,de){for(var oe=new t(31),ue=0;ue<31;++ue)oe[ue]=de+=1<<ie[ue-1];var ge=new i(oe[30]);for(ue=1;ue<30;++ue)for(var Ae=oe[ue];Ae<oe[ue+1];++Ae)ge[Ae]=Ae-oe[ue]<<5|ue;return[oe,ge]},h=u(s,2),d=h[0],m=h[1];d[28]=258,m[258]=28;for(var _=u(o,0)[0],v=new t(32768),E=0;E<32768;++E){var w=(43690&E)>>>1|(21845&E)<<1;w=(61680&(w=(52428&w)>>>2|(13107&w)<<2))>>>4|(3855&w)<<4,v[E]=((65280&w)>>>8|(255&w)<<8)>>>1}var x=function(ie,de,oe){for(var ue=ie.length,ge=0,Ae=new t(de);ge<ue;++ge)++Ae[ie[ge]-1];var j,Z=new t(de);for(ge=0;ge<de;++ge)Z[ge]=Z[ge-1]+Ae[ge-1]<<1;if(oe){j=new t(1<<de);var ne=15-de;for(ge=0;ge<ue;++ge)if(ie[ge])for(var le=ge<<4|ie[ge],_e=de-ie[ge],Oe=Z[ie[ge]-1]++<<_e,xe=Oe|(1<<_e)-1;Oe<=xe;++Oe)j[v[Oe]>>>ne]=le}else for(j=new t(ue),ge=0;ge<ue;++ge)ie[ge]&&(j[ge]=v[Z[ie[ge]-1]++]>>>15-ie[ge]);return j},A=new e(288);for(E=0;E<144;++E)A[E]=8;for(E=144;E<256;++E)A[E]=9;for(E=256;E<280;++E)A[E]=7;for(E=280;E<288;++E)A[E]=8;var O=new e(32);for(E=0;E<32;++E)O[E]=5;var k=x(A,9,1),N=x(O,5,1),D=function(ie){for(var de=ie[0],oe=1;oe<ie.length;++oe)ie[oe]>de&&(de=ie[oe]);return de},U=function(ie,de,oe){var ue=de/8|0;return(ie[ue]|ie[ue+1]<<8)>>(7&de)&oe},F=function(ie,de){var oe=de/8|0;return(ie[oe]|ie[oe+1]<<8|ie[oe+2]<<16)>>(7&de)},H=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(ie,de,oe){var ue=new Error(de||H[ie]);if(ue.code=ie,Error.captureStackTrace&&Error.captureStackTrace(ue,z),!oe)throw ue;return ue},J=function(ie,de,oe){var ue=ie.length;if(!ue||oe&&!oe.l&&ue<5)return de||new e(0);var ge=!de||oe,Ae=!oe||oe.i;oe||(oe={}),de||(de=new e(3*ue));var j,Z=function(Ve){var Pt=de.length;if(Ve>Pt){var Fe=new e(Math.max(2*Pt,Ve));Fe.set(de),de=Fe}},ne=oe.f||0,le=oe.p||0,_e=oe.b||0,Oe=oe.l,xe=oe.d,Xe=oe.m,Re=oe.n,Je=8*ue;do{if(!Oe){oe.f=ne=U(ie,le,1);var et=U(ie,le+1,3);if(le+=3,!et){var at=ie[(It=((j=le)/8|0)+(7&j&&1)+4)-4]|ie[It-3]<<8,Qe=It+at;if(Qe>ue){Ae&&z(0);break}ge&&Z(_e+at),de.set(ie.subarray(It,Qe),_e),oe.b=_e+=at,oe.p=le=8*Qe;continue}if(et==1)Oe=k,xe=N,Xe=9,Re=5;else if(et==2){var De=U(ie,le,31)+257,Se=U(ie,le+10,15)+4,Pe=De+U(ie,le+5,31)+1;le+=14;for(var rt=new e(Pe),We=new e(19),wt=0;wt<Se;++wt)We[l[wt]]=U(ie,le+3*wt,7);le+=3*Se;var xt=D(We),ht=(1<<xt)-1,St=x(We,xt,1);for(wt=0;wt<Pe;){var It,mt=St[U(ie,le,ht)];if(le+=15&mt,(It=mt>>>4)<16)rt[wt++]=It;else{var ve=0,ee=0;for(It==16?(ee=3+U(ie,le,3),le+=2,ve=rt[wt-1]):It==17?(ee=3+U(ie,le,7),le+=3):It==18&&(ee=11+U(ie,le,127),le+=7);ee--;)rt[wt++]=ve}}var ke=rt.subarray(0,De),ot=rt.subarray(De);Xe=D(ke),Re=D(ot),Oe=x(ke,Xe,1),xe=x(ot,Re,1)}else z(1);if(le>Je){Ae&&z(0);break}}ge&&Z(_e+131072);for(var dt=(1<<Xe)-1,$t=(1<<Re)-1,ct=le;;ct=le){var Ge=(ve=Oe[F(ie,le)&dt])>>>4;if((le+=15&ve)>Je){Ae&&z(0);break}if(ve||z(2),Ge<256)de[_e++]=Ge;else{if(Ge==256){ct=le,Oe=null;break}var Me=Ge-254;if(Ge>264){var X=s[wt=Ge-257];Me=U(ie,le,(1<<X)-1)+d[wt],le+=X}var Q=xe[F(ie,le)&$t],ae=Q>>>4;if(Q||z(3),le+=15&Q,ot=_[ae],ae>3&&(X=o[ae],ot+=F(ie,le)&(1<<X)-1,le+=X),le>Je){Ae&&z(0);break}ge&&Z(_e+131072);for(var $e=_e+Me;_e<$e;_e+=4)de[_e]=de[_e-ot],de[_e+1]=de[_e+1-ot],de[_e+2]=de[_e+2-ot],de[_e+3]=de[_e+3-ot];_e=$e}}oe.l=Oe,oe.p=ct,oe.b=_e,Oe&&(ne=1,oe.m=Xe,oe.d=xe,oe.n=Re)}while(!ne);return _e==de.length?de:function(Ve,Pt,Fe){(Pt==null||Pt<0)&&(Pt=0),(Fe==null||Fe>Ve.length)&&(Fe=Ve.length);var Wt=new(Ve instanceof t?t:Ve instanceof i?i:e)(Fe-Pt);return Wt.set(Ve.subarray(Pt,Fe)),Wt}(de,0,_e)},te=new e(0),re=typeof TextDecoder<"u"&&new TextDecoder;try{re.decode(te,{stream:!0})}catch{}return n.convert_streams=function(ie){var de=new DataView(ie),oe=0;function ue(){var De=de.getUint16(oe);return oe+=2,De}function ge(){var De=de.getUint32(oe);return oe+=4,De}function Ae(De){at.setUint16(Qe,De),Qe+=2}function j(De){at.setUint32(Qe,De),Qe+=4}for(var Z={signature:ge(),flavor:ge(),length:ge(),numTables:ue(),reserved:ue(),totalSfntSize:ge(),majorVersion:ue(),minorVersion:ue(),metaOffset:ge(),metaLength:ge(),metaOrigLength:ge(),privOffset:ge(),privLength:ge()},ne=0;Math.pow(2,ne)<=Z.numTables;)ne++;ne--;for(var le=16*Math.pow(2,ne),_e=16*Z.numTables-le,Oe=12,xe=[],Xe=0;Xe<Z.numTables;Xe++)xe.push({tag:ge(),offset:ge(),compLength:ge(),origLength:ge(),origChecksum:ge()}),Oe+=16;var Re,Je=new Uint8Array(12+16*xe.length+xe.reduce(function(De,Se){return De+Se.origLength+4},0)),et=Je.buffer,at=new DataView(et),Qe=0;return j(Z.flavor),Ae(Z.numTables),Ae(le),Ae(ne),Ae(_e),xe.forEach(function(De){j(De.tag),j(De.origChecksum),j(Oe),j(De.origLength),De.outOffset=Oe,(Oe+=De.origLength)%4!=0&&(Oe+=4-Oe%4)}),xe.forEach(function(De){var Se,Pe=ie.slice(De.offset,De.offset+De.compLength);if(De.compLength!=De.origLength){var rt=new Uint8Array(De.origLength);Se=new Uint8Array(Pe,2),J(Se,rt)}else rt=new Uint8Array(Pe);Je.set(rt,De.outOffset);var We=0;(Oe=De.outOffset+De.origLength)%4!=0&&(We=4-Oe%4),Je.set(new Uint8Array(We).buffer,De.outOffset+De.origLength),Re=Oe+We}),et.slice(0,Re)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function s1e(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,o=2,l=4,u=8,h=16,d=32;let m;function _(U){if(!m){const F={R:o,L:s,D:l,C:h,U:d,T:u};m=new Map;for(let H in i){let z=0;i[H].split(",").forEach(J=>{let[te,re]=J.split("+");te=parseInt(te,36),re=re?parseInt(re,36):0,m.set(z+=te,F[H]);for(let ie=re;ie--;)m.set(++z,F[H])})}}return m.get(U)||d}const v=1,E=2,w=3,x=4,A=[null,"isol","init","fina","medi"];function O(U){const F=new Uint8Array(U.length);let H=d,z=v,J=-1;for(let te=0;te<U.length;te++){const re=U.codePointAt(te);let ie=_(re)|0,de=v;ie&u||(H&(s|l|h)?ie&(o|l|h)?(de=w,(z===v||z===w)&&F[J]++):ie&(s|d)&&(z===E||z===x)&&F[J]--:H&(o|d)&&(z===E||z===x)&&F[J]--,z=F[te]=de,H=ie,J=te,re>65535&&te++)}return F}function k(U,F){const H=[];for(let J=0;J<F.length;J++){const te=F.codePointAt(J);te>65535&&J++,H.push(n.U.codeToGlyph(U,te))}const z=U.GSUB;if(z){const{lookupList:J,featureList:te}=z;let re;const ie=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,de=[];te.forEach(oe=>{if(ie.test(oe.tag))for(let ue=0;ue<oe.tab.length;ue++){if(de[oe.tab[ue]])continue;de[oe.tab[ue]]=!0;const ge=J[oe.tab[ue]],Ae=/^(isol|init|fina|medi)$/.test(oe.tag);Ae&&!re&&(re=O(F));for(let j=0;j<H.length;j++)(!re||!Ae||A[re[j]]===oe.tag)&&n.U._applySubs(H,j,ge,J)}})}return H}function N(...U){for(let F=0;F<U.length;F++)if(typeof U[F]=="number")return U[F]}function D(U){const F=Object.create(null),H=U["OS/2"],z=U.hhea,J=U.head.unitsPerEm,te=N(H&&H.sTypoAscender,z&&z.ascender,J),re={unitsPerEm:J,ascender:te,descender:N(H&&H.sTypoDescender,z&&z.descender,0),capHeight:N(H&&H.sCapHeight,te),xHeight:N(H&&H.sxHeight,te),lineGap:N(H&&H.sTypoLineGap,z&&z.lineGap),forEachGlyph(ie,de,oe,ue){let ge=0;const Ae=1/re.unitsPerEm*de,j=k(U,ie);let Z=0,ne=-1;return j.forEach((le,_e)=>{if(le!==-1){let Oe=F[le];if(!Oe){const{cmds:xe,crds:Xe}=n.U.glyphToPath(U,le);let Re="",Je=0;for(let Se=0,Pe=xe.length;Se<Pe;Se++){const rt=t[xe[Se]];Re+=xe[Se];for(let We=1;We<=rt;We++)Re+=(We>1?",":"")+Xe[Je++]}let et,at,Qe,De;if(Xe.length){et=at=1/0,Qe=De=-1/0;for(let Se=0,Pe=Xe.length;Se<Pe;Se+=2){let rt=Xe[Se],We=Xe[Se+1];rt<et&&(et=rt),We<at&&(at=We),rt>Qe&&(Qe=rt),We>De&&(De=We)}}else et=Qe=at=De=0;Oe=F[le]={index:le,advanceWidth:U.hmtx.aWidth[le],xMin:et,yMin:at,xMax:Qe,yMax:De,path:Re,pathCommandCount:xe.length}}ne!==-1&&(ge+=n.U.getPairAdjustment(U,ne,le)*Ae),ue.call(null,Oe,ge,Z),Oe.advanceWidth&&(ge+=Oe.advanceWidth*Ae),oe&&(ge+=oe*de),ne=le}Z+=ie.codePointAt(Z)>65535?2:1}),ge}};return re}return function(U){const F=new Uint8Array(U,0,4),H=n._bin.readASCII(F,0,4);if(H==="wOFF")U=e(U);else if(H==="wOF2")throw new Error("woff2 fonts not supported");return D(n.parse(U)[0])}}const o1e=Hw({name:"Typr Font Parser",dependencies:[r1e,i1e,s1e],init(n,e,t){const i=n(),s=e();return t(i,s)}}),lT={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},a1e=new _n;function U1(){return(self.performance||Date).now()}const M5=Object.create(null);function Uj(n,e){n=c1e({},n);const t=U1();if(n.font=h1e(n.font||lT.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||lT.sdfGlyphSize,n.colorRanges!=null){let _={};for(let v in n.colorRanges)if(n.colorRanges.hasOwnProperty(v)){let E=n.colorRanges[v];typeof E!="number"&&(E=a1e.set(E).getHex()),_[v]=E}n.colorRanges=_}Object.freeze(n);const{textureWidth:i,sdfExponent:s}=lT,{sdfGlyphSize:o}=n,l=i/o*4;let u=M5[o];if(!u){const _=document.createElement("canvas");_.width=i,_.height=o*256/l,u=M5[o]={glyphCount:0,sdfGlyphSize:o,sdfCanvas:_,sdfTexture:new Bl(_,void 0,void 0,void 0,Vo,Vo),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,l1e(u)}const{sdfTexture:h,sdfCanvas:d}=u;let m=u.glyphsByFont.get(n.font);m||u.glyphsByFont.set(n.font,m=new Map),p1e(n).then(_=>{const{glyphIds:v,glyphPositions:E,fontSize:w,unitsPerEm:x,timings:A}=_,O=[],k=new Float32Array(v.length*4),N=w/x;let D=0,U=0;const F=U1();v.forEach((re,ie)=>{let de=m.get(re);if(!de){const{path:Ae,pathBounds:j}=_.glyphData[re],Z=Math.max(j[2]-j[0],j[3]-j[1])/o*(lT.sdfMargin*o+.5),ne=u.glyphCount++,le=[j[0]-Z,j[1]-Z,j[2]+Z,j[3]+Z];m.set(re,de={path:Ae,atlasIndex:ne,sdfViewBox:le}),O.push(de)}const{sdfViewBox:oe}=de,ue=E[U++],ge=E[U++];k[D++]=ue+oe[0]*N,k[D++]=ge+oe[1]*N,k[D++]=ue+oe[2]*N,k[D++]=ge+oe[3]*N,v[ie]=de.atlasIndex}),A.quads=(A.quads||0)+(U1()-F);const H=U1();A.sdf={};const z=d.height,J=Math.ceil(u.glyphCount/l),te=Math.pow(2,Math.ceil(Math.log2(J*o)));te>z&&(console.info(`Increasing SDF texture size ${z}->${te}`),n1e(d,i,te),h.dispose()),Promise.all(O.map(re=>zj(re,u,n.gpuAccelerateSDF).then(({timing:ie})=>{A.sdf[re.atlasIndex]=ie}))).then(()=>{O.length&&!u.contextLost&&(Hj(u),h.needsUpdate=!0),A.sdfTotal=U1()-H,A.total=U1()-t,e(Object.freeze({parameters:n,sdfTexture:h,sdfGlyphSize:o,sdfExponent:s,glyphBounds:k,glyphAtlasIndices:v,glyphColors:_.glyphColors,caretPositions:_.caretPositions,caretHeight:_.caretHeight,chunkedBounds:_.chunkedBounds,ascender:_.ascender,descender:_.descender,lineHeight:_.lineHeight,capHeight:_.capHeight,xHeight:_.xHeight,topBaseline:_.topBaseline,blockBounds:_.blockBounds,visibleBounds:_.visibleBounds,timings:_.timings}))})}),Promise.resolve().then(()=>{u.contextLost||t1e(d)})}function zj({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:s,contextLost:o},l){if(o)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:h}=lT,d=Math.max(t[2]-t[0],t[3]-t[1]),m=Math.floor(e/4),_=m%(u/i)*i,v=Math.floor(m/(u/i))*i,E=e%4;return Kbe(i,i,n,t,d,h,s,_,v,E,l)}function l1e(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(s=>{s.forEach(o=>{i.push(zj(o,n,!0))})}),Promise.all(i).then(()=>{Hj(n),n.sdfTexture.needsUpdate=!0})})}function u1e({font:n,characters:e,sdfGlyphSize:t},i){let s=Array.isArray(e)?e.join(`
`):""+e;Uj({font:n,sdfGlyphSize:t,text:s},i)}function c1e(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let cM;function h1e(n){return cM||(cM=typeof document>"u"?{}:document.createElement("a")),cM.href=n,cM.href}function Hj(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:s}=e,o=n.sdfCanvas.getContext("webgl");let l=t.image.data;(!l||l.length!==i*s*4)&&(l=new Uint8Array(i*s*4),t.image={width:i,height:s,data:l},t.flipY=!1,t.isDataTexture=!0),o.readPixels(0,0,i,s,o.RGBA,o.UNSIGNED_BYTE,l)}}const d1e=Hw({name:"Typesetter",dependencies:[lT,o1e,Ybe,Ube],init(n,e,t,i){const{defaultFontURL:s}=n;return t(e,i(),{defaultFontURL:s})}}),p1e=Hw({name:"Typesetter",dependencies:[d1e],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),A5={};function f1e(n){let e=A5[n];if(!e){const t=new pg(1,1,n,n),i=t.clone(),s=t.attributes,o=i.attributes,l=new kr,u=s.uv.count;for(let h=0;h<u;h++)o.position.array[h*3]*=-1,o.normal.array[h*3+2]*=-1;["position","normal","uv"].forEach(h=>{l.setAttribute(h,new Pn([...s[h].array,...o[h].array],s[h].itemSize))}),l.setIndex([...t.index.array,...i.index.array.map(h=>h+u)]),l.translate(.5,.5,0),e=A5[n]=l}return e}const m1e="aTroikaGlyphBounds",I5="aTroikaGlyphIndex",g1e="aTroikaGlyphColor";class _1e extends CR{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new s0,this.boundingBox=new mg}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===zc?t/2:0,e===ep?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=f1e(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,s,o){$O(this,m1e,e,4),$O(this,I5,t,1),$O(this,g1e,o,3),this._blockBounds=i,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:s,floor:o,min:l,max:u,sin:h,cos:d}=Math,m=s/2,_=s*2,v=Math.abs(t),E=e[0]/v,w=e[2]/v,x=o((E+m)/_)!==o((w+m)/_)?-v:l(h(E)*v,h(w)*v),A=o((E-m)/_)!==o((w-m)/_)?v:u(h(E)*v,h(w)*v),O=o((E+s)/_)!==o((w+s)/_)?v*2:u(v-d(E)*v,v-d(w)*v);i.min.set(x,e[1],t<0?-O:0),i.max.set(A,e[3],t<0?0:O)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(I5).count,i=this._chunkedBounds;if(i)for(let s=i.length;s--;){t=i[s].end;let o=i[s].rect;if(o[1]<e.w&&o[3]>e.y&&o[0]<e.z&&o[2]>e.x)break}this.instanceCount=t}}function $O(n,e,t,i){const s=n.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(n.setAttribute(e,new cb(t,i)),delete n._maxInstanceCount,n.dispose()):s&&n.deleteAttribute(e)}const v1e=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,y1e=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,b1e=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,T1e=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function E1e(n){const e=tN(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Lt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Mi(0,0,0,0)},uTroikaClipRect:{value:new Mi(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Lt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new _n},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new tp},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:v1e,vertexTransform:y1e,fragmentDefs:b1e,fragmentColorTransform:T1e,customRewriter({vertexShader:t,fragmentShader:i}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(i)&&(i=i.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(Pj,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const XP=new gg({color:16777215,side:ep,transparent:!0}),R5=8421504,k5=new Mr,hM=new Te,SO=new Te,N$=[],$1e=new Te,wO="+x+y";function O5(n){return Array.isArray(n)?n[0]:n}let Gj=()=>{const n=new bn(new pg(1,1),XP);return Gj=()=>n,n},Wj=()=>{const n=new bn(new pg(1,1,32,1),XP);return Wj=()=>n,n};const S1e={type:"syncstart"},w1e={type:"synccomplete"},Vj=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],x1e=Vj.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class jj extends bn{constructor(){const e=new _1e;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=R5,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=wO,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(S1e),Uj({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(s=>s&&s())})),this.dispatchEvent(w1e),e&&e()})))}onBeforeRender(e,t,i,s,o,l){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=e0}onAfterRender(e,t,i,s,o,l){o._hadOwnSide?o.side=o._actualSide:delete o.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=XP.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=E1e(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return O5(this.material).getDepthMaterial()}get customDistanceMaterial(){return O5(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:u,blockBounds:h}=s;i.uTroikaSDFTexture.value=u,i.uTroikaSDFTextureSize.value.set(u.image.width,u.image.height),i.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,i.uTroikaSDFExponent.value=s.sdfExponent,i.uTroikaTotalBounds.value.fromArray(h),i.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let d=0,m=0,_=0,v,E,w,x=0,A=0;if(t){let{outlineWidth:k,outlineOffsetX:N,outlineOffsetY:D,outlineBlur:U,outlineOpacity:F}=this;d=this._parsePercent(k)||0,m=Math.max(0,this._parsePercent(U)||0),v=F,x=this._parsePercent(N)||0,A=this._parsePercent(D)||0}else _=Math.max(0,this._parsePercent(this.strokeWidth)||0),_&&(w=this.strokeColor,i.uTroikaStrokeColor.value.set(w??R5),E=this.strokeOpacity,E==null&&(E=1)),v=this.fillOpacity;i.uTroikaDistanceOffset.value=d,i.uTroikaPositionOffset.value.set(x,A),i.uTroikaBlurRadius.value=m,i.uTroikaStrokeWidth.value=_,i.uTroikaStrokeOpacity.value=E,i.uTroikaFillOpacity.value=v??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let O=this.clipRect;if(O&&Array.isArray(O)&&O.length===4)i.uTroikaClipRect.value.fromArray(O);else{const k=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(h[0]-k,h[1]-k,h[2]+k,h[3]+k)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(o==null)delete e.color;else{const u=e.hasOwnProperty("color")?e.color:e.color=new _n;(o!==u._input||typeof o=="object")&&u.set(u._input=o)}let l=this.orientation||wO;if(l!==e._orientation){let u=i.uTroikaOrient.value;l=l.replace(/[^-+xyz]/g,"");let h=l!==wO&&l.match(/^([-+])([xyz])([-+])([xyz])$/);if(h){let[,d,m,_,v]=h;hM.set(0,0,0)[m]=d==="-"?1:-1,SO.set(0,0,0)[v]=_==="-"?-1:1,k5.lookAt($1e,hM.cross(SO),SO),u.setFromMatrix4(k5)}else u.identity();e._orientation=l}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Lt){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Lt){return hM.copy(e),this.localPositionToTextCoords(this.worldToLocal(hM),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:s}=this;if(i){const o=i.blockBounds,l=s?Wj():Gj(),u=l.geometry,{position:h,uv:d}=u.attributes;for(let m=0;m<d.count;m++){let _=o[0]+d.getX(m)*(o[2]-o[0]);const v=o[1]+d.getY(m)*(o[3]-o[1]);let E=0;s&&(E=s-Math.cos(_/s)*s,_=Math.sin(_/s)*s),h.setXYZ(m,_,v,E)}u.boundingSphere=this.geometry.boundingSphere,u.boundingBox=this.geometry.boundingBox,l.matrixWorld=this.matrixWorld,l.material.side=this.material.side,N$.length=0,l.raycast(e,N$);for(let m=0;m<N$.length;m++)N$[m].object=this,t.push(N$[m])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,x1e.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}Vj.forEach(n=>{const e="_private_"+n;Object.defineProperty(jj.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const C1e=he.forwardRef(({anchorX:n="center",anchorY:e="middle",font:t,fontSize:i=1,children:s,characters:o,onSync:l,...u},h)=>{const d=Hh(({invalidate:E})=>E),[m]=he.useState(()=>new jj),[_,v]=he.useMemo(()=>{const E=[];let w="";return he.Children.forEach(s,x=>{typeof x=="string"||typeof x=="number"?w+=x:E.push(x)}),[E,w]},[s]);return Aye(()=>new Promise(E=>u1e({font:t,characters:o},E)),["troika-text",t,o]),he.useLayoutEffect(()=>void m.sync(()=>{d(),l&&l(m)})),he.useEffect(()=>()=>m.dispose(),[m]),Xt("primitive",{object:m,ref:h,font:t,text:v,anchorX:n,anchorY:e,fontSize:i,...u,children:_})});var M1e=1/0,A1e=9007199254740991,I1e="[object Arguments]",R1e="[object Function]",k1e="[object GeneratorFunction]",O1e="[object Symbol]",L1e=typeof H0=="object"&&H0&&H0.Object===Object&&H0,D1e=typeof self=="object"&&self&&self.Object===Object&&self,N1e=L1e||D1e||Function("return this")();function B1e(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function P1e(n,e){for(var t=-1,i=n?n.length:0,s=Array(i);++t<i;)s[t]=e(n[t],t,n);return s}function F1e(n,e){for(var t=-1,i=e.length,s=n.length;++t<i;)n[s+t]=e[t];return n}var YP=Object.prototype,U1e=YP.hasOwnProperty,KP=YP.toString,L5=N1e.Symbol,z1e=YP.propertyIsEnumerable,D5=L5?L5.isConcatSpreadable:void 0,N5=Math.max;function Xj(n,e,t,i,s){var o=-1,l=n.length;for(t||(t=V1e),s||(s=[]);++o<l;){var u=n[o];e>0&&t(u)?e>1?Xj(u,e-1,t,i,s):F1e(s,u):i||(s[s.length]=u)}return s}function H1e(n,e){return n=Object(n),G1e(n,e,function(t,i){return i in n})}function G1e(n,e,t){for(var i=-1,s=e.length,o={};++i<s;){var l=e[i],u=n[l];t(u,l)&&(o[l]=u)}return o}function W1e(n,e){return e=N5(e===void 0?n.length-1:e,0),function(){for(var t=arguments,i=-1,s=N5(t.length-e,0),o=Array(s);++i<s;)o[i]=t[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=t[i];return l[e]=o,B1e(n,this,l)}}function V1e(n){return Y1e(n)||X1e(n)||!!(D5&&n&&n[D5])}function j1e(n){if(typeof n=="string"||eTe(n))return n;var e=n+"";return e=="0"&&1/n==-M1e?"-0":e}function X1e(n){return J1e(n)&&U1e.call(n,"callee")&&(!z1e.call(n,"callee")||KP.call(n)==I1e)}var Y1e=Array.isArray;function K1e(n){return n!=null&&q1e(n.length)&&!Q1e(n)}function J1e(n){return Yj(n)&&K1e(n)}function Q1e(n){var e=Z1e(n)?KP.call(n):"";return e==R1e||e==k1e}function q1e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=A1e}function Z1e(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function Yj(n){return!!n&&typeof n=="object"}function eTe(n){return typeof n=="symbol"||Yj(n)&&KP.call(n)==O1e}var tTe=W1e(function(n,e){return n==null?{}:H1e(n,P1e(Xj(e,1),j1e))}),xO=tTe;const nTe=he.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:s=!0,onChange:o,onStart:l,onEnd:u,...h},d)=>{const m=Hh(U=>U.invalidate),_=Hh(U=>U.camera),v=Hh(U=>U.gl),E=Hh(U=>U.events),w=Hh(U=>U.setEvents),x=Hh(U=>U.set),A=Hh(U=>U.get),O=Hh(U=>U.performance),k=e||_,N=i||E.connected||v.domElement,D=he.useMemo(()=>new Cbe(k),[k]);return Nf(()=>{D.enabled&&D.update()},-1),he.useEffect(()=>(D.connect(N),()=>void D.dispose()),[N,t,D,m]),he.useEffect(()=>{const U=z=>{m(),t&&O.regress(),o&&o(z)},F=z=>{l&&l(z)},H=z=>{u&&u(z)};return D.addEventListener("change",U),D.addEventListener("start",F),D.addEventListener("end",H),()=>{D.removeEventListener("start",F),D.removeEventListener("end",H),D.removeEventListener("change",U)}},[o,l,u,D,m,w]),he.useEffect(()=>{if(n){const U=A().controls;return x({controls:D}),()=>x({controls:U})}},[n,D]),Xt("primitive",{ref:d,object:D,enableDamping:s,...h})});class rTe extends TR{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:s}=i.capabilities;t.fragmentShader=t.fragmentShader.replace("#include <output_fragment>",`
        ${s?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const iTe=he.forwardRef((n,e)=>{const[t]=he.useState(()=>new rTe(null));return Xt("primitive",{...n,object:t,ref:e,attach:"material"})});function sTe(n){const e=n+"Geometry";return he.forwardRef(({args:t,children:i,...s},o)=>mc("mesh",{ref:o,...s,children:[Xt(e,{attach:"geometry",args:t}),i]}))}const oTe=sTe("circle");let my,B$;const aTe=he.createContext(null),B5=new Mr,P5=new Te,lTe=he.forwardRef(({children:n,range:e,limit:t=1e3,...i},s)=>{const o=he.useRef(null),[l,u]=he.useState([]),[[h,d,m]]=he.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);he.useEffect(()=>{o.current.geometry.attributes.position.needsUpdate=!0}),Nf(()=>{for(o.current.updateMatrix(),o.current.updateMatrixWorld(),B5.copy(o.current.matrixWorld).invert(),o.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,l.length),my=0;my<l.length;my++)B$=l[my].current,B$.getWorldPosition(P5).applyMatrix4(B5),P5.toArray(h,my*3),o.current.geometry.attributes.position.needsUpdate=!0,B$.matrixWorldNeedsUpdate=!0,B$.color.toArray(d,my*3),o.current.geometry.attributes.color.needsUpdate=!0,m.set([B$.size],my),o.current.geometry.attributes.size.needsUpdate=!0});const _=he.useMemo(()=>({getParent:()=>o,subscribe:v=>(u(E=>[...E,v]),()=>u(E=>E.filter(w=>w.current!==v.current)))}),[]);return he.createElement("points",KD({userData:{instances:l},matrixAutoUpdate:!1,ref:WP([s,o]),raycast:()=>null},i),mc("bufferGeometry",{children:[Xt("bufferAttribute",{attach:"attributes-position",count:h.length/3,array:h,itemSize:3,usage:Xy}),Xt("bufferAttribute",{attach:"attributes-color",count:d.length/3,array:d,itemSize:3,usage:Xy}),Xt("bufferAttribute",{attach:"attributes-size",count:m.length,array:m,itemSize:1,usage:Xy})]}),he.createElement(aTe.Provider,{value:_},n))}),uTe=he.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:s=3,...o},l)=>{const u=he.useRef(null);return Nf(()=>{const h=u.current.geometry.attributes;h.position.needsUpdate=!0,t&&(h.color.needsUpdate=!0),i&&(h.size.needsUpdate=!0)}),mc("points",{ref:WP([l,u]),...o,children:[mc("bufferGeometry",{children:[Xt("bufferAttribute",{attach:"attributes-position",count:e.length/s,array:e,itemSize:s,usage:Xy}),t&&Xt("bufferAttribute",{attach:"attributes-color",count:t.length/s,array:t,itemSize:3,usage:Xy}),i&&Xt("bufferAttribute",{attach:"attributes-size",count:i.length/s,array:i,itemSize:1,usage:Xy})]}),n]})}),cTe=he.forwardRef((n,e)=>n.positions instanceof Float32Array?Xt(uTe,{...n,ref:e}):Xt(lTe,{...n,ref:e})),F5=n=>{let e;const t=new Set,i=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const d=e;e=u??typeof h!="object"?h:Object.assign({},e,h),t.forEach(m=>m(e,d))}},s=()=>e,o={setState:i,getState:s,subscribe:l=>(t.add(l),()=>t.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return e=n(i,s,o),o},hTe=n=>n?F5(n):F5;var Kj={exports:{}},CO={},U5={exports:{}},MO={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5;function dTe(){if(z5)return MO;z5=1;var n=Tr;function e(_,v){return _===v&&(_!==0||1/_===1/v)||_!==_&&v!==v}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(_,v){var E=v(),w=i({inst:{value:E,getSnapshot:v}}),x=w[0].inst,A=w[1];return o(function(){x.value=E,x.getSnapshot=v,h(x)&&A({inst:x})},[_,E,v]),s(function(){return h(x)&&A({inst:x}),_(function(){h(x)&&A({inst:x})})},[_]),l(E),E}function h(_){var v=_.getSnapshot;_=_.value;try{var E=v();return!t(_,E)}catch{return!0}}function d(_,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:u;return MO.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:m,MO}var H5;function pTe(){return H5||(H5=1,function(n){n.exports=dTe()}(U5)),U5.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G5;function fTe(){if(G5)return CO;G5=1;var n=Tr,e=pTe();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,h=n.useDebugValue;return CO.useSyncExternalStoreWithSelector=function(d,m,_,v,E){var w=o(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=u(function(){function O(F){if(!k){if(k=!0,N=F,F=v(F),E!==void 0&&x.hasValue){var H=x.value;if(E(H,F))return D=H}return D=F}if(H=D,i(N,F))return H;var z=v(F);return E!==void 0&&E(H,z)?H:(N=F,D=z)}var k=!1,N,D,U=_===void 0?null:_;return[function(){return O(m())},U===null?void 0:function(){return O(U())}]},[m,_,v,E]);var A=s(d,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=A},[A]),h(A),A},CO}(function(n){n.exports=fTe()})(Kj);const mTe=cj(Kj.exports),{useSyncExternalStoreWithSelector:gTe}=mTe;function Jj(n,e=n.getState,t){const i=gTe(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return he.useDebugValue(i),i}const W5=n=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?hTe(n):n,t=(i,s)=>Jj(e,i,s);return Object.assign(t,e),t},_Te=n=>n?W5(n):W5,vTe=n=>(e,t,i)=>{const s=i.subscribe;return i.subscribe=(o,l,u)=>{let h=o;if(l){const d=(u==null?void 0:u.equalityFn)||Object.is;let m=o(i.getState());h=_=>{const v=o(_);if(!d(m,v)){const E=m;l(m=v,E)}},u!=null&&u.fireImmediately&&l(m,m)}return s(h)},n(e,t,i)},yTe=vTe;function og(n){for(var e=arguments.length,t=Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+n+(t.length?" "+t.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function JT(n){return!!n&&!!n[Mf]}function pb(n){return!!n&&(function(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===CTe}(n)||Array.isArray(n)||!!n[q5]||!!n.constructor[q5]||JP(n)||QP(n))}function pw(n,e,t){t===void 0&&(t=!1),dE(n)===0?(t?Object.keys:nF)(n).forEach(function(i){t&&typeof i=="symbol"||e(i,n[i],n)}):n.forEach(function(i,s){return e(s,i,n)})}function dE(n){var e=n[Mf];return e?e.i>3?e.i-4:e.i:Array.isArray(n)?1:JP(n)?2:QP(n)?3:0}function rN(n,e){return dE(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function bTe(n,e){return dE(n)===2?n.get(e):n[e]}function Qj(n,e,t){var i=dE(n);i===2?n.set(e,t):i===3?(n.delete(e),n.add(t)):n[e]=t}function TTe(n,e){return n===e?n!==0||1/n==1/e:n!=n&&e!=e}function JP(n){return wTe&&n instanceof Map}function QP(n){return xTe&&n instanceof Set}function wy(n){return n.o||n.t}function qP(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var e=MTe(n);delete e[Mf];for(var t=nF(e),i=0;i<t.length;i++){var s=t[i],o=e[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(e[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[s]})}return Object.create(Object.getPrototypeOf(n),e)}function ZP(n,e){return e===void 0&&(e=!1),eF(n)||JT(n)||!pb(n)||(dE(n)>1&&(n.set=n.add=n.clear=n.delete=ETe),Object.freeze(n),e&&pw(n,function(t,i){return ZP(i,!0)},!0)),n}function ETe(){og(2)}function eF(n){return n==null||typeof n!="object"||Object.isFrozen(n)}function qg(n){var e=ATe[n];return e||og(18,n),e}function V5(){return fw}function AO(n,e){e&&(qg("Patches"),n.u=[],n.s=[],n.v=e)}function VA(n){iN(n),n.p.forEach($Te),n.p=null}function iN(n){n===fw&&(fw=n.l)}function j5(n){return fw={p:[],l:fw,h:n,m:!0,_:0}}function $Te(n){var e=n[Mf];e.i===0||e.i===1?e.j():e.O=!0}function IO(n,e){e._=e.p.length;var t=e.p[0],i=n!==void 0&&n!==t;return e.h.g||qg("ES5").S(e,n,i),i?(t[Mf].P&&(VA(e),og(4)),pb(n)&&(n=jA(e,n),e.l||XA(e,n)),e.u&&qg("Patches").M(t[Mf].t,n,e.u,e.s)):n=jA(e,t,[]),VA(e),e.u&&e.v(e.u,e.s),n!==qj?n:void 0}function jA(n,e,t){if(eF(e))return e;var i=e[Mf];if(!i)return pw(e,function(o,l){return X5(n,i,e,o,l,t)},!0),e;if(i.A!==n)return e;if(!i.P)return XA(n,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=qP(i.k):i.o;pw(i.i===3?new Set(s):s,function(o,l){return X5(n,i,s,o,l,t)}),XA(n,s,!1),t&&n.u&&qg("Patches").R(i,t,n.u,n.s)}return i.o}function X5(n,e,t,i,s,o){if(JT(s)){var l=jA(n,s,o&&e&&e.i!==3&&!rN(e.D,i)?o.concat(i):void 0);if(Qj(t,i,l),!JT(l))return;n.m=!1}if(pb(s)&&!eF(s)){if(!n.h.F&&n._<1)return;jA(n,s),e&&e.A.l||XA(n,s)}}function XA(n,e,t){t===void 0&&(t=!1),n.h.F&&n.m&&ZP(e,t)}function RO(n,e){var t=n[Mf];return(t?wy(t):n)[e]}function Y5(n,e){if(e in n)for(var t=Object.getPrototypeOf(n);t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}}function sN(n){n.P||(n.P=!0,n.l&&sN(n.l))}function kO(n){n.o||(n.o=qP(n.t))}function oN(n,e,t){var i=JP(e)?qg("MapSet").N(e,t):QP(e)?qg("MapSet").T(e,t):n.g?function(s,o){var l=Array.isArray(s),u={i:l?1:0,A:o?o.A:V5(),P:!1,I:!1,D:{},l:o,t:s,k:null,o:null,j:null,C:!1},h=u,d=aN;l&&(h=[u],d=J$);var m=Proxy.revocable(h,d),_=m.revoke,v=m.proxy;return u.k=v,u.j=_,v}(e,t):qg("ES5").J(e,t);return(t?t.A:V5()).p.push(i),i}function STe(n){return JT(n)||og(22,n),function e(t){if(!pb(t))return t;var i,s=t[Mf],o=dE(t);if(s){if(!s.P&&(s.i<4||!qg("ES5").K(s)))return s.t;s.I=!0,i=K5(t,o),s.I=!1}else i=K5(t,o);return pw(i,function(l,u){s&&bTe(s.t,l)===u||Qj(i,l,e(u))}),o===3?new Set(i):i}(n)}function K5(n,e){switch(e){case 2:return new Map(n);case 3:return Array.from(n)}return qP(n)}var J5,fw,tF=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",wTe=typeof Map<"u",xTe=typeof Set<"u",Q5=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qj=tF?Symbol.for("immer-nothing"):((J5={})["immer-nothing"]=!0,J5),q5=tF?Symbol.for("immer-draftable"):"__$immer_draftable",Mf=tF?Symbol.for("immer-state"):"__$immer_state",CTe=""+Object.prototype.constructor,nF=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,MTe=Object.getOwnPropertyDescriptors||function(n){var e={};return nF(n).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(n,t)}),e},ATe={},aN={get:function(n,e){if(e===Mf)return n;var t=wy(n);if(!rN(t,e))return function(s,o,l){var u,h=Y5(o,l);return h?"value"in h?h.value:(u=h.get)===null||u===void 0?void 0:u.call(s.k):void 0}(n,t,e);var i=t[e];return n.I||!pb(i)?i:i===RO(n.t,e)?(kO(n),n.o[e]=oN(n.A.h,i,n)):i},has:function(n,e){return e in wy(n)},ownKeys:function(n){return Reflect.ownKeys(wy(n))},set:function(n,e,t){var i=Y5(wy(n),e);if(i!=null&&i.set)return i.set.call(n.k,t),!0;if(!n.P){var s=RO(wy(n),e),o=s==null?void 0:s[Mf];if(o&&o.t===t)return n.o[e]=t,n.D[e]=!1,!0;if(TTe(t,s)&&(t!==void 0||rN(n.t,e)))return!0;kO(n),sN(n)}return n.o[e]===t&&typeof t!="number"&&(t!==void 0||e in n.o)||(n.o[e]=t,n.D[e]=!0,!0)},deleteProperty:function(n,e){return RO(n.t,e)!==void 0||e in n.t?(n.D[e]=!1,kO(n),sN(n)):delete n.D[e],n.o&&delete n.o[e],!0},getOwnPropertyDescriptor:function(n,e){var t=wy(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.i!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty:function(){og(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){og(12)}},J$={};pw(aN,function(n,e){J$[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),J$.deleteProperty=function(n,e){return J$.set.call(this,n,e,void 0)},J$.set=function(n,e,t){return aN.set.call(this,n[0],e,t,n[0])};var ITe=function(){function n(t){var i=this;this.g=Q5,this.F=!0,this.produce=function(s,o,l){if(typeof s=="function"&&typeof o!="function"){var u=o;o=s;var h=i;return function(x){var A=this;x===void 0&&(x=u);for(var O=arguments.length,k=Array(O>1?O-1:0),N=1;N<O;N++)k[N-1]=arguments[N];return h.produce(x,function(D){var U;return(U=o).call.apply(U,[A,D].concat(k))})}}var d;if(typeof o!="function"&&og(6),l!==void 0&&typeof l!="function"&&og(7),pb(s)){var m=j5(i),_=oN(i,s,void 0),v=!0;try{d=o(_),v=!1}finally{v?VA(m):iN(m)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(x){return AO(m,l),IO(x,m)},function(x){throw VA(m),x}):(AO(m,l),IO(d,m))}if(!s||typeof s!="object"){if((d=o(s))===void 0&&(d=s),d===qj&&(d=void 0),i.F&&ZP(d,!0),l){var E=[],w=[];qg("Patches").M(s,d,E,w),l(E,w)}return d}og(21,s)},this.produceWithPatches=function(s,o){if(typeof s=="function")return function(d){for(var m=arguments.length,_=Array(m>1?m-1:0),v=1;v<m;v++)_[v-1]=arguments[v];return i.produceWithPatches(d,function(E){return s.apply(void 0,[E].concat(_))})};var l,u,h=i.produce(s,o,function(d,m){l=d,u=m});return typeof Promise<"u"&&h instanceof Promise?h.then(function(d){return[d,l,u]}):[h,l,u]},typeof(t==null?void 0:t.useProxies)=="boolean"&&this.setUseProxies(t.useProxies),typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=n.prototype;return e.createDraft=function(t){pb(t)||og(8),JT(t)&&(t=STe(t));var i=j5(this),s=oN(this,t,void 0);return s[Mf].C=!0,iN(i),s},e.finishDraft=function(t,i){var s=t&&t[Mf],o=s.A;return AO(o,i),IO(void 0,o)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!Q5&&og(20),this.g=t},e.applyPatches=function(t,i){var s;for(s=i.length-1;s>=0;s--){var o=i[s];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}s>-1&&(i=i.slice(s+1));var l=qg("Patches").$;return JT(t)?l(t,i):this.produce(t,function(u){return l(u,i)})},n}(),Af=new ITe,RTe=Af.produce;Af.produceWithPatches.bind(Af);Af.setAutoFreeze.bind(Af);Af.setUseProxies.bind(Af);Af.applyPatches.bind(Af);Af.createDraft.bind(Af);Af.finishDraft.bind(Af);const kTe=n=>(e,t,i)=>(i.setState=(s,o,...l)=>{const u=typeof s=="function"?RTe(s):s;return e(u,o,...l)},n(i.setState,t,i)),OTe=kTe;class LTe{constructor(){this._previousTime=0,this._currentTime=0,this._delta=0,this._elapsed=0,this._timescale=1,this._useFixedDelta=!1,this._fixedDelta=16.67,this._usePageVisibilityAPI=typeof document<"u"&&document.hidden!==void 0,this._usePageVisibilityAPI===!0&&(this._pageVisibilityHandler=DTe.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disableFixedDelta(){return this._useFixedDelta=!1,this}dispose(){return this._usePageVisibilityAPI===!0&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}enableFixedDelta(){return this._useFixedDelta=!0,this}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getFixedDelta(){return this._fixedDelta/1e3}getTimescale(){return this._timescale}reset(){return this._currentTime=this._now(),this}setFixedDelta(e){return this._fixedDelta=e*1e3,this}setTimescale(e){return this._timescale=e,this}update(){return this._useFixedDelta===!0?this._delta=this._fixedDelta:(this._previousTime=this._currentTime,this._currentTime=this._now(),this._delta=this._currentTime-this._previousTime),this._delta*=this._timescale,this._elapsed+=this._delta,this}_now(){return(typeof performance>"u"?Date:performance).now()}}function DTe(){document.hidden===!1&&this.reset()}var hm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",_=1,v=2,E=4,w=1,x=2,A=1,O=2,k=4,N=8,D=16,U=32,F=64,H=128,z=256,J=512,te=30,re="...",ie=800,de=16,oe=1,ue=2,ge=3,Ae=1/0,j=9007199254740991,Z=17976931348623157e292,ne=NaN,le=4294967295,_e=le-1,Oe=le>>>1,xe=[["ary",H],["bind",A],["bindKey",O],["curry",N],["curryRight",D],["flip",J],["partial",U],["partialRight",F],["rearg",z]],Xe="[object Arguments]",Re="[object Array]",Je="[object AsyncFunction]",et="[object Boolean]",at="[object Date]",Qe="[object DOMException]",De="[object Error]",Se="[object Function]",Pe="[object GeneratorFunction]",rt="[object Map]",We="[object Number]",wt="[object Null]",xt="[object Object]",ht="[object Promise]",St="[object Proxy]",It="[object RegExp]",mt="[object Set]",ve="[object String]",ee="[object Symbol]",ke="[object Undefined]",ot="[object WeakMap]",dt="[object WeakSet]",$t="[object ArrayBuffer]",ct="[object DataView]",Ge="[object Float32Array]",Me="[object Float64Array]",X="[object Int8Array]",Q="[object Int16Array]",ae="[object Int32Array]",$e="[object Uint8Array]",Ve="[object Uint8ClampedArray]",Pt="[object Uint16Array]",Fe="[object Uint32Array]",Wt=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,Ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ft=/&(?:amp|lt|gt|quot|#39);/g,Tn=/[&<>"']/g,Er=RegExp(Ft.source),cr=RegExp(Tn.source),Gr=/<%-([\s\S]+?)%>/g,sr=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nt=/[\\^$.*+?()[\]{}|]/g,Rt=RegExp(nt.source),Qt=/^\s+/,gn=/\s/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bt=/[()=,{}\[\]\/\s]/,xn=/\\(\\)?/g,Bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nr=/\w*$/,vr=/^[-+]0x[0-9a-f]+$/i,ei=/^0b[01]+$/i,$r=/^\[object .+?Constructor\]$/,Ar=/^0o[0-7]+$/i,Wi=/^(?:0|[1-9]\d*)$/,jo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ro=/($^)/,ll=/['\n\r\u2028\u2029\\]/g,Yt="\\ud800-\\udfff",hr="\\u0300-\\u036f",fa="\\ufe20-\\ufe2f",Xo="\\u20d0-\\u20ff",ps=hr+fa+Xo,fs="\\u2700-\\u27bf",ci="a-z\\xdf-\\xf6\\xf8-\\xff",dr="\\xac\\xb1\\xd7\\xf7",pn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ar="\\u2000-\\u206f",wr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",er="A-Z\\xc0-\\xd6\\xd8-\\xde",hi="\\ufe0e\\ufe0f",Qi=dr+pn+ar+wr,jr="[']",Bi="["+Yt+"]",Pa="["+Qi+"]",ul="["+ps+"]",gc="\\d+",Vu="["+fs+"]",Rs="["+ci+"]",ko="[^"+Yt+Qi+gc+fs+ci+er+"]",uu="\\ud83c[\\udffb-\\udfff]",Pl="(?:"+ul+"|"+uu+")",mh="[^"+Yt+"]",Yo="(?:\\ud83c[\\udde6-\\uddff]){2}",tr="[\\ud800-\\udbff][\\udc00-\\udfff]",Pi="["+er+"]",Gc="\\u200d",gh="(?:"+Rs+"|"+ko+")",_c="(?:"+Pi+"|"+ko+")",cl="(?:"+jr+"(?:d|ll|m|re|s|t|ve))?",cu="(?:"+jr+"(?:D|LL|M|RE|S|T|VE))?",hl=Pl+"?",dl="["+hi+"]?",Jn="(?:"+Gc+"(?:"+[mh,Yo,tr].join("|")+")"+dl+hl+")*",Qn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fa=dl+hl+Jn,ma="(?:"+[Vu,Yo,tr].join("|")+")"+Fa,Fl="(?:"+[mh+ul+"?",ul,Yo,tr,Bi].join("|")+")",Ei=RegExp(jr,"g"),Fi=RegExp(ul,"g"),fl=RegExp(uu+"(?="+uu+")|"+Fl+Fa,"g"),Rd=RegExp([Pi+"?"+Rs+"+"+cl+"(?="+[Pa,Pi,"$"].join("|")+")",_c+"+"+cu+"(?="+[Pa,Pi+gh,"$"].join("|")+")",Pi+"?"+gh+"+"+cl,Pi+"+"+cu,pl,Qn,gc,ma].join("|"),"g"),ks=RegExp("["+Gc+Yt+ps+hi+"]"),hu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Oo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ul=-1,Xr={};Xr[Ge]=Xr[Me]=Xr[X]=Xr[Q]=Xr[ae]=Xr[$e]=Xr[Ve]=Xr[Pt]=Xr[Fe]=!0,Xr[Xe]=Xr[Re]=Xr[$t]=Xr[et]=Xr[ct]=Xr[at]=Xr[De]=Xr[Se]=Xr[rt]=Xr[We]=Xr[xt]=Xr[It]=Xr[mt]=Xr[ve]=Xr[ot]=!1;var pr={};pr[Xe]=pr[Re]=pr[$t]=pr[ct]=pr[et]=pr[at]=pr[Ge]=pr[Me]=pr[X]=pr[Q]=pr[ae]=pr[rt]=pr[We]=pr[xt]=pr[It]=pr[mt]=pr[ve]=pr[ee]=pr[$e]=pr[Ve]=pr[Pt]=pr[Fe]=!0,pr[De]=pr[Se]=pr[ot]=!1;var Vi={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Os={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},du={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wc=parseFloat,Ko=parseInt,Jo=typeof H0=="object"&&H0&&H0.Object===Object&&H0,pu=typeof self=="object"&&self&&self.Object===Object&&self,Yr=Jo||pu||Function("return this")(),ms=e&&!e.nodeType&&e,Ai=ms&&!0&&n&&!n.nodeType&&n,ti=Ai&&Ai.exports===ms,ga=ti&&Jo.process,Ui=function(){try{var Ye=Ai&&Ai.require&&Ai.require("util").types;return Ye||ga&&ga.binding&&ga.binding("util")}catch{}}(),fu=Ui&&Ui.isArrayBuffer,ro=Ui&&Ui.isDate,mu=Ui&&Ui.isMap,Ua=Ui&&Ui.isRegExp,di=Ui&&Ui.isSet,ni=Ui&&Ui.isTypedArray;function Un(Ye,kt,bt){switch(bt.length){case 0:return Ye.call(kt);case 1:return Ye.call(kt,bt[0]);case 2:return Ye.call(kt,bt[0],bt[1]);case 3:return Ye.call(kt,bt[0],bt[1],bt[2])}return Ye.apply(kt,bt)}function Kr(Ye,kt,bt,mn){for(var Dn=-1,qn=Ye==null?0:Ye.length;++Dn<qn;){var rr=Ye[Dn];kt(mn,rr,bt(rr),Ye)}return mn}function $i(Ye,kt){for(var bt=-1,mn=Ye==null?0:Ye.length;++bt<mn&&kt(Ye[bt],bt,Ye)!==!1;);return Ye}function Xh(Ye,kt){for(var bt=Ye==null?0:Ye.length;bt--&&kt(Ye[bt],bt,Ye)!==!1;);return Ye}function gu(Ye,kt){for(var bt=-1,mn=Ye==null?0:Ye.length;++bt<mn;)if(!kt(Ye[bt],bt,Ye))return!1;return!0}function gs(Ye,kt){for(var bt=-1,mn=Ye==null?0:Ye.length,Dn=0,qn=[];++bt<mn;){var rr=Ye[bt];kt(rr,bt,Ye)&&(qn[Dn++]=rr)}return qn}function ml(Ye,kt){var bt=Ye==null?0:Ye.length;return!!bt&&io(Ye,kt,0)>-1}function Yh(Ye,kt,bt){for(var mn=-1,Dn=Ye==null?0:Ye.length;++mn<Dn;)if(bt(kt,Ye[mn]))return!0;return!1}function pi(Ye,kt){for(var bt=-1,mn=Ye==null?0:Ye.length,Dn=Array(mn);++bt<mn;)Dn[bt]=kt(Ye[bt],bt,Ye);return Dn}function _u(Ye,kt){for(var bt=-1,mn=kt.length,Dn=Ye.length;++bt<mn;)Ye[Dn+bt]=kt[bt];return Ye}function hp(Ye,kt,bt,mn){var Dn=-1,qn=Ye==null?0:Ye.length;for(mn&&qn&&(bt=Ye[++Dn]);++Dn<qn;)bt=kt(bt,Ye[Dn],Dn,Ye);return bt}function dp(Ye,kt,bt,mn){var Dn=Ye==null?0:Ye.length;for(mn&&Dn&&(bt=Ye[--Dn]);Dn--;)bt=kt(bt,Ye[Dn],Dn,Ye);return bt}function _h(Ye,kt){for(var bt=-1,mn=Ye==null?0:Ye.length;++bt<mn;)if(kt(Ye[bt],bt,Ye))return!0;return!1}var pp=Wr("length");function Wp(Ye){return Ye.split("")}function Pf(Ye){return Ye.match(pt)||[]}function fp(Ye,kt,bt){var mn;return bt(Ye,function(Dn,qn,rr){if(kt(Dn,qn,rr))return mn=qn,!1}),mn}function ju(Ye,kt,bt,mn){for(var Dn=Ye.length,qn=bt+(mn?1:-1);mn?qn--:++qn<Dn;)if(kt(Ye[qn],qn,Ye))return qn;return-1}function io(Ye,kt,bt){return kt===kt?bc(Ye,kt,bt):ju(Ye,vh,bt)}function vu(Ye,kt,bt,mn){for(var Dn=bt-1,qn=Ye.length;++Dn<qn;)if(mn(Ye[Dn],kt))return Dn;return-1}function vh(Ye){return Ye!==Ye}function _a(Ye,kt){var bt=Ye==null?0:Ye.length;return bt?Lo(Ye,kt)/bt:ne}function Wr(Ye){return function(kt){return kt==null?t:kt[Ye]}}function lr(Ye){return function(kt){return Ye==null?t:Ye[kt]}}function Vs(Ye,kt,bt,mn,Dn){return Dn(Ye,function(qn,rr,An){bt=mn?(mn=!1,qn):kt(bt,qn,rr,An)}),bt}function Qo(Ye,kt){var bt=Ye.length;for(Ye.sort(kt);bt--;)Ye[bt]=Ye[bt].value;return Ye}function Lo(Ye,kt){for(var bt,mn=-1,Dn=Ye.length;++mn<Dn;){var qn=kt(Ye[mn]);qn!==t&&(bt=bt===t?qn:bt+qn)}return bt}function yu(Ye,kt){for(var bt=-1,mn=Array(Ye);++bt<Ye;)mn[bt]=kt(bt);return mn}function gl(Ye,kt){return pi(kt,function(bt){return[bt,Ye[bt]]})}function Kh(Ye){return Ye&&Ye.slice(0,_l(Ye)+1).replace(Qt,"")}function Si(Ye){return function(kt){return Ye(kt)}}function fi(Ye,kt){return pi(kt,function(bt){return Ye[bt]})}function ur(Ye,kt){return Ye.has(kt)}function wi(Ye,kt){for(var bt=-1,mn=Ye.length;++bt<mn&&io(kt,Ye[bt],0)>-1;);return bt}function qo(Ye,kt){for(var bt=Ye.length;bt--&&io(kt,Ye[bt],0)>-1;);return bt}function Hl(Ye,kt){for(var bt=Ye.length,mn=0;bt--;)Ye[bt]===kt&&++mn;return mn}var mp=lr(Vi),gp=lr(Os);function Jh(Ye){return"\\"+zl[Ye]}function bu(Ye,kt){return Ye==null?t:Ye[kt]}function Xu(Ye){return ks.test(Ye)}function vc(Ye){return hu.test(Ye)}function yh(Ye){for(var kt,bt=[];!(kt=Ye.next()).done;)bt.push(kt.value);return bt}function yc(Ye){var kt=-1,bt=Array(Ye.size);return Ye.forEach(function(mn,Dn){bt[++kt]=[Dn,mn]}),bt}function Gl(Ye,kt){return function(bt){return Ye(kt(bt))}}function Zo(Ye,kt){for(var bt=-1,mn=Ye.length,Dn=0,qn=[];++bt<mn;){var rr=Ye[bt];(rr===kt||rr===m)&&(Ye[bt]=m,qn[Dn++]=bt)}return qn}function Yu(Ye){var kt=-1,bt=Array(Ye.size);return Ye.forEach(function(mn){bt[++kt]=mn}),bt}function bh(Ye){var kt=-1,bt=Array(Ye.size);return Ye.forEach(function(mn){bt[++kt]=[mn,mn]}),bt}function bc(Ye,kt,bt){for(var mn=bt-1,Dn=Ye.length;++mn<Dn;)if(Ye[mn]===kt)return mn;return-1}function Tc(Ye,kt,bt){for(var mn=bt+1;mn--;)if(Ye[mn]===kt)return mn;return mn}function _s(Ye){return Xu(Ye)?vl(Ye):pp(Ye)}function Jr(Ye){return Xu(Ye)?Wl(Ye):Wp(Ye)}function _l(Ye){for(var kt=Ye.length;kt--&&gn.test(Ye.charAt(kt)););return kt}var ea=lr(du);function vl(Ye){for(var kt=fl.lastIndex=0;fl.test(Ye);)++kt;return kt}function Wl(Ye){return Ye.match(fl)||[]}function Vc(Ye){return Ye.match(Rd)||[]}var kd=function Ye(kt){kt=kt==null?Yr:mi.defaults(Yr.Object(),kt,mi.pick(Yr,Oo));var bt=kt.Array,mn=kt.Date,Dn=kt.Error,qn=kt.Function,rr=kt.Math,An=kt.Object,Ir=kt.RegExp,Ls=kt.String,vs=kt.TypeError,vo=bt.prototype,va=qn.prototype,ji=An.prototype,os=kt["__core-js_shared__"],Ec=va.toString,Br=ji.hasOwnProperty,Do=0,Ds=function(){var T=/[^.]+$/.exec(os&&os.keys&&os.keys.IE_PROTO||"");return T?"Symbol(src)_1."+T:""}(),js=ji.toString,ta=Ec.call(An),Th=Yr._,jc=Ir("^"+Ec.call(Br).replace(nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eh=ti?kt.Buffer:t,Tu=kt.Symbol,Qh=kt.Uint8Array,qh=Eh?Eh.allocUnsafe:t,yl=Gl(An.getPrototypeOf,An),Zh=An.create,$c=ji.propertyIsEnumerable,Xc=vo.splice,Od=Tu?Tu.isConcatSpreadable:t,za=Tu?Tu.iterator:t,ya=Tu?Tu.toStringTag:t,Eu=function(){try{var T=Du(An,"defineProperty");return T({},"",{}),T}catch{}}(),$h=kt.clearTimeout!==Yr.clearTimeout&&kt.clearTimeout,ri=mn&&mn.now!==Yr.Date.now&&mn.now,ed=kt.setTimeout!==Yr.setTimeout&&kt.setTimeout,Yc=rr.ceil,Ku=rr.floor,Sh=An.getOwnPropertySymbols,Ld=Eh?Eh.isBuffer:t,bl=kt.isFinite,Dd=vo.join,wh=Gl(An.keys,An),so=rr.max,na=rr.min,Ff=mn.now,Vp=kt.parseInt,Tl=rr.random,El=vo.reverse,Sc=Du(kt,"DataView"),xh=Du(kt,"Map"),td=Du(kt,"Promise"),Ju=Du(kt,"Set"),Ha=Du(kt,"WeakMap"),Qu=Du(An,"create"),nd=Ha&&new Ha,wc={},xc=oc(Sc),qu=oc(xh),Nd=oc(td),ra=oc(Ju),xr=oc(Ha),Vl=Tu?Tu.prototype:t,qi=Vl?Vl.valueOf:t,ia=Vl?Vl.toString:t;function ye(T){if(nl(T)&&!Fr(T)&&!(T instanceof zn)){if(T instanceof Ur)return T;if(Br.call(T,"__wrapped__"))return yp(T)}return new Ur(T)}var Xs=function(){function T(){}return function(C){if(!Oa(C))return{};if(Zh)return Zh(C);T.prototype=C;var P=new T;return T.prototype=t,P}}();function Ga(){}function Ur(T,C){this.__wrapped__=T,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=t}ye.templateSettings={escape:Gr,evaluate:sr,interpolate:Xn,variable:"",imports:{_:ye}},ye.prototype=Ga.prototype,ye.prototype.constructor=ye,Ur.prototype=Xs(Ga.prototype),Ur.prototype.constructor=Ur;function zn(T){this.__wrapped__=T,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=le,this.__views__=[]}function jp(){var T=new zn(this.__wrapped__);return T.__actions__=ns(this.__actions__),T.__dir__=this.__dir__,T.__filtered__=this.__filtered__,T.__iteratees__=ns(this.__iteratees__),T.__takeCount__=this.__takeCount__,T.__views__=ns(this.__views__),T}function ba(){if(this.__filtered__){var T=new zn(this);T.__dir__=-1,T.__filtered__=!0}else T=this.clone(),T.__dir__*=-1;return T}function Qr(){var T=this.__wrapped__.value(),C=this.__dir__,P=Fr(T),Y=C<0,ce=P?T.length:0,be=tn(0,ce,this.__views__),ze=be.start,qe=be.end,ut=qe-ze,Ht=Y?qe:ze-1,Gt=this.__iteratees__,qt=Gt.length,yn=0,Rn=na(ut,this.__takeCount__);if(!P||!Y&&ce==ut&&Rn==ut)return th(T,this.__actions__);var gr=[];e:for(;ut--&&yn<Rn;){Ht+=C;for(var Nr=-1,or=T[Ht];++Nr<qt;){var li=Gt[Nr],yi=li.iteratee,gd=li.type,lh=yi(or);if(gd==ue)or=lh;else if(!lh){if(gd==oe)continue e;break e}}gr[yn++]=or}return gr}zn.prototype=Xs(Ga.prototype),zn.prototype.constructor=zn;function gi(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function xi(){this.__data__=Qu?Qu(null):{},this.size=0}function Ii(T){var C=this.has(T)&&delete this.__data__[T];return this.size-=C?1:0,C}function Cc(T){var C=this.__data__;if(Qu){var P=C[T];return P===h?t:P}return Br.call(C,T)?C[T]:t}function No(T){var C=this.__data__;return Qu?C[T]!==t:Br.call(C,T)}function Bo(T,C){var P=this.__data__;return this.size+=this.has(T)?0:1,P[T]=Qu&&C===t?h:C,this}gi.prototype.clear=xi,gi.prototype.delete=Ii,gi.prototype.get=Cc,gi.prototype.has=No,gi.prototype.set=Bo;function oo(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function Mc(){this.__data__=[],this.size=0}function yo(T){var C=this.__data__,P=ls(C,T);if(P<0)return!1;var Y=C.length-1;return P==Y?C.pop():Xc.call(C,P,1),--this.size,!0}function Bd(T){var C=this.__data__,P=ls(C,T);return P<0?t:C[P][1]}function Pd(T){return ls(this.__data__,T)>-1}function Ch(T,C){var P=this.__data__,Y=ls(P,T);return Y<0?(++this.size,P.push([T,C])):P[Y][1]=C,this}oo.prototype.clear=Mc,oo.prototype.delete=yo,oo.prototype.get=Bd,oo.prototype.has=Pd,oo.prototype.set=Ch;function Ta(T){var C=-1,P=T==null?0:T.length;for(this.clear();++C<P;){var Y=T[C];this.set(Y[0],Y[1])}}function Cn(){this.size=0,this.__data__={hash:new gi,map:new(xh||oo),string:new gi}}function as(T){var C=ud(this,T).delete(T);return this.size-=C?1:0,C}function ys(T){return ud(this,T).get(T)}function ii(T){return ud(this,T).has(T)}function $l(T,C){var P=ud(this,T),Y=P.size;return P.set(T,C),this.size+=P.size==Y?0:1,this}Ta.prototype.clear=Cn,Ta.prototype.delete=as,Ta.prototype.get=ys,Ta.prototype.has=ii,Ta.prototype.set=$l;function Sl(T){var C=-1,P=T==null?0:T.length;for(this.__data__=new Ta;++C<P;)this.add(T[C])}function cn(T){return this.__data__.set(T,h),this}function zr(T){return this.__data__.has(T)}Sl.prototype.add=Sl.prototype.push=cn,Sl.prototype.has=zr;function Zi(T){var C=this.__data__=new oo(T);this.size=C.size}function Xp(){this.__data__=new oo,this.size=0}function Kc(T){var C=this.__data__,P=C.delete(T);return this.size=C.size,P}function Ns(T){return this.__data__.get(T)}function Po(T){return this.__data__.has(T)}function dn(T,C){var P=this.__data__;if(P instanceof oo){var Y=P.__data__;if(!xh||Y.length<s-1)return Y.push([T,C]),this.size=++P.size,this;P=this.__data__=new Ta(Y)}return P.set(T,C),this.size=P.size,this}Zi.prototype.clear=Xp,Zi.prototype.delete=Kc,Zi.prototype.get=Ns,Zi.prototype.has=Po,Zi.prototype.set=dn;function rn(T,C){var P=Fr(T),Y=!P&&_0(T),ce=!P&&!Y&&Kf(T),be=!P&&!Y&&!ce&&Ig(T),ze=P||Y||ce||be,qe=ze?yu(T.length,Ls):[],ut=qe.length;for(var Ht in T)(C||Br.call(T,Ht))&&!(ze&&(Ht=="length"||ce&&(Ht=="offset"||Ht=="parent")||be&&(Ht=="buffer"||Ht=="byteLength"||Ht=="byteOffset")||oh(Ht,ut)))&&qe.push(Ht);return qe}function Wa(T){var C=T.length;return C?T[Ts(0,C-1)]:t}function Zu(T,C){return Kn(ns(T),ec(C,0,T.length))}function Uf(T){return Kn(ns(T))}function $u(T,C,P){(P!==t&&!Oh(T[C],P)||P===t&&!(C in T))&&Su(T,C,P)}function sa(T,C,P){var Y=T[C];(!(Br.call(T,C)&&Oh(Y,P))||P===t&&!(C in T))&&Su(T,C,P)}function ls(T,C){for(var P=T.length;P--;)if(Oh(T[P][0],C))return P;return-1}function Ea(T,C,P,Y){return wl(T,function(ce,be,ze){C(Y,ce,P(ce),ze)}),Y}function zi(T,C){return T&&So(C,ua(C),T)}function $a(T,C){return T&&So(C,La(C),T)}function Su(T,C,P){C=="__proto__"&&Eu?Eu(T,C,{configurable:!0,enumerable:!0,value:P,writable:!0}):T[C]=P}function Fd(T,C){for(var P=-1,Y=C.length,ce=bt(Y),be=T==null;++P<Y;)ce[P]=be?t:v0(T,C[P]);return ce}function ec(T,C,P){return T===T&&(P!==t&&(T=T<=P?T:P),C!==t&&(T=T>=C?T:C)),T}function Ys(T,C,P,Y,ce,be){var ze,qe=C&_,ut=C&v,Ht=C&E;if(P&&(ze=ce?P(T,Y,ce,be):P(T)),ze!==t)return ze;if(!Oa(T))return T;var Gt=Fr(T);if(Gt){if(ze=yg(T),!qe)return ns(T,ze)}else{var qt=ql(T),yn=qt==Se||qt==Pe;if(Kf(T))return ih(T,qe);if(qt==xt||qt==Xe||yn&&!ce){if(ze=ut||yn?{}:Oc(T),!qe)return ut?ad(T,$a(ze,T)):Ih(T,zi(ze,T))}else{if(!pr[qt])return ce?T:{};ze=$s(T,qt,qe)}}be||(be=new Zi);var Rn=be.get(T);if(Rn)return Rn;be.set(T,ze),Lb(T)?T.forEach(function(or){ze.add(Ys(or,C,P,or,T,be))}):pd(T)&&T.forEach(function(or,li){ze.set(li,Ys(or,C,P,li,T,be))});var gr=Ht?ut?fr:Wn:ut?La:ua,Nr=Gt?t:gr(T);return $i(Nr||T,function(or,li){Nr&&(li=or,or=T[li]),sa(ze,li,Ys(or,C,P,li,T,be))}),ze}function Ud(T){var C=ua(T);return function(P){return Jc(P,T,C)}}function Jc(T,C,P){var Y=P.length;if(T==null)return!Y;for(T=An(T);Y--;){var ce=P[Y],be=C[ce],ze=T[ce];if(ze===t&&!(ce in T)||!be(ze))return!1}return!0}function rd(T,C,P){if(typeof T!="function")throw new vs(l);return Eg(function(){T.apply(t,P)},C)}function Sa(T,C,P,Y){var ce=-1,be=ml,ze=!0,qe=T.length,ut=[],Ht=C.length;if(!qe)return ut;P&&(C=pi(C,Si(P))),Y?(be=Yh,ze=!1):C.length>=s&&(be=ur,ze=!1,C=new Sl(C));e:for(;++ce<qe;){var Gt=T[ce],qt=P==null?Gt:P(Gt);if(Gt=Y||Gt!==0?Gt:0,ze&&qt===qt){for(var yn=Ht;yn--;)if(C[yn]===qt)continue e;ut.push(Gt)}else be(C,qt,Y)||ut.push(Gt)}return ut}var wl=ld(bo),Yp=ld(Va,!0);function jl(T,C){var P=!0;return wl(T,function(Y,ce,be){return P=!!C(Y,ce,be),P}),P}function wu(T,C,P){for(var Y=-1,ce=T.length;++Y<ce;){var be=T[Y],ze=C(be);if(ze!=null&&(qe===t?ze===ze&&!fd(ze):P(ze,qe)))var qe=ze,ut=be}return ut}function id(T,C,P,Y){var ce=T.length;for(P=Cr(P),P<0&&(P=-P>ce?0:ce+P),Y=Y===t||Y>ce?ce:Cr(Y),Y<0&&(Y+=ce),Y=P>Y?0:zv(Y);P<Y;)T[P++]=C;return T}function Ac(T,C){var P=[];return wl(T,function(Y,ce,be){C(Y,ce,be)&&P.push(Y)}),P}function us(T,C,P,Y,ce){var be=-1,ze=T.length;for(P||(P=zd),ce||(ce=[]);++be<ze;){var qe=T[be];C>0&&P(qe)?C>1?us(qe,C-1,P,Y,ce):_u(ce,qe):Y||(ce[ce.length]=qe)}return ce}var xu=kc(),tc=kc(!0);function bo(T,C){return T&&xu(T,C,ua)}function Va(T,C){return T&&tc(T,C,ua)}function bs(T,C){return gs(C,function(P){return Jf(T[P])})}function ao(T,C){C=ku(C,T);for(var P=0,Y=C.length;T!=null&&P<Y;)T=T[Zl(C[P++])];return P&&P==Y?T:t}function Qc(T,C,P){var Y=C(T);return Fr(T)?Y:_u(Y,P(T))}function Ks(T){return T==null?T===t?ke:wt:ya&&ya in An(T)?Ma(T):l0(T)}function ja(T,C){return T>C}function nc(T,C){return T!=null&&Br.call(T,C)}function _p(T,C){return T!=null&&C in An(T)}function qc(T,C,P){return T>=na(C,P)&&T<so(C,P)}function oa(T,C,P){for(var Y=P?Yh:ml,ce=T[0].length,be=T.length,ze=be,qe=bt(be),ut=1/0,Ht=[];ze--;){var Gt=T[ze];ze&&C&&(Gt=pi(Gt,Si(C))),ut=na(Gt.length,ut),qe[ze]=!P&&(C||ce>=120&&Gt.length>=120)?new Sl(ze&&Gt):t}Gt=T[0];var qt=-1,yn=qe[0];e:for(;++qt<ce&&Ht.length<ut;){var Rn=Gt[qt],gr=C?C(Rn):Rn;if(Rn=P||Rn!==0?Rn:0,!(yn?ur(yn,gr):Y(Ht,gr,P))){for(ze=be;--ze;){var Nr=qe[ze];if(!(Nr?ur(Nr,gr):Y(T[ze],gr,P)))continue e}yn&&yn.push(gr),Ht.push(Rn)}}return Ht}function _i(T,C,P,Y){return bo(T,function(ce,be,ze){C(Y,P(ce),be,ze)}),Y}function wn(T,C,P){C=ku(C,T),T=xm(T,C);var Y=T==null?T:T[Zl(Il(C))];return Y==null?t:Un(Y,T,P)}function On(T){return nl(T)&&Ks(T)==Xe}function yr(T){return nl(T)&&Ks(T)==$t}function Or(T){return nl(T)&&Ks(T)==at}function Hr(T,C,P,Y,ce){return T===C?!0:T==null||C==null||!nl(T)&&!nl(C)?T!==T&&C!==C:Js(T,C,P,Y,Hr,ce)}function Js(T,C,P,Y,ce,be){var ze=Fr(T),qe=Fr(C),ut=ze?Re:ql(T),Ht=qe?Re:ql(C);ut=ut==Xe?xt:ut,Ht=Ht==Xe?xt:Ht;var Gt=ut==xt,qt=Ht==xt,yn=ut==Ht;if(yn&&Kf(T)){if(!Kf(C))return!1;ze=!0,Gt=!1}if(yn&&!Gt)return be||(be=new Zi),ze||Ig(T)?Kt(T,C,P,Y,ce,be):ln(T,C,ut,P,Y,ce,be);if(!(P&w)){var Rn=Gt&&Br.call(T,"__wrapped__"),gr=qt&&Br.call(C,"__wrapped__");if(Rn||gr){var Nr=Rn?T.value():T,or=gr?C.value():C;return be||(be=new Zi),ce(Nr,or,P,Y,be)}}return yn?(be||(be=new Zi),fn(T,C,P,Y,ce,be)):!1}function Ri(T){return nl(T)&&ql(T)==rt}function Hi(T,C,P,Y){var ce=P.length,be=ce,ze=!Y;if(T==null)return!be;for(T=An(T);ce--;){var qe=P[ce];if(ze&&qe[2]?qe[1]!==T[qe[0]]:!(qe[0]in T))return!1}for(;++ce<be;){qe=P[ce];var ut=qe[0],Ht=T[ut],Gt=qe[1];if(ze&&qe[2]){if(Ht===t&&!(ut in T))return!1}else{var qt=new Zi;if(Y)var yn=Y(Ht,Gt,ut,T,C,qt);if(!(yn===t?Hr(Gt,Ht,w|x,Y,qt):yn))return!1}}return!0}function Xl(T){if(!Oa(T)||Ss(T))return!1;var C=Jf(T)?jc:$r;return C.test(oc(T))}function Cu(T){return nl(T)&&Ks(T)==It}function rc(T){return nl(T)&&ql(T)==mt}function Mu(T){return nl(T)&&jd(T.length)&&!!Xr[Ks(T)]}function Bs(T){return typeof T=="function"?T:T==null?Nh:typeof T=="object"?Fr(T)?Qs(T[0],T[1]):Iu(T):Vb(T)}function lo(T){if(!hd(T))return wh(T);var C=[];for(var P in An(T))Br.call(T,P)&&P!="constructor"&&C.push(P);return C}function sd(T){if(!Oa(T))return Fo(T);var C=hd(T),P=[];for(var Y in T)Y=="constructor"&&(C||!Br.call(T,Y))||P.push(Y);return P}function wa(T,C){return T<C}function Au(T,C){var P=-1,Y=Uo(T)?bt(T.length):[];return wl(T,function(ce,be,ze){Y[++P]=C(ce,be,ze)}),Y}function Iu(T){var C=a0(T);return C.length==1&&C[0][2]?bg(C[0][0],C[0][1]):function(P){return P===T||Hi(P,T,C)}}function Qs(T,C){return Aa(T)&&wm(C)?bg(Zl(T),C):function(P){var Y=v0(P,T);return Y===t&&Y===C?y0(P,T):Hr(C,Y,w|x)}}function To(T,C,P,Y,ce){T!==C&&xu(C,function(be,ze){if(ce||(ce=new Zi),Oa(be))Xa(T,C,ze,P,To,Y,ce);else{var qe=Y?Y(Nu(T,ze),be,ze+"",T,C,ce):t;qe===t&&(qe=be),$u(T,ze,qe)}},La)}function Xa(T,C,P,Y,ce,be,ze){var qe=Nu(T,P),ut=Nu(C,P),Ht=ze.get(ut);if(Ht){$u(T,P,Ht);return}var Gt=be?be(qe,ut,P+"",T,C,ze):t,qt=Gt===t;if(qt){var yn=Fr(ut),Rn=!yn&&Kf(ut),gr=!yn&&!Rn&&Ig(ut);Gt=ut,yn||Rn||gr?Fr(qe)?Gt=qe:ho(qe)?Gt=ns(qe):Rn?(qt=!1,Gt=ih(ut,!0)):gr?(qt=!1,Gt=Cl(ut,!0)):Gt=[]:Dr(ut)||_0(ut)?(Gt=qe,_0(qe)?Gt=Yw(qe):(!Oa(qe)||Jf(qe))&&(Gt=Oc(ut))):qt=!1}qt&&(ze.set(ut,Gt),ce(Gt,ut,Y,be,ze),ze.delete(ut)),$u(T,P,Gt)}function Eo(T,C){var P=T.length;if(P)return C+=C<0?P:0,oh(C,P)?T[C]:t}function ic(T,C,P){C.length?C=pi(C,function(be){return Fr(be)?function(ze){return ao(ze,be.length===1?be[0]:be)}:be}):C=[Nh];var Y=-1;C=pi(C,Si(Yn()));var ce=Au(T,function(be,ze,qe){var ut=pi(C,function(Ht){return Ht(be)});return{criteria:ut,index:++Y,value:be}});return Qo(ce,function(be,ze){return Ja(be,ze,P)})}function Ru(T,C){return Mh(T,C,function(P,Y){return y0(T,Y)})}function Mh(T,C,P){for(var Y=-1,ce=C.length,be={};++Y<ce;){var ze=C[Y],qe=ao(T,ze);P(qe,ze)&&si(be,ku(ze,T),qe)}return be}function Zc(T){return function(C){return ao(C,T)}}function Sr(T,C,P,Y){var ce=Y?vu:io,be=-1,ze=C.length,qe=T;for(T===C&&(C=ns(C)),P&&(qe=pi(T,Si(P)));++be<ze;)for(var ut=0,Ht=C[be],Gt=P?P(Ht):Ht;(ut=ce(qe,Gt,ut,Y))>-1;)qe!==T&&Xc.call(qe,ut,1),Xc.call(T,ut,1);return T}function Xi(T,C){for(var P=T?C.length:0,Y=P-1;P--;){var ce=C[P];if(P==Y||ce!==be){var be=ce;oh(ce)?Xc.call(T,ce,1):Ah(T,ce)}}return T}function Ts(T,C){return T+Ku(Tl()*(C-T+1))}function aa(T,C,P,Y){for(var ce=-1,be=so(Yc((C-T)/(P||1)),0),ze=bt(be);be--;)ze[Y?be:++ce]=T,T+=P;return ze}function Ps(T,C){var P="";if(!T||C<1||C>j)return P;do C%2&&(P+=T),C=Ku(C/2),C&&(T+=T);while(C);return P}function Gn(T,C){return qp(Tg(T,C,Nh),T+"")}function Ic(T){return Wa(T0(T))}function on(T,C){var P=T0(T);return Kn(P,ec(C,0,P.length))}function si(T,C,P,Y){if(!Oa(T))return T;C=ku(C,T);for(var ce=-1,be=C.length,ze=be-1,qe=T;qe!=null&&++ce<be;){var ut=Zl(C[ce]),Ht=P;if(ut==="__proto__"||ut==="constructor"||ut==="prototype")return T;if(ce!=ze){var Gt=qe[ut];Ht=Y?Y(Gt,ut,qe):t,Ht===t&&(Ht=Oa(Gt)?Gt:oh(C[ce+1])?[]:{})}sa(qe,ut,Ht),qe=qe[ut]}return T}var es=nd?function(T,C){return nd.set(T,C),T}:Nh,xl=Eu?function(T,C){return Eu(T,"toString",{configurable:!0,enumerable:!1,value:NE(C),writable:!0})}:Nh;function Ya(T){return Kn(T0(T))}function Dt(T,C,P){var Y=-1,ce=T.length;C<0&&(C=-C>ce?0:ce+C),P=P>ce?ce:P,P<0&&(P+=ce),ce=C>P?0:P-C>>>0,C>>>=0;for(var be=bt(ce);++Y<ce;)be[Y]=T[Y+C];return be}function xa(T,C){var P;return wl(T,function(Y,ce,be){return P=C(Y,ce,be),!P}),!!P}function Lr(T,C,P){var Y=0,ce=T==null?Y:T.length;if(typeof C=="number"&&C===C&&ce<=Oe){for(;Y<ce;){var be=Y+ce>>>1,ze=T[be];ze!==null&&!fd(ze)&&(P?ze<=C:ze<C)?Y=be+1:ce=be}return ce}return Rc(T,C,Nh,P)}function Rc(T,C,P,Y){var ce=0,be=T==null?0:T.length;if(be===0)return 0;C=P(C);for(var ze=C!==C,qe=C===null,ut=fd(C),Ht=C===t;ce<be;){var Gt=Ku((ce+be)/2),qt=P(T[Gt]),yn=qt!==t,Rn=qt===null,gr=qt===qt,Nr=fd(qt);if(ze)var or=Y||gr;else Ht?or=gr&&(Y||yn):qe?or=gr&&yn&&(Y||!Rn):ut?or=gr&&yn&&!Rn&&(Y||!Nr):Rn||Nr?or=!1:or=Y?qt<=C:qt<C;or?ce=Gt+1:be=Gt}return na(be,_e)}function od(T,C){for(var P=-1,Y=T.length,ce=0,be=[];++P<Y;){var ze=T[P],qe=C?C(ze):ze;if(!P||!Oh(qe,ut)){var ut=qe;be[ce++]=ze===0?0:ze}}return be}function eh(T){return typeof T=="number"?T:fd(T)?ne:+T}function ts(T){if(typeof T=="string")return T;if(Fr(T))return pi(T,ts)+"";if(fd(T))return ia?ia.call(T):"";var C=T+"";return C=="0"&&1/T==-Ae?"-0":C}function Es(T,C,P){var Y=-1,ce=ml,be=T.length,ze=!0,qe=[],ut=qe;if(P)ze=!1,ce=Yh;else if(be>=s){var Ht=C?null:br(T);if(Ht)return Yu(Ht);ze=!1,ce=ur,ut=new Sl}else ut=C?[]:qe;e:for(;++Y<be;){var Gt=T[Y],qt=C?C(Gt):Gt;if(Gt=P||Gt!==0?Gt:0,ze&&qt===qt){for(var yn=ut.length;yn--;)if(ut[yn]===qt)continue e;C&&ut.push(qt),qe.push(Gt)}else ce(ut,qt,P)||(ut!==qe&&ut.push(qt),qe.push(Gt))}return qe}function Ah(T,C){return C=ku(C,T),T=xm(T,C),T==null||delete T[Zl(Il(C))]}function qs(T,C,P,Y){return si(T,C,P(ao(T,C)),Y)}function Yl(T,C,P,Y){for(var ce=T.length,be=Y?ce:-1;(Y?be--:++be<ce)&&C(T[be],be,T););return P?Dt(T,Y?0:be,Y?be+1:ce):Dt(T,Y?be+1:0,Y?ce:be)}function th(T,C){var P=T;return P instanceof zn&&(P=P.value()),hp(C,function(Y,ce){return ce.func.apply(ce.thisArg,_u([Y],ce.args))},P)}function nh(T,C,P){var Y=T.length;if(Y<2)return Y?Es(T[0]):[];for(var ce=-1,be=bt(Y);++ce<Y;)for(var ze=T[ce],qe=-1;++qe<Y;)qe!=ce&&(be[ce]=Sa(be[ce]||ze,T[qe],C,P));return Es(us(be,1),C,P)}function sc(T,C,P){for(var Y=-1,ce=T.length,be=C.length,ze={};++Y<ce;){var qe=Y<be?C[Y]:t;P(ze,T[Y],qe)}return ze}function $o(T){return ho(T)?T:[]}function Zs(T){return typeof T=="function"?T:Nh}function ku(T,C){return Fr(T)?T:Aa(T,C)?[T]:Lv(Zr(T))}var rh=Gn;function Ka(T,C,P){var Y=T.length;return P=P===t?Y:P,!C&&P>=Y?T:Dt(T,C,P)}var Ou=$h||function(T){return Yr.clearTimeout(T)};function ih(T,C){if(C)return T.slice();var P=T.length,Y=qh?qh(P):new T.constructor(P);return T.copy(Y),Y}function sh(T){var C=new T.constructor(T.byteLength);return new Qh(C).set(new Qh(T)),C}function uo(T,C){var P=C?sh(T.buffer):T.buffer;return new T.constructor(P,T.byteOffset,T.byteLength)}function Fs(T){var C=new T.constructor(T.source,nr.exec(T));return C.lastIndex=T.lastIndex,C}function Lu(T){return qi?An(qi.call(T)):{}}function Cl(T,C){var P=C?sh(T.buffer):T.buffer;return new T.constructor(P,T.byteOffset,T.length)}function eo(T,C){if(T!==C){var P=T!==t,Y=T===null,ce=T===T,be=fd(T),ze=C!==t,qe=C===null,ut=C===C,Ht=fd(C);if(!qe&&!Ht&&!be&&T>C||be&&ze&&ut&&!qe&&!Ht||Y&&ze&&ut||!P&&ut||!ce)return 1;if(!Y&&!be&&!Ht&&T<C||Ht&&P&&ce&&!Y&&!be||qe&&P&&ce||!ze&&ce||!ut)return-1}return 0}function Ja(T,C,P){for(var Y=-1,ce=T.criteria,be=C.criteria,ze=ce.length,qe=P.length;++Y<ze;){var ut=eo(ce[Y],be[Y]);if(ut){if(Y>=qe)return ut;var Ht=P[Y];return ut*(Ht=="desc"?-1:1)}}return T.index-C.index}function Ca(T,C,P,Y){for(var ce=-1,be=T.length,ze=P.length,qe=-1,ut=C.length,Ht=so(be-ze,0),Gt=bt(ut+Ht),qt=!Y;++qe<ut;)Gt[qe]=C[qe];for(;++ce<ze;)(qt||ce<be)&&(Gt[P[ce]]=T[ce]);for(;Ht--;)Gt[qe++]=T[ce++];return Gt}function Kl(T,C,P,Y){for(var ce=-1,be=T.length,ze=-1,qe=P.length,ut=-1,Ht=C.length,Gt=so(be-qe,0),qt=bt(Gt+Ht),yn=!Y;++ce<Gt;)qt[ce]=T[ce];for(var Rn=ce;++ut<Ht;)qt[Rn+ut]=C[ut];for(;++ze<qe;)(yn||ce<be)&&(qt[Rn+P[ze]]=T[ce++]);return qt}function ns(T,C){var P=-1,Y=T.length;for(C||(C=bt(Y));++P<Y;)C[P]=T[P];return C}function So(T,C,P,Y){var ce=!P;P||(P={});for(var be=-1,ze=C.length;++be<ze;){var qe=C[be],ut=Y?Y(P[qe],T[qe],qe,P,T):t;ut===t&&(ut=T[qe]),ce?Su(P,qe,ut):sa(P,qe,ut)}return P}function Ih(T,C){return So(T,zf(T),C)}function ad(T,C){return So(T,cd(T),C)}function Qa(T,C){return function(P,Y){var ce=Fr(P)?Kr:Ea,be=C?C():{};return ce(P,T,Yn(Y,2),be)}}function Jl(T){return Gn(function(C,P){var Y=-1,ce=P.length,be=ce>1?P[ce-1]:t,ze=ce>2?P[2]:t;for(be=T.length>3&&typeof be=="function"?(ce--,be):t,ze&&ki(P[0],P[1],ze)&&(be=ce<3?t:be,ce=1),C=An(C);++Y<ce;){var qe=P[Y];qe&&T(C,qe,Y,be)}return C})}function ld(T,C){return function(P,Y){if(P==null)return P;if(!Uo(P))return T(P,Y);for(var ce=P.length,be=C?ce:-1,ze=An(P);(C?be--:++be<ce)&&Y(ze[be],be,ze)!==!1;);return P}}function kc(T){return function(C,P,Y){for(var ce=-1,be=An(C),ze=Y(C),qe=ze.length;qe--;){var ut=ze[T?qe:++ce];if(P(be[ut],ut,be)===!1)break}return C}}function Kp(T,C,P){var Y=C&A,ce=f(T);function be(){var ze=this&&this!==Yr&&this instanceof be?ce:T;return ze.apply(Y?P:this,arguments)}return be}function $(T){return function(C){C=Zr(C);var P=Xu(C)?Jr(C):t,Y=P?P[0]:C.charAt(0),ce=P?Ka(P,1).join(""):C.slice(1);return Y[T]()+ce}}function c(T){return function(C){return hp(lx(xE(C).replace(Ei,"")),T,"")}}function f(T){return function(){var C=arguments;switch(C.length){case 0:return new T;case 1:return new T(C[0]);case 2:return new T(C[0],C[1]);case 3:return new T(C[0],C[1],C[2]);case 4:return new T(C[0],C[1],C[2],C[3]);case 5:return new T(C[0],C[1],C[2],C[3],C[4]);case 6:return new T(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new T(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var P=Xs(T.prototype),Y=T.apply(P,C);return Oa(Y)?Y:P}}function S(T,C,P){var Y=f(T);function ce(){for(var be=arguments.length,ze=bt(be),qe=be,ut=Jp(ce);qe--;)ze[qe]=arguments[qe];var Ht=be<3&&ze[0]!==ut&&ze[be-1]!==ut?[]:Zo(ze,ut);if(be-=Ht.length,be<P)return an(T,C,G,ce.placeholder,t,ze,Ht,t,t,P-be);var Gt=this&&this!==Yr&&this instanceof ce?Y:T;return Un(Gt,this,ze)}return ce}function M(T){return function(C,P,Y){var ce=An(C);if(!Uo(C)){var be=Yn(P,3);C=ua(C),P=function(qe){return be(ce[qe],qe,ce)}}var ze=T(C,P,Y);return ze>-1?ce[be?C[ze]:ze]:t}}function L(T){return kn(function(C){var P=C.length,Y=P,ce=Ur.prototype.thru;for(T&&C.reverse();Y--;){var be=C[Y];if(typeof be!="function")throw new vs(l);if(ce&&!ze&&Sm(be)=="wrapper")var ze=new Ur([],!0)}for(Y=ze?Y:P;++Y<P;){be=C[Y];var qe=Sm(be),ut=qe=="wrapper"?Ql(be):t;ut&&vi(ut[0])&&ut[1]==(H|N|U|z)&&!ut[4].length&&ut[9]==1?ze=ze[Sm(ut[0])].apply(ze,ut[3]):ze=be.length==1&&vi(be)?ze[qe]():ze.thru(be)}return function(){var Ht=arguments,Gt=Ht[0];if(ze&&Ht.length==1&&Fr(Gt))return ze.plant(Gt).value();for(var qt=0,yn=P?C[qt].apply(this,Ht):Gt;++qt<P;)yn=C[qt].call(this,yn);return yn}})}function G(T,C,P,Y,ce,be,ze,qe,ut,Ht){var Gt=C&H,qt=C&A,yn=C&O,Rn=C&(N|D),gr=C&J,Nr=yn?t:f(T);function or(){for(var li=arguments.length,yi=bt(li),gd=li;gd--;)yi[gd]=arguments[gd];if(Rn)var lh=Jp(or),ru=Hl(yi,lh);if(Y&&(yi=Ca(yi,Y,ce,Rn)),be&&(yi=Kl(yi,be,ze,Rn)),li-=ru,Rn&&li<Ht){var rl=Zo(yi,lh);return an(T,C,G,or.placeholder,P,yi,rl,qe,ut,Ht-li)}var Ap=qt?P:this,nm=yn?Ap[T]:T;return li=yi.length,qe?yi=Ia(yi,qe):gr&&li>1&&yi.reverse(),Gt&&ut<li&&(yi.length=ut),this&&this!==Yr&&this instanceof or&&(nm=Nr||f(nm)),nm.apply(Ap,yi)}return or}function se(T,C){return function(P,Y){return _i(P,T,C(Y),{})}}function we(T,C){return function(P,Y){var ce;if(P===t&&Y===t)return C;if(P!==t&&(ce=P),Y!==t){if(ce===t)return Y;typeof P=="string"||typeof Y=="string"?(P=ts(P),Y=ts(Y)):(P=eh(P),Y=eh(Y)),ce=T(P,Y)}return ce}}function je(T){return kn(function(C){return C=pi(C,Si(Yn())),Gn(function(P){var Y=this;return T(C,function(ce){return Un(ce,Y,P)})})})}function _t(T,C){C=C===t?" ":ts(C);var P=C.length;if(P<2)return P?Ps(C,T):C;var Y=Ps(C,Yc(T/_s(C)));return Xu(C)?Ka(Jr(Y),0,T).join(""):Y.slice(0,T)}function zt(T,C,P,Y){var ce=C&A,be=f(T);function ze(){for(var qe=-1,ut=arguments.length,Ht=-1,Gt=Y.length,qt=bt(Gt+ut),yn=this&&this!==Yr&&this instanceof ze?be:T;++Ht<Gt;)qt[Ht]=Y[Ht];for(;ut--;)qt[Ht++]=arguments[++qe];return Un(yn,ce?P:this,qt)}return ze}function Zt(T){return function(C,P,Y){return Y&&typeof Y!="number"&&ki(C,P,Y)&&(P=Y=t),C=Qf(C),P===t?(P=C,C=0):P=Qf(P),Y=Y===t?C<P?1:-1:Qf(Y),aa(C,P,Y,T)}}function hn(T){return function(C,P){return typeof C=="string"&&typeof P=="string"||(C=Co(C),P=Co(P)),T(C,P)}}function an(T,C,P,Y,ce,be,ze,qe,ut,Ht){var Gt=C&N,qt=Gt?ze:t,yn=Gt?t:ze,Rn=Gt?be:t,gr=Gt?t:be;C|=Gt?U:F,C&=~(Gt?F:U),C&k||(C&=~(A|O));var Nr=[T,C,ce,Rn,qt,gr,yn,qe,ut,Ht],or=P.apply(t,Nr);return vi(T)&&vp(or,Nr),or.placeholder=Y,ah(or,T,C)}function nn(T){var C=rr[T];return function(P,Y){if(P=Co(P),Y=Y==null?0:na(Cr(Y),292),Y&&bl(P)){var ce=(Zr(P)+"e").split("e"),be=C(ce[0]+"e"+(+ce[1]+Y));return ce=(Zr(be)+"e").split("e"),+(ce[0]+"e"+(+ce[1]-Y))}return C(P)}}var br=Ju&&1/Yu(new Ju([,-0]))[1]==Ae?function(T){return new Ju(T)}:Wb;function ft(T){return function(C){var P=ql(C);return P==rt?yc(C):P==mt?bh(C):gl(C,T(C))}}function Ee(T,C,P,Y,ce,be,ze,qe){var ut=C&O;if(!ut&&typeof T!="function")throw new vs(l);var Ht=Y?Y.length:0;if(Ht||(C&=~(U|F),Y=ce=t),ze=ze===t?ze:so(Cr(ze),0),qe=qe===t?qe:Cr(qe),Ht-=ce?ce.length:0,C&F){var Gt=Y,qt=ce;Y=ce=t}var yn=ut?t:Ql(T),Rn=[T,C,P,Y,ce,Gt,qt,be,ze,qe];if(yn&&Hf(Rn,yn),T=Rn[0],C=Rn[1],P=Rn[2],Y=Rn[3],ce=Rn[4],qe=Rn[9]=Rn[9]===t?ut?0:T.length:so(Rn[9]-Ht,0),!qe&&C&(N|D)&&(C&=~(N|D)),!C||C==A)var gr=Kp(T,C,P);else C==N||C==D?gr=S(T,C,qe):(C==U||C==(A|U))&&!ce.length?gr=zt(T,C,P,Y):gr=G.apply(t,Rn);var Nr=yn?es:vp;return ah(Nr(gr,Rn),T,C)}function Ce(T,C,P,Y){return T===t||Oh(T,ji[P])&&!Br.call(Y,P)?C:T}function Ke(T,C,P,Y,ce,be){return Oa(T)&&Oa(C)&&(be.set(C,T),To(T,C,t,Ke,be),be.delete(C)),T}function Ot(T){return Dr(T)?t:T}function Kt(T,C,P,Y,ce,be){var ze=P&w,qe=T.length,ut=C.length;if(qe!=ut&&!(ze&&ut>qe))return!1;var Ht=be.get(T),Gt=be.get(C);if(Ht&&Gt)return Ht==C&&Gt==T;var qt=-1,yn=!0,Rn=P&x?new Sl:t;for(be.set(T,C),be.set(C,T);++qt<qe;){var gr=T[qt],Nr=C[qt];if(Y)var or=ze?Y(Nr,gr,qt,C,T,be):Y(gr,Nr,qt,T,C,be);if(or!==t){if(or)continue;yn=!1;break}if(Rn){if(!_h(C,function(li,yi){if(!ur(Rn,yi)&&(gr===li||ce(gr,li,P,Y,be)))return Rn.push(yi)})){yn=!1;break}}else if(!(gr===Nr||ce(gr,Nr,P,Y,be))){yn=!1;break}}return be.delete(T),be.delete(C),yn}function ln(T,C,P,Y,ce,be,ze){switch(P){case ct:if(T.byteLength!=C.byteLength||T.byteOffset!=C.byteOffset)return!1;T=T.buffer,C=C.buffer;case $t:return!(T.byteLength!=C.byteLength||!be(new Qh(T),new Qh(C)));case et:case at:case We:return Oh(+T,+C);case De:return T.name==C.name&&T.message==C.message;case It:case ve:return T==C+"";case rt:var qe=yc;case mt:var ut=Y&w;if(qe||(qe=Yu),T.size!=C.size&&!ut)return!1;var Ht=ze.get(T);if(Ht)return Ht==C;Y|=x,ze.set(T,C);var Gt=Kt(qe(T),qe(C),Y,ce,be,ze);return ze.delete(T),Gt;case ee:if(qi)return qi.call(T)==qi.call(C)}return!1}function fn(T,C,P,Y,ce,be){var ze=P&w,qe=Wn(T),ut=qe.length,Ht=Wn(C),Gt=Ht.length;if(ut!=Gt&&!ze)return!1;for(var qt=ut;qt--;){var yn=qe[qt];if(!(ze?yn in C:Br.call(C,yn)))return!1}var Rn=be.get(T),gr=be.get(C);if(Rn&&gr)return Rn==C&&gr==T;var Nr=!0;be.set(T,C),be.set(C,T);for(var or=ze;++qt<ut;){yn=qe[qt];var li=T[yn],yi=C[yn];if(Y)var gd=ze?Y(yi,li,yn,C,T,be):Y(li,yi,yn,T,C,be);if(!(gd===t?li===yi||ce(li,yi,P,Y,be):gd)){Nr=!1;break}or||(or=yn=="constructor")}if(Nr&&!or){var lh=T.constructor,ru=C.constructor;lh!=ru&&"constructor"in T&&"constructor"in C&&!(typeof lh=="function"&&lh instanceof lh&&typeof ru=="function"&&ru instanceof ru)&&(Nr=!1)}return be.delete(T),be.delete(C),Nr}function kn(T){return qp(Tg(T,t,Zp),T+"")}function Wn(T){return Qc(T,ua,zf)}function fr(T){return Qc(T,La,cd)}var Ql=nd?function(T){return nd.get(T)}:Wb;function Sm(T){for(var C=T.name+"",P=wc[C],Y=Br.call(wc,C)?P.length:0;Y--;){var ce=P[Y],be=ce.func;if(be==null||be==T)return ce.name}return C}function Jp(T){var C=Br.call(ye,"placeholder")?ye:T;return C.placeholder}function Yn(){var T=ye.iteratee||Di;return T=T===Di?Bs:T,arguments.length?T(arguments[0],arguments[1]):T}function ud(T,C){var P=T.__data__;return Be(C)?P[typeof C=="string"?"string":"hash"]:P.map}function a0(T){for(var C=ua(T),P=C.length;P--;){var Y=C[P],ce=T[Y];C[P]=[Y,ce,wm(ce)]}return C}function Du(T,C){var P=bu(T,C);return Xl(P)?P:t}function Ma(T){var C=Br.call(T,ya),P=T[ya];try{T[ya]=t;var Y=!0}catch{}var ce=js.call(T);return Y&&(C?T[ya]=P:delete T[ya]),ce}var zf=Sh?function(T){return T==null?[]:(T=An(T),gs(Sh(T),function(C){return $c.call(T,C)}))}:Xb,cd=Sh?function(T){for(var C=[];T;)_u(C,zf(T)),T=yl(T);return C}:Xb,ql=Ks;(Sc&&ql(new Sc(new ArrayBuffer(1)))!=ct||xh&&ql(new xh)!=rt||td&&ql(td.resolve())!=ht||Ju&&ql(new Ju)!=mt||Ha&&ql(new Ha)!=ot)&&(ql=function(T){var C=Ks(T),P=C==xt?T.constructor:t,Y=P?oc(P):"";if(Y)switch(Y){case xc:return ct;case qu:return rt;case Nd:return ht;case ra:return mt;case xr:return ot}return C});function tn(T,C,P){for(var Y=-1,ce=P.length;++Y<ce;){var be=P[Y],ze=be.size;switch(be.type){case"drop":T+=ze;break;case"dropRight":C-=ze;break;case"take":C=na(C,T+ze);break;case"takeRight":T=so(T,C-ze);break}}return{start:T,end:C}}function o_(T){var C=T.match(st);return C?C[1].split(Tt):[]}function a_(T,C,P){C=ku(C,T);for(var Y=-1,ce=C.length,be=!1;++Y<ce;){var ze=Zl(C[Y]);if(!(be=T!=null&&P(T,ze)))break;T=T[ze]}return be||++Y!=ce?be:(ce=T==null?0:T.length,!!ce&&jd(ce)&&oh(ze,ce)&&(Fr(T)||_0(T)))}function yg(T){var C=T.length,P=new T.constructor(C);return C&&typeof T[0]=="string"&&Br.call(T,"index")&&(P.index=T.index,P.input=T.input),P}function Oc(T){return typeof T.constructor=="function"&&!hd(T)?Xs(yl(T)):{}}function $s(T,C,P){var Y=T.constructor;switch(C){case $t:return sh(T);case et:case at:return new Y(+T);case ct:return uo(T,P);case Ge:case Me:case X:case Q:case ae:case $e:case Ve:case Pt:case Fe:return Cl(T,P);case rt:return new Y;case We:case ve:return new Y(T);case It:return Fs(T);case mt:return new Y;case ee:return Lu(T)}}function Qp(T,C){var P=C.length;if(!P)return T;var Y=P-1;return C[Y]=(P>1?"& ":"")+C[Y],C=C.join(P>2?", ":" "),T.replace(Ie,`{
/* [wrapped with `+C+`] */
`)}function zd(T){return Fr(T)||_0(T)||!!(Od&&T&&T[Od])}function oh(T,C){var P=typeof T;return C=C??j,!!C&&(P=="number"||P!="symbol"&&Wi.test(T))&&T>-1&&T%1==0&&T<C}function ki(T,C,P){if(!Oa(P))return!1;var Y=typeof C;return(Y=="number"?Uo(P)&&oh(C,P.length):Y=="string"&&C in P)?Oh(P[C],T):!1}function Aa(T,C){if(Fr(T))return!1;var P=typeof T;return P=="number"||P=="symbol"||P=="boolean"||T==null||fd(T)?!0:me.test(T)||!q.test(T)||C!=null&&T in An(C)}function Be(T){var C=typeof T;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?T!=="__proto__":T===null}function vi(T){var C=Sm(T),P=ye[C];if(typeof P!="function"||!(C in zn.prototype))return!1;if(T===P)return!0;var Y=Ql(P);return!!Y&&T===Y[0]}function Ss(T){return!!Ds&&Ds in T}var kv=os?Jf:E0;function hd(T){var C=T&&T.constructor,P=typeof C=="function"&&C.prototype||ji;return T===P}function wm(T){return T===T&&!Oa(T)}function bg(T,C){return function(P){return P==null?!1:P[T]===C&&(C!==t||T in An(P))}}function Ov(T){var C=it(T,function(Y){return P.size===d&&P.clear(),Y}),P=C.cache;return C}function Hf(T,C){var P=T[1],Y=C[1],ce=P|Y,be=ce<(A|O|H),ze=Y==H&&P==N||Y==H&&P==z&&T[7].length<=C[8]||Y==(H|z)&&C[7].length<=C[8]&&P==N;if(!(be||ze))return T;Y&A&&(T[2]=C[2],ce|=P&A?0:k);var qe=C[3];if(qe){var ut=T[3];T[3]=ut?Ca(ut,qe,C[4]):qe,T[4]=ut?Zo(T[3],m):C[4]}return qe=C[5],qe&&(ut=T[5],T[5]=ut?Kl(ut,qe,C[6]):qe,T[6]=ut?Zo(T[5],m):C[6]),qe=C[7],qe&&(T[7]=qe),Y&H&&(T[8]=T[8]==null?C[8]:na(T[8],C[8])),T[9]==null&&(T[9]=C[9]),T[0]=C[0],T[1]=ce,T}function Fo(T){var C=[];if(T!=null)for(var P in An(T))C.push(P);return C}function l0(T){return js.call(T)}function Tg(T,C,P){return C=so(C===t?T.length-1:C,0),function(){for(var Y=arguments,ce=-1,be=so(Y.length-C,0),ze=bt(be);++ce<be;)ze[ce]=Y[C+ce];ce=-1;for(var qe=bt(C+1);++ce<C;)qe[ce]=Y[ce];return qe[C]=P(ze),Un(T,this,qe)}}function xm(T,C){return C.length<2?T:ao(T,Dt(C,0,-1))}function Ia(T,C){for(var P=T.length,Y=na(C.length,P),ce=ns(T);Y--;){var be=C[Y];T[Y]=oh(be,P)?ce[be]:t}return T}function Nu(T,C){if(!(C==="constructor"&&typeof T[C]=="function")&&C!="__proto__")return T[C]}var vp=l_(es),Eg=ed||function(T,C){return Yr.setTimeout(T,C)},qp=l_(xl);function ah(T,C,P){var Y=C+"";return qp(T,Qp(Y,Cm(o_(Y),P)))}function l_(T){var C=0,P=0;return function(){var Y=Ff(),ce=de-(Y-P);if(P=Y,ce>0){if(++C>=ie)return arguments[0]}else C=0;return T.apply(t,arguments)}}function Kn(T,C){var P=-1,Y=T.length,ce=Y-1;for(C=C===t?Y:C;++P<C;){var be=Ts(P,ce),ze=T[be];T[be]=T[P],T[P]=ze}return T.length=C,T}var Lv=Ov(function(T){var C=[];return T.charCodeAt(0)===46&&C.push(""),T.replace(Ne,function(P,Y,ce,be){C.push(ce?be.replace(xn,"$1"):Y||P)}),C});function Zl(T){if(typeof T=="string"||fd(T))return T;var C=T+"";return C=="0"&&1/T==-Ae?"-0":C}function oc(T){if(T!=null){try{return Ec.call(T)}catch{}try{return T+""}catch{}}return""}function Cm(T,C){return $i(xe,function(P){var Y="_."+P[0];C&P[1]&&!ml(T,Y)&&T.push(Y)}),T.sort()}function yp(T){if(T instanceof zn)return T.clone();var C=new Ur(T.__wrapped__,T.__chain__);return C.__actions__=ns(T.__actions__),C.__index__=T.__index__,C.__values__=T.__values__,C}function Mm(T,C,P){(P?ki(T,C,P):C===t)?C=1:C=so(Cr(C),0);var Y=T==null?0:T.length;if(!Y||C<1)return[];for(var ce=0,be=0,ze=bt(Yc(Y/C));ce<Y;)ze[be++]=Dt(T,ce,ce+=C);return ze}function eu(T){for(var C=-1,P=T==null?0:T.length,Y=0,ce=[];++C<P;){var be=T[C];be&&(ce[Y++]=be)}return ce}function u_(){var T=arguments.length;if(!T)return[];for(var C=bt(T-1),P=arguments[0],Y=T;Y--;)C[Y-1]=arguments[Y];return _u(Fr(P)?ns(P):[P],us(C,1))}var co=Gn(function(T,C){return ho(T)?Sa(T,us(C,1,ho,!0)):[]}),Ci=Gn(function(T,C){var P=Il(C);return ho(P)&&(P=t),ho(T)?Sa(T,us(C,1,ho,!0),Yn(P,2)):[]}),Ml=Gn(function(T,C){var P=Il(C);return ho(P)&&(P=t),ho(T)?Sa(T,us(C,1,ho,!0),t,P):[]});function Ra(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:Cr(C),Dt(T,C<0?0:C,Y)):[]}function tu(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:Cr(C),C=Y-C,Dt(T,0,C<0?0:C)):[]}function Al(T,C){return T&&T.length?Yl(T,Yn(C,3),!0,!0):[]}function Gf(T,C){return T&&T.length?Yl(T,Yn(C,3),!0):[]}function qa(T,C,P,Y){var ce=T==null?0:T.length;return ce?(P&&typeof P!="number"&&ki(T,C,P)&&(P=0,Y=ce),id(T,C,P,Y)):[]}function bp(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ce=P==null?0:Cr(P);return ce<0&&(ce=so(Y+ce,0)),ju(T,Yn(C,3),ce)}function Tp(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ce=Y-1;return P!==t&&(ce=Cr(P),ce=P<0?so(Y+ce,0):na(ce,Y-1)),ju(T,Yn(C,3),ce,!0)}function Zp(T){var C=T==null?0:T.length;return C?us(T,1):[]}function u0(T){var C=T==null?0:T.length;return C?us(T,Ae):[]}function Am(T,C){var P=T==null?0:T.length;return P?(C=C===t?1:Cr(C),us(T,C)):[]}function Lc(T){for(var C=-1,P=T==null?0:T.length,Y={};++C<P;){var ce=T[C];Y[ce[0]]=ce[1]}return Y}function Za(T){return T&&T.length?T[0]:t}function Dc(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ce=P==null?0:Cr(P);return ce<0&&(ce=so(Y+ce,0)),io(T,C,ce)}function Hd(T){var C=T==null?0:T.length;return C?Dt(T,0,-1):[]}var $g=Gn(function(T){var C=pi(T,$o);return C.length&&C[0]===T[0]?oa(C):[]}),Sg=Gn(function(T){var C=Il(T),P=pi(T,$o);return C===Il(P)?C=t:P.pop(),P.length&&P[0]===T[0]?oa(P,Yn(C,2)):[]}),Us=Gn(function(T){var C=Il(T),P=pi(T,$o);return C=typeof C=="function"?C:t,C&&P.pop(),P.length&&P[0]===T[0]?oa(P,t,C):[]});function Im(T,C){return T==null?"":Dd.call(T,C)}function Il(T){var C=T==null?0:T.length;return C?T[C-1]:t}function el(T,C,P){var Y=T==null?0:T.length;if(!Y)return-1;var ce=Y;return P!==t&&(ce=Cr(P),ce=ce<0?so(Y+ce,0):na(ce,Y-1)),C===C?Tc(T,C,ce):ju(T,vh,ce,!0)}function Wf(T,C){return T&&T.length?Eo(T,Cr(C)):t}var c0=Gn(Ep);function Ep(T,C){return T&&T.length&&C&&C.length?Sr(T,C):T}function wg(T,C,P){return T&&T.length&&C&&C.length?Sr(T,C,Yn(P,2)):T}function ac(T,C,P){return T&&T.length&&C&&C.length?Sr(T,C,t,P):T}var Gd=kn(function(T,C){var P=T==null?0:T.length,Y=Fd(T,C);return Xi(T,pi(C,function(ce){return oh(ce,P)?+ce:ce}).sort(eo)),Y});function wo(T,C){var P=[];if(!(T&&T.length))return P;var Y=-1,ce=[],be=T.length;for(C=Yn(C,3);++Y<be;){var ze=T[Y];C(ze,Y,T)&&(P.push(ze),ce.push(Y))}return Xi(T,ce),P}function ka(T){return T==null?T:El.call(T)}function Dv(T,C,P){var Y=T==null?0:T.length;return Y?(P&&typeof P!="number"&&ki(T,C,P)?(C=0,P=Y):(C=C==null?0:Cr(C),P=P===t?Y:Cr(P)),Dt(T,C,P)):[]}function Rm(T,C){return Lr(T,C)}function c_(T,C,P){return Rc(T,C,Yn(P,2))}function wb(T,C){var P=T==null?0:T.length;if(P){var Y=Lr(T,C);if(Y<P&&Oh(T[Y],C))return Y}return-1}function ef(T,C){return Lr(T,C,!0)}function Vf(T,C,P){return Rc(T,C,Yn(P,2),!0)}function h_(T,C){var P=T==null?0:T.length;if(P){var Y=Lr(T,C,!0)-1;if(Oh(T[Y],C))return Y}return-1}function jf(T){return T&&T.length?od(T):[]}function d_(T,C){return T&&T.length?od(T,Yn(C,2)):[]}function km(T){var C=T==null?0:T.length;return C?Dt(T,1,C):[]}function p_(T,C,P){return T&&T.length?(C=P||C===t?1:Cr(C),Dt(T,0,C<0?0:C)):[]}function Nv(T,C,P){var Y=T==null?0:T.length;return Y?(C=P||C===t?1:Cr(C),C=Y-C,Dt(T,C<0?0:C,Y)):[]}function Om(T,C){return T&&T.length?Yl(T,Yn(C,3),!1,!0):[]}function $p(T,C){return T&&T.length?Yl(T,Yn(C,3)):[]}var Bv=Gn(function(T){return Es(us(T,1,ho,!0))}),fE=Gn(function(T){var C=Il(T);return ho(C)&&(C=t),Es(us(T,1,ho,!0),Yn(C,2))}),f_=Gn(function(T){var C=Il(T);return C=typeof C=="function"?C:t,Es(us(T,1,ho,!0),t,C)});function m_(T){return T&&T.length?Es(T):[]}function tf(T,C){return T&&T.length?Es(T,Yn(C,2)):[]}function En(T,C){return C=typeof C=="function"?C:t,T&&T.length?Es(T,t,C):[]}function Rh(T){if(!(T&&T.length))return[];var C=0;return T=gs(T,function(P){if(ho(P))return C=so(P.length,C),!0}),yu(C,function(P){return pi(T,Wr(P))})}function Lm(T,C){if(!(T&&T.length))return[];var P=Rh(T);return C==null?P:pi(P,function(Y){return Un(C,t,Y)})}var xo=Gn(function(T,C){return ho(T)?Sa(T,C):[]}),Pv=Gn(function(T){return nh(gs(T,ho))}),g_=Gn(function(T){var C=Il(T);return ho(C)&&(C=t),nh(gs(T,ho),Yn(C,2))}),Dm=Gn(function(T){var C=Il(T);return C=typeof C=="function"?C:t,nh(gs(T,ho),t,C)}),mE=Gn(Rh);function xb(T,C){return sc(T||[],C||[],sa)}function Nc(T,C){return sc(T||[],C||[],si)}var zs=Gn(function(T){var C=T.length,P=C>1?T[C-1]:t;return P=typeof P=="function"?(T.pop(),P):t,Lm(T,P)});function Bu(T){var C=ye(T);return C.__chain__=!0,C}function h0(T,C){return C(T),T}function xg(T,C){return C(T)}var kh=kn(function(T){var C=T.length,P=C?T[0]:0,Y=this.__wrapped__,ce=function(be){return Fd(be,T)};return C>1||this.__actions__.length||!(Y instanceof zn)||!oh(P)?this.thru(ce):(Y=Y.slice(P,+P+(C?1:0)),Y.__actions__.push({func:xg,args:[ce],thisArg:t}),new Ur(Y,this.__chain__).thru(function(be){return C&&!be.length&&be.push(t),be}))});function Nm(){return Bu(this)}function nf(){return new Ur(this.value(),this.__chain__)}function rf(){this.__values__===t&&(this.__values__=yE(this.value()));var T=this.__index__>=this.__values__.length,C=T?t:this.__values__[this.__index__++];return{done:T,value:C}}function Xf(){return this}function dd(T){for(var C,P=this;P instanceof Ga;){var Y=yp(P);Y.__index__=0,Y.__values__=t,C?ce.__wrapped__=Y:C=Y;var ce=Y;P=P.__wrapped__}return ce.__wrapped__=T,C}function Sp(){var T=this.__wrapped__;if(T instanceof zn){var C=T;return this.__actions__.length&&(C=new zn(this)),C=C.reverse(),C.__actions__.push({func:xg,args:[ka],thisArg:t}),new Ur(C,this.__chain__)}return this.thru(ka)}function Cg(){return th(this.__wrapped__,this.__actions__)}var Cb=Qa(function(T,C,P){Br.call(T,P)?++T[P]:Su(T,P,1)});function d0(T,C,P){var Y=Fr(T)?gu:jl;return P&&ki(T,C,P)&&(C=t),Y(T,Yn(C,3))}function Wd(T,C){var P=Fr(T)?gs:Ac;return P(T,Yn(C,3))}var qr=M(bp),Bm=M(Tp);function Mg(T,C){return us(oi(T,C),1)}function p0(T,C){return us(oi(T,C),Ae)}function Mb(T,C,P){return P=P===t?1:Cr(P),us(oi(T,C),P)}function f0(T,C){var P=Fr(T)?$i:wl;return P(T,Yn(C,3))}function Pm(T,C){var P=Fr(T)?Xh:Yp;return P(T,Yn(C,3))}var Ag=Qa(function(T,C,P){Br.call(T,P)?T[P].push(C):Su(T,P,[C])});function sf(T,C,P,Y){T=Uo(T)?T:T0(T),P=P&&!Y?Cr(P):0;var ce=T.length;return P<0&&(P=so(ce+P,0)),y_(T)?P<=ce&&T.indexOf(C,P)>-1:!!ce&&io(T,C,P)>-1}var of=Gn(function(T,C,P){var Y=-1,ce=typeof C=="function",be=Uo(T)?bt(T.length):[];return wl(T,function(ze){be[++Y]=ce?Un(C,ze,P):wn(ze,C,P)}),be}),Fm=Qa(function(T,C,P){Su(T,P,C)});function oi(T,C){var P=Fr(T)?pi:Au;return P(T,Yn(C,3))}function af(T,C,P,Y){return T==null?[]:(Fr(C)||(C=C==null?[]:[C]),P=Y?t:P,Fr(P)||(P=P==null?[]:[P]),ic(T,C,P))}var Um=Qa(function(T,C,P){T[P?0:1].push(C)},function(){return[[],[]]});function zm(T,C,P){var Y=Fr(T)?hp:Vs,ce=arguments.length<3;return Y(T,Yn(C,4),P,ce,wl)}function Yf(T,C,P){var Y=Fr(T)?dp:Vs,ce=arguments.length<3;return Y(T,Yn(C,4),P,ce,Yp)}function m0(T,C){var P=Fr(T)?gs:Ac;return P(T,yt(Yn(C,3)))}function g(T){var C=Fr(T)?Wa:Ic;return C(T)}function y(T,C,P){(P?ki(T,C,P):C===t)?C=1:C=Cr(C);var Y=Fr(T)?Zu:on;return Y(T,C)}function I(T){var C=Fr(T)?Uf:Ya;return C(T)}function B(T){if(T==null)return 0;if(Uo(T))return y_(T)?_s(T):T.length;var C=ql(T);return C==rt||C==mt?T.size:lo(T).length}function V(T,C,P){var Y=Fr(T)?_h:xa;return P&&ki(T,C,P)&&(C=t),Y(T,Yn(C,3))}var K=Gn(function(T,C){if(T==null)return[];var P=C.length;return P>1&&ki(T,C[0],C[1])?C=[]:P>2&&ki(C[0],C[1],C[2])&&(C=[C[0]]),ic(T,us(C,1),[])}),fe=ri||function(){return Yr.Date.now()};function Ue(T,C){if(typeof C!="function")throw new vs(l);return T=Cr(T),function(){if(--T<1)return C.apply(this,arguments)}}function Ze(T,C,P){return C=P?t:C,C=T&&C==null?T.length:C,Ee(T,H,t,t,t,t,C)}function Ct(T,C){var P;if(typeof C!="function")throw new vs(l);return T=Cr(T),function(){return--T>0&&(P=C.apply(this,arguments)),T<=1&&(C=t),P}}var jt=Gn(function(T,C,P){var Y=A;if(P.length){var ce=Zo(P,Jp(jt));Y|=U}return Ee(T,Y,C,P,ce)}),en=Gn(function(T,C,P){var Y=A|O;if(P.length){var ce=Zo(P,Jp(en));Y|=U}return Ee(C,Y,T,P,ce)});function Jt(T,C,P){C=P?t:C;var Y=Ee(T,N,t,t,t,t,t,C);return Y.placeholder=Jt.placeholder,Y}function vn(T,C,P){C=P?t:C;var Y=Ee(T,D,t,t,t,t,t,C);return Y.placeholder=vn.placeholder,Y}function In(T,C,P){var Y,ce,be,ze,qe,ut,Ht=0,Gt=!1,qt=!1,yn=!0;if(typeof T!="function")throw new vs(l);C=Co(C)||0,Oa(P)&&(Gt=!!P.leading,qt="maxWait"in P,be=qt?so(Co(P.maxWait)||0,C):be,yn="trailing"in P?!!P.trailing:yn);function Rn(rl){var Ap=Y,nm=ce;return Y=ce=t,Ht=rl,ze=T.apply(nm,Ap),ze}function gr(rl){return Ht=rl,qe=Eg(li,C),Gt?Rn(rl):ze}function Nr(rl){var Ap=rl-ut,nm=rl-Ht,JE=C-Ap;return qt?na(JE,be-nm):JE}function or(rl){var Ap=rl-ut,nm=rl-Ht;return ut===t||Ap>=C||Ap<0||qt&&nm>=be}function li(){var rl=fe();if(or(rl))return yi(rl);qe=Eg(li,Nr(rl))}function yi(rl){return qe=t,yn&&Y?Rn(rl):(Y=ce=t,ze)}function gd(){qe!==t&&Ou(qe),Ht=0,Y=ut=ce=qe=t}function lh(){return qe===t?ze:yi(fe())}function ru(){var rl=fe(),Ap=or(rl);if(Y=arguments,ce=this,ut=rl,Ap){if(qe===t)return gr(ut);if(qt)return Ou(qe),qe=Eg(li,C),Rn(ut)}return qe===t&&(qe=Eg(li,C)),ze}return ru.cancel=gd,ru.flush=lh,ru}var Ln=Gn(function(T,C){return rd(T,1,C)}),to=Gn(function(T,C,P){return rd(T,Co(C)||0,P)});function vt(T){return Ee(T,J)}function it(T,C){if(typeof T!="function"||C!=null&&typeof C!="function")throw new vs(l);var P=function(){var Y=arguments,ce=C?C.apply(this,Y):Y[0],be=P.cache;if(be.has(ce))return be.get(ce);var ze=T.apply(this,Y);return P.cache=be.set(ce,ze)||be,ze};return P.cache=new(it.Cache||Ta),P}it.Cache=Ta;function yt(T){if(typeof T!="function")throw new vs(l);return function(){var C=arguments;switch(C.length){case 0:return!T.call(this);case 1:return!T.call(this,C[0]);case 2:return!T.call(this,C[0],C[1]);case 3:return!T.call(this,C[0],C[1],C[2])}return!T.apply(this,C)}}function sn(T){return Ct(2,T)}var Hn=rh(function(T,C){C=C.length==1&&Fr(C[0])?pi(C[0],Si(Yn())):pi(us(C,1),Si(Yn()));var P=C.length;return Gn(function(Y){for(var ce=-1,be=na(Y.length,P);++ce<be;)Y[ce]=C[ce].call(this,Y[ce]);return Un(T,this,Y)})}),Nn=Gn(function(T,C){var P=Zo(C,Jp(Nn));return Ee(T,U,t,C,P)}),Vn=Gn(function(T,C){var P=Zo(C,Jp(Vn));return Ee(T,F,t,C,P)}),mr=kn(function(T,C){return Ee(T,z,t,t,t,C)});function tl(T,C){if(typeof T!="function")throw new vs(l);return C=C===t?C:Cr(C),Gn(T,C)}function Oi(T,C){if(typeof T!="function")throw new vs(l);return C=C==null?0:so(Cr(C),0),Gn(function(P){var Y=P[C],ce=Ka(P,0,C);return Y&&_u(ce,Y),Un(T,this,ce)})}function lf(T,C,P){var Y=!0,ce=!0;if(typeof T!="function")throw new vs(l);return Oa(P)&&(Y="leading"in P?!!P.leading:Y,ce="trailing"in P?!!P.trailing:ce),In(T,C,{leading:Y,maxWait:C,trailing:ce})}function __(T){return Ze(T,1)}function nu(T,C){return Nn(Zs(C),T)}function Vd(){if(!arguments.length)return[];var T=arguments[0];return Fr(T)?T:[T]}function Gw(T){return Ys(T,E)}function kR(T,C){return C=typeof C=="function"?C:t,Ys(T,E,C)}function OR(T){return Ys(T,_|E)}function Hm(T,C){return C=typeof C=="function"?C:t,Ys(T,_|E,C)}function gE(T,C){return C==null||Jc(T,C,ua(C))}function Oh(T,C){return T===C||T!==T&&C!==C}var Ww=hn(ja),g0=hn(function(T,C){return T>=C}),_0=On(function(){return arguments}())?On:function(T){return nl(T)&&Br.call(T,"callee")&&!$c.call(T,"callee")},Fr=bt.isArray,Ab=fu?Si(fu):yr;function Uo(T){return T!=null&&jd(T.length)&&!Jf(T)}function ho(T){return nl(T)&&Uo(T)}function _E(T){return T===!0||T===!1||nl(T)&&Ks(T)==et}var Kf=Ld||E0,Vw=ro?Si(ro):Or;function wp(T){return nl(T)&&T.nodeType===1&&!Dr(T)}function Fv(T){if(T==null)return!0;if(Uo(T)&&(Fr(T)||typeof T=="string"||typeof T.splice=="function"||Kf(T)||Ig(T)||_0(T)))return!T.length;var C=ql(T);if(C==rt||C==mt)return!T.size;if(hd(T))return!lo(T).length;for(var P in T)if(Br.call(T,P))return!1;return!0}function ai(T,C){return Hr(T,C)}function no(T,C,P){P=typeof P=="function"?P:t;var Y=P?P(T,C):t;return Y===t?Hr(T,C,t,P):!!Y}function Ib(T){if(!nl(T))return!1;var C=Ks(T);return C==De||C==Qe||typeof T.message=="string"&&typeof T.name=="string"&&!Dr(T)}function Rb(T){return typeof T=="number"&&bl(T)}function Jf(T){if(!Oa(T))return!1;var C=Ks(T);return C==Se||C==Pe||C==Je||C==St}function Uv(T){return typeof T=="number"&&T==Cr(T)}function jd(T){return typeof T=="number"&&T>-1&&T%1==0&&T<=j}function Oa(T){var C=typeof T;return T!=null&&(C=="object"||C=="function")}function nl(T){return T!=null&&typeof T=="object"}var pd=mu?Si(mu):Ri;function Yi(T,C){return T===C||Hi(T,C,a0(C))}function Gm(T,C,P){return P=typeof P=="function"?P:t,Hi(T,C,a0(C),P)}function kb(T){return xp(T)&&T!=+T}function Ob(T){if(kv(T))throw new Dn(o);return Xl(T)}function v_(T){return T===null}function LR(T){return T==null}function xp(T){return typeof T=="number"||nl(T)&&Ks(T)==We}function Dr(T){if(!nl(T)||Ks(T)!=xt)return!1;var C=yl(T);if(C===null)return!0;var P=Br.call(C,"constructor")&&C.constructor;return typeof P=="function"&&P instanceof P&&Ec.call(P)==ta}var uf=Ua?Si(Ua):Cu;function la(T){return Uv(T)&&T>=-j&&T<=j}var Lb=di?Si(di):rc;function y_(T){return typeof T=="string"||!Fr(T)&&nl(T)&&Ks(T)==ve}function fd(T){return typeof T=="symbol"||nl(T)&&Ks(T)==ee}var Ig=ni?Si(ni):Mu;function jw(T){return T===t}function Xw(T){return nl(T)&&ql(T)==ot}function Lh(T){return nl(T)&&Ks(T)==dt}var vE=hn(wa),cf=hn(function(T,C){return T<=C});function yE(T){if(!T)return[];if(Uo(T))return y_(T)?Jr(T):ns(T);if(za&&T[za])return yh(T[za]());var C=ql(T),P=C==rt?yc:C==mt?Yu:T0;return P(T)}function Qf(T){if(!T)return T===0?T:0;if(T=Co(T),T===Ae||T===-Ae){var C=T<0?-1:1;return C*Z}return T===T?T:0}function Cr(T){var C=Qf(T),P=C%1;return C===C?P?C-P:C:0}function zv(T){return T?ec(Cr(T),0,le):0}function Co(T){if(typeof T=="number")return T;if(fd(T))return ne;if(Oa(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=Oa(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=Kh(T);var P=ei.test(T);return P||Ar.test(T)?Ko(T.slice(2),P?2:8):vr.test(T)?ne:+T}function Yw(T){return So(T,La(T))}function tt(T){return T?ec(Cr(T),-j,j):T===0?T:0}function Zr(T){return T==null?"":ts(T)}var Hv=Jl(function(T,C){if(hd(C)||Uo(C)){So(C,ua(C),T);return}for(var P in C)Br.call(C,P)&&sa(T,P,C[P])}),Db=Jl(function(T,C){So(C,La(C),T)}),Cp=Jl(function(T,C,P,Y){So(C,La(C),T,Y)}),Rg=Jl(function(T,C,P,Y){So(C,ua(C),T,Y)}),Nb=kn(Fd);function b_(T,C){var P=Xs(T);return C==null?P:zi(P,C)}var bE=Gn(function(T,C){T=An(T);var P=-1,Y=C.length,ce=Y>2?C[2]:t;for(ce&&ki(C[0],C[1],ce)&&(Y=1);++P<Y;)for(var be=C[P],ze=La(be),qe=-1,ut=ze.length;++qe<ut;){var Ht=ze[qe],Gt=T[Ht];(Gt===t||Oh(Gt,ji[Ht])&&!Br.call(T,Ht))&&(T[Ht]=be[Ht])}return T}),Kw=Gn(function(T){return T.push(t,Ke),Un(md,t,T)});function Xd(T,C){return fp(T,Yn(C,3),bo)}function TE(T,C){return fp(T,Yn(C,3),Va)}function Gv(T,C){return T==null?T:xu(T,Yn(C,3),La)}function EE(T,C){return T==null?T:tc(T,Yn(C,3),La)}function Jw(T,C){return T&&bo(T,Yn(C,3))}function Qw(T,C){return T&&Va(T,Yn(C,3))}function qw(T){return T==null?[]:bs(T,ua(T))}function Zw(T){return T==null?[]:bs(T,La(T))}function v0(T,C,P){var Y=T==null?t:ao(T,C);return Y===t?P:Y}function $E(T,C){return T!=null&&a_(T,C,nc)}function y0(T,C){return T!=null&&a_(T,C,_p)}var SE=se(function(T,C,P){C!=null&&typeof C.toString!="function"&&(C=js.call(C)),T[C]=P},NE(Nh)),Wv=se(function(T,C,P){C!=null&&typeof C.toString!="function"&&(C=js.call(C)),Br.call(T,C)?T[C].push(P):T[C]=[P]},Yn),Vv=Gn(wn);function ua(T){return Uo(T)?rn(T):lo(T)}function La(T){return Uo(T)?rn(T,!0):sd(T)}function ex(T,C){var P={};return C=Yn(C,3),bo(T,function(Y,ce,be){Su(P,C(Y,ce,be),Y)}),P}function qf(T,C){var P={};return C=Yn(C,3),bo(T,function(Y,ce,be){Su(P,ce,C(Y,ce,be))}),P}var Wm=Jl(function(T,C,P){To(T,C,P)}),md=Jl(function(T,C,P,Y){To(T,C,P,Y)}),tx=kn(function(T,C){var P={};if(T==null)return P;var Y=!1;C=pi(C,function(be){return be=ku(be,T),Y||(Y=be.length>1),be}),So(T,fr(T),P),Y&&(P=Ys(P,_|v|E,Ot));for(var ce=C.length;ce--;)Ah(P,C[ce]);return P});function T_(T,C){return Bb(T,yt(Yn(C)))}var Vt=kn(function(T,C){return T==null?{}:Ru(T,C)});function Bb(T,C){if(T==null)return{};var P=pi(fr(T),function(Y){return[Y]});return C=Yn(C),Mh(T,P,function(Y,ce){return C(Y,ce[0])})}function DR(T,C,P){C=ku(C,T);var Y=-1,ce=C.length;for(ce||(ce=1,T=t);++Y<ce;){var be=T==null?t:T[Zl(C[Y])];be===t&&(Y=ce,be=P),T=Jf(be)?be.call(T):be}return T}function NR(T,C,P){return T==null?T:si(T,C,P)}function BR(T,C,P,Y){return Y=typeof Y=="function"?Y:t,T==null?T:si(T,C,P,Y)}var Pb=ft(ua),jv=ft(La);function Li(T,C,P){var Y=Fr(T),ce=Y||Kf(T)||Ig(T);if(C=Yn(C,4),P==null){var be=T&&T.constructor;ce?P=Y?new be:[]:Oa(T)?P=Jf(be)?Xs(yl(T)):{}:P={}}return(ce?$i:bo)(T,function(ze,qe,ut){return C(P,ze,qe,ut)}),P}function b0(T,C){return T==null?!0:Ah(T,C)}function Fb(T,C,P){return T==null?T:qs(T,C,Zs(P))}function PR(T,C,P,Y){return Y=typeof Y=="function"?Y:t,T==null?T:qs(T,C,Zs(P),Y)}function T0(T){return T==null?[]:fi(T,ua(T))}function Mp(T){return T==null?[]:fi(T,La(T))}function Xv(T,C,P){return P===t&&(P=C,C=t),P!==t&&(P=Co(P),P=P===P?P:0),C!==t&&(C=Co(C),C=C===C?C:0),ec(Co(T),C,P)}function rs(T,C,P){return C=Qf(C),P===t?(P=C,C=0):P=Qf(P),T=Co(T),qc(T,C,P)}function nx(T,C,P){if(P&&typeof P!="boolean"&&ki(T,C,P)&&(C=P=t),P===t&&(typeof C=="boolean"?(P=C,C=t):typeof T=="boolean"&&(P=T,T=t)),T===t&&C===t?(T=0,C=1):(T=Qf(T),C===t?(C=T,T=0):C=Qf(C)),T>C){var Y=T;T=C,C=Y}if(P||T%1||C%1){var ce=Tl();return na(T+ce*(C-T+Wc("1e-"+((ce+"").length-1))),C)}return Ts(T,C)}var wE=c(function(T,C,P){return C=C.toLowerCase(),T+(P?kg(C):C)});function kg(T){return Hb(Zr(T).toLowerCase())}function xE(T){return T=Zr(T),T&&T.replace(jo,mp).replace(Fi,"")}function CE(T,C,P){T=Zr(T),C=ts(C);var Y=T.length;P=P===t?Y:ec(Cr(P),0,Y);var ce=P;return P-=C.length,P>=0&&T.slice(P,ce)==C}function ME(T){return T=Zr(T),T&&cr.test(T)?T.replace(Tn,gp):T}function AE(T){return T=Zr(T),T&&Rt.test(T)?T.replace(nt,"\\$&"):T}var Yv=c(function(T,C,P){return T+(P?"-":"")+C.toLowerCase()}),FR=c(function(T,C,P){return T+(P?" ":"")+C.toLowerCase()}),rx=$("toLowerCase");function UR(T,C,P){T=Zr(T),C=Cr(C);var Y=C?_s(T):0;if(!C||Y>=C)return T;var ce=(C-Y)/2;return _t(Ku(ce),P)+T+_t(Yc(ce),P)}function zR(T,C,P){T=Zr(T),C=Cr(C);var Y=C?_s(T):0;return C&&Y<C?T+_t(C-Y,P):T}function hf(T,C,P){T=Zr(T),C=Cr(C);var Y=C?_s(T):0;return C&&Y<C?_t(C-Y,P)+T:T}function IE(T,C,P){return P||C==null?C=0:C&&(C=+C),Vp(Zr(T).replace(Qt,""),C||0)}function RE(T,C,P){return(P?ki(T,C,P):C===t)?C=1:C=Cr(C),Ps(Zr(T),C)}function E_(){var T=arguments,C=Zr(T[0]);return T.length<3?C:C.replace(T[1],T[2])}var ix=c(function(T,C,P){return T+(P?"_":"")+C.toLowerCase()});function kE(T,C,P){return P&&typeof P!="number"&&ki(T,C,P)&&(C=P=t),P=P===t?le:P>>>0,P?(T=Zr(T),T&&(typeof C=="string"||C!=null&&!uf(C))&&(C=ts(C),!C&&Xu(T))?Ka(Jr(T),0,P):T.split(C,P)):[]}var Kv=c(function(T,C,P){return T+(P?" ":"")+Hb(C)});function sx(T,C,P){return T=Zr(T),P=P==null?0:ec(Cr(P),0,T.length),C=ts(C),T.slice(P,P+C.length)==C}function OE(T,C,P){var Y=ye.templateSettings;P&&ki(T,C,P)&&(C=t),T=Zr(T),C=Cp({},C,Y,Ce);var ce=Cp({},C.imports,Y.imports,Ce),be=ua(ce),ze=fi(ce,be),qe,ut,Ht=0,Gt=C.interpolate||Ro,qt="__p += '",yn=Ir((C.escape||Ro).source+"|"+Gt.source+"|"+(Gt===Xn?Bn:Ro).source+"|"+(C.evaluate||Ro).source+"|$","g"),Rn="//# sourceURL="+(Br.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ul+"]")+`
`;T.replace(yn,function(or,li,yi,gd,lh,ru){return yi||(yi=gd),qt+=T.slice(Ht,ru).replace(ll,Jh),li&&(qe=!0,qt+=`' +
__e(`+li+`) +
'`),lh&&(ut=!0,qt+=`';
`+lh+`;
__p += '`),yi&&(qt+=`' +
((__t = (`+yi+`)) == null ? '' : __t) +
'`),Ht=ru+or.length,or}),qt+=`';
`;var gr=Br.call(C,"variable")&&C.variable;if(!gr)qt=`with (obj) {
`+qt+`
}
`;else if(Bt.test(gr))throw new Dn(u);qt=(ut?qt.replace(Wt,""):qt).replace(lt,"$1").replace(Ut,"$1;"),qt="function("+(gr||"obj")+`) {
`+(gr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(qe?", __e = _.escape":"")+(ut?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+qt+`return __p
}`;var Nr=Jv(function(){return qn(be,Rn+"return "+qt).apply(t,ze)});if(Nr.source=qt,Ib(Nr))throw Nr;return Nr}function Dh(T){return Zr(T).toLowerCase()}function Zf(T){return Zr(T).toUpperCase()}function ox(T,C,P){if(T=Zr(T),T&&(P||C===t))return Kh(T);if(!T||!(C=ts(C)))return T;var Y=Jr(T),ce=Jr(C),be=wi(Y,ce),ze=qo(Y,ce)+1;return Ka(Y,be,ze).join("")}function Ub(T,C,P){if(T=Zr(T),T&&(P||C===t))return T.slice(0,_l(T)+1);if(!T||!(C=ts(C)))return T;var Y=Jr(T),ce=qo(Y,Jr(C))+1;return Ka(Y,0,ce).join("")}function ax(T,C,P){if(T=Zr(T),T&&(P||C===t))return T.replace(Qt,"");if(!T||!(C=ts(C)))return T;var Y=Jr(T),ce=wi(Y,Jr(C));return Ka(Y,ce).join("")}function $_(T,C){var P=te,Y=re;if(Oa(C)){var ce="separator"in C?C.separator:ce;P="length"in C?Cr(C.length):P,Y="omission"in C?ts(C.omission):Y}T=Zr(T);var be=T.length;if(Xu(T)){var ze=Jr(T);be=ze.length}if(P>=be)return T;var qe=P-_s(Y);if(qe<1)return Y;var ut=ze?Ka(ze,0,qe).join(""):T.slice(0,qe);if(ce===t)return ut+Y;if(ze&&(qe+=ut.length-qe),uf(ce)){if(T.slice(qe).search(ce)){var Ht,Gt=ut;for(ce.global||(ce=Ir(ce.source,Zr(nr.exec(ce))+"g")),ce.lastIndex=0;Ht=ce.exec(Gt);)var qt=Ht.index;ut=ut.slice(0,qt===t?qe:qt)}}else if(T.indexOf(ts(ce),qe)!=qe){var yn=ut.lastIndexOf(ce);yn>-1&&(ut=ut.slice(0,yn))}return ut+Y}function zb(T){return T=Zr(T),T&&Er.test(T)?T.replace(Ft,ea):T}var S_=c(function(T,C,P){return T+(P?" ":"")+C.toUpperCase()}),Hb=$("toUpperCase");function lx(T,C,P){return T=Zr(T),C=P?t:C,C===t?vc(T)?Vc(T):Pf(T):T.match(C)||[]}var Jv=Gn(function(T,C){try{return Un(T,t,C)}catch(P){return Ib(P)?P:new Dn(P)}}),LE=kn(function(T,C){return $i(C,function(P){P=Zl(P),Su(T,P,jt(T[P],T))}),T});function DE(T){var C=T==null?0:T.length,P=Yn();return T=C?pi(T,function(Y){if(typeof Y[1]!="function")throw new vs(l);return[P(Y[0]),Y[1]]}):[],Gn(function(Y){for(var ce=-1;++ce<C;){var be=T[ce];if(Un(be[0],this,Y))return Un(be[1],this,Y)}})}function HR(T){return Ud(Ys(T,_))}function NE(T){return function(){return T}}function GR(T,C){return T==null||T!==T?C:T}var ux=L(),WR=L(!0);function Nh(T){return T}function Di(T){return Bs(typeof T=="function"?T:Ys(T,_))}function em(T){return Iu(Ys(T,_))}function Qv(T,C){return Qs(T,Ys(C,_))}var Gb=Gn(function(T,C){return function(P){return wn(P,T,C)}}),tm=Gn(function(T,C){return function(P){return wn(T,P,C)}});function BE(T,C,P){var Y=ua(C),ce=bs(C,Y);P==null&&!(Oa(C)&&(ce.length||!Y.length))&&(P=C,C=T,T=this,ce=bs(C,ua(C)));var be=!(Oa(P)&&"chain"in P)||!!P.chain,ze=Jf(T);return $i(ce,function(qe){var ut=C[qe];T[qe]=ut,ze&&(T.prototype[qe]=function(){var Ht=this.__chain__;if(be||Ht){var Gt=T(this.__wrapped__),qt=Gt.__actions__=ns(this.__actions__);return qt.push({func:ut,args:arguments,thisArg:T}),Gt.__chain__=Ht,Gt}return ut.apply(T,_u([this.value()],arguments))})}),T}function w_(){return Yr._===this&&(Yr._=Th),this}function Wb(){}function cx(T){return T=Cr(T),Gn(function(C){return Eo(C,T)})}var PE=je(pi),VR=je(gu),FE=je(_h);function Vb(T){return Aa(T)?Wr(Zl(T)):Zc(T)}function hx(T){return function(C){return T==null?t:ao(T,C)}}var UE=Zt(),jb=Zt(!0);function Xb(){return[]}function E0(){return!1}function zE(){return{}}function HE(){return""}function GE(){return!0}function WE(T,C){if(T=Cr(T),T<1||T>j)return[];var P=le,Y=na(T,le);C=Yn(C),T-=le;for(var ce=yu(Y,C);++P<T;)C(P);return ce}function Og(T){return Fr(T)?pi(T,Zl):fd(T)?[T]:ns(Lv(Zr(T)))}function VE(T){var C=++Do;return Zr(T)+C}var jE=we(function(T,C){return T+C},0),XE=nn("ceil"),YE=we(function(T,C){return T/C},1),KE=nn("floor");function Mn(T){return T&&T.length?wu(T,Nh,ja):t}function dx(T,C){return T&&T.length?wu(T,Yn(C,2),ja):t}function px(T){return _a(T,Nh)}function $0(T,C){return _a(T,Yn(C,2))}function qv(T){return T&&T.length?wu(T,Nh,wa):t}function x_(T,C){return T&&T.length?wu(T,Yn(C,2),wa):t}var fx=we(function(T,C){return T*C},1),Yb=nn("round"),mx=we(function(T,C){return T-C},0);function gx(T){return T&&T.length?Lo(T,Nh):0}function _x(T,C){return T&&T.length?Lo(T,Yn(C,2)):0}return ye.after=Ue,ye.ary=Ze,ye.assign=Hv,ye.assignIn=Db,ye.assignInWith=Cp,ye.assignWith=Rg,ye.at=Nb,ye.before=Ct,ye.bind=jt,ye.bindAll=LE,ye.bindKey=en,ye.castArray=Vd,ye.chain=Bu,ye.chunk=Mm,ye.compact=eu,ye.concat=u_,ye.cond=DE,ye.conforms=HR,ye.constant=NE,ye.countBy=Cb,ye.create=b_,ye.curry=Jt,ye.curryRight=vn,ye.debounce=In,ye.defaults=bE,ye.defaultsDeep=Kw,ye.defer=Ln,ye.delay=to,ye.difference=co,ye.differenceBy=Ci,ye.differenceWith=Ml,ye.drop=Ra,ye.dropRight=tu,ye.dropRightWhile=Al,ye.dropWhile=Gf,ye.fill=qa,ye.filter=Wd,ye.flatMap=Mg,ye.flatMapDeep=p0,ye.flatMapDepth=Mb,ye.flatten=Zp,ye.flattenDeep=u0,ye.flattenDepth=Am,ye.flip=vt,ye.flow=ux,ye.flowRight=WR,ye.fromPairs=Lc,ye.functions=qw,ye.functionsIn=Zw,ye.groupBy=Ag,ye.initial=Hd,ye.intersection=$g,ye.intersectionBy=Sg,ye.intersectionWith=Us,ye.invert=SE,ye.invertBy=Wv,ye.invokeMap=of,ye.iteratee=Di,ye.keyBy=Fm,ye.keys=ua,ye.keysIn=La,ye.map=oi,ye.mapKeys=ex,ye.mapValues=qf,ye.matches=em,ye.matchesProperty=Qv,ye.memoize=it,ye.merge=Wm,ye.mergeWith=md,ye.method=Gb,ye.methodOf=tm,ye.mixin=BE,ye.negate=yt,ye.nthArg=cx,ye.omit=tx,ye.omitBy=T_,ye.once=sn,ye.orderBy=af,ye.over=PE,ye.overArgs=Hn,ye.overEvery=VR,ye.overSome=FE,ye.partial=Nn,ye.partialRight=Vn,ye.partition=Um,ye.pick=Vt,ye.pickBy=Bb,ye.property=Vb,ye.propertyOf=hx,ye.pull=c0,ye.pullAll=Ep,ye.pullAllBy=wg,ye.pullAllWith=ac,ye.pullAt=Gd,ye.range=UE,ye.rangeRight=jb,ye.rearg=mr,ye.reject=m0,ye.remove=wo,ye.rest=tl,ye.reverse=ka,ye.sampleSize=y,ye.set=NR,ye.setWith=BR,ye.shuffle=I,ye.slice=Dv,ye.sortBy=K,ye.sortedUniq=jf,ye.sortedUniqBy=d_,ye.split=kE,ye.spread=Oi,ye.tail=km,ye.take=p_,ye.takeRight=Nv,ye.takeRightWhile=Om,ye.takeWhile=$p,ye.tap=h0,ye.throttle=lf,ye.thru=xg,ye.toArray=yE,ye.toPairs=Pb,ye.toPairsIn=jv,ye.toPath=Og,ye.toPlainObject=Yw,ye.transform=Li,ye.unary=__,ye.union=Bv,ye.unionBy=fE,ye.unionWith=f_,ye.uniq=m_,ye.uniqBy=tf,ye.uniqWith=En,ye.unset=b0,ye.unzip=Rh,ye.unzipWith=Lm,ye.update=Fb,ye.updateWith=PR,ye.values=T0,ye.valuesIn=Mp,ye.without=xo,ye.words=lx,ye.wrap=nu,ye.xor=Pv,ye.xorBy=g_,ye.xorWith=Dm,ye.zip=mE,ye.zipObject=xb,ye.zipObjectDeep=Nc,ye.zipWith=zs,ye.entries=Pb,ye.entriesIn=jv,ye.extend=Db,ye.extendWith=Cp,BE(ye,ye),ye.add=jE,ye.attempt=Jv,ye.camelCase=wE,ye.capitalize=kg,ye.ceil=XE,ye.clamp=Xv,ye.clone=Gw,ye.cloneDeep=OR,ye.cloneDeepWith=Hm,ye.cloneWith=kR,ye.conformsTo=gE,ye.deburr=xE,ye.defaultTo=GR,ye.divide=YE,ye.endsWith=CE,ye.eq=Oh,ye.escape=ME,ye.escapeRegExp=AE,ye.every=d0,ye.find=qr,ye.findIndex=bp,ye.findKey=Xd,ye.findLast=Bm,ye.findLastIndex=Tp,ye.findLastKey=TE,ye.floor=KE,ye.forEach=f0,ye.forEachRight=Pm,ye.forIn=Gv,ye.forInRight=EE,ye.forOwn=Jw,ye.forOwnRight=Qw,ye.get=v0,ye.gt=Ww,ye.gte=g0,ye.has=$E,ye.hasIn=y0,ye.head=Za,ye.identity=Nh,ye.includes=sf,ye.indexOf=Dc,ye.inRange=rs,ye.invoke=Vv,ye.isArguments=_0,ye.isArray=Fr,ye.isArrayBuffer=Ab,ye.isArrayLike=Uo,ye.isArrayLikeObject=ho,ye.isBoolean=_E,ye.isBuffer=Kf,ye.isDate=Vw,ye.isElement=wp,ye.isEmpty=Fv,ye.isEqual=ai,ye.isEqualWith=no,ye.isError=Ib,ye.isFinite=Rb,ye.isFunction=Jf,ye.isInteger=Uv,ye.isLength=jd,ye.isMap=pd,ye.isMatch=Yi,ye.isMatchWith=Gm,ye.isNaN=kb,ye.isNative=Ob,ye.isNil=LR,ye.isNull=v_,ye.isNumber=xp,ye.isObject=Oa,ye.isObjectLike=nl,ye.isPlainObject=Dr,ye.isRegExp=uf,ye.isSafeInteger=la,ye.isSet=Lb,ye.isString=y_,ye.isSymbol=fd,ye.isTypedArray=Ig,ye.isUndefined=jw,ye.isWeakMap=Xw,ye.isWeakSet=Lh,ye.join=Im,ye.kebabCase=Yv,ye.last=Il,ye.lastIndexOf=el,ye.lowerCase=FR,ye.lowerFirst=rx,ye.lt=vE,ye.lte=cf,ye.max=Mn,ye.maxBy=dx,ye.mean=px,ye.meanBy=$0,ye.min=qv,ye.minBy=x_,ye.stubArray=Xb,ye.stubFalse=E0,ye.stubObject=zE,ye.stubString=HE,ye.stubTrue=GE,ye.multiply=fx,ye.nth=Wf,ye.noConflict=w_,ye.noop=Wb,ye.now=fe,ye.pad=UR,ye.padEnd=zR,ye.padStart=hf,ye.parseInt=IE,ye.random=nx,ye.reduce=zm,ye.reduceRight=Yf,ye.repeat=RE,ye.replace=E_,ye.result=DR,ye.round=Yb,ye.runInContext=Ye,ye.sample=g,ye.size=B,ye.snakeCase=ix,ye.some=V,ye.sortedIndex=Rm,ye.sortedIndexBy=c_,ye.sortedIndexOf=wb,ye.sortedLastIndex=ef,ye.sortedLastIndexBy=Vf,ye.sortedLastIndexOf=h_,ye.startCase=Kv,ye.startsWith=sx,ye.subtract=mx,ye.sum=gx,ye.sumBy=_x,ye.template=OE,ye.times=WE,ye.toFinite=Qf,ye.toInteger=Cr,ye.toLength=zv,ye.toLower=Dh,ye.toNumber=Co,ye.toSafeInteger=tt,ye.toString=Zr,ye.toUpper=Zf,ye.trim=ox,ye.trimEnd=Ub,ye.trimStart=ax,ye.truncate=$_,ye.unescape=zb,ye.uniqueId=VE,ye.upperCase=S_,ye.upperFirst=Hb,ye.each=f0,ye.eachRight=Pm,ye.first=Za,BE(ye,function(){var T={};return bo(ye,function(C,P){Br.call(ye.prototype,P)||(T[P]=C)}),T}(),{chain:!1}),ye.VERSION=i,$i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(T){ye[T].placeholder=ye}),$i(["drop","take"],function(T,C){zn.prototype[T]=function(P){P=P===t?1:so(Cr(P),0);var Y=this.__filtered__&&!C?new zn(this):this.clone();return Y.__filtered__?Y.__takeCount__=na(P,Y.__takeCount__):Y.__views__.push({size:na(P,le),type:T+(Y.__dir__<0?"Right":"")}),Y},zn.prototype[T+"Right"]=function(P){return this.reverse()[T](P).reverse()}}),$i(["filter","map","takeWhile"],function(T,C){var P=C+1,Y=P==oe||P==ge;zn.prototype[T]=function(ce){var be=this.clone();return be.__iteratees__.push({iteratee:Yn(ce,3),type:P}),be.__filtered__=be.__filtered__||Y,be}}),$i(["head","last"],function(T,C){var P="take"+(C?"Right":"");zn.prototype[T]=function(){return this[P](1).value()[0]}}),$i(["initial","tail"],function(T,C){var P="drop"+(C?"":"Right");zn.prototype[T]=function(){return this.__filtered__?new zn(this):this[P](1)}}),zn.prototype.compact=function(){return this.filter(Nh)},zn.prototype.find=function(T){return this.filter(T).head()},zn.prototype.findLast=function(T){return this.reverse().find(T)},zn.prototype.invokeMap=Gn(function(T,C){return typeof T=="function"?new zn(this):this.map(function(P){return wn(P,T,C)})}),zn.prototype.reject=function(T){return this.filter(yt(Yn(T)))},zn.prototype.slice=function(T,C){T=Cr(T);var P=this;return P.__filtered__&&(T>0||C<0)?new zn(P):(T<0?P=P.takeRight(-T):T&&(P=P.drop(T)),C!==t&&(C=Cr(C),P=C<0?P.dropRight(-C):P.take(C-T)),P)},zn.prototype.takeRightWhile=function(T){return this.reverse().takeWhile(T).reverse()},zn.prototype.toArray=function(){return this.take(le)},bo(zn.prototype,function(T,C){var P=/^(?:filter|find|map|reject)|While$/.test(C),Y=/^(?:head|last)$/.test(C),ce=ye[Y?"take"+(C=="last"?"Right":""):C],be=Y||/^find/.test(C);!ce||(ye.prototype[C]=function(){var ze=this.__wrapped__,qe=Y?[1]:arguments,ut=ze instanceof zn,Ht=qe[0],Gt=ut||Fr(ze),qt=function(li){var yi=ce.apply(ye,_u([li],qe));return Y&&yn?yi[0]:yi};Gt&&P&&typeof Ht=="function"&&Ht.length!=1&&(ut=Gt=!1);var yn=this.__chain__,Rn=!!this.__actions__.length,gr=be&&!yn,Nr=ut&&!Rn;if(!be&&Gt){ze=Nr?ze:new zn(this);var or=T.apply(ze,qe);return or.__actions__.push({func:xg,args:[qt],thisArg:t}),new Ur(or,yn)}return gr&&Nr?T.apply(this,qe):(or=this.thru(qt),gr?Y?or.value()[0]:or.value():or)})}),$i(["pop","push","shift","sort","splice","unshift"],function(T){var C=vo[T],P=/^(?:push|sort|unshift)$/.test(T)?"tap":"thru",Y=/^(?:pop|shift)$/.test(T);ye.prototype[T]=function(){var ce=arguments;if(Y&&!this.__chain__){var be=this.value();return C.apply(Fr(be)?be:[],ce)}return this[P](function(ze){return C.apply(Fr(ze)?ze:[],ce)})}}),bo(zn.prototype,function(T,C){var P=ye[C];if(P){var Y=P.name+"";Br.call(wc,Y)||(wc[Y]=[]),wc[Y].push({name:C,func:P})}}),wc[G(t,O).name]=[{name:"wrapper",func:t}],zn.prototype.clone=jp,zn.prototype.reverse=ba,zn.prototype.value=Qr,ye.prototype.at=kh,ye.prototype.chain=Nm,ye.prototype.commit=nf,ye.prototype.next=rf,ye.prototype.plant=dd,ye.prototype.reverse=Sp,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=Cg,ye.prototype.first=ye.prototype.head,za&&(ye.prototype[za]=Xf),ye},mi=kd();Ai?((Ai.exports=mi)._=mi,ms._=mi):Yr._=mi}).call(H0)})(hm,hm.exports);const NTe=hm.exports,BTe=(n,e)=>({clock:new LTe,items:{},tfs:{},hulls:{},lines:{},texts:{},points:{},widgets:{},onMove:(t,i,s,o)=>n(l=>{console.log(o),l[i][t].position={...o.position},l[i][t].rotation=o.quaternion,l[i][t].rotation.x=o.quaternion.x,l[i][t].rotation.y=o.quaternion.y,l[i][t].rotation.z=o.quaternion.z,l[i][t].rotation.w=o.quaternion.w,l[i][t].scale={...o.scale}}),onClick:(t,i,s,o)=>{i||console.log(`id: ${t} clicked!`,s),e().items[t]&&!i&&o.stopPropagation()},onPointerOver:(t,i,s)=>{},onPointerOut:(t,i,s)=>{},pause:()=>n(t=>{t.clock.setTimescale(0)}),play:t=>n(i=>{i.clock.setTimescale(t||1)}),reset:t=>n(i=>{console.log(`setting time to ${t}`),i.clock._elapsed=t?t*1e3:0}),clearItems:()=>n(t=>({items:{}})),clearLines:()=>n(t=>({lines:{}})),clearTfs:()=>n(t=>({tfs:{}})),clearHulls:()=>n(t=>({hulls:{}})),clearTexts:()=>n(t=>({texts:{}})),clearPoints:()=>n(t=>({points:{}})),setItems:t=>n(i=>({items:t})),setLines:t=>n(i=>({lines:t})),setTfs:t=>n(i=>({tfs:t})),setHulls:t=>n(i=>({hulls:t})),setTexts:t=>n(i=>({texts:t})),setPoints:t=>n(i=>({points:t})),removeItem:t=>n(i=>{delete i.items[t]}),removeLine:t=>n(i=>{delete i.lines[t]}),removeTf:t=>n(i=>{delete i.tfs[t]}),removeHull:t=>n(i=>{delete i.hulls[t]}),removeText:t=>n(i=>{delete i.texts[t]}),removePoint:t=>n(i=>{delete i.points[t]}),setItem:(t,i)=>n(s=>{s.items[t]=i}),setLine:(t,i)=>n(s=>{s.lines[t]=i}),setTf:(t,i)=>n(s=>{s.tfs[t]=i}),setHull:(t,i)=>n(s=>{s.hulls[t]=i}),setText:(t,i)=>n(s=>{s.texts[t]=i}),setPoint:(t,i)=>n(s=>{s.points[t]=i}),setProperty:(t,i)=>n(s=>{NTe.set(s,t,i)})}),PTe=OTe(yTe(BTe)),FTe=_Te(PTe),Zj=he.createContext(),Cs=(n,e)=>{const t=he.useContext(Zj);return Jj(t,n,e)},UTe=({store:n,children:e,debug:t=!1})=>(t&&console.log("SceneProvider regenerated"),Xt(Zj.Provider,{value:n||FTe,children:e})),zTe=Tr.forwardRef((n,e)=>Xt("ambientLight",{ref:e,...n}));Tr.forwardRef((n,e)=>Xt("pointLight",{ref:e,...n}));const HTe=Tr.forwardRef((n,e)=>Xt("directionalLight",{ref:e,...n})),Zg=(n,e,t,i)=>{var s=new _n;return s.setRGB(n/255,e/255,t/255),i<=.99?new lw({color:s.getHex(),opacity:i+.1,transparent:!0,depthWrite:!0,blendSrc:uR,blendDst:cR,blendEquation:aP,blending:K0}):new lw({color:s.getHex(),opacity:i,blending:K0})},KM=hm.exports.memoize(n=>{var e=new _n(n),t=`
		varying vec3	vVertexWorldPosition;
		varying vec3	vVertexNormal;

		// varying vec4	vFragColor;

		void main(){
			vVertexNormal	= normalize(normalMatrix * normal);

			vVertexWorldPosition	= (modelMatrix * vec4(position, 1.0)).xyz;

			// set gl_Position
			gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
		}`,i=`
		uniform vec3	glowColor;
		uniform float	coeficient;
		uniform float	power;

		varying vec3	vVertexNormal;
		varying vec3	vVertexWorldPosition;

		// varying vec4	vFragColor;

		void main(){
			vec3 worldCameraToVertex= vVertexWorldPosition - cameraPosition;
			vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
			viewCameraToVertex	= normalize(viewCameraToVertex);
			float intensity		= pow(coeficient + dot(vVertexNormal, viewCameraToVertex), power);
			gl_FragColor		= vec4(glowColor, intensity);
		}`,s=new ph({uniforms:{coeficient:{type:"f",value:1.2},power:{type:"f",value:4},glowColor:{type:"c",value:e}},vertexShader:t,fragmentShader:i,blending:NA,transparent:!0,depthWrite:!1,depthTest:!1});return s});function GTe(n){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;n=n.replace(e,function(i,s,o,l){return s+s+o+o+l+l});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}const gy=new FP,Lp=new Te,W_=new Te,sl=new Wo,Z5={X:new Te(1,0,0),Y:new Te(0,1,0),Z:new Te(0,0,1)},OO={type:"change"},eG={type:"mouseDown"},tG={type:"mouseUp",mode:null},nG={type:"objectChange"};class WTe extends ss{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new JTe;this._gizmo=i,this.add(i);const s=new QTe;this._plane=s,this.add(s);const o=this;function l(k,N){let D=N;Object.defineProperty(o,k,{get:function(){return D!==void 0?D:N},set:function(U){D!==U&&(D=U,s[k]=U,i[k]=U,o.dispatchEvent({type:k+"-changed",value:U}),o.dispatchEvent(OO))}}),o[k]=N,s[k]=N,i[k]=N}l("camera",e),l("object",void 0),l("enabled",!0),l("axis",null),l("mode","translate"),l("translationSnap",null),l("rotationSnap",null),l("scaleSnap",null),l("space","world"),l("size",1),l("dragging",!1),l("showX",!0),l("showY",!0),l("showZ",!0);const u=new Te,h=new Te,d=new Wo,m=new Wo,_=new Te,v=new Wo,E=new Te,w=new Te,x=new Te,A=0,O=new Te;l("worldPosition",u),l("worldPositionStart",h),l("worldQuaternion",d),l("worldQuaternionStart",m),l("cameraPosition",_),l("cameraQuaternion",v),l("pointStart",E),l("pointEnd",w),l("rotationAxis",x),l("rotationAngle",A),l("eye",O),this._offset=new Te,this._startNorm=new Te,this._endNorm=new Te,this._cameraScale=new Te,this._parentPosition=new Te,this._parentQuaternion=new Wo,this._parentQuaternionInv=new Wo,this._parentScale=new Te,this._worldScaleStart=new Te,this._worldQuaternionInv=new Wo,this._worldScale=new Te,this._positionStart=new Te,this._quaternionStart=new Wo,this._scaleStart=new Te,this._getPointer=VTe.bind(this),this._onPointerDown=XTe.bind(this),this._onPointerHover=jTe.bind(this),this._onPointerMove=YTe.bind(this),this._onPointerUp=KTe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye):this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;gy.setFromCamera(e,this.camera);const t=LO(this._gizmo.picker[this.mode],gy);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){gy.setFromCamera(e,this.camera);const t=LO(this._plane,gy,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,eG.mode=this.mode,this.dispatchEvent(eG)}}pointerMove(e){const t=this.axis,i=this.mode,s=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),s===void 0||t===null||this.dragging===!1||e.button!==-1)return;gy.setFromCamera(e,this.camera);const l=LO(this._plane,gy,!0);if(l){if(this.pointEnd.copy(l.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),s.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(s.position.applyQuaternion(sl.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.position.applyQuaternion(this._quaternionStart)),o==="world"&&(s.parent&&s.position.add(Lp.setFromMatrixPosition(s.parent.matrixWorld)),t.search("X")!==-1&&(s.position.x=Math.round(s.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(s.position.y=Math.round(s.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(s.position.z=Math.round(s.position.z/this.translationSnap)*this.translationSnap),s.parent&&s.position.sub(Lp.setFromMatrixPosition(s.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let u=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(u*=-1),W_.set(u,u,u)}else Lp.copy(this.pointStart),W_.copy(this.pointEnd),Lp.applyQuaternion(this._worldQuaternionInv),W_.applyQuaternion(this._worldQuaternionInv),W_.divide(Lp),t.search("X")===-1&&(W_.x=1),t.search("Y")===-1&&(W_.y=1),t.search("Z")===-1&&(W_.z=1);s.scale.copy(this._scaleStart).multiply(W_),this.scaleSnap&&(t.search("X")!==-1&&(s.scale.x=Math.round(s.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(s.scale.y=Math.round(s.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(s.scale.z=Math.round(s.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const u=20/this.worldPosition.distanceTo(Lp.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Lp.copy(this.rotationAxis).cross(this.eye))*u):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(Z5[t]),Lp.copy(Z5[t]),o==="local"&&Lp.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Lp.cross(this.eye).normalize())*u),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(s.quaternion.copy(this._quaternionStart),s.quaternion.multiply(sl.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),s.quaternion.copy(sl.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),s.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(OO),this.dispatchEvent(nG)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(tG.mode=this.mode,this.dispatchEvent(tG)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){!this.enabled||this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(OO),this.dispatchEvent(nG),this.pointStart.copy(this.pointEnd))}getRaycaster(){return gy}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function VTe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function jTe(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n));break}}function XTe(n){!this.enabled||(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function YTe(n){!this.enabled||this.pointerMove(this._getPointer(n))}function KTe(n){!this.enabled||(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function LO(n,e,t){const i=e.intersectObject(n,!0);for(let s=0;s<i.length;s++)if(i[s].object.visible||t)return i[s];return!1}const dM=new Eb,Ho=new Te(0,1,0),rG=new Te(0,0,0),iG=new Mr,pM=new Wo,JM=new Wo,Pg=new Te,sG=new Mr,Q$=new Te(1,0,0),xy=new Te(0,1,0),q$=new Te(0,0,1),fM=new Te,P$=new Te,F$=new Te;class JTe extends ss{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new gg({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Id({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const s=t.clone();s.opacity=.5;const o=e.clone();o.color.setHex(16711680);const l=e.clone();l.color.setHex(65280);const u=e.clone();u.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const d=e.clone();d.color.setHex(65280),d.opacity=.5;const m=e.clone();m.color.setHex(255),m.opacity=.5;const _=e.clone();_.opacity=.25;const v=e.clone();v.color.setHex(16776960),v.opacity=.25,e.clone().color.setHex(16776960);const E=e.clone();E.color.setHex(7895160);const w=new ha(0,.04,.1,12);w.translate(0,.05,0);const x=new Na(.08,.08,.08);x.translate(0,.04,0);const A=new kr;A.setAttribute("position",new Pn([0,0,0,1,0,0],3));const O=new ha(.0075,.0075,.5,3);O.translate(0,.25,0);function k(oe,ue){const ge=new sg(oe,.0075,3,64,ue*Math.PI*2);return ge.rotateY(Math.PI/2),ge.rotateX(Math.PI/2),ge}function N(){const oe=new kr;return oe.setAttribute("position",new Pn([0,0,0,1,1,1],3)),oe}const D={X:[[new bn(w,o),[.5,0,0],[0,0,-Math.PI/2]],[new bn(w,o),[-.5,0,0],[0,0,Math.PI/2]],[new bn(O,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new bn(w,l),[0,.5,0]],[new bn(w,l),[0,-.5,0],[Math.PI,0,0]],[new bn(O,l)]],Z:[[new bn(w,u),[0,0,.5],[Math.PI/2,0,0]],[new bn(w,u),[0,0,-.5],[-Math.PI/2,0,0]],[new bn(O,u),null,[Math.PI/2,0,0]]],XYZ:[[new bn(new ag(.1,0),_.clone()),[0,0,0]]],XY:[[new bn(new Na(.15,.15,.01),m.clone()),[.15,.15,0]]],YZ:[[new bn(new Na(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Na(.15,.15,.01),d.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},U={X:[[new bn(new ha(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new bn(new ha(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new bn(new ha(.2,0,.6,4),i),[0,.3,0]],[new bn(new ha(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new bn(new ha(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new bn(new ha(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new bn(new ag(.2,0),i)]],XY:[[new bn(new Na(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new bn(new Na(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Na(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},F={START:[[new bn(new ag(.01,2),s),null,null,null,"helper"]],END:[[new bn(new ag(.01,2),s),null,null,null,"helper"]],DELTA:[[new wd(N(),s),null,null,null,"helper"]],X:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},H={XYZE:[[new bn(k(.5,1),E),null,[0,Math.PI/2,0]]],X:[[new bn(k(.5,.5),o)]],Y:[[new bn(k(.5,.5),l),null,[0,0,-Math.PI/2]]],Z:[[new bn(k(.5,.5),u),null,[0,Math.PI/2,0]]],E:[[new bn(k(.75,1),v),null,[0,Math.PI/2,0]]]},z={AXIS:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},J={XYZE:[[new bn(new fg(.25,10,8),i)]],X:[[new bn(new sg(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new bn(new sg(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new bn(new sg(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new bn(new sg(.75,.1,2,24),i)]]},te={X:[[new bn(x,o),[.5,0,0],[0,0,-Math.PI/2]],[new bn(O,o),[0,0,0],[0,0,-Math.PI/2]],[new bn(x,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new bn(x,l),[0,.5,0]],[new bn(O,l)],[new bn(x,l),[0,-.5,0],[0,0,Math.PI]]],Z:[[new bn(x,u),[0,0,.5],[Math.PI/2,0,0]],[new bn(O,u),[0,0,0],[Math.PI/2,0,0]],[new bn(x,u),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new bn(new Na(.15,.15,.01),m),[.15,.15,0]]],YZ:[[new bn(new Na(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Na(.15,.15,.01),d),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new bn(new Na(.1,.1,.1),_.clone())]]},re={X:[[new bn(new ha(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new bn(new ha(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new bn(new ha(.2,0,.6,4),i),[0,.3,0]],[new bn(new ha(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new bn(new ha(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new bn(new ha(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new bn(new Na(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new bn(new Na(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new bn(new Na(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new bn(new Na(.2,.2,.2),i),[0,0,0]]]},ie={X:[[new wd(A,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new wd(A,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new wd(A,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function de(oe){const ue=new ss;for(const ge in oe)for(let Ae=oe[ge].length;Ae--;){const j=oe[ge][Ae][0].clone(),Z=oe[ge][Ae][1],ne=oe[ge][Ae][2],le=oe[ge][Ae][3],_e=oe[ge][Ae][4];j.name=ge,j.tag=_e,Z&&j.position.set(Z[0],Z[1],Z[2]),ne&&j.rotation.set(ne[0],ne[1],ne[2]),le&&j.scale.set(le[0],le[1],le[2]),j.updateMatrix();const Oe=j.geometry.clone();Oe.applyMatrix4(j.matrix),j.geometry=Oe,j.renderOrder=1/0,j.position.set(0,0,0),j.rotation.set(0,0,0),j.scale.set(1,1,1),ue.add(j)}return ue}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=de(D)),this.add(this.gizmo.rotate=de(H)),this.add(this.gizmo.scale=de(te)),this.add(this.picker.translate=de(U)),this.add(this.picker.rotate=de(J)),this.add(this.picker.scale=de(re)),this.add(this.helper.translate=de(F)),this.add(this.helper.rotate=de(z)),this.add(this.helper.scale=de(ie)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:JM;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let l;if(this.camera.isOrthographicCamera?l=(this.camera.top-this.camera.bottom)/this.camera.zoom:l=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(l*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(sl.setFromEuler(dM.set(0,0,0)),o.quaternion.copy(t).multiply(sl),Math.abs(Ho.copy(Q$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(sl.setFromEuler(dM.set(0,0,Math.PI/2)),o.quaternion.copy(t).multiply(sl),Math.abs(Ho.copy(xy).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(sl.setFromEuler(dM.set(0,Math.PI/2,0)),o.quaternion.copy(t).multiply(sl),Math.abs(Ho.copy(q$).applyQuaternion(t).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(sl.setFromEuler(dM.set(0,Math.PI/2,0)),Ho.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(iG.lookAt(rG,Ho,xy)),o.quaternion.multiply(sl),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Lp.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Lp.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Lp),o.visible=this.dragging):(o.quaternion.copy(t),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(Ho.copy(Q$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(Ho.copy(xy).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(Ho.copy(q$).applyQuaternion(t).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(Ho.copy(q$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(Ho.copy(Q$).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(Ho.copy(xy).applyQuaternion(t).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(pM.copy(t),Ho.copy(this.eye).applyQuaternion(sl.copy(t).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(iG.lookAt(this.eye,rG,xy)),o.name==="X"&&(sl.setFromAxisAngle(Q$,Math.atan2(-Ho.y,Ho.z)),sl.multiplyQuaternions(pM,sl),o.quaternion.copy(sl)),o.name==="Y"&&(sl.setFromAxisAngle(xy,Math.atan2(Ho.x,Ho.z)),sl.multiplyQuaternions(pM,sl),o.quaternion.copy(sl)),o.name==="Z"&&(sl.setFromAxisAngle(q$,Math.atan2(Ho.y,Ho.x)),sl.multiplyQuaternions(pM,sl),o.quaternion.copy(sl))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(u){return o.name===u}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}class QTe extends bn{constructor(){super(new pg(1e5,1e5,2,2),new gg({visible:!1,wireframe:!0,side:ep,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),fM.copy(Q$).applyQuaternion(t==="local"?this.worldQuaternion:JM),P$.copy(xy).applyQuaternion(t==="local"?this.worldQuaternion:JM),F$.copy(q$).applyQuaternion(t==="local"?this.worldQuaternion:JM),Ho.copy(P$),this.mode){case"translate":case"scale":switch(this.axis){case"X":Ho.copy(this.eye).cross(fM),Pg.copy(fM).cross(Ho);break;case"Y":Ho.copy(this.eye).cross(P$),Pg.copy(P$).cross(Ho);break;case"Z":Ho.copy(this.eye).cross(F$),Pg.copy(F$).cross(Ho);break;case"XY":Pg.copy(F$);break;case"YZ":Pg.copy(fM);break;case"XZ":Ho.copy(F$),Pg.copy(P$);break;case"XYZ":case"E":Pg.set(0,0,0);break}break;case"rotate":default:Pg.set(0,0,0)}Pg.length()===0?this.quaternion.copy(this.cameraQuaternion):(sG.lookAt(Lp.set(0,0,0),Pg,Ho),this.quaternion.setFromRotationMatrix(sG)),super.updateMatrixWorld(e)}}const DO=1,qTe=n=>{let{x:e,y:t,z:i}=n===void 0?{}:n;return e=e===void 0?DO:e,t=t===void 0?DO:t,i=i===void 0?DO:i,new Mbe(e,t,i,2,.05)},ZTe=.5,eEe=n=>{let{radius:e}=n===void 0?{}:n;return e=e===void 0?ZTe:e,new fg(e,32,32)},eX=.5,tX=1,tEe=n=>{let{radius:e,height:t}=n===void 0?{}:n;return e=e===void 0?eX:e,t=t===void 0?tX:t,new ha(e,e,t,32,1,!1)},nEe=.4,rEe=.05,iEe=.2,sEe=.6,IR=n=>{let{length:e,radius:t}=n===void 0?{}:n;e=e===void 0?1:e,t=t===void 0?1:t;const i=nEe*e,s=iEe*.5*t,o=new ha(0,s,i,32,1),l=sEe*e,u=rEe*.5*t,h=new ha(u,u,l,32,1);var d=new Mr;return d.setPosition(new Te(0,l*.5,0)),h.applyMatrix4(d),d.setPosition(new Te(0,l+i*.5,0)),o.applyMatrix4(d),kj([o,h])},oEe=n=>{let{radius:e,height:t}=n===void 0?{}:n;e=e===void 0?eX:e,t=t===void 0?tX:t;const i=new ha(e,e,t,32,1,!0),s=new fg(e,32,32,Math.PI,Math.PI),o=new fg(e,32,32,Math.PI,Math.PI);var l=new Mr;l.makeRotationX(Math.PI/2),l.setPosition(0,t/2,0);var u=new Mr;return u.makeRotationX(-Math.PI/2),u.setPosition(0,-t/2,0),s.applyMatrix4(l),o.applyMatrix4(u),kj([i,s,o])},mw=(n,e,t)=>{if(n.current&&e){const i=typeof e.r=="function"?e.r(t)/255:e.r/255,s=typeof e.g=="function"?e.g(t)/255:e.g/255,o=typeof e.b=="function"?e.b(t)/255:e.b/255,l=typeof e.a=="function"?e.a(t):e.a;n.current.material.color.setRGB(i,s,o),n.current.material.opacity=l,n.current.material.transparent=l!==1}},aEe=n=>{let e=null;if(n.shape)n.shape==="cube"?e=qTe(n.shapeParams):n.shape==="cylinder"?e=tEe(n.shapeParams):n.shape==="sphere"?e=eEe(n.shapeParams):n.shape==="capsule"?e=oEe(n.shapeParams):n.shape==="arrow"&&(e=IR(n.shapeParams));else return[];return[{geometry:e,type:"part"}]};function pE(...n){const e=he.useRef();return he.useEffect(()=>{n.forEach(t=>{!t||(typeof t=="function"?t(e.current):t.current=e.current)})},[n]),e}function Md(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;if(n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(const[i,s]of n)if(!Object.is(s,e.get(i)))return!1;return!0}if(n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0}const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}const lEe=he.forwardRef(({objectKey:n,displayTfs:e,position:t,rotation:i,scale:s,ghost:o,highlightColor:l,children:u},h)=>{const d=he.useRef(null),m=pE(h,d),_=Cs(he.useCallback(w=>w.tfs[n],[n]),Md),v=Cs(w=>w.clock);Nf(he.useCallback(()=>{const w=v.getElapsed()*1e3;m.current&&(m.current.position.set(t?t.x:typeof _.position.x=="function"?_.position.x(w):_.position.x,t?t.y:typeof _.position.y=="function"?_.position.y(w):_.position.y,t?t.z:typeof _.position.z=="function"?_.position.z(w):_.position.z),m.current.quaternion.set(i?i.x:typeof _.rotation.x=="function"?_.rotation.x(w):_.rotation.x,i?i.y:typeof _.rotation.y=="function"?_.rotation.y(w):_.rotation.y,i?i.z:typeof _.rotation.z=="function"?_.rotation.z(w):_.rotation.z,i?i.w:typeof _.rotation.w=="function"?_.rotation.w(w):_.rotation.w),m.current.scale.set(s?s.x:_.scale?typeof _.scale.x=="function"?_.scale.x(w):_.scale.x:0,s?s.y:_.scale?typeof _.scale.y=="function"?_.scale.y(w):_.scale.y:0,s?s.z:_.scale?typeof _.scale.z=="function"?_.scale.z(w):_.scale.z:0))},[_,t,i,s,m,v]));const E=IR();return mc("group",{ref:m,dispose:null,up:[0,0,1],children:[e&&mc(Fw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:E,material:o?KM(l):Zg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},`${n}ArrowX`),Xt("mesh",{geometry:E,material:o?KM(l):Zg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},`${n}ArrowY`),Xt("mesh",{geometry:E,material:o?KM(l):Zg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},`${n}ArrowZ`)]}),u]})});function uEe({displayTfs:n,children:e}){const t=IR();return mc("group",{dispose:null,up:[0,0,1],children:[n&&mc(Fw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:t,material:Zg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Xt("mesh",{geometry:t,material:Zg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Xt("mesh",{geometry:t,material:Zg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}function cEe({displayTfs:n,children:e}){const t=IR();return mc("group",{dispose:null,up:[0,0,1],children:[n&&mc(Fw,{children:[Xt("axesHelper",{size:1}),Xt("mesh",{geometry:t,material:Zg(255,0,0,1),scale:[.2,.5,.2],rotation:[0,0,-Math.PI/2]},"$WorldArrowX"),Xt("mesh",{geometry:t,material:Zg(0,255,0,1),scale:[.2,.5,.2],rotation:[0,Math.PI/2,0]},"$WorldArrowY"),Xt("mesh",{geometry:t,material:Zg(0,0,255,1),scale:[.2,.5,.2],rotation:[Math.PI/2,0,0]},"$WorldArrowZ")]}),e]})}/**
 * postprocessing v6.30.1 build Fri Feb 24 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var hEe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";function oG(n,e){let t="texel";if(n!==null){const i=Number.parseInt(aE);if(!(e&&i>=133&&i!==135&&n.format===Bp&&n.type===jh&&n.encoding===Ti))switch(n.encoding){case Ti:t="sRGBToLinear(texel)";break;case Tm:t="texel";break;default:throw new Error(`Unsupported encoding: ${n.encoding}`)}}return t}var Ni={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},eb={NONE:0,DEPTH:1,CONVOLUTION:2},xs={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},rF={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},dEe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,pEe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",fEe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],mEe=class extends ph{constructor(n=new Mi){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new is(null),texelSize:new is(new Mi),scale:new is(1),kernel:new is(0)},blending:sp,depthWrite:!1,depthTest:!1,fragmentShader:dEe,vertexShader:pEe}),this.toneMapped=!1,this.setTexelSize(n.x,n.y),this.kernelSize=rF.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return fEe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},gEe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,nX=class extends ph{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new is(null),opacity:new is(1)},blending:sp,depthWrite:!1,depthTest:!1,fragmentShader:gEe,vertexShader:hEe}),this.toneMapped=!1}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},_Ee=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,vEe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,yEe=class extends ph{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new is(null),cameraNear:new is(.3),cameraFar:new is(1e3)},blending:sp,depthWrite:!1,depthTest:!1,fragmentShader:_Ee,vertexShader:vEe}),this.toneMapped=!1,this.depthBuffer=n,this.depthPacking=NT,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=NT){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Io?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},bEe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,TEe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",EEe=class extends ph{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new is(null),normalBuffer:new is(null),texelSize:new is(new Lt)},blending:sp,depthWrite:!1,depthTest:!1,fragmentShader:bEe,vertexShader:TEe}),this.toneMapped=!1}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Iv){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},$Ee=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,SEe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",wEe=class extends ph{constructor(n,e,t,i,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:aE.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new is(null),depthBuffer:new is(null),resolution:new is(new Lt),texelSize:new is(new Lt),cameraNear:new is(.3),cameraFar:new is(1e3),aspect:new is(1),time:new is(0)},blending:sp,depthWrite:!1,depthTest:!1,dithering:s}),this.toneMapped=!1,n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Iv){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){var e,t,i,s,o;return this.fragmentShader=$Ee.replace(xs.FRAGMENT_HEAD,(e=n.get(xs.FRAGMENT_HEAD))!=null?e:"").replace(xs.FRAGMENT_MAIN_UV,(t=n.get(xs.FRAGMENT_MAIN_UV))!=null?t:"").replace(xs.FRAGMENT_MAIN_IMAGE,(i=n.get(xs.FRAGMENT_MAIN_IMAGE))!=null?i:""),this.vertexShader=SEe.replace(xs.VERTEX_HEAD,(s=n.get(xs.VERTEX_HEAD))!=null?s:"").replace(xs.VERTEX_MAIN_SUPPORT,(o=n.get(xs.VERTEX_MAIN_SUPPORT))!=null?o:""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof Io?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return xs}},xEe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",CEe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",MEe=class extends ph{constructor(n=new Lt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new is(null),texelSize:new is(new Lt)},blending:sp,depthWrite:!1,depthTest:!1,fragmentShader:xEe,vertexShader:CEe}),this.toneMapped=!1,this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},AEe=new uE,V_=null;function IEe(){if(V_===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);V_=new kr,V_.setAttribute!==void 0?(V_.setAttribute("position",new Ms(n,3)),V_.setAttribute("uv",new Ms(e,2))):(V_.addAttribute("position",new Ms(n,3)),V_.addAttribute("uv",new Ms(e,2)))}return V_}var Bf=class{constructor(n="Pass",e=new rw,t=AEe){this.name=n,this.renderer=null,this.scene=e,this.camera=t,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let e=this.screen;e!==null?e.material=n:(e=new bn(IEe(),n),e.frustumCulled=!1,this.scene===null&&(this.scene=new rw),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,e=Iv){}render(n,e,t,i,s){throw new Error("Render method not implemented!")}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof lu||e instanceof Hc||e instanceof Bl||e instanceof Bf)&&this[n].dispose()}}},REe=class extends Bf{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new nX,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new lu(1,1,{minFilter:Vo,magFilter:Vo,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,s){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==jh?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n.outputEncoding===Ti&&(this.renderTarget.texture.encoding=Ti))}},kEe=class extends Bf{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,s){const o=n.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},aG=new _n,iF=class extends Bf{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,s){const o=this.overrideClearColor,l=this.overrideClearAlpha,u=n.getClearAlpha(),h=o!==null,d=l>=0;h?(n.getClearColor(aG),n.setClearColor(o,d?l:u)):d&&n.setClearAlpha(l),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),h?n.setClearColor(aG,u):d&&n.setClearAlpha(u)}},j_=-1,np=class extends Lf{constructor(n,e=j_,t=j_,i=1){super(),this.resizable=n,this.baseSize=new Lt(1,1),this.preferredSize=new Lt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Lt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==j_?t.width=e.width:e.height!==j_?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==j_?t.height=e.height:e.width!==j_?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(j_),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return j_}},NO=!1,lG=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ep:t=this.materialsFlatShadedDoubleSide;break;case zc:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ep:t=this.materialsDoubleSide;break;case zc:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[n.clone(),n.clone(),n.clone()];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=e0;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=zc,i}),this.materialsDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.side=ep,i}),this.materialsFlatShaded=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=zc,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=t.clone();return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ep,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,NO){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const o of s)o[0].material=o[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=s}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return NO}static set workaroundEnabled(n){NO=n}},RR=class extends Bf{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new iF,this.overrideMaterialManager=t===null?null:new lG(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new lG(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.selection,h=l.layers.mask,d=o.background,m=n.shadowMap.autoUpdate,_=this.renderToScreen?null:e;u!==null&&l.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(_),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,o,l):n.render(o,l),l.layers.mask=h,o.background=d,n.shadowMap.autoUpdate=m}},OEe=class extends Bf{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=np.AUTO_SIZE,height:o=np.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new RR(n,e,new Bw({depthPacking:NT}));const h=this.renderPass;h.skipShadowMapUpdate=!0,h.ignoreBackground=!0;const d=h.getClearPass();d.overrideClearColor=new _n(16777215),d.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new lu(1,1,{minFilter:da,magFilter:da}),this.renderTarget.texture.name="DepthPass.Target");const m=this.resolution=new np(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},LEe=class extends Bf{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=np.AUTO_SIZE,height:i=np.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("DepthDownsamplingPass");const l=new EEe;l.normalBuffer=n,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new lu(1,1,{minFilter:da,magFilter:da,depthBuffer:!1,type:jg}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const u=this.resolution=new np(this,s,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Iv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,s){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}};function uG(n,e,t){for(const i of e){const s="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),o=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(o,s))}}function DEe(n,e,t){var i,s,o,l,u;let h=e.getFragmentShader(),d=e.getVertexShader();const m=h!==void 0&&/mainImage/.test(h),_=h!==void 0&&/mainUv/.test(h);if(t.attributes|=e.getAttributes(),h===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(_&&t.attributes&eb.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!m&&!_)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const v=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,E=t.shaderParts;let w=(i=E.get(xs.FRAGMENT_HEAD))!=null?i:"",x=(s=E.get(xs.FRAGMENT_MAIN_UV))!=null?s:"",A=(o=E.get(xs.FRAGMENT_MAIN_IMAGE))!=null?o:"",O=(l=E.get(xs.VERTEX_HEAD))!=null?l:"",k=(u=E.get(xs.VERTEX_MAIN_SUPPORT))!=null?u:"";const N=new Set,D=new Set;if(_&&(x+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),d!==null&&/mainSupport/.test(d)){const H=/mainSupport *\([\w\s]*?uv\s*?\)/.test(d);k+=`	${n}MainSupport(`,k+=H?`vUv);
`:`);
`;for(const z of d.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const J of z[1].split(/\s*,\s*/))t.varyings.add(J),N.add(J),D.add(J);for(const z of d.matchAll(v))D.add(z[1])}for(const H of h.matchAll(v))D.add(H[1]);for(const H of e.defines.keys())D.add(H.replace(/\([\w\s,]*\)/g,""));for(const H of e.uniforms.keys())D.add(H);D.delete("while"),D.delete("for"),D.delete("if"),e.uniforms.forEach((H,z)=>t.uniforms.set(n+z.charAt(0).toUpperCase()+z.slice(1),H)),e.defines.forEach((H,z)=>t.defines.set(n+z.charAt(0).toUpperCase()+z.slice(1),H));const U=new Map([["fragment",h],["vertex",d]]);uG(n,D,t.defines),uG(n,D,U),h=U.get("fragment"),d=U.get("vertex");const F=e.blendMode;if(t.blendModes.set(F.blendFunction,F),m){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(A+=e.inputColorSpace===Ti?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==null?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const H=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;A+=`${n}MainImage(color0, UV, `,t.attributes&eb.DEPTH&&H.test(h)&&(A+="depth, ",t.readDepth=!0),A+=`color1);
	`;const z=n+"BlendOpacity";t.uniforms.set(z,F.opacity),A+=`color0 = blend${F.blendFunction}(color0, color1, ${z});

	`,w+=`uniform float ${z};

`}if(w+=h+`
`,d!==null&&(O+=d+`
`),E.set(xs.FRAGMENT_HEAD,w),E.set(xs.FRAGMENT_MAIN_UV,x),E.set(xs.FRAGMENT_MAIN_IMAGE,A),E.set(xs.VERTEX_HEAD,O),E.set(xs.VERTEX_MAIN_SUPPORT,k),e.extensions!==null)for(const H of e.extensions)t.extensions.add(H)}}var NEe=class extends Bf{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new wEe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new WEe;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===Ni.DST)n.attributes|=l.getAttributes()&eb.DEPTH;else{if(n.attributes&l.getAttributes()&eb.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${l.name})`);DEe("e"+e++,l,n)}let t=n.shaderParts.get(xs.FRAGMENT_HEAD),i=n.shaderParts.get(xs.FRAGMENT_MAIN_IMAGE),s=n.shaderParts.get(xs.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const l of n.blendModes.values())t+=l.getShaderCode().replace(o,`blend${l.blendFunction}`)+`
`;n.attributes&eb.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Ti&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(xs.FRAGMENT_HEAD,t),n.shaderParts.set(xs.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(xs.FRAGMENT_MAIN_UV,s),n.shaderParts.forEach((l,u,h)=>h.set(u,l==null?void 0:l.trim().replace(/^#/,`
#`))),this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Iv){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,s){for(const o of this.effects)o.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==jh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},BEe=class extends Bf{constructor({kernelSize:n=rF.MEDIUM,resolutionScale:e=.5,width:t=np.AUTO_SIZE,height:i=np.AUTO_SIZE,resolutionX:s=t,resolutionY:o=i}={}){super("KawaseBlurPass"),this.renderTargetA=new lu(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new np(this,s,o,e);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new mEe,this._blurMaterial.kernelSize=n,this.copyMaterial=new nX}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.scene,l=this.camera,u=this.renderTargetA,h=this.renderTargetB,d=this.blurMaterial,m=d.kernelSequence;let _=e;this.fullscreenMaterial=d;for(let v=0,E=m.length;v<E;++v){const w=v&1?h:u;d.kernel=m[v],d.inputBuffer=_.texture,n.setRenderTarget(w),n.render(o,l),_=w}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=_.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(o,l)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.renderTargetA.setSize(i,s),this.renderTargetB.setSize(i,s),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==jh?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n.outputEncoding===Ti&&(this.renderTargetA.texture.encoding=Ti,this.renderTargetB.texture.encoding=Ti))}static get AUTO_SIZE(){return np.AUTO_SIZE}},PEe=class extends Bf{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new iF(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,s){const o=n.getContext(),l=n.state.buffers,u=this.scene,h=this.camera,d=this.clearPass,m=this.inverted?0:1,_=1-m;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.stencil.setFunc(o.ALWAYS,m,4294967295),l.stencil.setClear(_),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?d.render(n,null):(d.render(n,e),d.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(u,h)):(n.setRenderTarget(e),n.render(u,h),n.setRenderTarget(t),n.render(u,h)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(o.EQUAL,1,4294967295),l.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.stencil.setLocked(!0)}},FEe=class extends Bf{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:s=np.AUTO_SIZE,height:o=np.AUTO_SIZE,resolutionX:l=s,resolutionY:u=o}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new RR(n,e,new MP);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const d=h.getClearPass();d.overrideClearColor=new _n(7829503),d.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new lu(1,1,{minFilter:da,magFilter:da}),this.renderTarget.texture.name="NormalPass.Target");const m=this.resolution=new np(this,l,u,i);m.addEventListener("change",_=>this.setSize(m.baseWidth,m.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,s){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,o,o)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},UEe=class extends Bf{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,s){const o=this.fullscreenMaterial.uniforms;e!==null&&o!==void 0&&o[this.input]!==void 0&&(o[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==jh&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},BO=1/1e3,zEe=1e3,HEe=class{constructor(){this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*BO}get fixedDelta(){return this._fixedDelta*BO}set fixedDelta(n){this._fixedDelta=n*zEe}get elapsed(){return this._elapsed*BO}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=n!==void 0?n:performance.now(),this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()}handleEvent(n){document.hidden||(this.currentTime=performance.now())}dispose(){this.autoReset=!1}},GEe=class{constructor(n=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new REe,this.depthTexture=null,this.passes=[],this.timer=new HEe,this.autoRenderToScreen=!0,this.setRenderer(n)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(n){const e=this.inputBuffer,t=this.multisampling;t>0&&n>0?(this.inputBuffer.samples=n,this.outputBuffer.samples=n,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==n&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,n),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(n){if(this.renderer=n,n!==null){const e=n.getSize(new Lt),t=n.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===jh&&n.outputEncoding===Ti&&(this.inputBuffer.texture.encoding=Ti,this.outputBuffer.texture.encoding=Ti,this.inputBuffer.dispose(),this.outputBuffer.dispose()),n.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(n,t,i)}}replaceRenderer(n,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(n),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(n.domElement)),t}createDepthTexture(){const n=this.depthTexture=new _P;return this.inputBuffer.depthTexture=n,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(n.format=Tv,n.type=pv):n.type=j0,n}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const n of this.passes)n.setDepthTexture(null)}}createBuffer(n,e,t,i){const s=this.renderer,o=s===null?new Lt:s.getDrawingBufferSize(new Lt),l={minFilter:Vo,magFilter:Vo,stencilBuffer:e,depthBuffer:n,type:t},u=new lu(o.width,o.height,l);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),t===jh&&s!==null&&s.outputEncoding===Ti&&(u.texture.encoding=Ti),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(n){for(const e of this.passes)e.mainScene=n}setMainCamera(n){for(const e of this.passes)e.mainCamera=n}addPass(n,e){const t=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new Lt),o=i.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(n.setRenderer(i),n.setSize(s.width,s.height),n.initialize(i,o,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),n.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,n):t.push(n),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),n.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(n of t)n.setDepthTexture(u)}else n.setDepthTexture(this.depthTexture)}removePass(n){const e=this.passes,t=e.indexOf(n);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const i=(s,o)=>s||o.needsDepthTexture;e.reduce(i,!1)||(n.getDepthTexture()===this.depthTexture&&n.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(n.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const n=this.passes;this.deleteDepthTexture(),n.length>0&&(this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!1),this.passes=[])}render(n){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,l,u,h;n===void 0&&(this.timer.update(),n=this.timer.delta);for(const d of this.passes)d.enabled&&(d.render(e,i,s,n,o),d.needsSwap&&(o&&(t.renderToScreen=d.renderToScreen,l=e.getContext(),u=e.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,i,s,n,o),u.setFunc(l.EQUAL,1,4294967295)),h=i,i=s,s=h),d instanceof PEe?o=!0:d instanceof kEe&&(o=!1))}setSize(n,e,t){const i=this.renderer,s=i.getSize(new Lt);(n===void 0||e===void 0)&&(n=s.width,e=s.height),(s.width!==n||s.height!==e)&&i.setSize(n,e,t);const o=i.getDrawingBufferSize(new Lt);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const l of this.passes)l.setSize(o.width,o.height)}reset(){const n=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=n}dispose(){for(const n of this.passes)n.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},WEe=class{constructor(){this.shaderParts=new Map([[xs.FRAGMENT_HEAD,null],[xs.FRAGMENT_MAIN_UV,null],[xs.FRAGMENT_MAIN_IMAGE,null],[xs.VERTEX_HEAD,null],[xs.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=eb.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Tm}},VEe=class extends Set{constructor(n,e=10){super(),this.l=e,this.exclusive=!1,n!==void 0&&this.set(n)}get layer(){return this.l}set layer(n){const e=this.l;for(const t of this)t.layers.disable(e),t.layers.enable(n);this.l=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},jEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",XEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",YEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",KEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",JEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",QEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",qEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",ZEe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",e$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",t$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",n$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",r$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",i$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",s$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",o$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",a$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",l$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",u$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",c$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",h$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",d$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",p$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",f$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",m$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",g$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",_$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",v$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",y$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",b$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",T$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",E$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",$$e="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",S$e=new Map([[Ni.ADD,jEe],[Ni.ALPHA,XEe],[Ni.AVERAGE,YEe],[Ni.COLOR,KEe],[Ni.COLOR_BURN,JEe],[Ni.COLOR_DODGE,QEe],[Ni.DARKEN,qEe],[Ni.DIFFERENCE,ZEe],[Ni.DIVIDE,e$e],[Ni.DST,null],[Ni.EXCLUSION,t$e],[Ni.HARD_LIGHT,n$e],[Ni.HARD_MIX,r$e],[Ni.HUE,i$e],[Ni.INVERT,s$e],[Ni.INVERT_RGB,o$e],[Ni.LIGHTEN,a$e],[Ni.LINEAR_BURN,l$e],[Ni.LINEAR_DODGE,u$e],[Ni.LINEAR_LIGHT,c$e],[Ni.LUMINOSITY,h$e],[Ni.MULTIPLY,d$e],[Ni.NEGATION,p$e],[Ni.NORMAL,f$e],[Ni.OVERLAY,m$e],[Ni.PIN_LIGHT,g$e],[Ni.REFLECT,_$e],[Ni.SATURATION,v$e],[Ni.SCREEN,y$e],[Ni.SOFT_LIGHT,b$e],[Ni.SRC,T$e],[Ni.SUBTRACT,E$e],[Ni.VIVID_LIGHT,$$e]]),w$e=class extends Lf{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new is(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return S$e.get(this.blendFunction)}},x$e=class extends Lf{constructor(n,e,{attributes:t=eb.NONE,blendFunction:i=Ni.NORMAL,defines:s=new Map,uniforms:o=new Map,extensions:l=null,vertexShader:u=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=u,this.defines=s,this.uniforms=o,this.extensions=l,this.blendMode=new w$e(i),this.blendMode.addEventListener("change",h=>this.setChanged()),this._inputColorSpace=Tm,this._outputColorSpace=null}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Iv){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof lu||e instanceof Hc||e instanceof Bl||e instanceof Bf)&&this[n].dispose()}}};new Te;new Mr;new _n;var C$e=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,M$e="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",A$e=class extends x$e{constructor(n,e,{blendFunction:t=Ni.SCREEN,patternTexture:i=null,patternScale:s=1,edgeStrength:o=1,pulseSpeed:l=0,visibleEdgeColor:u=16777215,hiddenEdgeColor:h=2230538,kernelSize:d=rF.VERY_SMALL,blur:m=!1,xRay:_=!0,multisampling:v=0,resolutionScale:E=.5,width:w=np.AUTO_SIZE,height:x=np.AUTO_SIZE,resolutionX:A=w,resolutionY:O=x}={}){super("OutlineEffect",C$e,{uniforms:new Map([["maskTexture",new is(null)],["edgeTexture",new is(null)],["edgeStrength",new is(o)],["visibleEdgeColor",new is(new _n(u))],["hiddenEdgeColor",new is(new _n(h))],["pulse",new is(1)],["patternScale",new is(s)],["patternTexture",new is(null)]])}),this.blendMode.addEventListener("change",U=>{this.blendMode.getBlendFunction()===Ni.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.setBlendFunction(t),this.patternTexture=i,this.xRay=_,this.scene=n,this.camera=e,this.renderTargetMask=new lu(1,1),this.renderTargetMask.samples=v,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new lu(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new iF,this.clearPass.overrideClearColor=new _n(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new OEe(n,e),this.maskPass=new RR(n,e,new yEe(this.depthPass.texture,e));const k=this.maskPass.clearPass;k.overrideClearColor=new _n(16777215),k.overrideClearAlpha=1,this.blurPass=new BEe({resolutionScale:E,resolutionX:A,resolutionY:O,kernelSize:d}),this.blurPass.enabled=m;const N=this.blurPass.resolution;N.addEventListener("change",U=>this.setSize(N.baseWidth,N.baseHeight)),this.outlinePass=new UEe(new MEe);const D=this.outlinePass.fullscreenMaterial;D.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new VEe,this.selection.layer=10,this.pulseSpeed=l}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){if(n!==null?(n.wrapS=n.wrapT=DT,this.defines.set("USE_PATTERN","1"),this.setVertexShader(M$e)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.renderer!==null){const e=oG(n,this.renderer.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",e)}this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,s=this.camera,o=this.selection,l=this.uniforms.get("pulse"),u=i.background,h=s.layers.mask;o.size>0?(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=t,o.setVisible(!1),this.depthPass.render(n),o.setVisible(!0),s.layers.set(o.layer),this.maskPass.render(n,this.renderTargetMask),s.layers.mask=h,i.background=u,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(n,this.renderTargetOutline),this.active=!1)}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,s=t.height;this.depthPass.setSize(i,s),this.renderTargetOutline.setSize(i,s),this.outlinePass.fullscreenMaterial.setSize(i,s)}initialize(n,e,t){const i=this.patternTexture,s=oG(i,n.capabilities.isWebGL2);this.defines.set("texelToLinear(texel)",s),this.blurPass.initialize(n,e,jh),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}};new Te;new Te;let U$;function I$e(){if(U$!==void 0)return U$;try{var n;let e;const t=document.createElement("canvas");return U$=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))===null||n===void 0||n.loseContext()),U$}catch{return U$=!1}}const R$e=n=>!!n.current,cG=n=>R$e(n)?n.current:n,rX=he.createContext(null),k$e=Tr.memo(he.forwardRef((n,e)=>{let{children:t,camera:i,scene:s,resolutionScale:o,enabled:l=!0,renderPriority:u=1,autoClear:h=!0,depthBuffer:d,disableNormalPass:m,stencilBuffer:_,multisampling:v=8,frameBufferType:E=ub}=n;const{gl:w,scene:x,camera:A,size:O}=Hh();s=s||x,i=i||A;const[k,N,D]=he.useMemo(()=>{const H=I$e(),z=new GEe(w,{depthBuffer:d,stencilBuffer:_,multisampling:v>0&&H?v:0,frameBufferType:E});z.addPass(new RR(s,i));let J=null,te=null;return m||(te=new FEe(s,i),te.enabled=!1,z.addPass(te),o!==void 0&&H&&(J=new LEe({normalBuffer:te.texture,resolutionScale:o}),J.enabled=!1,z.addPass(J))),[z,te,J]},[i,w,d,_,v,E,s,m,o]);he.useEffect(()=>k==null?void 0:k.setSize(O.width,O.height),[k,O]),Nf((H,z)=>{l&&(w.autoClear=h,k.render(z))},l?u:0);const U=he.useRef(null);he.useLayoutEffect(()=>{let H;return U.current&&U.current.__r3f&&k&&(H=new NEe(i,...U.current.__r3f.objects),H.renderToScreen=!0,k.addPass(H),N&&(N.enabled=!0),D&&(D.enabled=!0)),()=>{H&&(k==null||k.removePass(H)),N&&(N.enabled=!1),D&&(D.enabled=!1)}},[k,t,i,N,D]);const F=he.useMemo(()=>({composer:k,normalPass:N,downSamplingPass:D,resolutionScale:o,camera:i,scene:s}),[k,N,D,o,i,s]);return he.useImperativeHandle(e,()=>k,[k]),Xt(rX.Provider,{value:F,children:Xt("group",{ref:U,children:t})})})),sF=he.createContext(null);function O$e(n){let{children:e,enabled:t=!0}=n;const[i,s]=he.useState([]),o=he.useMemo(()=>({selected:i,select:s,enabled:t}),[i,s,t]);return Tr.createElement(sF.Provider,{value:o},e)}function iX(n){let{enabled:e=!1,children:t,...i}=n;const s=he.useRef(null),o=he.useContext(sF);return he.useEffect(()=>{if(o&&e){let l=!1;const u=[];if(s.current.traverse(h=>{h.type==="Mesh"&&u.push(h),o.selected.indexOf(h)===-1&&(l=!0)}),l)return o.select(h=>[...h,...u]),()=>{o.select(h=>h.filter(d=>!u.includes(d)))}}},[e,t]),Xt("group",{ref:s,...i,children:t})}const L$e=he.forwardRef(function(n,e){let{selection:t=[],selectionLayer:i=10,blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:d,width:m,height:_,kernelSize:v,blur:E,xRay:w,...x}=n;const A=Hh(U=>U.invalidate),{scene:O,camera:k}=he.useContext(rX),N=he.useMemo(()=>new A$e(O,k,{blendFunction:s,patternTexture:o,edgeStrength:l,pulseSpeed:u,visibleEdgeColor:h,hiddenEdgeColor:d,width:m,height:_,kernelSize:v,blur:E,xRay:w,...x}),[s,E,k,l,_,d,v,o,u,O,h,m,w]),D=he.useContext(sF);return he.useEffect(()=>{if(!D&&t)return N.selection.set(Array.isArray(t)?t.map(cG):[cG(t)]),A(),()=>{N.selection.clear(),A()}},[N,t,D]),he.useEffect(()=>{N.selectionLayer=i,A()},[N,i]),he.useRef(),he.useEffect(()=>{if(D&&D.enabled){var U;if((U=D.selected)!=null&&U.length)return N.selection.set(D.selected),A(),()=>{N.selection.clear(),A()}}},[D]),Xt("primitive",{ref:e,object:N})}),D$e=["cube","cylinder","sphere","capsule","arrow"],sX=he.createContext(),N$e=n=>{const e=he.useContext(sX)[n.shape];return D$e.includes(n.shape)?aEe(n):e&&typeof e=="function"?e():(console.warn(`Shape not loaded: ${n.shape} (reading property 'shape' of item)`,n),[])},B$e=({meshes:n,children:e})=>Xt(sX.Provider,{value:n,children:e}),P$e=he.memo(he.forwardRef(({objectKey:n,highlightColor:e,position:t,rotation:i,scale:s,ghost:o},l)=>{const u=he.useRef(null),h=pE(l,u),d=Cs(x=>x.onClick,Md),m=Cs(x=>x.onPointerOver,Md),_=Cs(x=>x.onPointerOut,Md),v=Cs(x=>x.clock),E=Cs(he.useCallback(x=>x.items[n],[n]),Md),w=N$e(E);return Nf(he.useCallback(()=>{const x=v.getElapsed()*1e3;h.current&&(h.current.position.set(t?t.x:typeof E.position.x=="function"?E.position.x(x):E.position.x,t?t.y:typeof E.position.y=="function"?E.position.y(x):E.position.y,t?t.z:typeof E.position.z=="function"?E.position.z(x):E.position.z),h.current.quaternion.set(i?i.x:typeof E.rotation.x=="function"?E.rotation.x(x):E.rotation.x,i?i.y:typeof E.rotation.y=="function"?E.rotation.y(x):E.rotation.y,i?i.z:typeof E.rotation.z=="function"?E.rotation.z(x):E.rotation.z,i?i.w:typeof E.rotation.w=="function"?E.rotation.w(x):E.rotation.w),h.current.scale.set(s?s.x:typeof E.scale.x=="function"?E.scale.x(x):E.scale.x,s?s.y:typeof E.scale.y=="function"?E.scale.y(x):E.scale.y,s?s.z:typeof E.scale.z=="function"?E.scale.z(x):E.scale.z),h.current.visible=typeof E.hidden=="function"?!E.hidden(x):!E.hidden)},[E,t,i,s,h,v])),Xt(iX,{enabled:E.highlighted,children:mc("group",{ref:h,up:[0,0,1],children:[Xt("group",{up:[0,0,1],rotation:[Math.PI/2,0,0],onPointerDown:x=>{d(n,!h.current.visible,{local:{position:h.current.position,rotation:h.current.quaternion},world:{position:h.current.getWorldPosition(new Te),rotation:h.current.getWorldQuaternion(new Wo)}},x)},onPointerOver:x=>{m(n,!h.current.visible,x)},onPointerOut:x=>{_(n,!h.current.visible,x)},children:w.map((x,A)=>Xt(oX,{idx:A,groupOrPart:x,objectKey:n,ghost:o,highlightColor:e},A))}),E.showName&&Xt(Rj,{distanceFactor:3,position:[0,0,.2],children:Xt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey",padding:5,userSelect:"none"},children:E.name})})]})})})),F$e=he.memo(({part:n,objectKey:e,ghost:t,highlightColor:i})=>{const s=Cs(he.useCallback(m=>m.items[e].wireframe,[e])),o=Cs(he.useCallback(m=>m.items[e].color,[e])),l=o!==void 0,u=he.useRef(),h=he.useRef(),d=Cs(m=>m.clock);return Nf(he.useCallback(()=>{const m=d.getElapsed()*1e3;t||(mw(h,o,m),mw(u,o,m))},[t,u,h,d,o])),t?Xt("mesh",{ref:h,geometry:n.geometry,material:KM(i),scale:n.scale,castShadow:!1,receiveShadow:!1},"B"):l?mc("group",{up:[0,0,1],children:[Xt("mesh",{ref:h,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,wireframe:s,attach:"material",opacity:1,side:zc})},"B"),Xt("mesh",{ref:u,geometry:n.geometry,scale:n.scale,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:s,opacity:1,side:e0})},"F")]}):Xt(Fw,{children:Xt("mesh",{ref:u,geometry:n.geometry,material:n.material,scale:n.scale,castShadow:!0,receiveShadow:!0,wireframe:s},"I")})}),oX=he.memo(({idx:n,groupOrPart:e,ghost:t,objectKey:i,highlightColor:s})=>e.type==="group"?Xt("group",{up:[0,0,1],position:e.position,rotation:e.rotation,scale:e.scale,children:e.children.map((o,l)=>Xt(oX,{idx:l,groupOrPart:o,objectKey:i,ghost:t,highlightColor:s},l))},n):Xt(F$e,{part:e,objectKey:i,highlightColor:s,ghost:t},n)),U$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=pE(e,t),{vertices:s,width:o,hidden:l}=Cs(he.useCallback(u=>({vertices:u.lines[n].vertices,width:u.lines[n].width,hidden:u.lines[n].hidden}),[n]),Md);return s.length<=1?null:Xt(Obe,{ref:i,visible:!l,points:s.map(u=>[u.position.x,u.position.y,u.position.z]),color:"white",vertexColors:s.map(u=>[u.color.r/255,u.color.g/255,u.color.b/255]),lineWidth:o})}),z$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=pE(e,t),s=Cs(w=>w.onClick,Md),o=Cs(w=>w.onPointerOver,Md),l=Cs(w=>w.onPointerOut,Md),u=Cs(he.useCallback(w=>w.hulls[n],[n]),Md),h=Cs(he.useCallback(w=>w.hulls[n].vertices,[n]),Md),d=Cs(w=>w.clock),m=he.useRef(),_=he.useRef(),v=typeof h=="function"?h(0):h,E=new d5(v.map(w=>new Te(w.x,w.y,w.z)));return Nf(he.useCallback(()=>{const w=d.getElapsed()*1e3;mw(_,u.color,w),mw(m,u.color,w);const x=typeof h=="function"?h(w):h;if(x!==v){const O=new d5(x.map(k=>new Te(k.x,k.y,k.z)));m.current.geometry=O,_.current.geometry=O}const A=typeof u.hidden=="function"?!u.hidden(w):!u.hidden;m.current.visible=A,_.current.visible=A},[m,_,v,u,d,h])),Xt(iX,{enabled:u.highlighted,children:mc("group",{ref:i,up:[0,0,1],children:[mc("group",{up:[0,0,1],onPointerDown:w=>{s(n,m.current.visible,w)},onPointerOver:w=>{o(n,m.current.visible,w)},onPointerOut:w=>{l(n,m.current.visible,w)},children:[Xt("mesh",{ref:_,geometry:E,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,wireframe:u.wireframe,attach:"material",side:zc})},`${n}B`),Xt("mesh",{ref:m,geometry:E,castShadow:!1,receiveShadow:!1,children:Xt("meshLambertMaterial",{transparent:!0,attach:"material",wireframe:u.wireframe,side:e0})},`${n}F`)]}),u.showName&&Xt(Rj,{distanceFactor:2,position:[0,0,.5],children:Xt("div",{style:{opacity:.75,borderRadius:2,backgroundColor:"lightgrey"},className:"disable-text-selection",children:u.name})})]})})}),H$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=pE(e,t),s=he.useRef(),o=Cs(u=>u.clock),l=Cs(he.useCallback(u=>u.texts[n],[n]));return Nf(he.useCallback(()=>{const u=o.getElapsed()*1e3;i.current&&(i.current.position.set(typeof l.position.x=="function"?l.position.x(u):l.position.x,typeof l.position.y=="function"?l.position.y(u):l.position.y,typeof l.position.z=="function"?l.position.z(u):l.position.z),i.current.visible=typeof l.hidden=="function"?!l.hidden(u):!l.hidden),s.current&&mw(s,l.color,u)},[l,i,o])),Xt("group",{ref:i,children:Xt(kbe,{follow:!0,children:Xt(C1e,{ref:s,depthOffset:2,scale:[.2,.2,.2],children:l.value})})})}),G$e=he.forwardRef(({objectKey:n},e)=>{const t=he.useRef(null),i=pE(e,t),s=Cs(m=>m.clock),{points:o,scale:l,hidden:u}=Cs(he.useCallback(m=>({points:m.points[n].points,scale:m.points[n].scale,hidden:m.points[n].hidden}),[n]),Md),[{positions:h,colors:d}]=he.useState(()=>({positions:new Float32Array(o.length*3),colors:new Float32Array(o.length*3)}));return Nf(()=>{const m=s.getElapsed()*1e3;if(i.current)for(let _=0;_<o.length;_++){let v=_*3;h[v]=typeof o[_].position.x=="function"?o[_].position.x(m):o[_].position.x,h[v+1]=typeof o[_].position.y=="function"?o[_].position.y(m):o[_].position.y,h[v+2]=typeof o[_].position.z=="function"?o[_].position.z(m):o[_].position.z,d[v]=typeof o[_].color.r=="function"?o[_].color.r(m)/255:o[_].color.r/255,d[v+1]=typeof o[_].color.g=="function"?o[_].color.g(m)/255:o[_].color.g/255,d[v+2]=typeof o[_].color.b=="function"?o[_].color.b(m)/255:o[_].color.b/255}}),o.length<=1?null:Xt(cTe,{ref:i,hidden:u,positions:h,colors:d,children:Xt(iTe,{transparent:!0,vertexColors:!0,sizeAttenuation:!0,depthWrite:!0,size:l*.1})})}),oF=he.memo(({activeTf:n,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:d,targetRef:m,targetId:_,targetSource:v,filterActive:E,tfFilter:w,customProps:x})=>{const A=n==="world"?uEe:n==="gizmo"?cEe:lEe,O=n===_?x:{},k=E?t.filter(D=>w.includes(D.key)):t,N=E&&n!==m;return mc(A,{objectKey:n,displayTfs:e,ref:_===n?m:null,...O,ghost:d,highlightColor:h,children:[k.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>Xt(oF,{activeTf:D.key,displayTfs:e,allTfs:t,allItems:i,allLines:s,allHulls:o,allTexts:l,allPoints:u,highlightColor:h,ghosts:d,targetRef:m,targetSource:v,targetId:_,filterActive:N,tfFilter:w,customProps:x},D.key)),i.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===_&&v==="items"?x:{};return!E||D.key===_||n===_?Xt(P$e,{objectKey:D.key,highlightColor:h,ghost:d,ref:D.key===_?m:null,...U},D.key):null}),s.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===_&&v==="lines"?x:{};return!E||D.key===_||n===_?Xt(U$e,{objectKey:D.key,ref:D.lineKey===_?m:null,...U},D.key):null}),o.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===_&&v==="hulls"?x:{};return!E||D.key===_||n===_?Xt(z$e,{objectKey:D.key,highlightColor:h,ghost:d,ref:D.key===_?m:null,...U},D.key):null}),l.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===_&&v==="texts"?x:{};return!E||D.key===_||n===_?Xt(H$e,{objectKey:D.key,highlightColor:h,ref:D.key===_?m:null,...U},D.key):null}),u.filter(D=>D.frame===n||n==="world"&&!D.frame).map(D=>{const U=D.key===_&&v==="points"?x:{};return!E||D.key===_||n===_?Xt(G$e,{objectKey:D.key,highlightColor:h,ref:D.key===_?m:null,...U},D.key):null})]})}),W$e=["enabled","axis","translationSnap","rotationSnap","scaleSnap","space","size"],V$e=["displayTfs","allTfs","allItems","allLines","allHulls","allTexts","allPoints","highlightColor"],j$e=he.memo(({camera:n,objectInfo:e,highlightColor:t,translateSnap:i,rotateSnap:s,scaleSnap:o,onDragStart:l,onDragEnd:u,mode:h,...d})=>{const m=xO(d,W$e),_=xO(d,V$e),v=Cs(he.useCallback(ie=>{let de=[];e.source==="tfs"&&de.push(e.key);let oe=ie[e.source][e.key].frame;for(;oe&&oe!=="world"&&oe!=="gizmo";){let ue=ie.tfs[oe];de.push(oe),oe=ue.frame}return de},[e]),Md),E=he.useRef(),w=he.useRef(),x=Cs(ie=>xO(ie[e.source][e.key],["position","rotation","scale"]),Md),A=Hh(({gl:ie})=>ie),O=Hh(({camera:ie})=>ie),k=Hh(({invalidate:ie})=>ie),N=n||O,[D]=he.useState(()=>new WTe(N,A.domElement));D.translationSnap=i,D.rotationSnap=s,D.scaleSnap=o,h!=null&&h.includes("translate")?D.mode="translate":h!=null&&h.includes("rotate")?D.mode="rotate":h!=null&&h.includes("scale")&&(D.mode="scale"),h!=null&&h.includes("-x")?(D.showY=!1,D.showZ=!1):h!=null&&h.includes("-y")?(D.showX=!1,D.showZ=!1):h!=null&&h.includes("-z")&&(D.showX=!1,D.showY=!1);const[U,F]=he.useState(!1),[H,z]=he.useState(x),[J,te]=he.useState(!1);he.useEffect(()=>{console.log("refreshing transform"),z(x)},[x,J]);const re=Cs(ie=>ie.onMove,Md);return he.useEffect(()=>{const ie=de=>{var oe,ue,ge;const Ae=(oe=w==null?void 0:w.current)==null?void 0:oe.position,j=(ue=w==null?void 0:w.current)==null?void 0:ue.quaternion,Z=(ge=w==null?void 0:w.current)==null?void 0:ge.scale;de.value&&!U?(console.log("starting transform"),F(!0),z({position:Ae,rotation:j,scale:Z}),l&&l()):!de.value&&U&&(console.log("stopping transform"),F(!1),u&&u(),re(e.key,e.source,{position:D.worldPosition,quaternion:D.worldQuaternion,scale:D._worldScale},{position:Ae?{x:Ae.x,y:Ae.y,z:Ae.z}:null,quaternion:j?{x:j.x,y:j.y,z:j.z,w:j.w}:null,scale:Z?{x:Z.x,y:Z.y,z:Z.z}:null}),te(!J))};return D&&D.addEventListener("dragging-changed",ie),()=>{D.removeEventListener("dragging-changed",ie)}},[x,U,e]),he.useEffect(()=>void(D==null?void 0:D.attach(w.current)),[w,D]),he.useEffect(()=>(D&&D.addEventListener("change",k),()=>{var ie;return(ie=D==null?void 0:D.removeEventListener)==null?void 0:ie.call(D,"change",k)}),[D,k]),D?mc(Fw,{children:[Xt("primitive",{ref:E,object:D,...m}),Xt(oF,{..._,activeTf:"world",tfFilter:v,ghosts:!0,targetRef:w,targetSource:e.source,targetId:e.key,filterActive:!0,customProps:{...H}})]}):null}),_y=(n,e)=>n.length!==e.length?!1:!n.some((t,i)=>!hm.exports.isEqual(e[i],t));function X$e({displayTfs:n=!1,displayGrid:e=!0,isPolar:t=!1,backgroundColor:i="#d0d0d0",planeColor:s="#a8a8a8",highlightColor:o="#00ffff",plane:l=0,translateSnap:u=0,rotateSnap:h=0,scaleSnap:d=0,debug:m=!1}){m&&console.log("content rerender");const _=Hh(re=>re.camera),v=Cs(re=>re.clock,Md);Nf(()=>{v.update()});const E=Cs(re=>hm.exports.sortBy(Object.entries(re.tfs).map(([ie,de])=>({key:ie,frame:de.frame,transformMode:de.transformMode,source:"tfs"})),ie=>ie.key),_y),w=Cs(re=>hm.exports.sortBy(Object.entries(re.items).map(([ie,de])=>({key:ie,frame:de.frame,transformMode:de.transformMode,source:"items"})),ie=>ie.key),_y),x=Cs(re=>hm.exports.sortBy(Object.entries(re.lines).map(([ie,de])=>({key:ie,frame:de.frame,source:"lines"})),ie=>ie.key),_y),A=Cs(re=>hm.exports.sortBy(Object.entries(re.hulls).map(([ie,de])=>({key:ie,frame:de.frame,source:"hulls"})),ie=>ie.key),_y),O=Cs(re=>hm.exports.sortBy(Object.entries(re.texts).map(([ie,de])=>({key:ie,frame:de.frame,source:"texts"})),ie=>ie.key),_y),k=Cs(re=>hm.exports.sortBy(Object.entries(re.points).map(([ie,de])=>({key:ie,frame:de.frame,source:"points"})),ie=>ie.key),_y),N=Cs(re=>hm.exports.sortBy(Object.entries(re.widgets).map(([ie,de])=>({key:ie,frame:de.frame,source:"widgets"})),ie=>ie.key),_y),D=[...w,...E].filter(re=>["translate","rotate","scale","translate-x","translate-y","translate-z","rotate-x","rotate-y","rotate-z","scale-x","scale-y","scale-z"].includes(re.transformMode)),U=he.useRef(),F=he.useRef(),H=he.useRef(),z=he.useRef(),J=GTe(s),te=[J.r,J.g,J.b,.5];return mc(Tr.Fragment,{children:[Xt(nTe,{ref:z,makeDefault:!0,camera:_}),Xt("pointLight",{ref:F,intensity:.5,position:[-1,-3,3],color:"#FFFAEE"}),Xt(zTe,{ref:U,intensity:.7,color:"white"}),Xt(HTe,{ref:H,castShadow:!0,position:[5,15,15],intensity:.6,color:"#FFFAEE"}),Xt("spotLight",{penumbra:1,position:[-1,-1,4],intensity:.3,castShadow:!0,color:"#FFFAEE"}),Xt("color",{attach:"background",args:[i]}),Xt("fogExp2",{attach:"fog",args:[i,.01]}),Xt(oTe,{receiveShadow:!0,scale:1e3,position:[0,0,l-.01],material:Zg(...te)}),mc(O$e,{children:[Xt(k$e,{autoClear:!1,children:Xt(L$e,{visibleEdgeColor:o,hiddenEdgeColor:o,blur:!0,kernelSize:1,edgeStrength:50,pulseSpeed:.25,xRay:!0})}),Xt(oF,{activeTf:"world",displayTfs:n,allTfs:E,allItems:w,allLines:x,allHulls:A,allTexts:O,allPoints:k,allWidgets:N,highlightColor:o})]}),Xt("group",{position:[0,0,l],rotation:[Math.PI/2,0,0],up:[0,0,1],children:e&&(t?Xt("polarGridHelper",{args:[10,16,8,64,"white","gray"]}):Xt("gridHelper",{args:[20,20,"white","gray"]}))}),D.map(re=>Xt(j$e,{objectInfo:re,mode:re.transformMode,displayTfs:n,allTfs:E,allItems:w,allLines:x,allHulls:A,allTexts:O,allPoints:k,allWidgets:N,translateSnap:u,rotateSnap:h,scaleSnap:d,highlightColor:o,onDragEnd:()=>{z.current&&(z.current.enabled=!0)},onDragStart:()=>{z.current&&(z.current.enabled=!1)}},`movableObjectTransform-${re.key}`))]})}ss.DefaultUp.set(0,0,1);function Y$e({backgroundColor:n="#d0d0d0",store:e,fov:t=60,onPointerMissed:i=()=>{},meshLookup:s={},debug:o=!1,...l}){return o&&console.log("Scene rerender"),Xt(hbe,{camera:{up:[0,0,1],fov:t,position:[0,-3,3]},shadows:!0,style:{background:n||"#d0d0d0"},onPointerMissed:i||(()=>{}),children:Xt(UTe,{store:e,debug:o,children:Xt(B$e,{meshes:s,children:Xt(he.Suspense,{children:Xt(X$e,{...l,backgroundColor:n,debug:o})})})})})}var aF={},K$e=Mw;Object.defineProperty(aF,"__esModule",{value:!0});var aX=aF.default=void 0,J$e=K$e(rP()),Q$e=gt;aX=aF.default=(0,J$e.default)((0,Q$e.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");var lF={},q$e=Mw;Object.defineProperty(lF,"__esModule",{value:!0});var lX=lF.default=void 0,Z$e=q$e(rP()),eSe=gt;lX=lF.default=(0,Z$e.default)((0,eSe.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const tSe="/gpu-programming/assets/compile-worker-CObbPgPV.js",nSe={s_Acceptance:"s_Acceptance.wav",s_Amazement:"s_Amazement.wav",s_Amazement2:"s_Amazement2.wav",s_Anger:"s_Anger.wav",s_Anger2:"s_Anger2.wav",s_Anger3:"s_Anger3.wav",s_Anger4:"s_Anger4.wav",s_Annoyance:"s_Annoyance.wav",s_Annoyance2:"s_Annoyance2.wav",s_Annoyance3:"s_Annoyance3.wav",s_Annoyance4:"s_Annoyance4.wav",s_Awe:"s_Awe.wav",s_Awe2:"s_Awe2.wav",s_Awe3:"s_Awe3.wav",s_Boredom:"s_Boredom.wav",s_Disapproval:"s_Disapproval.wav",s_Disgust:"s_Disgust.wav",s_Disgust2:"s_Disgust2.wav",s_Disgust3:"s_Disgust3.wav",s_DisorientedConfused:"s_DisorientedConfused.wav",s_DisorientedConfused2:"s_DisorientedConfused2.wav",s_DisorientedConfused3:"s_DisorientedConfused3.wav",s_DisorientedConfused4:"s_DisorientedConfused4.wav",s_DisorientedConfused5:"s_DisorientedConfused5.wav",s_DisorientedConfused6:"s_DisorientedConfused6.wav",s_Distraction:"s_Distraction.wav",s_Ecstacy:"s_Ecstacy.wav",s_Ecstacy2:"s_Ecstacy2.wav",s_Fear:"s_Fear.wav",s_Grief:"s_Grief.wav",s_Grief2:"s_Grief2.wav",s_Grief3:"s_Grief3.wav",s_Grief4:"s_Grief4.wav",s_Joy:"s_Joy.wav",s_Joy2:"s_Joy2.wav",s_Joy3:"s_Joy3.wav",s_Joy4:"s_Joy4.wav",s_Loathing:"s_Loathing.wav",s_Love:"s_Love.wav",s_PhraseByeBye:"s_PhraseByeBye.wav",s_PhraseEvilAhHa:"s_PhraseEvilAhHa.wav",s_PhraseHello:"s_PhraseHello.wav",s_PhraseNoNoNo:"s_PhraseNoNoNo.wav",s_PhraseOopsy:"s_PhraseOopsy.wav",s_PhraseOwOwOw:"s_PhraseOwOwOw.wav",s_PhraseOwwww:"s_PhraseOwwww.wav",s_PhraseUhOh:"s_PhraseUhOh.wav",s_Rage:"s_Rage.wav",s_Sadness:"s_Sadness.wav",s_Sadness2:"s_Sadness2.wav",s_Sadness3:"s_Sadness3.wav",s_Sadness4:"s_Sadness4.wav",s_Sadness5:"s_Sadness5.wav",s_Sadness6:"s_Sadness6.wav",s_Sadness7:"s_Sadness7.wav",s_Sleepy:"s_Sleepy.wav",s_Sleepy2:"s_Sleepy2.wav",s_Sleepy3:"s_Sleepy3.wav",s_Sleepy4:"s_Sleepy4.wav",s_SleepySnore:"s_SleepySnore.wav",s_SystemCameraShutter:"s_SystemCameraShutter.wav"},hG=n=>nSe[n],rSe={e_Sleeping:"e_Sleeping.jpg",e_SleepingZZZ:"e_SleepingZZZ.jpg",e_Contempt:"e_Contempt.jpg",e_ContentLeft:"e_ContentLeft.jpg",e_ContentRight:"e_ContentRight.jpg",e_Disoriented:"e_Disoriented.jpg",e_EcstacyHilarious:"e_EcstacyHilarious.jpg",e_EcstacyStarryEyed:"e_EcstacyStarryEyed.jpg",e_JoyGoofy:"e_JoyGoofy.jpg",e_JoyGoofy2:"e_JoyGoofy2.jpg",e_JoyGoofy3:"e_JoyGoofy3.jpg",e_Love:"e_Love.jpg",e_Rage:"e_Rage.jpg",e_Rage2:"e_Rage2.jpg",e_Rage3:"e_Rage3.jpg",e_Rage4:"e_Rage4.jpg",e_RemorseShame:"e_RemorseShame.jpg",eyes_acceptance:"eyes_acceptance.jpg",eyes_admiration:"eyes_admiration.jpg",eyes_amazement:"eyes_amazement.jpg",eyes_anger:"eyes_anger.jpg",eyes_annoyed:"eyes_annoyed.jpg",eyes_anticipation:"eyes_anticipation.png",eyes_apprehension:"eyes_apprehension.jpg",eyes_apprehension_1:"eyes_apprehension_1.jpg",eyes_boredom:"eyes_boredom.jpg",eyes_default:"eyes_default.jpg",eyes_disgust:"eyes_disgust.jpg",eyes_distraction:"eyes_distraction.gif",eyes_ecstasy_frame_1:"eyes_ecstasy_frame_1.jpg",eyes_ecstasy_frame_2:"eyes_ecstasy_frame_2.jpg",eyes_fear:"eyes_fear.jpg",eyes_grief:"eyes_grief.jpg",eyes_interest:"eyes_interest.jpg",eyes_joy:"eyes_joy.jpg",eyes_loathing:"eyes_loathing.jpg",eyes_pensiveness:"eyes_pensiveness.jpg",eyes_rage:"eyes_rage.jpg",eyes_sad:"eyes_sad.jpg",eyes_serenity:"eyes_serenity.jpg",eyes_surprise:"eyes_surprise.png",eyes_terror:"eyes_terror.jpg",eyes_trust:"eyes_trust.jpg",eyes_vigilance:"eyes_vigilance.jpg"},iSe=n=>rSe[n],sSe=({blocks:n,tfs:e})=>{var t=e[Pr("Left")],i=e[Pr("Right")],s=e[Pr("Head")],o=e[Pr("Base")];let l={Left:{x:[t.rotation.x],y:[t.rotation.y],z:[t.rotation.z],w:[t.rotation.w]},Right:{x:[i.rotation.x],y:[i.rotation.y],z:[i.rotation.z],w:[i.rotation.w]},Head:{x:[s.rotation.x],y:[s.rotation.y],z:[s.rotation.z],w:[s.rotation.w]},Base:{position:{x:[o.position.x],y:[o.position.y],z:[o.position.z]},rotation:{x:[o.rotation.x],y:[o.rotation.y],z:[o.rotation.z],w:[o.rotation.w]}},Time:[0]};const u=(F,H,z)=>{if(F==="both")h(H,z,H,z);else if(z>0){var J=F,te=F==="Left"?"Right":"Left",re={rotation:{x:l[J].x[l[J].x.length-1],y:l[J].y[l[J].y.length-1],z:l[J].z[l[J].z.length-1],w:l[J].w[l[J].w.length-1]}},ie=AM(re.rotation),de=2*Pc*MM*Math.abs(ie.y-H),oe=de/(z/100*i2),ue={x:0,y:H-s2,z:0},ge=1;if(ue.y<0&&ie.y>0||ue.y>0&&ie.y<0){let Z=(ue.y-ie.y)/2,ne=ue.y-Z;var Ae=N0(0,ne*Pc/180,0);l[J].w.push(Ae._w),l[J].x.push(Ae._x),l[J].y.push(Ae._y),l[J].z.push(Ae._z),l.Time.push(oe/2*Op),ge+=1}var j=N0(ue.x,ue.y*Pc/180,ue.z);l[J].w.push(j._w),l[J].x.push(j._x),l[J].y.push(j._y),l[J].z.push(j._z);for(let Z=0;Z<ge;Z++)l[te].w.push(l[te].w[l[te].w.length-1]),l[te].x.push(l[te].x[l[te].x.length-1]),l[te].y.push(l[te].y[l[te].y.length-1]),l[te].z.push(l[te].z[l[te].z.length-1]),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);ge>1?l.Time.push(oe/2*Op):l.Time.push(oe*Op)}},h=(F,H,z,J)=>{if(H>0||J>0){var te={rotation:{x:l.Left.x[l.Left.x.length-1],y:l.Left.y[l.Left.y.length-1],z:l.Left.z[l.Left.z.length-1],w:l.Left.w[l.Left.w.length-1]}},re={rotation:{x:l.Right.x[l.Right.x.length-1],y:l.Right.y[l.Right.y.length-1],z:l.Right.z[l.Right.z.length-1],w:l.Right.w[l.Right.w.length-1]}},ie=AM(te.rotation),de=2*Pc*MM*Math.abs(ie.y-F),oe=de/(H/100*i2),ue=AM(re.rotation),ge=2*Pc*MM*Math.abs(ue.y-z),Ae=ge/(J/100*i2),j=H===0?Ae:J===0?oe:Math.max(oe,Ae),Z={x:0,y:F-s2,z:0},ne=N0(Z.x,Z.y*Pc/180,Z.z),le={x:0,y:z-s2,z:0},_e=N0(le.x,le.y*Pc/180,le.z);let Xe=1;if(Z.y<0&&ie.y>0||Z.y>0&&ie.y<0||le.y<0&&ue.y>0||le.y>0&&ue.y<0){let Re=(Z.y-ie.y)/2,Je=(Z.y-ie.y)/2,et=Z.y-Re,at=le.y-Je;var Oe=N0(0,et*Pc/180,0),xe=N0(0,at*Pc/180,0);H>0?(l.Left.w.push(Oe._w),l.Left.x.push(Oe._x),l.Left.y.push(Oe._y),l.Left.z.push(Oe._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),J>0?(l.Right.w.push(xe._w),l.Right.x.push(xe._x),l.Right.y.push(xe._y),l.Right.z.push(xe._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1])),l.Time.push(j/2*Op),Xe+=1}H>0?(l.Left.w.push(ne._w),l.Left.x.push(ne._x),l.Left.y.push(ne._y),l.Left.z.push(ne._z)):(l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1])),J>0?(l.Right.w.push(_e._w),l.Right.x.push(_e._x),l.Right.y.push(_e._y),l.Right.z.push(_e._z)):(l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]));for(let Re=0;Re<Xe;Re++)l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]);Xe>1?l.Time.push(j/2*Op):l.Time.push(j*Op)}},d=(F,H,z,J)=>{if(J>0){var te=N0(H*Pc/180,F*Pc/180,z*Pc/180);l.Head.w.push(te._w),l.Head.x.push(te._x),l.Head.y.push(te._y),l.Head.z.push(te._z),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Base.position.x.push(l.Base.position.x[l.Base.position.x.length-1]),l.Base.position.y.push(l.Base.position.y[l.Base.position.y.length-1]),l.Base.position.z.push(l.Base.position.z[l.Base.position.z.length-1]),l.Base.rotation.w.push(l.Base.rotation.w[l.Base.rotation.w.length-1]),l.Base.rotation.x.push(l.Base.rotation.x[l.Base.rotation.x.length-1]),l.Base.rotation.y.push(l.Base.rotation.y[l.Base.rotation.y.length-1]),l.Base.rotation.z.push(l.Base.rotation.z[l.Base.rotation.z.length-1]),l.Time.push(J*Op)}},m=(F,H,z)=>{if(z>0){var J={position:{x:l.Base.position.x[l.Base.position.x.length-1],y:l.Base.position.y[l.Base.position.y.length-1],z:l.Base.position.z[l.Base.position.z.length-1]},rotation:{x:l.Base.rotation.x[l.Base.rotation.x.length-1],y:l.Base.rotation.y[l.Base.rotation.y.length-1],z:l.Base.rotation.z[l.Base.rotation.z.length-1],w:l.Base.rotation.w[l.Base.rotation.w.length-1]}},te=H/100*tV*z/1e3,re=F/100*eV*z/1e3,ie=te!==0?re/te:re,de=new Go(J.rotation.x,J.rotation.y,J.rotation.z,J.rotation.w),oe=rV(de);if(te!==0){var ue={x:0,y:0,z:te};de=N0(ue.x,ue.y,ue.z),de.multiply(new Go(J.rotation.x,J.rotation.y,J.rotation.z,J.rotation.w))}let ge=J.position.x,Ae=J.position.y;te>0?ge+=ie:te<0&&(ge-=ie);let j=null;te!==0?j=new Mt(ge+Math.cos(oe)*re/te*Math.cos(re),Ae+Math.sin(oe)*re/te*Math.sin(re),J.position.z):j=new Mt(ge+Math.cos(oe)*re,Ae+Math.sin(oe)*re,J.position.z),l.Base.position.x.push(j.x),l.Base.position.y.push(j.y),l.Base.position.z.push(j.z),l.Base.rotation.w.push(de._w),l.Base.rotation.x.push(de._x),l.Base.rotation.y.push(de._y),l.Base.rotation.z.push(de._z),l.Head.x.push(l.Head.x[l.Head.x.length-1]),l.Head.y.push(l.Head.y[l.Head.y.length-1]),l.Head.z.push(l.Head.z[l.Head.z.length-1]),l.Head.w.push(l.Head.w[l.Head.w.length-1]),l.Left.w.push(l.Left.w[l.Left.w.length-1]),l.Left.x.push(l.Left.x[l.Left.x.length-1]),l.Left.y.push(l.Left.y[l.Left.y.length-1]),l.Left.z.push(l.Left.z[l.Left.z.length-1]),l.Right.w.push(l.Right.w[l.Right.w.length-1]),l.Right.x.push(l.Right.x[l.Right.x.length-1]),l.Right.y.push(l.Right.y[l.Right.y.length-1]),l.Right.z.push(l.Right.z[l.Right.z.length-1]),l.Time.push(z)}},_=()=>{let F=JSON.parse(JSON.stringify(e)),H=JSON.parse(JSON.stringify(e)),z=l.Time.length,J=0,te=[],re=[],ie=[],de=[],oe=[],ue=[],ge=[],Ae=[],j=[],Z=[],ne=[],le=[],_e=[],Oe=[],xe=[],Xe=[],Re=[],Je=[],et=[],at=[];for(let We=1;We<z;We++){let wt=l.Time[We],xt=new Go(l.Left.x[We],l.Left.y[We],l.Left.z[We],l.Left.w[We]),ht=new Go(l.Right.x[We],l.Right.y[We],l.Right.z[We],l.Right.w[We]),St=new Go(l.Head.x[We],l.Head.y[We],l.Head.z[We],l.Head.w[We]),It=new Go(l.Base.rotation.x[We],l.Base.rotation.y[We],l.Base.rotation.z[We],l.Base.rotation.w[We]),mt=new Mt(l.Base.position.x[We],l.Base.position.y[We],l.Base.position.z[We]);for(let ve=10;ve<Op;ve+=10){te.push(wt/BZ*ve+J);let ee=new Go(l.Left.x[We-1],l.Left.y[We-1],l.Left.z[We-1],l.Left.w[We-1]),ke=new Go(l.Right.x[We-1],l.Right.y[We-1],l.Right.z[We-1],l.Right.w[We-1]),ot=new Go(l.Head.x[We-1],l.Head.y[We-1],l.Head.z[We-1],l.Head.w[We-1]),dt=new Go(l.Base.rotation.x[We-1],l.Base.rotation.y[We-1],l.Base.rotation.z[We-1],l.Base.rotation.w[We-1]),$t=new Mt(l.Base.position.x[We-1],l.Base.position.y[We-1],l.Base.position.z[We-1]);ee.slerp(xt,ve/Op),ke.slerp(ht,ve/Op),ot.slerp(St,ve/Op),dt.slerp(It,ve/Op),$t.lerp(mt,ve/Op),re.push(ee._w),ie.push(ee._x),de.push(ee._y),oe.push(ee._z),ue.push(ke._w),ge.push(ke._x),Ae.push(ke._y),j.push(ke._z),Z.push(ot._w),ne.push(ot._x),le.push(ot._y),_e.push(ot._z),Oe.push($t.x),xe.push($t.y),Xe.push($t.z),Re.push(dt._w),Je.push(dt._x),et.push(dt._y),at.push(dt._z)}J+=wt}let Qe=new Go(l.Left.x[z-1],l.Left.y[z-1],l.Left.z[z-1],l.Left.w[z-1]),De=new Go(l.Right.x[z-1],l.Right.y[z-1],l.Right.z[z-1],l.Right.w[z-1]),Se=new Go(l.Head.x[z-1],l.Head.y[z-1],l.Head.z[z-1],l.Head.w[z-1]),Pe=new Go(l.Base.rotation.x[z-1],l.Base.rotation.y[z-1],l.Base.rotation.z[z-1],l.Base.rotation.w[z-1]),rt=new Mt(l.Base.position.x[z-1],l.Base.position.y[z-1],l.Base.position.z[z-1]);return te.push(1/0),re.push(Qe._w),ie.push(Qe._x),de.push(Qe._y),oe.push(Qe._z),ue.push(De._w),ge.push(De._x),Ae.push(De._y),j.push(De._z),Z.push(Se._w),ne.push(Se._x),le.push(Se._y),_e.push(Se._z),Oe.push(rt.x),xe.push(rt.y),Xe.push(rt.z),Re.push(Pe._w),Je.push(Pe._x),et.push(Pe._y),at.push(Pe._z),F[Pr("Left")].rotation.w=ca(te,re),F[Pr("Left")].rotation.x=ca(te,ie),F[Pr("Left")].rotation.y=ca(te,de),F[Pr("Left")].rotation.z=ca(te,oe),H[Pr("Left")].rotation.w=Qe._w,H[Pr("Left")].rotation.x=Qe._x,H[Pr("Left")].rotation.y=Qe._y,H[Pr("Left")].rotation.z=Qe._z,F[Pr("Right")].rotation.w=ca(te,ue),F[Pr("Right")].rotation.x=ca(te,ge),F[Pr("Right")].rotation.y=ca(te,Ae),F[Pr("Right")].rotation.z=ca(te,j),H[Pr("Right")].rotation.w=De._w,H[Pr("Right")].rotation.x=De._x,H[Pr("Right")].rotation.y=De._y,H[Pr("Right")].rotation.z=De._z,F[Pr("Head")].rotation.w=ca(te,Z),F[Pr("Head")].rotation.x=ca(te,ne),F[Pr("Head")].rotation.y=ca(te,le),F[Pr("Head")].rotation.z=ca(te,_e),H[Pr("Head")].rotation.w=Se._w,H[Pr("Head")].rotation.x=Se._x,H[Pr("Head")].rotation.y=Se._y,H[Pr("Head")].rotation.z=Se._z,F[Pr("Base")].rotation.w=ca(te,Re),F[Pr("Base")].rotation.x=ca(te,Je),F[Pr("Base")].rotation.y=ca(te,et),F[Pr("Base")].rotation.z=ca(te,at),F[Pr("Base")].position.x=ca(te,Oe),F[Pr("Base")].position.y=ca(te,xe),F[Pr("Base")].position.z=ca(te,Xe),H[Pr("Base")].rotation.w=Pe._w,H[Pr("Base")].rotation.x=Pe._x,H[Pr("Base")].rotation.y=Pe._y,H[Pr("Base")].rotation.z=Pe._z,H[Pr("Base")].position.x=rt.x,H[Pr("Base")].position.y=rt.y,H[Pr("Base")].position.z=rt.z,{newTfs:F,newEndingTfs:H}},v=F=>Object.values(n).filter(H=>H.type===F)[0],E=F=>n[F],w=(F,H)=>{const z=E(F);let J=E(H);if(N(z,z.type))for(N(J,J.type);J.next;)J=E(J.next),N(J,J.type)},x=F=>F==="TRUE";function A(F,H){return F=Math.ceil(F),H=Math.floor(H),Math.floor(Math.random()*(H-F+1))+F}function O(F){if(F===2||F===3)return!0;if(F<=1||F%2===0||F%3===0)return!1;for(let H=5;H*H<=F;H+=6)if(F%H===0||F%(H+2)===0)return!1;return!0}function k(F){return typeof F!="string"?F.shadow.fields.NUM:N(E(F))}const N=(F,H)=>{switch(!0){case H==="controls_if":if(!F.inputs||!F.inputs.IF0||!F.inputs.DO0)throw new Error("err: controls_if not complete!");w(F.inputs.IF0,F.inputs.DO0);break;case H==="logic_boolean":return x(F.fields.BOOL);case H==="logic_compare":if(!F.inputs||!F.inputs.A||!F.inputs.B)throw new Error("err: logic_compare is not complete!");const Pe=F.fields.OP,rt=F.inputs.A,We=F.inputs.B,wt=E(rt),xt=E(We);if(Pe==="EQ")return N(wt,wt.type)==N(xt,xt.type);if(Pe==="NEQ")return N(wt,wt.type)!==N(xt,xt.type);if(Pe==="LT")return N(wt,wt.type)<N(xt,xt.type);if(Pe==="LTE")return N(wt,wt.type)<=N(xt,xt.type);if(Pe==="GT")return N(wt,wt.type)>N(xt,xt.type);if(Pe==="GTE")return N(wt,wt.type)>=N(xt,xt.type);case H==="logic_operation":if(!F.inputs||!F.inputs.A||!F.inputs.B)throw new Error("err: logic_operation is not complete!");const ht=F.fields.OP,St=F.inputs.A,It=F.inputs.B,mt=E(St),ve=E(It);return ht==="OR"?N(mt,mt.type)||N(ve,ve.type):N(mt,mt.type)&&N(ve,ve.type);case H==="logic_negate":if(!F.inputs)throw new Error("err: logic_negate is not complete!");const ee=E(F.inputs.BOOL);return!N(ee,ee.type);case H==="logic_boolean":return!F.fields.BOOL!=="FALSE";case H==="logic_null":return null;case H==="logic_ternary":if(!F.inputs||!F.inputs.IF||!F.inputs.THEN||!F.inputs.ELSE)throw new Error("err: logic_ternary is not complete!");const ke=F.inputs.IF,ot=F.inputs.THEN,dt=F.inputs.ELSE,$t=E(ke),ct=E(ot),Ge=E(dt);return N($t,$t.type)?N(ct,ct.type):N(Ge,Ge.type);case H==="controls_repeat_ext":const X=k(F.inputs.TIMES);if(!F.inputs.DO)throw new Error("err: controls_repeat_ext is not complete!");let Q=E(F.inputs.DO);for(let Ie=0;Ie<X;Ie++){N(Q,Q.type);let st=Q;for(;st.next;)st=E(st.next),N(st,st.type)}return;case H==="math_number":return F.fields.NUM;case H==="math_number_property":const ae=F.fields.PROPERTY,$e=k(F.inputs.NUMBER_TO_CHECK);if(ae==="EVEN")return $e%2===0;if(ae==="ODD")return $e%2===1;if(ae==="PRIME")return O($e);if(ae==="WHOLE")return $e%1===0;if(ae==="POSITIVE")return $e>0;if(ae==="NEGATIVE")return $e<0;if(ae==="DIVISIBLE_BY"){if(!F.inputs||!F.inputs.DIVISOR)throw new Error("err: DIVISOR is not filled!");if(F.inputs.DIVISOR===0)throw new Error("Note that divisor cannot be 0!");return $e%F.inputs.DIVISOR===0}return;case H==="math_random_int":const Ve=k(F.inputs.FROM),Pt=k(F.inputs.TO);return A(Ve,Pt);case H==="colour_picker":return f1(F.fields.COLOUR);case H==="colour_random":let Fe=A(0,255),Wt=A(0,255),lt=A(0,255);return{red:Fe,green:Wt,blue:lt};case H==="colour_rgb":const Ut=k(F.inputs.RED),Ft=k(F.inputs.GREEN),Tn=k(F.inputs.BLUE);return{red:Ut,green:Ft,blue:Tn};case H==="colour_blend":const Er=k(F.inputs.RATIO),cr=f1(F.inputs.COLOUR1.shadow.fields.COLOUR),Gr=f1(F.inputs.COLOUR2.shadow.fields.COLOUR),sr=cr.r*Er,Xn=cr.g*Er,q=cr.b*Er,me=Gr.r,Ne=Gr.g,nt=Gr.b,Rt=(me+sr)/(Er+1),Qt=(Ne+Xn)/(Er+1),gn=(nt+q)/(Er+1);return{red:Rt,green:Qt,blue:gn};case H==="ChangeLED":if(!F.inputs||!F.inputs.FIELD_ChangeLED)throw new Error("err: ChangeLED is not complete!");var z=E(F.inputs.FIELD_ChangeLED),J=f1(z.fields.COLOUR),Ae={Red:J.r,Green:J.g,Blue:J.b};return;case H==="TransitionLED":if(!F.inputs||!F.inputs.COLOR1||!F.inputs.COLOR2)throw new Error("err: TransitionLED is not complete!");var te=E(F.inputs.COLOR1),re=E(F.inputs.COLOR2),ie=f1(te.fields.COLOUR),de=f1(re.fields.COLOUR),Qe=F.fields.FIELD_TransitionTime_TimeMs,oe=F.fields.TRANSITION_TYPE,Ae={Red:ie.r,Green:ie.g,Blue:ie.b,Red2:de.r,Green2:de.g,Blue2:de.b,TransitionType:oe,TimeMS:Qe};return;case H==="DisplayImage":if(!F.inputs||!F.inputs.FIELD_DisplayImage_Filename)throw new Error("err: DisplayImage is not complete!");var ue=E(F.inputs.FIELD_DisplayImage_Filename),ge=iSe(ue.type);return;case H==="PlayAudio":if(!F.inputs||!F.inputs.FIELD_PlayAudio_Filename)throw new Error("err: PlayAudio is not complete!");var ue=E(F.inputs.FIELD_PlayAudio_Filename),ge=hG(ue.type);return;case H==="DisplayAnimation":if(!F.inputs||!F.inputs.FIELD_DisplayAnimation_Filename)throw new Error("err: DisplayAnimation is not complete!");var ue=E(F.inputs.FIELD_DisplayAnimation_Filename),ge=hG(ue.type),Ae={FileName:ge};readFile(Ae);return;case H==="DisplayText":F.fields.FIELD_DisplayText_Text;return;case H==="TurnOnFlashlight":return;case H==="TurnOffFlashlight":return;case H==="WaitForSeconds":var Qe=parseFloat(F.fields.NumSeconds);return;case H==="MoveArm":var Z=F.fields.FIELD_MoveArm_Arm==="Right"?"Right":"Left",j=parseInt(F.fields.FIELD_MoveArm_Position),Je=parseInt(F.fields.FIELD_MoveArm_Velocity);u(Z,j,Je);return;case H==="MoveArm2":var j=parseInt(F.fields.FIELD_MoveArm2_Position),Je=parseInt(F.fields.FIELD_MoveArm2_Velocity),Z="both";u(Z,j,Je);return;case H==="MoveArms2":var ne=k(F.inputs.FIELD_MoveArm_LeftPosition),le=k(F.inputs.FIELD_MoveArm_LeftVelocity),_e=k(F.inputs.FIELD_MoveArm_RightPosition),Oe=k(F.inputs.FIELD_MoveArm_RightVelocity);h(ne,le,_e,Oe);return;case H==="MoveHead":var xe=F.fields.FIELD_MoveHead_Pitch==="D"?25:-40,Qe=2;d(xe,0,0,Qe);return;case H==="MoveHead3":var xe,Xe,Re;xe=k(F.inputs.FIELD_MoveHead_Pitch),Xe=k(F.inputs.FIELD_MoveHead_Roll),Re=k(F.inputs.FIELD_MoveHead_Yaw),Qe=k(F.inputs.FIELD_MoveHead_Time),d(xe,Xe,Re,Qe);return;case H==="DriveTime":var at=F.fields.FIELD_DriveTime_Direction,Je=parseInt(F.fields.FIELD_DriveTime_Velocity),Qe=parseInt(F.fields.FIELD_DriveTime_TimeMs),et=at==="F"?Je:-Je;m(et,0,Qe);return;case H==="DriveTime2":var et=k(F.inputs.FIELD_DriveTime_Velocity),De=k(F.inputs.FIELD_DriveTime_Angular),Qe=k(F.inputs.FIELD_DriveTime_TimeMs);m(et,De,Qe);return;case H==="Turn":var at=F.fields.FIELD_Turn_Direction,Qe=parseInt(F.fields.FIELD_Turn_Duration),De=at==="L"?100:-100;m(0,De,Qe);return;case H==="Turn2":var at=F.fields.FIELD_Turn_Direction,Qe=parseInt(k(F.inputs.FIELD_Turn_Duration)),De=at==="L"?100:-100;m(0,De,Qe);return;case H=="Speak":var Se=E(F.inputs.FIELD_Speak_Text);Se.fields.TEXT;return;case H=="SpeakDefault":F.fields.FIELD_SpeakDefault_Text;return;default:return}};let U=v("Start");for(;U&&U.next;)U=E(U.next),N(U,U.type);return console.log(l),_()};function oSe(n){const e=Ao(zh(w=>w.resetSim)),t=Ao(zh(w=>w.toggleSimOnly)),i=Ao(zh(w=>w.isConnected)),s=he.useRef(null),o=Ao(zh(w=>w.ip)),l=Ao(zh(w=>w.getBlocks)),u=Ao(zh(w=>w.clock)),h=Ao(zh(w=>w.mistyImageList)),d=Ao(zh(w=>w.mistyAudioList)),m=Ao(zh(w=>w.simOnly)),_=Ao(zh(w=>w.endingTfs)),v=Ao(zh(w=>w.setAnimationFrames)),E=async()=>{u.reset_elapsed(),s.current&&(s.current.terminate(),s.current=null);const w=`import ${JSON.stringify(new URL(tSe,import.meta.url))}`,x=new Blob([w],{type:"application/javascript"}),A=URL.createObjectURL(x);let O=new Worker(A,{type:"module"});O.onmessage=function(D){console.log("Message received from worker "+D.data),s.current=null},O.onerror=function(D){console.log(D),URL.revokeObjectURL(A)},O.postMessage({blocks:l(),mistyAudioList:d,mistyImageList:h,tfs:_,ip:o,runOnRobot:!m}),s.current=O;let{newTfs:k,newEndingTfs:N}=sSe({blocks:l(),tfs:_});v(k,N),cc("Click Run Code button")};return gt.jsxs(ZB,{style:{position:"absolute",left:"10px",bottom:"0px",padding:"0px"},children:[gt.jsxs(nD,{style:{paddingLeft:"0px",paddingRight:"0px"},children:[gt.jsx(ZL,{variant:"contained","aria-label":"play",style:{backgroundColor:"#FAFAFA",marginBottom:"5px"},onClick:E,id:"runButton",children:gt.jsx(lX,{})}),gt.jsx(ZL,{variant:"contained","aria-label":"restart",style:{backgroundColor:"#FAFAFA",marginLeft:"5px",marginBottom:"5px"},onClick:e,children:gt.jsx(aX,{})})]}),i&&gt.jsx(nD,{style:{backgroundColor:"#FAFAFA",borderRadius:"5px",marginBottom:"5px",paddingLeft:"10px",paddingRight:"0px"},children:gt.jsx(Zae,{children:gt.jsx(Xae,{control:gt.jsx(uae,{onChange:w=>t(w.target.checked)}),label:"Sim only"})})})]})}function aSe(n){const e={displayTfs:!1,displayGrid:!0,isPolar:!1,backgroundColor:"#3a3a3a",planeColor:"#3a3a3a",highlightColor:"#ffffff",plane:0,fov:60,ar:!1,vr:!1};return gt.jsxs(sR,{height:"100%",children:[gt.jsx(Y$e,{style:{overflow:"hidden"},store:Ao,meshLookup:kde,...e}),gt.jsx(oSe,{})]})}const lSe="/gpu-programming/assets/uw-crest-color-web-digital-CjofXveo.svg",uSe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20194%20209'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-67.3413,-198.983)'%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,37.529,47.7569)'%3e%3cpath%20d='M-4.263,-4.263C-1.908,-4.263%200.001,-2.353%200.001,0.002C0.001,2.356%20-1.908,4.263%20-4.263,4.263C-6.617,4.263%20-8.527,2.356%20-8.527,0.002C-8.527,-2.353%20-6.617,-4.263%20-4.263,-4.263'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,59.9955,60.1716)'%3e%3cpath%20d='M-2.673,-2.671C-1.196,-2.671%20-0.001,-1.477%20-0.001,0.001C-0.001,1.477%20-1.196,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.477%20-5.342,0.001C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,18.8329,65.7474)'%3e%3cpath%20d='M-2.671,-2.671C-1.196,-2.671%200.001,-1.476%200.001,0C0.001,1.475%20-1.196,2.671%20-2.671,2.671C-4.146,2.671%20-5.343,1.475%20-5.343,0C-5.343,-1.476%20-4.146,-2.671%20-2.671,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,34.0834,92.4773)'%3e%3cpath%20d='M-2.672,-2.672C-1.197,-2.672%200,-1.477%200,-0.001C0,1.475%20-1.197,2.672%20-2.672,2.672C-4.149,2.672%20-5.344,1.475%20-5.344,-0.001C-5.344,-1.477%20-4.149,-2.672%20-2.672,-2.672'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(0,-1,-1,0,47.2036,90.0173)'%3e%3cpath%20d='M-2.673,-2.671C-1.198,-2.671%20-0.001,-1.477%20-0.001,0C-0.001,1.476%20-1.198,2.673%20-2.673,2.673C-4.148,2.673%20-5.342,1.476%20-5.342,0C-5.342,-1.477%20-4.148,-2.671%20-2.673,-2.671'%20style='fill:rgb(64,63,65);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(4.16667,0,0,4.16667,0,0)'%3e%3cg%20transform='matrix(1,0,0,1,31.4239,88.2618)'%3e%3cpath%20d='M0,-31.486L-7.343,-31.486L-7.343,-24.621L-2.62,-27.134C-2.62,-27.134%20-1.885,-30.033%200,-31.486M-2.667,-21.8L-7.343,-19.427L-7.343,0L0.218,0C0.652,-4.687%201.012,-14.334%200.385,-17.054C-1.978,-18.859%20-2.667,-21.8%20-2.667,-21.8M16.67,-22.279C16.05,-19.824%2014.854,-18.168%2013.521,-16.972C16.087,-15.06%2018.567,-11.369%2018.567,-7.484L18.567,0L23.979,0L23.979,-22.367C22.277,-21.923%2019.538,-21.203%2016.67,-22.279M8.317,-13.886C7.15,-14.439%205.715,-14.459%205.715,-14.459L5.715,0L13.318,0L13.318,-6.519C13.318,-11.601%209.419,-13.365%208.317,-13.886M13.92,-31.486C15.038,-30.308%2015.911,-29.021%2016.417,-27.457C18.939,-25.75%2022.22,-26.601%2023.979,-26.855L23.979,-31.486L13.92,-31.486Z'%20style='fill:rgb(205,20,66);fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function cSe(n){return gt.jsxs(ZB,{style:{position:"absolute",left:"20px",bottom:"20px",zIndex:"101"},children:[gt.jsx("img",{style:{width:"70px",paddingBottom:"20px"},src:uSe}),gt.jsx("img",{width:"70px",src:lSe})]})}var uX={exports:{}};(function(n,e){(function(t,i){i()})(zu,function(){function t(d,m){return typeof m>"u"?m={autoBom:!1}:typeof m!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function i(d,m,_){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){h(v.response,m,_)},v.onerror=function(){console.error("could not download file")},v.send()}function s(d){var m=new XMLHttpRequest;m.open("HEAD",d,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(m)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof zu=="object"&&zu.global===zu?zu:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(d,m,_){var v=l.URL||l.webkitURL,E=document.createElement("a");m=m||d.name||"download",E.download=m,E.rel="noopener",typeof d=="string"?(E.href=d,E.origin===location.origin?o(E):s(E.href)?i(d,m,_):o(E,E.target="_blank")):(E.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(E.href)},4e4),setTimeout(function(){o(E)},0))}:"msSaveOrOpenBlob"in navigator?function(d,m,_){if(m=m||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(t(d,_),m);else if(s(d))i(d,m,_);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){o(v)})}}:function(d,m,_,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return i(d,m,_);var E=d.type==="application/octet-stream",w=/constructor/i.test(l.HTMLElement)||l.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||E&&w||u)&&typeof FileReader<"u"){var A=new FileReader;A.onloadend=function(){var N=A.result;N=x?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=N:location=N,v=null},A.readAsDataURL(d)}else{var O=l.URL||l.webkitURL,k=O.createObjectURL(d);v?v.location=k:location.href=k,v=null,setTimeout(function(){O.revokeObjectURL(k)},4e4)}});l.saveAs=h.saveAs=h,n.exports=h})})(uX);var hSe=uX.exports;const dSe=fb(hSe),pSe=()=>{const n=Ao(t=>t.closeModal),e=()=>{var t=new Blob([activityLog],{type:"text/plain;charset=utf-8"});dSe.saveAs(t,"activity log.txt")};return gt.jsx(Boe,{sx:{padding:0},children:gt.jsx(Goe,{sx:{flexDirection:"row",display:"flex",padding:0,margin:0},children:gt.jsxs(sR,{sx:{overflowY:"scroll",maxHeight:"70vh",width:"50vw"},children:[gt.jsx(tD,{onClick:e,children:"Download"}),gt.jsx(tD,{onClick:n,children:"Close"})]})})})},fSe=()=>{const n=Ao(e=>e.activeModal);return gt.jsx(Mae,{open:!!n,children:n&&gt.jsx(pSe,{})})},PO=jn("div")(({theme:n})=>({textAlign:"center",height:"100%"}));J_.common.defineBlocks(lJ);Object.assign(MT.javascriptGenerator.forBlock,cI);function mSe(){return gt.jsxs(sR,{width:"100vw",height:"calc(100vh - 65px)",padding:0,children:[gt.jsx(pce,{}),gt.jsx(cSe,{}),gt.jsxs(kA,{orientation:"vertical",style:{height:"100%",width:"100vw"},children:[gt.jsx(dC,{flex:.55,children:gt.jsx(PO,{style:{width:"100%",height:"100%",paddingLeft:"2px"},children:gt.jsx(gce,{})})}),gt.jsx(_f,{propagate:!0}),gt.jsx(dC,{flex:.45,children:gt.jsxs(kA,{orientation:"horizontal",children:[gt.jsx(dC,{children:gt.jsx(PO,{children:gt.jsx(aSe,{})})}),gt.jsx(_f,{propagate:!0}),gt.jsx(dC,{children:gt.jsx(PO,{})})]})})]}),gt.jsx(fSe,{})]})}UO.createRoot(document.getElementById("root")).render(gt.jsx(Tr.StrictMode,{children:gt.jsx(mSe,{})}));
