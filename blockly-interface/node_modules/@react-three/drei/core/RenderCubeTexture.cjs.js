"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("three"),t=require("react"),n=require("@react-three/fiber");function a(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var i=a(r),u=a(t);const c=u.forwardRef((({children:r,compute:t,renderPriority:a=-1,eventPriority:c=0,frames:s=1/0,stencilBuffer:l=!1,depthBuffer:f=!0,generateMipmaps:m=!1,resolution:p=896,near:d=.1,far:b=1e3,flip:g=!1,position:h,rotation:x,scale:v,quaternion:y,matrix:E,matrixAutoUpdate:P,...O},j)=>{const{size:q,viewport:w}=n.useThree(),T=u.useRef(null),R=u.useMemo((()=>{const e=new i.WebGLCubeRenderTarget(Math.max((p||q.width)*w.dpr,(p||q.height)*w.dpr),{stencilBuffer:l,depthBuffer:f,generateMipmaps:m});return e.texture.isRenderTargetTexture=!g,e.texture.flipY=!0,e.texture.type=i.HalfFloatType,e}),[p,g]);u.useEffect((()=>()=>R.dispose()),[R]);const[B]=u.useState((()=>new i.Scene));return u.useImperativeHandle(j,(()=>({scene:B,fbo:R,camera:T.current})),[R]),u.createElement(u.Fragment,null,n.createPortal(u.createElement(o,{renderPriority:a,frames:s,camera:T},r,u.createElement("group",{onPointerOver:()=>null})),B,{events:{compute:t,priority:c}}),u.createElement("primitive",e({object:R.texture},O)),u.createElement("cubeCamera",{ref:T,args:[d,b,R],position:h,rotation:x,scale:v,quaternion:y,matrix:E,matrixAutoUpdate:P}))}));function o({frames:e,renderPriority:r,children:t,camera:a}){let i=0;return n.useFrame((r=>{(e===1/0||i<e)&&(a.current.update(r.gl,r.scene),i++)}),r),u.createElement(u.Fragment,null,t)}exports.RenderCubeTexture=c;
