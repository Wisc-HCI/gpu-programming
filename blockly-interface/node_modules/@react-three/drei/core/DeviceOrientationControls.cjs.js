"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("@react-three/fiber"),t=require("react"),n=require("three-stdlib");function u(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var o=u(t);const c=o.forwardRef(((t,u)=>{const{camera:c,onChange:i,makeDefault:s,...l}=t,a=r.useThree((e=>e.camera)),f=r.useThree((e=>e.invalidate)),v=r.useThree((e=>e.get)),d=r.useThree((e=>e.set)),b=c||a,h=o.useMemo((()=>new n.DeviceOrientationControls(b)),[b]);return o.useEffect((()=>{const e=e=>{f(),i&&i(e)};return null==h||null==h.addEventListener||h.addEventListener("change",e),()=>null==h||null==h.removeEventListener?void 0:h.removeEventListener("change",e)}),[i,h,f]),r.useFrame((()=>null==h?void 0:h.update()),-1),o.useEffect((()=>{const e=h;return null==e||e.connect(),()=>null==e?void 0:e.dispose()}),[h]),o.useEffect((()=>{if(s){const e=v().controls;return d({controls:h}),()=>d({controls:e})}}),[s,h]),h?o.createElement("primitive",e({ref:u,object:h},l)):null}));exports.DeviceOrientationControls=c;
